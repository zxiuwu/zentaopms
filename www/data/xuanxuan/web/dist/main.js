/*! For license information please see main.js.LICENSE.txt */
var __FIX_DUMMY_LIBRARY_NAME_NOT_ALLOWED__;(()=>{var __webpack_modules__={47471:function(e){e.exports=function(){"use strict";var e=Array.prototype.slice;function t(e,t){t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e}function n(e){return i(e)?e:H(e)}function r(e){return l(e)?e:V(e)}function o(e){return u(e)?e:G(e)}function a(e){return i(e)&&!s(e)?e:q(e)}function i(e){return!(!e||!e[f])}function l(e){return!(!e||!e[d])}function u(e){return!(!e||!e[p])}function s(e){return l(e)||u(e)}function c(e){return!(!e||!e[h])}t(r,n),t(o,n),t(a,n),n.isIterable=i,n.isKeyed=l,n.isIndexed=u,n.isAssociative=s,n.isOrdered=c,n.Keyed=r,n.Indexed=o,n.Set=a;var f="@@__IMMUTABLE_ITERABLE__@@",d="@@__IMMUTABLE_KEYED__@@",p="@@__IMMUTABLE_INDEXED__@@",h="@@__IMMUTABLE_ORDERED__@@",m="delete",y=32,g=31,b={},v={value:!1},w={value:!1};function O(e){return e.value=!1,e}function S(e){e&&(e.value=!0)}function _(){}function C(e,t){t=t||0;for(var n=Math.max(0,e.length-t),r=new Array(n),o=0;o<n;o++)r[o]=e[o+t];return r}function E(e){return void 0===e.size&&(e.size=e.__iterate(k)),e.size}function P(e,t){if("number"!=typeof t){var n=t>>>0;if(""+n!==t||4294967295===n)return NaN;t=n}return t<0?E(e)+t:t}function k(){return!0}function j(e,t,n){return(0===e||void 0!==n&&e<=-n)&&(void 0===t||void 0!==n&&t>=n)}function x(e,t){return T(e,t,0)}function M(e,t){return T(e,t,t)}function T(e,t,n){return void 0===e?n:e<0?Math.max(0,t+e):void 0===t?e:Math.min(t,e)}var I="function"==typeof Symbol&&Symbol.iterator,D="@@iterator",A=I||D;function R(e){this.next=e}function N(e,t,n,r){var o=0===e?t:1===e?n:[t,n];return r?r.value=o:r={value:o,done:!1},r}function B(){return{value:void 0,done:!0}}function L(e){return!!z(e)}function F(e){return e&&"function"==typeof e.next}function U(e){var t=z(e);return t&&t.call(e)}function z(e){var t=e&&(I&&e[I]||e[D]);if("function"==typeof t)return t}function W(e){return e&&"number"==typeof e.length}function H(e){return null==e?ne():i(e)?e.toSeq():function(e){var t=ae(e)||"object"==typeof e&&new Q(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t}(e)}function V(e){return null==e?ne().toKeyedSeq():i(e)?l(e)?e.toSeq():e.fromEntrySeq():re(e)}function G(e){return null==e?ne():i(e)?l(e)?e.entrySeq():e.toIndexedSeq():oe(e)}function q(e){return(null==e?ne():i(e)?l(e)?e.entrySeq():e:oe(e)).toSetSeq()}R.prototype.toString=function(){return"[Iterator]"},R.KEYS=0,R.VALUES=1,R.ENTRIES=2,R.prototype.inspect=R.prototype.toSource=function(){return this.toString()},R.prototype[A]=function(){return this},t(H,n),H.of=function(){return H(arguments)},H.prototype.toSeq=function(){return this},H.prototype.toString=function(){return this.__toString("Seq {","}")},H.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},H.prototype.__iterate=function(e,t){return ie(this,e,t,!0)},H.prototype.__iterator=function(e,t){return le(this,e,t,!0)},t(V,H),V.prototype.toKeyedSeq=function(){return this},t(G,H),G.of=function(){return G(arguments)},G.prototype.toIndexedSeq=function(){return this},G.prototype.toString=function(){return this.__toString("Seq [","]")},G.prototype.__iterate=function(e,t){return ie(this,e,t,!1)},G.prototype.__iterator=function(e,t){return le(this,e,t,!1)},t(q,H),q.of=function(){return q(arguments)},q.prototype.toSetSeq=function(){return this},H.isSeq=te,H.Keyed=V,H.Set=q,H.Indexed=G;var $,K,Y,J="@@__IMMUTABLE_SEQ__@@";function X(e){this._array=e,this.size=e.length}function Q(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}function Z(e){this._iterable=e,this.size=e.length||e.size}function ee(e){this._iterator=e,this._iteratorCache=[]}function te(e){return!(!e||!e[J])}function ne(){return $||($=new X([]))}function re(e){var t=Array.isArray(e)?new X(e).fromEntrySeq():F(e)?new ee(e).fromEntrySeq():L(e)?new Z(e).fromEntrySeq():"object"==typeof e?new Q(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t}function oe(e){var t=ae(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t}function ae(e){return W(e)?new X(e):F(e)?new ee(e):L(e)?new Z(e):void 0}function ie(e,t,n,r){var o=e._cache;if(o){for(var a=o.length-1,i=0;i<=a;i++){var l=o[n?a-i:i];if(!1===t(l[1],r?l[0]:i,e))return i+1}return i}return e.__iterateUncached(t,n)}function le(e,t,n,r){var o=e._cache;if(o){var a=o.length-1,i=0;return new R((function(){var e=o[n?a-i:i];return i++>a?{value:void 0,done:!0}:N(t,r?e[0]:i-1,e[1])}))}return e.__iteratorUncached(t,n)}function ue(e,t){return t?se(t,e,"",{"":e}):ce(e)}function se(e,t,n,r){return Array.isArray(t)?e.call(r,n,G(t).map((function(n,r){return se(e,n,r,t)}))):fe(t)?e.call(r,n,V(t).map((function(n,r){return se(e,n,r,t)}))):t}function ce(e){return Array.isArray(e)?G(e).map(ce).toList():fe(e)?V(e).map(ce).toMap():e}function fe(e){return e&&(e.constructor===Object||void 0===e.constructor)}function de(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if((e=e.valueOf())===(t=t.valueOf())||e!=e&&t!=t)return!0;if(!e||!t)return!1}return!("function"!=typeof e.equals||"function"!=typeof t.equals||!e.equals(t))}function pe(e,t){if(e===t)return!0;if(!i(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||l(e)!==l(t)||u(e)!==u(t)||c(e)!==c(t))return!1;if(0===e.size&&0===t.size)return!0;var n=!s(e);if(c(e)){var r=e.entries();return t.every((function(e,t){var o=r.next().value;return o&&de(o[1],e)&&(n||de(o[0],t))}))&&r.next().done}var o=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{o=!0;var a=e;e=t,t=a}var f=!0,d=t.__iterate((function(t,r){if(n?!e.has(t):o?!de(t,e.get(r,b)):!de(e.get(r,b),t))return f=!1,!1}));return f&&e.size===d}function he(e,t){if(!(this instanceof he))return new he(e,t);if(this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size){if(K)return K;K=this}}function me(e,t){if(!e)throw new Error(t)}function ye(e,t,n){if(!(this instanceof ye))return new ye(e,t,n);if(me(0!==n,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),n=void 0===n?1:Math.abs(n),t<e&&(n=-n),this._start=e,this._end=t,this._step=n,this.size=Math.max(0,Math.ceil((t-e)/n-1)+1),0===this.size){if(Y)return Y;Y=this}}function ge(){throw TypeError("Abstract")}function be(){}function ve(){}function we(){}H.prototype[J]=!0,t(X,G),X.prototype.get=function(e,t){return this.has(e)?this._array[P(this,e)]:t},X.prototype.__iterate=function(e,t){for(var n=this._array,r=n.length-1,o=0;o<=r;o++)if(!1===e(n[t?r-o:o],o,this))return o+1;return o},X.prototype.__iterator=function(e,t){var n=this._array,r=n.length-1,o=0;return new R((function(){return o>r?{value:void 0,done:!0}:N(e,o,n[t?r-o++:o++])}))},t(Q,V),Q.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},Q.prototype.has=function(e){return this._object.hasOwnProperty(e)},Q.prototype.__iterate=function(e,t){for(var n=this._object,r=this._keys,o=r.length-1,a=0;a<=o;a++){var i=r[t?o-a:a];if(!1===e(n[i],i,this))return a+1}return a},Q.prototype.__iterator=function(e,t){var n=this._object,r=this._keys,o=r.length-1,a=0;return new R((function(){var i=r[t?o-a:a];return a++>o?{value:void 0,done:!0}:N(e,i,n[i])}))},Q.prototype[h]=!0,t(Z,G),Z.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var n=U(this._iterable),r=0;if(F(n))for(var o;!(o=n.next()).done&&!1!==e(o.value,r++,this););return r},Z.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=U(this._iterable);if(!F(n))return new R(B);var r=0;return new R((function(){var t=n.next();return t.done?t:N(e,r++,t.value)}))},t(ee,G),ee.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var n,r=this._iterator,o=this._iteratorCache,a=0;a<o.length;)if(!1===e(o[a],a++,this))return a;for(;!(n=r.next()).done;){var i=n.value;if(o[a]=i,!1===e(i,a++,this))break}return a},ee.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterator,r=this._iteratorCache,o=0;return new R((function(){if(o>=r.length){var t=n.next();if(t.done)return t;r[o]=t.value}return N(e,o,r[o++])}))},t(he,G),he.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},he.prototype.get=function(e,t){return this.has(e)?this._value:t},he.prototype.includes=function(e){return de(this._value,e)},he.prototype.slice=function(e,t){var n=this.size;return j(e,t,n)?this:new he(this._value,M(t,n)-x(e,n))},he.prototype.reverse=function(){return this},he.prototype.indexOf=function(e){return de(this._value,e)?0:-1},he.prototype.lastIndexOf=function(e){return de(this._value,e)?this.size:-1},he.prototype.__iterate=function(e,t){for(var n=0;n<this.size;n++)if(!1===e(this._value,n,this))return n+1;return n},he.prototype.__iterator=function(e,t){var n=this,r=0;return new R((function(){return r<n.size?N(e,r++,n._value):{value:void 0,done:!0}}))},he.prototype.equals=function(e){return e instanceof he?de(this._value,e._value):pe(e)},t(ye,G),ye.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},ye.prototype.get=function(e,t){return this.has(e)?this._start+P(this,e)*this._step:t},ye.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},ye.prototype.slice=function(e,t){return j(e,t,this.size)?this:(e=x(e,this.size),(t=M(t,this.size))<=e?new ye(0,0):new ye(this.get(e,this._end),this.get(t,this._end),this._step))},ye.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step==0){var n=t/this._step;if(n>=0&&n<this.size)return n}return-1},ye.prototype.lastIndexOf=function(e){return this.indexOf(e)},ye.prototype.__iterate=function(e,t){for(var n=this.size-1,r=this._step,o=t?this._start+n*r:this._start,a=0;a<=n;a++){if(!1===e(o,a,this))return a+1;o+=t?-r:r}return a},ye.prototype.__iterator=function(e,t){var n=this.size-1,r=this._step,o=t?this._start+n*r:this._start,a=0;return new R((function(){var i=o;return o+=t?-r:r,a>n?{value:void 0,done:!0}:N(e,a++,i)}))},ye.prototype.equals=function(e){return e instanceof ye?this._start===e._start&&this._end===e._end&&this._step===e._step:pe(this,e)},t(ge,n),t(be,ge),t(ve,ge),t(we,ge),ge.Keyed=be,ge.Indexed=ve,ge.Set=we;var Oe="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){var n=65535&(e|=0),r=65535&(t|=0);return n*r+((e>>>16)*r+n*(t>>>16)<<16>>>0)|0};function Se(e){return e>>>1&1073741824|3221225471&e}function _e(e){if(!1===e||null==e)return 0;if("function"==typeof e.valueOf&&(!1===(e=e.valueOf())||null==e))return 0;if(!0===e)return 1;var t=typeof e;if("number"===t){if(e!=e||e===1/0)return 0;var n=0|e;for(n!==e&&(n^=4294967295*e);e>4294967295;)n^=e/=4294967295;return Se(n)}if("string"===t)return e.length>Te?function(e){var t=Ae[e];return void 0===t&&(t=Ce(e),De===Ie&&(De=0,Ae={}),De++,Ae[e]=t),t}(e):Ce(e);if("function"==typeof e.hashCode)return e.hashCode();if("object"===t)return function(e){var t;if(je&&void 0!==(t=Ee.get(e)))return t;if(void 0!==(t=e[Me]))return t;if(!ke){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[Me]))return t;if(t=function(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}(e),void 0!==t)return t}if(t=++xe,1073741824&xe&&(xe=0),je)Ee.set(e,t);else{if(void 0!==Pe&&!1===Pe(e))throw new Error("Non-extensible objects are not allowed as keys.");if(ke)Object.defineProperty(e,Me,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[Me]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[Me]=t}}return t}(e);if("function"==typeof e.toString)return Ce(e.toString());throw new Error("Value type "+t+" cannot be hashed.")}function Ce(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return Se(t)}var Ee,Pe=Object.isExtensible,ke=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}(),je="function"==typeof WeakMap;je&&(Ee=new WeakMap);var xe=0,Me="__immutablehash__";"function"==typeof Symbol&&(Me=Symbol(Me));var Te=16,Ie=255,De=0,Ae={};function Re(e){me(e!==1/0,"Cannot perform this action with an infinite size.")}function Ne(e){return null==e?Je():Be(e)&&!c(e)?e:Je().withMutations((function(t){var n=r(e);Re(n.size),n.forEach((function(e,n){return t.set(n,e)}))}))}function Be(e){return!(!e||!e[Fe])}t(Ne,be),Ne.of=function(){var t=e.call(arguments,0);return Je().withMutations((function(e){for(var n=0;n<t.length;n+=2){if(n+1>=t.length)throw new Error("Missing value for key: "+t[n]);e.set(t[n],t[n+1])}}))},Ne.prototype.toString=function(){return this.__toString("Map {","}")},Ne.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},Ne.prototype.set=function(e,t){return Xe(this,e,t)},Ne.prototype.setIn=function(e,t){return this.updateIn(e,b,(function(){return t}))},Ne.prototype.remove=function(e){return Xe(this,e,b)},Ne.prototype.deleteIn=function(e){return this.updateIn(e,(function(){return b}))},Ne.prototype.update=function(e,t,n){return 1===arguments.length?e(this):this.updateIn([e],t,n)},Ne.prototype.updateIn=function(e,t,n){n||(n=t,t=void 0);var r=it(this,rn(e),t,n);return r===b?void 0:r},Ne.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Je()},Ne.prototype.merge=function(){return nt(this,void 0,arguments)},Ne.prototype.mergeWith=function(t){var n=e.call(arguments,1);return nt(this,t,n)},Ne.prototype.mergeIn=function(t){var n=e.call(arguments,1);return this.updateIn(t,Je(),(function(e){return"function"==typeof e.merge?e.merge.apply(e,n):n[n.length-1]}))},Ne.prototype.mergeDeep=function(){return nt(this,rt,arguments)},Ne.prototype.mergeDeepWith=function(t){var n=e.call(arguments,1);return nt(this,ot(t),n)},Ne.prototype.mergeDeepIn=function(t){var n=e.call(arguments,1);return this.updateIn(t,Je(),(function(e){return"function"==typeof e.mergeDeep?e.mergeDeep.apply(e,n):n[n.length-1]}))},Ne.prototype.sort=function(e){return xt(qt(this,e))},Ne.prototype.sortBy=function(e,t){return xt(qt(this,t,e))},Ne.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},Ne.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new _)},Ne.prototype.asImmutable=function(){return this.__ensureOwner()},Ne.prototype.wasAltered=function(){return this.__altered},Ne.prototype.__iterator=function(e,t){return new qe(this,e,t)},Ne.prototype.__iterate=function(e,t){var n=this,r=0;return this._root&&this._root.iterate((function(t){return r++,e(t[1],t[0],n)}),t),r},Ne.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Ye(this.size,this._root,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},Ne.isMap=Be;var Le,Fe="@@__IMMUTABLE_MAP__@@",Ue=Ne.prototype;function ze(e,t){this.ownerID=e,this.entries=t}function We(e,t,n){this.ownerID=e,this.bitmap=t,this.nodes=n}function He(e,t,n){this.ownerID=e,this.count=t,this.nodes=n}function Ve(e,t,n){this.ownerID=e,this.keyHash=t,this.entries=n}function Ge(e,t,n){this.ownerID=e,this.keyHash=t,this.entry=n}function qe(e,t,n){this._type=t,this._reverse=n,this._stack=e._root&&Ke(e._root)}function $e(e,t){return N(e,t[0],t[1])}function Ke(e,t){return{node:e,index:0,__prev:t}}function Ye(e,t,n,r){var o=Object.create(Ue);return o.size=e,o._root=t,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function Je(){return Le||(Le=Ye(0))}function Xe(e,t,n){var r,o;if(e._root){var a=O(v),i=O(w);if(r=Qe(e._root,e.__ownerID,0,void 0,t,n,a,i),!i.value)return e;o=e.size+(a.value?n===b?-1:1:0)}else{if(n===b)return e;o=1,r=new ze(e.__ownerID,[[t,n]])}return e.__ownerID?(e.size=o,e._root=r,e.__hash=void 0,e.__altered=!0,e):r?Ye(o,r):Je()}function Qe(e,t,n,r,o,a,i,l){return e?e.update(t,n,r,o,a,i,l):a===b?e:(S(l),S(i),new Ge(t,r,[o,a]))}function Ze(e){return e.constructor===Ge||e.constructor===Ve}function et(e,t,n,r,o){if(e.keyHash===r)return new Ve(t,r,[e.entry,o]);var a,i=(0===n?e.keyHash:e.keyHash>>>n)&g,l=(0===n?r:r>>>n)&g;return new We(t,1<<i|1<<l,i===l?[et(e,t,n+5,r,o)]:(a=new Ge(t,r,o),i<l?[e,a]:[a,e]))}function tt(e,t,n,r,o){for(var a=0,i=new Array(y),l=0;0!==n;l++,n>>>=1)i[l]=1&n?t[a++]:void 0;return i[r]=o,new He(e,a+1,i)}function nt(e,t,n){for(var o=[],a=0;a<n.length;a++){var l=n[a],u=r(l);i(l)||(u=u.map((function(e){return ue(e)}))),o.push(u)}return at(e,t,o)}function rt(e,t,n){return e&&e.mergeDeep&&i(t)?e.mergeDeep(t):de(e,t)?e:t}function ot(e){return function(t,n,r){if(t&&t.mergeDeepWith&&i(n))return t.mergeDeepWith(e,n);var o=e(t,n,r);return de(t,o)?t:o}}function at(e,t,n){return n=n.filter((function(e){return 0!==e.size})),0===n.length?e:0!==e.size||e.__ownerID||1!==n.length?e.withMutations((function(e){for(var r=t?function(n,r){e.update(r,b,(function(e){return e===b?n:t(e,n,r)}))}:function(t,n){e.set(n,t)},o=0;o<n.length;o++)n[o].forEach(r)})):e.constructor(n[0])}function it(e,t,n,r){var o=e===b,a=t.next();if(a.done){var i=o?n:e,l=r(i);return l===i?e:l}me(o||e&&e.set,"invalid keyPath");var u=a.value,s=o?b:e.get(u,b),c=it(s,t,n,r);return c===s?e:c===b?e.remove(u):(o?Je():e).set(u,c)}function lt(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,127&(e+=e>>8)+(e>>16)}function ut(e,t,n,r){var o=r?e:C(e);return o[t]=n,o}Ue[Fe]=!0,Ue[m]=Ue.remove,Ue.removeIn=Ue.deleteIn,ze.prototype.get=function(e,t,n,r){for(var o=this.entries,a=0,i=o.length;a<i;a++)if(de(n,o[a][0]))return o[a][1];return r},ze.prototype.update=function(e,t,n,r,o,a,i){for(var l=o===b,u=this.entries,s=0,c=u.length;s<c&&!de(r,u[s][0]);s++);var f=s<c;if(f?u[s][1]===o:l)return this;if(S(i),(l||!f)&&S(a),!l||1!==u.length){if(!f&&!l&&u.length>=st)return function(e,t,n,r){e||(e=new _);for(var o=new Ge(e,_e(n),[n,r]),a=0;a<t.length;a++){var i=t[a];o=o.update(e,0,void 0,i[0],i[1])}return o}(e,u,r,o);var d=e&&e===this.ownerID,p=d?u:C(u);return f?l?s===c-1?p.pop():p[s]=p.pop():p[s]=[r,o]:p.push([r,o]),d?(this.entries=p,this):new ze(e,p)}},We.prototype.get=function(e,t,n,r){void 0===t&&(t=_e(n));var o=1<<((0===e?t:t>>>e)&g),a=this.bitmap;return 0==(a&o)?r:this.nodes[lt(a&o-1)].get(e+5,t,n,r)},We.prototype.update=function(e,t,n,r,o,a,i){void 0===n&&(n=_e(r));var l=(0===t?n:n>>>t)&g,u=1<<l,s=this.bitmap,c=0!=(s&u);if(!c&&o===b)return this;var f=lt(s&u-1),d=this.nodes,p=c?d[f]:void 0,h=Qe(p,e,t+5,n,r,o,a,i);if(h===p)return this;if(!c&&h&&d.length>=ct)return tt(e,d,s,l,h);if(c&&!h&&2===d.length&&Ze(d[1^f]))return d[1^f];if(c&&h&&1===d.length&&Ze(h))return h;var m=e&&e===this.ownerID,y=c?h?s:s^u:s|u,v=c?h?ut(d,f,h,m):function(e,t,n){var r=e.length-1;if(n&&t===r)return e.pop(),e;for(var o=new Array(r),a=0,i=0;i<r;i++)i===t&&(a=1),o[i]=e[i+a];return o}(d,f,m):function(e,t,n,r){var o=e.length+1;if(r&&t+1===o)return e[t]=n,e;for(var a=new Array(o),i=0,l=0;l<o;l++)l===t?(a[l]=n,i=-1):a[l]=e[l+i];return a}(d,f,h,m);return m?(this.bitmap=y,this.nodes=v,this):new We(e,y,v)},He.prototype.get=function(e,t,n,r){void 0===t&&(t=_e(n));var o=(0===e?t:t>>>e)&g,a=this.nodes[o];return a?a.get(e+5,t,n,r):r},He.prototype.update=function(e,t,n,r,o,a,i){void 0===n&&(n=_e(r));var l=(0===t?n:n>>>t)&g,u=o===b,s=this.nodes,c=s[l];if(u&&!c)return this;var f=Qe(c,e,t+5,n,r,o,a,i);if(f===c)return this;var d=this.count;if(c){if(!f&&--d<ft)return function(e,t,n,r){for(var o=0,a=0,i=new Array(n),l=0,u=1,s=t.length;l<s;l++,u<<=1){var c=t[l];void 0!==c&&l!==r&&(o|=u,i[a++]=c)}return new We(e,o,i)}(e,s,d,l)}else d++;var p=e&&e===this.ownerID,h=ut(s,l,f,p);return p?(this.count=d,this.nodes=h,this):new He(e,d,h)},Ve.prototype.get=function(e,t,n,r){for(var o=this.entries,a=0,i=o.length;a<i;a++)if(de(n,o[a][0]))return o[a][1];return r},Ve.prototype.update=function(e,t,n,r,o,a,i){void 0===n&&(n=_e(r));var l=o===b;if(n!==this.keyHash)return l?this:(S(i),S(a),et(this,e,t,n,[r,o]));for(var u=this.entries,s=0,c=u.length;s<c&&!de(r,u[s][0]);s++);var f=s<c;if(f?u[s][1]===o:l)return this;if(S(i),(l||!f)&&S(a),l&&2===c)return new Ge(e,this.keyHash,u[1^s]);var d=e&&e===this.ownerID,p=d?u:C(u);return f?l?s===c-1?p.pop():p[s]=p.pop():p[s]=[r,o]:p.push([r,o]),d?(this.entries=p,this):new Ve(e,this.keyHash,p)},Ge.prototype.get=function(e,t,n,r){return de(n,this.entry[0])?this.entry[1]:r},Ge.prototype.update=function(e,t,n,r,o,a,i){var l=o===b,u=de(r,this.entry[0]);return(u?o===this.entry[1]:l)?this:(S(i),l?void S(a):u?e&&e===this.ownerID?(this.entry[1]=o,this):new Ge(e,this.keyHash,[r,o]):(S(a),et(this,e,t,_e(r),[r,o])))},ze.prototype.iterate=Ve.prototype.iterate=function(e,t){for(var n=this.entries,r=0,o=n.length-1;r<=o;r++)if(!1===e(n[t?o-r:r]))return!1},We.prototype.iterate=He.prototype.iterate=function(e,t){for(var n=this.nodes,r=0,o=n.length-1;r<=o;r++){var a=n[t?o-r:r];if(a&&!1===a.iterate(e,t))return!1}},Ge.prototype.iterate=function(e,t){return e(this.entry)},t(qe,R),qe.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var n,r=t.node,o=t.index++;if(r.entry){if(0===o)return $e(e,r.entry)}else if(r.entries){if(o<=(n=r.entries.length-1))return $e(e,r.entries[this._reverse?n-o:o])}else if(o<=(n=r.nodes.length-1)){var a=r.nodes[this._reverse?n-o:o];if(a){if(a.entry)return $e(e,a.entry);t=this._stack=Ke(a,t)}continue}t=this._stack=this._stack.__prev}return{value:void 0,done:!0}};var st=8,ct=16,ft=8;function dt(e){var t=St();if(null==e)return t;if(pt(e))return e;var n=o(e),r=n.size;return 0===r?t:(Re(r),r>0&&r<y?Ot(0,r,5,null,new yt(n.toArray())):t.withMutations((function(e){e.setSize(r),n.forEach((function(t,n){return e.set(n,t)}))})))}function pt(e){return!(!e||!e[ht])}t(dt,ve),dt.of=function(){return this(arguments)},dt.prototype.toString=function(){return this.__toString("List [","]")},dt.prototype.get=function(e,t){if((e=P(this,e))>=0&&e<this.size){var n=Et(this,e+=this._origin);return n&&n.array[e&g]}return t},dt.prototype.set=function(e,t){return function(e,t,n){if((t=P(e,t))!=t)return e;if(t>=e.size||t<0)return e.withMutations((function(e){t<0?Pt(e,t).set(0,n):Pt(e,0,t+1).set(t,n)}));t+=e._origin;var r=e._tail,o=e._root,a=O(w);return t>=jt(e._capacity)?r=_t(r,e.__ownerID,0,t,n,a):o=_t(o,e.__ownerID,e._level,t,n,a),a.value?e.__ownerID?(e._root=o,e._tail=r,e.__hash=void 0,e.__altered=!0,e):Ot(e._origin,e._capacity,e._level,o,r):e}(this,e,t)},dt.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},dt.prototype.insert=function(e,t){return this.splice(e,0,t)},dt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):St()},dt.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations((function(n){Pt(n,0,t+e.length);for(var r=0;r<e.length;r++)n.set(t+r,e[r])}))},dt.prototype.pop=function(){return Pt(this,0,-1)},dt.prototype.unshift=function(){var e=arguments;return this.withMutations((function(t){Pt(t,-e.length);for(var n=0;n<e.length;n++)t.set(n,e[n])}))},dt.prototype.shift=function(){return Pt(this,1)},dt.prototype.merge=function(){return kt(this,void 0,arguments)},dt.prototype.mergeWith=function(t){var n=e.call(arguments,1);return kt(this,t,n)},dt.prototype.mergeDeep=function(){return kt(this,rt,arguments)},dt.prototype.mergeDeepWith=function(t){var n=e.call(arguments,1);return kt(this,ot(t),n)},dt.prototype.setSize=function(e){return Pt(this,0,e)},dt.prototype.slice=function(e,t){var n=this.size;return j(e,t,n)?this:Pt(this,x(e,n),M(t,n))},dt.prototype.__iterator=function(e,t){var n=0,r=wt(this,t);return new R((function(){var t=r();return t===vt?{value:void 0,done:!0}:N(e,n++,t)}))},dt.prototype.__iterate=function(e,t){for(var n,r=0,o=wt(this,t);(n=o())!==vt&&!1!==e(n,r++,this););return r},dt.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Ot(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):(this.__ownerID=e,this)},dt.isList=pt;var ht="@@__IMMUTABLE_LIST__@@",mt=dt.prototype;function yt(e,t){this.array=e,this.ownerID=t}mt[ht]=!0,mt[m]=mt.remove,mt.setIn=Ue.setIn,mt.deleteIn=mt.removeIn=Ue.removeIn,mt.update=Ue.update,mt.updateIn=Ue.updateIn,mt.mergeIn=Ue.mergeIn,mt.mergeDeepIn=Ue.mergeDeepIn,mt.withMutations=Ue.withMutations,mt.asMutable=Ue.asMutable,mt.asImmutable=Ue.asImmutable,mt.wasAltered=Ue.wasAltered,yt.prototype.removeBefore=function(e,t,n){if(n===t?1<<t:0===this.array.length)return this;var r=n>>>t&g;if(r>=this.array.length)return new yt([],e);var o,a=0===r;if(t>0){var i=this.array[r];if((o=i&&i.removeBefore(e,t-5,n))===i&&a)return this}if(a&&!o)return this;var l=Ct(this,e);if(!a)for(var u=0;u<r;u++)l.array[u]=void 0;return o&&(l.array[r]=o),l},yt.prototype.removeAfter=function(e,t,n){if(n===(t?1<<t:0)||0===this.array.length)return this;var r,o=n-1>>>t&g;if(o>=this.array.length)return this;if(t>0){var a=this.array[o];if((r=a&&a.removeAfter(e,t-5,n))===a&&o===this.array.length-1)return this}var i=Ct(this,e);return i.array.splice(o+1),r&&(i.array[o]=r),i};var gt,bt,vt={};function wt(e,t){var n=e._origin,r=e._capacity,o=jt(r),a=e._tail;return function e(i,l,u){return 0===l?function(e,i){var l=i===o?a&&a.array:e&&e.array,u=i>n?0:n-i,s=r-i;return s>y&&(s=y),function(){if(u===s)return vt;var e=t?--s:u++;return l&&l[e]}}(i,u):function(o,a,i){var l,u=o&&o.array,s=i>n?0:n-i>>a,c=1+(r-i>>a);return c>y&&(c=y),function(){for(;;){if(l){var n=l();if(n!==vt)return n;l=null}if(s===c)return vt;var r=t?--c:s++;l=e(u&&u[r],a-5,i+(r<<a))}}}(i,l,u)}(e._root,e._level,0)}function Ot(e,t,n,r,o,a,i){var l=Object.create(mt);return l.size=t-e,l._origin=e,l._capacity=t,l._level=n,l._root=r,l._tail=o,l.__ownerID=a,l.__hash=i,l.__altered=!1,l}function St(){return gt||(gt=Ot(0,0,5))}function _t(e,t,n,r,o,a){var i,l=r>>>n&g,u=e&&l<e.array.length;if(!u&&void 0===o)return e;if(n>0){var s=e&&e.array[l],c=_t(s,t,n-5,r,o,a);return c===s?e:((i=Ct(e,t)).array[l]=c,i)}return u&&e.array[l]===o?e:(S(a),i=Ct(e,t),void 0===o&&l===i.array.length-1?i.array.pop():i.array[l]=o,i)}function Ct(e,t){return t&&e&&t===e.ownerID?e:new yt(e?e.array.slice():[],t)}function Et(e,t){if(t>=jt(e._capacity))return e._tail;if(t<1<<e._level+5){for(var n=e._root,r=e._level;n&&r>0;)n=n.array[t>>>r&g],r-=5;return n}}function Pt(e,t,n){void 0!==t&&(t|=0),void 0!==n&&(n|=0);var r=e.__ownerID||new _,o=e._origin,a=e._capacity,i=o+t,l=void 0===n?a:n<0?a+n:o+n;if(i===o&&l===a)return e;if(i>=l)return e.clear();for(var u=e._level,s=e._root,c=0;i+c<0;)s=new yt(s&&s.array.length?[void 0,s]:[],r),c+=1<<(u+=5);c&&(i+=c,o+=c,l+=c,a+=c);for(var f=jt(a),d=jt(l);d>=1<<u+5;)s=new yt(s&&s.array.length?[s]:[],r),u+=5;var p=e._tail,h=d<f?Et(e,l-1):d>f?new yt([],r):p;if(p&&d>f&&i<a&&p.array.length){for(var m=s=Ct(s,r),y=u;y>5;y-=5){var b=f>>>y&g;m=m.array[b]=Ct(m.array[b],r)}m.array[f>>>5&g]=p}if(l<a&&(h=h&&h.removeAfter(r,0,l)),i>=d)i-=d,l-=d,u=5,s=null,h=h&&h.removeBefore(r,0,i);else if(i>o||d<f){for(c=0;s;){var v=i>>>u&g;if(v!==d>>>u&g)break;v&&(c+=(1<<u)*v),u-=5,s=s.array[v]}s&&i>o&&(s=s.removeBefore(r,u,i-c)),s&&d<f&&(s=s.removeAfter(r,u,d-c)),c&&(i-=c,l-=c)}return e.__ownerID?(e.size=l-i,e._origin=i,e._capacity=l,e._level=u,e._root=s,e._tail=h,e.__hash=void 0,e.__altered=!0,e):Ot(i,l,u,s,h)}function kt(e,t,n){for(var r=[],a=0,l=0;l<n.length;l++){var u=n[l],s=o(u);s.size>a&&(a=s.size),i(u)||(s=s.map((function(e){return ue(e)}))),r.push(s)}return a>e.size&&(e=e.setSize(a)),at(e,t,r)}function jt(e){return e<y?0:e-1>>>5<<5}function xt(e){return null==e?It():Mt(e)?e:It().withMutations((function(t){var n=r(e);Re(n.size),n.forEach((function(e,n){return t.set(n,e)}))}))}function Mt(e){return Be(e)&&c(e)}function Tt(e,t,n,r){var o=Object.create(xt.prototype);return o.size=e?e.size:0,o._map=e,o._list=t,o.__ownerID=n,o.__hash=r,o}function It(){return bt||(bt=Tt(Je(),St()))}function Dt(e,t,n){var r,o,a=e._map,i=e._list,l=a.get(t),u=void 0!==l;if(n===b){if(!u)return e;i.size>=y&&i.size>=2*a.size?(o=i.filter((function(e,t){return void 0!==e&&l!==t})),r=o.toKeyedSeq().map((function(e){return e[0]})).flip().toMap(),e.__ownerID&&(r.__ownerID=o.__ownerID=e.__ownerID)):(r=a.remove(t),o=l===i.size-1?i.pop():i.set(l,void 0))}else if(u){if(n===i.get(l)[1])return e;r=a,o=i.set(l,[t,n])}else r=a.set(t,i.size),o=i.set(i.size,[t,n]);return e.__ownerID?(e.size=r.size,e._map=r,e._list=o,e.__hash=void 0,e):Tt(r,o)}function At(e,t){this._iter=e,this._useKeys=t,this.size=e.size}function Rt(e){this._iter=e,this.size=e.size}function Nt(e){this._iter=e,this.size=e.size}function Bt(e){this._iter=e,this.size=e.size}function Lt(e){var t=en(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=tn,t.__iterateUncached=function(t,n){var r=this;return e.__iterate((function(e,n){return!1!==t(n,e,r)}),n)},t.__iteratorUncached=function(t,n){if(2===t){var r=e.__iterator(t,n);return new R((function(){var e=r.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e}))}return e.__iterator(1===t?0:1,n)},t}function Ft(e,t,n){var r=en(e);return r.size=e.size,r.has=function(t){return e.has(t)},r.get=function(r,o){var a=e.get(r,b);return a===b?o:t.call(n,a,r,e)},r.__iterateUncached=function(r,o){var a=this;return e.__iterate((function(e,o,i){return!1!==r(t.call(n,e,o,i),o,a)}),o)},r.__iteratorUncached=function(r,o){var a=e.__iterator(2,o);return new R((function(){var o=a.next();if(o.done)return o;var i=o.value,l=i[0];return N(r,l,t.call(n,i[1],l,e),o)}))},r}function Ut(e,t){var n=en(e);return n._iter=e,n.size=e.size,n.reverse=function(){return e},e.flip&&(n.flip=function(){var t=Lt(e);return t.reverse=function(){return e.flip()},t}),n.get=function(n,r){return e.get(t?n:-1-n,r)},n.has=function(n){return e.has(t?n:-1-n)},n.includes=function(t){return e.includes(t)},n.cacheResult=tn,n.__iterate=function(t,n){var r=this;return e.__iterate((function(e,n){return t(e,n,r)}),!n)},n.__iterator=function(t,n){return e.__iterator(t,!n)},n}function zt(e,t,n,r){var o=en(e);return r&&(o.has=function(r){var o=e.get(r,b);return o!==b&&!!t.call(n,o,r,e)},o.get=function(r,o){var a=e.get(r,b);return a!==b&&t.call(n,a,r,e)?a:o}),o.__iterateUncached=function(o,a){var i=this,l=0;return e.__iterate((function(e,a,u){if(t.call(n,e,a,u))return l++,o(e,r?a:l-1,i)}),a),l},o.__iteratorUncached=function(o,a){var i=e.__iterator(2,a),l=0;return new R((function(){for(;;){var a=i.next();if(a.done)return a;var u=a.value,s=u[0],c=u[1];if(t.call(n,c,s,e))return N(o,r?s:l++,c,a)}}))},o}function Wt(e,t,n,r){var o=e.size;if(void 0!==t&&(t|=0),void 0!==n&&(n===1/0?n=o:n|=0),j(t,n,o))return e;var a=x(t,o),i=M(n,o);if(a!=a||i!=i)return Wt(e.toSeq().cacheResult(),t,n,r);var l,u=i-a;u==u&&(l=u<0?0:u);var s=en(e);return s.size=0===l?l:e.size&&l||void 0,!r&&te(e)&&l>=0&&(s.get=function(t,n){return(t=P(this,t))>=0&&t<l?e.get(t+a,n):n}),s.__iterateUncached=function(t,n){var o=this;if(0===l)return 0;if(n)return this.cacheResult().__iterate(t,n);var i=0,u=!0,s=0;return e.__iterate((function(e,n){if(!u||!(u=i++<a))return s++,!1!==t(e,r?n:s-1,o)&&s!==l})),s},s.__iteratorUncached=function(t,n){if(0!==l&&n)return this.cacheResult().__iterator(t,n);var o=0!==l&&e.__iterator(t,n),i=0,u=0;return new R((function(){for(;i++<a;)o.next();if(++u>l)return{value:void 0,done:!0};var e=o.next();return r||1===t?e:N(t,u-1,0===t?void 0:e.value[1],e)}))},s}function Ht(e,t,n,r){var o=en(e);return o.__iterateUncached=function(o,a){var i=this;if(a)return this.cacheResult().__iterate(o,a);var l=!0,u=0;return e.__iterate((function(e,a,s){if(!l||!(l=t.call(n,e,a,s)))return u++,o(e,r?a:u-1,i)})),u},o.__iteratorUncached=function(o,a){var i=this;if(a)return this.cacheResult().__iterator(o,a);var l=e.__iterator(2,a),u=!0,s=0;return new R((function(){var e,a,c;do{if((e=l.next()).done)return r||1===o?e:N(o,s++,0===o?void 0:e.value[1],e);var f=e.value;a=f[0],c=f[1],u&&(u=t.call(n,c,a,i))}while(u);return 2===o?e:N(o,a,c,e)}))},o}function Vt(e,t){var n=l(e),o=[e].concat(t).map((function(e){return i(e)?n&&(e=r(e)):e=n?re(e):oe(Array.isArray(e)?e:[e]),e})).filter((function(e){return 0!==e.size}));if(0===o.length)return e;if(1===o.length){var a=o[0];if(a===e||n&&l(a)||u(e)&&u(a))return a}var s=new X(o);return n?s=s.toKeyedSeq():u(e)||(s=s.toSetSeq()),(s=s.flatten(!0)).size=o.reduce((function(e,t){if(void 0!==e){var n=t.size;if(void 0!==n)return e+n}}),0),s}function Gt(e,t,n){var r=en(e);return r.__iterateUncached=function(r,o){var a=0,l=!1;return function e(u,s){var c=this;u.__iterate((function(o,u){return(!t||s<t)&&i(o)?e(o,s+1):!1===r(o,n?u:a++,c)&&(l=!0),!l}),o)}(e,0),a},r.__iteratorUncached=function(r,o){var a=e.__iterator(r,o),l=[],u=0;return new R((function(){for(;a;){var e=a.next();if(!1===e.done){var s=e.value;if(2===r&&(s=s[1]),t&&!(l.length<t)||!i(s))return n?e:N(r,u++,s,e);l.push(a),a=s.__iterator(r,o)}else a=l.pop()}return{value:void 0,done:!0}}))},r}function qt(e,t,n){t||(t=nn);var r=l(e),o=0,a=e.toSeq().map((function(t,r){return[r,t,o++,n?n(t,r,e):t]})).toArray();return a.sort((function(e,n){return t(e[3],n[3])||e[2]-n[2]})).forEach(r?function(e,t){a[t].length=2}:function(e,t){a[t]=e[1]}),r?V(a):u(e)?G(a):q(a)}function $t(e,t,n){if(t||(t=nn),n){var r=e.toSeq().map((function(t,r){return[t,n(t,r,e)]})).reduce((function(e,n){return Kt(t,e[1],n[1])?n:e}));return r&&r[0]}return e.reduce((function(e,n){return Kt(t,e,n)?n:e}))}function Kt(e,t,n){var r=e(n,t);return 0===r&&n!==t&&(null==n||n!=n)||r>0}function Yt(e,t,r){var o=en(e);return o.size=new X(r).map((function(e){return e.size})).min(),o.__iterate=function(e,t){for(var n,r=this.__iterator(1,t),o=0;!(n=r.next()).done&&!1!==e(n.value,o++,this););return o},o.__iteratorUncached=function(e,o){var a=r.map((function(e){return e=n(e),U(o?e.reverse():e)})),i=0,l=!1;return new R((function(){var n;return l||(n=a.map((function(e){return e.next()})),l=n.some((function(e){return e.done}))),l?{value:void 0,done:!0}:N(e,i++,t.apply(null,n.map((function(e){return e.value}))))}))},o}function Jt(e,t){return te(e)?t:e.constructor(t)}function Xt(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function Qt(e){return Re(e.size),E(e)}function Zt(e){return l(e)?r:u(e)?o:a}function en(e){return Object.create((l(e)?V:u(e)?G:q).prototype)}function tn(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):H.prototype.cacheResult.call(this)}function nn(e,t){return e>t?1:e<t?-1:0}function rn(e){var t=U(e);if(!t){if(!W(e))throw new TypeError("Expected iterable or array-like: "+e);t=U(n(e))}return t}function on(e,t){var n,r=function(a){if(a instanceof r)return a;if(!(this instanceof r))return new r(a);if(!n){n=!0;var i=Object.keys(e);!function(e,t){try{t.forEach(sn.bind(void 0,e))}catch(e){}}(o,i),o.size=i.length,o._name=t,o._keys=i,o._defaultValues=e}this._map=Ne(a)},o=r.prototype=Object.create(an);return o.constructor=r,r}t(xt,Ne),xt.of=function(){return this(arguments)},xt.prototype.toString=function(){return this.__toString("OrderedMap {","}")},xt.prototype.get=function(e,t){var n=this._map.get(e);return void 0!==n?this._list.get(n)[1]:t},xt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):It()},xt.prototype.set=function(e,t){return Dt(this,e,t)},xt.prototype.remove=function(e){return Dt(this,e,b)},xt.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},xt.prototype.__iterate=function(e,t){var n=this;return this._list.__iterate((function(t){return t&&e(t[1],t[0],n)}),t)},xt.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},xt.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),n=this._list.__ensureOwner(e);return e?Tt(t,n,e,this.__hash):(this.__ownerID=e,this._map=t,this._list=n,this)},xt.isOrderedMap=Mt,xt.prototype[h]=!0,xt.prototype[m]=xt.prototype.remove,t(At,V),At.prototype.get=function(e,t){return this._iter.get(e,t)},At.prototype.has=function(e){return this._iter.has(e)},At.prototype.valueSeq=function(){return this._iter.valueSeq()},At.prototype.reverse=function(){var e=this,t=Ut(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},At.prototype.map=function(e,t){var n=this,r=Ft(this,e,t);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(e,t)}),r},At.prototype.__iterate=function(e,t){var n,r=this;return this._iter.__iterate(this._useKeys?function(t,n){return e(t,n,r)}:(n=t?Qt(this):0,function(o){return e(o,t?--n:n++,r)}),t)},At.prototype.__iterator=function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var n=this._iter.__iterator(1,t),r=t?Qt(this):0;return new R((function(){var o=n.next();return o.done?o:N(e,t?--r:r++,o.value,o)}))},At.prototype[h]=!0,t(Rt,G),Rt.prototype.includes=function(e){return this._iter.includes(e)},Rt.prototype.__iterate=function(e,t){var n=this,r=0;return this._iter.__iterate((function(t){return e(t,r++,n)}),t)},Rt.prototype.__iterator=function(e,t){var n=this._iter.__iterator(1,t),r=0;return new R((function(){var t=n.next();return t.done?t:N(e,r++,t.value,t)}))},t(Nt,q),Nt.prototype.has=function(e){return this._iter.includes(e)},Nt.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate((function(t){return e(t,t,n)}),t)},Nt.prototype.__iterator=function(e,t){var n=this._iter.__iterator(1,t);return new R((function(){var t=n.next();return t.done?t:N(e,t.value,t.value,t)}))},t(Bt,V),Bt.prototype.entrySeq=function(){return this._iter.toSeq()},Bt.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate((function(t){if(t){Xt(t);var r=i(t);return e(r?t.get(1):t[1],r?t.get(0):t[0],n)}}),t)},Bt.prototype.__iterator=function(e,t){var n=this._iter.__iterator(1,t);return new R((function(){for(;;){var t=n.next();if(t.done)return t;var r=t.value;if(r){Xt(r);var o=i(r);return N(e,o?r.get(0):r[0],o?r.get(1):r[1],t)}}}))},Rt.prototype.cacheResult=At.prototype.cacheResult=Nt.prototype.cacheResult=Bt.prototype.cacheResult=tn,t(on,be),on.prototype.toString=function(){return this.__toString(un(this)+" {","}")},on.prototype.has=function(e){return this._defaultValues.hasOwnProperty(e)},on.prototype.get=function(e,t){if(!this.has(e))return t;var n=this._defaultValues[e];return this._map?this._map.get(e,n):n},on.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=this.constructor;return e._empty||(e._empty=ln(this,Je()))},on.prototype.set=function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+un(this));if(this._map&&!this._map.has(e)&&t===this._defaultValues[e])return this;var n=this._map&&this._map.set(e,t);return this.__ownerID||n===this._map?this:ln(this,n)},on.prototype.remove=function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);return this.__ownerID||t===this._map?this:ln(this,t)},on.prototype.wasAltered=function(){return this._map.wasAltered()},on.prototype.__iterator=function(e,t){var n=this;return r(this._defaultValues).map((function(e,t){return n.get(t)})).__iterator(e,t)},on.prototype.__iterate=function(e,t){var n=this;return r(this._defaultValues).map((function(e,t){return n.get(t)})).__iterate(e,t)},on.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);return e?ln(this,t,e):(this.__ownerID=e,this._map=t,this)};var an=on.prototype;function ln(e,t,n){var r=Object.create(Object.getPrototypeOf(e));return r._map=t,r.__ownerID=n,r}function un(e){return e._name||e.constructor.name||"Record"}function sn(e,t){Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){me(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}function cn(e){return null==e?gn():fn(e)&&!c(e)?e:gn().withMutations((function(t){var n=a(e);Re(n.size),n.forEach((function(e){return t.add(e)}))}))}function fn(e){return!(!e||!e[pn])}an[m]=an.remove,an.deleteIn=an.removeIn=Ue.removeIn,an.merge=Ue.merge,an.mergeWith=Ue.mergeWith,an.mergeIn=Ue.mergeIn,an.mergeDeep=Ue.mergeDeep,an.mergeDeepWith=Ue.mergeDeepWith,an.mergeDeepIn=Ue.mergeDeepIn,an.setIn=Ue.setIn,an.update=Ue.update,an.updateIn=Ue.updateIn,an.withMutations=Ue.withMutations,an.asMutable=Ue.asMutable,an.asImmutable=Ue.asImmutable,t(cn,we),cn.of=function(){return this(arguments)},cn.fromKeys=function(e){return this(r(e).keySeq())},cn.prototype.toString=function(){return this.__toString("Set {","}")},cn.prototype.has=function(e){return this._map.has(e)},cn.prototype.add=function(e){return mn(this,this._map.set(e,!0))},cn.prototype.remove=function(e){return mn(this,this._map.remove(e))},cn.prototype.clear=function(){return mn(this,this._map.clear())},cn.prototype.union=function(){var t=e.call(arguments,0);return t=t.filter((function(e){return 0!==e.size})),0===t.length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations((function(e){for(var n=0;n<t.length;n++)a(t[n]).forEach((function(t){return e.add(t)}))})):this.constructor(t[0])},cn.prototype.intersect=function(){var t=e.call(arguments,0);if(0===t.length)return this;t=t.map((function(e){return a(e)}));var n=this;return this.withMutations((function(e){n.forEach((function(n){t.every((function(e){return e.includes(n)}))||e.remove(n)}))}))},cn.prototype.subtract=function(){var t=e.call(arguments,0);if(0===t.length)return this;t=t.map((function(e){return a(e)}));var n=this;return this.withMutations((function(e){n.forEach((function(n){t.some((function(e){return e.includes(n)}))&&e.remove(n)}))}))},cn.prototype.merge=function(){return this.union.apply(this,arguments)},cn.prototype.mergeWith=function(t){var n=e.call(arguments,1);return this.union.apply(this,n)},cn.prototype.sort=function(e){return bn(qt(this,e))},cn.prototype.sortBy=function(e,t){return bn(qt(this,t,e))},cn.prototype.wasAltered=function(){return this._map.wasAltered()},cn.prototype.__iterate=function(e,t){var n=this;return this._map.__iterate((function(t,r){return e(r,r,n)}),t)},cn.prototype.__iterator=function(e,t){return this._map.map((function(e,t){return t})).__iterator(e,t)},cn.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):(this.__ownerID=e,this._map=t,this)},cn.isSet=fn;var dn,pn="@@__IMMUTABLE_SET__@@",hn=cn.prototype;function mn(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function yn(e,t){var n=Object.create(hn);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function gn(){return dn||(dn=yn(Je()))}function bn(e){return null==e?_n():vn(e)?e:_n().withMutations((function(t){var n=a(e);Re(n.size),n.forEach((function(e){return t.add(e)}))}))}function vn(e){return fn(e)&&c(e)}hn[pn]=!0,hn[m]=hn.remove,hn.mergeDeep=hn.merge,hn.mergeDeepWith=hn.mergeWith,hn.withMutations=Ue.withMutations,hn.asMutable=Ue.asMutable,hn.asImmutable=Ue.asImmutable,hn.__empty=gn,hn.__make=yn,t(bn,cn),bn.of=function(){return this(arguments)},bn.fromKeys=function(e){return this(r(e).keySeq())},bn.prototype.toString=function(){return this.__toString("OrderedSet {","}")},bn.isOrderedSet=vn;var wn,On=bn.prototype;function Sn(e,t){var n=Object.create(On);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function _n(){return wn||(wn=Sn(It()))}function Cn(e){return null==e?Mn():En(e)?e:Mn().unshiftAll(e)}function En(e){return!(!e||!e[kn])}On[h]=!0,On.__empty=_n,On.__make=Sn,t(Cn,ve),Cn.of=function(){return this(arguments)},Cn.prototype.toString=function(){return this.__toString("Stack [","]")},Cn.prototype.get=function(e,t){var n=this._head;for(e=P(this,e);n&&e--;)n=n.next;return n?n.value:t},Cn.prototype.peek=function(){return this._head&&this._head.value},Cn.prototype.push=function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,n=arguments.length-1;n>=0;n--)t={value:arguments[n],next:t};return this.__ownerID?(this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this):xn(e,t)},Cn.prototype.pushAll=function(e){if(0===(e=o(e)).size)return this;Re(e.size);var t=this.size,n=this._head;return e.reverse().forEach((function(e){t++,n={value:e,next:n}})),this.__ownerID?(this.size=t,this._head=n,this.__hash=void 0,this.__altered=!0,this):xn(t,n)},Cn.prototype.pop=function(){return this.slice(1)},Cn.prototype.unshift=function(){return this.push.apply(this,arguments)},Cn.prototype.unshiftAll=function(e){return this.pushAll(e)},Cn.prototype.shift=function(){return this.pop.apply(this,arguments)},Cn.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Mn()},Cn.prototype.slice=function(e,t){if(j(e,t,this.size))return this;var n=x(e,this.size);if(M(t,this.size)!==this.size)return ve.prototype.slice.call(this,e,t);for(var r=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=r,this._head=o,this.__hash=void 0,this.__altered=!0,this):xn(r,o)},Cn.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?xn(this.size,this._head,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},Cn.prototype.__iterate=function(e,t){if(t)return this.reverse().__iterate(e);for(var n=0,r=this._head;r&&!1!==e(r.value,n++,this);)r=r.next;return n},Cn.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var n=0,r=this._head;return new R((function(){if(r){var t=r.value;return r=r.next,N(e,n++,t)}return{value:void 0,done:!0}}))},Cn.isStack=En;var Pn,kn="@@__IMMUTABLE_STACK__@@",jn=Cn.prototype;function xn(e,t,n,r){var o=Object.create(jn);return o.size=e,o._head=t,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function Mn(){return Pn||(Pn=xn(0))}function Tn(e,t){var n=function(n){e.prototype[n]=t[n]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}jn[kn]=!0,jn.withMutations=Ue.withMutations,jn.asMutable=Ue.asMutable,jn.asImmutable=Ue.asImmutable,jn.wasAltered=Ue.wasAltered,n.Iterator=R,Tn(n,{toArray:function(){Re(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate((function(t,n){e[n]=t})),e},toIndexedSeq:function(){return new Rt(this)},toJS:function(){return this.toSeq().map((function(e){return e&&"function"==typeof e.toJS?e.toJS():e})).__toJS()},toJSON:function(){return this.toSeq().map((function(e){return e&&"function"==typeof e.toJSON?e.toJSON():e})).__toJS()},toKeyedSeq:function(){return new At(this,!0)},toMap:function(){return Ne(this.toKeyedSeq())},toObject:function(){Re(this.size);var e={};return this.__iterate((function(t,n){e[n]=t})),e},toOrderedMap:function(){return xt(this.toKeyedSeq())},toOrderedSet:function(){return bn(l(this)?this.valueSeq():this)},toSet:function(){return cn(l(this)?this.valueSeq():this)},toSetSeq:function(){return new Nt(this)},toSeq:function(){return u(this)?this.toIndexedSeq():l(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Cn(l(this)?this.valueSeq():this)},toList:function(){return dt(l(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){var t=e.call(arguments,0);return Jt(this,Vt(this,t))},includes:function(e){return this.some((function(t){return de(t,e)}))},entries:function(){return this.__iterator(2)},every:function(e,t){Re(this.size);var n=!0;return this.__iterate((function(r,o,a){if(!e.call(t,r,o,a))return n=!1,!1})),n},filter:function(e,t){return Jt(this,zt(this,e,t,!0))},find:function(e,t,n){var r=this.findEntry(e,t);return r?r[1]:n},forEach:function(e,t){return Re(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){Re(this.size),e=void 0!==e?""+e:",";var t="",n=!0;return this.__iterate((function(r){n?n=!1:t+=e,t+=null!=r?r.toString():""})),t},keys:function(){return this.__iterator(0)},map:function(e,t){return Jt(this,Ft(this,e,t))},reduce:function(e,t,n){var r,o;return Re(this.size),arguments.length<2?o=!0:r=t,this.__iterate((function(t,a,i){o?(o=!1,r=t):r=e.call(n,r,t,a,i)})),r},reduceRight:function(e,t,n){var r=this.toKeyedSeq().reverse();return r.reduce.apply(r,arguments)},reverse:function(){return Jt(this,Ut(this,!0))},slice:function(e,t){return Jt(this,Wt(this,e,t,!0))},some:function(e,t){return!this.every(Nn(e),t)},sort:function(e){return Jt(this,qt(this,e))},values:function(){return this.__iterator(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(e,t){return E(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return function(e,t,n){var r=Ne().asMutable();return e.__iterate((function(o,a){r.update(t.call(n,o,a,e),0,(function(e){return e+1}))})),r.asImmutable()}(this,e,t)},equals:function(e){return pe(this,e)},entrySeq:function(){var e=this;if(e._cache)return new X(e._cache);var t=e.toSeq().map(Rn).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(Nn(e),t)},findEntry:function(e,t,n){var r=n;return this.__iterate((function(n,o,a){if(e.call(t,n,o,a))return r=[o,n],!1})),r},findKey:function(e,t){var n=this.findEntry(e,t);return n&&n[0]},findLast:function(e,t,n){return this.toKeyedSeq().reverse().find(e,t,n)},findLastEntry:function(e,t,n){return this.toKeyedSeq().reverse().findEntry(e,t,n)},findLastKey:function(e,t){return this.toKeyedSeq().reverse().findKey(e,t)},first:function(){return this.find(k)},flatMap:function(e,t){return Jt(this,function(e,t,n){var r=Zt(e);return e.toSeq().map((function(o,a){return r(t.call(n,o,a,e))})).flatten(!0)}(this,e,t))},flatten:function(e){return Jt(this,Gt(this,e,!0))},fromEntrySeq:function(){return new Bt(this)},get:function(e,t){return this.find((function(t,n){return de(n,e)}),void 0,t)},getIn:function(e,t){for(var n,r=this,o=rn(e);!(n=o.next()).done;){var a=n.value;if((r=r&&r.get?r.get(a,b):b)===b)return t}return r},groupBy:function(e,t){return function(e,t,n){var r=l(e),o=(c(e)?xt():Ne()).asMutable();e.__iterate((function(a,i){o.update(t.call(n,a,i,e),(function(e){return(e=e||[]).push(r?[i,a]:a),e}))}));var a=Zt(e);return o.map((function(t){return Jt(e,a(t))}))}(this,e,t)},has:function(e){return this.get(e,b)!==b},hasIn:function(e){return this.getIn(e,b)!==b},isSubset:function(e){return e="function"==typeof e.includes?e:n(e),this.every((function(t){return e.includes(t)}))},isSuperset:function(e){return(e="function"==typeof e.isSubset?e:n(e)).isSubset(this)},keyOf:function(e){return this.findKey((function(t){return de(t,e)}))},keySeq:function(){return this.toSeq().map(An).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return $t(this,e)},maxBy:function(e,t){return $t(this,t,e)},min:function(e){return $t(this,e?Bn(e):Un)},minBy:function(e,t){return $t(this,t?Bn(t):Un,e)},rest:function(){return this.slice(1)},skip:function(e){return this.slice(Math.max(0,e))},skipLast:function(e){return Jt(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function(e,t){return Jt(this,Ht(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(Nn(e),t)},sortBy:function(e,t){return Jt(this,qt(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return Jt(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function(e,t){return Jt(this,function(e,t,n){var r=en(e);return r.__iterateUncached=function(r,o){var a=this;if(o)return this.cacheResult().__iterate(r,o);var i=0;return e.__iterate((function(e,o,l){return t.call(n,e,o,l)&&++i&&r(e,o,a)})),i},r.__iteratorUncached=function(r,o){var a=this;if(o)return this.cacheResult().__iterator(r,o);var i=e.__iterator(2,o),l=!0;return new R((function(){if(!l)return{value:void 0,done:!0};var e=i.next();if(e.done)return e;var o=e.value,u=o[0],s=o[1];return t.call(n,s,u,a)?2===r?e:N(r,u,s,e):(l=!1,{value:void 0,done:!0})}))},r}(this,e,t))},takeUntil:function(e,t){return this.takeWhile(Nn(e),t)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(e){if(e.size===1/0)return 0;var t=c(e),n=l(e),r=t?1:0;return function(e,t){return t=Oe(t,3432918353),t=Oe(t<<15|t>>>-15,461845907),t=Oe(t<<13|t>>>-13,5),t=Oe((t=(t+3864292196|0)^e)^t>>>16,2246822507),Se((t=Oe(t^t>>>13,3266489909))^t>>>16)}(e.__iterate(n?t?function(e,t){r=31*r+zn(_e(e),_e(t))|0}:function(e,t){r=r+zn(_e(e),_e(t))|0}:t?function(e){r=31*r+_e(e)|0}:function(e){r=r+_e(e)|0}),r)}(this))}});var In=n.prototype,Dn=(In[f]=!0,In[A]=In.values,In.__toJS=In.toArray,In.__toStringMapper=Ln,In.inspect=In.toSource=function(){return this.toString()},In.chain=In.flatMap,In.contains=In.includes,Tn(r,{flip:function(){return Jt(this,Lt(this))},mapEntries:function(e,t){var n=this,r=0;return Jt(this,this.toSeq().map((function(o,a){return e.call(t,[a,o],r++,n)})).fromEntrySeq())},mapKeys:function(e,t){var n=this;return Jt(this,this.toSeq().flip().map((function(r,o){return e.call(t,r,o,n)})).flip())}}),r.prototype);function An(e,t){return t}function Rn(e,t){return[t,e]}function Nn(e){return function(){return!e.apply(this,arguments)}}function Bn(e){return function(){return-e.apply(this,arguments)}}function Ln(e){return"string"==typeof e?JSON.stringify(e):String(e)}function Fn(){return C(arguments)}function Un(e,t){return e<t?1:e>t?-1:0}function zn(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}return Dn[d]=!0,Dn[A]=In.entries,Dn.__toJS=In.toObject,Dn.__toStringMapper=function(e,t){return JSON.stringify(t)+": "+Ln(e)},Tn(o,{toKeyedSeq:function(){return new At(this,!1)},filter:function(e,t){return Jt(this,zt(this,e,t,!1))},findIndex:function(e,t){var n=this.findEntry(e,t);return n?n[0]:-1},indexOf:function(e){var t=this.keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.lastKeyOf(e);return void 0===t?-1:t},reverse:function(){return Jt(this,Ut(this,!1))},slice:function(e,t){return Jt(this,Wt(this,e,t,!1))},splice:function(e,t){var n=arguments.length;if(t=Math.max(0|t,0),0===n||2===n&&!t)return this;e=x(e,e<0?this.count():this.size);var r=this.slice(0,e);return Jt(this,1===n?r:r.concat(C(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var n=this.findLastEntry(e,t);return n?n[0]:-1},first:function(){return this.get(0)},flatten:function(e){return Jt(this,Gt(this,e,!1))},get:function(e,t){return(e=P(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find((function(t,n){return n===e}),void 0,t)},has:function(e){return(e=P(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return Jt(this,function(e,t){var n=en(e);return n.size=e.size&&2*e.size-1,n.__iterateUncached=function(n,r){var o=this,a=0;return e.__iterate((function(e,r){return(!a||!1!==n(t,a++,o))&&!1!==n(e,a++,o)}),r),a},n.__iteratorUncached=function(n,r){var o,a=e.__iterator(1,r),i=0;return new R((function(){return(!o||i%2)&&(o=a.next()).done?o:i%2?N(n,i++,t):N(n,i++,o.value,o)}))},n}(this,e))},interleave:function(){var e=[this].concat(C(arguments)),t=Yt(this.toSeq(),G.of,e),n=t.flatten(!0);return t.size&&(n.size=t.size*e.length),Jt(this,n)},keySeq:function(){return ye(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(e,t){return Jt(this,Ht(this,e,t,!1))},zip:function(){var e=[this].concat(C(arguments));return Jt(this,Yt(this,Fn,e))},zipWith:function(e){var t=C(arguments);return t[0]=this,Jt(this,Yt(this,e,t))}}),o.prototype[p]=!0,o.prototype[h]=!0,Tn(a,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),a.prototype.has=In.includes,a.prototype.contains=a.prototype.includes,Tn(V,r.prototype),Tn(G,o.prototype),Tn(q,a.prototype),Tn(be,r.prototype),Tn(ve,o.prototype),Tn(we,a.prototype),{Iterable:n,Seq:H,Collection:ge,Map:Ne,OrderedMap:xt,List:dt,Stack:Cn,Set:cn,OrderedSet:bn,Record:on,Range:ye,Repeat:he,is:de,fromJS:ue}}()},81506:e=>{e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},34575:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},93913:e=>{function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}},59713:e=>{e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},67154:e=>{function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t.apply(this,arguments)}e.exports=t},29754:e=>{function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t},2205:(e,t,n)=>{var r=n(99489);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},85354:e=>{e.exports=function(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}},95318:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}}},20862:(e,t,n)=>{var r=n(50008);function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}e.exports=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n,a,i={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&((a=l?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(i,n,a):i[n]=e[n]);return i.default=e,t&&t.set(e,i),i}},6479:(e,t,n)=>{var r=n(37316);e.exports=function(e,t){if(null==e)return{};var n,o=r(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),i=0;i<a.length;i++)n=a[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n]);return o}},37316:e=>{e.exports=function(e,t){if(null==e)return{};for(var n,r={},o=Object.keys(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||(r[n]=e[n]);return r}},78585:(e,t,n)=>{var r=n(50008),o=n(81506);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?o(e):t}},99489:e=>{function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,r)}e.exports=t},50008:e=>{function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(n)}e.exports=t},78826:function(e){!function(){"use strict";function t(e){return parseInt(e)===e}function n(e){if(t(e.length)){for(var n=0;n<e.length;n++)if(!t(e[n])||e[n]<0||255<e[n])return;return 1}}function r(e,r){if(e.buffer&&ArrayBuffer.isView(e)&&"Uint8Array"===e.name)return r?e.slice?e.slice():Array.prototype.slice.call(e):e;if(Array.isArray(e)){if(n(e))return new Uint8Array(e);throw new Error("Array contains invalid value: "+e)}if(t(e.length)&&n(e))return new Uint8Array(e);throw new Error("unsupported array-like object")}function o(e){return new Uint8Array(e)}function a(e,t,n,r,o){null==r&&null==o||(e=e.slice?e.slice(r,o):Array.prototype.slice.call(e,r,o)),t.set(e,n)}var i,l={toBytes:function(e){var t=[],n=0;for(e=encodeURI(e);n<e.length;){var o=e.charCodeAt(n++);37===o?(t.push(parseInt(e.substr(n,2),16)),n+=2):t.push(o)}return r(t)},fromBytes:function(e){for(var t=[],n=0;n<e.length;){var r=e[n];r<128?(t.push(String.fromCharCode(r)),n++):191<r&&r<224?(t.push(String.fromCharCode((31&r)<<6|63&e[n+1])),n+=2):(t.push(String.fromCharCode((15&r)<<12|(63&e[n+1])<<6|63&e[n+2])),n+=3)}return t.join("")}},u=(i="0123456789abcdef",{toBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},fromBytes:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(i[(240&r)>>4]+i[15&r])}return t.join("")}}),s={16:10,24:12,32:14},c=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],f=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],d=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],p=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],h=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],m=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],y=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],g=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],b=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],v=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],w=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],O=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],S=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],_=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],C=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function E(e){for(var t=[],n=0;n<e.length;n+=4)t.push(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]);return t}function P(e){if(!(this instanceof P))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:r(e,!0)}),this._prepare()}function k(e){if(!(this instanceof k))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new P(e)}function j(e,t){if(!(this instanceof j))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=o(16);this._lastCipherblock=r(t,!0),this._aes=new P(e)}function x(e,t,n){if(!(this instanceof x))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 size)")}else t=o(16);this.segmentSize=n=n||1,this._shiftRegister=r(t,!0),this._aes=new P(e)}function M(e,t){if(!(this instanceof M))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=o(16);this._lastPrecipher=r(t,!0),this._lastPrecipherIndex=16,this._aes=new P(e)}function T(e){if(!(this instanceof T))throw Error("Counter must be instanitated with `new`");"number"==typeof(e=0===e||e?e:1)?(this._counter=o(16),this.setValue(e)):this.setBytes(e)}function I(e,t){if(!(this instanceof I))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",t instanceof T||(t=new T(t)),this._counter=t,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new P(e)}P.prototype._prepare=function(){var e=s[this.key.length];if(null==e)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var t=0;t<=e;t++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var n,r=4*(e+1),o=this.key.length/4,a=E(this.key);for(t=0;t<o;t++)this._Ke[n=t>>2][t%4]=a[t],this._Kd[e-n][t%4]=a[t];for(var i,l=0,u=o;u<r;){if(i=a[o-1],a[0]^=f[i>>16&255]<<24^f[i>>8&255]<<16^f[255&i]<<8^f[i>>24&255]^c[l]<<24,l+=1,8!=o)for(t=1;t<o;t++)a[t]^=a[t-1];else{for(t=1;t<o/2;t++)a[t]^=a[t-1];for(i=a[o/2-1],a[o/2]^=f[255&i]^f[i>>8&255]<<8^f[i>>16&255]<<16^f[i>>24&255]<<24,t=o/2+1;t<o;t++)a[t]^=a[t-1]}for(t=0;t<o&&u<r;)this._Ke[d=u>>2][p=u%4]=a[t],this._Kd[e-d][p]=a[t++],u++}for(var d=1;d<e;d++)for(var p=0;p<4;p++)i=this._Kd[d][p],this._Kd[d][p]=O[i>>24&255]^S[i>>16&255]^_[i>>8&255]^C[255&i]},P.prototype.encrypt=function(e){if(16!=e.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var t=this._Ke.length-1,n=[0,0,0,0],r=E(e),a=0;a<4;a++)r[a]^=this._Ke[0][a];for(var i=1;i<t;i++){for(a=0;a<4;a++)n[a]=p[r[a]>>24&255]^h[r[(a+1)%4]>>16&255]^m[r[(a+2)%4]>>8&255]^y[255&r[(a+3)%4]]^this._Ke[i][a];r=n.slice()}var l,u=o(16);for(a=0;a<4;a++)l=this._Ke[t][a],u[4*a]=255&(f[r[a]>>24&255]^l>>24),u[4*a+1]=255&(f[r[(a+1)%4]>>16&255]^l>>16),u[4*a+2]=255&(f[r[(a+2)%4]>>8&255]^l>>8),u[4*a+3]=255&(f[255&r[(a+3)%4]]^l);return u},P.prototype.decrypt=function(e){if(16!=e.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var t=this._Kd.length-1,n=[0,0,0,0],r=E(e),a=0;a<4;a++)r[a]^=this._Kd[0][a];for(var i=1;i<t;i++){for(a=0;a<4;a++)n[a]=g[r[a]>>24&255]^b[r[(a+3)%4]>>16&255]^v[r[(a+2)%4]>>8&255]^w[255&r[(a+1)%4]]^this._Kd[i][a];r=n.slice()}var l,u=o(16);for(a=0;a<4;a++)l=this._Kd[t][a],u[4*a]=255&(d[r[a]>>24&255]^l>>24),u[4*a+1]=255&(d[r[(a+3)%4]>>16&255]^l>>16),u[4*a+2]=255&(d[r[(a+2)%4]>>8&255]^l>>8),u[4*a+3]=255&(d[255&r[(a+1)%4]]^l);return u},k.prototype.encrypt=function(e){if((e=r(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=o(e.length),n=o(16),i=0;i<e.length;i+=16)a(e,n,0,i,i+16),a(n=this._aes.encrypt(n),t,i);return t},k.prototype.decrypt=function(e){if((e=r(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=o(e.length),n=o(16),i=0;i<e.length;i+=16)a(e,n,0,i,i+16),a(n=this._aes.decrypt(n),t,i);return t},j.prototype.encrypt=function(e){if((e=r(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=o(e.length),n=o(16),i=0;i<e.length;i+=16){a(e,n,0,i,i+16);for(var l=0;l<16;l++)n[l]^=this._lastCipherblock[l];this._lastCipherblock=this._aes.encrypt(n),a(this._lastCipherblock,t,i)}return t},j.prototype.decrypt=function(e){if((e=r(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=o(e.length),n=o(16),i=0;i<e.length;i+=16){a(e,n,0,i,i+16),n=this._aes.decrypt(n);for(var l=0;l<16;l++)t[i+l]=n[l]^this._lastCipherblock[l];a(e,this._lastCipherblock,0,i,i+16)}return t},x.prototype.encrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var t=r(e,!0),n=0;n<t.length;n+=this.segmentSize){for(var o=this._aes.encrypt(this._shiftRegister),i=0;i<this.segmentSize;i++)t[n+i]^=o[i];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(t,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return t},x.prototype.decrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var t=r(e,!0),n=0;n<t.length;n+=this.segmentSize){for(var o=this._aes.encrypt(this._shiftRegister),i=0;i<this.segmentSize;i++)t[n+i]^=o[i];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(e,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return t},M.prototype.decrypt=M.prototype.encrypt=function(e){for(var t=r(e,!0),n=0;n<t.length;n++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),t[n]^=this._lastPrecipher[this._lastPrecipherIndex++];return t},T.prototype.setValue=function(e){if("number"!=typeof e||parseInt(e)!=e)throw new Error("invalid counter value (must be an integer)");if(e>Number.MAX_SAFE_INTEGER)throw new Error("integer value out of safe range");for(var t=15;0<=t;--t)this._counter[t]=e%256,e=parseInt(e/256)},T.prototype.setBytes=function(e){if(16!=(e=r(e,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=e},T.prototype.increment=function(){for(var e=15;0<=e;e--){if(255!==this._counter[e]){this._counter[e]++;break}this._counter[e]=0}},I.prototype.decrypt=I.prototype.encrypt=function(e){for(var t=r(e,!0),n=0;n<t.length;n++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),t[n]^=this._remainingCounter[this._remainingCounterIndex++];return t},e.exports={AES:P,Counter:T,ModeOfOperation:{ecb:k,cbc:j,cfb:x,ofb:M,ctr:I},utils:{hex:u,utf8:l},padding:{pkcs7:{pad:function(e){var t=16-(e=r(e,!0)).length%16,n=o(e.length+t);a(e,n);for(var i=e.length;i<n.length;i++)n[i]=t;return n},strip:function(e){if((e=r(e,!0)).length<16)throw new Error("PKCS#7 invalid length");var t=e[e.length-1];if(16<t)throw new Error("PKCS#7 padding byte out of range");for(var n=e.length-t,i=0;i<t;i++)if(e[n+i]!==t)throw new Error("PKCS#7 invalid padding byte");var l=o(n);return a(e,l,0,0,n),l}}},_arrayTest:{coerceArray:r,createArray:o,copyArray:a}}}()},23848:function(e,t){!function(e){"use strict";function t(e,t){return e.then((function(e){return[null,e]})).catch((function(e){return t&&Object.assign(e,t),[e,void 0]}))}e.to=t,e.default=t,Object.defineProperty(e,"__esModule",{value:!0})}(t)},54599:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ImageViewerActions=f,t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=a(t))&&t.has(e))return t.get(e);var n,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var l;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((l=i?Object.getOwnPropertyDescriptor(e,n):null)&&(l.get||l.set)?Object.defineProperty(o,n,l):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=s(e);if(n=t?(n=s(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return u(o)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function f(e){var t=e.className,n=e.zoomOut,r=e.zoomIn,a=e.resetTransforms,i=e.rotate90,l=e.zoomInText,u=e.zoomOutText,s=e.zoomResetText,c=e.rotate90Text,f=e.saveAsText,d=e.handleActionSaveAs;return e=e.movable,o.default.createElement("div",{className:"toolbar flex flex-row ".concat(null!=t?t:"")},o.default.createElement("button",{className:"btn iconbutton has-padding hint--bottom-right","data-hint":u,type:"button",onClick:n,disabled:!e},o.default.createElement("i",{className:"icon icon-2x mdi mdi-magnify-minus-outline"})),o.default.createElement("button",{className:"btn iconbutton has-padding hint--bottom-right","data-hint":l,type:"button",onClick:r,disabled:!e},o.default.createElement("i",{className:"icon icon-2x mdi mdi-magnify-plus-outline"})),o.default.createElement("button",{className:"btn iconbutton has-padding hint--bottom-right","data-hint":s,type:"button",onClick:a},o.default.createElement("i",{className:"icon icon-2x mdi mdi-magnify-scan"})),o.default.createElement("button",{className:"btn iconbutton has-padding hint--bottom-right","data-hint":c,type:"button",onClick:i},o.default.createElement("i",{className:"icon icon-2x mdi mdi-format-rotate-90"})),o.default.createElement("button",{className:"btn iconbutton has-padding hint--bottom-right","data-hint":f,type:"button",onClick:d},o.default.createElement("i",{className:"icon icon-2x mdi mdi-arrow-down-bold-circle-outline"})))}n=(n=n(45697))&&n.__esModule?n:{default:n},f.propTypes={className:n.default.string,zoomOut:n.default.func,zoomIn:n.default.func,resetTransforms:n.default.func,rotate90:n.default.func,zoomInText:n.default.string,zoomOutText:n.default.string,rotate90Text:n.default.string,zoomResetText:n.default.string,saveAsText:n.default.string,handleActionSaveAs:n.default.func,movable:n.default.bool},f.defaultProps={className:"",zoomOut:null,zoomIn:null,resetTransforms:null,rotate90:null,zoomInText:null,zoomOutText:null,rotate90Text:null,zoomResetText:null,saveAsText:null,handleActionSaveAs:null,movable:!0};var d=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e);var n=l(r);function r(e){var t;if(this instanceof r)return c(u(t=n.call(this,e)),"handleMouseDown",(function(e){t.isDragging=!1,t.isMouseDown=!0,e.preventDefault(),t.disx=e.pageX-e.target.offsetLeft,t.disy=e.pageY-e.target.offsetTop})),c(u(t),"handleMouseMove",(function(e){t.isMouseDown&&t.isDraggable(e)&&(t.isDragging=!0,t.setState(t.calculatePos(e)))})),c(u(t),"handleMouseUp",(function(e){var n;t.isMouseDown=!1,e.target.closest("a,button")||(n=(new Date).getTime(),t.isDragging&&t.isDraggable(e)?t.setState(t.calculatePos(e)):t.lastMouseUpTime&&n-t.lastMouseUpTime<300?(t.closeTimer&&(clearTimeout(t.closeTimer),t.closeTimer=null),t.resetTransforms()):(clearTimeout(t.closeTimer),t.closeTimer=setTimeout((function(){var e=t.props.onRequestClose;e&&e(),t.closeTimer=null}),350)),t.lastMouseUpTime=n),t.isDragging=!1})),c(u(t),"isDraggable",(function(e){return!!t.state.movable&&"IMG"===(null==(e=e.target)?void 0:e.tagName)&&(n=e.getBoundingClientRect(),e=e.offsetParent.getBoundingClientRect(),n.height>e.height||n.width>e.width);var n})),c(u(t),"calculatePos",(function(e){var n,r,o,a=1<arguments.length&&void 0!==arguments[1]&&arguments[1]?{x:t.state.x,y:t.state.y}:{x:e.pageX-t.disx,y:e.pageY-t.disy},i=(i=t.state.scale)||1,l=(u=t.props).maxScale,u=u.minScale;return"IMG"===(null==(i=Math.min(l,Math.max(u,i)),Math.abs(1-i)<.15&&(i=1),l=e.target)?void 0:l.tagName)?(u=l.getBoundingClientRect(),e=l.offsetParent.getBoundingClientRect(),u.height<=e.height&&(a.y="auto"),u.width<=e.width&&(a.x="auto"),l=u.width/i*(i-1)/2,n=u.height/i*(i-1)/2,r=e.width-u.width+u.width/i*(i-1)/2,o=e.height-u.height+u.height/i*(i-1)/2,u.height>e.height&&(u.width<=e.width&&(a.x=(e.width-u.width/i)/2),a.y<o?a.y=o:a.y>n&&(a.y=n)),u.width>e.width&&(u.height<=e.height&&(a.y=(e.height-u.height/i)/2),a.x<r?a.x=r:a.x>l&&(a.x=l)),a):{}})),c(u(t),"resetTransforms",(function(){t.setState({x:"auto",y:"auto",scale:1,rotate:0,movable:!0})})),c(u(t),"zoomIn",(function(e){var n=t.state,r=n.x,o=n.y;t.setState((function(e){return{scale:Math.min(t.props.maxScale,1.5*e.scale)}}),(function(){"auto"===r&&"auto"===o||setTimeout((function(){t.setState(t.calculatePos({target:document.querySelector(".advance-image-viewer > img")},!0))}),200)})),null!=e&&e.stopPropagation()})),c(u(t),"zoomOut",(function(e){var n=t.state,r=n.x,o=n.y;t.setState((function(e){return{scale:Math.max(t.props.minScale,e.scale*(2/3))}}),(function(){"auto"===r&&"auto"===o||setTimeout((function(){t.setState(t.calculatePos({target:document.querySelector(".advance-image-viewer > img")},!0))}),200)})),null!=e&&e.stopPropagation()})),c(u(t),"rotate90",(function(e){var n,r,o=null==(n=t._viewerElement)?void 0:n.getBoundingClientRect(),a=t._imageElement?{width:t._imageElement.width,height:t._imageElement.height}:null;t.setState((function(e){var t,n,i,l={};return e=e.rotate,e=!((r=e-90)/90%2),l.movable=r%360==0,l.x="auto",l.y="auto",l.scale=1,l.rotate=r,!e&&o&&a&&(e=a.height,t=a.width,n=o.height,i=o.width,n<t?l.scale=n/t:i<e&&(l.scale=i/e)),l}),(function(){r%360==0&&setTimeout((function(){requestAnimationFrame((function(){t.setState({rotate:0},(function(){document.body.classList.add("no-animation"),requestAnimationFrame((function(){document.body.classList.remove("no-animation")}))}))}))}),100)})),null!=e&&e.stopPropagation()})),c(u(t),"handleKeyDown",(function(e){var n=(r=t.props).onRequestClose,r=r.onKeyDown;"Escape"===e.code&&null!=n&&n(),null!=r&&r(e)})),c(u(t),"handleMouseOnWheel",(function(e){var n,r,o,a,i,l,u,s=(d=t.state).x,c=d.y,f=d.movable,d=d.scale;f&&(f=e.ctrlKey,n=(r=e.nativeEvent).wheelDelta,r=r.deltaY,l=t.props,o=l.minScale,a=l.maxScale,i=l.wheelSpeed,l=l.touchpadSpeed,u=f?l*(-r/80)*(d/2):i*(n/500),t.setState((function(e){return{scale:Math.min(a,Math.max(o,e.scale+u))}}),(function(){"auto"===s&&"auto"===c||(clearTimeout(t.posRegulatorTimer),t.posRegulatorTimer=setTimeout((function(){t.setState(t.calculatePos(e,!0))}),200))})))})),c(u(t),"_getViewerRef",(function(e){t._viewerElement=e})),c(u(t),"_getImageRef",(function(e){t._imageElement=e})),t.state={x:"auto",y:"auto",scale:1,rotate:0,movable:!0},t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},{key:"componentDidUpdate",value:function(e,t){var n=this;this.props.showScaleLabel&&t.scale!==this.state.scale&&(this._scaleChangeTimer&&clearTimeout(this._scaleChangeTimer),this._viewerElement.classList.add("is-scaling"),this._scaleChangeTimer=setTimeout((function(){n._viewerElement.classList.remove("is-scaling"),n._scaleChangeTimer=null}),1e3))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.closeTimer&&clearTimeout(this.closeTimer),this._scaleChangeTimer&&clearTimeout(this._scaleChangeTimer)}},{key:"isMovable",get:function(){return this.state.movable}},{key:"render",value:function(){var e=(c=this.props).src,t=c.showActions,n=c.minScale,r=c.maxScale,a=c.zoomInText,i=c.zoomOutText,l=c.zoomResetText,u=c.rotate90Text,s=c.showScaleLabel,c=c.saveAsText,d=(y=this.state).scale,p=y.x,h=y.y,m=y.rotate,y=y.movable;return r=Math.min(r,Math.max(n,d)),Math.abs(1-r)<.15&&(r=1),n={transform:"scale(".concat(r,") rotate(").concat(m,"deg)"),position:"auto"===p||"auto"===h?"relative":"absolute",top:h,left:p},d=null,t&&(d=o.default.createElement(f,{className:"dock dock-top dock-right has-padding-sm rounded",zoomOut:this.zoomOut,zoomIn:this.zoomIn,resetTransforms:this.resetTransforms,rotate90:this.rotate90,zoomInText:a,zoomOutText:i,zoomResetText:l,rotate90Text:u,saveAsText:c,movable:y})),o.default.createElement("div",{className:"advance-image-viewer dock center-content",onWheel:this.handleMouseOnWheel,ref:this._getViewerRef},o.default.createElement("img",{style:n,src:e,alt:e,onMouseDown:this.handleMouseDown,ref:this._getImageRef}),s?o.default.createElement("div",{className:"advance-image-viewer-scale-label label circle shadow"},Math.floor(100*r),"%"):null,d)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component);c(t.default=d,"propTypes",{src:n.default.string,onRequestClose:n.default.func,onKeyDown:n.default.func,showActions:n.default.bool,minScale:n.default.number,maxScale:n.default.number,wheelSpeed:n.default.number,touchpadSpeed:n.default.number,zoomInText:n.default.string,zoomOutText:n.default.string,rotate90Text:n.default.string,zoomResetText:n.default.string,showScaleLabel:n.default.bool,saveAsText:n.default.string}),c(d,"defaultProps",{src:null,onRequestClose:null,onKeyDown:null,showActions:!1,minScale:.1,maxScale:10,wheelSpeed:1,touchpadSpeed:1,zoomInText:null,zoomOutText:null,rotate90Text:null,zoomResetText:null,showScaleLabel:!0,saveAsText:null})},50943:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.MENTION_TRIGGER=t.DraftJS=t.AutocompleteEditor=void 0;var o=f(n(45697)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=c(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),i=f(n(73935)),l=n(13544),u=f(n(93378)),s=["editorState","onChange","delay","onRequestSuggestions","suggestionsItemRender","onClickMoreSuggestionBtn","handleReturn","keyBindingFn","onSuggestionSelect","onTab","onArrowDown","onArrowLeft","onArrowRight","onArrowUp"];function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}t.MENTION_TRIGGER="@";var g=(0,l.lazyModuleProxy)(process.env.HOT?"draft.dev":"draft",{browser:"Draft",root:"assets",id:"draft",beforeLoad:function(){n.g.React=a.default,n.g.ReactDOM=i.default}});t.DraftJS=g,l=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=m(e);if(n=t?(n=m(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return h(o)}}(o);function o(e){var t;if(this instanceof o)return y(h(t=n.call(this,e)),"handleSuggestionClick",(function(e){t.commitSelection(e)})),y(h(t),"handleMoreSuggestionBtnClick",(function(){var e=t.props.onClickMoreSuggestionBtn;e&&e(),t.setState({autocompleteState:!1})})),y(h(t),"handleChange",(function(e){var n=(o=t.props).onChange,r=o.onRequestSuggestions,o=o.delay;n&&n(e),r&&(t.delayTimer&&clearTimeout(t.delayTimer),o?t.delayTimer=setTimeout((function(){var e=t.getAutocompleteState();t.setState({autocompleteState:e,selectedIndex:0}),t.delayTimer=null}),o):window.requestAnimationFrame((function(){t.setState({autocompleteState:t.getAutocompleteState(),selectedIndex:0})})))})),y(h(t),"handleSuggestionEmptyChange",(function(e){t.setState({isSuggestionEmpty:!e,noOrOneSuggestion:e<2})})),y(h(t),"onArrow",(function(e,n,r){return t.state.noOrOneSuggestion||!t.hasAutocompleteState()?(n&&n(e),!1):(e.preventDefault(),t.setState((function(e){return{selectedIndex:e.selectedIndex+r}})),!0)})),y(h(t),"onArrowUp",(function(e){t.onArrow(e,t.props.onArrowUp,-1)})),y(h(t),"onArrowDown",(function(e){t.onArrow(e,t.props.onArrowDown,1)})),y(h(t),"onArrowLeft",(function(e){t.onArrow(e,t.props.onArrowLeft,-1)})),y(h(t),"onArrowRight",(function(e){t.onArrow(e,t.props.onArrowRight,1)})),y(h(t),"onEscape",(function(e){var n=t.state.autocompleteState;e.preventDefault(),n&&t.setState({autocompleteState:!1})})),y(h(t),"onTab",(function(e){return t.onArrow(e,t.props.onTab,1)})),y(h(t),"keyBindingFn",(function(e){var n=t.hasAutocompleteState();if(n){var r=t["on".concat(e.key)];if("function"==typeof r)return r(e)}if(t.state.isSuggestionEmpty||" "!==e.key||!n)return(r=t.props.keyBindingFn)?r(e):g.getDefaultKeyBinding(e);e.preventDefault(),t.commitSelection()})),y(h(t),"handleReturn",(function(e){var n;return t.state.isSuggestionEmpty||!t.hasAutocompleteState()?(n=t.props.handleReturn)?n(e):"not-handled":(e.preventDefault(),t.commitSelection(),"handled")})),t.state={autocompleteState:null,selectedIndex:0,isSuggestionEmpty:!0,noOrOneSuggestion:!0},t;throw new TypeError("Cannot call a class as a function")}return t=o,(e=[{key:"componentWillUnmount",value:function(){this.delayTimer&&clearTimeout(this.delayTimer)}},{key:"getAutocompleteState",value:function(){var e,t=this.getAutocompleteRange("@");return t?{trigger:"@",type:"mention",left:((e=window.getSelection().getRangeAt(0).cloneRange()).setStart(e.startContainer,t.start),e=e.getBoundingClientRect()).left,top:window.innerHeight-e.top,text:t.text}:null}},{key:"getAutocompleteRange",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"@";if(0===(t=window.getSelection()).rangeCount)return null;if(this.isBlurOrHasEntityAtSelection())return null;var t,n=(t=t.getRangeAt(0)).startContainer.textContent;return-1===(e=(n=n.substring(0,t.startOffset)).lastIndexOf(e))||(n=n.substring(e).substring("@".length)).length&&!n.trim().length?null:{text:n,start:e,end:t.startOffset}}},{key:"isBlurOrHasEntityAtSelection",value:function(){var e=this.props.editorState,t=e.getSelection();return!t.getHasFocus()||!!e.getCurrentContent().getBlockForKey(t.getStartKey()).getEntityAt(t.getStartOffset()-1)}},{key:"hasAutocompleteState",value:function(){return!!this.state.autocompleteState}},{key:"focus",value:function(){this.editor.focus()}},{key:"commitSelection",value:function(e){var t=this.props.onSuggestionSelect;null==e&&(e=this._suggestionsPanel.getSelectedItem()),t&&e&&t(e),this.setState({autocompleteState:!1})}},{key:"render",value:function(){var e=this,t=(i=this.props).editorState,n=(i.onChange,i.delay,i.onRequestSuggestions),r=i.suggestionsItemRender,o=i.onClickMoreSuggestionBtn,i=(i.handleReturn,i.keyBindingFn,i.onSuggestionSelect,i.onTab,i.onArrowDown,i.onArrowLeft,i.onArrowRight,i.onArrowUp,function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(i,s)),l=(t=a.default.createElement(g.Editor,d({ref:function(t){e.editor=t},key:"editor",editorState:t,handleReturn:this.handleReturn,onChange:this.handleChange,keyBindingFn:this.keyBindingFn},i)),(i=this.state).autocompleteState);return i=i.selectedIndex,n&&l?[t,a.default.createElement(u.default,{key:"suggestions",className:"shadow-1 rounded",ref:function(t){e._suggestionsPanel=t},suggestionsState:l,selectedIndex:i,onRequestSuggestions:n,suggestionsItemRender:r,onClickItem:this.handleSuggestionClick,showMoreBtn:o?this.handleMoreSuggestionBtnClick:null,onSuggestionsCountChange:this.handleSuggestionEmptyChange})]:t}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),o}(a.PureComponent),y(t.AutocompleteEditor=l,"propTypes",{onChange:o.default.func,onClickMoreSuggestionBtn:o.default.func,onRequestSuggestions:o.default.func,suggestionsItemRender:o.default.func,onSuggestionSelect:o.default.func,editorState:o.default.any,handleReturn:o.default.func,keyBindingFn:o.default.func,onTab:o.default.func,onArrowDown:o.default.func,onArrowLeft:o.default.func,onArrowRight:o.default.func,onArrowUp:o.default.func,delay:o.default.number}),y(l,"defaultProps",{onChange:null,onClickMoreSuggestionBtn:null,onRequestSuggestions:null,suggestionsItemRender:null,onSuggestionSelect:null,editorState:null,handleReturn:null,keyBindingFn:null,onTab:null,onArrowDown:null,onArrowLeft:null,onArrowRight:null,onArrowUp:null,delay:0})},2388:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.renderAvatar=function(e,t){return e?!0===e&&t?r.default.createElement(y,{icon:t}):r.default.isValidElement(e)?e:"object"!==m(e)?r.default.createElement(y,{auto:e}):r.default.createElement(y,e):null};var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==m(e)&&"function"!=typeof e)return{default:e};if((t=p(t))&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(n(67294)),o=d(n(45697)),a=n(64393),i=d(n(60276)),l=d(n(40328)),u=d(n(88446)),s=n(74933),c=n(16986),f=["image","icon","label","style","auto","skin","size","className","foreColor","imageClassName","imageErrorView","iconClassName","children","iconSize","badge"];function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e){var t=e.image,n=e.icon,o=e.label,d=e.style,p=e.auto,m=e.skin,y=e.size,g=e.className,b=e.foreColor,v=e.imageClassName,w=e.imageErrorView,O=e.iconClassName,S=e.children,_=e.iconSize,C=e.badge;return e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,f),d=Object.assign(m?i.default.style(m):{},d),y&&(d.width=(0,a.rem)(y),d.height=d.width),b&&(d.color=b),p&&("string"!=typeof p||/^(icon|mdi|sprite)-/.test(p)?n=p:1===p.length?o=p:t=p),m=null,t&&(m=r.default.isValidElement(t)?t:r.default.createElement(u.default,{alt:t,src:t,className:v},!1!==w&&(w||r.default.createElement(l.default,{name:"image-filter-hdr muted"})))),b=null,!t&&n&&(b=r.default.isValidElement(n)?n:r.default.createElement(l.default,{className:O,name:n,size:_})),p=null,t||n||!o||(p=r.default.isValidElement(o)?o:o.trim().length<=1?r.default.createElement("span",{className:"text",style:y?{fontSize:(0,a.rem)(y/2)}:{}},o):(w=(v=o.trim()).match(/(?::[\w\d_]+:)|\S/g),O=v.match(/(?:(?: |\n)(?:\w+)|(?: |\n)(?::[\w\d_]+:))/g),_=(0,c.getAsciiWidth)(v),t=w.length,n=O?O.length+1:1,v=0,3<=(O=w.filter((function(e){return 2<e.length&&e.startsWith(":")||1===e.length&&(0,c.isWideCharacter)(e)})).length)||6<t||2<t&&1<n?v=2:1<t&&(1<O||3<t||3===t&&90<=_)&&(v=1),w=0,y&&(w=y/2,1===v?w*=.85:2===v&&(w*=.65)),n="<span>".concat(o.replace(/(:[\w\d_]+:)/g,"</span>$1<span>"),"</span>").replace(/<span> *<\/span>/g,""),r.default.createElement("span",{className:(0,a.classes)("text","crowd-".concat(v)),style:y?{fontSize:(0,a.rem)(Math.round(w))}:{},dangerouslySetInnerHTML:{__html:(0,s.emojiToImage)(n)}}))),O=null,r.default.createElement("div",h({className:(0,a.classes)("avatar",g,{"with-badge":O=C?r.default.isValidElement(C)?C:r.default.createElement("div",{className:"label label-sm dock-right dock-top circle red badge"},C):O})},e,{style:d}),m,b,p,O,S)}y.propTypes={auto:o.default.any,skin:o.default.any,image:o.default.any,icon:o.default.any,label:o.default.any,size:o.default.number,iconSize:o.default.number,className:o.default.oneOfType([o.default.array,o.default.object,o.default.string]),foreColor:o.default.string,imageClassName:o.default.string,iconClassName:o.default.string,style:o.default.object,children:o.default.any,badge:o.default.any,leftstyle:o.default.object,rightstyle:o.default.object,imageErrorView:o.default.any},y.defaultProps={skin:null,image:null,icon:null,label:null,size:null,iconSize:null,foreColor:null,className:null,imageClassName:null,iconClassName:null,style:null,children:null,auto:null,badge:null,leftstyle:null,rightstyle:null,imageErrorView:null},t.default=(0,r.memo)(y)},18033:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=f(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=c(n(45697)),i=n(64393),l=c(n(60276)),u=n(40328),s=["skin","icon","label","iconPosition","hoverLabel","className","children","style","type","btnClass","disabled","url","click"];function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e){var t=e.skin,n=e.icon,r=e.label,a=e.iconPosition,c=e.hoverLabel,f=e.className,p=e.children,m=e.style,y=e.type,g=e.btnClass,b=e.disabled,v=e.url,w=e.click,O=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,s),null);return n&&(O=(0,u.renderIcon)(n)),n=null,r&&(n=o.default.isValidElement(r)?r:o.default.createElement("span",{className:"text"},r)),r=null,c&&(r=o.default.createElement("span",{className:"text for-hover"},c)),c=Object.assign(t?l.default.style(t):{},m),t=h({className:(0,i.classes)(g,b?"disabled":null,f,{"btn-icon":!n&&!p,"has-hover-text":r}),style:c,onClick:w},e),"a"===y||v?(t.href=v,o.default.createElement("a",t,O,n,r,p)):o.default.createElement("button",d({type:y||"button"},t),"left"===a?O:null,n,r,"right"===a?O:null,p)}m.propTypes={skin:a.default.any,icon:a.default.oneOfType([a.default.string,a.default.object]),label:a.default.any,iconPosition:a.default.string,hoverLabel:a.default.any,className:a.default.string,style:a.default.object,children:a.default.any,btnClass:a.default.string,type:a.default.string,url:a.default.string,disabled:a.default.bool,click:a.default.func},m.defaultProps={skin:null,click:null,icon:null,label:null,iconPosition:"left",hoverLabel:null,className:null,style:null,children:null,btnClass:"btn",type:"button",url:null,disabled:!1},t.default=(0,o.memo)(m)},93055:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=c(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=s(n(45697)),i=n(64393),l=s(n(12740)),u=["checked","indeterminate","label","children","className","inputProps","onChange","description"];function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e){var t=(0,l.default)(),n=e.checked,r=e.indeterminate,a=e.label,s=(e.children,e.className),c=e.inputProps,d=e.onChange,p=e.description,h=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,u),p?{display:"inline-block"}:{display:"block"});return o.default.createElement("div",f({className:(0,i.classes)("checkbox",s,{checked:n,indeterminate:r})},e),o.default.createElement("input",f({id:t,checked:n,type:"checkbox",onChange:function(e){return null==d?void 0:d(e.target.checked,e)}},c)),null!=a&&o.default.createElement("label",{style:h,htmlFor:t},a),null!=p&&o.default.createElement("span",{className:"text-gray"}," (".concat(p,")")))}d.propTypes={checked:a.default.bool,indeterminate:a.default.bool,label:a.default.string,className:a.default.string,inputProps:a.default.object,onChange:a.default.func,children:a.default.any,description:a.default.string},d.defaultProps={checked:!1,indeterminate:!1,label:null,className:null,inputProps:null,onChange:null,children:null,description:null},t.default=(0,o.memo)(d)},8062:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=i(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var l;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((l=a?Object.getOwnPropertyDescriptor(e,n):null)&&(l.get||l.set)?Object.defineProperty(o,n,l):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=(n=(n=n(45697))&&n.__esModule?n:{default:n},["onClickOutside","children"]);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=f(e);if(n=t?(n=f(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return c(o)}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var p=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e);var n=s(r);function r(){var e,t=this,o=r;if(!(t instanceof o))throw new TypeError("Cannot call a class as a function");for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return d(c(e=n.call.apply(n,[this].concat(i))),"handleClickOutside",(function(t){var n;0===t.button&&(n=e.props.onClickOutside)&&e._wrapper&&!e._wrapper.contains(t.target)&&n(t,c(e))})),e}return t=r,(e=[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"render",value:function(){var e=this,t=((n=this.props).onClickOutside,n.children),n=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(n,a);return o.default.createElement("div",l({ref:function(t){e._wrapper=t}},n),t)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.PureComponent);d(t.default=p,"propTypes",{onClickOutside:n.default.func,children:n.default.any}),d(p,"defaultProps",{onClickOutside:null,children:null})},81087:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.showContextMenu=t.default=void 0;var o=p(n(67294)),a=p(n(9215)),i=n(64393),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=d(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(40328)),u=p(n(61997)),s=p(n(94128)),c=p(n(8062)),f=["id","className","hidden","click","url","render","type","disabled","data","icon","extraView","checked","label"];function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function b(){var e=window.document.getElementsByClassName("collapse-menu-items");e[0]&&(e[0].style.cssText="")}var v=s.default.access("ui");n={show:t.showContextMenu=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,s=(p=n).className,d=p.content,p=p.style,h=(C=n).onItemClick,w=C.menuClassName,O=C.itemClassName,S=v.getZoomFactor();if(!e&&DEBUG)throw new Error("Position is not defined to show the popover.");n.id||(n.id=(0,u.default)());var _=!1,C=t.map((function(e,t){if(o.default.isValidElement(e))return e;var r=e="string"==typeof e?"-"===e||"divider"===e||"separator"===e?{type:"divider"}:{label:e}:e,u=r.id,s=r.className,c=r.hidden,d=(r.click,r.url),p=r.render,m=r.type,v=r.disabled,w=(r.data,r.icon),S=r.extraView,C=r.checked,E=r.label,P=g(r,f);return Object.keys(P).forEach((function(e){e.startsWith("_")&&delete P[e]})),c?null:p?p(e):"divider"===m||"separator"===m?o.default.createElement("div",y({key:u||t,className:(0,i.classes)("divider",s)},P)):((r=w&&(0,l.renderIcon)(w,{className:"item-left-icon"}))&&(_=!0),c=null,o.default.isValidElement(E)?c=E:E&&(c=o.default.createElement("span",{className:"title"},E)),o.default.createElement("a",y({href:d,onClick:function(e,t,r){var o=null;h&&(o=h(e,t,r)),e.click&&(b(),o=e.click(e,t,r)),!1!==o&&((e=window.document.getElementsByClassName("collapse-menu-items"))[0]&&(e[0].style.cssText=""),a.default.remove(n.id))}.bind(null,e,t),key:u||t,className:(0,i.classes)("item",O,s,{disabled:v})},P),r,c,C&&o.default.createElement(l.default,{name:"check"}),S))})),E=(d=o.default.createElement(c.default,{onClickOutside:b},o.default.createElement("div",{className:(0,i.classes)("list dropdown-menu",w,{"has-icon-left":_})},C,d)),e.x/S||0),P=e.y/S||0;return p=m({maxWidth:window.innerWidth,maxHeight:window.innerHeight,left:E,top:P},p),s=(0,i.classes)("contextmenu layer rounded",s),delete(n=m(m({backdropClassName:"clean",animation:!1},n),{},{className:s,style:p,content:d,plugName:"contextmenu"})).menuClassName,delete n.itemClassName,delete n.onItemClick,a.default.show(n,(function(t){var n=t.displayElement,r=E,o=P,a=n.clientWidth,i=n.clientHeight,l=(n=e.direction,e.triggerElement),u=e.triggerElementBounding||l&&l.getBoundingClientRect();if(n)switch(n){case"top":r-=a/2,o-=i;break;case"top-left":r-=a,o-=i;break;case"top-right":o-=i;break;case"left":r-=a/2,o-=i/2;break;case"right":o-=i/2;break;case"bottom":r-=a/2;break;case"bottom-left":r-=a;break;case"below-left":u&&(r=u.left,o=u.top+u.height);break;case"below-right":u&&(r=u.left+u.width-a,o=u.top+u.height);break;case"above-left":u&&(r=u.left,o=u.top-i);break;case"above-right":u&&(r=u.left+u.width-a,o=u.top-i)}e.offsetX&&(r+=e.offsetX/S),e.offsetY&&(o+=e.offsetY/S),r=Math.floor(Math.max(0,Math.min(window.innerWidth/S-a,r))),o=Math.floor(Math.max(0,Math.min(window.innerHeight/S-i,o))),r!==E||o!==P?t.setStyle({top:o,left:r,opacity:1}):t.setStyle({opacity:1})}),r)},hide:a.default.hide,remove:a.default.remove},t.default=n},97591:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ImgCropper=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=c(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=s(n(1881)),i=s(n(40328)),l=n(64393),u=s(n(60357));function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n=o.default.forwardRef((function(e,t){var n=void 0===(n=e.inputImage)?"":n,r=void 0===(s=e.maxMagnification)?3:s,s=(e=void 0!==(s=e.isPreviewCircle)&&s,f((0,u.default)(),1)[0]),c=(n=f((0,o.useState)(n),2))[0],d=n[1],p=(0,o.useRef)(null),h=((0,o.useImperativeHandle)(t,(function(){return{setImage:d,cropperRef:p}}),[d,p]),(0,o.useRef)()),m=(n=(0,o.useCallback)((function(e){var t=p.current.getContainerData();p.current.zoomTo(+e.target.value,{x:t.width/2,y:t.height/2})}),[]),(0,o.useRef)(0)),y=(t=(0,o.useCallback)((function(){var e,t=(e=(e=p.current.getCanvasData()).width/e.naturalWidth)*r;m.current=t,h.current.min=String(e),h.current.value=String(e),h.current.max=String(t),h.current.step=String((t-e)/100)}),[]),(0,o.useCallback)((function(e){if(e.detail.ratio>m.current)return e.preventDefault(),void p.current.zoomTo(m.current);h.current.value=String(e.detail.ratio)}),[]));return o.default.createElement("div",{className:"flex avatar-settings xx-cropper"},o.default.createElement("div",{className:"operate operate-size"},o.default.createElement("div",{className:"gray-pale operate-size overlap pointer-pass top-left translucent"}),o.default.createElement(a.default,{style:{height:200,width:200},aspectRatio:1,preview:".avatar-preview",src:c,viewMode:3,minCropBoxHeight:200,minCropBoxWidth:200,background:!1,responsive:!0,autoCropArea:1,checkOrientation:!0,onInitialized:function(e){p.current=e},guides:!1,dragMode:"move",movable:!0,cropBoxMovable:!1,cropBoxResizable:!1,zoomable:!0,scalable:!1,rotatable:!1,zoom:y,ready:t}),e?o.default.createElement("div",{className:(0,l.classes)("operate-size overlap pointer-pass top-left translucent",{hidden:!c})},o.default.createElement("svg",{width:"100%",height:"100%"},o.default.createElement("defs",null,o.default.createElement("mask",{id:"hole"},o.default.createElement("rect",{width:"100%",height:"100%",fill:"white"}),o.default.createElement("circle",{r:"50%",cx:"50%",cy:"50%",fill:"black"}))),o.default.createElement("rect",{width:"100%",height:"100%",mask:"url(#hole)"}))):null,o.default.createElement("div",{className:"has-padding overlap bottom"},o.default.createElement("div",{className:"slider"},o.default.createElement(i.default,{name:"mdi-minus",size:24,className:"translucent"}),o.default.createElement("input",{className:"avatar-cropper",ref:h,type:"range",min:"0",max:"1",step:"0.01",defaultValue:"0",style:{flexGrow:10},onChange:n,disabled:!c}),o.default.createElement(i.default,{name:"mdi-plus",size:24,className:"translucent"})))),o.default.createElement("div",{className:"flex-vertical"},o.default.createElement("div",{className:(0,l.classes)("preview-size avatar gray-pale has-margin-sm",{circle:e})},o.default.createElement("div",{className:"avatar-preview preview-size"})),o.default.createElement("div",{className:"text-gray text-center"},s.string("common.previewCropper"))))})),t.ImgCropper=n},98285:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==c(e)&&"function"!=typeof e)return{default:e};if((t=u(t))&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(n(67294)),o=l(n(61997)),a=l(n(71147)),i=["style","cache","content","id"];function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n=function(e){var t=l;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(n=t?(n=d(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,n&&("object"===c(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(l);function l(e){if(this instanceof l)return(e=n.call(this,e)).state={all:{}},e;throw new TypeError("Cannot call a class as a function")}return t=l,(e=[{key:"getItem",value:function(e){return this.state.all[e]}},{key:"lastShowItem",get:function(){var e=this.state.all;return e=Object.values(e).filter((function(e){return e.ref&&e.ref.isShow})).sort((function(e,t){return t.lastShowTime-e.lastShowTime})),null==e?void 0:e[0]}},{key:"show",value:function(e,t){var n=this,r=this.state.all;null==(e="object"!==c(e)?{id:e}:e).id&&(e.id=(0,o.default)());var a,u,s=e.id,f=r[s];if(!f)return a=e.onHidden,e.onHidden=function(t){var o;null!=(o=l.onHiddenHandler)&&o.call(l,t,e),null!=a&&a(t),e.cache||(delete r[s],n.setState({all:r}))},u=e.onShown,e.onShown=function(n){var r;null!=(r=l.onShownHandler)&&r.call(l,n,e),null!=u&&u(n),"function"==typeof t&&t(n)},r[s]={props:e},this.setState({all:r}),null;var d=(m=e).style,p=m.cache,h=m.content,m=(m.id,function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(m,i));return h||Object.keys(m).length?(h&&f.ref.loadContent(h),r[s]=Object.assign(f,{props:e}),this.setState({all:r},(function(){f.ref.isShow?null!=t&&t():f.ref.show(t)}))):(p&&d&&f.ref.setStyle(d),f.ref.show(t)),f.ref}},{key:"hide",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"auto",o=this.state.all,a=null!=e?o[e]:this.lastShowItem;if(a)return"auto"===r&&(r=!a.props.cache),a.ref.hide((function(){r&&(delete o[e],n.setState({all:o})),null!=t&&t()})),a.ref;null!=t&&t(!1)}},{key:"remove",value:function(e,t){return this.hide(e,t,!0)}},{key:"load",value:function(e,t,n){var r=this.state.all[e];if(r)return r.ref.loadContent(t,n),r.ref;DEBUG&&console.error("Cannot find display layer with id ".concat(e,"."))}},{key:"setStyle",value:function(e,t,n){var r=this.state.all[e];if(r)return r.ref.setStyle(t,n),r.ref;DEBUG&&console.error("Cannot find display layer with id ".concat(e,"."))}},{key:"render",value:function(){var e=this.state.all;return r.default.createElement("div",{className:"display-container dock"},Object.keys(e).map((function(t){var n=e[t],o=n.props;return r.default.createElement(a.default,s({key:t,ref:function(e){n.ref=e}},o))})))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),l}(r.Component),t.default=n},71147:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=f(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=c(n(45697)),i=c(n(91705)),l=n(64393),u=c(n(61997)),s=(n=c(n(60811)),["plugName","className","rootClassName","backdrop","backdropClassName","animation","modal","show","content","onShown","onHidden","onShow","onHide","header","footer","hotkey","cache","loadingContent","contentClassName","contentLoadFail","children","style","listenUpdateStyle","id","onAction"]);function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var v=new n.default({init:0,ready:1,shown:2,hidden:3},0),w=1100;n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=g(e);if(n=t?(n=g(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return y(o)}}(a);function a(e){var t;if(this instanceof a)return b(y(t=n.call(this,e)),"handleWindowKeyup",(function(e){var n=(r=t.props).hotkey,r=r.onAction;return"Escape"===e.code?(null!=r&&r({type:"cancel"}),void t.hide()):"Enter"!==e.code&&"NumpadEnter"!==e.code||"function"!=typeof r?void("function"==typeof n&&n(e,y(t))):(r({type:"submit"}),void t.hide())})),b(y(t),"handleBackdropClick",(function(){t.props.enableBackdropClick&&!t.props.modal&&t.hide()})),b(y(t),"handleDisplayClick",(function(e){for(var n=e.target;n;){if(n&&(n.hasAttribute("data-dismiss")||n.classList&&n.classList.contains("dismiss-display"))){t.hide();break}n=n.parentElement}})),t.state={stage:v.init,loading:!0,content:null,style:null,zIndex:w++},"function"!=typeof e.content&&(t.state.content=e.content,t.state.loading=!1),t.id=e.id||(0,u.default)(),t.showTimerTask=null,t.lastShowTime=0,t;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"componentDidMount",value:function(){var e=(t=this.props).show,t=t.hotkey;e&&(this.show(),this.loadContent()),t&&window.addEventListener("keyup",this.handleWindowKeyup)}},{key:"componentWillUnmount",value:function(){this.props.hotkey&&window.removeEventListener("keyup",this.handleWindowKeyup),clearTimeout(this.showTimerTask)}},{key:"stageName",get:function(){var e=this.state.stage;return v.getName(e)}},{key:"isShow",get:function(){return this.isStage(v.shown)}},{key:"isHide",get:function(){return this.isStage(v.hidden)}},{key:"isStage",value:function(e){return v.isSame(e,this.state.stage)}},{key:"changeStage",value:function(e){var t={stage:v.getValue(e)};v.isSame(e,v.shown)&&(t.zIndex=w++),this.setState(t)}},{key:"setStyle",value:function(e,t){this.setState({style:e},t)}},{key:"show",value:function(e){var t=this;if(this.state.stage===v.init)return this.changeStage(v.ready),void(this.showTimerTask=setTimeout((function(){t.show(e)}),50));function n(){t.lastShowTime=(new Date).getTime(),null!=o&&o(t),null!=e&&e(t)}var r=(a=this.props).onShow,o=a.onShown,a=a.animation;null!=r&&r(this),this.changeStage(v.shown),a?setTimeout(n,400):n()}},{key:"hide",value:function(e){function t(){var t=(n=r.props).cache,n=n.onHidden;t&&r.reset(),null!=n&&n(r),"function"==typeof e&&e(r)}var n,r=this,o=(this.changeStage(v.hidden),n=this.props).animation;null!=(n=n.onHide)&&n(this),o?setTimeout(t,400):t()}},{key:"loadContent",value:function(e,t){function n(){null!=i&&i(!0,r.state.content,r),null!=t&&t(!0,r.state.content,r)}var r=this,o=this.props.content,a=(e="function"==typeof(o=void 0!==e?e:o)?o():o,(o=this.props).contentLoadFail),i=o.onLoad;if(e instanceof Promise)return this.setState({loading:!0,content:null}),void e.then((function(e){r.setState({content:e,loading:!1},n)})).catch((function(){r.setState({content:a,loading:!1},n)}));this.setState({content:e,loading:!1},n)}},{key:"reset",value:function(){this.setState({stage:v.init})}},{key:"render",value:function(){var e=this,t=(w=this.props).plugName,n=w.className,r=w.rootClassName,a=w.backdrop,u=w.backdropClassName,c=w.animation,f=(w.modal,w.show,w.content,w.onShown,w.onHidden,w.onShow,w.onHide,w.header),p=w.footer,m=(w.hotkey,w.cache,w.loadingContent),y=w.contentClassName,g=(w.contentLoadFail,w.children),b=w.style,w=(w.listenUpdateStyle,w.id,w.onAction,function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(w,s));return delete w.enableBackdropClick,r=(0,l.classes)("user-app-no-dragable","display-layer",r,"display-stage-".concat(this.stageName),t?"display-layer-".concat(t):null,{"has-animation":c}),o.default.createElement("div",{onKeyUp:this.handeWindowKeyup,className:r,style:{zIndex:this.state.zIndex}},a&&o.default.createElement("div",{onClick:this.handleBackdropClick,className:(0,l.classes)("display-backdrop",u)},o.default.createElement("div",{className:"user-app-dragable dock-top"})),o.default.createElement("div",d({id:this.id,className:(0,l.classes)("display",c,n,{in:this.isStage(v.shown)}),style:h(h({},b),this.state.style),ref:function(t){e.displayElement=t},onClick:this.handleDisplayClick},w),f,o.default.createElement("div",{className:(0,l.classes)("content",y)},this.state.loading?!0===m?o.default.createElement(i.default,null):m:this.state.content),g,p))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.PureComponent),b(t.default=n,"STAGE",v),b(n,"propTypes",{content:a.default.any,contentLoadFail:a.default.any,id:a.default.any,animation:a.default.any,onShow:a.default.func,onShown:a.default.func,onHidden:a.default.func,onHide:a.default.func,onLoad:a.default.func,listenUpdateStyle:a.default.bool,show:a.default.bool,hotkey:a.default.bool,cache:a.default.bool,loadingContent:a.default.bool,rootClassName:a.default.string,className:a.default.string,backdrop:a.default.bool,backdropClassName:a.default.string,contentClassName:a.default.string,footer:a.default.any,header:a.default.any,plugName:a.default.string,modal:a.default.bool,children:a.default.any,style:a.default.object,onAction:a.default.func,enableBackdropClick:a.default.bool}),b(n,"defaultProps",{listenUpdateStyle:!1,plugName:null,animation:"scale-from-top",modal:!1,show:!0,content:"",contentLoadFail:null,contentClassName:"",header:null,footer:null,onShown:null,onShow:null,onHidden:null,onHide:null,onLoad:null,hotkey:!0,className:"layer",rootClassName:"",backdrop:!0,backdropClassName:"",loadingContent:!0,cache:!1,id:null,children:null,style:null,onAction:null,enableBackdropClick:!0})},9215:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.displayShow=t.displaySetStyle=t.displayRemove=t.displayHide=t.displayGetRef=t.default=void 0;var r=a(n(67294)),o=a(n(73935));function a(e){return e&&e.__esModule?e:{default:e}}n=a(n(98285));var i="display-container",l=document.getElementById(i),u=(l||((l=document.createElement("div")).id=i,l.classList.add("affix"),document.body.appendChild(l)),null);o.default.render(r.default.createElement(n.default,{ref:function(e){u=e}}),l),i={show:t.displayShow=function(e,t){var n;return null==(n=u)?void 0:n.show(e,t)},hide:t.displayHide=function(e,t,n){var r;return null==(r=u)?void 0:r.hide(e,t,n)},remove:t.displayRemove=function(e,t){return u.remove(e,t)},getRef:t.displayGetRef=function(e){return null==(e=u&&u.getItem(e))?void 0:e.ref},setStyle:t.displaySetStyle=function(e,t,n){var r;return null==(r=u)?void 0:r.setStyle(e,t,n)}},t.default=i},4500:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=i(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var l;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((l=a?Object.getOwnPropertyDescriptor(e,n):null)&&(l.get||l.set)?Object.defineProperty(o,n,l):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=(n=n(70389))&&n.__esModule?n:{default:n};function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function l(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n=o.default.forwardRef((function(e,t){var n=e.inputProps,r=void 0===(e=e.dataHandler)?null:e;return e=(0,o.useCallback)((function(e){e.preventDefault(),e=function(e){e=e.currentTarget;var t,n={},r=function(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=s(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}((e=new FormData(e)).entries());try{for(r.s();!(t=r.n()).done;){var o=u(t.value,2),a=o[0],i=o[1];"string"==typeof i&&(n[a]=i)}}catch(e){r.e(e)}finally{r.f()}return n}(e),r&&r(e)}),[r]),n=n.map((function(e){return delete(t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)).type,delete t.name,delete t.label,delete t.value,delete t.helpText,delete t.addon,o.default.createElement(a.default,{key:e.name,label:e.label,inputType:e.type,name:e.name,inputProps:t,defaultValue:e.value,helpText:e.helpText,addon:e.addon});var t})),o.default.createElement("form",{ref:t,onSubmit:e},n)})),t.default=n},93378:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=p(n(45697)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=d(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),i=p(n(73935)),l=n(64393),u=p(n(63318)),s=p(n(91705)),c=p(n(61862)),f=["id","className","onClick"];function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=d;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e);var n,o=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v(e);if(n=t?(n=v(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==o)return o;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(d);function d(e){var t;if(this instanceof d)return(e=o.call(this,e)).state={suggestions:null},e._element=((t=document.createElement("div")).classList.add("dock"),t.style.zIndex=1050,t.style.overflow="hidden",t),e;throw new TypeError("Cannot call a class as a function")}return t=d,e=[{key:"scrollToPrimarySuggestion",value:function(){var e=document.querySelector(".app-mention-suggest-panel .primary");e&&(0,l.scrollIntoView)(e)}}],(n=[{key:"componentDidMount",value:function(){document.body.appendChild(this._element),this.tryFetchSuggestions(),this.fixPanelPosition();var e=this.props.onSuggestionsCountChange;e&&e(null!=(e=null==(e=this.state.suggestions)?void 0:e.length)?e:0)}},{key:"componentDidUpdate",value:function(e,t){var n,r=this.props.onSuggestionsCountChange;r&&(n=null!=(n=null==(n=this.state.suggestions)?void 0:n.length)?n:0)!==(null!=(t=null==(t=t.suggestions)?void 0:t.length)?t:0)&&r(n),this.tryFetchSuggestions(),this.fixPanelPosition(),d.scrollToPrimarySuggestion()}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this._element),this._unmounted=!0}},{key:"tryFetchSuggestions",value:function(){this._suggestionsState!==this.props.suggestionsState&&this.fetchSuggestions()}},{key:"fetchSuggestions",value:function(){var e=this,t=(n=this.props).suggestionsState,n=n.onRequestSuggestions;this._suggestionsState=t,n&&(n=n(t,(function(n){e._suggestionsState!==e.props.suggestionsState||e._unmounted||(!t.text.length&&Array.isArray(n)&&n.unshift("all"),e.setState({suggestions:n}))})),!t.text.length&&Array.isArray(n)&&n.unshift("all"),this.setState({suggestions:n}))}},{key:"fixPanelPosition",value:function(){var e,t,n,r,o,a,i=this._panel;i&&(e=i.clientWidth,t=i.clientHeight,n=(r=this._position).left,r=r.top,o=window.innerWidth,a=window.innerHeight,o<n+e&&(i.style.left="".concat(o-e,"px")),a<r+t&&(i.style.top="".concat(a-t,"px")))}},{key:"getSuggestions",value:function(){return this.state.suggestions}},{key:"getSelectedItem",value:function(){var e=this.state.suggestions,t=this.props.selectedIndex;return e[(100*e.length+t)%e.length]}},{key:"render",value:function(){var e=this,t=(h=this.props).className,n=h.style,r=h.suggestionsState,o=h.suggestionsItemRender,d=h.onClickItem,p=h.showMoreBtn,h=h.selectedIndex,g=this.state.suggestions,b=g&&g.length;if(!b)return null;var v,w=null;return g?b&&(v=(100*g.length+h)%g.length,w=a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"suggest-title flex space-between white",style:{width:"100%",padding:"5px 11px 4px 11px"}},a.default.createElement("span",{className:"text-black small"},c.default.string("chat.group.members")),p&&a.default.createElement("a",{href:"function"==typeof p?null:"string"==typeof p?p:"xxc://showChatMentionsDialog",className:"text-primary small rounded",onClick:"function"==typeof p?p:null},c.default.string("common.more"))),a.default.createElement("div",{className:"list column single align-start white"},g.map((function(e,t){if(t=v===t,o)return o(e,(function(t){return d(e,t)}),t);var n=e.id,r=e.className,i=void 0===(i=e.onClick)?d:i,s=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,f);return a.default.createElement(u.default,y({className:(0,l.classes)(r,t?"active":""),key:n},s,{onClick:i}))}))))):w=a.default.createElement(s.default,{className:"has-padding-h"}),this._position={left:Math.floor(r.left+10*r.trigger.length-5),bottom:Math.ceil(r.top)+1},i.default.createPortal(a.default.createElement("div",{className:(0,l.classes)("app-mention-suggest-panel dock dock-left dock-bottom",t),style:m(m({},this._position),n),ref:function(t){e._panel=t}},w),this._element)}}])&&g(t.prototype,n),e&&g(t,e),Object.defineProperty(t,"prototype",{writable:!1}),d}(a.PureComponent),w(t.default=n,"propTypes",{selectedIndex:o.default.number,className:o.default.string,style:o.default.object,suggestionsState:o.default.object,onRequestSuggestions:o.default.func,suggestionsItemRender:o.default.func,onClickItem:o.default.func,showMoreBtn:o.default.oneOfType([o.default.func,o.default.string,o.default.bool]),onSuggestionsCountChange:o.default.func}),w(n,"defaultProps",{selectedIndex:0,className:null,style:null,suggestionsState:null,onRequestSuggestions:null,suggestionsItemRender:null,onClickItem:null,showMoreBtn:null,onSuggestionsCountChange:null})},10352:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(67294)),o=l(n(45697)),a=n(74933),i=["name"];function l(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e){var t=e.name;return e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,i),r.default.createElement("div",u({},e,{dangerouslySetInnerHTML:{__html:(0,a.emojiToImage)(t)}}))}s.propTypes={name:o.default.string.isRequired},t.default=s},74933:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeEmojiMessage=function(e){var t=e.match(/\^XUAN_EMOJI([^$]+)\$/);return null!==t&&l.emojiList[null==t?void 0:t[1]]?e.replace(/\^XUAN_EMOJI([^$]+)\$/g,(function(e,t){return l.shortnameToUnicode(t)})):e},t.default=void 0,t.emojiToImage=function(e){var t=[],n=[];return e=e.replace(/([\da-fA-F]{1,4}:){7}([\da-fA-F]{1,4})/gi,(function(e){return t.push(e),"{{IPV6_".concat(t.length-1,"}}")})).replace(/(([a-fA-F0-9]{2}[-:]){5}[a-fA-F0-9]{2})|(([a-fA-F0-9]{4}\.){2}[a-fA-F0-9]{4})/gi,(function(e){return n.push(e),"{{MAC_".concat(n.length-1,"}}")})),e=l.toImage(e),t.length&&(e=e.replace(/\{\{IPV6_(\d+)\}\}/g,(function(e,n){return t[n]}))),n.length&&(e=e.replace(/\{\{MAC_(\d+)\}\}/g,(function(e,t){return n[t]}))),e},t.encodeEmojiMessage=function(e){var t=/(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEDD-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD\uDEC3-\uDEC5\uDEF0-\uDEF6])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDD-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6])\uFE0F/g;return t.test(e)?(e=e.replace(t,(function(e){return"^XUAN_EMOJI".concat(e,"$")})),l.toShort(e)):e};var r=n(13544),o=(n=n(74160))&&n.__esModule?n:{default:n};function a(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=(0,r.lazyModuleProxy)("emoji-toolkit",{browser:"joypixels",root:"assets",id:"emoji-toolkit",onLoad:function(e){e.emojioneList||(e.imagePathPNG=o.default.media["emoji.imagePathPNG"],e.imageType=o.default.media["emoji.imageType"],Object.defineProperty(e,"emojioneList",{get:function(){var t;return e._emojioneList||(t={},Object.keys(e.emojiList).forEach((function(n){var r=e.emojiList[n],o={unicode:r.uc_base!==r.uc_full?[r.uc_base,r.uc_full]:[r.uc_base],fname:r.uc_base,uc:r.uc_full,isCanonical:!0};r.shortnames&&r.shortnames.length&&r.shortnames.forEach((function(e){t[e]=i(i({},o),{},{isCanonical:!1})})),t[n]=o})),e._emojioneList=t),e._emojioneList}}))}});t.default=l},53595:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initEmojiListForPicker=t.default=void 0;var r=(n=n(74933))&&n.__esModule?n:{default:n};function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i={};t.initEmojiListForPicker=function(){var e,t,n;i.smile||(e=r.default.$,t=e.mapUnicodeCharactersToShort(),n=[],"||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||#|*|0|1|2|3|4|5|6|7|8|9||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||".split("|").forEach((function(r,a){var l,u;void 0!==(r=t[r])&&(l=e.emojiList[r],u=r.substring(1,r.length-1),i[u]={unicode:l.uc_base,unicode_alt:l.uc_base!==l.uc_full?l.uc_full:"",name:u,emoji_order:String(a+1),shortname:r,category:l.category,aliases:n,aliases_ascii:n,keywords:[u].concat(o(l.shortnames.map((function(e){return e.substring(1,e.length-1)}))))})})))},n=i,t.default=n},25396:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n=((n=n(74933))&&n.__esModule?n:{default:n}).default,t.default=n},62192:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=u(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=l(n(45697)),i=l(n(10352));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n=function(e){var t=l;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e);var n,a=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=f(e);if(n=t?(n=f(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==o)return o;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(l);function l(e){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");(e=a.call(this,e)).state={hasError:!1};var t=null==(t=e.props.children)||null==(t=t.type)?void 0:t.name;return"string"==typeof t&&(e.componentName=t),e}return t=l,e=[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}],(n=[{key:"componentDidCatch",value:function(e,t){var n;DEBUG?console.collapse(" ErrorBoundary ","redBgDark",null!=(n=this.componentName)?n:"","redPale"):console.group(" ErrorBoundary ",this.componentName),console.trace("error",e),console.trace("errorInfo",t),console.groupEnd()}},{key:"render",value:function(){return this.state.hasError?o.default.createElement("div",{className:"fluid-v center-content column has-padding"},o.default.createElement(i.default,{name:":cry:"}),o.default.createElement("h1",null,"I crashed."),o.default.createElement("p",null,"Check Console for more info.")):this.props.children}}])&&s(t.prototype,n),e&&s(t,e),Object.defineProperty(t,"prototype",{writable:!1}),l}(o.Component),t.default=n,t=n,n="propTypes",a={children:a.default.any.isRequired},n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a},64208:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==v(e)&&"function"!=typeof e)return{default:e};if((t=h(t))&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(n(67294)),o=p(n(45697)),a=n(64393),i=p(n(40328)),l=p(n(14242)),u=p(n(63318)),s=p(n(74160)),c=n(16986),f=["forceCollapse","headingCreator","hideEmptyGroup","checkIsGroup","itemCreator","itemConverter","group","toggleWithHeading","defaultExpand","expandIcon","collapseIcon","onExpandChange","className","children","startPageSize","morePageSize","defaultPage","showMoreText","rootClassName"],d=["id","list"];function p(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function m(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(n=t?(n=C(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,n&&("object"===v(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return _(r)}}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=s;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e);var n,o=S(s);function s(e){var t;if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");E(_(t=o.call(this,e)),"handleHeadingClick",(function(){t.toggle()})),E(_(t),"handleRequestMorePage",(function(){var e=t.state.page;t.setState({page:e+1})})),E(_(t),"renderHeading",(function(e){if(e.root&&void 0===e.title)return null;var n,o=null,u=(f=t.props).headingCreator,s=f.expandIcon,c=f.collapseIcon,f=f.toggleWithHeading;return u?o=u(e,_(t)):e.title&&(u=e.title,r.default.isValidElement(u)?o=u:"object"===v(u)?o=r.default.createElement(l.default,u):u&&(n=null,(s=t.isExpand?s:c)&&(n=r.default.isValidElement(s)?s:"object"===v(s)?r.default.createElement(i.default,b({onClick:f?null:t.handleHeadingClick},s)):r.default.createElement(i.default,{onClick:f?null:t.handleHeadingClick,name:s})),o=r.default.createElement("header",{onClick:f?t.handleHeadingClick:null,className:(0,a.classes)("heading",e.className)},n,r.default.createElement("div",{className:"title"},u)))),o}));var n=e.defaultExpand,u=e.group;return void 0!==u.expand?n=u.expand:"function"==typeof n&&(n=n(u,_(t))),t.state={expand:n,page:e.defaultPage},t}return t=s,e=[{key:"render",value:function(e,t){for(var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,a=[],i=(t=y(y({},s.defaultProps),t),n?Math.min(e.length,t.startPageSize+(1<n?(n-1)*t.morePageSize:0)):e.length),l=(n=t).checkIsGroup,f=n.itemConverter,p=n.hideEmptyGroup,h=0;h<i;++h){var m,v=f?f(e[h],h):e[h];v&&(!p||v.list&&v.list.length)&&(l&&(!0===l||l(v))||!l&&("group"===v.type||v.list)?a.push(r.default.createElement(s,{key:v.key||"id-".concat(v.id)||0,group:v,itemCreator:t.itemCreator,itemConverter:f,className:t.className,toggleWithHeading:t.toggleWithHeading,headingCreator:t.headingCreator,defaultExpand:t.defaultExpand,expandIcon:t.expandIcon,collapseIcon:t.collapseIcon,hideEmptyGroup:p,checkIsGroup:l,forceCollapse:t.forceCollapse,onExpandChange:t.onExpandChange,startPageSize:t.startPageSize,morePageSize:t.morePageSize,defaultPage:t.defaultPage,showMoreText:t.showMoreText})):t.itemCreator?a.push(t.itemCreator(v,h)):(v.id,v.list,m=g(v,d),a.push(r.default.createElement(u.default,b({key:v.key||v.id||h},m)))))}return(n=e.length-i)&&(n=t&&t.showMoreText?(0,c.formatString)(t.showMoreText,n):"...",a.push(r.default.createElement(u.default,{key:"showMore",icon:"chevron-double-down",className:"flex-middle item muted",title:r.default.createElement("span",{className:"title small"},n),onClick:o}))),a}}],(n=[{key:"toggle",value:function(e,t){var n=this;void 0===e&&(e=!this.state.expand),this.setState({expand:e},(function(){var r=(o=n.props).onExpandChange,o=o.group;r&&r(e,o),t&&t(e,o)}))}},{key:"expand",value:function(e){this.toggle(!0,e)}},{key:"collapse",value:function(e){this.toggle(!1,e)}},{key:"isExpand",get:function(){return!this.props.forceCollapse&&this.state.expand}},{key:"render",value:function(){var e=((i=this.props).forceCollapse,i.headingCreator,i.hideEmptyGroup,i.checkIsGroup,i.itemCreator,i.itemConverter,i.group),t=(i.toggleWithHeading,i.defaultExpand,i.expandIcon,i.collapseIcon,i.onExpandChange,i.className),n=i.children,o=(i.startPageSize,i.morePageSize,i.defaultPage,i.showMoreText,i.rootClassName),i=g(i,f),l=e.list,u=e.root,c=this.state.page,d=u||this.isExpand;return r.default.createElement("div",b({className:(0,a.classes)("list",t,(E(t={"is-expand":d,"is-collapse":!d},o,o&&u),E(t,"group-list-root",u),E(t,"app-group-list group-list",!u),t))},i),this.renderHeading(e),d&&l&&s.render(l,this.props,c,this.handleRequestMorePage),n)}}])&&w(t.prototype,n),e&&w(t,e),Object.defineProperty(t,"prototype",{writable:!1}),s}(r.Component),E(t.default=n,"propTypes",{headingCreator:o.default.func,checkIsGroup:o.default.oneOfType([o.default.bool,o.default.func]),itemCreator:o.default.func,itemConverter:o.default.func,onExpandChange:o.default.func,group:o.default.object,className:o.default.string,rootClassName:o.default.string,children:o.default.any,defaultExpand:o.default.oneOfType([o.default.bool,o.default.func]),toggleWithHeading:o.default.bool,forceCollapse:o.default.bool,hideEmptyGroup:o.default.bool,collapseIcon:o.default.string,expandIcon:o.default.string,startPageSize:o.default.number,morePageSize:o.default.number,defaultPage:o.default.number,showMoreText:o.default.node}),E(n,"defaultProps",{headingCreator:null,itemCreator:null,itemConverter:null,group:null,className:null,rootClassName:null,children:null,defaultExpand:!0,toggleWithHeading:!0,collapseIcon:"chevron-right",expandIcon:"chevron-down",hideEmptyGroup:!0,checkIsGroup:null,onExpandChange:null,forceCollapse:!1,startPageSize:s.default.ui["page.start.size"]||20,morePageSize:s.default.ui["page.more.size"]||20,defaultPage:1,showMoreText:""})},77632:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=f(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=c(n(45697)),i=n(64393),l=n(16986),u=c(n(40328)),s=["className","count","startPageSize","morePageSize","loadMoreText","children"];function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e){for(var t,n=e.className,r=e.count,a=void 0===(a=e.startPageSize)?20:a,c=void 0===(f=e.morePageSize)?20:f,f=e.loadMoreText,h=e.children,m=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,s),(t=p((0,o.useState)(Math.min(a,r)),2))[0]),y=t[1],g=Math.max(Math.min(a,r),m),b=(a=null,(t=g<r)&&(m={morePageSize:c,loadedCount:g,totalCount:r,nextCount:Math.min(c,r-g)},a="function"==typeof f?f(m):"string"==typeof f?(0,l.formatString)(f,m):o.default.isValidElement(f)?f:o.default.createElement(u.default,{name:"chevron-double-down"})),m=t?function(){y(Math.min(g+c,r))}:null,[]),v=0;v<g;++v)b.push(h(v,g));return o.default.createElement("div",d({className:(0,i.classes)("growing-list",n)},e),b,a?o.default.createElement("a",{className:"growing-list-load-more",onClick:m},a):null)}m.propTypes={children:a.default.func.isRequired,count:a.default.number.isRequired,className:a.default.string,startPageSize:a.default.number,morePageSize:a.default.number,loadMoreText:a.default.oneOfType([a.default.node,a.default.string,a.default.func])},m.defaultProps={className:null,startPageSize:20,morePageSize:20,loadMoreText:null},t.default=(0,o.memo)(m)},14242:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==d(e)&&"function"!=typeof e)return{default:e};if((t=c(t))&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(n(67294)),o=s(n(45697)),a=n(64393),i=s(n(40328)),l=s(n(2388)),u=["type","nav","avatar","icon","title","children","className"];function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(n=t?(n=h(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,n&&("object"===d(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(o);function o(){var e=this,t=o;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=o,(e=[{key:"render",value:function(){var e=(h=this.props).type,t=h.nav,n=h.avatar,o=h.icon,s=h.title,c=h.children,p=h.className,h=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(h,u),y=null,g=(o&&(r.default.isValidElement(o)?y=o:"object"===d(o)?y=r.default.createElement(i.default,o):o&&(y=r.default.createElement(i.default,{name:o}))),null);return n&&(!0===n&&y?g=r.default.createElement(l.default,{icon:o}):r.default.isValidElement(n)?g=n:"object"===d(n)?g=r.default.createElement(l.default,n):n&&(g=r.default.createElement(l.default,{auto:n}))),o=null,s&&(r.default.isValidElement(s)?o=s:s&&(o=r.default.createElement("div",{className:"title"},s))),r.default.createElement(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:(0,a.classes)("app-heading",p)},h),g,y,o,t,c)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),o}(r.PureComponent),m(t.default=n,"propTypes",{avatar:o.default.any,icon:o.default.any,title:o.default.any,children:o.default.any,nav:o.default.any,className:o.default.string,type:o.default.string}),m(n,"defaultProps",{avatar:null,icon:null,title:null,children:null,nav:null,className:null,type:"a"})},32687:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||o(e,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)(l)),n=t[0],a=t[1];return(0,r.useEffect)((function(){if(e&&!(525600<=e))return function(e){i.delete(e),i.size||(clearInterval(u),u=0)}.bind(null,function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=Symbol("minute-callback-id");return i.set(n,{callback:e,intervalMins:t,tick:l}),u=u||setInterval((function(){l++;var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){var r;if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(i.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;l-n.tick>=n.intervalMins&&(n.tick=l,n.callback(l))}}catch(e){t.e(e)}finally{t.f()}}),6e4),n}(a,e))}),[e]),n};var r=n(67294);function o(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=new Map,l=0,u=0},12740:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,r.useRef)((0,o.default)()).current};var r=n(67294),o=(t=n(61997))&&t.__esModule?t:{default:t}},58551:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)((0,o.getWindowSizeInfo)())),t=e[0],n=e[1];return(0,r.useEffect)((function(){return a.unsubscribeWindowSizeTypeChange.bind(null,(0,a.subscribeWindowSizeTypeChange)((function(e){n(e)})))}),[]),t};var r=n(67294),o=n(28361),a=n(92256);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},85978:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=f(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=c(n(45697)),i=c(n(70389)),l=n(64393),u=n(4829),s=["onChange","defaultValue","className","inputProps","onlyMotifyKeysText"];function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=g(e);if(n=t?(n=g(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return y(o)}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e);var n=m(r);function r(e){var t;if(this instanceof r)return b(y(t=n.call(this,e)),"handleKeyDownEvent",(function(e){var n,r;8===e.keyCode||"Backspace"===e.code?t.changeValue(""):(n=(0,u.getKeyDecoration)(e),(0,u.isOnlyModifyKeys)(n)?(r=t.props.onlyMotifyKeysText,t.changeValue(n,r)):t.changeValue(n),e.preventDefault(),e.stopPropagation())})),b(y(t),"handleBlurEvent",(function(){var e=t.state.value;(0,u.isOnlyModifyKeys)(e)&&t.changeValue("",t.props.onlyMotifyKeysText)})),t.state={value:(0,u.formatKeyDecoration)(e.defaultValue),error:null},t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"changeValue",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=this.props.onChange;n&&n(e),this.setState({value:e,error:t})}},{key:"getValue",value:function(){return this.state.value}},{key:"render",value:function(){var e=this,t=((a=this.props).onChange,a.defaultValue),n=a.className,r=a.inputProps,a=(a.onlyMotifyKeysText,function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(a,s)),u=(c=this.state).error,c=c.value;return o.default.createElement(i.default,d({},a,{placeholder:t,className:(0,l.classes)(n,{"has-error":!!u}),helpText:u,ref:function(t){e.inputControl=t},value:c,inputProps:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({onKeyDown:this.handleKeyDownEvent,onBlur:this.handleBlurEvent},r)}))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component),b(t.default=n,"propTypes",{defaultValue:a.default.string,className:a.default.string,onChange:a.default.func,inputProps:a.default.object,onlyMotifyKeysText:a.default.string}),b(n,"defaultProps",{defaultValue:"",onChange:null,inputProps:null,className:null,onlyMotifyKeysText:""})},40328:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=f,t.renderIcon=function(e,t){var n=null;return e&&(r.default.isValidElement(e)?n=e:"object"===c(e)?n=r.default.createElement(f,s({},t,e)):"string"==typeof e&&(n=r.default.createElement(f,s({name:e},t)))),n};var r=i(n(67294)),o=(t=i(n(45697)),n(64393)),a=["square","size","color","name","style","children","className"];function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e){var t=e.square,n=e.size,i=e.color,l=e.name,c=e.style,f=e.children,d=e.className;return e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,a),c=u({},c),n&&(c.fontSize=(0,o.rem)(n<12?12*n:n)),i&&(c.color=i),t&&n&&(c.lineHeight=c.fontSize,c.height=c.fontSize,c.width=c.fontSize),i="",i=l.startsWith("mdi-")?"mdi ".concat(l):l.startsWith("icon-")?l:l.startsWith("sprite-")?"".concat(l," icon-sprite"):"mdi mdi-".concat(l),r.default.createElement("i",s({style:c},e,{className:(0,o.classes)("icon ".concat(i),d)}),f)}f.propTypes={name:t.default.string,className:t.default.string,size:t.default.number,square:t.default.bool,color:t.default.string,style:t.default.object,children:t.default.any},f.defaultProps={name:"",className:"",size:0,square:!0,color:"",style:null,children:null}},88446:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=i(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var l;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((l=a?Object.getOwnPropertyDescriptor(e,n):null)&&(l.get||l.set)?Object.defineProperty(o,n,l):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=(n=(n=n(45697))&&n.__esModule?n:{default:n},["alt","src","children"]);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=f(e);if(n=t?(n=f(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return c(o)}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var p=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e);var n=s(r);function r(e){var t;if(this instanceof r)return d(c(t=n.call(this,e)),"_handleImgError",(function(e){DEBUG&&console.warn("Cannot load image ".concat(t.props.src),e),e=t.props.src,t.setState({error:e})})),t.state={error:null},t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e=(r=this.props).alt,t=r.src,n=r.children,r=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(r,a),i=this.state.error;return i&&i===t?"function"==typeof n?n():n:o.default.createElement("img",l({alt:e,src:t,onError:this._handleImgError},r))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.PureComponent);d(t.default=p,"propTypes",{src:n.default.string.isRequired,alt:n.default.string,children:n.default.any}),d(p,"defaultProps",{alt:null,children:null})},70389:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=c(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=s(n(3812)),i=n(64393),l=s(n(61997)),u=["name","label","labelStyle","isLabelInline","placeholder","autoFocus","inputType","inputStyle","inputProps","value","helpText","onChange","className","inputClassName","defaultValue","disabled","children","hotkeyScope","hotKeys","addon"];function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=m(e);if(n=t?(n=m(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return h(o)}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}a.default.filter=function(e){var t=(e=e.target||e.srcElement).tagName;return!/^(INPUT|TEXTAREA|SELECT)$/.test(t)||!!(e=(t=e.attributes["data-hotkey-scope"])&&t.value)&&(a.default.setScope(e),!0)},n=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e);var n=p(r);function r(e){var t;if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");y(h(t=n.call(this,e)),"controlled",void 0),y(h(t),"controlName",void 0),y(h(t),"hotkeyScope",void 0),y(h(t),"autoFocusTask",void 0),y(h(t),"input",void 0),y(h(t),"handleChange",(function(e){var n=t.props.onChange;n&&(t.controlled||t.state.isCompositionEnd)&&n(e.target.value,e)})),y(h(t),"handleCompositionChange",(function(e,n){t.setState({isCompositionEnd:e},(function(){t.handleChange(n)}))})),y(h(t),"handleCompositionStart",(function(e){return t.handleCompositionChange(!1,e)})),y(h(t),"handleCompositionEnd",(function(e){return t.handleCompositionChange(!0,e)})),y(h(t),"updateRef",(function(e){t.input=e}));var o=e.value,a=e.name,i=e.hotkeyScope;return e=e.hotKeys,t.controlled=void 0!==o,t.controlName=a||(0,l.default)(),t.hotkeyScope=i||e?i||t.controlName:"",t.state={isCompositionEnd:!0},t}return t=r,(e=[{key:"componentDidMount",value:function(){var e=this,t=(n=this.props).autoFocus,n=n.hotKeys;t&&(this.autoFocusTask=setTimeout((function(){e.focus(),e.autoFocusTask=null}),100)),n&&Object.keys(a.default).forEach((function(t){(0,a.default)(t,e.hotkeyScope,a.default[t])}))}},{key:"componentWillUnmount",value:function(){this.autoFocusTask&&(clearTimeout(this.autoFocusTask),this.autoFocusTask=null),this.hotkeyScope&&a.default.deleteScope(this.hotkeyScope)}},{key:"value",get:function(){return(this.controlled?this.props:this.input).value}},{key:"setValue",value:function(e){if(this.controlled)throw new Error('Cannot call set value method in a controlled form control, use property "value" to update value.');this.input.value=e}},{key:"focus",value:function(){this.input.focus()}},{key:"render",value:function(){var e=(w=this.props).name,t=w.label,n=w.labelStyle,r=w.isLabelInline,a=w.placeholder,l=(w.autoFocus,w.inputType),s=w.inputStyle,c=w.inputProps,d=w.value,p=w.helpText,h=(w.onChange,w.className),m=w.inputClassName,y=w.defaultValue,g=w.disabled,b=w.children,v=(w.hotkeyScope,w.hotKeys,w.addon),w=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(w,u);return o.default.createElement("div",f({className:(0,i.classes)("control",h,{disabled:g})},w),t&&o.default.createElement("label",{htmlFor:this.controlName,style:n},t),o.default.createElement("div",{className:(0,i.classes)("relative",{"inline-block":r})},o.default.createElement("input",f({name:e,"data-hotkey-scope":this.hotkeyScope,disabled:!!g,ref:this.updateRef,value:d,defaultValue:y,id:this.controlName,type:l,className:(0,i.classes)("input",m,{"pr-10":!!v}),placeholder:a,onChange:this.handleChange,onCompositionStart:this.handleCompositionStart,onCompositionUpdate:this.handleCompositionStart,onCompositionEnd:this.handleCompositionEnd,style:s,spellCheck:!1},c)),v&&o.default.createElement("span",{className:"absolute inset-y-0 right-0 pr-2 flex items-center pointer-events-none text-xs text-nowrap"},v)),p?o.default.createElement("p",{className:"help-text"},p):null,b)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.PureComponent),y(t.default=n,"defaultProps",{label:" ",isLabelInline:!1,className:"",placeholder:"",autoFocus:!1,style:null,inputType:"text",value:void 0,helpText:null,onChange:null,disabled:!1,inputClassName:"rounded",name:"",labelStyle:null,inputStyle:null,inputProps:null,children:null,defaultValue:void 0,hotkeyScope:null,hotKeys:null,addon:""})},63318:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;var r=u(n(67294)),o=(t=u(n(45697)),n(64393)),a=n(40328),i=n(2388),l=["type","avatar","icon","title","subtitle","children","actions","divider","className"];function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){var t=e.type,n=e.avatar,u=e.icon,s=e.title,f=e.subtitle,d=e.children,p=e.actions,h=e.divider,m=e.className,y=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,l),u=(0,a.renderIcon)(u),n=(0,i.renderAvatar)(n,u),null),g=(s&&(r.default.isValidElement(s)?y=s:s&&(y=r.default.createElement("div",{className:"title"},s))),s=null,f&&(r.default.isValidElement(f)?s=f:f&&(s=r.default.createElement("div",{className:"subtitle"},f))),f=null,s||d);return f=g?r.default.createElement("div",{className:"content"},y,s,d):y,r.default.createElement(t,c({className:(0,o.classes)("app-list-item item",m,{divider:h,"with-avatar":!!n,"multi-lines":g})},e),n,u,f,p)}f.propTypes={type:t.default.string,avatar:t.default.any,icon:t.default.any,title:t.default.any,subtitle:t.default.any,children:t.default.any,actions:t.default.any,className:t.default.oneOfType([t.default.string,t.default.array,t.default.object]),divider:t.default.bool},f.defaultProps={avatar:null,icon:null,title:null,subtitle:null,children:null,actions:null,className:null,divider:!1,type:"a"}},41584:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=u(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=n(64393),i=(n=n(451))&&n.__esModule?n:{default:n},l=["source","sourceType","width","height","thumbnailWidth","thumbnailHeight","mediaType","status","maxWidth","maxHeight","controls","thumbnail","hint","progress","loadingText","brokenMessage","onRequestReload","className","style","children"];function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function c(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=(0,o.memo)((function(e){var t=e.source,n=e.sourceType,r=e.width,u=e.height,c=e.thumbnailWidth,d=e.thumbnailHeight,p=void 0===(p=e.mediaType)?"image":p,h=void 0===(h=e.status)?"ok":h,m=void 0===(m=e.maxWidth)?2e3:m,y=void 0===(y=e.maxHeight)?360:y,g=void 0===(g=e.controls)||g,b=e.thumbnail,v=e.hint,w=void 0===(w=e.progress)?0:w,O=e.loadingText,S=e.brokenMessage,_=e.onRequestReload,C=e.className,E=e.style,P=e.children,k=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,l),!(!r||!u)),j=!(!c||!d),x={maxHeight:y,maxWidth:m},M=(k&&!j&&(u<=x.maxHeight&&r<=x.maxWidth?(x.maxHeight=u,x.maxWidth=r):(M=r,(T=u)>x.maxHeight&&(T=x.maxHeight,M=Math.floor(T*r/u),x.maxWidth=M),M>x.maxWidth&&(T=Math.floor(x.maxWidth*T/M),x.maxHeight=T)),x.width=x.maxWidth,x.maxWidth="100%"),j&&(x.width=c,x.maxHeight=d,x.maxWidth="100%"),f(f(f({},x),E),{},{height:"100%"})),T=null;return k&&(j={paddingBottom:k?y<u&&r/u<y/m?y:r?"".concat(100*u/r,"%"):0:0},T=o.default.createElement("div",{className:"media-holder-aspectratio",style:j})),o.default.createElement("div",s({className:(0,a.classes)(C,"media-holder media-holder-status-".concat(h," media-holder-media-").concat(p),{"has-given-size":!!k,"not-given-size":!k}),style:M},e),o.default.createElement(i.default,{status:h,mediaType:p,className:C,onRequestReload:_,brokenMessage:S,source:t,thumbnail:b,sourceType:n,progress:w,loadingText:O,hint:v,controls:g,maxWidth:M.maxWidth}),T,P)}))},95619:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showMediaPreviewDialog=void 0;var r=l(n(67294)),o=l(n(61997)),a=l(n(52133)),i=l(n(96482));function l(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.showMediaPreviewDialog=function(e){var t=(l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).props,n=l.callback,l=void 0===(l=l.imagePreviewProps)?{}:l,s=(0,o.default)();return a.default.show(c(c({closeButton:!1,actions:!1,className:"layer-image-viewer dock clean",content:r.default.createElement(i.default,u({className:"dock",obtainer:e,onRequestClose:function(){return a.default.hide(s)}},l))},t),{},{id:s}),n)}},96482:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=p(n(67294)),a=f(n(45697)),i=f(n(40328)),l=p(n(54599)),u=f(n(41584)),s=n(64393),c=f(n(75345));function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=d(t))&&t.has(e))return t.get(e);var n,o,a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]);return a.default=e,t&&t.set(e,a),a}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=y(e);if(n=t?(n=y(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return m(o)}}(a);function a(e){var t;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");if(g(m(t=n.call(this,e)),"handleMouseMove",(0,c.default)((function(){!1===t.state.showBtns&&t.setState({showBtns:!0}),t.mouseMoveTimer&&clearTimeout(t.mouseMoveTimer),t.mouseMoveTimer=setTimeout((function(){t.setState({showBtns:!1})}),2e3)}))),g(m(t),"_reloadMedia",(function(){var e,n;null!=(e=(n=t.props.obtainer).obtain)&&e.call(n,t.state.current).then(t._updateCurrentMedia).catch((function(){}))})),g(m(t),"_updateCurrentMedia",(function(e){t._unmounted||t.setState({current:e,loading:!1},(function(){var n,r;null!=(n=(r=t.props).onShow)&&n.call(r,e)}))})),g(m(t),"_handleSwithPrevMedia",(function(){var e,n=t.props.obtainer;!n.obtainPrev||!1!==(e=t.state.current).prev&&t.setState({loading:!0},(function(){n.obtainPrev(e).then(t._updateCurrentMedia).catch((function(){}))}))})),g(m(t),"_handleSwithNextMedia",(function(){var e,n=t.props.obtainer;!n.obtainNext||!1!==(e=t.state.current).next&&t.setState({loading:!0},(function(){n.obtainNext(e).then(t._updateCurrentMedia).catch((function(){}))}))})),g(m(t),"_handleKeyDown",(function(e){"ArrowUp"===(e=e.code)?t.zoomIn():"ArrowLeft"===e?t._handleSwithPrevMedia():"ArrowDown"===e?t.zoomOut():"ArrowRight"===e&&t._handleSwithNextMedia()})),g(m(t),"_getAdvancedImageViewer",(function(e){t._advancedImageViewer=e})),g(m(t),"resetTransforms",(function(e){null!=e&&null!=(e=e.target.closest("button,a"))&&e.blur(),null!=(e=t._advancedImageViewer)&&e.resetTransforms()})),g(m(t),"zoomIn",(function(e){null!=e&&null!=(e=e.target.closest("button,a"))&&e.blur(),null!=(e=t._advancedImageViewer)&&e.zoomIn()})),g(m(t),"zoomOut",(function(e){null!=e&&null!=(e=e.target.closest("button,a"))&&e.blur(),null!=(e=t._advancedImageViewer)&&e.zoomOut()})),g(m(t),"rotate90",(function(e){null!=e&&null!=(e=e.target.closest("button,a"))&&e.blur(),null!=(e=t._advancedImageViewer)&&e.rotate90(),requestAnimationFrame((function(){t.setState({movable:t.isMovable()})}))})),g(m(t),"_handleContextMenu",(function(e){var n,r,o={x:e.clientX,y:e.clientY};null!=(n=(r=t.props).onContextMenu)&&n.call(r,o,t.state.current.src),e.preventDefault()})),g(m(t),"handleActionSaveAs",(function(e){var n;null!=e&&null!=(e=e.target.closest("button,a"))&&e.blur(),null!=(n=(e=t.props).handleMediaSaveAs)&&n.call(e,t.state.current.src)})),g(m(t),"isMovable",(function(){var e;return null==(e=t._advancedImageViewer)?void 0:e.isMovable})),(e=e.obtainer)&&(e.current||e.obtainCurrent))return t.state={loading:!e.current,current:null!=(e=e.current)?e:{},showBtns:!0},t.mouseMoveTimer=null,t;throw new Error('The prop "obtainer" of MediaPreview must be a object and implement "current" prop or "obtainCurrent" func to provide current image information.')}return t=a,(e=[{key:"componentDidMount",value:function(){var e,t,n=this;null!=(e=(t=this.props.obtainer).obtainCurrent)&&e.call(t).then(this._updateCurrentMedia).catch((function(){})),setTimeout((function(){n.setState({showBtns:!1})}),2e3),document.addEventListener("mousemove",this.handleMouseMove)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.handleMouseMove),this._unmounted=!0}},{key:"render",value:function(){var e=(b=this.props).prevText,t=b.nextText,n=b.obtainText,r=b.onRequestClose,c=b.obtainer,f=b.title,d=b.showActions,p=b.className,h=b.zoomInText,m=b.zoomOutText,y=b.zoomResetText,g=b.rotate90Text,b=b.saveAsText,v=(C=this.state.current||{}).prev,w=C.next,O=C.src,S=void 0===(S=C.mediaType)?"image":S,_=C.title,C=C.errorMessage,E=(k=this.state).loading,P=k.movable,k=k.showBtns,j=[],x=null;return E?j.push(o.default.createElement(i.default,{name:"mdi-loading",className:"spin text-gray inline-block",size:64,key:"loading"})):(v&&c.obtainPrev&&j.push(o.default.createElement("a",{className:(0,s.classes)("switch-image-btn","prev-image-btn","center-content","rounded","no-radius-left",{show:k}),title:e,onMouseUp:this._handleSwithPrevMedia,key:"prevBtn"},o.default.createElement(i.default,{name:"mdi-chevron-left",size:80}))),C?j.push(o.default.createElement("div",{className:"text-center",key:"error"},o.default.createElement("div",{className:"lead space",key:"errorMessage"},C),o.default.createElement("a",{className:"btn primary rounded",onClick:this._reloadMedia},o.default.createElement(i.default,{name:"mdi-reload"}),o.default.createElement("span",{className:"text"},n)))):"audio"===S||"video"===S?j.push(o.default.createElement(u.default,{source:O,mediaType:S,maxWidth:null,maxHeight:null})):(j.push(o.default.createElement(l.default,{key:"imageViewer",onRequestClose:r,onKeyDown:this._handleKeyDown,src:O,ref:this._getAdvancedImageViewer})),d&&(x=o.default.createElement("div",{className:"flex justify-center dock dock-bottom has-padding-lg"},o.default.createElement(l.ImageViewerActions,{className:(0,s.classes)({show:k}),zoomOut:this.zoomOut,zoomIn:this.zoomIn,resetTransforms:this.resetTransforms,rotate90:this.rotate90,zoomInText:h,zoomOutText:m,zoomResetText:y,rotate90Text:g,saveAsText:b,handleActionSaveAs:this.handleActionSaveAs,movable:P})))),w&&c.obtainNext&&j.push(o.default.createElement("a",{className:(0,s.classes)("switch-image-btn","next-image-btn","center-content","rounded","no-radius-right",{show:k}),title:t,onMouseUp:this._handleSwithNextMedia,key:"nextBtn"},o.default.createElement(i.default,{name:"mdi-chevron-right",size:80})))),E=null,f&&(E=o.default.createElement("div",{className:"title row single flex-middle flex"},o.default.createElement(i.default,{name:"video"===S?"mdi-video":"audio"===S?"mdi-music":"mdi-image-search-outline",size:16,className:"muted"})," ",o.default.createElement("span",{className:"text"},!0!==f?f:"",!0!==f&&_?" - ":"",_||""))),o.default.createElement("div",{className:"media-preview column single ".concat(p||""),onClick:a._handleClick},o.default.createElement("header",{className:"flex-none heading"},E),o.default.createElement("div",{className:"content center-content flex-auto",onContextMenu:this._handleContextMenu},j),x)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component),g(t.default=n,"propTypes",{onRequestClose:a.default.func,onShow:a.default.func,obtainer:a.default.object.isRequired,title:a.default.oneOfType([a.default.string,a.default.bool]),showActions:a.default.bool,prevText:a.default.string,nextText:a.default.string,obtainText:a.default.string,className:a.default.string,zoomInText:a.default.string,zoomOutText:a.default.string,rotate90Text:a.default.string,zoomResetText:a.default.string,onContextMenu:a.default.func,saveAsText:a.default.string,handleMediaSaveAs:a.default.func}),g(n,"defaultProps",{onRequestClose:null,onShow:null,title:null,showActions:!1,nextText:"Next",prevText:"Previous",obtainText:"Obtain",className:null,zoomInText:null,zoomOutText:null,rotate90Text:null,zoomResetText:null,onContextMenu:null,saveAsText:null,handleMediaSaveAs:null}),g(n,"_handleClick",(function(e){e.target.closest("a,button,img")&&e.stopPropagation()}))},451:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.status,n=e.className,l=e.onRequestReload,u=e.mediaType,f=e.brokenMessage,d=e.source,p=e.thumbnail,h=e.progress,m=e.hint,y=e.loadingText,g=e.controls,b=e.sourceType;return e=e.maxWidth,n=r.default.createElement("div",{className:(0,a.classes)("media-holder-broken gray-pale text-gray",n,{state:!!l}),onClick:l},r.default.createElement(i.default,{name:"image"===u?"image-off":"image-broken",className:"icon-3x"}),r.default.createElement("div",{className:"text text-center"},f,l?r.default.createElement("div",{className:"strong"},o.default.string("common.rerequest")):null)),"broken"===t?n:"loading"===t?r.default.createElement("div",{className:"media-holder-progress".concat(h?"":" media-holder-waiting")},r.default.createElement("div",{className:"dock center-content"},r.default.createElement(i.default,{name:{image:"image-filter-hdr",video:"video",audio:"music"}[u],className:"muted icon-5x"})),r.default.createElement("div",{className:"text flex flex-middle"},r.default.createElement(i.default,{name:"loading",className:"inline-block spin inline-block text-shadow-white"})," ",e<120?"":y,h?"".concat(Math.floor(h),"%"):""),r.default.createElement("div",{className:"progress"},r.default.createElement("div",{className:"bar",style:{width:h?"".concat(h,"%"):"100%"}}))):d?"video"===u||"audio"===u?(l=Array.isArray(d)?d.map((function(e,t){var n=e.src;return e=e.type,r.default.createElement("source",{src:n,type:e,key:null!=t?t:n})})):r.default.createElement("source",{src:d,type:b}),"video"===u?r.default.createElement("video",{controls:g,muted:!0,autoPlay:!0,className:"media-holder-media",onPlay:c},l,n):r.default.createElement("audio",{controls:g,className:"media-holder-media"},l,n)):r.default.createElement("img",{className:"media-holder-media",src:d,alt:m||d,"data-broken":f,onError:s}):p?r.default.createElement("img",{src:p,alt:m||d,"data-broken":f,onError:s}):n};var r=u(n(67294)),o=u(n(61862)),a=n(64393),i=u(n(40328)),l=n(25852);function u(e){return e&&e.__esModule?e:{default:e}}function s(e){e.target.classList.add("broken")}function c(e){var t=(e=e.target).getVideoPlaybackQuality();0===(null==t?void 0:t.totalVideoFrames)&&((0,l.showMessager)(o.default.string("file.cannotPreviewTheFile")),e.remove())}},25852:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showMessager=t.default=void 0;var r=u(n(67294)),o=u(n(9215)),a=n(64393),i=u(n(40328)),l=u(n(61997));function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n={show:t.showMessager=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,u=(y=t).type,s=y.content,f=y.autoHide,d=y.closeButton,p=y.actions,h=y.className,m=y.rootClassName,y=y.position,g=(v=t).icon,b=v.onAction,v=(t.id||(t.id=(0,l.default)()),void 0===d&&(d=!0),u=u||"info",m=(0,a.classes)(m,"position-".concat(y=void 0===y?"top":y)),h=(0,a.classes)("messager layer",h||"rounded",u),s=s||g?r.default.createElement("div",{className:"row single flex-middle"},g?"string"==typeof g?r.default.createElement(i.default,{className:"flex-auto messager-icon",name:g}):r.default.createElement("div",{className:"flex-none messager-icon"},g):null,s?r.default.createElement("div",{className:"flex-auto messager-content"},r.default.createElement("h5",{className:"messager-title"},e),r.default.createElement("div",null,s)):r.default.createElement("div",{className:"flex-auto messager-content"},e)):e,p=p||[],d&&p.push({icon:"close",click:function(){o.default.hide(t.id)}}),null);return p&&p.length&&(v=r.default.createElement("nav",{className:"nav"},p.map((function(e,n){return r.default.createElement("a",{href:e.href||e.url,onClick:function(e,n){var r=null;b&&(r=b(e,n)),!1!==(r=e.click?e.click(e,n):r)&&o.default.hide(t.id)}.bind(null,e),key:e.name||n,title:e.label},e.icon?r.default.createElement(i.default,{name:e.icon}):e.label)})))),f&&("number"!=typeof f&&(f=5e3),setTimeout((function(){o.default.hide(t.id)}),f)),delete(t=c(c({backdropClassName:"clean"},t),{},{rootClassName:m,className:h,content:s,footer:v,closeButton:d,plugName:"messager"})).type,delete t.autoHide,delete t.closeButton,delete t.actions,delete t.position,delete t.onAction,o.default.show(t,n)},hide:o.default.hide,remove:o.default.remove},t.default=n},52133:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showPrompt=t.showModal=t.showConfirm=t.showAlert=t.setLangObj=t.default=void 0;var r=s(n(67294)),o=s(n(9215)),a=n(64393),i=s(n(40328)),l=s(n(61997)),u=s(n(70389));function s(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function h(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;null==e.id&&(e.id=(0,l.default)());var n,u,s=e.className,c=void 0===(c=e.actions)||c,f=(_=e).id,h=_.title,m=_.onAction,y=_.onSubmit,g=_.onCancel,O=_.headingClassName,S=void 0===(S=_.closeButton)||S,_=void 0===(_=_.enableBackdropClick)||_,C=(s=(0,a.classes)("modal layer rounded",s||""),!0===c?c=[{type:"submit"},{type:"cancel"}]:"submit"===c?c=[{type:"submit"}]:"cancel"===c&&(c=[{type:"cancel"}]),{submit:9e3,primary:8e3,secondary:7e3,cancel:-9e3}),E=null,P=(null!=(P=c)&&P.length&&(c=c.map((function(e,t){return null==e.order&&(e.order=t+C[e.type]),e.type&&(null==e.className&&(e.className=v[e.type]),null==e.label&&(e.label="submit"===e.type?w.string("common.confirm"):"cancel"===e.type?w.string("common.cancel"):e.type.toUpperCase())),e})),n=b?1:-1,c.sort((function(e,t){return(e.order-t.order)*n})),u=function(){e=function*(e,t){var n=[];m&&n.push(m(e,t)),y&&"submit"===e.type&&n.push(y(e,t)),g&&"cancel"===e.type&&n.push(g(e,t)),e.click&&n.push(e.click(e,t)),!1!==(yield Promise.all(n)).reduce((function(e,t){return e&&t}),!0)&&o.default.hide(f)};var e,t=function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){p(a,r,o,i,l,"next",e)}function l(e){p(a,r,o,i,l,"throw",e)}i(void 0)}))};return function(e,n){return t.apply(this,arguments)}}(),E=r.default.createElement("footer",{className:"footer toolbar"},c.map((function(e,t){return r.default.createElement("button",{className:(0,a.classes)("btn rounded",e.className,e.type?"action-".concat(e.type):""),type:"button",onClick:u.bind(null,e),key:e.id||t,title:e.label},e.label)})))),h||S?r.default.createElement("header",{className:(0,a.classes)("heading",O)},r.default.createElement("div",{className:"title"},h),S&&r.default.createElement("nav",{style:{overflow:"visible"},title:w.string("common.close"),className:"nav"},r.default.createElement("a",{className:"close rounded",onClick:function(){return o.default.remove(f)}},r.default.createElement(i.default,{name:"close"})))):null);return delete(e=d(d({},e),{},{className:s,header:P,footer:E,closeButton:S,plugName:"modal",enableBackdropClick:_})).title,delete e.closeButton,delete e.actions,delete e.onSubmit,delete e.onCancel,delete e.headingClassName,o.default.show(e,t)}function m(e,t,n){return h(d({modal:!0,content:e,actions:"submit"},t),n)}function y(e,t,n){return new Promise((function(r){var o=!1;h(d({closeButton:!1,modal:!0,content:e,actions:!0,onAction:function(e){o||(o=!0,r("submit"===e.type))},onHidden:function(){o||r(!1)}},t),n)}))}function g(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=3<arguments.length?arguments[3]:void 0,a=n.inputProps,i=n.onSubmit;return delete n.inputProps,delete n.onSubmit,new Promise((function(l){var s=!1,f=t;h(d({closeButton:!1,modal:!0,title:e,content:r.default.createElement(u.default,c({autoFocus:!0,defaultValue:t,onChange:function(e){f=e}},a)),actions:!0,onAction:function(e){if("submit"===e.type){if(i&&!1===i(f))return!1;s=!0,l(f)}},onHidden:function(){s||l(t)}},n),o)}))}var b=window.navigator.userAgent.includes("Mac OS"),v={submit:"bg-primary",primary:"bg-primary",secondary:"danger x-outline",cancel:"gray x-outline"},w={string:function(e){return e}};t.setLangObj=function(e){w=e},t.showModal=h,t.showAlert=m,t.showConfirm=y,t.showPrompt=g,n={show:h,alert:m,confirm:y,prompt:g,hide:o.default.hide,remove:o.default.remove},t.default=n},54256:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=f(n(45697)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=c(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),i=f(n(61862)),l=n(64393),u=f(n(40328)),s=["page","className","recTotal","pageTotal","pageRecCount","recPerPage","onPageChange","showFirstLast","hintClass","reversed"];function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=b(e);if(n=t?(n=b(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return g(o)}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e);var n=y(r);function r(){var e,t=this,o=r;if(!(t instanceof o))throw new TypeError("Cannot call a class as a function");for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return v(g(e=n.call.apply(n,[this].concat(i))),"handlePrevBtnClick",(function(){e.props.onPageChange&&1<e.props.page&&e.props.onPageChange(e.props.page-1)})),v(g(e),"handleNextBtnClick",(function(){e.props.onPageChange&&e.props.page<e.totalPage&&e.props.onPageChange(e.props.page+1)})),v(g(e),"handleFirstBtnClick",(function(){e.props.onPageChange&&1<e.props.page&&e.props.onPageChange(1)})),v(g(e),"handleLastBtnClick",(function(){e.props.onPageChange&&e.props.page<e.totalPage&&e.props.onPageChange(e.totalPage)})),e}return t=r,(e=[{key:"render",value:function(){var e=(y=this.props).page,t=y.className,n=y.recTotal,r=y.pageTotal,o=y.pageRecCount,c=y.recPerPage,f=(y.onPageChange,y.showFirstLast),h=y.hintClass,m=y.reversed,y=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(y,s);this.totalPage=r||Math.ceil(n/c);var g=(r=p(m?[e<=1,e>=this.totalPage]:[e>=this.totalPage,e<=1],2))[0],b=(r=r[1],null),v=null;return f&&(!0===f||5<this.totalPage)&&(b=a.default.createElement("div",{className:h,"data-hint":i.default.string("pager.first")},a.default.createElement("button",{disabled:r,type:"button",className:"iconbutton btn rounded",onClick:m?this.handleLastBtnClick:this.handleFirstBtnClick},a.default.createElement(u.default,{name:"chevron-double-left"}))),v=a.default.createElement("div",{className:h,"data-hint":i.default.string("pager.last")},a.default.createElement("button",{disabled:g,type:"button",className:"iconbutton btn rounded",onClick:m?this.handleFirstBtnClick:this.handleLastBtnClick},a.default.createElement(u.default,{name:"chevron-double-right"})))),a.default.createElement("div",d({},y,{className:(0,l.classes)("pager flex flex-middle",t)}),b,a.default.createElement("div",{className:h,"data-hint":i.default.string("pager.prev")},a.default.createElement("button",{disabled:r,type:"button",className:"iconbutton btn rounded",onClick:m?this.handleNextBtnClick:this.handlePrevBtnClick},a.default.createElement(u.default,{name:"chevron-left"}))),n?a.default.createElement("div",{className:h,"data-hint":o?"".concat((e-1)*c+1," ~ ").concat(Math.min(n,(e-1)*c+o)," / ").concat(n):null},a.default.createElement("strong",null,m?this.totalPage-e+1:e)," / ",a.default.createElement("strong",null,this.totalPage)):null,a.default.createElement("div",{className:h,"data-hint":i.default.string("pager.next")},a.default.createElement("button",{disabled:g,type:"button",className:"iconbutton btn rounded",onClick:m?this.handlePrevBtnClick:this.handleNextBtnClick},a.default.createElement(u.default,{name:"chevron-right"}))),v)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(a.PureComponent),v(t.default=n,"propTypes",{page:o.default.number,recTotal:o.default.number,recPerPage:o.default.number,pageRecCount:o.default.number,pageTotal:o.default.oneOfType([o.default.number,o.default.bool]),showFirstLast:o.default.oneOfType([o.default.string,o.default.bool]),className:o.default.string,hintClass:o.default.string,onPageChange:o.default.func,reversed:o.default.bool}),v(n,"defaultProps",{page:1,recTotal:0,recPerPage:20,pageTotal:!1,onPageChange:null,className:null,pageRecCount:0,showFirstLast:"auto",hintClass:"hint--bottom",reversed:!1})},21898:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showPopover=t.default=void 0;var r=l(n(67294)),o=l(n(9215)),a=n(64393),i=l(n(61997));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n={show:t.showPopover=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,u=(m=n).className,c=m.arrow,f=m.arrowSize,d=m.width,p=m.height,h=m.style,m=m.offset;if(!e&&DEBUG)throw new Error("Position is not defined to show the popover.");n.id||(n.id=(0,i.default)()),(c=void 0===c||c)?f?"number"==typeof f&&(f={width:f,height:f/2}):f={width:20,height:10}:f={width:0,height:0},d=d||200,p=p||100;var y=window.innerHeight,g=window.innerWidth,b=void 0===(b=e.target)?document.activeElement:b,v=void 0===e.x?e.pageX||0:e.x,w=void 0===e.y?e.pageY||0:e.y,O=e.placement||"auto",S=e.align||"center";if("auto"===O){for(var _=0,C="top",E=0,P=[{name:"top",size:w},{name:"right",size:g-v},{name:"bottom",size:y-w},{name:"left",size:v}];E<P.length;E++){var k=P[E];_<k.size&&(_=k.size,C=k.name)}O=C}if(b&&b.getBoundingClientRect){var j=b.getBoundingClientRect();switch(O){case"top":v=j.left+Math.floor(j.width/2),w=j.top;break;case"right":v=j.left+j.width,w=j.top+Math.floor(j.height/2);break;case"bottom":v=j.left+Math.floor(j.width/2),w=j.top+j.height;break;case"left":v=j.left,w=j.top+Math.floor(j.height/2)}}var x=0,M=0,T={};switch(O){case"top":M=Math.max(0,Math.min(y-p,w-p-f.height)),x="start"===S?Math.floor(Math.max(0,Math.min(g-d,v-c.width/2))):"end"===S?Math.floor(Math.max(0,Math.min(g-d,v-d+c.width/2))):Math.floor(Math.max(0,Math.min(g-d,v-d/2))),T.left=Math.max(x+f.width/2,Math.min(x+d-f.width/2,v));break;case"right":x=Math.floor(Math.max(0,Math.min(g-d,v+f.height))),M="start"===S?Math.max(0,Math.min(y-p,w-c.width/2)):"end"===S?Math.max(0,Math.min(y-p,w-p+c.width/2)):Math.max(0,Math.min(y-p,w-p/2)),T.top=Math.max(M+f.height/2,Math.min(M+p-f.height/2,w));break;case"bottom":M=Math.max(0,w+f.height),x="start"===S?Math.floor(Math.max(0,Math.min(g-d,v-c.width/2))):"end"===S?Math.floor(Math.max(0,Math.min(g-d,v-d+c.width/2))):Math.floor(Math.max(0,Math.min(g-d,v-d/2))),T.left=Math.max(x+f.width/2,Math.min(x+d-f.width/2,v));break;case"left":x=Math.floor(Math.max(0,Math.min(g-d,v-d-f.height))),M="start"===S?Math.max(0,Math.min(y-p,w-c.width/2)):"end"===S?Math.max(0,Math.min(y-p,w-p+c.width/2)):Math.max(0,Math.min(y-p,w-p/2)),T.top=Math.max(M+f.height/2,Math.min(M+p-f.height/2,w))}return m&&(m.left&&(x+=m.left),m.top&&(M+=m.top)),h=s({width:d,height:p,top:M,left:x},h),u=(0,a.classes)("popover layer rounded",u,"placement-".concat(O)),e={left:"right",right:"left",top:"bottom",bottom:"top"},b=c?r.default.createElement("div",{style:T,className:"display-arrow arrow-".concat(e[O])}):null,delete(n=s(s({backdropClassName:"clean",animation:"scale-from-".concat(e[O])},n),{},{className:u,style:h,content:t,footer:b,plugName:"popover"})).width,delete n.height,delete n.arrow,delete n.arrowSize,delete n.offset,o.default.show(n,l)},hide:o.default.hide,remove:o.default.remove},t.default=n},7807:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=c(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=s(n(45697)),i=n(64393),l=s(n(2388)),u=["progress","hideOnComplete","className"];function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=p(e);if(n=t?(n=p(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==o)return o;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(a);function a(){var e=this,t=a;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"render",value:function(){var e=(r=this.props).progress,t=r.hideOnComplete,n=r.className,r=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(r,u),a=null,s=e?Math.floor(e):0,c={},d={};return e&&(!t||s<100)&&(s<50?d.transform="rotate(".concat(3.6*s,"deg)"):(d.display="none",c.transform="rotate(".concat(3.6*s-180,"deg)")),a=o.default.createElement("div",{className:(0,i.classes)("circle-progress-box",100<=e?"circle-progress-full":"")},o.default.createElement("span",{className:"left-circle-progress circle-progress"},o.default.createElement("span",{style:c})),o.default.createElement("span",{className:"right-circle-progress circle-progress"},o.default.createElement("span",{style:d})))),o.default.createElement(l.default,f({className:(0,i.classes)(a?"circle-progress-wrapper":null,n)},r),a)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.PureComponent),h(t.default=n,"propTypes",{progress:a.default.oneOfType([a.default.bool,a.default.number]),hideOnComplete:a.default.bool,className:a.default.string}),h(n,"defaultProps",{progress:null,hideOnComplete:!0,className:null})},21205:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=d(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=f(n(45697)),i=n(64393),l=f(n(61997)),u=f(n(18922)),s=["name","items","checked","children","className","radioProps","onChange"],c=["label","value"];function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function m(e){var t=e.name,n=e.items,r=e.checked,a=e.children,f=e.className,d=e.radioProps,m=e.onChange,y=(e=h(e,s),t||(0,l.default)());return o.default.createElement("div",p({className:(0,i.classes)("radio-group",f)},e,{onChange:function(e){return null==m?void 0:m(e.target.value,e)}}),n&&n.map((function(e){var t=e.label,n=e.value;return e=h(e,c),o.default.createElement(u.default,p({key:n,name:y,label:t},e,{checked:r===n,value:n},d))})),a)}m.propTypes={checked:a.default.bool,items:a.default.array,name:a.default.string,className:a.default.string,radioProps:a.default.object,onChange:a.default.func,children:a.default.any,label:a.default.any},m.defaultProps={checked:!1,label:null,className:null,radioProps:null,onChange:null,children:null,items:null,name:null},t.default=(0,o.memo)(m)},18922:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=u(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=n(64393),i=(n=n(12740))&&n.__esModule?n:{default:n},l=["name","value","checked","disabled","label","children","className","inputProps","onChange"];function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}t.default=(0,o.memo)((function(e){var t,n=(0,i.default)(),r=e.name,u=e.value,c=void 0!==(c=e.checked)&&c,f=void 0!==(f=e.disabled)&&f,d=e.label,p=e.children,h=e.className,m=e.inputProps,y=e.onChange,g=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,l);return o.default.isValidElement(p)?t=p:"function"==typeof p&&(t=p(c,e)),o.default.createElement("div",s({className:(0,a.classes)("radio",h,{checked:c,disabled:f})},g),o.default.createElement("input",s({disabled:f,name:r,id:n,checked:c,type:"radio",onChange:function(e){return null==y?void 0:y(r,u,e.target.checked,e)},value:u},m)),d&&o.default.createElement("label",{htmlFor:n},d),t)}))},74673:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=u(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=(a=n(45697))&&a.__esModule?a:{default:a},i=n(64393),l=["className","stickyToBottom","customView","children","onScrollToEnd","onScroll","hoverEffect"];function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function c(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h(e);if(n=t?(n=h(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return p(o)}}(a);function a(e){var t;if(this instanceof a)return m(p(t=n.call(this,e)),"_contentElement",void 0),m(p(t),"_containerElement",void 0),m(p(t),"_handleScroll",(function(){t.updateScrollInfo()})),m(p(t),"_containerElementRef",(function(e){t._containerElement=e})),m(p(t),"_contentElementRef",(function(e){t._contentElement=e})),t._scrollInfo={stickyToBottom:!1,scrollbarShowed:!1,clientHeight:0,scrollHeight:0,position:0,scrollTop:0,isStickiedAtBegin:!0,isStickiedAtEnd:!0,isAtTop:!0,isAtBottom:!0},t;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"scrollInfo",get:function(){return this._scrollInfo}},{key:"componentDidMount",value:function(){var e=this;this.updateScrollInfo(),this.props.stickyToBottom&&(this._containerSizeObserver=new ResizeObserver((function(){e._containerElement.scrollHeight===e._scrollInfo.scrollHeight&&e._containerElement.clientHeight===e._scrollInfo.clientHeight||e._fixStickyPosition()})),this._containerSizeObserver.observe(this._containerElement),this._containerSizeObserver.observe(this._contentElement),this.scrollToEnd())}},{key:"componentWillUnmount",value:function(){this._containerSizeObserver&&this._containerSizeObserver.disconnect(),this._fixStickyPositionAnimationID&&cancelAnimationFrame(this._fixStickyPositionAnimationID)}},{key:"updateScrollInfo",value:function(){var e=(n=this.props).stickyToBottom,t=n.onScroll,n=n.onScrollToEnd,r=this._scrollInfo,o=(i=this._containerElement).clientHeight,a=i.scrollHeight,i=i.scrollTop,l=a-o,u=0<l,s=e?l-i:i;this._scrollInfo={scrollTop:i,position:s,stickyToBottom:e,clientHeight:o,scrollHeight:a,scrollbarShowed:u,isStickiedAtBegin:!u||0===s,isStickiedAtEnd:!u||s===l,isAtBottom:i===l,isAtTop:0===i},e=s!==r.position,t&&e&&t(f({},this._scrollInfo),r),n&&this._scrollInfo.isStickiedAtEnd&&!r.isStickiedAtEnd&&n(f({},this._scrollInfo),r)}},{key:"setScrollTop",value:function(e){this._containerElement.scrollTop=e}},{key:"scrollTo",value:function(e){var t=(n=this._containerElement).clientHeight,n=n.scrollHeight;this.setScrollTop(this.props.stickyToBottom?n-t-e:e)}},{key:"scrollToBegin",value:function(){return this.scrollTo(0)}},{key:"scrollToEnd",value:function(){var e=(t=this._containerElement).clientHeight,t=t.scrollHeight;return this.scrollTo(t-e)}},{key:"scrollToTop",value:function(){return this.setScrollTop(0),!0}},{key:"scrollToBottom",value:function(){return this.props.stickyToBottom?this.scrollToBegin():this.scrollToEnd()}},{key:"_fixStickyPosition",value:function(){var e;this.props.stickyToBottom&&(e=this._scrollInfo,this._keepPosition(e.position))}},{key:"_keepPosition",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500,n=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:0)||Date.now(),r=Date.now()-n;r<=t&&this.scrollTo(e),r<t&&(this._fixStickyPositionAnimationID=requestAnimationFrame(this._keepPosition.bind(this,e,t,n)))}},{key:"render",value:function(){var e=(u=this.props).className,t=u.stickyToBottom,n=u.customView,r=u.children,a=(u.onScrollToEnd,u.onScroll,u.hoverEffect),u=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(u,l);return e=(0,i.classes)("scroll-list-classic",e,"is-stick-".concat(t?"bottom":"top")),o.default.createElement("div",s({className:e},u),o.default.createElement("div",{className:(0,i.classes)("scroll-list-classic-container",{"scrollbar-hover":a}),ref:this._containerElementRef,onScroll:this._handleScroll},o.default.createElement("div",{className:"scroll-list-classic-content",ref:this._contentElementRef},r)),"function"==typeof n?n(this._scrollInfo):n)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.PureComponent),m(t.default=n,"propTypes",{className:a.default.string,onScroll:a.default.func,onScrollToEnd:a.default.func,stickyToBottom:a.default.bool,hoverEffect:a.default.bool,customView:a.default.any,children:a.default.node}),m(n,"defaultProps",{className:null,onScroll:null,onScrollToEnd:null,stickyToBottom:!1,hoverEffect:!0,customView:null,children:null})},39701:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==f(e)&&"function"!=typeof e)return{default:e};if((t=l(t))&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(n(67294)),o=(o=n(45697))&&o.__esModule?o:{default:o},a=n(64393),i=["className","stickyToBottom","useHotkey","animation","customView","children","onScroll","onScrollToEnd","minScrollbarHeight","scrollPageRatio","scrollbarHideDelay","showScrollbarAfterShow","showScrollbarOnChange","animateOnClickScrollbar","wheelSpeed"];function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(n=t?(n=y(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,n&&("object"===f(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return m(r)}}(o);function o(e){var t;if(this instanceof o)return g(m(t=n.call(this,e)),"_listElement",void 0),g(m(t),"_containerElement",void 0),g(m(t),"_scrollbarElement",void 0),g(m(t),"_isMovingScrollbar",!1),g(m(t),"_lastPositionChangeTime",0),g(m(t),"_touching",!1),g(m(t),"_handleCustomEvent",(function(e){var n,r=e.detail;Array.isArray(r)?(n=r.shift(),t[n].apply(t,d(r))):"object"===f(r)&&r&&(n=t)[r.method].apply(n,d(r.args||[])),e.stopPropagation()})),g(m(t),"_handleWheel",(function(e){var n=Date.now(),r=m(t)._lastWheelTime;300<=(t._lastWheelTime=n)-r||n-(null!=(r=t._lastScrollTime)?r:0)<300||(r=(n=t.props).stickyToBottom,n=n.wheelSpeed,t.scrollWithOffset((void 0===n?1:n)*e.deltaY*(r?-1:1)))})),g(m(t),"_handleContainerScroll",(function(){t._lastScrollTime=Date.now()})),g(m(t),"_handleKeyDown",(function(e){var n=m(t)._scrollInfo;if(!(n.scrollHeight<=n.clientHeight)){var r=t.props,o=r.stickyToBottom,a=r.scrollPageRatio,i=0;switch(e.code){case"PageUp":i=n.clientHeight*a*(o?1:-1);break;case"PageDown":case"Space":i=n.clientHeight*a*(o?-1:1);break;case"ArrowUp":i=40*(o?1:-1);break;case"ArrowDown":i=40*(o?-1:1);break;case"Home":i=o?n.scrollHeight-n.clientHeight-n.position:0-n.position;break;case"End":i=o?0-n.position:n.scrollHeight-n.clientHeight-n.position}i&&t.scrollWithOffset(i)}})),g(m(t),"_handleKeyUp",(function(){t._continuousScrollingTimer&&(clearTimeout(t._continuousScrollingTimer),t._continuousScrollingTimer=0),t._continuousScrollingAnimation&&(cancelAnimationFrame(t._continuousScrollingAnimation),t._continuousScrollingAnimation=0)})),g(m(t),"_handleClickScrollbar",(function(e){var n,r;t._isMovingScrollbar||e.target.classList.contains("scroll-list-scrollbar-bar")||(r=m(t)._scrollInfo).scrollHeight<=r.clientHeight||(n=t._scrollbarElement.parentElement.getBoundingClientRect(),n=e.clientY-n.y,n=t.props.stickyToBottom?r.clientHeight-n-Math.floor(r.scrollbarHeight/2):n-Math.floor(r.scrollbarHeight/2),r=t.setScrollbarPosition(n,t.props.animateOnClickScrollbar),t._handleStartMoveScrollbar(e,r))})),g(m(t),"_handleStartMoveScrollbar",(function(e,n){t._isMovingScrollbar={startY:e.clientY,startPosition:null!=n?n:t._scrollInfo.position},t._startListenMouseMove(),e.stopPropagation()})),g(m(t),"_handleStopMoveScrollbar",(function(){t._isMovingScrollbar=!1,t._stopListenMouseMove()})),g(m(t),"_handleMoveScrollbar",(function(e){var n,r,o,a;!t._isMovingScrollbar||(n=m(t)._scrollInfo).scrollHeight<=n.clientHeight||(r=t.props.stickyToBottom,o=(a=t._isMovingScrollbar).startY,a=a.startPosition,e.clientY!==o&&t.scrollTo(a+(e.clientY-o)*(r?-1:1)*((n.scrollHeight-n.clientHeight)/(n.clientHeight-n.scrollbarHeight))))})),g(m(t),"_handleTouchStart",(function(e){var n=e.touches[0];t._touching={startY:n.clientY,lastY:n.clientY,startTime:Date.now(),isTouchScrollbar:e.target.classList.contains("scroll-list-scrollbar-bar")}})),g(m(t),"_handleTouchMove",(function(e){var n;t._touching&&(e=e.touches[0].clientY,n=(t._touching.lastY-e)*(t._touching.isTouchScrollbar?-1:1),t._touching.lastY=e,t._handleWheel({deltaY:n}))})),g(m(t),"_handleTouchEnd",(function(e){var n,r,o,a;t._touching&&(n=(a=t._touching).startY,r=a.startTime,a=a.lastY,o=Date.now(),a=300*(e=(((null==(e=e.touches[0])?void 0:e.clientY)||a)-n)/(o-r)),t._acceleratingTimer&&(clearTimeout(t._acceleratingTimer),t._acceleratingTimer=null),0!=e&&(t._listElement.classList.add("touch-accelerating"),t._handleWheel({deltaY:a*(t._touching.isTouchScrollbar?1:-1)}),t._acceleratingTimer=setTimeout((function(){t._listElement.classList.remove("touch-accelerating"),t._acceleratingTimer=null}),650)),t._touching=!1)})),g(m(t),"_listElementRef",(function(e){t._listElement=e})),g(m(t),"_containerElementRef",(function(e){t._containerElement=e})),g(m(t),"_scrollbarElementRef",(function(e){t._scrollbarElement=e})),t._scrollInfo={stickyToBottom:!1,scrollbarShowed:!1,clientHeight:0,scrollHeight:0,position:0,isStickiedAtBegin:!0,isStickiedAtEnd:!0,isAtTop:!0,isAtBottom:!0,scrollbarPosition:0,scrollbarHeight:0},t;throw new TypeError("Cannot call a class as a function")}return t=o,(e=[{key:"scrollInfo",get:function(){return this._scrollInfo}},{key:"listElement",get:function(){return this._listElement}},{key:"componentDidMount",value:function(){var e=this;this.tryUpdateStyle(),this._containerSizeObserver=new ResizeObserver((function(t){!((t=t[0].contentRect).left||t.top||t.width||t.height)||e._containerElement.clientHeight===e._scrollInfo.scrollHeight&&e._listElement.clientHeight===e._scrollInfo.clientHeight||e.tryUpdateStyle()})),this._containerSizeObserver.observe(this._containerElement),this._containerSizeObserver.observe(this._listElement),this._listElement.addEventListener("scrolllist",this._handleCustomEvent),this._containerElement.addEventListener("scroll",this._handleContainerScroll,{capture:!0}),this.props.showScrollbarAfterShow&&this._startScrollingEffect()}},{key:"componentWillUnmount",value:function(){this._containerSizeObserver.disconnect(),this._stopListenMouseMove(),this._scrollingEffectTimer&&clearTimeout(this._scrollingEffectTimer),this._acceleratingTimer&&clearTimeout(this._acceleratingTimer),this._listElement.removeEventListener("scrolllist",this._handleCustomEvent),this._containerElement.removeEventListener("scroll",this._handleContainerScroll)}},{key:"updateStyle",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(this._listElement){var n=this._scrollInfo,r=this._listElement.clientHeight,o=r<(s=this._containerElement.clientHeight),a=Math.floor(s-r);if(e=o?"number"==typeof e?Math.min(a,Math.max(0,Math.floor(e))):Math.min(a,n.position):0,r===n.clientHeight&&s===n.scrollHeight&&e===n.position)return!1;var i=(a=this.props).stickyToBottom,l=a.minScrollbarHeight,u=a.onScroll,s=(a=a.onScrollToEnd,this._scrollInfo={stickyToBottom:i,clientHeight:r,scrollHeight:s,position:e,scrollbarHeight:0,scrollbarPosition:0,scrollbarShowed:o,isStickiedAtBegin:!o||0===e,isStickiedAtEnd:!o||e===s-r,isAtBottom:!o||(i?0===e:e===s-r),isAtTop:!o||(i?e===s-r:0===e)},e!==n.position&&(this._containerElement.style[i?"bottom":"top"]="-".concat(e,"px")),o?(this._scrollbarElement.parentElement.style.display="block",o=Math.max(l,Math.floor(r*(r/s))),this._scrollbarElement.style[i?"bottom":"top"]="".concat(l=e/(s-r)*(r-o),"px"),this._scrollbarElement.style.height="".concat(o,"px"),this._scrollInfo.scrollbarHeight=o,this._scrollInfo.scrollbarPosition=l):this._scrollbarElement.parentElement.style.display="none",i=e!==n.position,u&&i&&u(c({},this._scrollInfo),n),a&&this._scrollInfo.isStickiedAtEnd&&!n.isStickiedAtEnd&&a(c({},this._scrollInfo),n),!t);return i&&(r=Date.now(),t&&(s=r-this._lastPositionChangeTime<100),this._lastPositionChangeTime=r),this._startScrollingEffect(s),!0}}},{key:"tryUpdateStyle",value:function(e,t){var n=this;this._updateStyleAnimationFrame&&cancelAnimationFrame(this._updateStyleAnimationFrame),this._updateStyleAnimationFrame=requestAnimationFrame((function(){n._updateStyleAnimationFrame=null,n.updateStyle(e,t)}))}},{key:"scrollWithOffset",value:function(e,t){var n=this._scrollInfo.position;this.tryUpdateStyle(n+e,t)}},{key:"scrollTo",value:function(e,t){this.tryUpdateStyle(e,t)}},{key:"setScrollbarPosition",value:function(e,t){var n=this._scrollInfo;if(n.scrollbarShowed)return e*=(n.scrollHeight-n.clientHeight)/(n.clientHeight-n.scrollbarHeight),this.scrollTo(e,t),e}},{key:"scrollToBegin",value:function(e){this._scrollInfo.isStickiedAtBegin||this.tryUpdateStyle(0,e)}},{key:"scrollToEnd",value:function(e){var t=this._scrollInfo;t.isStickiedAtEnd||this.tryUpdateStyle(t.scrollHeight-t.clientHeight,e)}},{key:"scrollToTop",value:function(e){if(!this._scrollInfo.isAtTop)return this.props.stickyToBottom?this.scrollToEnd(e):this.scrollToBegin(e)}},{key:"scrollToBottom",value:function(e){if(!this._scrollInfo.isAtBottom)return this.props.stickyToBottom?this.scrollToBegin(e):this.scrollToEnd(e)}},{key:"scrollToElement",value:function(e,t){if(!(e="string"==typeof e?this._containerElement.querySelector(e):e))return!1;var n=(t=(t="boolean"==typeof t?{behavior:t?"smooth":"instant"}:t)||{}).behavior,r=void 0===(r=t.block)?"start":r,o=void 0===(o=t.ifNeed)||o,a=(t=void 0===(t=t.offset)?0:t,n="smooth"===(void 0===n?"instant":n),e=e.getBoundingClientRect(),this._listElement.getBoundingClientRect()),i=e.top-a.top,l=a.bottom-e.bottom;return!(o&&0<=i&&0<=l||(o=r,"center"===r&&e.height>=a.height?o="start":"nearest"===r&&(o=i<l?"start":"end"),r=0,"start"===o?r=0-i:"end"===o?r=l:"center"===o&&(r=Math.round(a.top+(a.height-e.height)/2)-e.top),0===r||(i=this.props.stickyToBottom,this.scrollWithOffset((r+t)*(i?1:-1),n),0)))}},{key:"_startScrollingEffect",value:function(e){var t=this,n=this._listElement;n.classList.toggle("is-rapid",!!e),n.classList.contains("is-scrolling")||n.classList.add("is-scrolling"),this._scrollingEffectTimer&&clearTimeout(this._scrollingEffectTimer),this._scrollingEffectTimer=setTimeout((function(){n.classList.remove("is-scrolling"),n.classList.remove("is-rapid"),t._scrollingEffectTimer=null}),this.props.scrollbarHideDelay)}},{key:"_startListenMouseMove",value:function(){document.addEventListener("mouseup",this._handleStopMoveScrollbar),document.addEventListener("mousemove",this._handleMoveScrollbar)}},{key:"_stopListenMouseMove",value:function(){document.removeEventListener("mouseup",this._handleStopMoveScrollbar),document.removeEventListener("mousemove",this._handleMoveScrollbar)}},{key:"render",value:function(){var e=(c=this.props).className,t=c.stickyToBottom,n=c.useHotkey,o=c.animation,l=c.customView,s=c.children,c=(c.onScroll,c.onScrollToEnd,c.minScrollbarHeight,c.scrollPageRatio,c.scrollbarHideDelay,c.showScrollbarAfterShow,c.showScrollbarOnChange,c.animateOnClickScrollbar,c.wheelSpeed,function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(c,i));return e=(0,a.classes)("scroll-list",e,"is-stick-".concat(t?"bottom":"top"),{"has-animation":o}),r.default.createElement("div",u({className:e,onWheel:this._handleWheel,onKeyUp:n?this._handleKeyUp:null,onKeyDown:n?this._handleKeyDown:null,onTouchStart:this._handleTouchStart,onTouchMove:this._handleTouchMove,onTouchEnd:this._handleTouchEnd,onTouchCancel:this._handleTouchEnd,ref:this._listElementRef,tabIndex:n?"0":null},c),r.default.createElement("div",{className:"scroll-list-container",ref:this._containerElementRef},s),r.default.createElement("div",{className:"scroll-list-scrollbar",onMouseDown:this._handleClickScrollbar},r.default.createElement("div",{className:"scroll-list-scrollbar-bar",ref:this._scrollbarElementRef,onMouseDown:this._handleStartMoveScrollbar})),"function"==typeof l?l(this._scrollInfo):l)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),o}(r.PureComponent),g(t.default=n,"propTypes",{className:o.default.string,onScroll:o.default.func,onScrollToEnd:o.default.func,stickyToBottom:o.default.bool,minScrollbarHeight:o.default.number,scrollPageRatio:o.default.number,wheelSpeed:o.default.number,useHotkey:o.default.bool,animation:o.default.bool,animateOnClickScrollbar:o.default.bool,customView:o.default.any,showScrollbarAfterShow:o.default.bool,showScrollbarOnChange:o.default.bool,scrollbarHideDelay:o.default.number,children:o.default.node}),g(n,"defaultProps",{className:null,onScroll:null,onScrollToEnd:null,stickyToBottom:!1,minScrollbarHeight:28,scrollPageRatio:.8,wheelSpeed:1,useHotkey:!0,animation:!0,animateOnClickScrollbar:!1,customView:null,showScrollbarAfterShow:!0,showScrollbarOnChange:!0,scrollbarHideDelay:500,children:null})},20270:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=s(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=u(n(39701)),i=u(n(74673)),l=["animation","hoverEffect","minScrollbarHeight","scrollbarHideDelay","scrollPageRatio","showScrollbarAfterShow","useHotkey","wheelSpeed"];function u(e){return e&&e.__esModule?e:{default:e}}function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}n=(0,o.forwardRef)((function(e,t){var n;return"ontouchstart"in window?(e.animation,e.hoverEffect,e.minScrollbarHeight,e.scrollbarHideDelay,e.scrollPageRatio,e.showScrollbarAfterShow,e.useHotkey,e.wheelSpeed,n=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,l),o.default.createElement(i.default,c({ref:t},n))):o.default.createElement(a.default,c({ref:t},e))})),n.defaultProps=a.default.defaultProps,n.propTypes=a.default.propTypes,t.default=(0,o.memo)(n)},13939:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.SearchBox=function(e){var t=e.options,n=e.onChange,r=(e=e.defaultValue,(e=u((0,o.useState)(null!=e?e:""),2))[0]),a=e[1],l=(e=u((0,o.useState)(!1),2))[0],s=e[1],c=(0,o.useRef)(null),d=t.map((function(e){return e.label}));return e="absolute right-0 top-0 h-[26px] w-[26px] flex justify-center items-center",o.default.createElement("div",{className:"x-search-box"},o.default.createElement("div",{className:"relative"},o.default.createElement("input",{className:"input rounded",onChange:function(e){var t=e.target.value;a(e.target.value),s(!0),d.some((function(e){return e===t}))?n(t):n(null)},onFocus:function(){return s(!0)},onBlur:function(){setTimeout((function(){return s(!1)}),800)},value:r,ref:c}),r?o.default.createElement(i.default,{name:"mdi-close",className:"".concat(e," cursor-pointer"),onClick:function(){a(""),c.current.focus()}}):o.default.createElement(i.default,{name:"mdi-chevron-down",className:e,style:{fontSize:"1rem"}})),l?o.default.createElement(f,{options:t,onChange:function(e,t){a(e),n(t),s(!1)},searchValue:r}):null)};var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=l(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=n(16986),i=(t=n(40328))&&t.__esModule?t:{default:t};function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=function(e,t){if(!e)return t;if(!e.includes(" "))return t.map((function(t){return{label:t.label,value:t.value,score:(0,a.caculateScore)(e,t.label)}})).filter((function(e){return 0<e.score})).sort((function(e,t){return t.score-e.score}));var n=e.split(" ");return t.map((function(e){return{label:e.label,value:e.value,score:n.reduce((function(t,n){return t+(0,a.caculateScore)(n,e.label)}),0)}})).filter((function(e){return 0<e.score})).sort((function(e,t){return t.score-e.score}))};function f(e){var t=e.options,n=e.onChange,r=e.searchValue,a=(e=u((0,o.useState)(c(r,t)),2))[0],i=e[1];return(0,o.useEffect)((function(){i(c(r,t))}),[r,t]),o.default.createElement("ul",{className:"x-data-list list-none m-0 py-2 pl-0 bg-white rounded-sm absolute min-h-[32px] max-h-[240px] overflow-y-auto w-[480px] z-50 shadow-xl"},a.map((function(e){var t=e.label,r=e.value;return o.default.createElement("li",{className:"pl-2 leading-8 hover:bg-[#f5f5f5]",key:r,onClick:function(){n(t,r)}},t)})))}},93956:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=p(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=d(n(45697)),i=n(64393),l=d(n(70389)),u=d(n(40328)),s=n(16986),c=d(n(84836)),f=["className","children","onSearchChange","changeDelay","onFocus","onFocusChange","onBlur","defaultValue","placeholder"];function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=b(e);if(n=t?(n=b(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return g(o)}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e);var n=y(r);function r(e){var t;if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");v(g(t=n.call(this,e)),"handleOnInputFocus",(function(e){t.setState({focus:!0},(function(){var n=(r=t.props).onFocus,r=r.onFocusChange;n&&n(e),r&&r(!0,e)}))})),v(g(t),"handleOnInputBlur",(function(e){t.setState({focus:!1},(function(){var n=(r=t.props).onBlur,r=r.onFocusChange;n&&n(e),r&&r(!1,e)}))})),v(g(t),"handleOnInputChange",(function(e){t.setValue(e="string"==typeof e?e:"")})),v(g(t),"handleOnClearBtnClick",(function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];t.setValue("",(function(){e&&t.inputControl.focus()}))})),t.state={value:e.defaultValue,focus:!1,empty:(0,s.isEmptyString)(e.defaultValue)};var o=(e=t.props).onSearchChange;return e=e.changeDelay,o&&(t.delaySearchChangeTask=new c.default((function(e){o(e)}),e)),t}return t=r,(e=[{key:"componentWillUnmount",value:function(){this.delaySearchChangeTask&&this.delaySearchChangeTask.destroy()}},{key:"getValue",value:function(){return this.state.value.trim()}},{key:"isEmpty",value:function(){return this.state.empty}},{key:"setValue",value:function(e,t){var n=this;this.inputControl.setValue(e),this.setState({empty:(0,s.isEmptyString)(e),value:e},(function(){n.delaySearchChangeTask&&n.delaySearchChangeTask.do(e),t&&t(e)}))}},{key:"render",value:function(){var e=this,t=(s=this.props).className,n=s.children,r=(s.onSearchChange,s.changeDelay,s.onFocus,s.onFocusChange,s.onBlur,s.defaultValue),a=s.placeholder,s=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(s,f),c=(delete s.value,d=this.state).focus,d=d.empty;return o.default.createElement(l.default,h({className:(0,i.classes)("search",t,{focus:c,empty:d,normal:!c}),defaultValue:r,label:o.default.createElement(u.default,{name:"sprite-search"}),onFocus:this.handleOnInputFocus,onBlur:this.handleOnInputBlur,onChange:this.handleOnInputChange,ref:function(t){e.inputControl=t},placeholder:a},s,{labelStyle:{zIndex:1}}),o.default.createElement(u.default,{name:"close",onClick:this.handleOnClearBtnClick,className:"close state"}),n)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.PureComponent),v(t.default=n,"propTypes",{placeholder:a.default.any,changeDelay:a.default.number,onSearchChange:a.default.func,onBlur:a.default.func,onFocus:a.default.func,onFocusChange:a.default.func,defaultValue:a.default.any,children:a.default.any,className:a.default.string}),v(n,"defaultProps",{placeholder:null,changeDelay:100,onSearchChange:null,onFocusChange:null,onBlur:null,onFocus:null,defaultValue:void 0,className:null,children:null})},74379:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==c(e)&&"function"!=typeof e)return{default:e};if((t=u(t))&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(n(67294)),o=(o=n(45697))&&o.__esModule?o:{default:o},a=n(64393),i=n(16986),l=["value","children","className","selectProps","selectClassName","options","onChange"];function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(n=t?(n=h(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,n&&("object"===c(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return p(r)}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e);var n=d(o);function o(e){var t;if(this instanceof o)return m(p(t=n.call(this,e)),"handleSelectChange",(function(e){var n=e.target.value;t.setState({empty:(0,i.isEmptyString)(n)}),t.props.onChange&&t.props.onChange(n,e)})),m(p(t),"handleOnSelectFocus",(function(e){t.setState({focus:!0}),t.props.onFocus&&t.props.onFocus(e)})),m(p(t),"handleOnSelectBlur",(function(e){t.setState({focus:!1}),t.props.onBlur&&t.props.onBlur(e)})),t.state={focus:!1,empty:(0,i.isEmptyString)(t.props.value)},t;throw new TypeError("Cannot call a class as a function")}return t=o,(e=[{key:"focus",value:function(){this.selectBox.focus()}},{key:"render",value:function(){var e=this,t=(d=this.props).value,n=d.children,o=d.className,i=d.selectProps,u=d.selectClassName,f=d.options,d=(d.onChange,function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(d,l));return r.default.createElement("div",s({className:(0,a.classes)("select",o,{focus:this.state.focus,empty:this.state.empty,normal:!this.state.focus})},d),r.default.createElement("select",s({ref:function(t){e.selectBox=t},className:u,value:t,onChange:this.handleSelectChange},i,{onFocus:this.handleOnSelectFocus,onBlur:this.handleOnSelectBlur}),f&&f.map((function(e){return e?("object"!==c(e)&&(e={value:e,label:e}),r.default.createElement("option",{key:e.value,value:e.value},e.label)):null})),n))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),o}(r.Component),m(t.default=n,"propTypes",{value:o.default.any,onChange:o.default.func,onFocus:o.default.func,onBlur:o.default.func,children:o.default.any,selectProps:o.default.object,className:o.default.string,selectClassName:o.default.string,options:o.default.array}),m(n,"defaultProps",{value:"",onChange:null,onFocus:null,onBlur:null,children:null,className:null,selectClassName:null,selectProps:null,options:null})},91705:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=void 0===(t=e.iconSize)?24:t,n=void 0===(n=e.iconName)?"loading":n,l=void 0===(l=e.iconClassName)?"spin text-gray inline-block":l,s=void 0===(s=e.labelClassName)?"":s,c=void 0===(c=e.label)?"":c,f=void 0===(f=e.className)?"":f,d=e.children;return e=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,i),r.default.createElement("div",u({className:(0,o.classes)("spinner text-center",f)},e),r.default.createElement(a.default,{name:n,className:l,size:t}),c&&r.default.createElement("div",{className:(0,o.classes)("muted small title",s)},c),d)};var r=l(n(67294)),o=n(64393),a=l(n(40328)),i=["iconSize","iconName","iconClassName","labelClassName","label","className","children"];function l(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}},3713:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=i(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var l;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((l=a?Object.getOwnPropertyDescriptor(e,n):null)&&(l.get||l.set)?Object.defineProperty(o,n,l):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=(n=(n=n(45697))&&n.__esModule?n:{default:n},["label","children"]);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=s(e);if(n=t?(n=s(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==o)return o;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var f=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e);var n=u(r);function r(){var e=this,t=r;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e=((t=this.props).label,t.children),t=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(t,a);return o.default.createElement("div",t,"function"==typeof e?e():e)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.PureComponent);c(t.default=f,"propTypes",{label:n.default.any,children:n.default.any}),c(f,"defaultProps",{label:"tab",children:null})},66222:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"TabPane",{enumerable:!0,get:function(){return i.default}}),t.default=t.Tabs=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==f(e)&&"function"!=typeof e)return{default:e};if((t=s(t))&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(n(67294)),o=u(n(45697)),a=n(64393),i=u(n(3713)),l=["defaultActivePaneKey","activePaneKey","cache","navClassName","tabPaneClass","activeClassName","contentClassName","onPaneChange","className","children"];function u(e){return e&&e.__esModule?e:{default:e}}function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(n=t?(n=p(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,n&&("object"===f(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(o);function o(e){var t;if(this instanceof o)return(t=n.call(this,e)).state={activePaneKey:e.activePaneKey||e.defaultActivePaneKey},t;throw new TypeError("Cannot call a class as a function")}return t=o,(e=[{key:"handleNavClick",value:function(e){var t,n=this,r=this.state.activePaneKey;e!==r&&(t=r,this.setState({activePaneKey:e},(function(){var r=n.props.onPaneChange;r&&r(e,t)})))}},{key:"render",value:function(){var e=this,t=((h=this.props).defaultActivePaneKey,h.activePaneKey),n=h.cache,o=h.navClassName,i=h.tabPaneClass,u=h.activeClassName,s=h.contentClassName,d=(h.onPaneChange,h.className),p=h.children,h=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(h,l),m=t||this.state.activePaneKey;return p=p||[],p=(p=Array.isArray(p)?p:[p]).filter((function(e){return e&&"object"===f(e)})),r.default.createElement("div",c({className:(0,a.classes)("tabs",d,"tabs-active-".concat(m))},h),r.default.createElement("nav",{className:(0,a.classes)("nav",o)},p.map((function(t){return r.default.createElement("a",{key:t.key,className:t.key===m?u:"",onClick:e.handleNavClick.bind(e,t.key)},t.props.label)}))),r.default.createElement("div",{className:(0,a.classes)("content",s)},p.map((function(e){return e.key===m?r.default.createElement("div",{key:e.key,className:(0,a.classes)("tab-pane active",i)},e):n?r.default.createElement("div",{key:e.key,className:(0,a.classes)("tab-pane hidden",i)},e):null}))))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),o}(r.PureComponent),h(t.Tabs=t.default=n,"TabPane",i.default),h(n,"propTypes",{navClassName:o.default.string,activeClassName:o.default.string,tabPaneClass:o.default.string,contentClassName:o.default.string,className:o.default.string,children:o.default.any,cache:o.default.bool,defaultActivePaneKey:o.default.any,activePaneKey:o.default.any,onPaneChange:o.default.func}),h(n,"defaultProps",{navClassName:"",activeClassName:"active",contentClassName:"active",tabPaneClass:"",className:"",cache:!1,defaultActivePaneKey:null,activePaneKey:null,onPaneChange:null,children:null})},51060:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=i(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var l;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((l=a?Object.getOwnPropertyDescriptor(e,n):null)&&(l.get||l.set)?Object.defineProperty(o,n,l):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=["startTime","showCountdown"];function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=c(e);if(n=t?(n=c(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return s(o)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e);var n=u(r);function r(){var e=this,t=r;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return f(s(e=n.call.apply(n,[this].concat(a))),"timer",void 0),e}return t=r,(e=[{key:"componentDidMount",value:function(){var e=this;this.timer=setInterval((function(){e.forceUpdate()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"getTimeText",value:function(){var e=(t=this.props).startTime,t=t.showCountdown,n="";if(0===(e=Math.floor((Date.now()-e)/1e3)))return"00:00";if(e<0){if(!t)return"00:00";n+="-",e=0-e}t=Math.floor(e/3600);var r=Math.floor(e%3600/60);return e%=60,"".concat(n).concat(t?"".concat(t,":"):"").concat(r<10?"0".concat(r):r,":").concat(e<10?"0".concat(e):e)}},{key:"render",value:function(){var e=((e=this.props).startTime,e.showCountdown,function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,a));return o.default.createElement("span",e,this.getTimeText())}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.PureComponent),f(t.default=n,"defaultProps",{showCountdown:!1})},62498:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=a(t))&&t.has(e))return t.get(e);var n,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var l;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((l=i?Object.getOwnPropertyDescriptor(e,n):null)&&(l.get||l.set)?Object.defineProperty(o,n,l):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){var t=e.controller,n=(e=e.title,i((0,o.useState)(t.isWindowMaximized),2)),r=n[0],a=n[1];return document.body.classList.toggle("maximized",r),(0,o.useEffect)((function(){function e(){var e=t.isWindowMaximized();a(e),document.body.classList.toggle("maximized",e)}return t.onWindowMaximizedChanged(e),function(){return t.offWindowMaximizedChanged(e)}}),[t]),t.showWindowControls?o.default.createElement("div",{className:"app-titlebar"},o.default.createElement("div",{className:"app-titlebar-drag-area user-app-dragable dock"}),e&&o.default.createElement("div",{className:"app-titlebar-title"},e),o.default.createElement("nav",{className:"nav app-nav-windows-control dock-right dock-top"},o.default.createElement("a",{id:"min-window-btn",onClick:t.minimizeWindow},o.default.createElement("i",{className:"icon mdi mdi-window-minimize"})),o.default.createElement("a",{id:"max-window-btn",onClick:t.toggleWindowMaximized.bind(null,null)},o.default.createElement("i",{className:r?"icon mdi mdi-window-restore":"icon mdi mdi-window-maximize"})),o.default.createElement("a",{id:"cls-window-btn",onClick:t.closeWindow},o.default.createElement("i",{className:"icon mdi mdi-window-close"})))):o.default.createElement("div",{className:"user-app-dragable app-titlebar",onDoubleClick:t.handleTitlebarDblClick},e&&o.default.createElement("div",{className:"app-titlebar-title"},e))}n=(n=n(45697))&&n.__esModule?n:{default:n},u.propTypes={controller:n.default.object.isRequired,title:n.default.string},u.defaultProps={title:""},t.default=(0,o.memo)(u)},74160:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateConfig=t.getSpecialVersionName=t.default=void 0;var r=l(n(91230)),o=l(n(33859)),a=l(n(8755)),i=l(n(35507));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return Object.keys(e).forEach((function(t){Object.assign(f[t],e[t])})),f}var f={system:l(n(10241)).default,media:i.default,ui:o.default,pkg:r.default,exts:{},lang:a.default};t.getSpecialVersionName=function(){var e=f.system.specialVersion;return void 0===e?f.pkg.specialVersion:e},t.updateConfig=c,(i=f.pkg.configurations)&&c(i),f.pkg.buildTime||DEBUG,DEBUG&&(n.g.$config=f),c({system:s(s({},(t.default=f).system),{},{device:"zentaoweb"}),ui:{"chat.autoActiveNextChat":!1,"app.hideLogout":!1,"app.shortenReconnectMessage":!1}})},78717:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCommandContext=t.executeCommandWithContext=t.executeCommandLine=t.executeCommand=t.default=t.createCommandObject=void 0,t.isRegisteredCommand=function(e){return!!d[e]},t.unregisterCommand=t.setCommandContext=t.registerCommand=void 0;var r=n(64393);function o(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){e&&("object"!==u(e)&&(e={data:e}),Object.assign(f,e))}function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object.assign.apply(Object,[{},f].concat(t))}var f={},d={};function p(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return w.apply(void 0,[e,null].concat(n))}function h(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(e.includes("|"))return Promise.all(e.split("|").map((function(e){return h(e,t)})));var n=e.split("/");return e=n.map((function(e,t){return"?"===e[0]&&t===n.length-1?(0,r.getSearchParam)(null,e):decodeURIComponent(e)})),w.apply(void 0,[e.shift(),t].concat(i(e)))}function m(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return e="object"===u(e)?a({},e):{name:e},"function"==typeof t&&(e.func=t),n&&(e.context=n),e}function y(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;if(e=m(e,t,r),d[e.name])return DEBUG&&console.warn("Command register failed, because the command '".concat(e.name,"' is already registered.")),!1;if("object"===u(o)&&o&&Object.assign(e,o),n.g.ExtsRuntime&&void 0!==e.apiLevel&&!e.extension)try{n.g.ExtsRuntime.registerExtensionAPI({name:"commander.executeCommand.".concat(e.name),type:"host",level:e.apiLevel})}catch(e){DEBUG&&console.error(e)}return d[e.name]=e,!0}function g(e){return!!d[e]&&(delete d[e],!0)}t.setCommandContext=s,t.getCommandContext=c;var b,v,w=function(e,t){var r=null;if("object"!==u(e)?e=d[r=e]:r=e&&e.name,e){for(var o=arguments.length,a=new Array(2<o?o-2:0),i=2;i<o;i++)a[i-2]=arguments[i];if(!e.func)return void(DEBUG&&(console.collapse("Command.execute","redBg",r,"redPale","command func not found","redBg"),console.log("command",e),console.log("params",a),console.groupEnd()));if(e.extension&&!n.g.ExtsRuntime.checkExtensionAPIPermission(e.extension,"ext.getExtension"))throw new Error('Call extension command "'.concat(e,'" failed, because the extension "').concat(e.extension,'" is not available.'));var l=null,s=(a&&a.length&&"object"===u(a[a.length-1])&&(l=a[a.length-1]),t=c(l?{options:l}:null,t),e.context&&("function"===(s=u(e.context))?Object.assign(t,e.context.apply(e,[t].concat(a))):"object"===s?Object.assign(t,e.context):Object.assign(t,{data:e.context})),e.func.apply(e,[t].concat(a)));return DEBUG&&(console.collapse("Command.execute","redBg",r,"redPale"),console.log("context",t),console.log("command",e),console.log("params",a),console.log("result",s),console.log("searchOptions",l),console.groupEnd()),s instanceof Promise?s:s instanceof Error?Promise.reject(s):Promise.resolve(s)}return Promise.resolve(new Error("Unknown command '".concat(r,"'.")))},O=(t.executeCommandWithContext=w,t.executeCommand=p,t.executeCommandLine=h,t.createCommandObject=m,t.registerCommand=y,t.unregisterCommand=g,n.g.ExtsRuntime&&(b=n.g.ExtsRuntime.registerExtensionAPI,[{name:"commander.registerCommand",level:5,func:function(e,t,n){return!(!y(e="extension.".concat(this.name,".").concat(e),t,n)||!(t=d[e])||(t.extension=this.name,0))}},{name:"commander.unregisterCommand",level:0,func:function(e){e="extension.".concat(this.name,".").concat(e);var t=d[e];return!(!t||t.extension!==this.name)&&g(e)}},{name:"commander.executeCommand",level:6,func:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return v.call.apply(v,[this,e,null].concat(n))}},{name:"commander.executeCommandLine",level:6,func:function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(t.includes("|"))return Promise.all(t.split("|").map((function(t){return e(t,n)})));var o=t.split("/");return t=o.map((function(e,t){return"?"===e[0]&&t===o.length-1?(0,r.getSearchParam)(null,e):decodeURIComponent(e)})),v.call.apply(v,[this,t.shift(),n].concat(i(t)))}},{name:"commander.executeCommandWithContext",level:6,func:v=function(e,t){for(var r,o=arguments.length,a=new Array(2<o?o-2:0),i=2;i<o;i++)a[i-2]=arguments[i];if("string"!=typeof e)throw r=new TypeError('Param "command" must be a string.'),DEBUG&&(console.collapse("Extension","greenBg",this.name,"redPale",r.message,"red"),console.log("command",e),console.log("thisContext",t),console.log("params",a),console.log("extension",this),console.error("error",r),console.groupEnd()),r;if("~"===e[0]&&(e="extension.".concat(this.name,".").concat(e.substring(1))),n.g.ExtsRuntime.checkExtensionAPIPermission(this.name,"commander.executeCommand.".concat(e)))return w.apply(void 0,[e,t].concat(a));throw r=new Error('Call extension api "commander.executeCommand.'.concat(e,'" failed, because the extension "').concat(this.name,'" has not permission to access the api.')),DEBUG&&(console.collapse("Extension","greenBg",this.name,"redPale",r.message,"red"),console.log("command",e),console.log("thisContext",t),console.log("params",a),console.log("extension",this),console.error("error",r),console.groupEnd()),r}}].forEach((function(e){return b(e)}))),DEBUG&&(n.g.$executeCommand=p,n.g.$commands=d),{executeCommand:p,executeCommandLine:h,setCommandContext:s,registerCommand:y,unregisterCommand:g});t.default=O},89174:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ConferenceActionTypes=void 0;var r,o,a=(o=n(74160))&&o.__esModule?o:{default:o},i=n(7066);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}t.ConferenceActionTypes=r,(o=r||(t.ConferenceActionTypes=r={})).create="create",o.creating="creating",o.join="join",o.invite="invite",o.closing="closing",o.leave="leave",o.close="close",o.ignore="ignore",o.unignore="unignore",o.publish="publish",o.server="server",o.error="error",n=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");u(this,"room",void 0),u(this,"type",void 0),u(this,"date",void 0),u(this,"user",void 0),u(this,"error",void 0),u(this,"message",void 0),u(this,"status",void 0),u(this,"invitee",void 0),u(this,"participants",void 0),u(this,"data",void 0),u(this,"device",void 0);var n=t.room,o=t.type,l=t.date,s=t.user,c=t.error,f=t.message,d=t.status,p=t.invitee,h=t.participants,m=t.data;if(t=t.device,this.room=n,this.type=r[o],this.date=(0,i.createDate)(l).getTime(),this.user=s,this.error=c,this.message=f,this.status=d,this.invitee=p,this.participants=h,this.data="string"==typeof m&&"{"===m[0]?JSON.parse(m):m,this.device=t||a.default.system.device||"desktop",!this.type)throw new Error(m.type?'Cannot create ConferenceAction, "'.concat(m.type,'" is not a valid conference type.'):'Cannot create ConferenceAction, "ConferenceAction.type" must provide.');if(!this.date)throw new Error('Cannot create ConferenceAction, "ConferenceAction.date" must provide.');if(!this.user)throw new Error('Cannot create ConferenceAction, "ConferenceAction.user" must provide.')}var t,n,o;return t=e,o=[{key:"create",value:function(t,n){return t=t instanceof e?t:new e(t),void 0!==n&&(t.room=n),t}}],(n=[{key:"isCurrentDevice",get:function(){return this.device===a.default.system.device}},{key:"isCreate",get:function(){return this.type===r.create}},{key:"isCreating",get:function(){return this.type===r.creating}},{key:"isJoin",get:function(){return this.type===r.join}},{key:"isInvite",get:function(){return this.type===r.invite}},{key:"isLeave",get:function(){return this.type===r.leave}},{key:"isClose",get:function(){return this.type===r.close}},{key:"isClosing",get:function(){return this.type===r.closing}},{key:"isIgnore",get:function(){return this.type===r.ignore}},{key:"isUnignore",get:function(){return this.type===r.unignore}},{key:"isPublish",get:function(){return this.type===r.publish}},{key:"isServerOperation",get:function(){return this.type===r.server}},{key:"isError",get:function(){return this.type===r.error}},{key:"plain",value:function(){return{room:this.room,type:this.type,date:this.date,user:this.user,error:this.error,message:this.message,status:this.status,invitee:this.invitee,participants:this.participants,data:this.data,device:this.device}}}])&&l(t.prototype,n),o&&l(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),t.default=n},42012:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkAlreadyJoinedConference=t.cancelConference=void 0,t.checkAlreadyJoinedOnOtherDevice=S,t.leaveConference=t.joinConference=t.inviteConference=t.ignoreConference=t.createConference=t.closeConference=void 0,t.syncConferenceAction=E,t.syncPublicationState=function(e,t){return E(e,h.ConferenceActionTypes.publish,JSON.stringify(t))},t.updateOngoingChatConference=t.unignoreConference=void 0;var r=m(n(24260)),o=n(15973),a=n(57485),i=n(44374),l=n(63132),u=n(68271),s=n(78717),c=m(n(61862)),f=n(16986),d=n(32360),p=m(n(74101)),h=n(89174);function m(e){return e&&e.__esModule?e:{default:e}}function y(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){y(a,r,o,i,l,"next",e)}function l(e){y(a,r,o,i,l,"throw",e)}i(void 0)}))}}function b(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e){var t=(0,i.getJoinedConference)();return t&&e&&(0,s.executeCommand)("showMessager",(0,f.formatString)(e,{name:t.name}),{type:"danger",icon:"alert",autoHide:!1,actions:[{label:c.default.string("common.viewDetail"),url:"#/chats/recents/".concat(t.cgid)}]}),t}function S(e){return!!(e=(0,i.getChatConference)(e,!1))&&((e=e.isJoinedOnOtherDevice((0,o.getCurrentUserID)()))&&(0,s.executeCommand)("showMessager",c.default.string("conference.message.joinedOnOtherDevice"),{type:"danger",icon:"alert",autoHide:!1}),e)}function _(e){return(0,a.canUseConference)(e,!0)?r.default.sendAndListen({method:"conferenceGetByChat",params:[e]}):Promise.reject(new Error("ACTION_NOT_ALLOWED"))}function C(e){return(0,a.canUseConference)(e)&&(e=(0,i.getChatConference)(e)).canCancel((0,o.getCurrentUserID)())?((0,i.updateConferenceAction)({type:h.ConferenceActionTypes.close},e),Promise.resolve()):Promise.reject(new Error("ACTION_NOT_ALLOWED"))}function E(e,t){return P.apply(this,arguments)}function P(){return(P=g((function*(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";if(!(0,a.canUseConference)(e,!0))throw new Error("ACTION_NOT_ALLOWED");var o=(0,i.getChatConference)(e);o.isOpen&&((0,i.updateConferenceAction)({type:t,data:n},o),yield r.default.sendAndListen({method:"conferenceSyncAction",params:[e,t,n]}))}))).apply(this,arguments)}function k(e){var t;e.isSuccess&&e.data&&(t=(0,i.getConferenceByRoom)(e.data.room),(0,i.updateConferenceAction)(e.data,t)&&(0,l.updateConferenceServerConnection)(t))}t.checkAlreadyJoinedConference=O,t.updateOngoingChatConference=_,t.createConference=function(e,t,n){if(!(0,a.canUseConference)(e,!0))return Promise.reject(new Error("ACTION_NOT_ALLOWED"));if(O(c.default.string("conference.createFailed.alreadyJoined")))return Promise.resolve(!1);if(S(e))return Promise.resolve(!1);var o=(0,i.getChatConference)(e);return(0,i.updateConferenceAction)({type:h.ConferenceActionTypes.creating},o),n&&(o.publishOptions=n),"string"==typeof t&&(t=t&&"_"!==t?t.split(",").map((function(e){return Number.parseInt(e,10)})):[]),r.default.sendAndListen({method:"conferenceCreate",params:[e,t]}).catch((function(t){DEBUG&&(console.collapse("Conference","tealBg",o.name,"tealPale","Create conference error: ".concat(String(t)),"red"),console.error("error",t),console.log("conference",o),console.groupEnd()),(0,i.updateConferenceAction)({type:h.ConferenceActionTypes.error,error:t},o),(0,u.isOpenedActiveChat)(e)||(0,s.executeCommand)("showMessager",c.default.string("conference.message.createFail"),{type:"danger",icon:"alert",autoHide:!1,actions:[{label:c.default.string("common.viewDetail"),url:"#/chats/recents/".concat(e)}]})}))},t.inviteConference=function(e,t){if(!(0,a.canUseConference)(e))return Promise.reject(new Error("ACTION_NOT_ALLOWED"));var n=(0,i.getChatConference)(e);if(!(0,o.getCurrentUser)().isVersionSupport("continueToInviteConference"))return Promise.reject(new Error("SERVER NOT SUPPORT"));var l=[].concat(b(n.invitee),b(n.participants));return(t=t.filter((function(e){return!l.includes(e)}))).length?r.default.sendAndListen({method:"conferenceInvite",params:[e,t]}):void 0},t.joinConference=function(e){return(0,a.canUseConference)(e)?O(c.default.string("conference.joinFailed.alreadyJoined"))?Promise.resolve(!1):(0,i.getChatConference)(e).canJoin((0,o.getCurrentUserID)())?r.default.sendAndListen({method:"conferenceJoin",params:[e]}):Promise.reject(new Error("ACTION_NOT_ALLOWED")):Promise.reject(new Error("ACTION_NOT_ALLOWED"))},n=function(){var e=g((function*(e){if(!(0,a.canUseConference)(e,!0))throw new Error("ACTION_NOT_ALLOWED");var t=(0,i.getChatConference)(e);if(!t.isClosed){var n=(0,o.getCurrentUserID)();if(!t.canLeave(n)&&e!=="".concat(n,"&").concat(n))throw new Error("ACTION_NOT_ALLOWED");(0,i.updateConferenceAction)({type:h.ConferenceActionTypes.leave},t),yield(0,d.disconnectConferenceServer)(t.room);try{yield r.default.sendAndListen({method:"conferenceLeave",params:[e]})}catch(e){}}}));return function(t){return e.apply(this,arguments)}}(),t.leaveConference=n,t.cancelConference=C,n=function(){var e=g((function*(e){if(!(0,a.canUseConference)(e,!0))throw new Error("ACTION_NOT_ALLOWED");var t=(0,i.getChatConference)(e),n=(0,o.getCurrentUserID)();if(t.canCancel(n))return C(e);var l=(0,o.getCurrentUser)();if(!(t.canClose(n)||l.config.useInitConference&&t.cgid==="".concat(l.id,"&").concat(l.id)))throw new Error("ACTION_NOT_ALLOWED");(0,i.updateConferenceAction)({type:h.ConferenceActionTypes.closing},t),yield(0,d.disconnectConferenceServer)(t.room),yield r.default.sendAndListen({method:"conferenceClose",params:[e]})}));return function(t){return e.apply(this,arguments)}}(),t.closeConference=n,t.ignoreConference=function(e){return(0,a.canUseConference)(e)&&(e=(0,i.getChatConference)(e)).canIgnore((0,o.getCurrentUserID)())?((0,i.updateConferenceAction)({type:h.ConferenceActionTypes.ignore},e),Promise.resolve()):Promise.reject(new Error("ACTION_NOT_ALLOWED"))},t.unignoreConference=function(e){return(0,a.canUseConference)(e)?(e=(0,i.getChatConference)(e),(0,a.isIgnoredConference)(e)?((0,i.updateConferenceAction)({type:h.ConferenceActionTypes.unignore},e),Promise.resolve()):Promise.reject(new Error("ACTION_NOT_ALLOWED"))):Promise.reject(new Error("ACTION_NOT_ALLOWED"))},r.default.setHandler("conferenceGetByChat",(function(e){e.isSuccess&&e.data&&(e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),1!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||v(e,1)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.data)[0])&&(e.room=e.rid,delete e.rid,(0,i.updateConference)(e))})),r.default.setHandler("conferenceCreate",(function(e){e.isSuccess&&e.data&&(0,i.updateConference)(e.data)})),r.default.setHandler("conferenceClose",k),r.default.setHandler("conferenceSyncAction",k),r.default.setHandler("conferenceJoin",(function(e){if(e.isSuccess&&e.data)return k(e);(0,s.executeCommand)("showMessager","".concat(c.default.string("conference.message.joinFail")).concat(e.message?"(".concat(e.message,")"):""),{type:"danger",icon:"alert",autoHide:!1}),(0,i.updateConferenceAction)({type:h.ConferenceActionTypes.close},e.data)})),r.default.setHandler("conferenceInvite",k),r.default.setHandler("conferenceLeave",k),r.default.setHandler("syncConferences",(function(e){var t,n;e.isSuccess&&Array.isArray(e.data)&&(t=function(){e.data.forEach((function(e){(0,i.updateConference)(e)}))},p.default.isReady?t():n=p.default.subscribeChatsReadyEvent((function(){t(),p.default.unsubscribeChatsReadyEvent(n)})))})),(0,s.registerCommand)("updateOngoingChatConference",(function(e,t){return e=e.options,!t&&e&&e.cgid&&(t=e.cgid),_(t)}))},10088:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onConferenceAddActions=t.emitConferenceStatusChange=t.emitConferenceServerStatusChange=t.emitConferenceServerPublicationChange=t.emitConferenceInviteeChange=t.emitConferenceChange=t.emitConferenceAddActions=void 0,t.onConferenceChange=function(e,t){return"function"==typeof e&&(t=e,e=null),o.default.on(e?"".concat(r.change,".").concat(e):r.change,t)},t.onConferenceInviteeChange=function(e,t){return"function"==typeof e&&(t=e,e=null),o.default.on(e?"".concat(r.inviteeChange,".").concat(e):r.inviteeChange,t)},t.onConferenceServerPublicationChange=void 0,t.onConferenceServerStatusChange=function(e,t){return"function"==typeof e&&(t=e,e=null),o.default.on(e?"".concat(r.serverStatusChange,".").concat(e):r.serverStatusChange,t)},t.onConferenceStatusChange=function(e,t){return"function"==typeof e&&(t=e,e=null),o.default.on(e?"".concat(r.statusChange,".").concat(e):r.statusChange,t)};var r,o=(n=n(65286))&&n.__esModule?n:{default:n};(n=r=r||{}).change="conference.change",n.statusChange="conference.status.change",n.addActions="conference.addActions",n.serverStatusChange="conferenceServer.status.change",n.serverPublicationChange="conferenceServer.publication.change",n.inviteeChange="conference.invitee.change",t.emitConferenceChange=function(e){o.default.emit(r.change,e),o.default.emit("".concat(r.change,".").concat(e.cgid),e)},t.emitConferenceInviteeChange=function(e){o.default.emit(r.inviteeChange,e),o.default.emit("".concat(r.inviteeChange,".").concat(e.cgid),e)},t.emitConferenceStatusChange=function(e,t,n){DEBUG&&(console.collapse("Conference","tealBg",e.name,"tealPale",'Status Changed from "'.concat(n.name,'" to "').concat(t.name,'"'),""),console.trace("newStatus",t),console.log("oldStatus",n),console.log("conference",e),console.groupEnd()),o.default.emit(r.statusChange,e,t,n),o.default.emit("".concat(r.statusChange,".").concat(e.cgid),e,t,n)},t.onConferenceAddActions=function(e){return o.default.on(r.addActions,e)},t.emitConferenceAddActions=function(e,t){o.default.emit(r.addActions,e,t)},t.emitConferenceServerStatusChange=function(e,t,n,a){DEBUG&&(console.collapse("ConferenceServer","tealBg",e.name,"tealPale",'Status Changed from "'.concat(n.name,'" to "').concat(t.name,'"'),""),console.trace("newStatus",t),console.log("oldStatus",n),console.log("conference",e),console.log("conferenceServer",a),console.groupEnd()),o.default.emit(r.serverStatusChange,e,t,n,a),o.default.emit("".concat(r.serverStatusChange,".").concat(e.cgid),e,t,n,a)},t.onConferenceServerPublicationChange=function(e){return o.default.on(r.serverPublicationChange,e)},t.emitConferenceServerPublicationChange=function(e,t,n){o.default.emit(r.serverPublicationChange,e,t,n)}},57485:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canUseConference=void 0,t.getConference=function(e){return d(e,!0)?(0,r.getChatConference)(e,!1):null},t.isJoinedConference=t.isIgnoredConference=t.isConferenceParticipant=t.isConferenceIncoming=t.getMemberStatusInConference=t.getConferenceParticipantMembers=void 0;var r=n(44374),o=n(15973),a=s(n(74101)),i=n(32360),l=s(n(94128)),u=s(n(84431));function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){return!!(e="string"==typeof e?(0,r.getChatConference)(e):e).isOpen&&(null==t?t=(0,o.getCurrentUser)():"object"!==c(t)&&(t=u.default.getMemberOrTemp(t)),t.isOnline&&e.isParticipant(t.id))}t.getConferenceParticipantMembers=function(e){"string"==typeof e&&(e=(0,r.getChatConference)(e));var t=[];return e.participantsList.forEach((function(e){(e=u.default.getMemberOrTemp(e))&&e.isOnline&&t.push(e)})),t},t.isConferenceParticipant=f,t.isJoinedConference=function(e){return f(e)},t.isIgnoredConference=function(e,t){var n;return"string"==typeof e&&(e=(0,r.getChatConference)(e)),null==t&&(t=(0,o.getCurrentUserID)()),(null==(n=e)?void 0:n.isOpen)&&e.isIgnored(t)},t.isConferenceIncoming=function(e,t){return"string"==typeof e&&(e=(0,r.getChatConference)(e)),void 0===t&&(t=(0,o.getCurrentUserID)()),e.isOpen&&e.openedBy!==t&&!e.isParticipant(t)};var d=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=(0,o.getCurrentUser)();return!(!n.config.useInitConference||!t||e!=="".concat(n.id,"&").concat(n.id))||!(!(null==n?void 0:n.permissions.includes("owt/nonelectron"))&&"electron"!==l.default.type||!n||!n.conference)&&(!e||(!e.includes("&")||(t=e.split("&"))[0]!==t[1])&&(t=a.default.getChat(e))&&!t.isReadonly(n))};t.canUseConference=d,t.getMemberStatusInConference=function(e,t){if("string"==typeof e&&(e=(0,r.getChatConference)(e)),void 0===t?t=(0,o.getCurrentUser)():"object"!==c(t)&&(t=u.default.getMemberOrTemp(t)),e&&e.isOpen&&e.isParticipant(t.id)){if(e.room){if(t.isOffline)return"offline";if(e=(0,i.getConferenceServer)(e.room))if(e.isConnected){if(e.isParticipant(t.id))return"server_connected"}else if(e.isReady&&1<e.failuresCount&&e.error)return"server_error"}return"server_connecting"}return!1}},89848:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MEDIA_TYPES=void 0,t.createBlackVideoTrack=s,t.createMediaStream=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r.audio,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return"av"===e?navigator.mediaDevices.getUserMedia({audio:!0,video:!0}):e===r.audio?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).catch((function(e){return console.error("Get user Media error",e),new MediaStream([u()])})):e===r.video?navigator.mediaDevices.getUserMedia({audio:!1,video:!0}):e!==r.screen?null:a.default.has("displayMedia.getDisplayMediaStream")?a.default.call("displayMedia.getDisplayMediaStream",{displaySelector:null!=(e=null==t?void 0:t.displaySelector)?e:f}):navigator.mediaDevices.getDisplayMedia({video:{cursor:"always"},audio:!1})},t.createSilenceAudioTrack=u,t.createWarmUpMediaStream=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new MediaStream([u(),s(e)])},t.destroyMediaStream=t.destroyAudio=void 0,t.displaySelector=f,t.playAudioStream=t.playAudio=void 0;var r,o,a=(o=n(94128))&&o.__esModule?o:{default:o},i=n(78717);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(){var e=(t=new AudioContext).createOscillator(),t=e.connect(t.createMediaStreamDestination());return e.start(),Object.assign(t.stream.getAudioTracks()[0],{enabled:!1,contentHint:"speech"})}function s(){var e=void 0===(e=(n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).width)?640:e,t=void 0===(t=n.height)?480:t,n=void 0===(n=n.contentHint)?"":n,r=Object.assign(document.createElement("canvas"),{width:e,height:t});return r.getContext("2d").fillRect(0,0,e,t),e=r.captureStream(),Object.assign(e.getVideoTracks()[0],{enabled:!1,contentHint:n})}function c(e,t,n){e="conference-audio-".concat(e);var r=document.getElementById(e);r||((r=document.createElement("audio")).id=e,DEBUG&&(r.controls=!0),document.getElementById("conference-audios").appendChild(r)),r.autoplay=n,r.srcObject=t}function f(e){return(0,i.executeCommand)("showDisplaySourceSelector",e)}t.MEDIA_TYPES=r,(o=r||(t.MEDIA_TYPES=r={})).audio="audio",o.video="video",o.screen="screen",t.playAudio=c,t.playAudioStream=function(e,t){return c(e.id,e.mediaStream,t)},t.destroyAudio=function(e){null!=(e=document.getElementById("conference-audio-".concat(e)))&&e.remove()},t.destroyMediaStream=function(e){if(e){var t,n=function(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}(e.getTracks());try{for(n.s();!(t=n.n()).done;){var r=t.value;r.stop(),e.removeTrack(r)}}catch(e){n.e(e)}finally{n.f()}}},document.getElementById("conference-audios")||((n=document.createElement("div")).id="conference-audios",n.style.display="none",document.body.appendChild(n))},2160:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryPlayRingSound=void 0;var r,o=n(15973),a=n(44374),i=(r=n(94128))&&r.__esModule?r:{default:r},l=n(32360),u=null,s=0;t.tryPlayRingSound=function(){var e,t=!1,n=!1,r=!1,c=!1,f=!1,d=(0,o.getCurrentUserID)();(0,a.getConferencesList)().forEach((function(e){var o,a,i;e.isOpen&&e.cgid!=="".concat(d,"&").concat(d)&&(o=e.isOpenedBy(d),a=e.isParticipant(d),i=e.isWaiting(d),o||a||e.isIgnored(d)||e.haveJoinedOrIgnoredBefore(d)?i&&(0,l.isConferenceAudioPublished)(e.room)?r=!0:a&&(n=!0,c=e.latestAction&&e.latestAction.isJoin,f=e.latestAction&&e.latestAction.isLeave):t=!0)})),t&&!n||r?(e=r,u=u||setInterval((function(){s++%(e?2:3)!=0&&i.default.call("sound.play","ring")}),1e3)):(u&&(clearInterval(u),u=null),c&&i.default.call("sound.play","jointone"),f&&i.default.call("sound.play","leavetone"))}},91731:(e,t)=>{"use strict";function n(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function r(e,t,n){var r=e;if(t.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object");t.set(e,n)}function o(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function a(e,t,n){if((t=l(e,t,"set")).set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function i(e,t){return(t=l(e,t,"get")).get?t.get.call(e):t.value}function l(e,t,n){if(t.has(e))return t.get(e);throw new TypeError("attempted to "+n+" private field on non-instance")}Object.defineProperty(t,"__esModule",{value:!0}),t.ConferenceParticipant=void 0;var u=new WeakMap,s=new WeakMap,c=new WeakMap,f=function(){function e(t){var a;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");o(this,"id",void 0),o(this,"self",void 0),o(this,"role",void 0),o(this,"joinTime",void 0),o(this,"streams",{audio:null,video:null}),r(this,u,{writable:!0,value:"video"}),o(this,"data",{}),r(this,s,{writable:!0,value:{audio:!1,video:!1,screen:!1}}),r(this,c,{writable:!0,value:void 0}),this.id=t.id,this.self=!!t.self,this.role=null!=(a=t.role)?a:"member",this.joinTime=null!=(a=t.joinTime)?a:Date.now(),this.data=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t.data)}var t,l;return t=e,(l=[{key:"isPresenter",get:function(){return"presenter"===this.role}},{key:"audioStream",get:function(){return this.streams.audio}},{key:"videoStream",get:function(){return this.streams.video}},{key:"videoType",get:function(){return i(this,u)}},{key:"publicationState",get:function(){return i(this,s)}},{key:"hasAudio",get:function(){return i(this,s).audio}},{key:"hasVideo",get:function(){return i(this,s).video}},{key:"hasScreencast",get:function(){return i(this,s).screen}},{key:"hasVideoOrScreencast",get:function(){return this.hasVideo||this.hasScreencast}},{key:"onStreamChange",set:function(e){a(this,c,e)}},{key:"getData",value:function(e){return void 0===e?this.data:this.data[e]}},{key:"setData",value:function(e){Object.assign(this.data,e)}},{key:"updateStream",value:function(e,t){t=t||e.getTracks()[0].kind;var n,r=this.streams[t];return r!==e&&(this.streams[t]=e,t="audio"===t?"audio":i(this,u),null!=(n=i(this,c))&&n.call(this,{id:this.id,stream:e,type:r?"update":"add",mediaType:t,participant:this}),!0)}},{key:"removeStream",value:function(e,t){if(!this.streams[t])return!1;var n="audio"===t?"audio":i(this,u);return(this.streams[t]=null)!=(t=i(this,c))&&t.call(this,{id:this.id,stream:e,type:"stop",mediaType:n,participant:this}),!0}},{key:"switchVideoType",value:function(e){var t;i(this,u)!==e&&(a(this,u,e),null!=(t=i(this,c))&&t.call(this,{id:this.id,stream:this.videoStream,type:"update",mediaType:e,participant:this}))}},{key:"isPublished",value:function(e){return!!i(this,s)[e]}},{key:"updatePublicationState",value:function(e){var t=this.publicationState,n=void 0===(n=e.audio)?t.audio:n,r=void 0===(r=e.video)?t.video:r,o=void 0===(o=e.screen)?t.screen:o;return(t.audio!==n||t.video!==r||t.screen!==o)&&(Object.assign(i(this,s),e),!0)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,l),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.ConferenceParticipant=f},73630:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.closeConferenceWindow=f,t.isOpenedConferenceWindow=function(e){return c.nwc&&(!e||c.cgid===e)},t.openConferenceWindow=d;var r=u(n(94128)),o=u(n(65286)),a=n(10088),i=n(99838),l=n(15973);function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c={nwc:null,cgid:null,room:null,eventIds:null};function f(e){if(!e||c.cgid===e){if(c.cgid=null,c.nwc)try{c.nwc.invoke("conferenceWindow.forceClose")}catch(t){DEBUG&&console.error('Cannot close conference window "'.concat(e,'".'))}c.nwc=null}}function d(e,t,n){var u;c.cgid===e?c.nwc.bridge&&e!=="".concat((0,l.getCurrentUserID)(),"&").concat((0,l.getCurrentUserID)())&&c.nwc.invoke("conferenceWindow.showAndFocus"):(c.cgid&&f(),(n=r.default.call("nwc.openWindowAndCreateNwc","conference",{title:n,closeConfirm:!0,backgroundColor:(0,i.isDarkThemeMode)()?"#343434":"#ececec",minWidth:500,minHeight:300,overlayIcon:"conference-win.png",urlParams:{conferenceGid:e,conferenceRoom:t}})).once("destroy",(function(){c.eventIds&&(o.default.off.apply(o.default,function(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(c.eventIds)),c.eventIds=null)})),c.eventIds=[],n.registerInvokeTarget("conference",{onConferenceChange:function(){var e=a.onConferenceChange.apply(void 0,arguments);return c.eventIds.push(e),e},onConferenceServerStatusChange:function(){var e=a.onConferenceServerStatusChange.apply(void 0,arguments);return c.eventIds.push(e),e}}),u=(0,a.onConferenceServerStatusChange)(e,(function(t){t.isClosed&&f(e)})),c.eventIds.push(u),c.nwc=n,c.cgid=e,c.room=t)}DEBUG&&(n.g.$closeConferenceWindow=f,n.g.$openConferenceWindow=d,n.g.$conferenceWindowInfo=c)},63132:(e,t,n)=>{"use strict";function r(e){l.has(e)&&(l.delete(e),u&&!l.size&&(clearInterval(u),u=null))}Object.defineProperty(t,"__esModule",{value:!0}),t.updateConferenceServerConnection=void 0;var o=n(32360),a=n(57485),i=n(15973),l=new Map,u=null,s=function(e){var t=e.room,n=e.cgid;if(!t)return DEBUG&&console.warn('Update conference server connection failed, the "room" must be provide.'),r(n),!1;if(e.isJoinedOnOtherDevice((0,i.getCurrentUserID)()))return!1;var c=(0,o.getConferenceServer)(t);return(0,i.isUserOnline)()&&(0,a.isJoinedConference)(e)?(c.isReady&&c.failuresCount<10&&(0,o.connectConferenceServer)(e),l.set(e.cgid,e),u=u||setInterval((function(){Array.from(l.values()).forEach(s)}),5e3)):(null!=c&&c.isConnected&&(0,o.disconnectConferenceServer)(t),r(n)),!0};t.updateConferenceServerConnection=s},48251:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createConferenceServer=function(e){return new("srs"===(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"owt")?o.SRSConferenceServer:r.OWTConferenceServer)(e)};var r=n(16836),o=n(47580)},36666:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MEDIA_PUBLISH_TYPES=void 0;var r=n(89848),o=u(n(13109)),a=n(25852),i=u(n(61862)),l=n(78717);function u(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){c(a,r,o,i,l,"next",e)}function l(e){c(a,r,o,i,l,"throw",e)}i(void 0)}))}}function d(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){var r=e;if(t.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object");t.set(e,n)}function g(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function b(e,t,n){if((t=w(e,t,"set")).set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function v(e,t){return(t=w(e,t,"get")).get?t.get.call(e):t.value}function w(e,t,n){if(t.has(e))return t.get(e);throw new TypeError("attempted to "+n+" private field on non-instance")}var O={published:!0,stopped:!1,disabled:"disabled",muted:"muted"},S=(t.MEDIA_PUBLISH_TYPES=O,new WeakMap),_=new WeakMap,C=new WeakMap,E=new WeakMap,P=new WeakMap,k=new WeakMap,j=new WeakMap,x=new WeakMap,M=new WeakMap,T=new WeakMap,I=new WeakMap;n=function(){function e(t){var n=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");g(this,"backend",void 0),g(this,"mode",void 0),g(this,"options",null),y(this,S,{writable:!0,value:o.default.create()}),y(this,_,{writable:!0,value:null}),y(this,C,{writable:!0,value:null}),y(this,E,{writable:!0,value:null}),g(this,"onRemoteStreamChange",null),y(this,P,{writable:!0,value:null}),y(this,k,{writable:!0,value:{audio:!1,video:!1,screen:!1}}),y(this,j,{writable:!0,value:null}),y(this,x,{writable:!0,value:null}),y(this,M,{writable:!0,value:0}),y(this,T,{writable:!0,value:!1}),y(this,I,{writable:!0,value:{}}),this.options=m({},t),v(this,S).onChange=function(e,t){var r;DEBUG&&(r=o.default.create(t),console.collapse("ConferenceServer","tealBg","Status changed","tealPale",'"'.concat(r.name,'"  "').concat(v(n,S).name,'"'),""),console.trace("newStatus",v(n,S)),console.log("oldStatus",r),console.log("conferenceServer",n),console.groupEnd()),null!=(r=v(n,C))&&r.call(n,n,v(n,S).proxy,o.default.create(t).proxy)},this.initOptions()}var t,n,u,c,p,h,w,D;return t=e,(n=[{key:"onStatusChange",set:function(e){b(this,C,e)}},{key:"onParticipantsChange",set:function(e){b(this,E,e)}},{key:"onPublicationChange",set:function(e){b(this,_,e)}},{key:"onError",set:function(e){b(this,P,e)}},{key:"room",get:function(){return this.options.room}},{key:"cgid",get:function(){return this.options.cgid}},{key:"user",get:function(){return this.options.user}},{key:"status",get:function(){return v(this,S).proxy}},{key:"statusName",get:function(){return v(this,S).name}},{key:"statusValue",get:function(){return v(this,S).value}},{key:"isReady",get:function(){return v(this,S).isReady}},{key:"isConnecting",get:function(){return v(this,S).isConnecting}},{key:"isConnected",get:function(){return v(this,S).isConnected}},{key:"idDisconnecting",get:function(){return v(this,S).isDisconnecting}},{key:"idNetworking",get:function(){return v(this,S).isNetworking}},{key:"error",get:function(){return v(this,x)}},{key:"failuresCount",get:function(){return v(this,M)}},{key:"publishState",get:function(){return m({audio:!1,video:!1,screen:!1},v(this,k))}},{key:"isAudioDisabled",get:function(){return this.isMediaDisabled(r.MEDIA_TYPES.audio)}},{key:"isVideoDisabled",get:function(){return this.isMediaDisabled(r.MEDIA_TYPES.video)}},{key:"isScreenDisabled",get:function(){return this.isMediaDisabled(r.MEDIA_TYPES.screen)}},{key:"isAudioPublished",get:function(){return this.isMediaPublished(r.MEDIA_TYPES.audio)}},{key:"isVideoPublished",get:function(){return this.isMediaPublished(r.MEDIA_TYPES.video)}},{key:"isScreencastPublished",get:function(){return this.isMediaPublished(r.MEDIA_TYPES.screen)}},{key:"isVideoOrScreenPublished",get:function(){return this.isVideoPublished||this.isScreencastPublished}},{key:"needPublishVideo",get:function(){return!!this.options.publish.video}},{key:"needPublishScreencast",get:function(){return!!this.options.publish.screen}},{key:"needPublishAudio",get:function(){return!!this.options.publish.audio}},{key:"participantsIds",get:function(){return v(this,j)?d(v(this,j).keys()):[]}},{key:"participantsList",get:function(){return v(this,j)?d(v(this,j).values()):[]}},{key:"getMediaPublishState",value:function(e){return null!=(e=v(this,k)[e])&&e}},{key:"isMediaDisabled",value:function(e){return this.getMediaPublishState(e)===O.disabled}},{key:"isMediaPublished",value:function(e){return this.getMediaPublishState(e)===O.published}},{key:"isMediaMuted",value:function(e){return this.getMediaPublishState(e)===O.muted}},{key:"needPublish",value:function(e){return e?!!this.options.publish[e]:!!(this.options.publish.video||this.options.publish.audio||this.options.publish.screen)}},{key:"updatePublishState",value:function(e){e===O.published?e={audio:O.published,video:O.published,screen:O.published}:e===O.stopped?e={audio:O.stopped,video:O.stopped,screen:O.stopped}:e===r.MEDIA_TYPES.audio?e={audio:O.published}:e===r.MEDIA_TYPES.video?e={video:O.published}:e===r.MEDIA_TYPES.screen&&(e={screen:O.published});var t=this.publishState;Object.assign(v(this,k),e),!v(this,_)||t.audio===v(this,k).audio&&t.video===v(this,k).video&&t.screen===v(this,k).screen||v(this,_).call(this,this,this.publishState,t)}},{key:"initOptions",value:function(){if(!this.options.room)throw new Error('Property "options.room" is required in construct ConferenceServer.');if(!this.options.user)throw new Error('Property "options.user" is required in construct ConferenceServer.');if(!this.options.cgid)throw new Error('Property "options.cgid" is required in construct ConferenceServer.');this.options.publish=m({audio:O.published,video:O.stopped,screen:O.stopped},this.options.publish)}},{key:"disconnect",value:(D=f((function*(){b(this,x,null),b(this,T,!1),v(this,S).change(o.default.disconnecting);try{return this.isParticipant(this.user)&&(DEBUG&&(console.collapse("ConferenceServer","tealBg","Disconnecting...","tealPale",this.room,""),console.log("ConferenceServer",this),console.groupEnd()),this.removeParticipant(this.user),yield this.disconnectServer()),v(this,S).change(o.default.ready),DEBUG&&(console.collapse("ConferenceServer","tealBg","Disconnected!","tealPale",this.room,""),console.log("ConferenceServer",this),console.groupEnd()),!0}catch(e){b(this,x,e),DEBUG&&(console.collapse("ConferenceServer","tealBg","Disconnect error","redPale",String(e),"red"),console.error("error",e),console.log("ConferenceServer",this),console.groupEnd()),v(this,S).change(o.default.ready)}return!1})),function(){return D.apply(this,arguments)})},{key:"connect",value:(w=f((function*(e){var t=this;e&&Object.assign(this.options.publish,e),e=this.statusValue,b(this,x,null),b(this,j,new Map),v(this,S).change(o.default.connecting);try{return DEBUG&&(console.collapse("ConferenceServer","tealBg","Connecting...","tealPale",this.room,""),console.log("ConferenceServer",this),console.groupEnd()),yield this.connectServer(),b(this,M,0),v(this,S).change(o.default.connected),this.cgid==="".concat(this.user,"&").concat(this.user)&&setTimeout((function(){(0,l.executeCommand)("closeConference",t.cgid,!1)}),1e3),v(this,T)&&(yield this.disconnect()),DEBUG&&(console.collapse("ConferenceServer","tealBg","Connected!","tealPale",this.room,""),console.log("ConferenceServer",this),console.groupEnd()),!0}catch(t){t&&"SDPCODE400"===t.message?(v(this,S).change(o.default.ready),(0,a.showMessager)(i.default.format("conference.message.server_sdp_error"),{type:"warning"})):this.cgid==="".concat(this.user,"&").concat(this.user)&&t.target&&t.target.readyState===WebSocket.CLOSED?(v(this,S).change(e),(0,l.executeCommand)("closeConference",this.cgid,!1)):(b(this,M,+v(this,M)+1),v(this,S).change(e)),b(this,x,t),DEBUG&&(console.collapse("ConferenceServer","tealBg","Connect error","redPale",String(t),"red"),console.error("error",t),console.log("ConferenceServer",this),console.groupEnd())}return!1})),function(e){return w.apply(this,arguments)})},{key:"tryDisconnect",value:function(){return this.isConnected?this.disconnect():(this.isConnecting&&b(this,T,!0),Promise.resolve())}},{key:"getParticipant",value:function(e){var t;return null==(t=v(this,j))?void 0:t.get(e)}},{key:"isParticipant",value:function(e){var t;return null!=(t=null==(t=v(this,j))?void 0:t.has(e))&&t}},{key:"clearParticipant",value:function(){v(this,j).clear()}},{key:"isParticipantMuted",value:function(e){return e===this.user?!this.isAudioPublished:null}},{key:"tryMute",value:(h=f((function*(e){var t="_isMuting_".concat(e);return v(this,I)[t]?"busy":(v(this,I)[t]=!0,e=yield this.mute(e),v(this,I)[t]=!1,e)})),function(e){return h.apply(this,arguments)})},{key:"tryUnmute",value:(p=f((function*(e){var t="_isMuting_".concat(e);return v(this,I)[t]?"busy":(v(this,I)[t]=!0,e=yield this.unmute(e),v(this,I)[t]=!1,e)})),function(e){return p.apply(this,arguments)})},{key:"tryPublish",value:(c=f((function*(e,t){var n="_isPublishing_".concat(e);if(v(this,I)[n])return"busy";if(this.isMediaPublished(e))return!1;if(e===r.MEDIA_TYPES.screen&&this.hasMediaStream(r.MEDIA_TYPES.screen))return"othersAlreadyShareScreen";v(this,I)[n]=!0;try{var o=yield this.publish(e,t);return v(this,I)[n]=!1,o}catch(e){throw v(this,I)[n]=!1,e}})),function(e,t){return c.apply(this,arguments)})},{key:"tryUnpublish",value:(u=f((function*(e){var t="_isPublishing_".concat(e);return v(this,I)[t]?"busy":(v(this,I)[t]=!0,e=yield this.unpublish(e),v(this,I)[t]=!1,e)})),function(e){return u.apply(this,arguments)})},{key:"hasVideoOrScreencastStream",get:function(){return this.hasMediaStream([r.MEDIA_TYPES.screen,r.MEDIA_TYPES.video])}},{key:"hasScreencast",get:function(){return this.hasMediaStream(r.MEDIA_TYPES.screen)}},{key:"publishAudio",value:function(){return this.tryPublish(r.MEDIA_TYPES.audio)}},{key:"publishVideo",value:function(){return this.tryPublish(r.MEDIA_TYPES.video)}},{key:"publishScreencast",value:function(e){return this.tryPublish(r.MEDIA_TYPES.screen,e)}},{key:"unpublishAudio",value:function(){return this.tryUnpublish(r.MEDIA_TYPES.audio)}},{key:"unpublishVideo",value:function(){return this.tryUnpublish(r.MEDIA_TYPES.video)}},{key:"unpublishScreencast",value:function(){return this.tryUnpublish(r.MEDIA_TYPES.screen)}},{key:"getVideoMediaStream",value:function(){return this.getMediaStream(r.MEDIA_TYPES.video)}},{key:"getScreencastMediaStream",value:function(){return this.getMediaStream(r.MEDIA_TYPES.screen)}},{key:"addParticipant",value:function(e,t){var n;return"object"===s(e)&&(e=(n=[e.id,e])[0],t=n[1]),v(this,j).set(+e,t),null!=(n=v(this,E))&&n.call(this,this,"add"),t}},{key:"removeParticipant",value:function(e){v(this,j).delete(e),null!=(e=v(this,E))&&e.call(this,this,"remove")}},{key:"updateParticipant",value:function(e,t){v(this,j).set(e,t),null!=(e=v(this,E))&&e.call(this,this,"update")}},{key:"emitError",value:function(e){for(var t,n=arguments.length,r=new Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];null!=(t=v(this,P))&&t.call.apply(t,[this,this,e].concat(r))}},{key:"getLocalAudioStream",value:function(){return this.getLocalMediaStream(r.MEDIA_TYPES.audio)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),t.default=n},13109:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n=new(((n=n(60811))&&n.__esModule?n:{default:n}).default)(["ready","connecting","connected","disconnecting"],"ready",["ready > connecting","connecting > connected","connecting > ready","connected > disconnecting","disconnecting > ready","disconnecting > connected"],{isReady:function(){return this.is("ready")},isConnecting:function(){return this.is("connecting")},isConnected:function(){return this.is("connected")},isDisconnecting:function(){return this.is("disconnecting")},isNetworking:function(){return this.isDisconnecting||this.isConnecting}}),t.default=n},32360:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unpublishVideo=t.unpublishScreencast=t.unmuteConference=t.publishVideo=t.publishScreencast=t.muteConference=t.isConferenceVideoPublished=t.isConferenceVideoOrScreenPublished=t.isConferenceVideoDisabled=t.isConferenceServerConnected=t.isConferenceScreencastPublished=t.isConferenceAudioPublished=t.isConferenceAudioDisabled=t.hasShownConferenceVideoOrScreen=t.hasShowConferenceScreen=t.getVideoMediaStream=t.getScreencastMediaStream=t.getConferenceServerStatusName=t.getConferenceServer=t.disconnectConferenceServer=t.connectConferenceServer=void 0,t.updateOthersPublicationState=y;var r=n(48251),o=n(44374),a=n(15973),i=n(10088),l=n(89174);function u(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t,n){var r=(0,o.getConferenceByRoom)(e.room);if((0,o.updateConferenceAction)({type:"server",data:{operation:"statusChange",serverStatus:t.name,oldServerStatus:n.name}},r),e.idDisconnecting&&!e.isParticipant((0,a.getCurrentUserID)())&&(0,o.updateConferenceAction)({type:l.ConferenceActionTypes.close},r),"connected"===t.name){var s,c=(0,a.getCurrentUserID)(),f=new Map,d=(r.actions.forEach((function(e){e.user!==c&&e.type===l.ConferenceActionTypes.publish&&f.set(e.user,e)})),u(f.values()));try{for(d.s();!(s=d.n()).done;){var p=s.value;y(r.room,p.user,p.data)}}catch(e){d.e(e)}finally{d.f()}}(0,i.emitConferenceServerStatusChange)(r,t,n,e)}function f(e,t){var n=(0,o.getConferenceByRoom)(e.room);(0,o.updateConferenceAction)({type:"server",participants:Array.from(e.participantsIds),data:{operation:"participantsChange",action:t}},n)}function d(e,t,n){(0,i.emitConferenceServerPublicationChange)(e,t,n)}function p(e,t){e=(0,o.getConferenceByRoom)(e.room);for(var n=arguments.length,r=new Array(2<n?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];(0,o.updateConferenceAction)({type:l.ConferenceActionTypes.server,data:{operation:"error",errorType:t,params:r}},e)}var h={},m=function(e){if(!(i=h[e])){var t=(0,a.getCurrentUser)(),n=t.conference;if(!n)throw new Error("Owt config is required for current user.");var i,l=(0,o.getConferenceByRoom)(e);(i=(0,r.createConferenceServer)({room:e,cgid:null!=(l=null==l?void 0:l.cgid)?l:process.env.conferenceGid,user:t.id,api:n.api,rtc:n.rtc,host:n.host,https:n.https,backend:n.backend},n.backend)).onStatusChange=c,i.onParticipantsChange=f,i.onPublicationChange=d,i.onError=p,h[e]=i}return i};function y(e,t,n){!(e=m(e))||"srs"!==e.backend||(t=e.getParticipant(t))&&t.updatePublicationState(n)&&e.updateParticipant(t.id,t)}t.getConferenceServer=m,t.getConferenceServerStatusName=function(e){if((e="string"==typeof e?(0,o.getChatConference)(e)||(0,o.getConferenceByRoom)(e):e).room)return(e=m(e.room))&&e.statusName},t.isConferenceServerConnected=function(e){return!(!(e="string"==typeof e?(0,o.getChatConference)(e)||(0,o.getConferenceByRoom)(e):e).isOpen||!e.room)&&(e=m(e.room))&&e.isConnected},t.connectConferenceServer=function(e){if(!(e="string"==typeof e?(0,o.getChatConference)(e)||(0,o.getConferenceByRoom)(e):e))return Promise.reject(new Error("Connect to conference server failed, conference must be provide."));if(!e.isOpen)return Promise.reject(new Error("Connect to conference server failed, conference status is no open."));if(!e.isParticipant((0,a.getCurrentUserID)()))return Promise.reject(new Error("Connect to conference server failed, current user is not participant."));var t=e.room;if(!t)return Promise.reject(new Error("Connect to conference server failed, conference.room is required."));if((t=m(t)).isConnected)return Promise.resolve();var n=(0,a.getCurrentUserID)();return n=e.isOpenedBy(n)&&!e.haveJoinedBefore(n)?e.publishOptions:null,t.connect(n)},t.disconnectConferenceServer=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!h[e])return Promise.resolve();var n=m(e);return n?(t&&delete h[e],n.tryDisconnect()):Promise.reject(new Error('Connect to conference server failed, cannot found a server with room "'.concat(e,'".')))},t.isConferenceAudioPublished=function(e){return!!e&&m(e).isAudioPublished},t.isConferenceVideoPublished=function(e){return!!e&&m(e).isVideoPublished},t.isConferenceVideoOrScreenPublished=function(e){return!!e&&m(e).isVideoOrScreenPublished},t.hasShownConferenceVideoOrScreen=function(e){return!!e&&((e=m(e)).isVideoOrScreenPublished||e.hasVideoOrScreencastStream)},t.hasShowConferenceScreen=function(e){return!!e&&((e=m(e)).isScreencastPublished||e.hasScreencast)},t.isConferenceAudioDisabled=function(e){return!!e&&m(e).isAudioDisabled},t.isConferenceVideoDisabled=function(e){return!!e&&m(e).isVideoDisabled},t.isConferenceScreencastPublished=function(e){return!!e&&m(e).isScreencastPublished},t.muteConference=function(e){return m(e).mute()},t.unmuteConference=function(e){return m(e).unmute()},t.publishVideo=function(e){return m(e).publishVideo()},t.publishScreencast=function(e){return m(e).publishScreencast()},t.unpublishVideo=function(e){return m(e).unpublishVideo()},t.unpublishScreencast=function(e){return m(e).unpublishScreencast()},t.getVideoMediaStream=function(e){return!!e&&m(e).getVideoMediaStream()},t.getScreencastMediaStream=function(e){return!!e&&m(e).getScreencastMediaStream()}},56614:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n=new(((n=n(60811))&&n.__esModule?n:{default:n}).default)(["closed","creating","open","closing","createFail"],"closed",["closed > creating","creating > open","creating > createFail","open > closed","open > closing","closing > closed","closed > open","createFail > creating","createFail > closed"],{isOpen:function(){return this.is("open")},isClosed:function(){return this.is("closed")},isCreating:function(){return this.is("creating")},isCreateFail:function(){return this.is("createFail")},isClosing:function(){return this.is("closing")}}),t.default=n},44374:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateConferenceAction=t.updateConference=t.haveJoinedConference=t.getJoinedConference=t.getConferencesList=t.getConferenceByRoom=t.getChatConference=t.deleteConference=t.clearConferencesStore=void 0;var r=u(n(83047)),o=u(n(89174)),a=n(10088),i=n(15973),l=u(n(74101));function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e){var t=h.get(e);return t?(h.delete(e),m.delete(t.room),t):null}function f(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=h.get(e);return n||((t=t&&l.default.getChat(e))?((n=r.default.create({cgid:e,isOne2One:t.isOne2One,name:t.name})).onStatusChange=a.emitConferenceStatusChange.bind(null,n),n.onAddActions=a.emitConferenceAddActions.bind(null,n),h.set(e,n),n):null)}function d(e){var t=Array.from(h.values());return e?t.filter(e):t}function p(){return d((function(e){return e.isCreating||e.isOpen&&e.isParticipant((0,i.getCurrentUserID)())}))[0]}var h=new Map,m=new Map;t.deleteConference=c,t.clearConferencesStore=function(e){h.forEach((function(t,n){(n=c(n))&&e&&e(n)}))},t.getChatConference=f,t.getConferencesList=d,t.getConferenceByRoom=function(e){var t=m.get(e);return t?f(t):((t=Array.from(h.values()).find((function(t){return t.room===e})))&&m.set(e,t.cgid),t)},t.updateConference=function(e,t){var n;if(e.cgid)return(n=f(e.cgid)).update(e),null!=t&&t(n),(0,a.emitConferenceChange)(n),n},t.updateConferenceAction=function(e,t){var n=[],r=(0,i.getCurrentUser)();return e instanceof o.default||(e.actions&&n.push.apply(n,function(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.actions.map((function(e){return new o.default(e)})))),null==e.user&&(e.user=r.id),null==e.date&&(e.date=r.serverNowTime),e=new o.default(e),n.push(e)),t?(t.addActions(n),(0,a.emitConferenceChange)(t),e):(DEBUG&&console.warn('Cannot found a conference with room "'.concat(e.room||t,'".')),!1)},t.getJoinedConference=p,t.haveJoinedConference=function(){return!!p()},DEBUG&&(n.g.$conferences=h)},14227:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUsedIndependentConferenceWindow=t.initConferenceUI=t.getParticipantsInfo=t.getParticipantNames=t.getConferenceStatusText=t.getConferenceStatusName=t.getConferenceStatusMessage=t.getConferenceIcon=t.getConferenceColor=t.canContinueToInvite=void 0;var r,o,a=T(n(23848)),i=n(10088),l=n(98649),u=n(44374),s=n(78717),c=n(57485),f=n(42012),d=T(n(61862)),p=n(41832),h=n(15973),m=n(63132),y=n(32360),g=T(n(75738)),b=T(n(84431)),v=n(33417),w=T(n(74101)),O=n(13347),S=n(2160),_=n(12549),C=T(n(94128)),E=n(73630),P=T(n(65286)),k=T(n(74160)),j=n(89174),x=n(68271),M=n(89848);function T(e){return e&&e.__esModule?e:{default:e}}function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function A(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||N(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function L(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function F(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){L(a,r,o,i,l,"next",e)}function l(e){L(a,r,o,i,l,"throw",e)}i(void 0)}))}}function U(e){if((0,c.isIgnoredConference)(e))return"ignored";if((0,c.isConferenceIncoming)(e))return"incoming";if((0,c.isJoinedConference)(e)&&e.room){if(e.isJoinedOnOtherDevice((0,h.getCurrentUserID)()))return"joinedOnOtherDevice";var t=(0,y.getConferenceServer)(e.room);if(t)return t.isReady&&1<t.failuresCount&&t.error?"server_error":"server_".concat(t.statusName)}return e.statusName}function z(e,t){return r[t||U(e)]}function W(e,t){return o[t||U(e)]}function H(e,t){return"server_connected"===(t=t||U(e))&&!e.isOne2One&&(!!(t=w.default.getChat(e.cgid)).isSystem||t.members.size>Math.max(e.invitee.size+1,e.participantCount))}function V(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r=[],o=(0,h.getCurrentUserID)();return e.forEach((function(e){var t;(e=e instanceof g.default?e:b.default.getMember(e))&&(e=(t=e.id===o)?d.default.string("conference.participants.me"):e.displayName,n&&t?r.unshift(e):r.push(e))})),t&&r.length>t?r.slice(0,t):r}function G(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:20,n=d.default.string("conference.participants.joinPunctuation"),r=e.length;return r<2?V(e).join(n):r<=t?"".concat(V(e).join(n)," ").concat(d.default.format("conference.participants.totalFormat",r)):"".concat(V(e,t).join(n)," ").concat(d.default.format("conference.participants.ellipsisTotalFormat",r))}function q(e,t){var n;return"incoming"===(t=t||U(e))?(n=b.default.getMemberOrTemp(e.openedBy),d.default.format("conference.status.incoming",{openedBy:n?n.displayName:"",participantsCount:e.participantCount})):d.default.string("conference.status.".concat(t))}(n=r=r||{}).creating="yellow",n.closed="blue",n.incoming="blue",n.open="blue",n.createFail="red",n.ignored="blue",n.closing="blue",n.server_ready="yellow",n.server_connecting="yellow",n.server_connected="green",n.server_disconnecting="yellow",n.server_error="red",n.muted="yellow",n.offline="red",n.joinedOnOtherDevice="green",(n=o=o||{}).creating="phone-settings",n.closed="phone",n.incoming="phone-incoming",n.open="phone-in-talk",n.createFail="phone-alert",n.ignored="phone-return",n.closing="phone-off",n.server_ready="phone-settings",n.server_connecting="phone-settings",n.server_connected="phone-in-talk",n.server_disconnecting="phone-settings",n.server_error="phone-alert",n.muted="sprite-member-mute",n.offline="phone-alert",n.joinedOnOtherDevice="phone-forward";var $=C.default.isType("electron"),K=(t.isUsedIndependentConferenceWindow=$,t.getConferenceStatusName=U,t.getConferenceColor=z,t.getConferenceIcon=W,t.canContinueToInvite=H,t.getParticipantNames=V,t.getParticipantsInfo=G,t.getConferenceStatusText=q,function(){var e=F((function*(e){function t(){var t=b.default.getMember(e.openedBy);return t instanceof g.default?t.displayName:""}"string"==typeof e&&(e=(0,u.getChatConference)(e));var n,r,o=U(e);switch(e.isStored||(r=(n=R(yield(0,a.default)(b.default.asyncGetMembers([].concat(A(e.invitee),[e.openedBy]))),2))[0],n=n[1],!r&&n||console.error("Get members from remote failed.",r),n&&(e.isStored=!0)),o){case"incoming":f=d.default.format("conference.message.incoming",{openedBy:t(),participantsInfo:G((0,c.getConferenceParticipantMembers)(e))});break;case"open":f=d.default.format("conference.message.open",{participantsInfo:G((0,c.getConferenceParticipantMembers)(e))});break;case"server_connected":var i=(0,y.getConferenceServer)(e.room),l=(0,c.getConferenceParticipantMembers)(e),s=l.filter((function(e){return!i.isParticipant(e.id)})),f=d.default.format("conference.message.".concat(o),{openedBy:t(),participantsInfo:G(l),connectionInfo:s.length?d.default.format("conference.connectionInfoFormat",G(s)):""});break;default:f=d.default.string("conference.message.".concat(o))}return e.isCreateFail&&e.latestAction.error?f="".concat(f," (").concat(e.latestAction.error.message||d.default.error(e.latestAction.error),")"):"server_error"===o&&(f="CONFERENCE_NO_MIC"===(r=(0,y.getConferenceServer)(e.room).error).code?"".concat(f," (").concat(d.default.string("conference.audioDisabledMessage"),")"):"".concat(f," (").concat(d.default.error(r),")")),f}));return function(t){return e.apply(this,arguments)}}());t.getConferenceStatusMessage=K,t.initConferenceUI=function(){(0,s.registerCommand)("createConference",(function(e,t,n,r,o){return e=e.options,(!t&&e&&e.cgid&&(t=e.cgid),void 0===r&&e&&e.confirm&&(r=e.confirm),e=(0,h.getCurrentUser)()).config.useInitConference&&t==="".concat(e.id,"&").concat(e.id)||(0,x.setActiveChat)(t),r&&"false"!==r?(e=w.default.getChat(t).name,(0,s.executeCommand)("showConfirm",d.default.format("conference.createConfirmMessage",{name:e})).then((function(e){if(e)return navigator.mediaDevices.getUserMedia({audio:!0}).catch((function(e){return console.error("Get user Media error",e),new MediaStream([(0,M.createSilenceAudioTrack)()])})).then((function(){return(0,f.createConference)(t,n,o)}))}))):navigator.mediaDevices.getUserMedia({audio:!0}).catch((function(e){return console.error("Get user Media error",e),new MediaStream([(0,M.createSilenceAudioTrack)()])})).then((function(){return(0,f.createConference)(t,n,o)}))}),{apiLevel:5}),(0,s.registerCommand)("inviteConference",(function(e,t,n){return e=e.options,t=t||e.cgid,(0,f.inviteConference)(t,n)})),(0,s.registerCommand)("joinConference",(function(e,t){return e=e.options,!t&&e&&e.cgid&&(t=e.cgid),navigator.mediaDevices.getUserMedia({audio:!0}).catch((function(e){return console.error("Get user Media error",e),new MediaStream([(0,M.createSilenceAudioTrack)()])})).then((function(){return(0,f.joinConference)(t)})).catch((function(e){(0,s.executeCommand)("showMessager",d.default.error(e),{type:"danger"})}))}),{apiLevel:5}),(0,s.registerCommand)("leaveConference",(function(e,t){return e=e.options,!t&&e&&e.cgid&&(t=e.cgid),(0,f.leaveConference)(t)}),{apiLevel:5}),(0,s.registerCommand)("tryDisconnectConference",(function(e,t){if(e=e.options,!t&&e&&e.cgid&&(t=e.cgid),(0,c.canUseConference)())try{var n=(0,u.getChatConference)(t);(0,u.updateConferenceAction)({type:j.ConferenceActionTypes.leave},n),(0,y.disconnectConferenceServer)(n.room)}catch(e){}}),{apiLevel:5}),(0,s.registerCommand)("ignoreConference",(function(e,t){return e=e.options,!t&&e&&e.cgid&&(t=e.cgid),(0,f.ignoreConference)(t)}),{apiLevel:5}),(0,s.registerCommand)("unignoreConference",(function(e,t){return e=e.options,!t&&e&&e.cgid&&(t=e.cgid),(0,f.unignoreConference)(t)}),{apiLevel:5}),(0,s.registerCommand)("cancelConference",(function(e,t){return e=e.options,!t&&e&&e.cgid&&(t=e.cgid),(0,f.cancelConference)(t)}),{apiLevel:5}),(0,s.registerCommand)("closeConference",(function(e,t,n){return e=e.options,!t&&e&&e.cgid&&(t=e.cgid),(n=void 0===n&&e&&e.confirm?e.confirm:n)?(e=w.default.getChat(t),(0,s.executeCommand)("showConfirm",d.default.string(e.isOne2One?"conference.hangupConfirmTitle":"conference.closeConfirmMessage"),{title:e.isOne2One?null:d.default.string("conference.closeConfirmTitle")}).then((function(e){if(e)return(0,f.closeConference)(t)}))):(0,f.closeConference)(t)}),{apiLevel:5}),(0,s.registerCommand)("muteConference",function(){var e=F((function*(e,t){return e=e.options,!t&&e&&(t=e.cgid||e.room),e=(0,u.getChatConference)(t)||(0,u.getConferenceByRoom)(t),"busy"===(t=yield(0,y.muteConference)(e.room))&&(0,s.executeCommand)("showMessager",d.default.string("common.busyTip"),{type:"info"}),t}));return function(t,n){return e.apply(this,arguments)}}(),{apiLevel:5}),(0,s.registerCommand)("unmuteConference",function(){var e=F((function*(e,t){return e=e.options,!t&&e&&(t=e.cgid||e.room),e=(0,u.getChatConference)(t)||(0,u.getConferenceByRoom)(t),"busy"===(t=yield(0,y.unmuteConference)(e.room))&&(0,s.executeCommand)("showMessager",d.default.string("common.busyTip"),{type:"info"}),t}));return function(t,n){return e.apply(this,arguments)}}(),{apiLevel:5}),(0,s.registerCommand)("publishConferenceVideo",function(){var e=F((function*(e,t){e=e.options,!t&&e&&(t=e.cgid||e.room),e=(0,u.getChatConference)(t)||(0,u.getConferenceByRoom)(t);try{var n=yield(0,y.publishVideo)(e.room);return"busy"===n?(0,s.executeCommand)("showMessager",d.default.string("common.busyTip"),{type:"info"}):"videoNotAllowedWithScreen"===n&&(0,s.executeCommand)("showMessager",d.default.string("conference.videoNotAllowedWithScreen"),{type:"info"}),n}catch(e){(0,s.executeCommand)("showMessager",d.default.format("conference.error.publishVideo",{error:e}),{type:"error"})}}));return function(t,n){return e.apply(this,arguments)}}(),{apiLevel:5}),(0,s.registerCommand)("unpublishConferenceVideo",function(){var e=F((function*(e,t){return e=e.options,!t&&e&&(t=e.cgid||e.room),e=(0,u.getChatConference)(t)||(0,u.getConferenceByRoom)(t),"busy"===(t=yield(0,y.unpublishVideo)(e.room))&&(0,s.executeCommand)("showMessager",d.default.string("common.busyTip"),{type:"info"}),t}));return function(t,n){return e.apply(this,arguments)}}(),{apiLevel:5}),(0,s.registerCommand)("publishConferenceScreencast",function(){var e=F((function*(e,t,n){var r;e=e.options,!t&&e&&(t=e.cgid||e.room),e=(0,u.getChatConference)(t)||(0,u.getConferenceByRoom)(t);try{if(!n&&C.default.env.isOSX&&C.default.has("displayMedia.isGrantedScreenAccess")&&!C.default.call("displayMedia.isGrantedScreenAccess","screen"))return r=[{label:d.default.string("common.systemPreferneces"),click:function(){C.default.call("os.openMacScreenCapturePreferences")}}],DEBUG&&r.push({label:"Skip Permission Check",click:function(){return(0,s.executeCommand)("publishConferenceScreencast",t,!0)}}),void(0,s.executeCommand)("showMessager",d.default.string("conference.shareScreen.noPermission"),{type:"danger",actions:r});var o=yield(0,y.publishScreencast)(e.room);return"busy"===o?(0,s.executeCommand)("showMessager",d.default.string("common.busyTip"),{type:"info"}):"othersAlreadyShareScreen"===o&&(0,s.executeCommand)("showMessager",d.default.string("conference.othersAlreadyShareScreen"),{type:"info"}),o}catch(e){e&&"USER_CANCELED"!==e.code&&(0,s.executeCommand)("showMessager",d.default.error(e),{type:"danger"})}}));return function(t,n,r){return e.apply(this,arguments)}}(),{apiLevel:5}),(0,s.registerCommand)("unpublishConferenceScreencast",function(){var e=F((function*(e,t){return e=e.options,!t&&e&&(t=e.cgid||e.room),e=(0,u.getChatConference)(t)||(0,u.getConferenceByRoom)(t),"busy"===(t=yield(0,y.unpublishScreencast)(e.room))&&(0,s.executeCommand)("showMessager",d.default.string("common.busyTip"),{type:"info"}),t}));return function(t,n){return e.apply(this,arguments)}}(),{apiLevel:5}),(0,s.registerCommand)("showConferenceCreateDialog",(function(e,t){return e=e.options,!t&&e&&(t=e.cgid.cgid),(0,_.showConferenceCreateDialog)(t)}),{apiLevel:5}),(0,s.registerCommand)("showConferenceInviteDialog",(function(e,t){return e=e.options,t=t||e.cgid,e=(0,u.getChatConference)(t),e=A(new Set([].concat(A(e.invitee),A(e.participants)))),(0,_.showConferenceInviteDialog)(t,e)})),$&&(0,s.registerCommand)("openConferenceWindow",(function(e,t){(0,E.openConferenceWindow)(t)})),(0,l.addContextMenuCreator)("conference.actions",(function(e){var t=e.conference,n=(e=e.independentMode,(0,h.getCurrentUserID)());if(t.isJoinedOnOtherDevice(n))return[];var r,o,a,i=[],l=w.default.getChat(t.cgid);return!e&&(0,y.isConferenceServerConnected)(t)&&((r=(0,y.getConferenceServer)(t.room)).isAudioPublished?i.push({id:"muteConference",label:d.default.string("conference.mute"),url:"xxc://muteConference/".concat(t.cgid),icon:"microphone"}):r.isAudioDisabled?i.push({id:"unmuteConference",disabled:!0,label:d.default.string("conference.muted"),icon:"microphone-off",_hoverLabel:d.default.string("conference.audioDisabled"),_color:"red",_hint:d.default.string("conference.audioDisabledMessage")}):i.push({id:"unmuteConference",label:d.default.string("conference.muted"),url:"xxc://unmuteConference/".concat(t.cgid),icon:"microphone-off",_hoverLabel:d.default.string("conference.unmute"),_color:"red"}),o=r.isScreencastPublished,a=r.hasScreencast,r.isVideoPublished?i.push({id:"publishConferenceVideo",label:d.default.string("conference.videoPublishing"),url:"xxc://unpublishConferenceVideo/".concat(t.cgid),icon:"video-off",_hoverLabel:d.default.string("conference.unpublishVideo")}):i.push({id:"publishConferenceVideo",label:d.default.string("conference.publishVideo"),url:"xxc://publishConferenceVideo/".concat(t.cgid),icon:"video",_hoverLabel:d.default.string("conference.publishVideo")}),o?i.push({id:"publishConferenceScreencast",label:d.default.string("conference.screenSharing"),url:"xxc://unpublishConferenceScreencast/".concat(t.cgid),icon:"icon-svg-stop-screen-share",_hoverLabel:d.default.string("conference.unpublishScreencast"),_color:"yellow"}):a?i.push({id:"publishConferenceScreencast",disabled:!0,label:d.default.string("conference.shareScreen"),icon:"icon-svg-screen-share",url:"xxc://publishConferenceScreencast/".concat(t.cgid),_hint:d.default.string("conference.othersAlreadyShareScreen")}):i.push({id:"publishConferenceScreencast",label:d.default.string("conference.shareScreen"),url:"xxc://publishConferenceScreencast/".concat(t.cgid),icon:"icon-svg-screen-share",_hoverLabel:d.default.string("conference.shareScreen")})),t.canJoin(n)?i.push({id:"joinConference",label:d.default.string(t.haveJoinedBefore(n)?"conference.rejoin":"conference.join"),url:"xxc://joinConference/".concat(t.cgid),icon:"phone-return",_primary:!0,_color:"green"}):t.canLeave(n)&&(e?i.push({id:"openConferenceWindow",label:d.default.string("conference.switchToConferenceWindow"),url:"xxc://openConferenceWindow/".concat(t.cgid),icon:"phone-return",_color:"primary",_primary:!0}):i.push({id:"leaveConference",label:d.default.string("conference.leave"),url:"xxc://leaveConference/".concat(t.cgid),icon:"phone-hangup",_color:t.canClose(n)?"primary":"red",_primary:!0})),t.canIgnore(n)?i.push({id:"ignoreConference",label:d.default.string("conference.ignore"),url:"xxc://ignoreConference/".concat(t.cgid),icon:"phone-off",_primary:!0,_color:"primary"}):t.isIgnored(n)&&i.push({id:"unignoreConference",label:d.default.string("conference.unignore"),url:"xxc://unignoreConference/".concat(t.cgid),icon:"phone-check",_primary:!0,_color:"primary"}),t.canClose(n)&&(e&&(0,E.isOpenedConferenceWindow)()?i.push({id:"openConferenceWindow",label:d.default.string("conference.switchToConferenceWindow"),url:"xxc://openConferenceWindow/".concat(t.cgid),icon:"phone-return",_color:"primary",_primary:!0}):i.push({id:"closeConference",label:d.default.string(l.isOne2One?"conference.hangup":"conference.close"),url:"xxc://closeConference/".concat(t.cgid,"/?confirm=true"),icon:"location-exit",_primary:!0,_color:"red"})),t.canOpen(n)&&i.push({id:"createConference",label:t.isCreateFail?d.default.string("conference.retryCreate"):d.default.string("conference.create"),url:"xxc://createConference/".concat(t.cgid),icon:"phone",_primary:!0,_color:"primary"}),t.canCancel(n)&&i.push({id:"cancelConference",label:d.default.string("conference.cancel"),url:"xxc://cancelConference/".concat(t.cgid),icon:"phone-cancel",_color:"primary",_primary:!0}),i}),{apiLevel:5}),(0,l.addContextMenuCreator)("chat.toolbar",(function(e){e=e.chat;var t=w.default.getChat(e);if(!(0,c.canUseConference)(e)||t.isArchived||t.isBot)return null;t=null;var n=(0,u.getChatConference)(e);return t=n.isClosed||n.isCreateFail?n.isOne2One?{label:d.default.string("conference.create"),url:"xxc://createConference/".concat(encodeURIComponent(e),"/_/false/audio")}:{label:d.default.string("conference.create"),url:"xxc://showContextMenu/conference.create/".concat(e)}:n.isIgnored((0,h.getCurrentUserID)())?{label:d.default.string("conference.unignore"),url:"xxc://unignoreConference/".concat(e)}:H(n)?{url:"xxc://showConferenceInviteDialog/".concat(encodeURIComponent(n.cgid)),label:d.default.string("conference.status.open.invite"),icon:"phone-plus text-green"}:{label:d.default.string("conference.status.open"),disabled:!0},(t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:"createConference",order:1,icon:"".concat(W(n)," text-").concat(n.isCreating?"gray":z(n))},t))?[t]:null}),{skipAddDivider:!0}),(0,l.addContextMenuCreator)("member",(function(e){e="object"===I(e=e.member)?e.id:e;var t=(0,h.getCurrentUserID)();return e===t?null:(e=(0,v.getOne2OneChatGid)(e,t),(0,c.canUseConference)(e)&&((t=(0,u.getChatConference)(e)).isClosed||t.isCreateFail)?["-",{id:"createConference",order:1,label:d.default.string("conference.create"),url:"xxc://createConference/".concat(encodeURIComponent(e),"/_/false/audio")}]:null)})),(0,l.addContextMenuCreator)("conference.create",(function(e){e=R(e.params,1)[0];var t=w.default.getChat(e),n=(0,u.getChatConference)(e);return t&&n&&(n.isClosed||n.isCreateFail)?(n=[],t.isOne2One||n.push({id:"startForAll",label:d.default.string("conference.createMenu.startForAll"),url:"xxc://createConference/".concat(encodeURIComponent(e),"/_/false/audio")},{id:"startWithSelections",label:d.default.string("conference.createMenu.startWithSelections"),url:"xxc://showConferenceCreateDialog/".concat(encodeURIComponent(e))}),n):null}),{apiLevel:5}),(0,i.onConferenceStatusChange)((function(e){(0,m.updateConferenceServerConnection)(e);var t=w.default.getChat(e.cgid);t&&t.updateConferenceStatus(e.statusValue)&&w.default.store(t)})),(0,i.onConferenceServerPublicationChange)((function(e,t){(0,f.syncPublicationState)(e.cgid,{audio:!0===t.audio,video:!0===t.video,screen:!0===t.screen})})),(0,i.onConferenceAddActions)((function(e,t){var n,r=(0,h.getCurrentUserID)(),o=new Map,a=(t.forEach((function(e){e.user!==r&&e.type===j.ConferenceActionTypes.publish&&o.set(e.user,e)})),function(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=N(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}(o.values()));try{for(a.s();!(n=a.n()).done;){var i=n.value;(0,y.updateOthersPublicationState)(e.room,i.user,i.data)}}catch(e){a.e(e)}finally{a.f()}}));var e=!1;(0,i.onConferenceChange)((function(){var t,n=(0,u.haveJoinedConference)();n!==e&&(t=(0,h.getCurrentUser)(),(e=n)?(t.setStatusBeforeJoinconference(t.statusName),(0,O.changeUserStatus)("meeting")):t.isInMeeting&&t.statusBeforeJoinconference&&((0,O.changeUserStatus)(t.statusBeforeJoinconference.name),t.setStatusBeforeJoinconference(null))),(0,S.tryPlayRingSound)()})),(0,h.onSwapUser)((function(e,t){t&&(0,u.clearConferencesStore)((function(e){e.room&&(0,y.disconnectConferenceServer)(e.room,!0)}))})),(0,h.onUserStatusChange)((function(e,t){!e.isOnline&&t.isOnline&&(0,u.getConferencesList)((function(e){return!e.isClosed})).forEach((function(e){e.room&&(0,y.disconnectConferenceServer)(e.room),(0,u.updateConferenceAction)({type:j.ConferenceActionTypes.close},e)}))})),(0,p.onMemberLogout)((function(e){e=(0,v.getOne2OneChatGid)(e.id);var t=(0,u.getChatConference)(e);t&&t.room&&((0,y.isConferenceServerConnected)(t)||(0,c.isConferenceIncoming)(t))&&(0,f.closeConference)(e)})),$&&(C.default.call("nwc.registerCommandInvokeTarget","conference",{Lang:d.default,Config:k.default,commander:{executeCommand:s.executeCommand},membersStore:b.default,profile:{getCurrentUser:h.getCurrentUser,getCurrentUserID:h.getCurrentUserID},events:P.default,conference:{getMemberStatusInConference:c.getMemberStatusInConference,getConferenceColor:z,getConferenceIcon:W,getConferenceStatusName:U,getChatConference:u.getChatConference,getConferenceStatusText:q,getConferenceStatusMessage:K,getConferenceServer:y.getConferenceServer,getConferenceActions:function(e){return(0,l.getMenuItemsForContext)("conference.actions",{conference:(0,u.getChatConference)(e),independentMode:!1})}}}),(0,i.onConferenceServerStatusChange)((function(e,t,n,r){r.isConnected||r.isConnecting?(0,E.openConferenceWindow)(e.cgid,r.room,d.default.format("conference.window.title",e.name)):(0,E.closeConferenceWindow)(e.cgid)})))}},83047:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n(27945)),a=n(48389),i=s(n(56614)),l=n(15973),u=s(n(89174));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=y(e);if(n=t?(n=y(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return m(o)}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){var r=e;if(t.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object");t.set(e,n)}function b(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function v(e,t,n){if((t=O(e,t,"set")).set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function w(e,t){return(t=O(e,t,"get")).get?t.get.call(e):t.value}function O(e,t,n){if(t.has(e))return t.get(e);throw new TypeError("attempted to "+n+" private field on non-instance")}function S(e){return"string"==typeof e&&""!==e&&(e=e.split(",")),Array.isArray(e)?e.map((function(e){return"number"!=typeof e?Number.parseInt(e,10):e})).filter((function(e){return!Number.isNaN(e)})):[]}var _=new WeakMap,C=new WeakMap,E=new WeakMap,P=new WeakMap;n=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e);var n,r=h(o);function o(e){var t,n=this,a=o;if(n instanceof a)return b(m(t=r.call(this,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:o.NAME)),"statusKeeper",void 0),b(m(t),"ignored",void 0),g(m(t),_,{writable:!0,value:void 0}),g(m(t),C,{writable:!0,value:[]}),g(m(t),E,{writable:!0,value:void 0}),g(m(t),P,{writable:!0,value:void 0}),b(m(t),"isStored",void 0),t.statusKeeper=i.default.create(t.$.status),t.statusKeeper.onChange=function(e,n){w(m(t),_)&&w(m(t),_).call(m(t),t.statusKeeper.proxy,i.default.create(n).proxy,m(t))},t.$.actions&&Array.isArray(t.$.actions)&&t.addActions(t.$.actions),t;throw new TypeError("Cannot call a class as a function")}return t=o,e=[{key:"create",value:function(e){return e instanceof o?e:new o(e)}}],(n=[{key:"onStatusChange",set:function(e){v(this,_,e)}},{key:"onAddActions",set:function(e){v(this,E,e)}},{key:"proxyHandler",get:function(){return o.PROXY_HANDLER}},{key:"name",get:function(){return this.$get("name")||"<".concat(this.cgid,">")}},{key:"isOne2One",get:function(){return this.$get("isOne2One",!1)}},{key:"schema",get:function(){return o.SCHEMA}},{key:"status",get:function(){return this.statusKeeper.value},set:function(e){try{this.statusKeeper.change(e),this.$set("status",this.statusKeeper.name)}catch(e){DEBUG&&console.error("Change conference status failed: ",e)}}},{key:"statusValue",get:function(){return this.statusKeeper.value}},{key:"statusName",get:function(){return this.statusKeeper.name}},{key:"isOpen",get:function(){return this.statusKeeper.isOpen}},{key:"isClosed",get:function(){return this.statusKeeper.isClosed}},{key:"isCreating",get:function(){return this.statusKeeper.isCreating}},{key:"isCreateFail",get:function(){return this.statusKeeper.isCreateFail}},{key:"isClosing",get:function(){return this.statusKeeper.isClosing}},{key:"participants",get:function(){return this.$get("participants")}},{key:"participantsList",get:function(){return Array.from(this.participants)}},{key:"room",get:function(){return this.$get("room")}},{key:"isInLocal",get:function(){return!this.room}},{key:"cgid",get:function(){return this.$get("cgid")}},{key:"openedBy",get:function(){return this.$get("openedBy")}},{key:"openedDate",get:function(){return this.$get("openedDate")}},{key:"actions",get:function(){return w(this,C)}},{key:"latestAction",get:function(){return w(this,C)[w(this,C).length-1]}},{key:"participantCount",get:function(){return this.participants.size}},{key:"invitee",get:function(){return this.$get("invitee")}},{key:"isInvited",get:function(){return 0!==this.invitee.size}},{key:"publishOptions",get:function(){return w(this,P)},set:function(e){"string"==typeof e?"audio"===e?e={audio:!0,video:!1,screen:!1}:"video"===e?e={audio:!0,video:!0,screen:!1}:"screen"===e&&(e={audio:!0,video:!1,screen:!0}):v(this,P,e)}},{key:"isParticipant",value:function(e){return this.participants.has(e)}},{key:"canJoin",value:function(e){return this.isOpen&&!this.participants.has(e)}},{key:"canLeave",value:function(e){return this.isOpen&&this.participants.has(e)&&!this.isOne2One}},{key:"canOpen",value:function(){return this.isClosed||this.isCreateFail}},{key:"canCancel",value:function(e){return this.isCreateFail&&this.openedBy===e}},{key:"canClose",value:function(e){return this.isOpen&&(this.isOne2One||this.openedBy===e&&1<this.participantCount)}},{key:"canIgnore",value:function(e){return!this.isOne2One&&this.canJoin(e)&&!this.ignored}},{key:"haveJoinedBefore",value:function(e){return w(this,C).some((function(t){return t.user===e&&t.isLeave}))}},{key:"haveJoinedOrIgnoredBefore",value:function(e){return w(this,C).some((function(t){return t.user===e&&(t.isJoin||t.isLeave||t.isIgnore)}))}},{key:"isWaiting",value:function(e){return this.openedBy===e&&1===this.participantCount&&this.isParticipant(e)&&!w(this,C).some((function(e){return e.isJoin}))}},{key:"isIgnored",value:function(e){return this.canJoin(e)&&this.ignored}},{key:"ignore",value:function(e){return!!this.canIgnore(e)&&(this.ignored=!0)}},{key:"unignore",value:function(e){return!!this.isIgnored(e)&&!(this.ignored=!1)}},{key:"isOpenedBy",value:function(e){return this.openedBy===e}},{key:"isJoinedOnOtherDevice",value:function(e){if(!this.isParticipant(e))return!1;for(var t=this.actions,n=t.length-1;0<=n;--n){var r=t[n];if(r.user===e){if(r.isLeave)break;if(!r.isCurrentDevice&&(r.isJoin||r.isCreate))return!0}}return!1}},{key:"addActions",value:function(e){var t,n=this,r=(e=(e=Array.isArray(e)?e:[e]).map((function(e){return u.default.create(e,n.room)})).sort((function(e,t){return e.date-t.date})),this.participants),o=this.latestAction,a=this.invitee,s=this.statusValue;return e.forEach((function(e){if(e.isCreate)o&&o.isCreating||(n.ignored=!1,w(n,C).length=0),n.$set("openedBy",e.user),n.$set("openedDate",e.date),r.clear(),r.add(e.user),s=i.default.open;else if(e.isCreating)n.ignored=!1,w(n,C).length=0,n.$set("openedBy",e.user),n.$set("openedDate",e.date),r.clear(),r.add(e.user),s=i.default.creating;else if(e.isInvite){var t,u=c(S(e.invitee));try{for(u.s();!(t=u.n()).done;){var f=t.value;a.add(f),f===(0,l.getCurrentUserID)()&&n.unignore(f)}}catch(e){u.e(e)}finally{u.f()}}else e.isJoin?r.add(e.user):e.isLeave?(r.delete(e.user),r.size||(s=i.default.closed)):e.isClose?(n.ignored=!1,s=i.default.closed,r.clear()):e.isError?s=i.default.createFail:e.isClosing?(s=i.default.closing,r.clear()):e.isIgnore?n.ignore(e.user):e.isUnignore&&n.unignore(e.user);if(e.participants){r.clear();var d,p=c(S(e.participants));try{for(p.s();!(d=p.n()).done;){var h=d.value;r.add(h)}}catch(e){p.e(e)}finally{p.f()}}e.status&&(s=e.status),w(n,C).push(e)})),this.$set("participants",r),this.$set("invitee",a),this.status=s,null!=(t=w(this,E))&&t.call(this,e,this),e}},{key:"update",value:function(e){var t=e.room,n=e.openedBy,r=e.openedDate,o=e.participants,a=e.actions,i=e.status;e=e.invitee,void 0!==t&&this.$set("room",t),void 0!==n&&this.$set("openedBy",+n),void 0!==r&&this.$set("openedDate",r),o&&this.$set("participants",new Set(S(o))),a&&this.addActions(a),void 0!==i&&(this.status=i),void 0!==e&&(this.$set("invitee",e),t=(0,l.getCurrentUserID)(),this.isInvited&&!this.invitee.has(t)&&this.ignore(t))}}])&&d(t.prototype,n),e&&d(t,e),Object.defineProperty(t,"prototype",{writable:!1}),o}(o.default),b(t.default=n,"NAME","Conference"),b(n,"STATUS",i.default),b(n,"SCHEMA",o.default.SCHEMA.extend({room:{type:"string",unique:!0},cgid:{type:"string",indexed:!0},status:{type:"string"},openedBy:{type:"any"},isOne2One:{type:"boolean"},openedDate:{type:"timestamp"},participants:{type:"set",setter:function(e){return e instanceof Set?e:new Set(S(e))}},invitee:{type:"set",setter:function(e){return e instanceof Set?e:new Set(S(e))}},actions:{type:"json"}})),b(n,"PROXY_PROPERTIES",(0,a.createProxyPropertiesMap)(["room","cgid","status","openedBy","openedDate","participants","invitee","actions"],o.default.PROXY_PROPERTIES)),b(n,"PROXY_HANDLER",(0,a.createProxyHandler)(n.PROXY_PROPERTIES))},43717:(e,t,n)=>{"use strict";function r(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function o(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}Object.defineProperty(t,"__esModule",{value:!0}),t.unmixOwtStream=t.mixOwtStream=t.createOwtRoomToken=void 0;var a=((n=n(94128))&&n.__esModule?n:{default:n}).default.access("net.request"),i=function(){e=function*(e,t,n,o){return yield(yield a(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({method:e,headers:{"Content-Type":"application/json"},body:void 0!==n?JSON.stringify(n):""},o))).text()};var e,t=function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function l(e){o(i,r,a,l,u,"next",e)}function u(e){o(i,r,a,l,u,"throw",e)}l(void 0)}))};return function(e,n,r,o){return t.apply(this,arguments)}}();t.createOwtRoomToken=function(e,t,n,r){return i("POST","".concat(r,"/tokens/"),{room:e,user:t,role:n})},t.mixOwtStream=function(e,t,n,r){return i("PATCH","".concat(r,"/rooms/").concat(e,"/streams/").concat(t),[{op:"add",path:"/info/inViews",value:n}])},t.unmixOwtStream=function(e,t,n,r){return i("PATCH","".concat(r,"/rooms/").concat(e,"/streams/").concat(t),[{op:"remove",path:"/info/inViews",value:n}])}},16836:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.OWTConferenceServer=void 0;var o=n(5958),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=p(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(36666)),i=n(43717),l=d(n(94128)),u=d(n(74160)),s=d(n(11803)),c=n(15973),f=n(89848);function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function h(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=y(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function y(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=S(e);if(n=t?(n=S(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return O(o)}}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,n){var r=e;if(t.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object");t.set(e,n)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t,n){if((t=k(e,t,"set")).set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function P(e,t){return(t=k(e,t,"get")).get?t.get.call(e):t.value}function k(e,t,n){if(t.has(e))return t.get(e);throw new TypeError("attempted to "+n+" private field on non-instance")}function j(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){j(a,r,o,i,l,"next",e)}function l(e){j(a,r,o,i,l,"throw",e)}i(void 0)}))}}var M="common";function T(){return(T=x((function*(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:f.MEDIA_TYPES.audio,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(e===f.MEDIA_TYPES.audio)try{return yield o.Owt.Base.MediaStreamFactory.createMediaStream(new o.Owt.Base.StreamConstraints(new o.Owt.Base.AudioTrackConstraints(o.Owt.Base.AudioSourceInfo.MIC)))}catch(e){return console.error("Get user Media error",e),new MediaStream([(0,f.createSilenceAudioTrack)()])}return e===f.MEDIA_TYPES.video?o.Owt.Base.MediaStreamFactory.createMediaStream(new o.Owt.Base.StreamConstraints(void 0,new o.Owt.Base.VideoTrackConstraints(o.Owt.Base.VideoSourceInfo.CAMERA))):e===f.MEDIA_TYPES.screen?l.default.has("displayMedia.getDisplayMediaStream")?l.default.call("displayMedia.getDisplayMediaStream",{displaySelector:null!=(e=null==t?void 0:t.displaySelector)?e:f.displaySelector}):o.Owt.Base.MediaStreamFactory.createMediaStream(new o.Owt.Base.StreamConstraints(new o.Owt.Base.AudioTrackConstraints(o.Owt.Base.VideoSourceInfo.SCREENCAST),new o.Owt.Base.VideoTrackConstraints(o.Owt.Base.VideoSourceInfo.SCREENCAST))):null}))).apply(this,arguments)}var I=new WeakMap,D=new WeakMap,A=new WeakMap,R=new WeakMap,N=new WeakMap,B=new WeakMap,L=new WeakMap,F=new WeakMap,U=new WeakMap,z=new WeakMap,W=new WeakMap,H=new WeakMap,V=new WeakMap,G=new WeakMap;n=function(e){var t=K;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e);var n,r,l,d,p,y,g,k,j,q,$=w(K);function K(e){var t;if(this instanceof K)return C(O(t=$.call(this,e)),"backend","owt"),C(O(t),"mode","mcu"),_(O(t),I,{writable:!0,value:new o.Owt.Conference.ConferenceClient}),_(O(t),D,{writable:!0,value:{}}),_(O(t),A,{writable:!0,value:{}}),_(O(t),R,{writable:!0,value:null}),C(O(t),"token",void 0),C(O(t),"mixResult",void 0),C(O(t),"waitingStreams",void 0),C(O(t),"self",void 0),_(O(t),N,{writable:!0,value:function(e){var n,r=e.stream;r&&(r.attributes&&(r.attributes.ended=!0),P(O(t),R)&&P(O(t),R)[r.id]&&((0,f.destroyAudio)(r.id),delete P(O(t),R)[r.id],P(O(t),F).call(O(t),r,"remove")),(n=t.getParticipant(r.origin))&&n.userId&&t.updateParticipant(n.userId,n),DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg","EVENT: Stream ended","tealPale",r?"".concat(r.origin,"<").concat(r.id,">"):"Unknown stream",""),console.log("participant",n),console.log("event",e),console.log("ConferenceServer",O(t)),console.groupEnd()))}}),_(O(t),B,{writable:!0,value:function(e){var n=e.stream;n&&(DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg","EVENT: Stream updated","tealPale",n?"".concat(n.origin,"<").concat(n.id,">"):"Unknown stream",""),console.log("event",e),console.log("ConferenceServer",O(t)),console.groupEnd()),t._subscribeStream(n),n.origin&&(e=t.getParticipant(n.origin))&&e.userId&&t.updateParticipant(e.userId,e))}}),_(O(t),L,{writable:!0,value:function(e){var n=e.stream;n&&(DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg","EVENT: Stream added","tealPale",n?"".concat(n.origin,"<").concat(n.id,">"):"Unknown stream",""),console.log("event",e),console.log("ConferenceServer",O(t)),console.groupEnd()),"boolean"!=typeof t.mixResult?t.waitingStreams.push(n):(t._subscribeStream(n),n.origin&&(e=t.getParticipant(n.origin))&&e.userId&&t.updateParticipant(e.userId,e)))}}),_(O(t),F,{writable:!0,value:function(e){t.onRemoteStreamChange&&t.onRemoteStreamChange(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:"update")}}),_(O(t),U,{writable:!0,value:function(e){DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg","EVENT: Server disconnected","redPale"),console.log("event",e),console.log("ConferenceServer",O(t)),console.groupEnd()),t.tryDisconnect()}}),_(O(t),z,{writable:!0,value:function(e){var n=e.participant;DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg","EVENT: Participant joined","tealPale",n.userId,""),console.log("event",e),console.log("ConferenceServer",O(t)),console.groupEnd()),n.addEventListener("left",(function(e){DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg","EVENT: Participant left","tealPale",n.userId,""),console.log("event",e),console.log("ConferenceServer",O(t)),console.groupEnd()),+n.userId!==(0,c.getCurrentUserID)()&&t.removeParticipant(n.userId)})),t.addParticipant(n.userId,n)}}),_(O(t),W,{writable:!0,value:function(e,n){var r=t.getPublication(e);DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg",'EVENT: Publication "'.concat(e,'" Mute'),"tealPale"),console.log("type",e),console.log("event",n),console.log("publication",r),console.log("ConferenceServer",O(t)),console.groupEnd()),r&&t.updatePublishState(C({},e,a.MEDIA_PUBLISH_TYPES.muted))}}),_(O(t),H,{writable:!0,value:function(e,n){var r=t.getPublication(e);DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg",'EVENT: Publication "'.concat(e,'" Unmute'),"tealPale"),console.log("event",n),console.log("publication",r),console.log("ConferenceServer",O(t)),console.groupEnd()),r&&t.updatePublishState(C({},e,a.MEDIA_PUBLISH_TYPES.published))}}),_(O(t),V,{writable:!0,value:function(e,n){var r=t.getPublication(e);DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg",'EVENT: Publication "'.concat(e,'" Error'),"redPale"),console.log("event",n),console.log("publication",r),console.log("ConferenceServer",O(t)),console.groupEnd())}}),_(O(t),G,{writable:!0,value:function(e,n){var r=t.getPublication(e);DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg",'EVENT: Publication "'.concat(e,'" ended'),"tealPale"),console.log("event",n),console.log("publication",r),console.log("ConferenceServer",O(t)),console.groupEnd()),r&&t.unpublish(e)}}),t;throw new TypeError("Cannot call a class as a function")}return t=K,(e=[{key:"user",get:function(){return this.options.user}},{key:"api",get:function(){return this.options.api}},{key:"role",get:function(){var e;return null!=(e=this.options.role)?e:"presenter"}},{key:"conferenceClient",get:function(){return P(this,I)}},{key:"remoteStreams",get:function(){return P(this,I)&&P(this,I).info&&P(this,I).info.remoteStreams||[]}},{key:"isParticipant",value:function(e){var t=this.getParticipant(e);return!!t&&(this.mixResult||Object.values(P(this,R)).some((function(e){return e.origin===t.id})))}},{key:"isParticipantMuted",value:function(e){if(e===this.user)return!this.isAudioPublished;var t=this.getParticipant(e);return!t||!Object.values(P(this,R)).some((function(e){return e.origin===t.id}))}},{key:"getPublication",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:f.MEDIA_TYPES.audio;return P(this,A)&&P(this,A)[e]}},{key:"mute",value:(q=x((function*(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:f.MEDIA_TYPES.audio,t=this.getPublication(e);if(!t)return DEBUG&&console.color("Owt.ConferenceServer","tealBg",'Error: Mute "'.concat(e,'" failed'),"redPale","Cannot found publication object.","red"),this.updatePublishState(C({},e,a.MEDIA_PUBLISH_TYPES.stopped)),!1;yield t.mute(e===f.MEDIA_TYPES.screen?"av":e),this.updatePublishState(C({},e,a.MEDIA_PUBLISH_TYPES.muted))})),function(){return q.apply(this,arguments)})},{key:"unmute",value:(j=x((function*(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:f.MEDIA_TYPES.audio,t=this.getPublication(e);if(!t)return DEBUG&&console.color("Owt.ConferenceServer","tealBg",'Error: Mute "'.concat(e,'" failed'),"redPale","Cannot found publication object.","red"),this.updatePublishState(C({},e,a.MEDIA_PUBLISH_TYPES.stopped)),!1;yield t.unmute(e===f.MEDIA_TYPES.screen?"av":e),this.updatePublishState(C({},e,a.MEDIA_PUBLISH_TYPES.published))})),function(){return j.apply(this,arguments)})},{key:"publish",value:(k=x((function*(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:f.MEDIA_TYPES.audio,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=this.getPublication(t);if(r)return DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg",'Publish "'.concat(t,'" skippped'),"redPale",'Media stream "'.concat(t,'" is already published.'),"red"),console.log("publication",r),console.log("ConferenceServer",this),console.groupEnd()),!1;try{l=yield function(){return T.apply(this,arguments)}(t,n),P(this,D)[t]=l,DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg",'Publish "'.concat(t,'"'),"tealPale","Media stream created",""),console.log("medialStream",l),console.log("ConferenceServer",this),console.groupEnd())}catch(e){throw C(n={},f.MEDIA_TYPES.audio,"MIC"),C(n,f.MEDIA_TYPES.video,"CAMERA"),C(n,f.MEDIA_TYPES.screen,"SCREENCAST"),n=s.default.create(e,"CONFERENCE_NO_".concat(n[t])),n.detail="Publish ".concat(t," error"),DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg",'Publish "'.concat(t,'" Error'),"redPale",String(e),"red"),console.error("error",e),console.log("ConferenceServer",this),console.groupEnd()),"USER_CANCELED"!==n.code&&(this.updatePublishState(C({},t,a.MEDIA_PUBLISH_TYPES.disabled)),this.emitError(n.code)),n}try{e=yield function(e,t,n){return t=1<arguments.length&&void 0!==t?t:f.MEDIA_TYPES.audio,n=2<arguments.length&&void 0!==n?n:null,t===f.MEDIA_TYPES.audio?new o.Owt.Base.LocalStream(e,new o.Owt.Base.StreamSourceInfo("mic"),n):t===f.MEDIA_TYPES.video?new o.Owt.Base.LocalStream(e,new o.Owt.Base.StreamSourceInfo(void 0,"camera"),n):t===f.MEDIA_TYPES.screen?new o.Owt.Base.LocalStream(e,new o.Owt.Base.StreamSourceInfo("mic","screen-cast"),n):null}(l,t,{type:t,user:this.user,device:u.default.system.device}),DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg",'Publish "'.concat(t,'"'),"tealPale","Local stream created",""),console.log("medialStream",l),console.log("localStream",e),console.log("ConferenceServer",this),console.groupEnd())}catch(e){throw n=new Error("Publish error: ".concat(String(e))),DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg",'Publish "'.concat(t,'" Error'),"redPale",String(e),"red"),console.error("error",e),console.log("ConferenceServer",this),console.groupEnd()),n}try{r=yield this.conferenceClient.publish(e,{}),this.updatePublishState(C({},t,a.MEDIA_PUBLISH_TYPES.published)),DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg",'Publish "'.concat(t,'" success'),"tealPale",r.id,""),console.log("publication",r),console.log("localStream",e),console.log("ConferenceServer",this),console.groupEnd())}catch(n){var l=new Error("Publish error: ".concat(String(n)));throw DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg",'Publish "'.concat(t,'" Error'),"redPale",String(n),"red"),console.error("error",n),console.log("publication",r),console.log("localStream",e),console.log("ConferenceServer",this),console.groupEnd()),l}t!==f.MEDIA_TYPES.audio&&t!==f.MEDIA_TYPES.video||(n=yield(0,i.mixOwtStream)(this.room,r.id,M,this.api),this.mixResult=!n.includes("Invalid"),DEBUG&&(this.mixResult?console.collapse("Owt.ConferenceServer","tealBg",'Publish "'.concat(t,'" Mix'),"tealPale","Stream mixed ".concat(this.mixResult?"success":"failed"),this.mixResult?"":"red"):console.collapse("Owt.ConferenceServer","tealBg",'Publish "'.concat(t,'" Mix Error'),"redPale",n,"red"),console.log("mixResult",n),console.log("ConferenceServer",this),console.groupEnd())),r.addEventListener("error",P(this,V).bind(this,t)),r.addEventListener("ended",P(this,G).bind(this,t)),r.addEventListener("mute",P(this,W).bind(this,t)),r.addEventListener("unmute",P(this,H).bind(this,t)),P(this,A)[t]=r})),function(){return k.apply(this,arguments)})},{key:"unpublish",value:(g=x((function*(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:f.MEDIA_TYPES.audio,t=this.getPublication(e);if(!t)return DEBUG&&console.color("Owt.ConferenceServer","tealBg",'Error: Unpublish "'.concat(e,'" failed'),"redPale","Cannot found publication object.","red"),this.updatePublishState(C({},e,a.MEDIA_PUBLISH_TYPES.stopped)),!1;if(e===f.MEDIA_TYPES.audio||e===f.MEDIA_TYPES.video)try{yield(0,i.unmixOwtStream)(this.room,t.id,M,this.api),(0,f.destroyMediaStream)(P(this,D)[e])}catch(n){DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg",'Unpublish "'.concat(e,'" warning on unmix stream'),"yelowPale",String(n),"yelow"),console.error("error",n),console.log("publication",t),console.log("ConferenceServer",this),console.groupEnd())}t.clearEventListener("error"),t.clearEventListener("ended"),t.clearEventListener("mute"),t.clearEventListener("unmute"),t.stop(),delete P(this,A)[e],this.updatePublishState(C({},e,a.MEDIA_PUBLISH_TYPES.stopped)),DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg",'Unpublish "'.concat(e,'" success'),"tealPale",t.id,""),console.log("publication",t),console.log("ConferenceServer",this),console.groupEnd())})),function(){return g.apply(this,arguments)})},{key:"_publishStreams",value:(y=x((function*(){this.needPublishAudio&&(yield this.publishAudio()),this.needPublishScreencast?yield this.publishScreencast():this.needPublishVideo&&(yield this.publishVideo())})),function(){return y.apply(this,arguments)})},{key:"hasMediaStream",value:function(e){var t=this;if(e===f.MEDIA_TYPES.audio)return Object.values(P(this,R)).some((function(e){return e.id.endsWith("-common")}));var n,r=this.remoteStreams;return!!r.length&&(n=new Set(Array.isArray(e)?e:e.split(",")),r.some((function(e){return!(!e.attributes||!e.attributes.user||e.attributes.ended||!n.has(e.attributes.type)||e.attributes.user===t.user&&!t.isMediaPublished(e.attributes.type))})))}},{key:"getMediaStream",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:f.MEDIA_TYPES.video;if(P(this,R)){var n=Object.values(P(this,R));if(t===f.MEDIA_TYPES.screen)return(r=n.find((function(t){return t.source&&"screen-cast"===t.source.video&&t.origin!==e.self.id&&t.mediaStream&&t.mediaStream.active&&t.mediaStream.getVideoTracks().some((function(e){return"live"===e.readyState}))})))?r.mediaStream:this.isScreencastPublished&&P(this,D)&&P(this,D)[t]?P(this,D)[t]:void 0;if(t===f.MEDIA_TYPES.video&&this.hasMediaStream(f.MEDIA_TYPES.video)||t===f.MEDIA_TYPES.audio){var r=n.find((function(e){return e.id.endsWith("-common")}));if(r&&r.mediaStream)return r.mediaStream}}}},{key:"getLocalMediaStream",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:f.MEDIA_TYPES.audio;if(!this.isMediaPublished(e))return null;switch(e){case f.MEDIA_TYPES.audio:return P(this,D).audio;case f.MEDIA_TYPES.screen:return P(this,D).screen;case f.MEDIA_TYPES.video:return P(this,D).video}}},{key:"initOptions",value:function(){if(b(S(K.prototype),"initOptions",this).call(this),!this.options.api)throw new Error('Property "options.api" is required in constructer of ConferenceServer.')}},{key:"disconnectServer",value:(p=x((function*(){var e=this;this.self=null,yield Promise.all(Object.keys(P(this,A)).map((function(t){return e.unpublish(t)}))),Object.values(P(this,R)).forEach((function(e){var t=e.id,n=e.mediaStream;(e=e.subscription)&&e.stop(),n&&(0,f.destroyMediaStream)(n),(0,f.destroyAudio)(t)})),E(this,R,null),Object.keys(P(this,D)).forEach((function(t){var n=P(e,D)[t];n&&(0,f.destroyMediaStream)(n),delete P(e,D)[t]})),P(this,I).clearEventListener("streamadded"),P(this,I).clearEventListener("participantjoined"),P(this,I).clearEventListener("serverdisconnected"),yield P(this,I).leave()})),function(){return p.apply(this,arguments)})},{key:"connectServer",value:(d=x((function*(){if(this.self)try{yield this.disconnectServer()}catch(e){}if(E(this,R,{}),this.waitingStreams=[],this.mixResult=null,this.self=null,this.token=null,E(this,A,{}),E(this,D,{}),yield this.createToken(),yield this.joinConference(),P(this,I).addEventListener("streamadded",P(this,L)),P(this,I).addEventListener("participantjoined",P(this,z)),P(this,I).addEventListener("serverdisconnected",P(this,U)),yield this._publishStreams(),this.waitingStreams){DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg","Step 6-begin: Subscripting ".concat(this.waitingStreams.length," streams"),"tealPale"),console.log("streams",this.waitingStreams),console.groupEnd());var e,t=m(this.waitingStreams);try{for(t.s();!(e=t.n()).done;){var n=e.value;yield this._subscribeStream(n)}}catch(e){t.e(e)}finally{t.f()}this.waitingStreams.length=0,DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg","Step 6-end: Subscripting ".concat(this.waitingStreams.length," streams"),"tealPale"),console.log("streams",this.waitingStreams),console.groupEnd()),this.waitingStreams.length=0}})),function(){return d.apply(this,arguments)})},{key:"_subscribeStream",value:(l=x((function*(e){if(e.clearEventListener("ended"),e.clearEventListener("updated"),e.addEventListener("ended",P(this,N).bind(this,{stream:e,type:"ended"})),e.addEventListener("updated",P(this,B).bind(this,{stream:e,type:"updated"})),!e.source.audio&&"screen-cast"!==e.source.video)return DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg","Subscription skipped","tealPale","stream ".concat(e.origin,"<").concat(e.id,"> has no audio."),"gray"),console.log("stream",e),console.log("ConferenceServer",this),console.groupEnd()),!1;if(e.origin===this.self.id)return DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg","Subscription skipped","tealPale","stream ".concat(e.origin,"<").concat(e.id,"> is local."),"gray"),console.log("stream",e),console.log("ConferenceServer",this),console.groupEnd()),!1;if(P(this,R)[e.id]=e,P(this,F).call(this,e),e.source&&"screen-cast"===e.source.video){var t=yield this.conferenceClient.subscribe(e,{audio:!1,video:!0});e.subscription=t}else{if(e.origin||!e.id.includes(M))return DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg","Subscription skipped","tealPale","stream ".concat(e.origin,"<").concat(e.id,"> is not mixed."),"gray"),console.log("stream",e),console.log("ConferenceServer",this),console.groupEnd()),!1;t=yield this.conferenceClient.subscribe(e,{audio:!0,video:!0}),e.subscription=t,(0,f.playAudioStream)(e,!0)}DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg","Subscribed stream","tealPale","".concat(e.origin,"<").concat(e.id,">"),""),console.log("stream",e),console.log("ConferenceServer",this),console.groupEnd()),(t=this.getParticipant(e.origin))&&t.userId&&this.updateParticipant(t.userId,t)})),function(e){return l.apply(this,arguments)})},{key:"joinConference",value:(r=x((function*(){var e,t=yield this.conferenceClient.join(this.token);if(this.self=t.self,this.addParticipant(this.self.userId,this.self),t.participants){var n,r=m(t.participants);try{for(r.s();!(n=r.n()).done;){var o=n.value;P(this,z).call(this,{participant:o})}}catch(e){r.e(e)}finally{r.f()}}t.remoteStreams&&(e=this.waitingStreams).push.apply(e,h(t.remoteStreams)),DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg","Step 2: Joined conference","tealPale","".concat(t.participants?t.participants.length:0," participants, ").concat(t.remoteStreams?t.remoteStreams.length:0," remote streams"),""),console.log("joinResponse",t),console.log("ConferenceServer",this),console.groupEnd())})),function(){return r.apply(this,arguments)})},{key:"createToken",value:(n=x((function*(){try{var e=yield(0,i.createOwtRoomToken)(this.room,this.user.toString(),this.role,this.api);this.token=e}catch(e){throw new Error("OWTConferenceServer: Create token failed with error ".concat(e.message,".(room: ").concat(this.room,", user: ").concat(this.user,", role: ").concat(this.role,", failuresCount: ").concat(this.failuresCount+1,")"))}return DEBUG&&(console.collapse("Owt.ConferenceServer","tealBg","Step 1: Got token","tealPale","room: ".concat(this.room,", user: ").concat(this.user,", role: ").concat(this.role),""),console.log("Token",this.token),console.groupEnd()),this.token})),function(){return n.apply(this,arguments)})}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),K}(a.default),t.OWTConferenceServer=n},5958:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Owt=void 0,n(15007);var r,o=n(99838);n=n(64393),"browser"===(0,o.getPlatformType)()&&((0,n.appendScript)("assets/owt-sdk.js","owt-sdk"),r=window.Owt),n=new Proxy({},{get:function(e,t){return r=r||("browser"===(0,o.getPlatformType)()?window.Owt:(n=process.env.HOT?"".concat(process.env.APP_ROOT,"/assets/owt-sdk.js"):"./assets/owt-sdk.js",require(n))),"string"==typeof t?r[t]:r;var n}}),t.Owt=n},15007:(e,t,n)=>{"use strict";var r=n(64393);n=(n=n(94128))&&n.__esModule?n:{default:n},(0,r.appendScript)("assets/socket.io.js","import-socket-io"),"browser"===n.default.type&&(0,r.appendScript)("assets/webrtc-adapter.js","import-webrtc-adapter")},77898:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=l(e);if(n=t?(n=l(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==o)return o;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.SrsConferenceParticipant=void 0,n=function(e){var t=l;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e);var n,r=i(l);function l(){var e=this,t=l;if(e instanceof t)return r.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=l,e=[{key:"from",value:function(e){return new l({id:+e.display.split("-")[1],data:{publishing:e.publishing}})}}],(n=[{key:"publishing",get:function(){return this.getData("publishing")}},{key:"display",get:function(){return"user-".concat(this.id)}}])&&o(t.prototype,n),e&&o(t,e),Object.defineProperty(t,"prototype",{writable:!1}),l}(n(91731).ConferenceParticipant),t.SrsConferenceParticipant=n},47580:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.SRSConferenceServer=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=m(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(36666)),a=n(77898),i=n(58127),l=n(17781),u=n(24485),s=n(89848),c=n(15973),f=n(78717),d=h(n(61862)),p=h(n(84431));function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function y(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=v(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(){return(O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=E(e);if(n=t?(n=E(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return C(o)}}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){k(a,r,o,i,l,"next",e)}function l(e){k(a,r,o,i,l,"throw",e)}i(void 0)}))}}function x(){return(x=j((function*(){var e,t=void 0===(t=(r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).audio)||t,n=void 0!==(n=r.video)&&n,r=r.displaySelector,o="screen"===n;return n=n&&!o,(t||n)&&(n=t&&n?"av":t?s.MEDIA_TYPES.audio:s.MEDIA_TYPES.video,e=yield(0,s.createMediaStream)(n)),t=o?yield(0,s.createMediaStream)(s.MEDIA_TYPES.screen,{displaySelector:r}):null,e&&t?new MediaStream([].concat(y(e.getAudioTracks()),y(t.getVideoTracks()))):e||t}))).apply(this,arguments)}n=function(e){var t=T;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e);var n,r,h,m,y,v,w,k,M=_(T);function T(){var e,t=this,n=T;if(!(t instanceof n))throw new TypeError("Cannot call a class as a function");for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return P(C(e=M.call.apply(M,[this].concat(i))),"backend","srs"),P(C(e),"mode","sfu"),P(C(e),"publisher",null),P(C(e),"signaling",null),P(C(e),"self",null),P(C(e),"players",new Map),P(C(e),"handleSignalingMessage",(function(t){var n;if(DEBUG&&(console.collapse("SRS.ConferenceServer","tealBg","signaling message","tealPale",null==t?void 0:t.event,""),console.log("message:",t),console.log("ConferenceServer",C(e)),console.groupEnd()),null!=t&&t.event)return"join"===(n=t.event)?e.handleParticipantJoined(t):"publish"===n?e.handleParticipantPublishing(t):"leave"===n?e.handleParticipantLeaved(t):"control"===n?e.handleParticipantControl(t):void(DEBUG&&console.error('Cannot handle the message type "'.concat(t.event,'".'),t))})),P(C(e),"handlePublisherTrackChange",(function(t){DEBUG&&(console.collapse("SRS.ConferenceServer","tealBg","publisher track change","tealPale","".concat(t.type," mediaType=").concat(t.mediaType," muted=").concat(t.track.muted),""),console.log("event",t),console.log("ConferenceServer",C(e)),console.log("publisher",e.publisher),console.groupEnd());var n=t.stream,r=t.oldTrack;r&&r.stop(),n?e.self.updateStream(n,t.track.kind)&&e.updateParticipant(e.self.id,e.self):e.self.removeStream(n,t.track.kind)&&e.updateParticipant(e.self.id,e.self)})),P(C(e),"handlePublisherStateChange",(function(t){e.self.updatePublicationState(t)&&e.updateParticipant(e.self.id,e.self),e.updatePublishState({audio:t.audio?o.MEDIA_PUBLISH_TYPES.published:o.MEDIA_PUBLISH_TYPES.muted,video:t.video?o.MEDIA_PUBLISH_TYPES.published:o.MEDIA_PUBLISH_TYPES.stopped,screen:t.screen?o.MEDIA_PUBLISH_TYPES.published:o.MEDIA_PUBLISH_TYPES.stopped})})),P(C(e),"handlePlayerTrackChange",(function(t){var n,r=e.getParticipant(t.id);r&&("remove"===t.type?r.removeStream(t.stream)&&e.updateParticipant(r.id,r):(n=!1,t.stream&&(n=r.updateStream(t.stream)),"mute"===t.type?n=r.updatePublicationState(P({},t.mediaType,!1))||n:"unmute"===t.type&&(n=r.updatePublicationState(P({},t.mediaType,!0))||n),n&&e.updateParticipant(r.id,r)))})),P(C(e),"handleStreamChange",(function(t){var n,r;null!=(n=(r=e).onRemoteStreamChange)&&n.call(r,t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:"update")})),P(C(e),"handleParticipantStreamChange",(function(t){var n;DEBUG&&(console.collapse("SRS.ConferenceServer","tealBg","EVENT: Participant stream change","tealPale",t.id,"",t.type,"",t.mediaType,""),console.log("event",t),console.log("ConferenceServer",C(e)),console.groupEnd()),"audio"===t.mediaType&&t.id!==e.user&&(n="".concat(e.room,"-").concat(t.id),"stop"===t.type?(0,s.destroyAudio)(n):(0,s.playAudio)(n,t.stream,!0))})),P(C(e),"handleParticipantChange",(function(t){var n=+t.display.split("-")[1];return(n=e.getParticipant(n))?n.setData({publishing:t.publishing}):((n=a.SrsConferenceParticipant.from(t)).onStreamChange=e.handleParticipantStreamChange,e.addParticipant(n)),n.self||(n.publishing?e.subscribeStream(n):e.unsubscribeStream(n)),n})),P(C(e),"handleParticipantJoined",(function(t){DEBUG&&(console.collapse("SRS.ConferenceServer","tealBg","EVENT: Participant joined","tealPale",t.peer.display,""),console.log("event",t),console.log("ConferenceServer",C(e)),console.groupEnd()),e.handleParticipantChange(t.peer),e.publisher.hasSendTrack("screen")&&e.nofityVideoType("screen")})),P(C(e),"handleParticipantPublishing",(function(t){DEBUG&&(console.collapse("SRS.ConferenceServer","tealBg","EVENT: Participant publish","tealPale",t.peer.display,""),console.log("event",t),console.log("ConferenceServer",C(e)),console.groupEnd()),t.self.display!==t.peer.display&&e.handleParticipantChange(t.peer)})),P(C(e),"handleParticipantLeaved",(function(t){DEBUG&&(console.collapse("SRS.ConferenceServer","tealBg","EVENT: Participant leave","tealPale",t.peer.display,""),console.log("event",t),console.log("ConferenceServer",C(e)),console.groupEnd());var n=+t.peer.display.split("-")[1];e.isParticipant(n)&&(t.peer.publishing&&(t.peer.publishing=!1),e.handleParticipantChange(t.peer),e.removeParticipant(n))})),P(C(e),"handleParticipantControl",(function(t){var n=JSON.parse(t.data);DEBUG&&(console.collapse("SRS.ConferenceServer","tealBg","EVENT: Participant control","tealPale",t.peer.display,"",null==n?void 0:n.action,""),console.log("event",t),console.log("data",n),console.log("ConferenceServer",C(e)),console.groupEnd()),"nofityVideoType"===n.action&&null!=(t=e.players.get(n.id))&&t.switchVideoType(n.videoType)})),e}return t=T,(e=[{key:"user",get:function(){return this.options.user}},{key:"api",get:function(){return this.options.api}},{key:"role",get:function(){var e;return null!=(e=this.options.role)?e:"presenter"}},{key:"https",get:function(){return this.options.https}},{key:"hostname",get:function(){return this.options.host}},{key:"rtc",get:function(){return this.options.rtc}},{key:"host",get:function(){return b(this.rtc.split("://"),2)[1]}},{key:"display",get:function(){return"user-".concat(this.user)}},{key:"participantsList",get:function(){return O(E(T.prototype),"participantsList",this)}},{key:"initOptions",value:function(){if(O(E(T.prototype),"initOptions",this).call(this),!this.options.api)throw new Error('Property "options.api" is required in constructer of ConferenceServer.')}},{key:"connectServer",value:(k=j((function*(){this.disconnectServer(),yield this.createSignaling(),yield this.joinConference(),yield this.publishStreams()})),function(){return k.apply(this,arguments)})},{key:"createSignaling",value:(w=j((function*(){this.signaling=new l.SrsRtcSignaling(this.handleSignalingMessage);var e=(t=b(this.rtc.split("://"),2))[0],t=t[1];e=yield this.signaling.connect(e,t,this.room||this.cgid,this.display),DEBUG&&(console.collapse("SRS.ConferenceServer","tealBg","signaling connected","tealPale","",""),console.log("message:",e),console.log("ConferenceServer",this),console.groupEnd())})),function(){return w.apply(this,arguments)})},{key:"sendSignalingAction",value:(v=j((function*(e,t){if(!["join","publish","control"].includes(e))throw new Error('SRSConferenceServer error: Cannot send action "'.concat(e,'", the type is not supported.'));t={action:e,room:this.room,display:this.display,data:t?JSON.stringify(t):void 0};try{var n=yield this.signaling.send(t);return DEBUG&&(console.collapse("SRS.ConferenceServer","tealBg","send signaling action","tealPale",e,""),console.log("res:",n),console.log("message:",t),console.log("ConferenceServer",this),console.groupEnd()),n}catch(n){DEBUG&&(console.collapse("SRS.ConferenceServer","redBg","send signaling action error","redPale",e,""),console.error("err:",n),console.log("message:",t),console.log("ConferenceServer",this),console.groupEnd())}})),function(e,t){return v.apply(this,arguments)})},{key:"nofityVideoType",value:function(e){return this.sendSignalingAction("control",{action:"nofityVideoType",videoType:e,id:this.user})}},{key:"joinConference",value:(y=j((function*(){var e=yield this.sendSignalingAction("join"),t=new a.SrsConferenceParticipant({self:!0,id:this.user,role:this.role});this.self=t,this.addParticipant(t),e.participants.forEach(this.handleParticipantChange),DEBUG&&(console.collapse("SRS.ConferenceServer","tealBg","joined!","tealPale",t.display,""),console.log("joinRes:",e),console.log("self:",t),console.log("ConferenceServer",this),console.groupEnd())})),function(){return y.apply(this,arguments)})},{key:"publishStreams",value:(m=j((function*(){var e=this,t=(this.publisher=new u.SrsRtcPublisher,this.publisher.onTrackChange=this.handlePublisherTrackChange,this.publisher.onStateChange=this.handlePublisherStateChange,"webrtc://".concat(this.hostname,"/").concat(this.room,"/").concat(this.display,"/")),n=yield function(){return x.apply(this,arguments)}({audio:this.needPublishAudio,video:this.needPublishScreencast?"screen":!!this.needPublishVideo&&"video"});try{var r=b(yield this.publisher.publish({url:t,stream:n,publishKind:"av"}),2),o=r[0],a=r[1];o.onconnectionstatechange=function(){"disconnected"!==o.connectionState&&"closed"!==o.connectionState&&"failed"!==o.connectionState||!e.participantsIds.includes((0,c.getCurrentUserID)())||(e.cgid.includes("&")?(0,f.executeCommand)("closeConference",e.cgid):(0,f.executeCommand)("leaveConference",e.cgid),(0,c.getCurrentUser)().config.useInitConference&&e.cgid==="".concat(e.user,"&").concat(e.user)||(0,f.executeCommand)("showMessager",d.default.string("conference.publish.fail"),{type:"danger"}))}}catch(e){return this.cgid.includes("&")?(0,f.executeCommand)("closeConference",this.cgid):(0,f.executeCommand)("leaveConference",this.cgid),void((0,c.getCurrentUser)().config.useInitConference&&this.cgid==="".concat(this.user,"&").concat(this.user)||(0,f.executeCommand)("showMessager",d.default.string("conference.publish.fail"),{type:"danger"}))}this.updatePublishState(this.publisher.state),this.sendSignalingAction("publish"),DEBUG&&(console.collapse("SRS.ConferenceServer","tealBg","publish stream","tealPale","",""),console.log("session",a),console.log("ConferenceServer",this),console.groupEnd())})),function(){return m.apply(this,arguments)})},{key:"publish",value:(h=j((function*(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:s.MEDIA_TYPES.audio,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(this.publisher.hasSendTrack(e)&&this.isMediaPublished(e))return DEBUG&&(console.collapse("SRS.ConferenceServer","tealBg",'Publish "'.concat(e,'" skippped'),"redPale",'Media stream "'.concat(e,'" is already published.'),"red"),console.log("publisher",this.publisher),console.log("ConferenceServer",this),console.groupEnd()),!1;t=yield(0,s.createMediaStream)(e,t),this.publisher.sendTrackFromMediaStream(t,e),"audio"!==e&&(yield this.nofityVideoType(e)),DEBUG&&(console.collapse("SRS.ConferenceServer","tealBg","published","tealPale",e,""),console.log("mediaStream:",t),console.log("ConferenceServer",this),console.groupEnd())})),function(){return h.apply(this,arguments)})},{key:"disconnectServer",value:function(){null!=(e=this.publisher)&&e.close(),this.publisher=null,this.self=null;var e,t,n=g(this.participantsList);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.unsubscribeStream(r)}}catch(e){n.e(e)}finally{n.f()}this.clearParticipant();var o,a=g(this.players.values());try{for(a.s();!(o=a.n()).done;)o.value.close()}catch(e){a.e(e)}finally{a.f()}this.players.clear(),this.signaling&&(this.signaling.close(),this.signaling=null)}},{key:"subscribeStream",value:(r=j((function*(e){var t=this;if(e.id!==this.user&&!1!==e.publishing){var n=new i.SrsRtcPlayer(e.id);n.onTrackChange=this.handlePlayerTrackChange,this.players.has(e.id)&&this.players.get(e.id).close(),this.players.set(e.id,n);try{var r=b(yield n.play("webrtc://".concat(this.hostname,"/").concat(this.room,"/").concat(e.display,"/")),1)[0];r.onconnectionstatechange=function(){("disconnected"===r.connectionState||"closed"===r.connectionState||"failed"===r.connectionState)&&t.participantsIds.includes((0,c.getCurrentUserID)())&&t.participantsIds.includes(e.id)&&(t.cgid.includes("&")?(0,f.executeCommand)("closeConference",t.cgid):(0,f.executeCommand)("leaveConference",t.cgid),(0,f.executeCommand)("showMessager",d.default.format("conference.play.fail",p.default.getMember(e.id).displayName),{type:"danger"}))}}catch(t){this.cgid.includes("&")?(0,f.executeCommand)("closeConference",this.cgid):(0,f.executeCommand)("leaveConference",this.cgid),(0,f.executeCommand)("showMessager",d.default.format("conference.play.fail",p.default.getMember(e.id).displayName),{type:"danger"})}DEBUG&&(console.collapse("SRS.ConferenceServer","tealBg","subscribe stream","tealPale",e.display,""),console.log("player",n),console.log("participant",e),console.log("ConferenceServer",this),console.groupEnd())}})),function(e){return r.apply(this,arguments)})},{key:"unsubscribeStream",value:function(e){var t,n=e.id;n!==this.user&&this.players.has(n)&&((t=this.players.get(n)).close(),this.players.delete(n),(0,s.destroyAudio)("".concat(this.room,"-").concat(n)),DEBUG&&(console.collapse("SRS.ConferenceServer","tealBg","unsubscribe stream","tealPale",e.display,""),console.log("player",t),console.log("participant",e),console.log("ConferenceServer",this),console.groupEnd()))}},{key:"mute",value:function(){return this.unpublish(s.MEDIA_TYPES.audio)}},{key:"unmute",value:function(){return this.publish(s.MEDIA_TYPES.audio)}},{key:"unpublish",value:(n=j((function*(e){if(!this.publisher)return DEBUG&&console.color("SRS.ConferenceServer","tealBg",'Unpublish "'.concat(e,'" failed'),"redPale","Cannot found publisher object.","red"),void this.updatePublishState(P({},e,o.MEDIA_PUBLISH_TYPES.stopped));this.publisher.hasSendTrack(e)?(this.publisher.cancelTrack(e),DEBUG&&(console.collapse("SRS.ConferenceServer","tealBg","unpublished","tealPale",e,""),console.log("ConferenceServer",this),console.groupEnd())):DEBUG&&(console.collapse("SRS.ConferenceServer","tealBg",'Unpublish "'.concat(e,'" failed'),"redPale",'Cannot found any stream "'.concat(e,'" .'),"red"),console.log("publisher",this.publisher),console.log("ConferenceServer",this),console.groupEnd())})),function(e){return n.apply(this,arguments)})},{key:"hasMediaStream",value:function(e){var t=this;return Array.isArray(e)?e.some((function(e){return t.hasMediaStream(e)})):this.participantsList.some((function(t){return t.isPublished(e)}))}},{key:"getMediaStream",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:s.MEDIA_TYPES.video;return this.getMediaStreams(e)}},{key:"getMediaStreams",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:s.MEDIA_TYPES.video;return this.participantsList.reduce((function(t,n){return n.isPublished(e)?((n="audio"===e?n.audioStream:n.videoStream)&&t.push(n),t):t}),[])}},{key:"getLocalMediaStream",value:function(e){if(!this.isMediaPublished(e))return null;switch(e){case s.MEDIA_TYPES.audio:return this.publisher.audioStream;case s.MEDIA_TYPES.screen:case s.MEDIA_TYPES.video:return this.publisher.videoStream}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),T}(o.default),t.SRSConferenceServer=n},58127:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SrsRtcPlayer=void 0;var r=n(89848);function o(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function a(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(){function e(t){var n=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");a(this,"_pc",void 0),a(this,"_streams",{}),a(this,"_id",void 0),a(this,"_videoTrackType","video"),a(this,"_onTrackChange",void 0),a(this,"_handleOnTrack",(function(e){var t,r=e.track,o=r.kind,a=(r.onended=function(){var t,a=n._streams[o],i="audio"===o?"audio":n._videoTrackType;a.removeTrack(r),null!=(t=n._onTrackChange)&&t.call(n,{id:n.id,type:"remove",track:r,mediaType:i,player:n,stream:a}),DEBUG&&(r.onmute=null,r.onunmute=null,console.collapse("SRS.RtcPlayer","tealBg","user-".concat(n.id,": remove track"),"tealPale","".concat(i,"-").concat(r.id," muted=").concat(r.muted),""),console.log("event",e),console.log("RtcPlayer",n),console.groupEnd())},DEBUG&&(r.onmute=function(e){console.collapse("SRS.RtcPlayer","tealBg","user-".concat(n.id,": mute track"),"tealPale","".concat("audio"===o?"audio":n._videoTrackType,"-").concat(r.id," muted=").concat(r.muted),""),console.log("event",e),console.log("RtcPlayer",n),console.groupEnd()},r.onunmute=function(e){console.collapse("SRS.RtcPlayer","tealBg","user-".concat(n.id,": unmute track"),"tealPale","".concat("audio"===o?"audio":n._videoTrackType,"-").concat(r.id," muted=").concat(r.muted),""),console.log("event",e),console.log("RtcPlayer",n),console.groupEnd()}),n._streams[o]),i="audio"===o?"audio":n._videoTrackType;a.addTrack(r),null!=(t=n._onTrackChange)&&t.call(n,{id:n.id,type:"add",track:r,mediaType:i,player:n,stream:a}),DEBUG&&(console.collapse("SRS.RtcPlayer","tealBg","user-".concat(n.id,": add track"),"tealPale","".concat(i,"-").concat(r.id," muted=").concat(r.muted),""),console.log("event",e),console.log("RtcPlayer",n),console.groupEnd())})),this._id=t}var t,n,i,l;return t=e,(n=[{key:"id",get:function(){return this._id}},{key:"pulled",get:function(){return this._pulled}},{key:"streams",get:function(){return this._streams}},{key:"audioStream",get:function(){return this._streams.audio}},{key:"videoStream",get:function(){return this._streams.video}},{key:"videoTrackType",get:function(){return this._videoTrackType}},{key:"onTrackChange",set:function(e){this._onTrackChange=e}},{key:"play",value:(i=function*(e){if(this._pulled)throw new Error("Player can only play once.");this._streams={audio:new MediaStream,video:new MediaStream},this._pc=new RTCPeerConnection(null),this._pc.ontrack=this._handleOnTrack,this._pc.addTransceiver("audio",{direction:"recvonly"}),this._pc.addTransceiver("video",{direction:"recvonly"});var t=yield this._pc.createOffer(),n=(yield this._pc.setLocalDescription(t),function(e){var t=function(e){var t=document.createElement("a"),n=(t.href=e.replace("rtmp://","http://").replace("webrtc://","http://").replace("rtc://","http://"),t.hostname),r=t.pathname.substr(1,t.pathname.lastIndexOf("/")-1),o=t.pathname.substr(t.pathname.lastIndexOf("/")+1);0<=(r=r.replace("...vhost...","?vhost=")).indexOf("?")&&(a=r.substr(r.indexOf("?")),r=r.substr(0,r.indexOf("?")),0<a.indexOf("vhost=")&&0<(n=a.substr(a.indexOf("vhost=")+"vhost=".length)).indexOf("&")&&(n=n.substr(0,n.indexOf("&")))),t.hostname===n&&/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/.test(t.hostname)&&(n="__defaultVhost__");var a="rtmp";0<e.indexOf("://")&&(a=e.substr(0,e.indexOf("://")));var i=t.port;return i||("http"===a?i=80:"https"===a?i=443:"rtmp"===a&&(i=1935)),e={url:e,schema:a,server:t.hostname,port:i,vhost:n,app:r,stream:o},function(e,t){if(t.user_query={},0!==e.length){for(var n=(e=0<=e.indexOf("?")?e.split("?")[1]:e).split("&"),r=0;r<n.length;r++){var o=n[r].split("=");t[o[0]]=o[1],t.user_query[o[0]]=o[1]}t.domain&&(t.vhost=t.domain)}}(t.search,e),e.port||"webrtc"!==a&&"rtc"!==a||("https"===e.user_query.schema||0===window.location.href.indexOf("https://")?e.port=443:e.port=1985),e}(e),n=(e=(e=t.user_query.schema)?"".concat(e,":"):"http:",t.port||1985);"https:"===e&&(n=t.port||443),(i=t.user_query.play||"/rtc/v1/play/").lastIndexOf("/")!==i.length-1&&(i+="/"),l="".concat(e,"//").concat(t.server,":").concat(n).concat(i);for(var r=0,o=Object.keys(t.user_query);r<o.length;r++){var a=o[r];"api"!==a&&"play"!==a&&(l+="&".concat(a,"=").concat(t.user_query[a]))}var i,l=l.replace("".concat(i,"&"),"".concat(i,"?"));return{apiUrl:l,streamUrl:i=t.url,schema:e,urlObject:t,port:n,tid:Number(parseInt((new Date).getTime()*Math.random()*100,10)).toString(16).substring(0,7)}}(e)),r=(t={api:n.apiUrl,tid:n.tid,streamurl:n.streamUrl,clientip:null,sdp:t.sdp},yield(yield fetch(n.apiUrl,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"},dataType:"json"})).json());return DEBUG&&(console.collapse("SRS.RtcPlayer","tealBg","user-".concat(this.id,": got answer"),"tealPale","",""),console.log("session",r),console.log("url",e),console.log("data",t),console.log("RtcPlayer",this),console.groupEnd()),yield this._pc.setRemoteDescription(new RTCSessionDescription({type:"answer",sdp:r.sdp})),r.simulator="".concat(n.schema,"//").concat(n.urlObject.server,":").concat(n.port,"/rtc/v1/nack/"),this._pulled=!0,setTimeout(this._updateTrackState,3e3),[this._pc,r]},l=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=i.apply(e,t);function l(e){o(a,n,r,l,u,"next",e)}function u(e){o(a,n,r,l,u,"throw",e)}l(void 0)}))},function(e){return l.apply(this,arguments)})},{key:"switchVideoType",value:function(e){this._videoTrackType!==e&&(this._videoTrackType=e)}},{key:"close",value:function(){var e;null!=(e=this._pc)&&e.close(),this._pc=null,this._streams&&(this._streams.audio&&(0,r.destroyMediaStream)(this._streams.audio),this._streams.video&&(0,r.destroyMediaStream)(this._streams.video),this._streams={}),this._pulled=!1}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),t.SrsRtcPlayer=n},24485:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SrsRtcPublisher=void 0;var r=n(89848);function o(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n=function(){function e(){var t=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");a(this,"_pc",void 0),a(this,"_sender",{}),a(this,"_videoTrackType","video"),a(this,"_onTrackChange",void 0),a(this,"_onStateChange",void 0),a(this,"_warmUpTracks",{}),a(this,"_streams",null),a(this,"sendTrack",(function(e,n){var r=e.kind;if(!r||!n)throw new Error("SrsRtcPublisher error: Track kind or mediaType is not setted.",e);var o=t.state,i=t._sender[r],l=e.id===t._warmUpTracks[r].id,u=("screen"===n&&(e.contentHint="detail"),"audio"===n&&(e.contentHint="speech"),i?i.replaceTrack(e):t._sender[r]=t._pc.addTrack(e),"audio"!==n&&(t._videoTrackType=n),t._streams[r]),s=u.getTracks().find((function(e){return e.kind===r})),c=(s&&u.removeTrack(s),u.addTrack(e),null!=(c=t._onTrackChange)&&c.call(t,{track:e,oldTrack:s,type:l?"unpublish":"publish",mediaType:n,stream:u}),Object.assign(t.state,a({},n,!l)));return!t._onStateChange||c.audio===o.audio&&c.video===o.video&&c.screen===o.screen||t._onStateChange(c,o,t),DEBUG&&(e.onended=function(n){console.collapse("SRS.RtcPublisher","tealBg","track.ended","tealPale","".concat("audio"===r?"audio":t._videoTrackType," (").concat(l?"warmUp, ":"").concat(e.label||e.id,")"),""),console.log("event",n),console.groupEnd(),e.onmute=null,e.onunmute=null},e.onmute=function(n){console.collapse("SRS.RtcPublisher","tealBg","track.mute","tealPale","".concat("audio"===r?"audio":t._videoTrackType," (").concat(e.muted?"muted, ":"").concat(l?"warmUp, ":"").concat(e.label||e.id,")"),""),console.trace("event",n),console.groupEnd()},e.onunmute=function(n){console.collapse("SRS.RtcPublisher","tealBg","track.unmute","tealPale","".concat("audio"===r?"audio":t._videoTrackType," (").concat(e.muted?"muted, ":"").concat(l?"warmUp, ":"").concat(e.label||e.id,")"),""),console.trace("event",n),console.groupEnd()},console.collapse("SRS.RtcPublisher","tealBg","send track","tealPale","".concat(n," (").concat(l?"warmUp, ":"").concat(e.label||e.id,")"),""),console.log("state",t.state),console.log("newState",c),console.log("oldState",o),console.log("track",e),console.log("sender",i),console.log("RtcPublisher",t),console.groupEnd()),e}))}var t,n,i,l;return t=e,(n=[{key:"sender",get:function(){return this._sender}},{key:"audioSender",get:function(){return this._sender.audio}},{key:"videoSender",get:function(){return this._sender.video}},{key:"videoTrackType",get:function(){return this._videoTrackType}},{key:"published",get:function(){return!!this._pc}},{key:"streams",get:function(){return this._streams}},{key:"audioStream",get:function(){return this._streams.audio}},{key:"videoStream",get:function(){return this._streams.video}},{key:"state",get:function(){return{audio:this.hasSendTrack("audio"),video:this.hasSendTrack("video"),screen:this.hasSendTrack("screen")}}},{key:"onTrackChange",set:function(e){this._onTrackChange=e}},{key:"onStateChange",set:function(e){this._onStateChange=e}},{key:"publish",value:(i=function*(e){if(this._pc)throw new Error("Publisher already published.");this._pc=new RTCPeerConnection(null),this._streams={audio:new MediaStream,video:new MediaStream};var t=e.url,n=e.stream,o=void 0===(o=e.publishKind)?"av":o,a=(e=void 0===(e=e.videoTrackType)?"video":e,"audio"!==o&&"av"!==o||(this._pc.addTransceiver("audio",{direction:"sendonly"}),this._warmUpTracks.audio=(0,r.createSilenceAudioTrack)(),this.sendTrack(null!=(a=null==n?void 0:n.getAudioTracks()[0])?a:this._warmUpTracks.audio,"audio")),"video"!==o&&"av"!==o||(this._pc.addTransceiver("video",{direction:"sendonly"}),this._warmUpTracks.video=(0,r.createBlackVideoTrack)(),this.sendTrack(null!=(a=null==n?void 0:n.getVideoTracks()[0])?a:this._warmUpTracks.video,e)),o=yield this._pc.createOffer(),yield this._pc.setLocalDescription(o),n=function(e){var t=function(e){var t=document.createElement("a"),n=(t.href=e.replace("rtmp://","http://").replace("webrtc://","http://").replace("rtc://","http://"),t.hostname),r=t.pathname.substr(1,t.pathname.lastIndexOf("/")-1),o=t.pathname.substr(t.pathname.lastIndexOf("/")+1);0<=(r=r.replace("...vhost...","?vhost=")).indexOf("?")&&(a=r.substr(r.indexOf("?")),r=r.substr(0,r.indexOf("?")),0<a.indexOf("vhost=")&&0<(n=a.substr(a.indexOf("vhost=")+"vhost=".length)).indexOf("&")&&(n=n.substr(0,n.indexOf("&")))),t.hostname===n&&/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/.test(t.hostname)&&(n="__defaultVhost__");var a="rtmp";0<e.indexOf("://")&&(a=e.substr(0,e.indexOf("://")));var i=t.port;return i||("http"===a?i=80:"https"===a?i=443:"rtmp"===a&&(i=1935)),e={url:e,schema:a,server:t.hostname,port:i,vhost:n,app:r,stream:o},function(e,t){if(t.user_query={},0!==e.length){for(var n=(e=0<=e.indexOf("?")?e.split("?")[1]:e).split("&"),r=0;r<n.length;r++){var o=n[r].split("=");t[o[0]]=o[1],t.user_query[o[0]]=o[1]}t.domain&&(t.vhost=t.domain)}}(t.search,e),e.port||"webrtc"!==a&&"rtc"!==a||("https"===e.user_query.schema||0===window.location.href.indexOf("https://")?e.port=443:e.port=1985),e}(e),n=(e=(e=t.user_query.schema)?"".concat(e,":"):"http:",t.port||1985);"https:"===e&&(n=t.port||443),(i=t.user_query.play||"/rtc/v1/publish/").lastIndexOf("/")!==i.length-1&&(i+="/"),l="".concat(e,"//").concat(t.server,":").concat(n).concat(i);for(var r=0,o=Object.keys(t.user_query);r<o.length;r++){var a=o[r];"api"!==a&&"play"!==a&&(l+="&".concat(a,"=").concat(t.user_query[a]))}var i,l=l.replace("".concat(i,"&"),"".concat(i,"?"));return{apiUrl:l,streamUrl:i=t.url,schema:e,urlObject:t,port:n,tid:Number(parseInt((new Date).getTime()*Math.random()*100,10)).toString(16).substr(0,7)}}(t),{api:n.apiUrl,tid:n.tid,streamurl:n.streamUrl,clientip:null,sdp:o.sdp});if(e=yield(yield fetch(n.apiUrl,{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"},dataType:"json"})).json(),DEBUG&&(console.collapse("SRS.RtcPublisher","tealBg","publish","tealPale","answer",""),console.log("url",t),console.log("data",a),console.log("session",e),console.log("RtcPublisher",this),console.groupEnd()),e.code&&400===e.code)throw new Error("SDPCODE400");return yield this._pc.setRemoteDescription(new RTCSessionDescription({type:"answer",sdp:e.sdp})),e.simulator="".concat(n.schema,"//").concat(n.urlObject.server,":").concat(n.port,"/rtc/v1/nack/"),[this._pc,e]},l=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=i.apply(e,t);function l(e){o(a,n,r,l,u,"next",e)}function u(e){o(a,n,r,l,u,"throw",e)}l(void 0)}))},function(e){return l.apply(this,arguments)})},{key:"close",value:function(){var e,t=this;null!=(e=this._pc)&&e.close(),this._pc=null,this._sender&&(Object.keys(this._sender).forEach((function(e){null!=(e=t._sender[e])&&e.track&&e.track.stop()})),this._sender={}),this._warmUpTracks&&(Object.keys(this._warmUpTracks).forEach((function(e){(e=t._warmUpTracks[e])&&e.stop()})),this._warmUpTracks={}),this._streams&&(this._streams.audio&&(0,r.destroyMediaStream)(this._streams.audio),this._streams.video&&(0,r.destroyMediaStream)(this._streams.video),this._streams={})}},{key:"getSendingTrack",value:function(e){var t="audio"===e?"audio":"video",n=this._sender[t];return null==n||!n.track||"audio"!==e&&this._videoTrackType!==e||n.track.id===this._warmUpTracks[t].id?null:n.track}},{key:"hasSendTrack",value:function(e){return!!this.getSendingTrack(e)}},{key:"sendTrackFromMediaStream",value:function(e,t){return"audio"===t?this.sendTrack(e.getAudioTracks()[0],t):this.sendTrack(e.getVideoTracks()[0],t)}},{key:"cancelTrack",value:function(e){return!!this.hasSendTrack(e)&&("audio"===e?this.sendTrack(this._warmUpTracks.audio,e):this.sendTrack(this._warmUpTracks.video,e),!0)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),t.SrsRtcPublisher=n},17781:(e,t)=>{"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(e,t,n){var r=e;if(t.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object");t.set(e,n)}function o(e,t){return(t=i(e,t,"get")).get?t.get.call(e):t.value}function a(e,t,n){if((t=i(e,t,"set")).set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function i(e,t,n){if(t.has(e))return t.get(e);throw new TypeError("attempted to "+n+" private field on non-instance")}Object.defineProperty(t,"__esModule",{value:!0}),t.SrsRtcSignaling=void 0;var l=new WeakMap,u=new WeakMap,s=new WeakMap,c=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(r(this,l,{writable:!0,value:null}),r(this,u,{writable:!0,value:new Map}),r(this,s,{writable:!0,value:null}),!t)throw new Error("onmessage is required");a(this,s,t)}var t,i;return t=e,(i=[{key:"connect",value:function(e,t,n,r){var i=this;return e="".concat(e,"://").concat(t,"/sig/v1/rtc"),a(this,l,new WebSocket("".concat(e,"?room=").concat(n,"&display=").concat(r))),o(this,l).onmessage=function(e){e=JSON.parse(e.data);var t=o(i,u).get(e.tid);t?(t.resolve(e.msg),o(i,u).delete(e.tid)):null!=(t=o(i,s))&&t.call(i,e.msg)},new Promise((function(e,t){o(i,l).onopen=function(t){return e(t)},o(i,l).onerror=function(e){return t(e)}}))}},{key:"send",value:function(e){var t=this;return new Promise((function(n,r){var a={tid:(Date.now()*Math.random()*100).toString(16).substring(0,7),msg:e};o(t,u).set(a.tid,{resolve:n,reject:r}),o(t,l).send(JSON.stringify(a))}))}},{key:"close",value:function(){var e;if(null!=(e=o(this,l))&&e.close(),a(this,l,null),0<o(this,u).size){var t,r=function(e,t){var r,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return o&&(e=o),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==o.return||o.return()}finally{if(l)throw a}}}}(o(this,u).values());try{for(r.s();!(t=r.n()).done;)t.value.reject("close")}catch(e){r.e(e)}finally{r.f()}}o(this,u).clear()}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.SrsRtcSignaling=c},73692:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showContextMenuWithItems=void 0;var r=(n=n(81087))&&n.__esModule?n:{default:n};function o(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.showContextMenuWithItems=function(e,t,n){var o=n.event,i=n.options,l=(n=n.callback,{x:o.clientX,y:o.clientY});i&&i.position&&Object.assign(l,i.position),!t.length||(o&&(!o.preventDefault||i&&!1===i.preventDefault||o.preventDefault(),!o.stopPropagation||i&&!1===i.stopPropagation||o.stopPropagation()),i&&(delete i.copySelect,delete i.preventDefault,delete i.stopPropagation,delete i.linkTarget,delete i.position),o="contextmenu-".concat(e.replace(/[.,]/g,"_")),r.default.show(l,t,a({id:o,className:o},i),n))}},98649:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryRemoveLastDivider=t.tryAddDividerItem=t.showContextMenu=t.removeContextMenuCreator=t.isDividerItem=t.isCreatorMatch=t.getMenuItemsForContext=t.getContextMenuItems=t.formatContextMenuItems=t.displayContextMenu=t.addContextMenuCreator=t.addContextMenuAlias=void 0;var r=s(n(81087)),o=s(n(61997)),a=s(n(61862)),i=n(64393),l=s(n(94128)),u=n(48389);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=m(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e){return e&&(["divider","-","separator"].includes(e)||"divider"===e.type)}function b(e){return e.length&&g(e[e.length-1])&&e.pop(),e}function v(e,t){var n=[],r=(Object.keys(j).forEach((function(t){t=j[t],I(t,e)&&n.push({order:void 0!==t.order?t.order:n.length,creator:t})})),Number.MAX_SAFE_INTEGER/2),o=(n.sort((function(e,t){return(e.creator.extension?r+e.order:e.order)-(t.creator.extension?r+t.order:t.order)})),[]);return n.forEach((function(e){var n=D(e.creator,t);n.length&&(e.skipAddDivider||T(o),o.push.apply(o,h(n)))})),o}function w(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(Array.isArray(e))return e.map((function(e){return w(e)}));if("string"==typeof e&&"@"===e[0])return A(e,t);if(("string"==typeof e||e instanceof Set)&&(e={match:e}),"function"==typeof t?e.create=t:Array.isArray(t)&&(e.items=t),e.id||(e.id=(0,o.default)()),"string"==typeof e.match&&(e.match=e.match.split(",")),Array.isArray(e.match)&&(e.match=new Set(e.match)),"object"===p(r)&&r&&Object.assign(e,r),n.g.ExtsRuntime&&void 0!==e.apiLevel){var a,i=d(e.match);try{for(i.s();!(a=i.n()).done;){var l=a.value;try{n.g.ExtsRuntime.registerExtensionAPI({name:"contextmenu.addContextMenuCreator.".concat(l),type:"host",level:e.apiLevel})}catch(e){DEBUG&&console.error(e)}}}catch(e){i.e(e)}finally{i.f()}}return(j[e.id]=e).id}function O(e){return!!j[e]&&(delete j[e],!0)}function S(e,t){var n=[],r={};return e.forEach((function(e){if(g(e))return T(n);var o,i;null!==e&&"object"===p(e)&&(o=e.labels,(o="object"===p(i=e.label)?i:o)&&(e.label=o[a.default.name]||o.$default||i,delete e.labels),(o=(e=t?t(e):e).id)?"number"==typeof(i=r[o])?n[i]=e:(r[o]=n.length,n.push(e)):n.push(e))})),b(n.map((function(e,t){return t="number"==typeof e.order?e.order:t+1e-4,delete e.order,{item:e,order:t}})).sort((function(e,t){return e.order-t.order})).map((function(e){return e.item})))}function _(e){var t,n,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,u=("string"==typeof(e="string"==typeof e&&"@"===e[0]?x[e]:e)&&e.includes(",")&&(e=e.split(",")),r.event),s=void 0===(s=r.options)?{}:s,c=[];if(Array.isArray(e))return t=r.contexts,n=s.linkTarget,e.forEach((function(e){e=e.trim();var o,a=f(f({},r),t&&t[e]);n&&null!=(o=a.options)&&o.linkTarget?n=!1:a.options&&(a.options.linkTarget=!1),c.push.apply(c,h(_(e,a,!1,c)))})),o?S(c):c;var d,p,m=0;u&&s.linkTarget&&"link"!==e&&(p=r.url,(u=(s.url||p||u.target.href||(null==(p=u.target.parentElement)?void 0:p.href)||"").trim())&&(0,i.isWebUrl)(u)&&(p=v("link",f(f({},r),{},{url:u})))&&p.length&&(m=p.length,c.push.apply(c,h(p)))),(u=v(e,r))&&u.length&&(p=T(c)).push.apply(p,h(u)),!s.copySelect||!k.copySelectText||l&&l.find((function(e){return"copy-selected-text"===e.id}))||c.find((function(e){return"copy-selected-text"===e.id}))||(e=s.selectedText||document.getSelection().toString().trim())&&(20<(e=-1<(p=e.indexOf("\n"))?e.substr(0,p):e).length&&(e="".concat(e.substr(0,20),"...")),m<3&&(d={id:"copy-selected-text",label:a.default.format("menu.copy.select",e),icon:"mdi-clipboard-text",click:k.copySelectText})),d&&("first"===s.copySelect?c.unshift(d):T(c).push(d));var y=s.exclude;return u=c,y&&("string"==typeof y&&(y=y.split(",")),(y=Array.isArray(y)?new Set(y):y).size&&(u=u.filter((function(e){return e&&!y.has(null==e?void 0:e.id)})))),o?S(u):u}function C(e,t){if(-1===["ext.apps.navbar","ext.apps.navbarZentao"].indexOf(e)||(o=window.document.getElementsByClassName("collapse-menu-items"))[0]&&(o[0].style.cssText="display:block !important"),!t)throw new Error("Context must be set.");var n=(o=t=t instanceof Event?{event:t}:t).event,r=o.options,o=o.callback;if(!n)throw new Error("Context and context.event must be set.");var i="string"==typeof e&&"@"===e[0]?x[e]:e,l=_(i,t)||[];return DEBUG&&(console.collapse("ContextMenu","greenBgLight",i,"greenPale"),e!==i&&console.log("alias",e),console.log("context",t),console.log("items",l),console.groupEnd()),e={x:n.clientX,y:n.clientY},r&&r.position&&Object.assign(e,r.position),(t=!!l.length)||l.push({label:a.default.string("common.noAvailableActions"),disabled:!0}),n&&(!n.preventDefault||r&&!1===r.preventDefault||n.preventDefault(),!n.stopPropagation||r&&!1===r.stopPropagation||n.stopPropagation()),r&&(delete r.copySelect,delete r.preventDefault,delete r.stopPropagation,delete r.linkTarget,delete r.position),n="contextmenu-".concat(i.replace(/[.,]/g,"_")),M(e,l,f({id:n,className:n},r),o),t}var E,P=l.default.access("clipboard"),k=l.default.access("ui"),j={},x={},M=(t.isDividerItem=g,r.default.show),T=(t.displayContextMenu=M,t.tryRemoveLastDivider=b,function(e){return e.length&&!g(e[e.length-1])&&e.push({type:"divider"}),e}),I=(t.tryAddDividerItem=T,function(e,t){return"string"==typeof e.match&&(e.match=e.match.split(",")),Array.isArray(e.match)&&(e.match=new Set(e.match)),e.match&&e.match.has(t)}),D=(t.isCreatorMatch=I,function(e,t){if(e.extension&&!n.g.ExtsRuntime.checkExtensionAPIPermission(e.extension,"ext.getExtension"))return DEBUG&&console.warn('Cannot get menu items from creator, because the extension of creator "'.concat(e.extension,'" is not available.')),[];var r=e.items||[];return e.create&&(t=e.create(t))&&t.length&&r.push.apply(r,h(t)),e.formatter?r.map(e.formatter):r}),A=(t.addContextMenuCreator=w,function(e,t){x["@"===e[0]?e:"@".concat(e)]=t.split(",")});t.addContextMenuAlias=A,t.removeContextMenuCreator=O,t.formatContextMenuItems=S,t.getMenuItemsForContext=_,t.showContextMenu=C,t.getContextMenuItems=function(e,t){if(-1===["ext.apps.navbar","ext.apps.navbarZentao"].indexOf(e)||(n=window.document.getElementsByClassName("collapse-menu-items"))[0]&&(n[0].style.cssText="display:block !important"),!t)throw new Error("Context must be set.");if(!(t=t instanceof Event?{event:t}:t).event)throw new Error("Context and context.event must be set.");var n="string"==typeof e&&"@"===e[0]?x[e]:e,r=_(n,t)||[];return DEBUG&&(console.collapse("ContextMenu","greenBgLight",n,"greenPale"),e!==n&&console.log("alias",e),console.log("context",t),console.log("items",r),console.groupEnd()),r},w("link",(function(e){var t,n=e.event,r=e.options,o=(e=e.url,((r&&r.url?r.url:e||n.target.href)||"").trim());if((0,i.isWebUrl)(o))return t=document.getSelection().toString().trim(),n&&""===t&&(t=n.target.innerText||(n.target.attributes.title?n.target.attributes.title.value:"")),r=[{id:"open-link",label:a.default.string("common.openLink"),click:function(){k.openExternal(o)},icon:"mdi-open-in-new"}],P&&P.writeText&&(r.push({id:"copy-link",label:a.default.string("common.copyLink"),click:function(){P.writeText(o)},icon:"mdi-link"}),t&&t!==o&&"".concat(t,"/")!==o?r.unshift({id:"copy-selected-text",label:a.default.format("common.copyFormat",25<t.length?"".concat(t.substr(0,25),""):t),click:function(){P.writeText(t)},icon:"mdi-content-copy"}):r.unshift({id:"copy-selected-text",hidden:!0})),r})),P&&P.writeText&&w("emoji",(function(e){var t=e.emoji;return e=[],t&&e.push({id:"copy-emoticon",icon:"mdi-emoticon-outline",label:a.default.string("common.copy"),click:function(){P.writeText(t)}}),e})),n.g.ExtsRuntime&&(E=n.g.ExtsRuntime.registerExtensionAPI,[{name:"contextmenu.addContextMenuCreator",level:5,func:function(e,t){var r,o=n.g.ExtsRuntime.exts.getExt(this.name);if("string"!=typeof e)throw r=new TypeError('Param "contextNamesOrAliasName" must be a string.'),DEBUG&&(console.collapse("Extension","greenBg",o.name,"redPale",r.message,"red"),console.log("contextNamesOrAliasName",e),console.log("createFunc",t),console.log("extension",o),console.error("error",r),console.groupEnd()),r;if("@"!==e[0]){var a,i=d(e=e.split(","));try{for(i.s();!(a=i.n()).done;){var l,s=a.value;if(!n.g.ExtsRuntime.checkExtensionAPIPermission(o.name,"contextmenu.addContextMenuCreator.".concat(s)))throw l=new Error('Call extension api "contextmenu.addContextMenuCreator.'.concat(s,'" failed, because the extension "').concat(o.name,'" has not permission to access the api.')),DEBUG&&(console.collapse("Extension","greenBg",o.name,"redPale",l.message,"red"),console.log("contextNamesOrAliasName",e),console.log("createFunc",t),console.log("extension",o),console.error("error",l),console.groupEnd()),l}}catch(e){i.e(e)}finally{i.f()}}return 1===e.length&&(e=e[0]),w(e,t,{formatter:function(e){return(e=o.formatContextMenuItem?o.formatContextMenuItem(e):e).click&&!n.g.ExtsRuntime.checkExtensionAPIPermission(o.name,"window.document")&&(e._originalClick=e.click,e.click=function(t,n,r){return r?e._originalClick(t,n,(0,u.createEventProxy)(r)):e._originalClick(t,n)}),e},extension:o.name})}},{name:"contextmenu.showContextMenu",level:4,func:C},{name:"contextmenu.removeContextMenuCreator",level:0,func:function(e){var t=j[e];return!(!t||t.extension!==this.name)&&O(e)}}].forEach((function(e){return E(e)}))),DEBUG&&(n.g.$contextMenuCreators=j)},63785:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCommonDataItem=function(e,t){return a.apply(this,arguments)},t.putCommonDataItem=function(e,t,n){return r.default.database.common.put({type:e,key:t,value:n})};var r=(t=n(33594))&&t.__esModule?t:{default:t};function o(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function a(){var e;return e=function*(e,t){if(e=yield r.default.database.common.get({type:e,key:t}))return e.value},(a=function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function l(e){o(i,r,a,l,u,"next",e)}function u(e){o(i,r,a,l,u,"throw",e)}l(void 0)}))}).apply(this,arguments)}},89515:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.DataChannel=void 0;var o=n(84401);function a(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=l(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function l(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=d(e);if(n=t?(n=d(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return f(o)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e);var n=c(r);function r(){var e,t,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=this,i=r;if(a instanceof i)return t=void 0,(e="key")in(i=f(a=n.call(this,o)))?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,a.key=null!=(i=o.key)?i:"id",a;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"publish",value:function(e){if(Array.isArray(e)){var t,n=i(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.publications.set(r[this.key],r)}}catch(e){n.e(e)}finally{n.f()}}else this.publications.set(e[this.key],e);this.tryNotifySubscribers()}},{key:"notifySubscribers",value:function(){if(this.publications.size){var e,t=[],n=this.getSubscription(o.EVENT_ANY),r=(null!=n&&n.size&&t.push.apply(t,a(n)),i(this.publications.keys()));try{for(r.s();!(e=r.n()).done;){var l=e.value,u=this.getSubscription(l);u&&t.push.apply(t,a(u))}}catch(e){r.e(e)}finally{r.f()}if(t.length){var s,c=i(new Set(t));try{for(c.s();!(s=c.n()).done;){var f,d=s.value,p=this.getSubscriber(d);p&&(f=null,p.event===o.EVENT_ANY||p.events&&p.events[0]===o.EVENT_ANY?f=Array.from(this.publications.values()):p.event?f=this.publications.get(p.event):p.events?f=p.events.map(this.publications.get.bind(this.publications)):console.error("DataChannel error: subscriber has not any events.",{subscriber:p,$this:this,subscriberID:d}),p.listener(f))}}catch(e){c.e(e)}finally{c.f()}}this.timerID=null,this.publications.clear()}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.EventChannel),t.DataChannel=n},39341:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.createDatabase=t.createAndOpenDatabase=void 0;var r=l(n(49520)),o=l(n(92691)),a=l(n(75738)),i=l(n(58851));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){c(a,r,o,i,l,"next",e)}function l(e){c(a,r,o,i,l,"throw",e)}i(void 0)}))}}function d(e){return p?p.identify!==e&&(p.destroy(),p=new b(e)):p=new b(e),p}var p=null;t.createDatabase=d,n=function(){var e=f((function*(e){var t=d(e);return yield t.open(),DEBUG&&(console.collapse("Database opened","tealBg",e,"tealPale"),console.log("db",t),console.groupEnd()),t}));return function(t){return e.apply(this,arguments)}}(),t.createAndOpenDatabase=n;var h="RecentChats",m="&gid,lastSummary,timeText",y="common",g="++id,*type,*key,[type+key],value",b=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");s(this,"identify",void 0),s(this,"options",void 0),s(this,"db",void 0),this.identify=t,this.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({autoOpen:!1},n),this.init()}var t,n,l;return t=e,(n=[{key:"init",value:function(){var e;this.db=new r.default(this.identify,this.options),this.db.version(1).stores(s({},o.default.NAME,o.default.SCHEMA.dexieFormat)),this.db.version(2).stores((s(e={},o.default.NAME,o.default.SCHEMA.dexieFormat),s(e,h,m),e)),this.db.version(3).stores((s(e={},o.default.NAME,o.default.SCHEMA.dexieFormat),s(e,h,m),s(e,a.default.NAME,a.default.SCHEMA.dexieFormat),e)),this.db.version(4).stores((s(e={},o.default.NAME,o.default.SCHEMA.dexieFormat),s(e,i.default.NAME,i.default.SCHEMA.dexieFormat),s(e,h,m),s(e,a.default.NAME,a.default.SCHEMA.dexieFormat),e)),this.db.version(5).stores((s(e={},o.default.NAME,o.default.SCHEMA.dexieFormat),s(e,i.default.name,i.default.SCHEMA.dexieFormat),s(e,h,null),s(e,a.default.NAME,a.default.SCHEMA.dexieFormat),e)),this.db.version(6).stores((s(e={},o.default.NAME,o.default.SCHEMA.dexieFormat),s(e,i.default.name,null),s(e,i.default.NAME,i.default.SCHEMA.dexieFormat),s(e,a.default.NAME,a.default.SCHEMA.dexieFormat),e)),this.db.version(7).stores((s(e={},o.default.NAME,o.default.SCHEMA.dexieFormat),s(e,i.default.name,null),s(e,i.default.NAME,i.default.SCHEMA.dexieFormat),s(e,a.default.NAME,a.default.SCHEMA.dexieFormat),e)),this.db.version(8).stores((s(e={},o.default.NAME,o.default.SCHEMA.dexieFormat),s(e,i.default.name,null),s(e,i.default.NAME,i.default.SCHEMA.dexieFormat),s(e,a.default.NAME,a.default.SCHEMA.dexieFormat),s(e,y,g),e)),this.db.version(9).stores((s(e={},o.default.NAME,o.default.SCHEMA.dexieFormat),s(e,i.default.name,null),s(e,i.default.NAME,i.default.SCHEMA.dexieFormat),s(e,a.default.NAME,a.default.SCHEMA.dexieFormat),s(e,y,g),e)),this.db.version(10).stores((s(e={},o.default.NAME,o.default.SCHEMA.dexieFormat),s(e,i.default.name,null),s(e,i.default.NAME,i.default.SCHEMA.dexieFormat),s(e,a.default.NAME,a.default.SCHEMA.dexieFormat),s(e,y,g),e)).upgrade((function(e){e.table(i.default.NAME).where("gid").equalsIgnoreCase("notification").delete(),e.table(o.default.NAME).where("cgid").equalsIgnoreCase("notification").delete()}))}},{key:"open",value:(l=f((function*(){if(!this.db.isOpen())try{yield this.db.open()}catch(e){yield this.db.delete(),this.init(),yield this.open()}return this.db})),function(){return l.apply(this,arguments)})},{key:"isOpen",get:function(){return!!this.db&&this.db.isOpen()}},{key:"chatMessages",get:function(){return this.isOpen?this.db.table(o.default.NAME):null}},{key:"members",get:function(){return this.isOpen?this.db.table(a.default.NAME):null}},{key:"chats",get:function(){return this.isOpen?this.db.table(i.default.NAME):null}},{key:"common",get:function(){return this.isOpen?this.db.table(y):null}},{key:"all",get:function(){return this.isOpen?this.db.tables:null}},{key:"getTable",value:function(e){return this.db.table(e)}},{key:"destroy",value:function(){this.db.close()}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();s(t.default=b,"VERSION",10)},55292:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataStore=void 0;var r=(f=n(84836))&&f.__esModule?f:{default:f},o=n(81595),a=n(89515);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=u(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function u(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var f=function(){function e(t,n){var o=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},l=this,u=e;if(!(l instanceof u))throw new TypeError("Cannot call a class as a function");c(this,"_name",void 0),c(this,"_identify",void 0),c(this,"_key",void 0),c(this,"_cache",void 0),c(this,"_channel",void 0),c(this,"_recentAccessLimit",void 0),c(this,"_recentAccessList",void 0),c(this,"_recentAccessSaveTask",void 0),c(this,"beforeSubscribe",void 0),c(this,"afterSubscribe",void 0),c(this,"afterUnsubscribe",void 0),c(this,"getItemFromCache",(function(e){var t=o._cache.get(e);return t&&o.recordRecentAccess(e),t})),u=void 0===(l=i.key)?"id":l,l=void 0===(l=i.channelDelayTime)?500:l,i=void 0===(i=i.recordRecentAccess)?0:i,this._name=t,this._identify=n,this._key=u,this._cache=new Map,this._channel=new a.DataChannel({key:u,delayTime:l}),(this._recentAccessLimit=i)&&(this._recentAccessList=[],this._recentAccessSaveTask=new r.default(this.saveRecentAccessList.bind(this),3e3))}var t,n,u;function s(e){return u.apply(this,arguments)}return t=e,(n=[{key:"channel",get:function(){return this._channel}},{key:"size",get:function(){return this._cache.size}},{key:"identify",get:function(){return this._identify}},{key:"all",get:function(){return Array.from(this._cache.values())}},{key:"allKeys",get:function(){return Array.from(this._cache.keys())}},{key:"recentAccessList",get:function(){return this._recentAccessList}},{key:"recordRecentAccess",value:function(e){if(!this._recentAccessLimit)return!1;var t,n=l(e=Array.isArray(e)?e:[e]);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=this._recentAccessList.indexOf(r);-1<o&&this._recentAccessList.splice(o,1),this._recentAccessList.unshift(r)}}catch(e){n.e(e)}finally{n.f()}this._recentAccessList.length>this._recentAccessLimit&&this._recentAccessList.splice(this._recentAccessLimit-1,this._recentAccessLimit-this._recentAccessList.length),this._recentAccessSaveTask.do()}},{key:"saveRecentAccessList",value:function(){this._recentAccessList&&(0,o.setStoreItem)("DATASTORE::".concat(this._identify,"::").concat(this._name),this._recentAccessList)}},{key:"reset",value:function(e){if(this._identify!==e)return this._identify=e,this._cache.clear(),this._channel.clearPublications(),this._recentAccessLimit&&(this._recentAccessSaveTask.cancel(),this._recentAccessList.length&&this.saveRecentAccessList(),this._recentAccessList=(0,o.getStoreItem)("DATASTORE::".concat(this._identify,"::").concat(this._name),[])),!0;var t,n=l(this._cache.values());try{for(n.s();!(t=n.n()).done;)t.value.expired=!0}catch(e){n.e(e)}finally{n.f()}return!1}},{key:"hasCacheItem",value:function(e){return this._cache.has(e)}},{key:"deleteCacheItem",value:function(e){return this._cache.delete(e)}},{key:"getItemsFromCache",value:function(e){var t=this;return e.map((function(e){var n=t._cache.get(e);return n&&t.recordRecentAccess(e),n}))}},{key:"store",value:(u=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.normalizeFunc;if(e){if(Array.isArray(e)){if(!e.length)return}else e=[e];if(n){var r,o=[],a=l(e);try{for(a.s();!(r=a.n()).done;){var i=n(r.value,this);this._cache.set(i[this._key],i),o.push(i)}}catch(e){a.e(e)}finally{a.f()}return t.skipPublish||this._channel.publish(o),o}var u,s=l(e);try{for(s.s();!(u=s.n()).done;){var c=u.value;this._cache.set(c[this._key],c)}}catch(e){s.e(e)}finally{s.f()}return t.skipPublish||this._channel.publish(e),e}},s.toString=function(){return u.toString()},s)},{key:"subscribe",value:function(e,t){return this.beforeSubscribe&&this.beforeSubscribe(e,t),t=Array.isArray(e)?this._channel.subscribeSome(e,t):this._channel.subscribe(e,t),this.afterSubscribe&&this.afterSubscribe(e,t),t}},{key:"unsubscribe",value:function(e){Array.isArray(e);var t=this._channel.unsubscribe(e);return this.afterUnsubscribe&&this.afterUnsubscribe(e,t),t}},{key:"subscribeAny",value:function(e){return this._channel.subscribeAny(e)}},{key:"filter",value:function(e){var t,n=[],r=l(this._cache);try{for(r.s();!(t=r.n()).done;){var o=i(t.value,2),a=o[0],u=o[1];e(u,a)&&n.push(u)}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"forEach",value:function(e){var t,n=l(this._cache);try{for(n.s();!(t=n.n()).done;){var r=i(t.value,2),o=r[0];if(!1===e(r[1],o))break}}catch(e){n.e(e)}finally{n.f()}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.DataStore=f},27945:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(21614),o=(o=n(6511))&&o.__esModule?o:{default:o};function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function l(e,t){return(t=u(e,t,"get")).get?t.get.call(e):t.value}function u(e,t,n){if(t.has(e))return t.get(e);throw new TypeError("attempted to "+n+" private field on non-instance")}n=n(48389);var s=new WeakMap,c=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");i(this,"$",{}),i(this,"entityType",void 0),function(e,t,n){var r=e;if(t.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object");t.set(e,{writable:!0,value:void 0})}(this,s),"object"===a(t)&&this.$set(t),this.ensureGid(),this.entityType=null!=n?n:e.name}var t,n;return t=e,(n=[{key:"proxyHandler",get:function(){return e.PROXY_HANDLER}},{key:"proxy",get:function(){return l(this,s)||function(e,t,n){if((t=u(e,t,"set")).set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(this,s,new Proxy(this,this.proxyHandler)),l(this,s)}},{key:"ensureGid",value:function(){var e;null==(e=this.$).gid&&(e.gid=(0,r.v4)())}},{key:"plain",value:function(){return this.ensureGid(),this.$}},{key:"gid",get:function(){return this.$get("gid")}},{key:"id",get:function(){return this.$get("id",0)},set:function(e){this.$set("id",e)}},{key:"schema",get:function(){return e.SCHEMA}},{key:"$set",value:function(e,t){var n,r=this;return"object"===a(e)?Object.keys(e).forEach((function(t){r.$set(t,e[t])})):((n=this.schema)&&(t=n.convertSetterValue(e,t,this)),this.$[e]=t),this}},{key:"$get",value:function(e,t){var n=this.$[e],r=this.schema;return void 0===(n=r?r.convertGetterValue(e,n,this):n)?t:n}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();i(t.default=c,"NAME","Entity"),i(c,"SCHEMA",new o.default({gid:{type:"string",primaryKey:!0},id:{type:"int",indexed:!0}})),i(c,"PROXY_PROPERTIES",(0,n.createProxyPropertiesMap)(["gid","id"])),i(c,"PROXY_HANDLER",(0,n.createProxyHandler)(c.PROXY_PROPERTIES))},33594:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initUserDatabase=t.endDBBusyTask=t.default=t.beginDBBusyTask=void 0,t.isDBBusy=function(){return 0<s},t.onceDBBusyStatusChanged=d,t.setCallbackOnInitedDatabase=void 0,t.waitDBNotBusy=p;var r=n(39341);function o(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function a(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=null,u=[],s=0,c=[];function f(e){var t=0<s,n=(0<arguments.length&&void 0!==e&&e?s=Math.max(0,s-1):s+=1,0<s);if(t!=n&&c.length){var r,o=a(c);try{for(o.s();!(r=o.n()).done;)(0,r.value)(n)}catch(e){o.e(e)}finally{o.f()}c.length=0}}function d(e){c.includes(e)||c.push(e)}function p(){return 0<s?new Promise((function(e){d((function(){return e()}))})):Promise.resolve()}t.beginDBBusyTask=function(){return f()},t.endDBBusyTask=function(){return f(!0)};var h=function(){e=function*(e){PERF_MARK("databaseInitBegin"),yield p(),l=yield(0,r.createAndOpenDatabase)(e);var t,n=a(u);try{for(n.s();!(t=n.n()).done;)yield(0,t.value)(e)}catch(e){n.e(e)}finally{n.f()}return PERF_MARK("databaseInitEnd","databaseInitBegin","databaseInitTime"),l};var e,t=function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function l(e){o(i,r,a,l,u,"next",e)}function u(e){o(i,r,a,l,u,"throw",e)}l(void 0)}))};return function(e){return t.apply(this,arguments)}}();t.initUserDatabase=h,t.setCallbackOnInitedDatabase=function(e){return!u.includes(e)&&(u.push(e),!0)},h={get database(){return l}},t.default=h,DEBUG&&(n.g.$getDatabaseTable=function(){return l})},6511:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=n(16986);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(n=r=r||{}).int="int",n.float="float",n.string="string",n.boolean="boolean",n.object="object",n.array="array",n.set="set",n.timestamp="timestamp",n.datetime="datetime",n.json="json",n.any="any";var c={int:function(e){return"number"!=typeof e&&(e=Number.parseInt(e,10)),Number.isNaN(e)?0:e},float:function(e){return"number"!=typeof e?Number.parseFloat(e):e},string:function(e){return null!=e&&"string"!=typeof e?"".concat(e):e},boolean:function(e){return"string"==typeof e?"1"===e||"true"===e||"yes"===e:!!e},array:function(e){return Array.isArray(e)?e:"string"==typeof e?e.split(","):null!=e?[e]:[]},set:function(e){return e instanceof Set?e:Array.isArray(e)||"string"!=typeof e?new Set(e):(t=new Set,e.split(",").forEach((function(e){""!==e&&t.add(e)})),t);var t},timestamp:function(e){return(e="string"==typeof e?new Date(e).getTime():e)<1e10&&(e*=1e3),e},datetime:function(e){return e instanceof Date?e:new Date(e)},json:function(e){if("string"!=typeof e)return e;if((0,o.isNotEmptyString)(e))try{return JSON.parse(e)}catch(e){return null}return null}};n=function(){function e(t){var n=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");s(this,"primaryKey",void 0),s(this,"schema",void 0);var o=0;if(Object.keys(t).forEach((function(e){var a=t[e];if(a.type&&!(a.type in r))throw new Error("Cannot create schema, because the type(".concat(a.type,") is not a valid type."));DEBUG&&"boolean"===a.type&&(a.indexed||a.primaryKey)&&console.warn("Cannot use boolean type as index, see https://dexie.org/docs/Indexable-Type"),a.primaryKey&&(o+=1,n.primaryKey=e)})),1!==o)throw DEBUG&&console.trace("schema",t),new Error("Cannot create schema, because there has ".concat(o," primary key(s)."));this.schema=t}var t,n,o;return t=e,o=[{key:"extend",value:function(t,n){return new e(l(l({},t.schema),n))}}],(n=[{key:"of",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return this.schema[e]?l({type:r.any,indexed:!1},this.schema[e]):t?"object"===a(t)?t:{type:r.any,indexed:!1}:null}},{key:"convertValue",value:function(e,t){if(e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.of(e)){if(e.type&&"object"!==e.type&&"any"!==e.type)return c[e.type](t);void 0===t&&void 0!==e.defaultValue&&(t=e.defaultValue)}return t}},{key:"convertGetterValue",value:function(e,t,n){var r=this.of(e);if(r){if(r.getter)return r.getter.call(n,e);if(r.type&&"object"!==r.type&&"any"!==r.type)return c[r.type](t);void 0===t&&void 0!==r.defaultValue&&(t=r.defaultValue)}return t}},{key:"convertSetterValue",value:function(e,t,n){if(e=this.of(e)){if(e.setter)return e.setter.call(n,t,n);if(e.type&&"object"!==e.type&&"any"!==e.type)return c[e.type](t);void 0===t&&void 0!==e.defaultValue&&(t=e.defaultValue)}return t}},{key:"extend",value:function(t){return e.extend(this,t)}},{key:"dexieFormat",get:function(){var e=this,t=[this.primaryKey];return Object.keys(this.schema).forEach((function(n){var r;n!==e.primaryKey&&!1!==(r=e.schema[n]).indexed&&(r.unique?t.push("&".concat(n)):r.indexed&&t.push(n))})),t.join(",")}}])&&u(t.prototype,n),o&&u(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),t.default=n},65286:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Events=void 0;var l=((n=n(94128))&&n.__esModule?n:{default:n}).default.access("EventEmitter");n=function(){var e=u,t=l;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=i(e);if(n=t?(n=i(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==o)return o;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(u);function u(){var e;if(this instanceof u)return(e=n.call(this))._eventsMap=new Map,e._isMainProcess=!process.browser&&"renderer"!==process.type,e.setMaxListeners&&e.setMaxListeners(0),e;throw new TypeError("Cannot call a class as a function")}return e=u,(t=[{key:"on",value:function(e,t){o(i(u.prototype),"on",this).call(this,e,t);var n=Symbol(e);return t={id:n,listener:t,name:e},this._eventsMap.set(n,t),DEBUG_V&&(console.collapse("EVENT","orangeBg","on","orangePale",e,""),console.trace("event",t),console.groupEnd()),n}},{key:"once",value:function(e,t){var n=this,r=Symbol(e),a={id:r,name:e,listener:function(){n.off(r),t.apply(void 0,arguments)}};return o(i(u.prototype),"once",this).call(this,e,a.listener),this._eventsMap.set(r,a),DEBUG_V&&(console.collapse("EVENT","orangeBg","once","orangePale",e,""),console.trace("event",a),console.groupEnd()),r}},{key:"off",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,o=t;r<o.length;r++){var a,i=o[r];i&&this._eventsMap.has(i)&&(a=this._eventsMap.get(i),this.removeListener(a.name,a.listener),this._eventsMap.delete(i),DEBUG_V&&(console.collapse("EVENT","orangeBg","off","orangePale",a.name,""),console.trace("event",a),console.groupEnd()))}}},{key:"emit",value:function(e){for(var t,n=arguments.length,r=new Array(1<n?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];(t=o(i(u.prototype),"emit",this)).call.apply(t,[this,e].concat(r)),DEBUG_I&&(console.collapse("EVENT","orangeBg","emit","orangePale",e,""),console.log("args: ",r),console.trace("stacktrace"),console.groupEnd())}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),u}(),n=new(t.Events=n),t.default=n},12482:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PREVIEW_TYPES=t.MATCH_SCORE_MAP=t.CATEGORIES=void 0;var r=y(n(2568)),o=n(71782),a=n(64393),i=n(15973),l=n(39642),u=n(18876),s=y(n(94128)),c=n(7066),f=y(n(74160)),d=n(16986),p=["base64"],h=["blob"],m=["file"];function y(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var k=s.default.has("fs.pathExists"),j=[{name:"name",equal:100,include:50},{name:"category",equal:100,prefix:":"},{name:"cgid",equal:100,prefix:"#"},{name:"senderId",equal:100,prefix:"@"},{name:"extName",equal:100,prefix:"."}],x=(t.MATCH_SCORE_MAP=j,[{name:"doc",like:new Set(["doc","docx","ppt","pptx","xls","xlsx","key","page","number","pdf","txt","md","rtf","wps","html","htm","chtml","epub",""])},{name:"image",like:new Set(["jpg","jpeg","sketch","psd","png","apng","webp","gif","tiff","ico","icns","svg","bmp"])},{name:"media",like:new Set(["mp4","webm","ogm","ogv","avi","mp3","avm","ogg","opus"])},{name:"program",like:new Set(["js","exe","app","dmg","msi","bat","sh"])}]),M=(t.CATEGORIES=x,{image:new Set(["jpg","jpeg","png","apng","webp","gif","ico","icns","svg","bmp"]),video:new Set(["mp4","webm","ogm","ogv","avi"]),audio:new Set(["mp3","avm","ogg","opus"]),pdf:new Set(["pdf"]),doc:new Set(["doc","docx"]),ppt:new Set(["ppt","pptx"]),xls:new Set(["xls","xlsx"]),text:new Set(["txt"]),markdown:new Set(["md"]),html:new Set(["html","htm"]),code:new Set(["js","jsx","css","html","php","go","ini","java","py","json","cpp","c","cs","swift","sh","xml","yaml","ts","tsx","less","scss","dart","scss","rb","sql","kt","diff"])});t.PREVIEW_TYPES=M,n=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");(t=C({},t)).time&&(t.time=(0,c.createDate)(t.time).getTime()),this._data=t,this._onChange=null}var t,n,y,S,_;return t=e,n=[{key:"id",get:function(){return this._data.id}},{key:"gid",get:function(){return this._data.gid}},{key:"name",get:function(){return this._data.name}},{key:"time",get:function(){return this._data.time}},{key:"hasThumb",get:function(){return this._data.hasThumb}},{key:"thumbnailWidth",get:function(){return this._data.thumbnailWidth}},{key:"thumbnailHeight",get:function(){return this._data.thumbnailHeight}},{key:"messageID",get:function(){return this._data.messageID}},{key:"messageType",get:function(){return this._data.messageType}},{key:"cgid",get:function(){return this._data.cgid}},{key:"storageType",get:function(){return this._data.storageType||("image"===this.mediaType?"image":this.isMedia?"media":"other")}},{key:"storageName",get:function(){return"".concat(this.gid,".").concat(this.extName)}},{key:"storageThumbnailName",get:function(){return this.hasThumb?"".concat(this.gid,"_thumb.").concat(this.extName):this.storageName}},{key:"send",get:function(){return this._data.send}},{key:"isOK",get:function(){return!0===this._data.send}},{key:"cachePath",get:function(){return k?this._data.cachePath:null}},{key:"cacheThumbnailPath",get:function(){return k?this.hasThumb?this._data.cacheThumbnailPath:this.cachePath:null}},{key:"exceedAutoDownloadSize",get:function(){var e=f.default.ui["chat.image.autoDownloadSize"];return this.size>(0,d.convertBytes)(e)}},{key:"needAutoLoadOriginImage",get:function(){return this.hasThumb&&!(null!=this&&this.cachePath)&&!this.exceedAutoDownloadSize}},{key:"needLoadIamgeBtn",get:function(){return"image"===this.previewType&&this.hasThumb&&this.exceedAutoDownloadSize&&!(null!=this&&this.cachePath)}},{key:"networking",get:function(){return this._data.networking||(this._data.networking=new l.FileNetworking(this)),this._data.networking}},{key:"senderId",get:function(){return this._data.senderId}},{key:"size",get:function(){return this._data.size}},{key:"sendMethod",get:function(){return this._data.sendMethod},set:function(e){this._data.sendMethod=e}},{key:"originFile",get:function(){return this._data.originFile}},{key:"mimeType",get:function(){return this._data.type||""}},{key:"mediaType",get:function(){var e=this._data.mediaType;return e||("image"===(e=this.previewType)||"audio"===e||"video"===e?e:"")}},{key:"mediaWidth",get:function(){return this._data.width||0}},{key:"mediaHeight",get:function(){return this._data.height||0}},{key:"isMedia",get:function(){return!!this.mediaType}},{key:"isBase64",get:function(){return"base64"===this.mimeType}},{key:"mediaInfo",get:function(){var e=this.mediaType;return e?{type:e,width:this.mediaWidth,height:this.mediaHeight}:null}},{key:"originFileType",get:function(){var e=this.originFile;return e instanceof File?"file":e instanceof Blob?"blob":"string"==typeof e?"base64":""}},{key:"originFileUrl",get:function(){var e,t=this.originFile;return t?"string"==typeof t?(e=(0,u.dataURItoBlob)(t),URL.createObjectURL(e)):null!=t&&t.path?(0,u.convertLocalPathToUrl)(t.path):t instanceof Blob||t instanceof File?URL.createObjectURL(t):null:null}},{key:"remoteUrl",get:function(){return this.getRemoteUrl()}},{key:"thumbnailRemoteUrl",get:function(){return this.getRemoteUrl({isThumbnail:this.hasThumb})}},{key:"getRemoteUrl",value:function(e){if(this._data.url)return this._data.url;if(!this.id)return null;var t=(0,i.getCurrentUser)(),n=void 0===(n=(e=e||{}).preview)?!!this.previewType:n,o=e.isThumbnail,l=(e=void 0!==(e=e.withSid)&&e,{fileName:o?"thumb_".concat(this.name):this.name,time:Math.floor(this.time/1e3),id:this.id,gid:t.id});return t.serverName&&(l.ServerName=t.serverName),t.isVersionSupport("sidCookie")&&!s.default.isType("browser")&&!e||(l.sid=(0,r.default)(t.sessionID+(o?"thumb_".concat(this.name):this.name))),n&&(l.preview=1),t.makeServerUrl("fileDownload?".concat((0,a.stringifySearchParams)(l)))}},{key:"thumbnailViewUrl",get:function(){if(!this.hasThumb)return this.viewUrl;if(k){var e=this.cacheThumbnailPath;return e?(0,u.convertLocalPathToUrl)(e):(e=this.originFileUrl)||null}return this.thumbnailRemoteUrl}},{key:"viewUrl",get:function(){if(this._viewUrl)return this._viewUrl;var e=this.originFileUrl;return e?this._viewUrl=e:(this._viewUrl=null,k?(e=this.cachePath)?(this._viewUrl=(0,u.convertLocalPathToUrl)(e),this._viewUrl):null:this.remoteUrl)}},{key:"extName",get:function(){if(void 0===this._extName){var e=this.name;if("string"!=typeof e||!e.length)return"";var t=e.lastIndexOf(".");this._extName=-1<t?e.substr(t+1):""}return this._extName}},{key:"category",get:function(){if(!this._category){this._category="other";var e=this.extName;if(e){var t,n=function(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=O(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}(x);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.like.has(e)){this._category=r.name;break}}}catch(e){n.e(e)}finally{n.f()}}}return this._category}},{key:"previewType",get:function(){if(void 0===this._previewType){this._previewType="";var e=this.extName;if(e)for(var t=0,n=Object.entries(M);t<n.length;t++){var r=w(n[t],2),o=r[0];if(r[1].has(e.toLowerCase())){this._previewType=o;break}}}return this._previewType}},{key:"isInLocal",get:function(){return!this.id&&!this.messageID}},{key:"isInRemote",get:function(){return!!this.id}},{key:"isSendByMe",get:function(){return this.senderId===(0,i.getCurrentUserID)()}},{key:"editable",get:function(){return!!this._data.editable},set:function(e){this._data.editable=!!e}},{key:"onChange",set:function(e){this._onChange=e}},{key:"change",value:function(e,t){var n=this;return"string"==typeof e?this.change(E({},e,t)):(t=Object.keys(e).reduce((function(t,r){var o=n._data[r],a=e[r];return o!==a&&(t[r]=a,"cachePath"===r&&delete n._viewUrl),t}),{}),this.forceChange(t))}},{key:"forceChange",value:function(t){var n,r;return!!Object.keys(t).length&&(Object.assign(this._data,t),r=new e(C({},this._data)),null!=(n=this._onChange)&&n.call(this,this,r,t),!0)}},{key:"setOriginFile",value:function(e){var t;null!=(t=e)&&t.base64?e=e.base64:null!=(t=e)&&t.blob&&(e=e.blob),this.change({originFile:e})}},{key:"setCachePath",value:function(e){k&&(this.hasThumb&&1<arguments.length&&void 0!==arguments[1]&&arguments[1]?this.change({cacheThumbnailPath:e}):this.change({cachePath:e}))}},{key:"checkCachePath",value:(S=function*(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(!k)return!1;var t,n=this.cachePath,r=this.cacheThumbnailPath;if(!(r=(e=this.hasThumb&&e)?r:n))return!1;try{t=r;var o=yield k?s.default.call("fs.pathExists",t):Promise.resolve(!1);return o||this.change(E({},e?"cacheThumbnailPath":"cachePath","")),o}catch(e){return!1}},_=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=S.apply(e,t);function a(e){v(o,n,r,a,i,"next",e)}function i(e){v(o,n,r,a,i,"throw",e)}a(void 0)}))},function(){return _.apply(this,arguments)})},{key:"plain",value:function(){var e,t=this,n=["gid","id","name","isImage","senderId","send","height","width","size","time","type","hasThumb","thumbnailWidth","thumbnailHeight","editable"].reduce((function(e,n){var r=t._data[n];return void 0!==r&&(e[n]=r),e}),{});return void 0===n.send&&((e=this.networking).isNetworking?n.send=e.loaded:e.isFinished&&(n.send=!e.error)),n}},{key:"getMatchScore",value:function(e){return(0,o.matchScore)(j,this,e)}}],y=[{key:"fromFile",value:function(t,n){return new e(C({originFile:t,cachePath:t.path,name:t.name,size:t.size,send:0,type:t.type,time:Date.now()},n))}},{key:"fromBlob",value:function(t,n){return new e(C({originFile:t,name:"",size:t.size,send:0,type:t.type,time:Date.now()},n))}},{key:"fromBase64",value:function(t,n){if(!t)return null;var r=t.split(";")[0].split(":")[0];return t=(0,u.dataURItoBlob)(t),e.fromBlob(t,C(C({},n),{},{type:r}))}},{key:"fromMessage",value:function(t){var n=null!=(n=t.fileContent)?n:t.imageContent;return"base64"===(n=n||C(C({},JSON.parse(t.content)),{},{senderId:t.senderId,originFile:t.attachFile,time:t.sendTime,cachePath:t.cacheFilePath,messageID:t.id,messageType:"image"===t.contentType?"image":"file",cgid:t.cgid})).type?e.fromBase64(null!=(t=n.content)?t:n.originFile,n):new e(n)}},{key:"create",value:function(t){if(t&&"object"===b(t))return t instanceof e?t:t instanceof File?e.fromFile(t):t instanceof Blob?e.fromBlob(t):t.base64?(n=t.base64,r=g(t,p),e.fromBase64(n,r)):t.blob?(n=t.blob,r=g(t,h),e.fromBlob(n,r)):t.file?(n=t.file,r=g(t,m),e.fromFile(n,r)):"ChatMessage"===t.entityType?e.fromMessage(t):new e(t);throw new Error('Cannot create FileData, the "data" param is not an object');var n,r}}],n&&P(t.prototype,n),y&&P(t,y),Object.defineProperty(t,"prototype",{writable:!1}),e}(),t.default=n},39642:(e,t)=>{"use strict";function n(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){var n,o;n=e,o=r[t],t in n?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.FileNetworking=void 0;var o=function(){function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(!((o=this)instanceof(a=e)))throw new TypeError("Cannot call a class as a function");var o="",a=0,i=null,l=(this._fileData=t).send;!0===l?a=t.size:!1!==l&&"number"!=typeof l||(a=!1,o="uploading",i=new Error("UPLOAD_FILE_FAILED")),this._info=r({type:o,loaded:a,error:i},n)}var t,n;return t=e,(n=[{key:"fileData",get:function(){return this._fileData}},{key:"info",get:function(){return this._info}},{key:"loaded",get:function(){return this._info.loaded}},{key:"total",get:function(){var e;return null!=(e=this._info.total)?e:this._fileData.size}},{key:"type",get:function(){return this._info.type}},{key:"error",get:function(){return this.isNetworking?this._info.error:null}},{key:"isNetworking",get:function(){return!!this._info.type}},{key:"progress",get:function(){var e=this._fileData.size;if(!e)return 0;var t=this._info.loaded;return Math.max(0,Math.min(100,t/e*100))}},{key:"isInProgress",get:function(){return this.isNetworking&&this.progress<100&&!this.error}},{key:"isDownloading",get:function(){return"downloading"===this.type&&this.progress<100&&!this.error}},{key:"isUploading",get:function(){return"uploading"===this.type&&this.progress<100&&!this.error}},{key:"isFinished",get:function(){return this.isNetworking&&(100===this.progress||this.error)}},{key:"isFail",get:function(){return this.isNetworking&&!!this.error}},{key:"isDownloadFail",get:function(){return"downloading"===this.type&&this.error}},{key:"isUploadFail",get:function(){return"uploading"===this.type&&this.error}},{key:"update",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;this._info=r(r({},this._info),e),this._fileData.forceChange(r({networking:this.clone()},t))}},{key:"_start",value:function(e){if(!e||this.isInProgress)throw new Error("Start file ".concat(e," failed, current type is ").concat(this._info.type,"."));this.update({type:e,loaded:0,error:null})}},{key:"_updateLoaded",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(!e||this._info.type!==e)throw new Error("Update ".concat(e," progress failed, current type is ").concat(this._info.type,"."));if(n=Math.max(n,this.total),(e=Math.min(this.total,Math.max(this._info.loaded||0,t,0)))===this._info.loaded)return!1;this.update({loaded:e,total:n})}},{key:"_finish",value:function(e,t,n){if(!e||this._info.type!==e)throw new Error("Finish file ".concat(e," failed, current type is ").concat(this._info.type,"."));e=t?{error:t}:{loaded:this.total},this.update(e,n)}},{key:"startDownload",value:function(){return this._start("downloading")}},{key:"updateDownloadLoaded",value:function(e,t){return this._updateLoaded("downloading",e,t)}},{key:"finishDownloadFail",value:function(e){return this._finish("downloading",e)}},{key:"finishDownloadSuccess",value:function(e){return this._finish("downloading",null,e?{cachePath:e}:null)}},{key:"startUpload",value:function(){return this._start("uploading")}},{key:"updateUploadLoaded",value:function(e,t){return this._updateLoaded("uploading",e,t)}},{key:"finishUploadFail",value:function(e){return this._finish("uploading",e)}},{key:"finishUploadSuccess",value:function(e){return this._finish("uploading",null,r(r({},e),{},{send:!0}))}},{key:"reset",value:function(){this.update({type:"",loaded:0,error:null})}},{key:"clone",value:function(){return new e(this._fileData,this._info)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.FileNetworking=o},77925:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FILE_BROAD_MESSAGE_TYPES=void 0;var r=n(15973),o=(n=n(24260))&&n.__esModule?n:{default:n};function a(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}t.FILE_BROAD_MESSAGE_TYPES={readyToReceive:"readToReceive",cancelSend:"cancelSend",terminalSend:"terminalSend",rejctReceive:"rejctReceive",cancelReceive:"cancelReceive",reciveDone:"reciveDone"},n=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");l(this,"cgid",void 0),l(this,"config",void 0),l(this,"theOtherID",void 0),l(this,"speedMap",new Map),l(this,"offsetMap",new Map),l(this,"remainingTimeMap",new Map),l(this,"peerConn",null),l(this,"dataChannelMap",new Map),this.cgid=t,this.theOtherID=n,n=(t=(0,r.getCurrentUser)()).server;var o=t.stunPort;t=(t=t.iceServers)?t.split(",").filter((function(e){return!!e})):[],this.config=Object.freeze({iceServers:[{urls:["stun:".concat(n.hostname,":").concat(o)].concat(a(t))}]})}var t,n;return t=e,(n=[{key:"getOffset",value:function(e){return this.offsetMap.get(e)}},{key:"getSpeed",value:function(e){return this.speedMap.get(e)}},{key:"getRemainingTime",value:function(e){return this.remainingTimeMap.get(e)}},{key:"dataChannelSize",get:function(){return this.dataChannelMap.size}},{key:"closeConnection",value:function(){var e;null!=(e=this.peerConn)&&e.close(),this.peerConn=null}},{key:"sendWsMessage",value:function(e){return o.default.send({method:"datatransfer",params:{cgid:this.cgid,user:this.theOtherID,data:JSON.stringify(e),userID:(0,r.getCurrentUserID)()}})}},{key:"onGetCandidate",value:function(e){this.peerConn.addIceCandidate(new RTCIceCandidate({candidate:e.candidate,sdpMLineIndex:e.label,sdpMid:e.id}))}},{key:"logError",value:function(e){e&&("string"!=typeof e&&(e=e.toString()),DEBUG&&(console.collapse("RTC-File","indigoBg","Error","indigoPale"),console.log("error",e),console.groupEnd()))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),t.default=n},36255:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=u(n(65286)),a=u(n(77925)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=l(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(39483));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function c(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=m(e);if(n=t?(n=m(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return h(o)}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var g="rtc.initiator.dataChannel.status.change";n=function(e){var t=l;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e);var n,r,a=p(l);function l(){var e=this,t=l;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return y(h(e=a.call.apply(a,[this].concat(r))),"readerMap",new Map),y(h(e),"onSendProgressMap",new Map),e}return t=l,(e=[{key:"addSendProgressListener",value:function(e,t){this.onSendProgressMap.set(e,t)}},{key:"removeSendProgressListener",value:function(e){this.onSendProgressMap.delete(e)}},{key:"closeDataChannel",value:function(e){var t=this.dataChannelMap.get(e);t&&(this.abortFileRead(e),t.close(),this.dataChannelMap.delete(e)),0===this.dataChannelSize&&(this.closeConnection(),i.default.removeRTCInitiator(this.cgid,!1))}},{key:"destroy",value:function(){var e=this;0!==this.dataChannelSize&&(this.dataChannelMap.forEach((function(t){e.abortFileRead(t.label),null!=t&&t.close()})),this.dataChannelMap.clear()),this.closeConnection()}},{key:"createFileReader",value:function(e){var t,n,r=this,o=(this.offsetMap.set(e,163840),new FileReader),a=i.default.getSendingFile(this.cgid,e).size;o.onload=function(){if(!(u=r.dataChannelMap.get(e)))return o.onload=null,void console.warn("Datachannel has been closed.");u.send(o.result);var i,l,u,s=+((u=r.offsetMap.get(e))/a).toFixed(4),c=r.onSendProgressMap.get(e);c&&(i=Date.now(),t?1e3<i-t&&(l=1e3*(u-n)/1e3,r.speedMap.set(e,l),r.remainingTimeMap.set(e,Math.ceil((a-u)/l)),c(s),t=i,n=u):(c(s),t=i,n=r.offsetMap.get(e))),a<=u&&(null!=c&&c(s),n=t=null,r.speedMap.delete(e),r.remainingTimeMap.delete(e),r.offsetMap.delete(e),r.readerMap.delete(e))},this.readerMap.set(e,o)}},{key:"abortFileRead",value:function(e){var t=this.readerMap.get(e);t&&(t.abort(),t.onload=null,this.readerMap.delete(e))}},{key:"createPeerConnection",value:function(){var e,t=this;this.peerConn=new RTCPeerConnection(this.config),this.peerConn.onicecandidate=function(e){DEBUG&&(console.collapse("RTC-File","indigoBg","Icecandidate","indigoPale"),console.log("candidate",e.candidate),console.groupEnd()),e.candidate?t.sendWsMessage({type:"candidate",label:e.candidate.sdpMLineIndex,id:e.candidate.sdpMid,candidate:e.candidate.candidate,from:"initiator"}):console.log("End of candidates.")},c(null!=(e=null==(e=i.default.getSendingFiles(this.cgid))?void 0:e.keys())?e:[]).forEach((function(e){t.createFileReader(e),t.createDataChannel(e)})),this.createOffer()}},{key:"createDataChannel",value:function(e){var t=this,n=this.peerConn.createDataChannel(e),r=i.default.getSendingFile(this.cgid,e);n.binaryType="arraybuffer",n.onopen=function(a){t.dataChannelMap.set(e,n),o.default.emit("".concat(g,".").concat(t.cgid)),r.status===i.RTC_FILE_STATUS.accepted&&t.sendFile(e),DEBUG&&(console.collapse("RTC-File","indigoBg","Channel opened","indigoPale"),console.log("event",a),console.groupEnd())},n.onerror=function(e){DEBUG&&(console.collapse("RTC-File","indigoBg","Channel error","indigoPale"),console.log("error",e),console.groupEnd()),n.close()},n.onclose=function(n){i.default.removeSendingFile(t.cgid,e,!1),t.dataChannelMap.delete(e),o.default.emit("".concat(g,".").concat(t.cgid)),0===t.dataChannelMap.size&&i.default.removeRTCInitiator(t.cgid),DEBUG&&(console.collapse("RTC-File","indigoBg","Channel closed","indigoPale"),console.log("event",n),console.groupEnd())},n.bufferedAmountLowThreshold=32768,n.onbufferedamountlow=function(){t.offsetMap.get(e)<r.size&&t.readSlice(e)}}},{key:"createOffer",value:(n=function*(){try{var e=yield this.peerConn.createOffer();yield this.peerConn.setLocalDescription(e),this.sendWsMessage(this.peerConn.localDescription),DEBUG&&(console.collapse("RTC-File","indigoBg","Createing offer","indigoPale"),console.log("local desc",this.peerConn.localDescription),console.groupEnd())}catch(e){this.logError(e)}},r=function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(e){s(a,r,o,i,l,"next",e)}function l(e){s(a,r,o,i,l,"throw",e)}i(void 0)}))},function(){return r.apply(this,arguments)})},{key:"readSlice",value:function(e){var t,n=null==(n=i.default.getSendingFile(this.cgid,e))?void 0:n.originFile;n&&(t=this.offsetMap.get(e),n=n.slice(t,t+81920),this.readerMap.get(e).readAsArrayBuffer(n),this.offsetMap.set(e,t+81920))}},{key:"onGetAnswer",value:function(e){this.peerConn.setRemoteDescription(new RTCSessionDescription(e)),DEBUG&&(console.collapse("RTC-File","indigoBg","Got answer","indigoPale"),console.log("remote desc",e),console.groupEnd())}},{key:"sendFile",value:function(e){var t=i.default.getSendingFile(this.cgid,e).originFile,n=this.offsetMap.get(e);e=this.readerMap.get(e),t=t.slice(0,n),e.readAsArrayBuffer(t)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),l}(a.default),t.default=n},39483:(e,t,n)=>{"use strict";function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RTC_TRANSFER_EVENT=t.RTC_FILE_STATUS=void 0,t.RTC_FILE_STATUS={pending:"pending",refused:"refused",accepted:"accepted"},t.RTC_TRANSFER_EVENT={sendFilesRequest:"send-files-request",sendFilesCancel:"send-files-cancel",receiveFilesCancel:"receive-files-cancel",receiveFilesConfirm:"receive-files-confirm"};var i=new(function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");a(this,"sendingFileMap",new Map),a(this,"receivingFileMap",new Map),a(this,"sendingFilesListenerMap",new Map),a(this,"receivingFilesListenerMap",new Map),a(this,"initiatorMap",new Map),a(this,"responderMap",new Map)}var t,n;return t=e,(n=[{key:"getSendingFiles",value:function(e){return this.sendingFileMap.get(e)}},{key:"getSendingFile",value:function(e,t){return null==(e=this.sendingFileMap.get(e))?void 0:e.get(t)}},{key:"emitSendingFilesChange",value:function(e,t){null!=(e=this.sendingFilesListenerMap.get(e))&&e(t)}},{key:"setSendingFiles",value:function(e,t){t&&(this.sendingFileMap.set(e,t),this.emitSendingFilesChange(e,Array.from(t.values())))}},{key:"removeSendingFile",value:function(e,t){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r=this.sendingFileMap.get(e);r&&(r.delete(t),0===r.size&&this.sendingFileMap.delete(e),r=Array.from(null!=(r=null==(r=this.getSendingFiles(e))?void 0:r.values())?r:[]),this.emitSendingFilesChange(e,r),n&&null!=(r=this.getRTCInitiator(e))&&r.closeDataChannel(t))}},{key:"acceptSendingFile",value:function(e,t){(t=this.getSendingFile(e,t))&&(t.status="accepted",t=Array.from(null!=(t=null==(t=this.getSendingFiles(e))?void 0:t.values())?t:[]),this.emitSendingFilesChange(e,t))}},{key:"getReceivingFile",value:function(e,t){return null==(e=this.receivingFileMap.get(e))?void 0:e.get(t)}},{key:"getReceivingFiles",value:function(e){return this.receivingFileMap.get(e)}},{key:"emitReceivingFilesChange",value:function(e,t){null!=(e=this.receivingFilesListenerMap.get(e))&&e(t)}},{key:"setReceivingFiles",value:function(e,t){t&&(this.receivingFileMap.set(e,t),this.emitReceivingFilesChange(e,Array.from(t.values())))}},{key:"removeReceivingFile",value:function(e,t){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r=this.receivingFileMap.get(e);r&&(r.delete(t),0===r.size&&this.receivingFileMap.delete(e),r=Array.from(null!=(r=null==(r=this.getReceivingFiles(e))?void 0:r.values())?r:[]),this.emitReceivingFilesChange(e,r),n&&null!=(r=this.getRTCResponder(e))&&r.closeDataChannel(t))}},{key:"acceptReceivingFile",value:function(e,t){(t=this.getReceivingFile(e,t))&&(t.status="accepted",t=Array.from(null!=(t=null==(t=this.getReceivingFiles(e))?void 0:t.values())?t:[]),this.emitReceivingFilesChange(e,t))}},{key:"addSendingFilesListener",value:function(e,t){this.sendingFilesListenerMap.set(e,t)}},{key:"removeSendingFilesListener",value:function(e){this.sendingFilesListenerMap.delete(e)}},{key:"addReceivingFilesListener",value:function(e,t){this.receivingFilesListenerMap.set(e,t)}},{key:"removeReceivingFilesListener",value:function(e){this.receivingFilesListenerMap.delete(e)}},{key:"getRTCInitiator",value:function(e){return this.initiatorMap.get(e)}},{key:"getRTCAllInitiator",value:function(){return r(this.initiatorMap.values())}},{key:"storeRTCInitiator",value:function(e,t){this.initiatorMap.set(e,t)}},{key:"removeRTCInitiator",value:function(e){var t;1<arguments.length&&void 0!==arguments[1]&&!arguments[1]||null==(t=this.getRTCInitiator(e))||t.destroy(),this.sendingFileMap.delete(e),this.initiatorMap.delete(e)}},{key:"clearRTCInitiator",value:function(){var e=this;r(this.initiatorMap.keys()).forEach((function(t){return e.removeRTCInitiator(t)}))}},{key:"getRTCResponder",value:function(e){return this.responderMap.get(e)}},{key:"getRTCAllResponder",value:function(){return r(this.responderMap.values())}},{key:"storeRTCResponder",value:function(e,t){this.responderMap.set(e,t)}},{key:"removeRTCResponder",value:function(e){var t;1<arguments.length&&void 0!==arguments[1]&&!arguments[1]||null==(t=this.getRTCResponder(e))||t.destroy(),this.receivingFileMap.delete(e),this.responderMap.delete(e)}},{key:"clearRTCResponder",value:function(){var e=this;r(this.responderMap.keys()).forEach((function(t){return e.removeRTCResponder(t)}))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}());n=n.g.$fileRTCManager=i,t.default=n},52260:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=d(n(94128)),a=d(n(65286)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=f(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(77925)),l=d(n(39483)),u=n(78717),s=d(n(74101)),c=n(94592);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=g(e);if(n=t?(n=g(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return y(o)}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){w(e,t),t.add(e)}function v(e,t,n){w(e,t),t.set(e,n)}function w(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function O(e,t,n){if(t.has(e))return n;throw new TypeError("attempted to get private field on non-instance")}function S(e,t){return t=function(e,t,n){if(t.has(e))return t.get(e);throw new TypeError("attempted to get private field on non-instance")}(e,t),t.get?t.get.call(e):t.value}var _=o.default.access("fs"),C=o.default.isType("browser"),E="rtc.responder.dataChannel.status.change",P=new WeakMap,k=new WeakMap,j=new WeakSet,x=new WeakSet,M=new WeakSet,T=new WeakSet;function I(e,t){var n=this;e.onopen=function(r){n.dataChannelMap.set(t,e),a.default.emit("".concat(E,".").concat(n.cgid)),DEBUG&&(console.collapse("RTC-File","indigoBg","Channel opened","indigoPale"),console.log("event",r),console.groupEnd())}}function D(e){e.onerror=function(t){DEBUG&&(console.collapse("RTC-File","indigoBg","Channel error","indigoPale"),console.log("error",t),console.groupEnd()),e.close()}}function A(e,t){var n=this;e.onclose=function(e){l.default.removeReceivingFile(n.cgid,t,!1),n.dataChannelMap.delete(t),a.default.emit("".concat(E,".").concat(n.cgid)),0===n.dataChannelSize&&l.default.removeRTCResponder(n.cgid),DEBUG&&(console.collapse("RTC-File","indigoBg","Channel closed","indigoPale"),console.log("event",e),console.groupEnd())}}function R(e,t){var n,r,o,a,f,d=this,p=l.default.getReceivingFile(this.cgid,t);p&&(o=[],a=0,f=function(e){try{_.outputFileSync("".concat(e,".tmp"),Buffer.concat(o),{flag:"a"})}catch(t){DEBUG&&(console.collapse("fs outputFileSync","redBg",e,"redPale"),console.log("err",t),console.groupEnd())}o=[],a=0},e.onmessage=function(e){var l,h,m,y,g,b,v,w,O=(null!=(O=d.offsetMap.get(t))?O:0)+e.data.byteLength,E=(d.offsetMap.set(t,O),p.size),j=p.savedPath,x=(C?(l=e.data,(h=S(d,P).get(t))?h.push(l):S(d,P).set(t,[l])):j&&(h=e.data,l=j,a+=h.byteLength,o.push(Buffer.from(h)),26214400<a&&f(l)),e=+(O/E).toFixed(4),S(d,k).get(t));x&&(m=x,y=e,g=O,w=E,v=Date.now(),n?1e3<v-n&&(b=1e3*(g-r)/1e3,d.speedMap.set(t,b),d.remainingTimeMap.set(t,Math.ceil((w-g)/b)),m(y),n=v,r=g):(m(y),n=v,r=g)),E<=O&&(null!=x&&x(e),w=j,r=n=null,d.speedMap.delete(t),d.remainingTimeMap.delete(t),d.offsetMap.delete(t),console.log("A file has been received, savePath at ",w),C?d.saveFile(t):(o.length&&f(w),_.rename("".concat(w,".tmp"),w)),(0,c.setP2pFilePath)(t,w),(0,u.executeCommand)("sendFileBroadcastChatMessage",i.FILE_BROAD_MESSAGE_TYPES.reciveDone,s.default.getChat(d.cgid),p.name,p.size,t),d.dataChannelMap.get(t).close())})}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e);var n,r,o=m(a);function a(){var e=this,t=a;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return b(y(e=o.call.apply(o,[this].concat(r))),T),b(y(e),M),b(y(e),x),b(y(e),j),v(y(e),P,{writable:!0,value:new Map}),v(y(e),k,{writable:!0,value:new Map}),e}return t=a,(e=[{key:"addReceiveProgressListener",value:function(e,t){S(this,k).set(e,t)}},{key:"removeReceiveProgressListener",value:function(e){S(this,k).delete(e)}},{key:"clearReceivedFile",value:function(e){S(this,P).delete(e)}},{key:"closeDataChannel",value:function(e){var t=this.dataChannelMap.get(e);t&&(t.onmessage=null,t.close(),this.dataChannelMap.delete(e),this.clearReceivedFile(e)),0===this.dataChannelSize&&(this.closeConnection(),l.default.removeRTCInitiator(this.cgid,!1))}},{key:"destroy",value:function(){var e=this;0!==this.dataChannelSize&&(this.dataChannelMap.forEach((function(t){t&&(t.onmessage=null,t.close(),e.clearReceivedFile(t.label))})),this.dataChannelMap.clear()),this.closeConnection()}},{key:"createPeerConnection",value:function(){var e=this;this.peerConn=new RTCPeerConnection(this.config),this.peerConn.onicecandidate=function(t){DEBUG&&(console.collapse("RTC-File","indigoBg","Icecandidate","indigoPale"),console.log("candidate",t.candidate),console.groupEnd()),t.candidate?e.sendWsMessage({type:"candidate",label:t.candidate.sdpMLineIndex,id:t.candidate.sdpMid,candidate:t.candidate.candidate,from:"responder"}):DEBUG&&console.log("End of candidates.")},this.peerConn.ondatachannel=function(t){e.createDataChannel(t.channel),DEBUG&&(console.collapse("RTC-File","indigoBg","Channel","indigoPale"),console.log("channel:",t.channel,t),console.groupEnd())}}},{key:"createDataChannel",value:function(e){e.binaryType="arraybuffer";var t=e.label;O(this,j,I).call(this,e,t),O(this,x,D).call(this,e),O(this,M,A).call(this,e,t),O(this,T,R).call(this,e,t)}},{key:"onGetOffer",value:(n=function*(e){try{yield this.peerConn.setRemoteDescription(new RTCSessionDescription(e));var t=yield this.peerConn.createAnswer();yield this.peerConn.setLocalDescription(t),this.sendWsMessage(this.peerConn.localDescription),DEBUG&&(console.collapse("RTC-File","indigoBg","Createing answer","indigoPale"),console.log("local desc",this.peerConn.localDescription),console.groupEnd())}catch(e){this.logError(e)}},r=function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(e){p(a,r,o,i,l,"next",e)}function l(e){p(a,r,o,i,l,"throw",e)}i(void 0)}))},function(e){return r.apply(this,arguments)})},{key:"saveFile",value:function(e){var t=new Blob(S(this,P).get(e)),n=document.createElement("a");n.href=window.URL.createObjectURL(t),n.download=l.default.getReceivingFile(this.cgid,e).name,n.click(),n.remove(),window.URL.revokeObjectURL(n.href),n=null,S(this,P).delete(e)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(i.default),t.default=n},18876:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.blobToDataURI=function(e){return new Promise((function(t,n){var r=new FileReader;r.onloadend=function(){t(r.result)},r.onerror=n,r.readAsDataURL(e)}))},t.convertLocalPathToUrl=function(e){return e.startsWith("file://")?e:"file://".concat(e,"?t=").concat(Date.now())},t.dataURItoBlob=function(e){for(var t=atob(e.split(",")[1]),n=(e=e.split(",")[0].split(":")[1].split(";")[0],new ArrayBuffer(t.length)),r=new Uint8Array(n),o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return new Blob([n],{type:e})}},17531:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkFileCache=t.abortUploadFile=t.abortDownloadFile=void 0,t.checkUploadFileSize=h,t.default=void 0,t.dismissUploadFailedFile=function(e){(e=(0,i.getFileData)(e)).networking.isUploadFail&&(e.networking.reset(),i.default.deleteCacheItem(e.gid))},t.uploadImageFile=t.uploadFile=t.reuploadFile=t.downloadFileNoThrows=t.downloadFile=void 0;var r=n(15973),o=s(n(12482)),a=s(n(94128)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==d(e)&&"function"!=typeof e)return{default:e};if((t=u(t))&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(n(94592)),l=n(7066);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){c(a,r,o,i,l,"next",e)}function l(e){c(a,r,o,i,l,"throw",e)}i(void 0)}))}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=a.default.access("net");function h(e){if(!(e="object"===d(e)?e.size:e)||e<=0)return!1;var t=(0,r.getCurrentUser)().uploadFileSize;return t&&e<=t}function m(e){return b(e)}function y(e,t){return b(e,t,!0)}function g(e){(e=(0,i.getFileData)(e)).networking.isUploading&&p.abortUploadFile(e.gid)}var b=function(){var e=f((function*(e,t,n,a){if(!(e=o.default.create(e)).gid)throw new Error("Upload file failed, because gid has not set.");var u=i.default.getFile(e.gid);if(null!=u&&u.networking.isUploading)return u;e.networking.startUpload(),i.default.store(e);try{var s=0,c=0,f=yield p.uploadFile((0,r.getCurrentUser)(),e,(function(n,r,o){var a=Date.now();n!==c&&1e3<a-s&&(s=a,c=n,t&&t(n,e,r),e.networking.updateUploadLoaded(r,o))}),n,a),d=f.id,h=f.time,m=f.hasThumb,y=f.thumbnailWidth,g=f.thumbnailHeight;e.networking.finishUploadSuccess({id:d,time:(0,l.createDate)(h).getTime(),hasThumb:m,thumbnailWidth:y,thumbnailHeight:g})}catch(n){throw e.networking.finishUploadFail(n),n}return e}));return function(t,n,r,o){return e.apply(this,arguments)}}(),v=(t.uploadFile=b,t.reuploadFile=m,t.uploadImageFile=y,function(){var e=f((function*(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],a=3<arguments.length&&void 0!==arguments[3]&&arguments[3];if(!(e=o.default.create(e)).gid||!e.id)throw new Error("Download file failed, because gid or id has not set.");var l=i.default.getFile(e.gid);if(null!=l&&l.networking.isDownloading)return l;e.networking.startDownload(),i.default.store(e);try{var u=0,s=0;yield p.downloadFile((0,r.getCurrentUser)(),e,(function(n,r,o){var a=Date.now();n!==s&&1e3<a-u&&(u=a,s=n,t&&t(n,e,r),e.networking.updateDownloadLoaded(r,o))}),n,a),e.networking.finishDownloadSuccess()}catch(n){e.networking.finishDownloadFail(n)}return e}));return function(t,n){return e.apply(this,arguments)}}());function w(e){return!!p.checkFileCache&&p.checkFileCache(e,(0,r.getCurrentUser)())}t.downloadFile=v,n=function(){var e=f((function*(e){var t=e.cachePath;try{if(!t)return yield v(e);if(!(yield e.checkCachePath()))return yield v(e)}catch(e){DEBUG&&console.warn("DownloadFile error",e)}}));return function(t){return e.apply(this,arguments)}}(),t.downloadFileNoThrows=n,t.abortUploadFile=g,a=p.abortDownloadFile,t.abortDownloadFile=a,t.checkFileCache=w,n={downloadFile:v,uploadFile:b,uploadImageFile:y,checkUploadFileSize:h,checkCache:w,abortUploadFile:g,abortDownloadFile:a,reuploadFile:m},t.default=n},94592:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.getFileData=function(e){return e?"string"==typeof e?g.getFile(e):"object"!==c(e)?null:e instanceof i.default&&g.hasCacheItem(e.gid)?e:(e._data&&(e=e._data),g.store(e)[0]):null},t.getP2pFilePath=function(e){return(0,u.getCommonDataItem)("P2pFilePath",e)},t.setP2pFilePath=function(e,t){(0,u.putCommonDataItem)("P2pFilePath",e,t)};var r,o=n(55292),a=n(33594),i=(r=n(12482))&&r.__esModule?r:{default:r},l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==c(e)&&"function"!=typeof e)return{default:e};if((t=s(t))&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(n(73052)),u=n(63785);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=new(function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e);var n,r,o=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(n=t?(n=y(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,n&&("object"===c(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return m(r)}}(a);function a(e){var t,n,r;if(this instanceof a)return r=function(e){e=i.default.create(e);var n=t.getFile(e.gid);return n?(n.change(e._data),n):(e.onChange=t._handleFileDataChange,e)},(n="normalizeItem")in(e=m(t=o.call(this,"File",e,{channelDelayTime:50,key:"gid"})))?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,l.default.subscribeAny(t._handleMessagesStore.bind(m(t))),t._handleFileDataChange=t._handleFileDataChange.bind(m(t)),t;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"reset",value:function(e){var t=p(y(a.prototype),"reset",this).call(this,e);DEBUG_I&&(console.collapse("STORE.File","pinkBg","reset","pinkPale",t,""),console.log("identify",e),console.groupEnd())}},{key:"getFile",value:function(e){return this.hasCacheItem(e)?this.getItemFromCache(e):(this._cache.set(e,null),null)}},{key:"getFiles",value:function(e){return e.map(this.getFile.bind(this))}},{key:"getMessageFile",value:function(e){return(e="number"==typeof e?l.default.getMessage(e):e)?(e=i.default.fromMessage(e),this.getFile(e.gid)||this.store(e)[0]):(DEBUG&&console.error('Cannot get message file from message "'.concat(e,'".')),null)}},{key:"getChatFiles",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"file";return this.filter((function(n){return n.cgid===e&&n.isInRemote&&(!t||t===n.messageType)})).sort((function(e,t){return t.id-e.id}))}},{key:"getChatUploadingFiles",value:function(e){return this.filter((function(t){return t.cgid===e&&"uploading"===t.networking.type&&t.isInLocal})).sort((function(e,t){return t.time-e.time}))}},{key:"store",value:function(e){var t;return e=p(y(a.prototype),"store",this).call(this,e,{normalizeFunc:this.normalizeItem}),DEBUG_I&&(console.collapse("STORE.File","pinkBg","store","pinkPale",null==(t=e)?void 0:t.length,""),console.trace("files",e),console.log("store",this),console.groupEnd()),e}},{key:"loadChatFiles",value:(n=function*(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,r=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],o=5<arguments.length&&void 0!==arguments[5]&&arguments[5],a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:"file",u=!!(u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"")&&u.toLowerCase(),s=new Set(a.split(","));if(a=yield(0,l.queryMessagesFromDatabase)(e,(function(e){return s.has(e.contentType)&&!e.deleted}),{limit:t,offset:n,reverse:r,returnType:"message"}),null!=(e=a=a.filter((function(e){return!e.isEmotionContent})))&&e.length){var c=new Set;if(t=a.map(i.default.fromMessage).filter((function(e){return!(!e||c.has(e.gid)||u&&e.category!==u||!o&&e.isInLocal||(c.add(e.gid),0))})),null!=t&&t.length)return this.store(t)}return[]},r=function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(e){d(a,r,o,i,l,"next",e)}function l(e){d(a,r,o,i,l,"throw",e)}i(void 0)}))},function(){return r.apply(this,arguments)})},{key:"loadChatImages",value:function(){return this.loadChatFiles(0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,"",1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,!(3<arguments.length&&void 0!==arguments[3])||arguments[3],4<arguments.length&&void 0!==arguments[4]&&arguments[4],"image")}},{key:"searchFiles",value:function(e){return this.loadChatFiles(null,1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",0,0,!0,!1,2<arguments.length&&void 0!==arguments[2]?arguments[2]:"file,image").then((function(t){return null!=t&&t.length?(e=e?e.trim().toLowerCase().split(" "):null)&&e.length?(n=[],t.forEach((function(t){var r=t.getMatchScore(e);r&&n.push({score:r,file:t})})),n.sort((function(e,t){return t.score-e.score})),Promise.resolve(n.map((function(e){return e.file})))):Promise.resolve(t):Promise.resolve([]);var n}))}},{key:"searchImages",value:function(e){return this.searchFiles(e,"","image")}},{key:"_handleMessagesStore",value:function(e){var t,n=this,r=[],o=function(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}(e);try{for(o.s();!(t=o.n()).done;)!function(){var e=t.value;if(!e.isInLocal){if(e.deleted&&"file"===e.contentType)return(o=null!=(o=n.getItemFromCache(e.fileContent[n._key]))?o:n.getChatFiles(e.cgid).filter((function(t){return e.id===t.messageID}))[0])&&(delete o._data.id,r.push(o));var o=null!=(o=e.fileContent)?o:e.imageContent;o&&r.push(o)}}()}catch(e){o.e(e)}finally{o.f()}r.length&&this.store(r)}},{key:"_handleFileDataChange",value:function(e){var t=e.messageID;t&&(t=l.default.getMessage(t))&&t.cacheFilePath!==e.cachePath&&(t.cacheFilePath=e.cachePath,l.default.store(t)),this.hasCacheItem(e.gid)&&this.store(e)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.DataStore));(0,a.setCallbackOnInitedDatabase)(g.reset.bind(g)),DEBUG&&(n.g.$filesStore=g),t.default=g},90534:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.downloadFileToCache=function(e,t){return T.apply(this,arguments)},t.editOfficeFile=function(e){return(0,d.openInCollabora)(e,!0)},t.getFileMenuItems=Q,t.getFileNetworkErrorMessage=j,t.getImageMenuItems=Z,t.onFileSaved=function(e){return f.default.on(P,e)},t.openFile=I,t.previewCodeFile=W,t.previewFile=J,t.previewHtmlFile=G,t.previewImageFile=K,t.previewMarkdownFile=z,t.previewMediaFile=L,t.previewOfficeFile=$,t.previewPdfFile=H,t.previewTextFile=U,t.saveFile=x,t.showFileInExplorer=N,t.showFileInFolder=A;var o=w(n(70182)),a=w(n(94128)),i=(t=n(98649),n(78717)),l=w(n(61862)),u=n(18876),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=v(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(94592)),c=n(17531),f=w(n(65286)),d=n(95126),p=n(15973),h=w(n(74160)),m=n(20491),y=w(n(74101)),g=["file"],b=["file"];function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function w(e){return e&&e.__esModule?e:{default:e}}function O(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function C(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){C(a,r,o,i,l,"next",e)}function l(e){C(a,r,o,i,l,"throw",e)}i(void 0)}))}}var P="file.saved",k=a.default.has("fs.pathExists");function j(e){var t=e.networking.error;return t?(l.default.string("file.downloadFailed"),"HTTP_ABORT"===t.code?l.default.string("file.abortNetwork"):e.networking.isDownloadFail?"HTTP_STATUS_ERROR"===t.code&&404===(null==t?void 0:t.getExtras("status"))?l.default.string("file.notFoundInServer"):"EBUSY"===t.code?l.default.string("file.error.busy"):l.default.error(t):l.default.string("file.uploadFailed")):null}function x(e,t){return M.apply(this,arguments)}function M(){return(M=E((function*(e,t){if(!a.default.has("dialog.showSaveDialog"))return a.default.isType("browser")&&((n=document.createElement("a")).style.display="none",n.href=e.remoteUrl,n.download=e.name,document.body.appendChild(n),n.click(),n.remove()),null;var n=(0,s.getFileData)(e);if(e=S({title:l.default.string("dialog.fileSaveTo"),filename:n.name,fileUrl:n.remoteUrl,filters:[{name:n.mimeType,extensions:[n.extName]}]},t),n.userSavePath&&(e.defaultPath=n.userSavePath),!(t=yield a.default.call("dialog.showSaveDialog",e)))return null;try{n.userSavePath=t,yield(0,c.downloadFile)(n,null,!1,n.editable),f.default.emit(P,t,n)}catch(e){(0,i.executeCommand)("showMessager",j(n),{type:"danger"})}}))).apply(this,arguments)}function T(){return(T=E((function*(e,t){(e=(0,s.getFileData)(e)).userSavePath=null;try{return yield(0,c.downloadFile)(e,null,null==t?void 0:t.isThumb),!0}catch(n){if(null!=t&&t.showError&&(0,i.executeCommand)("showMessager",j(e)||l.default.error(n),{type:"danger"}),null!=t&&t.throwError)throw n;return!1}}))).apply(this,arguments)}function I(e){return D.apply(this,arguments)}function D(){return(D=E((function*(e){return!(!a.default.has("ui.openFileItem")||!(e=(0,s.getFileData)(e)).cachePath||((yield e.checkCachePath())?(e=yield a.default.call("ui.openFileItem",e.cachePath))&&((0,i.executeCommand)("showMessager",e,{type:"danger"}),1):((0,i.executeCommand)("showMessager",l.default.string("file.error.remove"),{type:"warning"}),1)))}))).apply(this,arguments)}function A(e){return R.apply(this,arguments)}function R(){return(R=E((function*(e){if(!a.default.has("ui.showItemInFolder"))return!1;var t=(e=(0,s.getFileData)(e)).cachePath;return!!t&&((yield e.checkCachePath())?(a.default.call("ui.showItemInFolder",t),!0):((0,i.executeCommand)("showMessager",l.default.string("file.error.remove"),{type:"warning"}),!1))}))).apply(this,arguments)}function N(e){return B.apply(this,arguments)}function B(){return(B=E((function*(e){return(e=yield(0,s.getP2pFilePath)(e))&&(yield a.default.call("fs.pathExists",e))?(a.default.call("ui.showItemInFolder",e),!0):((0,i.executeCommand)("showMessager",l.default.string("file.rtc.notFound"),{type:"warning"}),!1)}))).apply(this,arguments)}function L(e){var t=(e=(0,s.getFileData)(e)).previewType,n=e.getRemoteUrl({preview:!0,withSid:!0});if(!n)return{title:e.name,mediaType:t,errorMessage:"cant't get file url"};(0,i.executeCommand)("viewMedia",{current:{src:n,mediaType:t,title:e.name}},{id:"mediaFile-".concat(e.gid)})}var F=function(e,t){return new Promise((function(n,r){var o=new FileReader;o.onload=function(){n(o.result)},o.onerror=function(e){r(e)},o.readAsText(e,t)}))};function U(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"text",r=(0,s.getFileData)(e);if(e={type:n,title:r.name,text:(t=E((function*(){if(!(e=r.getRemoteUrl({preview:!1,withSid:!0})))throw new Error("can't get file url");var e=yield(yield fetch(e,{credentials:"same-origin"})).blob(),t=(yield(0,o.default)(e)).encoding;return e=yield F(e,null!=t?t:"gbk"),t||(0,i.executeCommand)("showMessager",l.default.string("file.preview.warning"),{type:"warning"}),e})),function(){return t.apply(this,arguments)})},!a.default.isType("electron"))return(0,i.executeCommand)("showMessager",l.default.string("file.preview.unsupported"),{type:"warning"});(0,i.executeCommand)("openTextEditor",e,{id:"textFile-".concat(r.gid)})}function z(e){return U(e,"markdown")}function W(e){return U(e,"code")}function H(e){return V.apply(this,arguments)}function V(){return(V=E((function*(e){var t=(0,s.getFileData)(e),n=(e={id:"pdfFile-".concat(t.gid),title:t.name,favicon:"mdi-file-pdf-box-outline text-red",theme:"dark",titleBarStyle:{boxShadow:"none",border:"none",background:"#323639"},source:function(){var e=t.getRemoteUrl({preview:!0,withSid:!0});if(e)return e;null!=(e=n)&&e.close()},webviewOptions:{backgroundColor:"#323639",loadingContent:l.default.string("file.downloading")},windowOptions:{maximizeAfterShow:!0}},yield(0,i.executeCommand)("openWebviewWindow",e))}))).apply(this,arguments)}function G(e){return q.apply(this,arguments)}function q(){return(q=E((function*(e){var t=(0,s.getFileData)(e),n=(e={id:"htmlFile-".concat(t.gid),title:t.name,favicon:"mdi-web text-blue",source:function(){var e=t.getRemoteUrl({preview:!0,withSid:!0});if(e)return e;null!=n&&n.close()},webviewOptions:{loadingContent:l.default.string("file.downloading")},windowOptions:{maximizeAfterShow:!0}},yield(0,i.executeCommand)("openWebviewWindow",e))}))).apply(this,arguments)}function $(e){return(0,d.openInCollabora)(e)}function K(e){return e=(0,s.getFileData)(e),(0,i.executeCommand)("viewChatMessageImage",e.cgid,e.messageID,{id:"imageFile-".concat(e.gid)})}var Y={image:K,video:L,audio:L,code:W,text:U,markdown:z,pdf:H,html:G,doc:$,ppt:$,xls:$};function J(e){return X.apply(this,arguments)}function X(){return(X=E((function*(e){var t=(e=(0,s.getFileData)(e)).previewType;return!!t&&((t=Y[t])?(yield t(e),!0):((0,i.executeCommand)("showMessager",l.default.string("file.preview.unsupported"),{type:"warning"}),!1))}))).apply(this,arguments)}function Q(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=(0,s.getFileData)(e);if(n.isSendByMe&&n.isInLocal){if(n.networking.isUploading)return[{key:"cancel",label:l.default.string("common.cancel"),click:function(){return(0,c.abortUploadFile)(n.gid)},icon:"mdi-close-circle text-danger"}];if(n.networking.isUploadFail)return[{key:"reupload",label:l.default.string("file.reupload"),click:function(){s.default.deleteCacheItem(e.gid),("sendImageMessage"===e.sendMethod?m.sendImageMessage:m.sendFileMessage)(e,y.default.getChat(e.cgid))},icon:"mdi-reload"},{key:"dismiss",label:l.default.string("file.abort"),click:function(){return(0,c.dismissUploadFailedFile)(n.gid)},icon:"mdi-close-circle text-warning"}]}if(!n.isOK)return[];var r,o,a=[],i=void 0===(i=t.canPreview)||i,u=(0,p.getCurrentUser)();return"function"==typeof i?i=i(n):!0===i&&(i=!!n.previewType),i&&["doc","ppt","xls"].includes(n.previewType)&&(r=u.permissions,o=u.backendType,u.isServerSideIntegrated("collaboraOffice")&&("zentaoclient"===h.default.pkg.name&&"zentao"===o||r.includes("integration/office"))||(i=!1)),i&&a.push({key:"preview",label:l.default.string("file.preview"),icon:"mdi-magnify",click:function(){t.onRequestPreview&&"default"!==t.onRequestPreview(n)||J(n)}}),t.canViewMessageContext&&a.push({key:"view-context",label:l.default.string("chat.view.context"),url:"!showChatHistoryDialog/".concat(n.cgid,"/").concat(n.messageID),icon:"mdi-comment-eye-outline"}),t.canViewMessage&&a.push({key:"view-message",label:l.default.string("chat.view.context"),url:"!showChatMessage/".concat(n.cgid,"/").concat(n.messageID),icon:"mdi-comment-arrow-right-outline"}),n.isInRemote&&(n.cachePath&&a.push({key:"open",label:l.default.string("file.open"),url:"!openFile/".concat(e.gid),icon:"open-in-app"},{key:"open-folder",label:l.default.string("file.openFolder"),url:"!showFileInFolder/".concat(e.gid),icon:"folder-outline"}),a.push({key:"download",label:l.default.string("common.download"),url:"!saveFile/".concat(e.gid),icon:"mdi-arrow-down-bold-circle-outline"})),a}function Z(e,t){var n,r,o,f,d,p,h,m=(0,s.getFileData)(e),y=(e=[],m.cachePath),g=m.viewUrl,b=m.isBase64,v=m.originFile,w=m.extName,O=m.name,S=m.mimeType,_=((0,i.isRegisteredCommand)("viewMedia")&&e.push({id:"view-image",label:l.default.string("menu.image.view"),click:(n=E((function*(){m.isBase64||(yield(0,c.downloadFileNoThrows)(m)),(0,i.executeCommand)("viewMedia",m.viewUrl,t)})),function(){return n.apply(this,arguments)})}),b||!k||y||e.push({id:"download-image",label:l.default.string("menu.image.download"),click:(r=E((function*(){console.log(m),yield(0,c.downloadFileNoThrows)(m)})),function(){return r.apply(this,arguments)})}),k&&y||!k||b);return"base64"===S&&"string"==typeof v&&(o=null==(o=v.split(";"))?void 0:o[0])&&(o.includes("svg")?S="image/svg":o.includes("bmp")?S="image/bmp":o.includes("tiff")?S="image/tiff":o.includes("gif")&&(S="image/gif")),"image/bmp"!==S&&"image/tiff"!==S&&"image/gif"!==S&&"image/svg"!==S||!a.default.has("clipboard.writeBmpTiffImageFromFile")?a.default.has("clipboard.writeImageFromUrl")&&(f=a.default.access("clipboard.writeImageFromUrl"),e.push({id:"copy-image",label:l.default.string("menu.image.copy"),disabled:!_,click:(p=E((function*(){var e;if("string"!=typeof v)return v instanceof File||v instanceof Blob?(e=yield(0,u.blobToDataURI)(v),void f(e,"base64")):void(y?f(y,"path"):(console.error("The image that cannot be copied is",m),(0,i.executeCommand)("showMessager",l.default.error("CANNOT_HANDLE_IMAGE"))));f(v,"base64")})),function(){return p.apply(this,arguments)})})):(d=a.default.access("clipboard.writeBmpTiffImageFromFile"),e.push({id:"copy-image",label:l.default.string("menu.image.copy"),disabled:!_,click:function(){d(m)}})),a.default.has("dialog.saveAsImageFromUrl")&&e.push({id:"save-image",label:l.default.string("menu.image.saveAs"),disabled:!g,click:(h=E((function*(){try{var e=yield a.default.call("dialog.saveAsImageFromUrl",g.split("?")[0],"",w,O);if(!e)return;var t=a.default.has("ui.openFileItem")?[{label:l.default.string("file.open"),click:function(){return a.default.call("ui.openFileItem",e)}},{label:l.default.string("file.openFolder"),click:function(){return a.default.call("ui.showItemInFolder",e)}}]:null,n=Array.from(document.getElementsByClassName("app-chat-body")).find((function(e){return e.offsetParent})),r=null==n?void 0:n.getBoundingClientRect();if(!r)return void(0,i.executeCommand)("showMessager",l.default.format("file.fileSavedAt.format",e),{actions:t,closeButton:!1,autoHide:2e3});var o=r.top,u=r.height,s=(r.left,{top:o+u-80||20,position:"absolute",left:r.width/2});(0,i.executeCommand)("showMessager",l.default.format("file.fileSavedAt.format",e),{actions:t,closeButton:!1,autoHide:2e3,style:s})}catch(e){return(0,i.executeCommand)("showMessager",l.default.error(e))}})),function(){return h.apply(this,arguments)})}),!b&&a.default.has("ui.openFileItem")&&e.push({id:"open-image",disabled:!y,label:l.default.string("menu.image.open"),click:function(){return a.default.call("ui.openFileItem",y)}}),e}(0,i.registerCommand)("previewFile",(function(e,t){return J(t)})),(0,i.registerCommand)("openFile",(function(e,t){return I(t)})),(0,i.registerCommand)("saveFile",(function(e,t){return x(t)})),(0,i.registerCommand)("showFileInFolder",(function(e,t){return A(t)})),(0,i.registerCommand)("showFileInExplorer",(function(e,t){return N(t)})),(0,t.addContextMenuCreator)("file",(function(e){return Q(e.file,_(e,g))}),{apiLevel:4}),(0,t.addContextMenuCreator)("image",(function(e){return Z(e.file,_(e,b))}),{apiLevel:4})},68271:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setActiveChat=t.onActiveChat=t.isOpenedActiveChat=t.isActiveChat=t.getChatMenuType=t.getActiveChatGid=t.activeNextChatOnMenu=void 0;var r=n(40910),o=i(n(65286)),a=i(n(94128));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){return(0,r.isRoutePathMatch)("chats","*",e)}function c(e){return f===e||s(e)}var f=null,d=null,p=null,h="chat.active";function m(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),3!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,3);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,3):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.getRoutePathArray)()),t=e[0],n=e[1];e=e[2],"chats"===t&&n&&e&&(d=n,p===t&&f===e||(f!==e&&(f=e),o.default.emit(h,f,d))),p=t}t.isOpenedActiveChat=s,t.isActiveChat=c,t.onActiveChat=function(e){return o.default.on(h,e)},t.setActiveChat=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=void 0===(n=("object"===u(e)&&(e=e.gid),t=t="string"==typeof t?{menu:t}:t).menu)?d||"recents":n;return t=t.autoScrollBehavior,a.default.call("ui.showAndFocusWindow"),!(0,r.isRoutePathMatch)("chats",n,e)&&((0,r.setRoutePath)("chats",n,e,t?{autoScrollBehavior:t}:null),!0)},t.activeNextChatOnMenu=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.onlyLastChatIsActive,n=e.lastChatGid;if((void 0===t||t)&&n&&!c(n))return!1;if(t=e.menu||d||"recents",!(0,r.isRoutePathMatch)("chats")){if(!e.openChatsIfNeed)return!1;(0,r.setRoutePath)("chats",t,n)}if(!(e=document.getElementById("appChatsMenuList")))return!1;var o=null;return(o=(o=(n=n||f)&&(o=(n=e.querySelector('.app-menu-chat-item[data-gid="'.concat(n,'"]')))?(o=n.previousElementSibling)||n.nextElementSibling:o)&&!o.classList.contains("app-menu-chat-item")?null:o)||e.querySelector(".app-menu-chat-item"))?((0,r.setRoutePath)("chats",t,o.getAttribute("data-gid")),!0):void 0},t.getActiveChatGid=function(){return f},t.getChatMenuType=function(){return d},(0,r.onRoutePathChange)(m),m()},70562:(e,t)=>{"use strict";function n(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DEFAULT_CACHE_LIFE_TIME=void 0,t.DEFAULT_CACHE_LIFE_TIME=18e5;var r=function(){function e(t,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");n(this,"cgid",void 0),n(this,"_activeTime",void 0),n(this,"_state",void 0),this.cgid=t,this._activeTime=r||(new Date).getTime()}var t,r;return t=e,(r=[{key:"activeTime",get:function(){return this._activeTime}},{key:"active",value:function(){this._activeTime=(new Date).getTime()}},{key:"isExpired",value:function(e){var t=this._activeTime;return t&&(1<arguments.length&&void 0!==arguments[1]?arguments[1]:18e5)<=e-t}},{key:"clean",value:function(){this._activeTime=null}},{key:"isCleaned",get:function(){return!this._activeTime}},{key:"keepState",value:function(e){this._state||(this._state={}),Object.assign(this._state,e)}},{key:"takeOutState",value:function(e){var t,n=this._state;if(n){switch(e){case"draft":t=n.draft,delete n.draft;break;case"scrollPos":t=n.scrollPos,delete n.scrollPos}return t}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=r},33417:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.sortChats=t.isOne2OneChatOnline=t.getOtherMemberInOne2OneChat=t.getOne2OneChatGid=t.getChatPinYinName=t.getChatMembers=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=f(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(58851)),a=n(15973),i=n(16986),l=c(n(52324)),u=c(n(84431)),s=n(57485);function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e){return(e=e.theOtherMemberID)?u.default.getMemberOrTemp(e):null}function m(e){return!(!(e=h(e))||!e.isOnline)}function y(e){var t;return e.pinyin||(t=e.name,e.pinyin=(0,i.isNotEmptyString)(t)?(0,l.default)(t):""),e.pinyin}t.getOne2OneChatGid=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:(0,a.getCurrentUserID)();return(0,o.createOne2OneChatGid)(e,t)},t.getOtherMemberInOne2OneChat=h,t.getChatMembers=function(e){return e?e.type===o.default.TYPES.system?(DEBUG&&console.warn("Avoid getting the list of system session members after 4.0."),u.default.filter((function(e){return!e.isDeleted}))):(e=e.members).size?Array.from(e).map(u.default.getMemberOrTemp).filter((function(e){return!e.isDeleted})):[]:[]},t.isOne2OneChatOnline=m,t.getChatPinYinName=y,t.sortChats=function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";return e.length<2?e:"function"==typeof n?e.sort(n):("default"===n?t=["deleted","systemFirst","conferenceFirst","star","notice","hide","lastMessageId","mute","online","createDate","name","id"]:"onlineFirst"===n?t=["deleted","conferenceFirst","star","notice","hide","online","lastMessageId","mute","createDate","name","id"]:"recentFirst"===n?t=["deleted","systemFirst","conferenceFirst","star","draft","lastMessageId","notice","hide","online","mute","createDate","name","id"]:"string"==typeof n&&(t=[n]),e.sort((function(e,n){var r,o,i,l,u,c=0,f=d(t);try{for(f.s();!(u=f.n()).done;){var p=u.value;if(0!==c)break;var h=void 0,g=void 0;switch(p){case"conferenceFirst":var b=(0,s.getConference)(n.gid),v=(0,s.getConference)(e.gid),w=(0,a.getCurrentUserID)(),O=null==b?void 0:b.isIgnored(w),S=null==v?void 0:v.isIgnored(w);c=(O?0:n.conferenceStatusValue)-(S?0:e.conferenceStatusValue);break;case"systemFirst":c=(n.isSystem&&!n.isRobot?1:0)-(e.isSystem&&!e.isRobot?1:0);break;case"deleted":c=(n.isDeleted?0:1)-(e.isDeleted?0:1);break;case"notice":c=(n.unreadMessagesCount?1:0)-(e.unreadMessagesCount?1:0);break;case"hide":case"mute":c=(n[p]?0:1)-(e[p]?0:1);break;case"isSystem":case"star":c=(n[p]?1:0)-(e[p]?1:0);break;case"online":c=(m(n)?1:0)-(m(e)?1:0);break;case"name":c=(n.name||"").localeCompare(e.name||"");break;case"lastMessageId":c=(null!=(r=null==(o=n.lastMessageInfo)?void 0:o.id)?r:0)-(null!=(i=null==(l=e.lastMessageInfo)?void 0:l.id)?i:0);break;case"draft":c=n.draft&&e.draft?n.lastAccessTime>e.lastAccessTime?1:-1:n.draft||e.draft?(n.draft?1:0)-(e.draft?1:0):0;break;default:g="namePinyin"===p?(h=y(n),y(e)):(h=n[p],e[p]),c=(h=null==h?0:h)===(g=null==g?0:g)?0:g<h?1:-1}}}catch(e){f.e(e)}finally{f.f()}return c})))}},20116:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getChatMessageMentionType=function(e){var t=e instanceof c.default,n=(0,f.getCurrentUser)();if(t){if(void 0!==e._mentionType)return e._mentionType;if(!e.isTextContent||n.id!==e.senderId)return e._mentionType=!1}t=t?e.content:e;try{if(RegExp("(@".concat((0,i.escapeRegExp)(n.account),"|@").concat((0,i.escapeRegExp)(n.realname),"|@#").concat(n.id,")"),"mgui").test(t))return"me";if(RegExp("(@all|@".concat(s.default.string("chat.message.atAll"),")"),"mgui").test(t))return"all"}catch(e){}return!1},t.linkMentionsInText=t.getChatMessageSummaryText=t.getChatMessageSender=void 0,t.normalizeMentionsInMessage=function(e){return e.replace(new RegExp("(\\[|\\()?".concat(i.REGEXP_AT_USER,"(\\)|\\])?"),"g"),(function(e,t,n,r){return"("===t&&")"===r||"["===t&&"]"===r?e:(n=d.default.guessMemberInCache(n))?"".concat(null!=t?t:"","[@").concat(n.displayName,"](@#").concat(n.id,")").concat(null!=r?r:""):e}))},t.renderChatMessageContent=t.onRenderChatMessageContent=void 0;var o=h(n(15219)),a=n(64393),i=n(16986),l=n(74933),u=h(n(74160)),s=h(n(61862)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=p(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(92691)),f=n(15973),d=h(n(84431));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function h(e){return e&&e.__esModule?e:{default:e}}function m(e){var t,n,r,o,a,i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return e&&e.length&&e.includes("@")&&(t=s.default.string("chat.message.atAll"),n=(0,f.getCurrentUser)(),r=n.displayName,o=n.account,a=n.id,e=(e=e.replace(new RegExp("@all|@".concat(t),"gi"),'<span class="at-all">@'.concat(t,"</span>"))).replace(/\[@(#?[^\s[\]@]{1,20})]\(@(#\d+)\)/gi,(function(e,t,n){var l=n==="#".concat(a)||n===o||n===r;return i?"@".concat(t):"<a".concat(l?' class="at-me"':"",' href="@').concat(n,'">@').concat(t,"</a>")}))),e}var y=null;function g(e){var t,n;void 0===e._renderedTextContent&&("string"==typeof(n=e.content)&&n.length?(n=e.isBroadcast||!e.isPlainTextContent?(u.default.ui["chat.markdown.html"]&&(n=m(n,u.default.ui["chat.denyShowMemberProfile"])),t=u.default.ui["chat.markdown.html"]?null:{sanitize:null},(0,o.default)(n,t)):m(n=(0,a.linkify)((0,a.escape)(n).replace(/<br>/g,"\n")),u.default.ui["chat.denyShowMemberProfile"]),n=(0,l.emojiToImage)(n),y&&(n=y(n)),e._renderedTextContent=n,e._isBlockContent=n&&(n.includes("<h1>")||n.includes("<h2>")||n.includes("<h3>"))):(e._renderedTextContent="",e._isBlockContent=!1));for(var r,i=arguments.length,s=new Array(1<i?i-1:0),c=1;c<i;c++)s[c-1]=arguments[c];return s&&s.length?(r=e._renderedTextContent,s.forEach((function(t){t&&(r=t(r,e))})),r):e._renderedTextContent}t.onRenderChatMessageContent=function(e){y=e},t.linkMentionsInText=m,t.renderChatMessageContent=g,t.getChatMessageSender=function(e){return d.default.getMemberOrTemp(e.senderId)},t.getChatMessageSummaryText=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:200,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(e.deleted)return"[".concat(s.default.string("chat.message.deleted"),"]");var r,o=e.summary;return void 0===o&&(o=e.isNotification?"".concat(e.senderName,": ").concat(e.notification.title||e.notification.content):e.isEmotionContent?"[".concat(s.default.string("chat.message.type.emoji"),"]"):e.isFileContent?e.fileContent.name:e.isImageContent?"[".concat(s.default.string("chat.message.type.image"),"]"):e.isTextContent?(o=g(e),o=(o=b(o)).trim().replace(/[\r\n]/g," ").replace(/\n[\s| | ]*\r/g,"\n"),o=(0,a.strip)(o),v(o)):e.isObjectContent?e.objectContentType===c.OBJECT_TYPES.url?(r=e.objectContent,"[".concat(s.default.string("chat.message.type.url"),"] ").concat(r.url)):"[".concat(s.default.string("chat.message.type.object"),"]"):e.isCodeContent?e.codeContent.name||"[".concat(s.default.string("chat.message.type.code"),"]"):e.content,e._summary=o),(o=n?n(o,e):o).length>t?(0,i.limitStringLength)(o,t):o};var b=function(e){return e.replace(/<img class="joypixels".*?.png"\/> ?/gm,(function(e){return/alt="(.*?)"/.exec(e)[1]}))},v=function(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent}},99794:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatMessageImageObtainer=void 0;var r=c(n(84431)),o=c(n(73052)),a=c(n(29795)),i=n(17531),l=c(n(94592)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==f(e)&&"function"!=typeof e)return{default:e};if((t=s(t))&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(n(61862));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function c(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){d(a,r,o,i,l,"next",e)}function l(e){d(a,r,o,i,l,"throw",e)}i(void 0)}))}}function h(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n=function(){function e(t,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=this,i=e;if(!(o instanceof i))throw new TypeError("Cannot call a class as a function");this._current=m({data:{messageID:n}},r),this._cgid=t,a.default.getPrevAndNextImageMessage(n,!0)}var t,n,s,c,d;return t=e,(n=[{key:"current",get:function(){return this._current}},{key:"obtain",value:(d=p((function*(e){var t=e.data.messageID;if(!e||!t)return null;try{var n,s,c,f,d=(d=e.data.message)||(yield o.default.asyncGetMessage(this._cgid,t)),p=yield r.default.asyncGetMember(d.senderId),h=(0,u.getShortTextOfDate)(d.sendTime),y=u.default.format("chat.message.userSendAt",{user:p.displayName,time:h}),g=(d.retracted&&!d.data.forwardFrom?s=u.default.string("file.retracted"):"base64"===(null==(n=d.imageContent)?void 0:n.type)?c=d.imageContent.content:(f=l.default.getMessageFile(d),yield(0,i.downloadFileNoThrows)(f),f.networking.isDownloadFail?s=u.default.string("file.downloadFailed"):c=f.viewUrl),e.prev),b=e.next,v=a.default.getPrevAndNextImageMessage(t);return void 0===g&&(g=!(null==v||!v.prev)),void 0===b&&(b=!(null==v||!v.next)),Object.assign(e,{src:c,title:y,prev:g,next:b,errorMessage:s,data:m(m({},e.data),{},{prevMessage:null==v?void 0:v.prev,nextMessage:null==v?void 0:v.next})})}catch(e){return DEBUG&&console.error("Error when obtain message image",e),null}})),function(e){return d.apply(this,arguments)})},{key:"obtainCurrent",value:function(){var e=this.current;return e.src&&e.title&&void 0!==e.prev&&void 0!==e.next?Promise.resolve(e):this.obtain(e)}},{key:"obtainPrev",value:(c=p((function*(e){if(!1===e.prev)return null;if("object"===f(e.prev))return e.prev;var t=e.data.prevMessage;return(t=t||a.default.getPrevAndNextImageMessage(e.data.messageID).prev)?(e.prev=yield this.obtain({next:e,data:{message:t,messageID:t.id}}),e.prev):null})),function(e){return c.apply(this,arguments)})},{key:"obtainNext",value:(s=p((function*(e){if(!1===e.next)return null;if("object"===f(e.next))return e.next;var t=e.data.nextMessage;return(t=t||a.default.getPrevAndNextImageMessage(e.data.messageID).next)?(e.next=yield this.obtain({prev:e,data:{message:t,messageID:t.id}}),e.next):null})),function(e){return s.apply(this,arguments)})}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),t.ChatMessageImageObtainer=n},37907:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emitReceiveNewMessages=function(e){r.immediateChannel.publish(o,e)},t.emitUnreadMessagesChange=l,t.subscribeReceiveNewMessages=function(e){return r.immediateChannel.subscribe(o,e)},t.subscribeUnreadMessagesChange=function(e){return r.immediateChannel.subscribe(a,e)},t.tryEmitUnreadMessagesChange=function(e){e!==i&&(l(e),DEBUG&&console.warn("TryEmitUnreadMessagesChange works."))},t.unsubscribeMessagesChange=function(e){return Array.isArray(e),r.immediateChannel.unsubscribe(e)};var r=n(84401),o=Symbol("event-receive-new-messsages"),a=Symbol("event-unread-messsages-change"),i=0;function l(e){r.immediateChannel.publish(a,e),i=e}},92691:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TYPES=t.TEXT_CONTENT_TYPE=t.OBJECT_TYPES=t.EXPIRATION_TIME=t.DELETE_MESSAGE_TIME=t.CONTENT_TYPES=t.BULLETIN_TYPES=void 0,t.createChatMessage=N,t.isLocalMessageID=t.default=void 0,t.sortChatMessages=R;var r=f(n(27945)),o=f(n(6511)),a=f(n(75738)),i=n(16986),l=f(n(12482)),u=n(48389),s=n(86273),c=n(15973);function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){var r=e;if(t.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object");t.set(e,n)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t,n){if((t=S(e,t,"set")).set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function O(e,t){return(t=S(e,t,"get")).get?t.get.call(e):t.value}function S(e,t,n){if(t.has(e))return t.get(e);throw new TypeError("attempted to "+n+" private field on non-instance")}t.DELETE_MESSAGE_TIME=12e4,t.EXPIRATION_TIME=3e4,t.isLocalMessageID=function(e){return(0,s.isLocalID)(e)},t.TYPES=_,(x=_||(t.TYPES=_={})).broadcast="broadcast",x.normal="normal",x.notification="notification",x.bulletin="bulletin",x.botcommand="botcommand",t.BULLETIN_TYPES=C,(x=C||(t.BULLETIN_TYPES=C={})).bulletin="bulletin",x.notice="notice",t.CONTENT_TYPES=E,(x=E||(t.CONTENT_TYPES=E={})).file="file",x.image="image",x.text="text",x.plain="plain",x.emotion="emotion",x.code="code",x.object="object",t.OBJECT_TYPES=P,(x=P||(t.OBJECT_TYPES=P={})).default="default",x.url="url",t.TEXT_CONTENT_TYPE=void 0,t.TEXT_CONTENT_TYPE={notification:"notification",announcement:"announcement"};var _,C,E,P,k="ChatMessage",j=new o.default({id:{type:"int",indexed:!0,primaryKey:!0},index:{type:"int",indexed:!0},unionId:{type:"string",indexed:!0},gid:{type:"string",indexed:!0},cgid:{type:"string",indexed:!0},user:{type:"int",indexed:!0},date:{type:"timestamp",indexed:!0},type:{type:"string",indexed:!0,defaultValue:_.normal},contentType:{type:"string",indexed:!0,defaultValue:E.plain},content:{type:"string",defaultValue:null},keys:{type:"string",defaultValue:""},deleted:{type:"boolean"},noticeEndTime:{type:"timestamp"},bulletinExpiration:{type:"timestamp",indexed:!0},data:{type:"json"},cacheFilePath:{type:"string"}}),x=(0,u.createProxyPropertiesMap)(["id","index","cgid","user","date","type","contentType","content","deleted","data","codeContent","fileContent","imageContent","objectContentType","objectContent","isBroadcast"],r.default.PROXY_PROPERTIES),M=(0,u.createProxyHandler)(x),T=new WeakMap,I=new WeakMap,D=new WeakMap,A=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(n=t?(n=g(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,n&&("object"===h(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return y(r)}}(r);function r(e){var t=this,o=r;if(t instanceof o)return v(y(t=n.call(this,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:k)),"summary",void 0),b(y(t),T,{writable:!0,value:void 0}),v(y(t),"contentBackup",void 0),b(y(t),I,{writable:!0,value:void 0}),b(y(t),D,{writable:!0,value:void 0}),v(y(t),"_sender",void 0),v(y(t),"_emotionContent",void 0),v(y(t),"_codeContent",void 0),v(y(t),"_objectContent",void 0),v(y(t),"_imageContent",void 0),v(y(t),"_fileContent",void 0),v(y(t),"_renderedTextContent",void 0),v(y(t),"_isBlockContent",void 0),v(y(t),"user",void 0),v(y(t),"attachFile",void 0),e.contentBackup&&(t.contentBackup=e.contentBackup),e.replyTo&&t.setDataValue("replyTo",e.replyTo),t.$.contentType||(t.$.contentType=E.plain),t.$.type||(t.$.type=_.normal),t.$.date||(t.$.date=Date.now()),t.$.id||(t.$.id=(0,s.createLocalID)(),t.$.index=t.$.id),t.isBulletin&&!t.$.bulletinExpiration&&(t.$.bulletinExpiration=t.bulletin.expiration),null!==t.$.keys&&void 0!==t.$.keys||(t.isFileContent?t.$.keys=t.fileContent.name:t.isCodeContent?(o=y(t).codeContent,t.$.keys=[o.name,o.code].join(" ")):t.isObjectContent?(e=y(t).objectContent,t.$.keys=["[url]",e.url].join(" ")):t.$.keys=""),t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"proxyHandler",get:function(){return M}},{key:"unionId",get:function(){return"".concat(this.cgid,"@").concat(this.index)}},{key:"plainServer",value:function(){var e={gid:this.gid,cgid:this.cgid,type:this.type,contentType:this.contentType,content:this.content,user:this.senderId,data:this.data,deleted:!1};return"string"!=typeof this.data&&(e.data=JSON.stringify(this.data),"{}"===e.data&&(e.data="")),this.deleted&&(e.deleted=!0),e}},{key:"schema",get:function(){return j}},{key:"isOK",get:function(){return!this.isInLocal}},{key:"isSending",get:function(){return this.isInLocal&&!O(this,T)&&Date.now()-this.date<3e4}},{key:"beginSend",value:function(){this.$set("date",Date.now()),w(this,T,!1)}},{key:"cgid",get:function(){return this.$get("cgid")},set:function(e){this.$set("cgid",e)}},{key:"index",get:function(){return this.$get("index")},set:function(e){this.$set("index",e)}},{key:"deleted",get:function(){return this.$get("deleted")}},{key:"localDeleted",get:function(){return this.deleted&&this.isInLocal}},{key:"markLocalDeleted",value:function(){return!!this.isInLocal&&(this.$set("deleted",!0),!0)}},{key:"retracted",get:function(){return this.deleted&&!this.isInLocal}},{key:"canDelete",value:function(e){return!this.isInLocal&&e.id===this.senderId&&e.serverNowTime.getTime()-this.sendTime<=12e4}},{key:"canReedit",value:function(e){return!this.isInLocal&&e===this.senderId&&!this.getDataValue("deletedBy")&&this.deleted&&(this.isTextContent||this.isCodeContent||this.isUrlObject)&&(0,i.isNotEmptyString)(this.content||this.contentBackup)}},{key:"doReedit",value:function(){var e=this.content||this.contentBackup;return delete this.contentBackup,this.replyTo&&(0,c.getCurrentUser)().config.setChatReplyTo(this.cgid,this.replyTo),this.isUrlObject?this.objectContent.url:e}},{key:"data",get:function(){return void 0===O(this,I)&&w(this,I,this.$get("data")||{}),O(this,I)}},{key:"setBackup",value:function(e){this.contentBackup=e}},{key:"getDataValue",value:function(e,t){var n=this.data;return n?void 0===(n=n[e])?t:n:t}},{key:"setDataValue",value:function(e,t){t="object"!==h(e)?v({},e,t):e,w(this,I,p(p({},this.data),t)),this.$set("data",O(this,I))}},{key:"replyTo",get:function(){return this.getDataValue("replyTo")},set:function(e){this.setDataValue("replyTo",e)}},{key:"reminders",get:function(){var e;return O(this,D)||((e=this.$get("reminders"))&&("string"==typeof e&&(e=e.split(",")),Array.isArray(e)?(e=e.map((function(e){return"string"==typeof e?Number.parseInt(e,10):e})).filter((function(e){return"number"==typeof e&&!Number.isNaN(e)})),w(this,D,new Set(e))):e=null),w(this,D,e)),O(this,D)}},{key:"isReminder",value:function(e){var t=this.reminders;return!t||t.has(e)}},{key:"date",get:function(){return this.$get("date")},set:function(e){this.$set("date",e)}},{key:"sendTime",get:function(){return this.date}},{key:"senderId",get:function(){return this.$get("user")}},{key:"isSender",value:function(e){return this.senderId===e}},{key:"sender",get:function(){return DEBUG&&console.log('The sender getter is deprecated, use "membersStore.getMember(chatMessage.senderID)" instead'),this._sender||new a.default({id:this.senderId})},set:function(e){DEBUG&&console.log("The sender setter is deprecated"),e&&(this._sender=e,this.$set("user",e.id))}},{key:"contentType",get:function(){return this.$get("contentType",E.text)},set:function(e){this.$set("contentType",e)}},{key:"isFileContent",get:function(){return this.contentType===E.file}},{key:"isTextContent",get:function(){return this.contentType===E.text||this.contentType===E.plain}},{key:"isMarkdownTextContent",get:function(){return this.contentType===E.text}},{key:"isPlainTextContent",get:function(){return this.contentType===E.plain}},{key:"isEmotionContent",get:function(){return this.contentType===E.emotion||this.isImageContent&&"emoji"===this.imageContent.type}},{key:"emotionContent",get:function(){var e=this._emotionContent;return e||(this.contentType===E.emotion?e=this.parseContent():this.isImageContent&&"emoji"===this.imageContent.type&&(e=this.imageContent),this._emotionContent=e),e}},{key:"isUrlObject",get:function(){return this.isObjectContent&&this.objectContentType===P.url}},{key:"noticeEndTime",get:function(){return this.$get("noticeEndTime",0)}},{key:"isImageContent",get:function(){return this.contentType===E.image}},{key:"isCodeContent",get:function(){return this.contentType===E.code}},{key:"codeContent",get:function(){if(!this.isCodeContent)return null;var e=this._codeContent;return void 0===e&&((e=this.parseContent())&&(e.lot=e.code&&10<e.code.split("\n").length),this._codeContent=e),e}},{key:"isObjectContent",get:function(){return this.contentType===E.object}},{key:"objectContentType",get:function(){return this.isObjectContent?this.objectContent.type:null}},{key:"objectContent",get:function(){if(!this.isObjectContent)return null;var e,t=this._objectContent;return t||(null!=(e=t=this.parseContent())&&e.path&&delete t.path,this._objectContent=t),t}},{key:"type",get:function(){return this.$get("type",_.normal)},set:function(e){this.$set("type",e)}},{key:"isBroadcast",get:function(){return this.type===_.broadcast}},{key:"isBulletin",get:function(){return this.type===_.bulletin}},{key:"content",get:function(){return this.$get("content")},set:function(e){this.$set("content",e),this._imageContent&&delete this._imageContent,this._fileContent&&delete this._fileContent,this._objectContent&&delete this._objectContent,this._renderedTextContent&&(delete this._renderedTextContent,delete this._isBlockContent),this.contentBackup&&delete this.contentBackup,this._codeContent&&delete this._codeContent}},{key:"isBlockContent",get:function(){return this._renderedTextContent&&this._isBlockContent}},{key:"imageContent",get:function(){if(!this.isImageContent)return null;var e=this._imageContent;return e||((e=this.parseContent()).path&&delete e.path,this._imageContent=e),e&&(e.user=this.user,e.senderId=this.senderId,e.messageID=this.id,e.cgid=this.cgid,e.messageType="image","base64"===e.type?e.originFile=e.content:this.attachFile&&(e.originFile=this.attachFile),e.gid||(e.gid="file-".concat(e.id||this.gid)),this.cacheFilePath&&(e.cachePath=this.cacheFilePath)),e},set:function(e){this.contentType=E.image;var t=e instanceof l.default?e.plain():{name:e.name||e.title,size:e.size,send:e.send,type:e.type,id:e.id,time:e.time,gid:e.gid,error:e.error,content:e.content,hasThumb:e.hasThumb,thumbnailWidth:e.thumbnailWidth,thumbnailHeight:e.thumbnailHeight};t.isImage=t.type&&(t.type.startsWith("image")||"base64"===t.type),t.isImage&&(t.width=e.width,t.height=e.height,t.mediaType="image"),delete t.path,this.content=JSON.stringify(t),e instanceof l.default&&(this.attachFile=e.originFile),this._imageContent=t}},{key:"updateImageContent",value:function(e){this.imageContent=p(p({},this.imageContent),e)}},{key:"fileContent",get:function(){if(!this.isFileContent)return null;var e=this._fileContent;return e||((e=this.parseContent({name:""})).path&&delete e.path,this._fileContent=e),e&&(e.user=this.user,e.senderId=this.senderId,e.messageID=this.id,e.cgid=this.cgid,e.messageType="file","base64"===e.type?e.originFile=e.content:this.attachFile&&(e.originFile=this.attachFile),this.cacheFilePath&&(e.cachePath=this.cacheFilePath),e.gid||(e.gid="file-".concat(e.id))),e},set:function(e){this.contentType=E.file;var t=e instanceof l.default?e.plain():{name:e.name||e.title,size:e.size,send:e.send,type:e.type,id:e.id,time:e.time,gid:e.gid,error:e.error,content:e.content,loaded:e.loaded};e.editable&&(t.editable=e.editable),t.isImage=t.type&&t.type.startsWith("image"),t.isImage&&(t.width=e.width,t.height=e.height,t.mediaType="image"),delete t.path,delete t.error,delete t.attachFile,this.content=JSON.stringify(t),e instanceof l.default&&(this.attachFile=e.originFile),this._fileContent=t}},{key:"cacheFilePath",get:function(){return this.$get("cacheFilePath")},set:function(e){this._fileContent=null,this._imageContent=null,this.$set("cacheFilePath",e)}},{key:"updateFileContent",value:function(e){this.fileContent=p(p({},this.fileContent),e)}},{key:"getCommand",value:function(){if(this.isTextContent){var e=this.content.trim();if("$$version"===e)return{action:"version"};if("$$dataPath"===e)return{action:"dataPath"}}return null}},{key:"isInLocal",get:function(){return(0,s.isLocalID)(this.id)}},{key:"isSendFailed",get:function(){return this.isInLocal&&(O(this,T)||3e4<=Date.now()-this.date)}},{key:"markSendFailed",value:function(){this.isInLocal&&w(this,T,!0)}},{key:"parseContent",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this.content||this.contentBackup;if(!t)return e;try{return"object"===h(t)?t:JSON.parse(t)||t}catch(t){return DEBUG&&console.error("Cannot parse content data for chat message",this),e}}},{key:"bulletin",get:function(){if(!this.isBulletin)return null;var e=this.data;return{id:this.id,expiration:!this.deleted&&e.expiration||0,type:e.type||C.bulletin}}},{key:"isBulletinInValidity",get:function(){if(!this.isBulletin)return!1;var e=this.bulletin.expiration;return e&&Date.now()<=e}},{key:"canPin",value:function(){return!this.isBroadcast&&(this.isTextContent||this.isImageContent||this.isFileContent)}},{key:"plain",value:function(){var e=this.cgid,t=this.content,n=this.contentType,r=this.data,o=this.date,a=this.deleted,i=this.gid,l=this.id,u=this.index,s=this.type,c=this.senderId,f=this.unionId;return{cgid:e,content:t,contentType:n,data:r,date:o,deleted:a,gid:i,id:l,index:u,type:s,keys:this.$get("keys"),user:c,unionId:f}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(r.default);function R(e){return e.sort((function(e,t){return(e.id||Number.MAX_SAFE_INTEGER)-(t.id||Number.MAX_SAFE_INTEGER)}))}function N(e){return e instanceof A?e:new A(e)}v(t.default=A,"NAME",k),v(A,"TYPES",_),v(A,"CONTENT_TYPES",E),v(A,"OBJECT_TYPES",P),v(A,"SCHEMA",j),v(A,"PROXY_PROPERTIES",x),v(A,"PROXY_HANDLER",M),v(A,"create",N),v(A,"sort",R),DEBUG&&(n.g.$ChatMessage=A)},79429:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchHistory=m,t.getFetchingTask=void 0;var r=n(7066),o=n(78717),a=u(n(74101)),i=u(n(73052)),l=n(23405);function u(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){d(a,r,o,i,l,"next",e)}function l(e){d(a,r,o,i,l,"throw",e)}i(void 0)}))}}var h=null;function m(){return y.apply(this,arguments)}function y(){return(y=p((function*(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getFetchingChannel)();if(h)throw new Error("BUSY");"string"==typeof e?e={chats:e}:("number"==typeof e||e instanceof Date)&&(e={startDate:e});var n,o=(i=e).chats,i=void 0===(i=i.startDate)?0:i;if(o?"contacts"===o?o=a.default.getPrivateChats({sortRules:!1,excludeLocal:!0}):"groups"===o?o=a.default.getGroupsChats("default",!1,!0):"string"==typeof o&&(o=a.default.getChats([o])):o=a.default.getAllChats(!1),o.length)return o=(o=o.reduce((function(e,t){return"string"==typeof t&&(t=a.default.getChat(t)),[].concat(c(e),[t.gid],c(t.mergedChats))}),[])).map((function(e){return"object"===s(e)?e.gid:e})),i=i?(0,r.createDate)(i).getTime():0,n=e.recPerPage,o={chats:o,startDate:i,progress:0,isFetching:!1,channel:t,recPerPage:void 0===n?50:n,onProgress:function(n,r){var o,a;null!=(o=(a=e).onProgress)&&o.call(a,n,r),t.publish(l.EVENT_HISTORY_PROGRESS,n,r)}},h=o,null!=(n=(i=e).onStart)&&n.call(i,o),t.publish(l.EVENT_HISTORY_START,o),yield function(){return g.apply(this,arguments)}(o),(h=null,l.resetAbortSyncSignal)(),null!=(i=(n=e).onFinish)&&i.call(n,o),t.publish(l.EVENT_HISTORY_FINISH,o),o}))).apply(this,arguments)}function g(){return(g=p((function*(e){if(e.isFetching)return e;e.isFetching=!0,e.progress=0;for(var t=e.chats,n=e.recPerPage,r=e.startDate,o=e.onProgress,a=100/t.length,i=function(t){var n=null===(n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null)?t:n*a+a*(t/100);e.progress!==n&&(e.progress=n,null!=o&&o(n,e))},u=(i(0),function*(e){if((0,l.getAbortSyncSignal)())return{v:void 0};var o=t[e];i(0,e),yield function(){return b.apply(this,arguments)}(o,{recPerPage:n,startDate:r,onProgress:function(t){i(t,e)}}),i(100,e)}),c=0;c<t.length;++c){var f=yield*u(c);if("object"===s(f))return f.v}return i(100),e.isFetching=!1,e}))).apply(this,arguments)}function b(){return(b=p((function*(e,t){for(var n=void 0===(r=t.startDate)?0:r,r=t.recPerPage,o=t.onProgress,a=void 0===r?50:r,l=0;a;){var u=(s=yield i.default.fetchChatMessagesByPage(e,{pager:a,reverse:!0,putToCache:!1,skipChatFilter:!0})).prevPager,s=s.list;a=!u||s.some((function(e){return e.date<n}))?null:u,l+=Math.min(10,(100-l)/3),null!=o&&o(l)}o(100)}))).apply(this,arguments)}t.getFetchingTask=function(){return h},(0,o.registerCommand)("fetchChatsHistory",(function(e,t){return m(t)}),null,{apiLevel:1})},29795:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.loadMessages=M;var o=m(n(20213)),a=n(33594),i=n(55292),l=m(n(74101)),u=m(n(73052)),s=n(7491),c=n(81595),f=n(15973),d=n(58851),p=n(68271),h=n(13347);function m(e){return e&&e.__esModule?e:{default:e}}function y(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=P(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function g(){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=O(e);if(n=t?(n=O(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return w(o)}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){_(a,r,o,i,l,"next",e)}function l(e){_(a,r,o,i,l,"throw",e)}i(void 0)}))}}function E(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||P(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t){t=1<arguments.length&&void 0!==t&&t;var n=l.default.getChat(e);if(!n||n.isLocal&&!n.isNotification)return{cgid:e,list:[],canLoadMore:!1,loading:!1};var r=!n.isNotification&&!n.latestMessageIndexes.includes(1)&&0!==n.lastMessageIndex;return{cgid:e,list:E(n.latestMessageIndexes),canLoadMore:r,loading:r&&t}}var x=!1;function M(e,t){return T.apply(this,arguments)}function T(){return(T=C((function*(e,t){var n,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=void 0===(n=r.length)?20:n,a=void 0===(n=r.reverse)||n;if(yield new Promise((function(e){var t=Date.now();!function n(){Date.now()-1e4>t&&e(!1),x?setTimeout(n,500):e(!0)}()}))){if(!(t<=0))return r=[],null!=(n=(0,f.getCurrentUser)())&&n.isVersionSupport(h.VersionSupport.xuanbot)&&e===(0,d.getXuanbotGid)((0,f.getCurrentUserID)())&&(r=(0,c.getStoreItem)("DATASTORE::".concat(u.default.identify,"::").concat(u.default._name,"::LOCAL_NOTIFICATION"),[]).filter((function(e){return a?e<t&&t-o-1<e:t<e&&e<t+o+1}))),n=a?(0,s.generateContinuousList)(t,Math.max(1,t-(o-1)),!1):(0,s.generateContinuousList)(t,Math.max(1,t+o-1),!0),n=[].concat(E(n),E(r)).sort((function(e,t){return a?t-e:e-t})).slice(0,o),r=yield u.default.asyncGetMessages(e,n,!0,"index"),x=!1,r;console.error("fromIndex <= 0, fromIndex: ",t)}}))).apply(this,arguments)}var I=new(function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e);var n,r=v(a);function a(e){var t;if(this instanceof a)return S(w(t=r.call(this,"ChatMessagesList",e,{channelDelayTime:50,key:"cgid"})),"idleTasks",new o.default),S(w(t),"needFetchListOnChatsReady",new Set),S(w(t),"imageMessageMap",new Map),u.default.afterStoreChatMessages(t.handleStoreChatMessages.bind(w(t))),l.default.subscribeChatsReadyEvent(t.handleChatsReady.bind(w(t))),l.default.subscribeAny((function(e){var n,r=[],o=y(e);try{for(o.s();!(n=o.n()).done;){var a,i=n.value,l=t.getItemFromCache(i.gid);l&&(a=i.lastMessageIndex&&!i.latestMessageIndexes.includes(1),l.canLoadMore&&!a&&r.push(l))}}catch(e){o.e(e)}finally{o.f()}r.length&&t.update(r.map((function(e){return e.cgid})))})),t;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"handleChatsReady",value:function(){var e;this.needFetchListOnChatsReady.size&&(e=E(this.needFetchListOnChatsReady),this.needFetchListOnChatsReady.clear(),this.update(e))}},{key:"handleStoreChatMessages",value:function(e,t){var n,r;!e.isDeleted&&e.isVisible&&(r=t.lastReadChanged,n=t.newUnread,t=t.newMessages,(r||null!=n&&n.length||null!=t&&t.length)&&this.update(e.gid),r=this.getList(e.gid).list,e.latestMessageIndexes.length===r.length&&e.latestMessageIndexes[0]===r[0]||this.update(e.gid))}},{key:"reset",value:function(e){var t=g(O(a.prototype),"reset",this).call(this,e);return this.needFetchListOnChatsReady.clear(),this.idleTasks.cancelAll(),DEBUG_I&&(console.collapse("STORE.ChatMessagesList","pinkBg","reset","pinkPale",t,""),console.log("identify",e),console.groupEnd()),!0}},{key:"update",value:function(e,t){e=e||this.allKeys;var n,r,o,a=[],i=[],l=[],u=y(e=Array.isArray(e)?e:[e]);try{for(u.s();!(n=u.n()).done;){var s=n.value,c=this.getItemFromCache(s),f=j(s,"boolean"==typeof t?t:!!c&&c.loading);c&&((r=f)===(o=c)||r&&o&&r.cgid===o.cgid&&r.list===o.list&&r.canLoadMore===o.canLoadMore&&r.loading===o.loading||function(e,t){return e&&t&&t.list.every((function(t){return e.list.includes(t)}))}(c,f))?i.push(c):(a.push(f),i.push(f)),null!=c&&c.expired&&l.push(s)}}catch(e){u.e(e)}finally{u.f()}return a.length&&(this.store(a),DEBUG_I&&(console.collapse("STORE.ChatMessagesList","pinkBg","store","pinkPale",a.length,""),console.log("recordsNeedStore",a),console.log("allRecords",i),console.groupEnd())),i}},{key:"getList",value:function(e){if(n=this.getItemFromCache(e))return n;var t,n=j(e,!0);return this.store(n,{skipPublish:!0}),l.default.isReady?(t=l.default.getChat(e,!1)).lastMessageIndex&&M(e,t.lastMessageIndex+1):this.needFetchListOnChatsReady.add(e),n}},{key:"setImageMessageMap",value:function(e){var t;return(t=null==(t=this.getList(e))?void 0:t.list)&&null!=(t=u.default.getMessages(t,e,"index"))&&t.length?(t=t.filter((function(e){return null==e?void 0:e.isImageContent})),t.length&&this.imageMessageMap.set(e,t),t):null}},{key:"getPrevAndNextImageMessage",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(null==(o=u.default.getMessage(e))||!o.isImageContent)return null;var n,r,o=o.cgid,a=!this.imageMessageMap.has(o)||t?this.setImageMessageMap(o):this.imageMessageMap.get(o);if(!a)return null;if(-1===(t=a.findIndex((function(t){return t.id===e}))))return null;for(var i=t,l=t;(n=a[--i])&&n.retracted;);for(;(r=a[++l])&&r.retracted;);return{prev:n,next:r}}},{key:"loadMoreList",value:(n=C((function*(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:20;if(!l.default.isReady)return DEBUG&&(console.collapse("STORE.ChatMessagesList","pinkBg","Load more list for chat ".concat(e," failed"),"pinkPale","chatsStore is not ready","pink"),console.trace("store",this),console.groupEnd()),!1;var n=l.default.getChat(e);if(!n)return DEBUG&&(console.collapse("STORE.ChatMessagesList","pinkBg","Load more list for chat ".concat(e," error"),"redPale","Cannot found the chat","red"),console.trace("store",this),console.groupEnd()),!1;if(n.isLocal)return!1;var r=n.latestMessageIndexes;if(r.includes(1))return DEBUG&&console.color("STORE.ChatMessagesList","pinkBg","Load more list for chat ".concat(e," failed"),"pinkPale","all message has been loaded to latest messages","pink"),!1;if(this.update(e,!0),(r=(null!=(r=r[0])?r:n.lastMessageIndex)-1)<1)return!1;try{var o=yield M(e,r,{length:t});o&&n.setLatestMessages(o,{isFocusedActiveChat:(0,p.isOpenedActiveChat)(n.gid)}),l.default.store(n)}catch(t){DEBUG&&(console.collapse("STORE.ChatMessagesList","pinkBg","load more Error","redPale",String(t),"red"),console.error("error",t),console.log("cgid",e),console.groupEnd())}return this.update(e,!1),!0})),function(e){return n.apply(this,arguments)})},{key:"shrinkList",value:function(e){var t,n,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,o=this.getItemFromCache(e);!o||(t=o.list).length>r&&((n=l.default.getChat(e)).shrinkMessageIndexList(),l.default.store(n),n=t.slice(-r,t.length),o.list=n,this.store(S({},e,o)))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(i.DataStore));(0,a.setCallbackOnInitedDatabase)(I.reset.bind(I)),n.g.ExtsRuntime&&n.g.ExtsRuntime.registerExtensionAPI([{name:"im.getChatMessageList",level:3,func:function(e){return I.getList(e)}},{name:"im.subscribeChatMessageList",level:3,func:function(e,t){return I.subscribe(e,t)}},{name:"im.subscribeAnyChatMessageList",level:3,func:function(e){return I.subscribeAny(e)}},{name:"im.unsubscribeChatMessageList",level:3,func:function(e){return I.unsubscribe(e)}}]),DEBUG&&(n.g.$chatMessagesListStore=I),t.default=I},938:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageSearchConditions=void 0,t.searchChatMessagesInDatabase=O,t.searchChatsMessagesInDatabase=function(e,t){return _.apply(this,arguments)};var r=n(92691),o=n(58851),a=u(n(84431)),i=n(73052),l=u(n(74101));function u(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=d(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function d(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){h(a,r,o,i,l,"next",e)}function l(e){h(a,r,o,i,l,"throw",e)}i(void 0)}))}}function y(){return g.apply(this,arguments)}function g(){return(g=m((function*(e){var t={type:"content",match:e,ignoreCase:!(1<arguments.length&&void 0!==arguments[1])||arguments[1]};if(e.includes("|")){var n,o=e.split("|"),i=(t.type="anyOf",t.match=[],f(o));try{for(i.s();!(n=i.n()).done;){var l,u=n.value;u&&"object"===c(u)&&u.type?t.match.push(u):"string"==typeof u&&u.length&&(l=yield y(u),t.match.push(l))}}catch(e){i.e(e)}finally{i.f()}}else"@"===e[0]?(o=a.default.guessMemberInCache(e))?(t.type="user",t.match=o.id):/^@\d+$/.test(e)?(t.type="user",t.match=Number.parseInt(e.substr(1),10)):(o=yield a.default.asyncGetMember(e.substr(1)))&&(t.type="user",t.match=o.id):"["===e[0]&&"]"===e[e.length-1]?(o=e.substr(1,e.length-2),r.TYPES[o]?(t.type="type",t.match=o):r.CONTENT_TYPES[o]&&(t.type="contentType",t.match=o)):"#"===e[0]&&(37===e.length?(t.type="gid",t.match=e.substring(1)):/^#\d+$/.test(e)&&(t.type="id",t.match=Number.parseInt(e.substr(1),10)));return t}))).apply(this,arguments)}function b(e,t){if("anyOf"===t.type)return t.match.length&&t.match.some(b.bind(null,e));if("content"!==t.type)return e[t.type]===t.match;if(e.contentType===r.CONTENT_TYPES.text||e.contentType===r.CONTENT_TYPES.plain){if("string"!=typeof e.content)return!1;var n=t.ignoreCase?e.content.toLocaleLowerCase():e.content;return n.length&&n.includes(t.match)}return"string"==typeof e.keys&&(n=t.ignoreCase?e.keys.toLocaleLowerCase():e.keys).length&&n.includes(t.match)}var v=function(){function e(t){var n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],r=this,o=e;if(!(r instanceof o))throw new TypeError("Cannot call a class as a function");this._keys=Array.isArray(t)?t:t.split(" "),this._ignoreCase=n}var t,n,o;return t=e,(n=[{key:"buildConditions",value:(o=m((function*(){if(this._conditions)return this._conditions;var e,t=[],n=f(this._keys);try{for(n.s();!(e=n.n()).done;){var o,a=e.value;a&&"object"===c(a)&&a.type?t.push(a):"string"==typeof a&&a.length&&(o=yield y(this._ignoreCase?a.toLowerCase():a,this._ignoreCase),t.push(o))}}catch(e){n.e(e)}finally{n.f()}return this._conditions=t,this._includeBroadcast=t.some((function(e){return"type"===e.type&&e.match===r.TYPES.broadcast||"anyOf"===e.type&&e.match.length&&e.match.some((function(e){return"type"===e.type&&e.match===r.TYPES.broadcast}))})),t})),function(){return o.apply(this,arguments)})},{key:"match",value:function(e){return!(e.type===r.TYPES.broadcast&&!this._includeBroadcast)&&this._conditions.length&&this._conditions.every(b.bind(null,e))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function w(e){return e instanceof v?e:new v(e)}function O(e,t){return S.apply(this,arguments)}function S(){return(S=m((function*(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=("string"==typeof t&&(t=t.toLowerCase().split(" ")),n.returnType),o=n.minDate,a=(n=void 0===(n=n.limit)?0:n,w(t));return yield a.buildConditions(),(0,i.queryMessagesFromDatabase)(e,(function(e){return!(!e.id||e.deleted||o&&e.date<o)&&a.match(e)}),{limit:n,offset:0,reverse:!0,returnType:r})}))).apply(this,arguments)}function _(){return(_=m((function*(e,t){var n,r,a,i,u,f,d,p,h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(t?"contacts"===t?t=l.default.getPrivateChats({sortRules:!1,excludeLocal:!0}):"groups"===t?t=C(t=l.default.getGroupsChats("default",!1,!0)):"string"==typeof t?t=[t].concat(s(l.default.getChat(t).mergedChats)):Array.isArray(t)&&(n=[],t.forEach((function(e){var t=l.default.getChat(e);n.push(e),n=n.concat(t.mergedChats)})),t=n):t=C(t=l.default.getAllChats(!1)),t.length)return t=t.map((function(e){return e&&"object"===c(e)?e.gid:e})).filter((function(e){return e!==o.NOTIFICATION_CHAT_GID})),r=h.returnType,a=h.minDate,i=h.beforeSearchChat,u=h.afterSearchChat,f=h.abortHandler,d=h.limit,p=w(e),yield p.buildConditions(),h.beforeSearch&&h.beforeSearch(t,p),Promise.all(t.map(function(){var e=m((function*(e,n){if(f.aborted)return null;i&&i(e,n,t);var o=yield O(e,p,{minDate:a,returnType:r,limit:d});return o=Array.isArray(o)?{cgid:e,count:o.length,list:o}:o,u&&u(e,o,n,t),o}));return function(t,n){return e.apply(this,arguments)}}()))}))).apply(this,arguments)}function C(e){var t=new Set;return e.forEach((function(e){if("object"===c(e)){if(t.add(e.gid),!e.isOne2One&&Array.isArray(e.mergedChats)&&0<e.mergedChats.length){var n,r=f(e.mergedChats);try{for(r.s();!(n=r.n()).done;){var o=n.value;t.add(o)}}catch(e){r.e(e)}finally{r.f()}}}else if("string"==typeof e){t.add(e);var a=l.default.getChat(e);if(Array.isArray(a.mergedChats)&&0<a.mergedChats.length){var i,u=f(e.mergedChats);try{for(u.s();!(i=u.n()).done;){var s=i.value;t.add(s)}}catch(e){u.e(e)}finally{u.f()}}}})),s(t)}t.MessageSearchConditions=v},73052:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.createMessage=void 0,t.fetchChatMessageInfoFromRemote=Y,t.isMessagePinnedInChat=function(e,t){return!!(t=m.default.getChat(t))&&t.isPinnedMessage(e)},t.queryMessagesFromDatabase=q,t.reindexNotifications=V,t.syncMessagesFromRemote=Q;var o=P(n(23848)),a=P(n(20213)),i=n(84401),l=P(n(84836)),u=E(n(92691)),s=n(62411),c=E(n(33594)),f=n(55292),d=P(n(24260)),p=n(15973),h=n(58851),m=P(n(74101)),y=n(68271),g=n(37907),b=n(14915),v=P(n(94128)),w=n(23405),O=n(86273),S=n(81595),_=n(13347);function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}function E(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=C(t))&&t.has(e))return t.get(e);var n,o,a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]);return a.default=e,t&&t.set(e,a),a}function P(e){return e&&e.__esModule?e:{default:e}}function k(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||I(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||I(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=I(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function I(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(){return(A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=L(e);if(n=t?(n=L(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return B(o)}}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function U(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function z(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){U(a,r,o,i,l,"next",e)}function l(e){U(a,r,o,i,l,"throw",e)}i(void 0)}))}}var W=Symbol("saved-messages"),H=Symbol("chat-messages-ready");function V(){return G.apply(this,arguments)}function G(){return(G=z((function*(){var e=yield q("notification",null,{returnType:"message"});return(0,u.sortChatMessages)(e),e.forEach((function(e,t){e.index=t+1})),e}))).apply(this,arguments)}function q(e,t){return $.apply(this,arguments)}function $(){return($=z((function*(e,t){var n=void 0===(n=(a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).limit)?0:n,r=void 0===(r=a.offset)?0:r,o=void 0===(o=a.reverse)||o,a=void 0===(a=a.returnType)?"raw":a,i=c.default.database.chatMessages;return e&&(i=i.where("cgid").equals(e)),"function"==typeof t&&(i=i.filter(t)),o&&(i=i.reverse()),r&&(i=i.offset(r)),n&&(i=i.limit(n)),"count"===a?{gid:e,count:yield i.count()}:(i=yield i.toArray(),"raw"===a?i:i.map(K))}))).apply(this,arguments)}var K=function(e,t){return e instanceof u.default||e instanceof s.NotificationMessage?e:(t&&!(0,O.isLocalID)(e.id)&&e.deleted&&e.user===(0,p.getCurrentUserID)()&&(t=t.getItemFromCache(e.id))&&e!==t&&(e.contentBackup=t.content,e.replyTo=t.replyTo),(e.type===u.TYPES.notification||"notify"===e.type?s.createNotificationMessage:u.createChatMessage)(e))};function Y(e){return J.apply(this,arguments)}function J(){return(J=z((function*(e){if(e===h.NOTIFICATION_CHAT_GID)return null;var t=m.default.getChat(e);return t&&(t.isLocal||t.isRobot)?{lastMessage:0,messageCount:0}:(e=(t=M(yield(0,o.default)(d.default.sendAndListen({method:"chatGetMessageInfo",params:[e]})),2))[0],t=t[1],e&&DEBUG&&(console.collapse("STORE.ChatMessage","pinkBg","fetch chat message info Error","redPale",String(e),"red"),console.error("error",e),console.groupEnd()),t?(DEBUG_I&&(console.collapse("STORE.ChatMessage","pinkBg","fetch chat message info","pinkPale","last message ID ".concat(t.lastMessage,", count ").concat(t.messageCount),""),console.log("messageInfo",t),console.groupEnd()),t):null)}))).apply(this,arguments)}function X(){return(X=z((function*(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:20,n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r=0,o=0,a=0;return(e=yield Y(e))&&(r=e.messageCount,o=Math.ceil(r/t),a=e.lastMessage),{recPerPage:t,pageID:n?o:1,recTotal:r,pageTotal:o,range:[0,a]}}))).apply(this,arguments)}function Q(e,t){return Z.apply(this,arguments)}function Z(){return(Z=z((function*(e,t){var n=void 0!==(n=(a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).reverse)&&n,r=void 0===(r=a.limit)?50:r,a=void 0!==(a=a.returnID)&&a,i=(l=M(yield(0,o.default)(d.default.sendAndListen({method:"messageSync",params:[e,t,n,r,a]})),2))[0],l=l[1];return i?(DEBUG&&(console.collapse("STORE.ChatMessage","pinkBg","sync messages Error","redPale",String(i),"red"),console.error("error",i),console.log("params:",{cgid:e,fromID:t,reverse:n,limit:r,returnID:a}),console.groupEnd()),[]):(DEBUG&&(console.collapse("STORE.ChatMessage","pinkBg","sync messages","pinkPale",l?l.length:0,""),console.log("messages:",l),console.log("params:",{cgid:e,fromID:t,reverse:n,limit:r,returnID:a}),console.groupEnd()),l)}))).apply(this,arguments)}t.createMessage=K;var ee=new(function(e){var t=Y;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R(t,e);var n,r,s,f,C,E,P,k,I,D,U,G,$=N(Y);function Y(e){var t;if(this instanceof Y)return F(B(t=$.call(this,"ChatMessage",e,{channelDelayTime:120})),"unionIdMap",new Map),F(B(t),"_idleTasks",new a.default),F(B(t),"_commonChannel",i.delayChannel),F(B(t),"_databaseSaveTask",new l.default(t.saveMessagesToDatabase.bind(B(t)),200)),F(B(t),"_messagesNeedSave",new Set),F(B(t),"messagesNeedLoad",new Map),F(B(t),"messagesNeedLoadByIndex",new Map),F(B(t),"_messagesLoadTask",new l.default(t.tryLoadMessages.bind(B(t)),200)),F(B(t),"_ready",!1),F(B(t),"_synchronizing",!1),F(B(t),"maxNotificationIndex",0),F(B(t),"normalizeItem",K),F(B(t),"getItemFromCacheByUnionId",(function(e){return(e=t.unionIdMap.get(e))?t.getItemFromCache(e):null})),m.default.subscribeChatsReadyEvent(t.handleChatsReady.bind(B(t))),(0,w.onStartFetchingHistory)((function(){t._synchronizing=!0})),(0,w.onFinishFetchingHistory)((function(){setTimeout((function(){t._synchronizing=!1}),2e3)})),t;throw new TypeError("Cannot call a class as a function")}return t=Y,(e=[{key:"isReady",get:function(){return this._ready}},{key:"handleChatsReady",value:(G=z((function*(){yield this.fetchMissedMessages(),yield this.fetchOfflineMessagesFromRemote(),this._ready=!0,this._commonChannel.publishNow(H),this.maxNotificationIndex=0;var e=yield V();this.maxNotificationIndex=e.length,this.store(e)})),function(){return G.apply(this,arguments)})},{key:"reset",value:function(e){var t=A(L(Y.prototype),"reset",this).call(this,e);this._ready=!1,t&&this._databaseSaveTask.cancel(),this._idleTasks.cancelAll(),DEBUG_I&&(console.collapse("STORE.ChatMessage","pinkBg","reset","pinkPale",t,""),console.log("identify",e),console.groupEnd())}},{key:"store",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(e){Array.isArray(e)||(e=[e]);var r=(void 0!==(i=n.skipChatFilter)&&i||(e=e.filter((function(e){return!!e&&(e=m.default.getChat(e.cgid))&&!e.isDeleted}))),(0,p.getCurrentUserID)()),o=(0,h.getXuanbotGid)(r),a=null==(i=m.default.getChat(o))?void 0:i.lastMessageIndex,i="DATASTORE::".concat(this._identify,"::").concat(this._name,"::LOCAL_NOTIFICATION"),l=(0,S.getStoreItem)(i,[]);if(e=(e=e.map((function(e){if(!(0,p.getCurrentUser)().isVersionSupport(_.VersionSupport.xuanbot)||"notification"!==e.type||e.cgid!==o&&e.cgid!==h.NOTIFICATION_CHAT_GID||e.index&&e.index%1!=0)return e;var t=Number.parseInt(e.id,10)/Math.pow(10,10);return l.some((function(e){return(e-t)%1==0}))?null:(e.index=Math.floor(a)+t,e.date=Date.now(),e.cgid=o,l.push(e.index),e)}))).filter((function(e){return e})),(0,S.setStoreItem)(i,l),e.length){i=void 0===(i=n.putToDatabase)||i,e=A(L(Y.prototype),"store",this).call(this,e,{normalizeFunc:K}),i&&this.planToSaveMessagesToDatabase(e),DEBUG_I&&(console.collapse("STORE.ChatMessage","pinkBg","store","pinkPale",e.length,""),console.trace("chatMessages",e),console.log("options",n),console.log("store",this),console.groupEnd()),i=e.reduce((function(e,t){var n=t.cgid;return e.has(n)?e.get(n).push(t):e.set(n,[t]),e}),new Map);var s,c=(DEBUG_I&&console.collapse("STORE.ChatMessage","pinkBg","set latest messages","pinkPale",i.size,""),[]),f=[],d=[],w=[],O=[],C=[],E=v.default.call("ui.isWindowOpenAndFocus"),P=[],k=T(i);try{for(k.s();!(s=k.n()).done;){var j=M(s.value,2),I=j[0],D=j[1],R=m.default.getChat(I,!1);if(R){if(this.isReady&&R.isNotification){(0,u.sortChatMessages)(D);for(var N=0;N<D.length;N++){var B=D[N];0===B.index&&(B.index=++this.maxNotificationIndex)}this.planToSaveMessagesToDatabase(D)}var F=R.setLatestMessages(D,{currentUserID:r,isFocusedActiveChat:E&&(0,y.isOpenedActiveChat)(R.gid)});F.updated&&c.push(R),F.newMessages.length&&f.push.apply(f,x(F.newMessages)),F.newUnread.length&&d.push.apply(d,x(F.newUnread)),F.deletedUnread.length&&w.push.apply(w,x(F.deletedUnread)),F.lastReadChanged&&O.push(I),F.frozenCanceled&&C.push(I),F.localDeletedMessages.length&&P.push.apply(P,x(F.localDeletedMessages)),this._afterStoreChatMessages&&this._afterStoreChatMessages(R,F),DEBUG_I&&(console.collapse(R.name||R.gid,F.updated?"green":"","count:".concat(R.latestMessageIndexes.length),"","unread:".concat(R.unreadMessagesCount),R.unreadMessagesCount?"orange":"","newUnread:".concat(F.newUnread.length),F.newUnread.length?"orange":"","lastRead:".concat(R.lastReadMessageIndex),F.lastReadChanged?"orange":"",""),console.log(F),console.groupEnd())}}}catch(e){k.e(e)}finally{k.f()}if(e.forEach((function(e){e.id&&e.unionId&&t.unionIdMap.set(e.unionId,e.id)})),DEBUG_I&&(console.trace("chatsMap",i),console.groupEnd()),c.length&&m.default.store(c),f.length&&(0,g.emitReceiveNewMessages)(f),(d.length||w.length?g.emitUnreadMessagesChange:g.tryEmitUnreadMessagesChange)(m.default.getUnreadMessageCount()),O.length){var U,z=T(O);try{for(z.s();!(U=z.n()).done;){var W=U.value;(0,b.syncLastReadMessageForChat)(m.default.getChat(W,!1))}}catch(e){z.e(e)}finally{z.f()}}if(C.length){var H,V=T(C);try{for(V.s();!(H=V.n()).done;){var G=H.value;(0,b.toggleFreezeChat)(m.default.getChat(G),!1)}}catch(e){V.e(e)}finally{V.f()}}if(P.length){var q,$=T(P);try{for($.s();!(q=$.n()).done;){var J=q.value;this.deleteCacheItem(J)}}catch(e){$.e(e)}finally{$.f()}}return e}}}},{key:"afterStoreChatMessages",value:function(e){this._afterStoreChatMessages&&DEBUG&&console.error("this._afterStoreChatMessages is not empty, it's may be an error."),this._afterStoreChatMessages=e}},{key:"getMessagesFromDatabase",value:(U=z((function*(e,t){var n,r,o=this,a=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],i=this._identify;if(t="id"===(3<arguments.length&&void 0!==arguments[3]?arguments[3]:"id")?yield c.default.database.chatMessages.bulkGet(t):yield c.default.database.chatMessages.where("unionId").anyOf(t.map((function(t){return"".concat(e,"@").concat(t)}))).toArray(),i===this._identify)return n=[],r=[],t.forEach((function(t){var a;t&&e!==h.NOTIFICATION_CHAT_GID&&((a=o._cache.get(t.id))?r.push(a):((t=K(t,o)).expired=!0,n.push(t),r.push(t)))})),n.length&&this.store(n,{putToDatabase:!1,putToCache:a,unread:!1}),r})),function(e,t){return U.apply(this,arguments)})},{key:"planToSaveMessagesToDatabase",value:function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=r.id;(0,u.isLocalMessageID)(o)||this._messagesNeedSave.add(r)}}catch(e){n.e(e)}finally{n.f()}this._databaseSaveTask.do()}},{key:"saveMessagesToDatabase",value:(D=z((function*(){if(this._messagesNeedSave.size){var e,t=[],n=T(this._messagesNeedSave);try{for(n.s();!(e=n.n()).done;){var r=e.value;r&&t.push(r.plain())}}catch(e){n.e(e)}finally{n.f()}if(this._messagesNeedSave.clear(),t.length){(0,c.beginDBBusyTask)();try{var o=c.default.database.chatMessages;t.length&&(yield o.bulkPut(t)),this._commonChannel.publishNow(W,t),DEBUG_I&&(console.collapse("STORE.ChatMessage","pinkBg","save chat message to database","pinkPale",t.length,""),console.log("messagesNeedSave",t),console.log("store",this),console.groupEnd())}catch(e){DEBUG&&(console.collapse("STORE.ChatMessage","pinkBg","save chat message to database Error","redPale",String(e),"red"),console.error("error",e),console.log("messagesNeedSave",t),console.log("store",this),console.groupEnd())}(0,c.endDBBusyTask)()}}})),function(){return D.apply(this,arguments)})},{key:"subscribeMessagesSaved",value:function(e){return this._commonChannel.subscribe(W,e)}},{key:"unsubscribeMessagesSaved",value:function(e){return this._commonChannel.unsubscribe(e)}},{key:"subscribeChatMessagesReadyEvent",value:function(e){return this._commonChannel.subscribe(H,e)}},{key:"unsubscribeChatMessagesReadyEvent",value:function(e){return this._commonChannel.unsubscribe(e)}},{key:"getMessage",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"id",r="id"===n?this.getItemFromCache(e):this.getItemFromCacheByUnionId("".concat(t,"@").concat(e));return r?r.lastAccessTime=Date.now():this._synchronizing||this.getMessagesFromDatabase(t,[e],!0,n),r}},{key:"getMessages",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"id";if(!e||!e.length)return[];var o=[];return e="id"===r?e.map((function(e){var t=e?n.getItemFromCache(e):null;return!e||t||n._synchronizing||o.push(e),t})):e.map((function(e){var r=e?n.getItemFromCacheByUnionId("".concat(t,"@").concat(e)):null;return!e||r||n._synchronizing||o.push(e),r})),o.length&&this.planToLoadMessages(t,o,r),e}},{key:"asyncGetMessage",value:(I=z((function*(e,t){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"id";if(!t)return null;var o,a="id"===r?this.getItemFromCache(t):this.getItemFromCacheByUnionId("".concat(e,"@").concat(t));return(a=a||(null==(o=yield this.getMessagesFromDatabase(e,[t],n,r))?void 0:o[0]))?a:null==(o=yield this.getMessagesFromRemote(e,[t],{putToCache:n,keyBy:r}))?void 0:o[0]})),function(e,t){return I.apply(this,arguments)})},{key:"asyncGetMessages",value:(k=z((function*(e,t){for(var n=this,r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"id",a=new Set,i=[],l=new Map,u="id"===o?this.getItemFromCache:function(t){return n.getItemFromCacheByUnionId("".concat(e,"@").concat(t))},s=0;s<t.length;++s){var c=t[s],f=(l.set(c,s),u(c));f?i[s]=f:a.add(c)}if(a.size){var d=yield this.getMessagesFromDatabase(e,x(a),r,o);if(d&&d.length){var p,h=T(d);try{for(h.s();!(p=h.n()).done;){var y,g=p.value;g&&(y="id"===o?g.id:g.index,i[l.get(y)]=g,a.delete(y))}}catch(t){h.e(t)}finally{h.f()}}Array.from(a).forEach((function(e){(0,O.isLocalID)(e)&&a.delete(e)}))}if(e&&a.size&&(d=yield this.getMessagesFromRemote(e,x(a),{putToCache:r,keyBy:o}))&&d.length){var b,v=T(d);try{for(v.s();!(b=v.n()).done;){var w,S=b.value;S&&(w="id"===o?S.id:S.index,i[l.get(w)]=S,a.delete(w))}}catch(t){v.e(t)}finally{v.f()}}return DEBUG&&(a.size?(console.collapse("STORE.ChatMessage","pinkBg","Cannot load ".concat(a.size," messages for chat"),"redPale",(null==(r=m.default.getChat(e))?void 0:r.name)||e,"red"),console.error("messagesNeedLookup",a)):console.collapse("STORE.ChatMessage","pinkBg","Load ".concat(i.length," messages for chat"),"pinkPale",e,""),console.log("messages",i),console.log("cgid",e),console.log("ids",t),console.groupEnd()),i})),function(e,t){return k.apply(this,arguments)})},{key:"planToLoadMessages",value:function(e,t){var n="id"===(2<arguments.length&&void 0!==arguments[2]?arguments[2]:"id")?this.messagesNeedLoad:this.messagesNeedLoadByIndex;if(n.has(e)){var r,o=T(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;n.get(e).add(a)}}catch(e){o.e(e)}finally{o.f()}}else n.set(e,new Set(x(t)));this._messagesLoadTask.do()}},{key:"tryLoadMessages",value:(P=z((function*(){if(this.messagesNeedLoad.size){var e,t=x(this.messagesNeedLoad.entries()),n=(this.messagesNeedLoad.clear(),T(t));try{for(n.s();!(e=n.n()).done;){var r=M(e.value,2),o=r[0],a=r[1];yield this.asyncGetMessages(o,x(a))}}catch(e){n.e(e)}finally{n.f()}}if(this.messagesNeedLoadByIndex.size){t=x(this.messagesNeedLoadByIndex.entries());var i,l=(this.messagesNeedLoadByIndex.clear(),T(t));try{for(l.s();!(i=l.n()).done;){var u=M(i.value,2),s=u[0],c=u[1];yield this.asyncGetMessages(s,x(c),!0,"index")}}catch(e){l.e(e)}finally{l.f()}}})),function(){return P.apply(this,arguments)})},{key:"fetchOfflineMessagesFromRemote",value:(E=z((function*(){var e=this;try{var t=yield this._idleTasks.requestAndWait(z((function*(){var t=yield d.default.sendAndListen({method:"messageSyncSinceOffline",params:[!1]});if(null!=t&&t.length)return e.store(t,{putToDatabase:!0,putToCache:!0,unread:!0})})),{timeout:3e3,name:"fetchOfflineMessagesFromRemote"});DEBUG_I&&(console.collapse("STORE.ChatMessage","pinkBg","fetch offline messages","pinkPale",t?t.length:0,""),console.log("offlineMessages",t),console.groupEnd())}catch(t){DEBUG&&(console.collapse("STORE.ChatMessage","pinkBg","fetch offline messages Error","redPale",String(t),"red"),console.error("error",t),console.log("store",this),console.groupEnd())}})),function(){return E.apply(this,arguments)})},{key:"fetchMissedMessages",value:(C=z((function*(){var e=this;try{var t=yield this._idleTasks.requestAndWait(z((function*(){if((0,p.getCurrentUser)().isVersionSupport("messageSyncMissed")){var t=yield c.default.database.chatMessages.orderBy("id").last();if(t)return null!=(t=yield d.default.sendAndListen({method:"messageSyncMissed",params:[null==t?void 0:t.id]}))&&t.length?e.store(t,{putToDatabase:!0,putToCache:!0,unread:!1}):void 0}})),{timeout:3e3,name:"fetchMissedMessage"});DEBUG_I&&(console.collapse("STORE.ChatMessage","pinkBg","fetch missed messages","pinkPale",t?t.length:0,""),console.log("missedMessages",t),console.groupEnd())}catch(t){DEBUG&&(console.collapse("STORE.ChatMessage","pinkBg","fetch missed messages Error","redPale",String(t),"red"),console.error("error",t),console.log("store",this),console.groupEnd())}})),function(){return C.apply(this,arguments)})},{key:"fetchLastMessageOfChatsFromRemote",value:function(e){var t=this;return this._idleTasks.requestAndWait(z((function*(){var n=(r=M(yield(0,o.default)(d.default.sendAndListen({method:"chatGetLastMessage",params:[e]})),2))[0],r=r[1];if(!n)return DEBUG_I&&(console.collapse("STORE.ChatMessage","pinkBg","fetch latest messages of recents","pinkPale",r?r.length:0,""),console.log("cgids",e),console.log("lastMessages",r),console.groupEnd()),r&&r.length?t.store(r,{putToDatabase:!0,putToCache:!0}):r;DEBUG&&(console.collapse("STORE.ChatMessage","pinkBg","fetch latest messages of recents Error","redPale",String(n),"red"),console.error("error",n),console.log("cgids",e),console.groupEnd())})),{name:"fetchLastMessageOfChatsFromRemote",timeout:3e3})}},{key:"fetchLastMessageForChats",value:(f=z((function*(){var e,t=[],n=[],r=T(m.default.getAllChats());try{for(r.s();!(e=r.n()).done;){var o=e.value,a=o.lastMessageInfo,i=o.lastMessage,l=o.gid;o.isDeleted||o.isDismissed||o.isOne2One&&o.isLocal||!i||(null==a?void 0:a.id)===i||o.isMerged||(o.isRobot&&o.isLocal||o.historyEnd===i||o.latestMessages.includes(i)?t.push(i):n.push(l))}}catch(e){r.e(e)}finally{r.f()}var u=[];t.length&&u.push(this.getMessagesFromDatabase(t)),n.length&&u.push(this.fetchLastMessageOfChatsFromRemote(n)),u.length&&(yield Promise.all(u))})),function(){return f.apply(this,arguments)})},{key:"getMessagesFromRemote",value:(s=z((function*(e,t,n){return e===h.NOTIFICATION_CHAT_GID&&"index"===n.keyBy?[]:(r=void 0===(r=n.putToCache)||r,a=void 0!==(a=n.skipChatFilter)&&a,n=n.keyBy,t=(n=M(yield(0,o.default)(d.default.sendAndListen({method:"id"===(void 0===n?"id":n)?"messageGetList":"messageGetListByIndexes",params:(0,p.getCurrentUser)().isVersionSupport("messageGetListWithGid")?[e,t]:[t]})),2))[0],n=n[1],t?void(DEBUG&&(console.collapse("STORE.ChatMessage","pinkBg","fetch messages Error","redPale",String(t),"red"),console.error("error",t),console.groupEnd())):(DEBUG&&(console.collapse("STORE.ChatMessage","pinkBg","fetch messages","pinkPale",n?n.length:0,""),console.log("messages:",n),console.groupEnd()),m.default.getChat(e)?this.store(n,{putToDatabase:!0,putToCache:r,skipChatFilter:a}):n.map((function(e){return(0,u.createChatMessage)(e)}))));var r,a})),function(e,t,n){return s.apply(this,arguments)})},{key:"loadNotificationsByPage",value:(r=z((function*(e,t){var n,r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],o=(e&&"number"!=typeof e||(o="number"==typeof e?e:20,n=(a=(yield q(h.NOTIFICATION_CHAT_GID,null,{limit:0,offset:0,reverse:!1,returnType:"count"})).count)?Math.ceil(a/o):0,e={recPerPage:o,recTotal:a,pageID:t?n:1,totalPage:n,offset:0}),e.recPerPage=Math.max(1,e.recPerPage),e.pageTotal=Math.ceil(e.recTotal/e.recPerPage),e.pageID=Math.max(1,Math.min(e.pageTotal,e.pageID)),yield q(h.NOTIFICATION_CHAT_GID,null,{limit:e.recPerPage,offset:e.offset,reverse:t,returnType:"raw"})),a=this.store(o,{putToDatabase:!1,putToCache:r,unread:!1})||[];return{ids:a.map((function(e){return e.id})),list:a,prevPager:1<e.pageID?j(j({},e),{},{pageID:e.pageID-1,offset:Math.max(0,e.offset-e.recPerPage)}):null,pager:j(j({},e),{},{recCount:a.length}),nextPager:e.pageID<e.pageTotal?j(j({},e),{},{pageID:e.pageID+1,offset:e.offset+a.length}):null}})),function(e,t){return r.apply(this,arguments)})},{key:"fetchChatMessagesByPage",value:(n=z((function*(e,t){var n=this,r=void 0===(r=t.reverse)||r,o=void 0===(o=t.putToCache)||o,a=void 0!==(a=t.skipChatFilter)&&a;if(t=t.pager,e===h.NOTIFICATION_CHAT_GID)return yield this.loadNotificationsByPage(t,r,o);if((t=t&&"number"!=typeof t?t:yield function(){return X.apply(this,arguments)}(e,"number"==typeof t?t:void 0,r)).recPerPage=Math.max(1,t.recPerPage),t.pageTotal||(t.pageTotal=Math.ceil(t.recTotal/t.recPerPage)),t.pageID=Math.max(1,Math.min(t.pageTotal||1,t.pageID)),!t.recTotal)return{list:[],pager:t,nextPager:null,prevPager:null};var i=yield Q(e,t.range[r?1:0],{reverse:r,limit:t.recPerPage,returnID:!0}),l=new Map(i.map((function(e,t){return[e,t]}))),u=[],s=new Set,c=null;if(i.forEach((function(e,t){var r=n.getItemFromCache(e);r?u[t]=r:s.add(e)})),s.size){var f,d=T(yield this.getMessagesFromDatabase(x(s),o));try{for(d.s();!(f=d.n()).done;){var p=f.value;s.delete(p.id),u[l.get(p.id)]=p}}catch(e){d.e(e)}finally{d.f()}s.size&&(c=x(s))}if(c&&c.length&&(e=yield this.getMessagesFromRemote(e,c,{putToCache:o,skipChatFilter:a}))&&e.length){var m,y=T(e);try{for(y.s();!(m=y.n()).done;){var g=m.value;u[l.get(g.id)]=g}}catch(e){y.e(e)}finally{y.f()}}return c=r?[i[i.length-1],i[0]]:[i[0],i[i.length-1]],{ids:i,list:u,range:c,prevPager:1<t.pageID?j(j({},t),{},{pageID:t.pageID-1,range:[0,c[0]-1]}):null,pager:j(j({},t),{},{range:c}),nextPager:t.pageID<t.pageTotal?j(j({},t),{},{pageID:t.pageID+1,range:[c[1]+1,Number.MAX_SAFE_INTEGER]}):null}})),function(e,t){return n.apply(this,arguments)})},{key:"deleteLocalMessage",value:function(e){return!!(e=this.getItemFromCache(e))&&!!e.markLocalDeleted()&&(this.store(e),!0)}},{key:"subscribeByIndices",value:function(e,t,n){return this.subscribeAny((function(r){var o;Array.isArray(r)?(o=r.filter((function(n){return n.cgid===t&&e.includes(n.index)})),n(o.map((function(e){return null==e?void 0:e.proxy})))):r.cgid===t&&e.includes(r.index)&&n(r.proxy)}))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),Y}(f.DataStore));ee.queryMessagesFromDatabase=q,(0,c.setCallbackOnInitedDatabase)(ee.reset.bind(ee)),(0,p.onUserLogout)((function(){ee.saveMessagesToDatabase()})),n.g.ExtsRuntime&&n.g.ExtsRuntime.registerExtensionAPI([{name:"im.getMessage",level:3,func:function(e){return null==(e=ee.getMessage(e))?void 0:e.proxy}},{name:"im.getMessages",level:3,func:function(e,t){return ee.getMessages(e,t).map((function(e){return null==e?void 0:e.proxy}))}},{name:"im.subscribeMessages",level:3,func:function(e,t){return ee.subscribe(e,(function(e){Array.isArray(e)?t(e.map((function(e){return null==e?void 0:e.proxy}))):t(e.proxy)}))}},{name:"im.subscribeAnyMessages",level:3,func:function(e){return ee.subscribeAny((function(t){Array.isArray(t)?e(t.map((function(e){return null==e?void 0:e.proxy}))):e(t.proxy)}))}},{name:"im.unsubscribeMessages",level:3,func:function(e){return ee.unsubscribe(e)}}]),DEBUG&&(n.g.$chatMessagesStore=ee),t.default=ee},58851:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.TYPES=t.NOTIFICATION_CHAT_GID=t.DEFAULT_LATEST_MESSAGES_COUNT=void 0,t.createOne2OneChatGid=C,t.default=void 0,t.getXuanbotGid=function(e){return"".concat(e,"&xuanbot")};var o=(o=n(27945))&&o.__esModule?o:{default:o},a=n(48389),i=n(7066),l=n(7491);function u(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function s(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t,n,r){return(d="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o;if(e=h(e,t)){if((o=Object.getOwnPropertyDescriptor(e,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else w(r,t,n);return!0})(e,t,n,r)}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=h(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=b(e);if(n=t?(n=b(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return g(o)}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){var r=e;if(t.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object");t.set(e,n)}function w(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function O(e,t){return(t=_(e,t,"get")).get?t.get.call(e):t.value}function S(e,t,n){if((t=_(e,t,"set")).set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function _(e,t,n){if(t.has(e))return t.get(e);throw new TypeError("attempted to "+n+" private field on non-instance")}function C(e,t){return[e,t].sort().join("&")}var E="notification";t.NOTIFICATION_CHAT_GID=E,t.DEFAULT_LATEST_MESSAGES_COUNT=30,t.TYPES=P,(x=P||(t.TYPES=P={})).one2one="one2one",x.group="group",x.system="system",x.robot="robot",x.bot="bot",(x=k=k||{}).admins="admins",x.whitelist="whitelist",x.all="all";var P,k,j=o.default.SCHEMA.extend({type:{type:"string",indexed:!0},name:{type:"string",indexed:!0},createdDate:{type:"timestamp"},createdBy:{type:"string"},ownedBy:{type:"string"},editedDate:{type:"timestamp"},lastActiveTime:{type:"timestamp",indexed:!0},dismissDate:{type:"timestamp"},mergedDate:{type:"timestamp"},star:{type:"boolean"},mute:{type:"boolean"},public:{type:"boolean"},archiveDate:{type:"timestamp"},hide:{type:"boolean"},admins:{type:"set"},members:{type:"set"},pinnedMessages:{type:"array"},mergedChats:{type:"array"},committers:{type:"string"},category:{type:"string"},freeze:{type:"boolean"},deleted:{type:"boolean"},lastMessageInfo:{type:"json"},lastAccessTime:{type:"timestamp",indexed:!0},lastReadMessageIndex:{type:"int",default:0},bulletins:{type:"array"},theOtherMemberID:{type:"int"},localMessages:{type:"json"},adminInvite:{type:"boolean"},avatar:{type:"object"}}),x=(0,a.createProxyPropertiesMap)(["type","name","createdDate","ownedBy","createdBy","editedDate","lastActiveTime","dismissDate","star","mute","public","archiveDate","admins","members","pinnedMessages","committers","category","freeze","noticeCount","adminInvite","avatar"],o.default.PROXY_PROPERTIES),M=(0,a.createProxyHandler)(x),T=new WeakMap,I=new WeakMap;a=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e);var n=y(r);function r(e){var t=this,o=r;if(t instanceof o)return w(g(t=n.call(this,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Chat")),"fileSavedNoticeCount",0),v(g(t),T,{writable:!0,value:0}),w(g(t),"pinyin",void 0),v(g(t),I,{writable:!0,value:[]}),w(g(t),"unreadAndDeletedMsgIdxSet",new Set),w(g(t),"unreadMessageSet",new Set),w(g(t),"draft",void 0),e.latestMessageIndexes&&S(g(t),I,e.latestMessageIndexes),0===O(g(t),I).length&&t.lastMessageIndex&&O(g(t),I).push(t.lastMessageIndex),t.updateUnreadMessages(),t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"proxyHandler",get:function(){return M}},{key:"ensureGid",value:function(){if(this.isOne2One){var e=this.members;if(2===e.size)this.$.gid||(this.$.gid=C.apply(void 0,s(e)));else{if(!this.$.gid)throw new Error("One2One chat gid error.");this.$.members=this.$.gid.split("&").map((function(e){return Number.parseInt(e,10)}))}}else p(b(r.prototype),"ensureGid",this).call(this)}},{key:"schema",get:function(){return j}},{key:"id",get:function(){return this.$get("id")},set:function(e){var t=b(r.prototype);if(!d(t,"id",e,this||t))throw new Error("failed to set property")}},{key:"isDeleted",get:function(){return this.$get("deleted")},set:function(e){this.$set("deleted",e)}},{key:"isDeletedOne2One",get:function(){return this.isOne2One&&this.isDeleted}},{key:"isNotInGroup",get:function(){return!this.isOne2One&&this.isDeleted}},{key:"type",get:function(){var e=this.$get("type");return e||((e=this.members)&&2===e.size?P.one2one:P.group)},set:function(e){this.$set("type",e)}},{key:"isRobot",get:function(){return this.type===P.robot}},{key:"isBot",get:function(){return this.type===P.bot}},{key:"isNotification",get:function(){return this.isRobot&&this.gid===E}},{key:"isOne2One",get:function(){return this.type===P.one2one}},{key:"isGroup",get:function(){return this.type===P.group}},{key:"isSystem",get:function(){return this.type===P.system}},{key:"isGroupOrSystem",get:function(){return this.isGroup||this.isSystem}},{key:"isPrivate",get:function(){return this.isOne2One&&1===new Set(this.gid.split("&")).size}},{key:"category",get:function(){return this.$get("category")},set:function(e){this.$set("category",e)}},{key:"name",get:function(){return this.$get("name")},set:function(e){this.$set("name",e)}},{key:"star",get:function(){return!(!this.isSystem||this.isRobot)||this.$get("star")},set:function(e){this.$set("star",e)}},{key:"mute",get:function(){return this.$get("mute")},set:function(e){this.$set("mute",e)}},{key:"hidden",get:function(){return this.hide},set:function(e){this.hide=e}},{key:"hide",get:function(){return this.$get("hide")},set:function(e){this.$set("hide",e)}},{key:"public",get:function(){return this.$get("public")},set:function(e){this.$set("public",e)}},{key:"archiveDate",get:function(){return this.$get("archiveDate")},set:function(e){this.$set("archiveDate",e)}},{key:"isArchived",get:function(){return!!this.archiveDate}},{key:"adminInvite",get:function(){return this.$get("adminInvite")},set:function(e){this.$set("adminInvite",e)}},{key:"avatar",get:function(){return this.$get("avatar")},set:function(e){this.$set("avatar",e)}},{key:"plainAvatar",value:function(e){return JSON.stringify(e)}},{key:"createdBy",get:function(){return this.$get("createdBy")},set:function(e){this.$set("createdBy",e)}},{key:"ownedBy",get:function(){return this.$get("ownedBy")},set:function(e){this.$set("ownedBy",e)}},{key:"createdDate",get:function(){return this.$get("createdDate")},set:function(e){this.$set("createdDate",e)}},{key:"editedDate",get:function(){return this.$get("editedDate",0)},set:function(e){this.$set("editedDate",e)}},{key:"dismissDate",get:function(){return this.$get("dismissDate")},set:function(e){this.$set("dismissDate",e)}},{key:"isDismissed",get:function(){return!!this.dismissDate}},{key:"canDismiss",value:function(e){return!this.isDismissed&&this.isGroup&&this.isOwner(e)}},{key:"admins",get:function(){return this.$get("admins")},set:function(e){this.$set("admins",e)}},{key:"isAdmin",value:function(e){if(this.isOne2One)return!1;if(this.isSystem&&e.isSuperAdmin)return!0;if(this.isOwner(e))return!0;var t=this.admins;return!(null==t||!t.size)&&t.has(e.id)}},{key:"canSetAdmins",value:function(e){return!(!this.isSystem||!e.isSuperAdmin)||!!this.isOwner(e)}},{key:"setAdmins",value:function(e){"number"==typeof e&&(e=[e]),this.admins=new Set(e)}},{key:"pinnedMessages",get:function(){return this.$get("pinnedMessages",[])},set:function(e){this.$set("pinnedMessages",e)}},{key:"isPinnedMessage",value:function(e){var t=this.pinnedMessages;return!(!t||!t.length)&&t.includes(e)}},{key:"committers",get:function(){var e=this.$get("committers");return e&&"$ADMINS"!==e?new Set(e.split(",")):new Set}},{key:"setCommitters",value:function(e){this.$set("committers",e)}},{key:"committersType",get:function(){var e=this.$get("committers");return(this.isSystem||this.isGroup)&&e&&"$ALL"!==e?"$ADMINS"===e?k.admins:k.whitelist:k.all}},{key:"isCommitter",value:function(e){switch(this.committersType){case k.admins:return this.isAdmin(e);case k.whitelist:return this.isInWhitelist(e.id);default:return!0}}},{key:"canRename",value:function(e){return!this.isRobot&&!this.isBot&&!this.isDismissed&&this.isAdmin(e)&&(!this.isOne2One||this.isPrivate)}},{key:"canInvite",value:function(e){return!this.isRobot&&!this.isBot&&!this.isDismissed&&!this.isSystem&&this.members.has(e.id)&&(this.isAdmin(e)||this.isCommitter(e)&&(!this.adminInvite||this.public))}},{key:"canKickOff",value:function(e,t){return!this.isRobot&&!this.isBot&&this.isGroup&&!this.isSystem&&(!t||t.id!==e.id)&&this.isOwner(e)}},{key:"canMakePublic",value:function(e){return!this.isRobot&&!this.isBot&&!this.isDismissed&&this.isAdmin(e)&&this.isGroup}},{key:"canSetCommitters",value:function(e){return!this.isRobot&&!this.isBot&&!this.isDismissed&&this.isAdmin(e)&&!this.isOne2One}},{key:"canSetGroupSettings",value:function(e){return this.isGroupOrSystem&&!this.isDismissed&&this.isAdmin(e)}},{key:"isReadonly",value:function(e){return this.isRobot||this.isArchived||this.isDeleted||this.isDismissed||!this.isCommitter(e)}},{key:"isVisible",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:90,t=this.dismissDate;return!t||(new Date).getTime()<=t+e*i.TIME_DAY}},{key:"getFinalVisibleDate",value:function(e){var t=this.dismissDate;return t?t+e*i.TIME_DAY:0}},{key:"hasWhitelist",get:function(){return this.committersType===k.whitelist}},{key:"whitelist",get:function(){if(!this.hasWhitelist)return null;var e=new Set;return this.committers.forEach((function(t){t=Number.parseInt(t,10),Number.isNaN(t)||e.add(t)})),e},set:function(e){this.isGroupOrSystem||this.$set("committers",""),this.$set("committers",Array.from(e).join(","))}},{key:"isInWhitelist",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.whitelist;return!(!t||!t.size)&&t.has(e)}},{key:"addToWhitelist",value:function(e){var t=this.whitelist;return!(!t||t.has(e)||(t.add(e),this.whitelist=t,0))}},{key:"removeFromWhitelist",value:function(e){var t=this.whitelist;return!(!t||!t.has(e)||(t.delete(e),this.whitelist=t,0))}},{key:"members",get:function(){return this.$get("members")}},{key:"setMembers",value:function(e){e=e instanceof Set?e:new Set(e),this.$set("members",e)}},{key:"isMember",value:function(e){return!!this.isSystem||this.members.has(e)}},{key:"isOwner",value:function(e){return this.ownedBy?e.account===this.ownedBy:e.account===this.createdBy}},{key:"mergedChats",get:function(){return this.$get("mergedChats")}},{key:"mergedDate",get:function(){return this.$get("mergedDate")},set:function(e){this.$set("mergedDate",e)}},{key:"isMerged",get:function(){return!!this.mergedDate}},{key:"canArchive",value:function(e){return!this.isSystem&&!this.isRobot&&!this.isBot&&this.isGroup&&this.isOwner(e)&&!this.isDismissed}},{key:"canMerge",value:function(e){return!this.isMerged&&!this.isBot&&this.isGroup&&this.isOwner(e)&&!this.isDismissed}},{key:"canJoin",get:function(){return!this.isDismissed&&this.public&&this.isGroup&&!this.adminInvite}},{key:"canExit",value:function(){return this.isGroup}},{key:"canHide",get:function(){return this.isGroup}},{key:"isMuteOrHidden",get:function(){return this.mute||this.hidden}},{key:"lastActiveTime",get:function(){var e=this.$get("lastActiveTime",0)||this.editedDate||this.createdDate,t=this.lastMessageInfo;return t&&t.date>e?t.date:e},set:function(e){this.$set("lastActiveTime",e)}},{key:"lastAccessTime",get:function(){return this.$get("lastAccessTime")||this.lastActiveTime||0},set:function(e){this.$set("lastAccessTime",e)}},{key:"latestMessageIndexes",get:function(){return O(this,I)}},{key:"checkLatestMessageIndexes",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:20,t=this.latestMessageIndexes.length;if(!(t<2||this.latestMessageIndexes.some((function(e){return e%1!=0})))){var n=this.latestMessageIndexes[0],r=this.lastMessageIndex;if(r-n+1!==t){for(var o=r,a=t-2;0<=a;a--){var i=this.latestMessageIndexes[a];if(o-i!=1)break;o=i}S(this,I,(0,l.generateContinuousList)(Math.max(o-e,1),Math.max(r,1),!0))}}}},{key:"shrinkMessageIndexList",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100,t=this.latestMessageIndexes;t.length>e&&S(this,I,t.slice(t.length-e))}},{key:"lastMessageInfo",get:function(){return this.$get("lastMessageInfo")}},{key:"lastMessageIndex",get:function(){var e;return(null==(e=this.lastMessageInfo)?void 0:e.index)||0}},{key:"lastReadMessageIndex",get:function(){return this.$get("lastReadMessageIndex",0)}},{key:"unreadMessagesCount",get:function(){var e;return(null==(e=this.unreadMessageIndexes)?void 0:e.size)||0}},{key:"hasUnreadMessages",get:function(){return 0<this.unreadMessagesCount}},{key:"unreadMessageIndexes",get:function(){return this.unreadMessageSet}},{key:"updateUnreadMessages",value:function(){var e=this;if(!this.lastMessageInfo||this.lastMessageIndex<=this.lastReadMessageIndex||this.lastReadMessageIndex%1!=0||this.lastMessageIndex%1!=0)return this.unreadMessageSet=new Set,void(this.isBot&&(this.unreadMessageSet=new Set(this.latestMessageIndexes.filter((function(t){return t>e.lastReadMessageIndex})))));var t=new Set((0,l.generateContinuousList)(this.lastMessageIndex,this.lastReadMessageIndex+1,!1));s(this.unreadAndDeletedMsgIdxSet).forEach((function(n){e.lastReadMessageIndex>n?e.unreadAndDeletedMsgIdxSet.delete(n):t.has(n)&&t.delete(n)})),this.unreadMessageSet=t}},{key:"isUnreadMessage",value:function(e){return this.unreadMessageIndexes.has(e)}},{key:"setLastReadMessageIndex",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=this.lastReadMessageIndex,o=this.lastMessageIndex,a=n;return(n||r<e&&e<=o)&&(this.$set("lastReadMessageIndex",e),a=!0,s(this.unreadMessageSet).forEach((function(n){n<=e&&t.unreadMessageSet.delete(n)}))),a}},{key:"muteUnreadMessages",value:function(){return this.fileSavedNoticeCount=0,this.setLastReadMessageIndex(this.lastMessageIndex)}},{key:"localMessages",get:function(){return this.$get("localMessages",{})}},{key:"localMessagesList",get:function(){return Object.values(this.localMessages).sort((function(e,t){return e-t}))}},{key:"setLatestMessages",value:function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=n.currentUserID,o=void 0!==(o=n.isFocusedActiveChat)&&o,a=this.latestMessageIndexes,i=this.localMessages,l=this.mute,c=this.lastMessageInfo,f=this.lastMessageIndex,d=this.lastReadMessageIndex,p=this.isDismissed,h=this.isDeleted,m=!1,y=!1,g=d,b=f,v=[],w=[],O=[],_=null,C=[],E=new Set(a),P=[],k=o||p||h,j=u(e);try{for(j.s();!(t=j.n()).done;){var x,M,T,D=t.value,A=D.id,R=D.gid,N=D.index,B=D.deleted;D.isInLocal?B?(P.push(A),i[R]&&(delete i[R],y=!0)):(i[R]=A,y=!0):(i[R]&&(x=i[R],delete i[R],y=!0,E.has(x)&&(E.delete(x),m=!0)),E.has(N)||(E.add(N),m=!0),b<=N&&(b=N,_=D.plain()),B&&(this.unreadAndDeletedMsgIdxSet.add(N),w.push(A)),M=r&&D.isSender(r),T=!r||D.isReminder(r),g<N&&(k||M)&&(g=N),!M&&T&&!B&&g<N&&v.push(A),!M&&T&&!B&&!l&&g<N&&O.push(A),D.isBulletin&&C.push(D.bulletin))}}catch(e){j.e(e)}finally{j.f()}return a=new Set,y&&(this.$set("localMessages",i),a.add("localMessages")),_&&(!c||c.index<_.index||c.deleted!==_.deleted)&&(this.$set("lastMessageInfo",_),a.add("lastMessageInfo")),g!==d&&this.setLastReadMessageIndex(g),o=!1,f<b&&this.frozen&&(o=!(this.frozen=!1)),m&&(S(this,I,s(E).sort((function(e,t){return e-t}))),this.checkLatestMessageIndexes()),C.length&&this.addBulletins(C)&&a.add("bulletins"),this.updateUnreadMessages(),p={updated:!!a.size&&s(a),newUnread:v,deletedUnread:w,newMessages:O,bulletins:C,frozenCanceled:o,localMessages:i,localMessagesChanged:y,localDeletedMessages:P,latestMessagesUpdated:m,lastReadChanged:d<g},DEBUG&&Object.assign(p,{messages:e,options:n,lastMessageInfoOld:c,lastMessageInfoUpdated:!(!_||c&&!(c.index<b)),lastMessageInfo:c}),p}},{key:"isLocal",get:function(){return!this.id}},{key:"frozen",get:function(){return this.$get("freeze")},set:function(e){this.$set("freeze",e)}},{key:"theOtherMemberID",get:function(){return this.isOne2One?this.$get("theOtherMemberID"):0},set:function(e){this.$set("theOtherMemberID",e)}},{key:"conferenceStatusValue",get:function(){return O(this,T)}},{key:"updateConferenceStatus",value:function(e){return O(this,T)!==e&&(S(this,T,e),!0)}},{key:"bulletins",get:function(){return this.$get("bulletins",[])}},{key:"lastBulletinInfo",get:function(){var e=this.bulletins;if(!e)return null;var t,n=Date.now(),r=null,o=[],a=u(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.expiration>=n&&(o.push(i),(!r||i.id>r.id)&&(r=i))}}catch(e){a.e(e)}finally{a.f()}return o.length!==e.length&&this.$set("bulletins",o),r}},{key:"addBulletins",value:function(e){var t,n=void 0===(n=this.bulletins)?[]:n,r=(Array.isArray(e)||(e=[e]),Date.now()),o=n.filter((function(e){return e.expiration>r})),a=o.reduce((function(e,t,n){return e.set(t.id,n)}),new Map),i=0,l=u(e);try{for(l.s();!(t=l.n()).done;){var s,c=t.value;a.has(c.id)?o[s=a.get(c.id)].expiration!==c.expiration&&(o[s]=c,i++):c.expiration>=r&&(o.push(c),a.set(c.id,o.length-1),i++)}}catch(e){l.e(e)}finally{l.f()}return this.$set("bulletins",o),i}},{key:"plain",value:function(){var e=this.id,t=this.gid,n=this.type,r=this.name,o=this.createdDate,a=this.createdBy,i=this.ownedBy,l=this.editedDate,u=this.lastActiveTime,s=this.lastAccessTime,c=this.dismissDate,f=this.star,d=this.mute,p=this.public,h=this.archiveDate,m=this.admins,y=this.members,g=this.pinnedMessages,b=this.category,v=this.lastMessageInfo,w=this.lastReadMessageIndex,O=this.theOtherMemberID,S=this.bulletins,_=this.localMessages,C=this.adminInvite;return{id:e,gid:t,type:n,name:r,createdDate:o,createdBy:a,ownedBy:i,editedDate:l,lastActiveTime:u,lastAccessTime:s,dismissDate:c,star:f,mute:d,public:p,archiveDate:h,admins:m,members:y,pinnedMessages:g,committers:this.$get("committers"),category:b,freeze:this.$get("freeze"),delete:this.$get("delete"),lastMessageInfo:v,lastReadMessageIndex:w,theOtherMemberID:O,bulletins:S,localMessages:_,adminInvite:C,avatar:this.plainAvatar(this.$get("avatar"))}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.default),w(t.default=a,"NAME","Chat"),w(a,"TYPES",P),w(a,"COMMITTERS_TYPES",k),w(a,"SCHEMA",j),w(a,"PROXY_PROPERTIES",x),w(a,"PROXY_HANDLER",M),DEBUG&&(n.g.$Chat=a)},14915:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createChat=void 0,t.syncLastReadMessageForChat=function(e){return d.apply(this,arguments)},t.toggleFreezeChat=function(e,t){return f.apply(this,arguments)};var r,o=l(n(24260)),a=l(n(65286)),i=n(15973);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){u(a,r,o,i,l,"next",e)}function l(e){u(a,r,o,i,l,"throw",e)}i(void 0)}))}}(n=r=r||{}).message_send="im.server.message.send",n.message_receive="im.server.message.receive",n.chat_action_changed="im.server.chat.action";var c=function(e){return o.default.sendAndListen({method:"chatCreate",params:[e.gid,e.name||"",e.type,Array.from(e.members),0,e.public||!1]})};function f(){return(f=s((function*(e,t){return e.id||(yield c(e)),!!(t=yield o.default.sendAndListen({method:"chatFreeze",params:["boolean"==typeof t?t:!e.frozen,e.gid]}))&&(a.default.emit(r.chat_action_changed,t,"freeze",e.frozen),!0)}))).apply(this,arguments)}function d(){return(d=s((function*(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e.lastReadMessageIndex,n=(0,i.getCurrentUser)();return!(!n||!n.isVersionSupport("chatSetLastReadMessage")||!e.id||(yield o.default.sendAndListen({method:"chatSetLastReadMessageByIndex",params:[e.gid,t]}),0))}))).apply(this,arguments)}t.createChat=c},74101:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createChat=G,t.default=void 0,t.fetchChatFromRemote=K,t.fetchChatListFromRemote=function(){return J.apply(this,arguments)},t.fetchChatMembersFromRemote=q;var r=E(n(20213)),o=n(84401),a=n(16986),i=n(7066),l=C(n(58851)),u=C(n(33594)),s=n(55292),c=n(15973),f=n(33417),d=E(n(84431)),p=E(n(24260)),h=E(n(74160)),m=E(n(61862)),y=E(n(84836)),g=n(78717),b=E(n(94128)),v=n(37907),w=n(68271),O=n(14915),S=n(13347);function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function C(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==j(e)&&"function"!=typeof e)return{default:e};if((t=_(t))&&t.has(e))return t.get(e);var n,r,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=a?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}function E(e){return e&&e.__esModule?e:{default:e}}function P(e,t,n){return(P=B()?Reflect.construct:function(e,t,n){var r=[null];return r.push.apply(r,t),t=new(Function.bind.apply(e,r)),n&&A(t,n.prototype),t}).apply(null,arguments)}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=T(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function T(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(){return(D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=B();return function(){var n,r=L(e);if(n=t?(n=L(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,n&&("object"===j(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return N(r)}}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function U(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function z(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){U(a,r,o,i,l,"next",e)}function l(e){U(a,r,o,i,l,"throw",e)}i(void 0)}))}}var W=Symbol("chats-ready"),H=7*i.TIME_DAY;function V(){return(V=z((function*(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Set;if(""===e)return[];var n=Array.isArray(e);if(n&&0===e.length)return[];var r=n?e.join(" "):e;if(""===r)return[];t.add((0,c.getCurrentUserID)());try{var o=yield d.default.searchFromRemote(r),i=(o=0<t.size?o.filter((function(e){return!t.has(e.id)})):o).map((function(e){var t=(0,c.getCurrentUser)();return new l.default({members:new Set([t.id,e.id]),createdBy:t.account,type:l.default.TYPES.one2one,name:e.displayName})}));return i.forEach((function(t){t.score=0,n?e.forEach((function(e){t.score+=(0,a.caculateScore)(e,t.name)})):t.score+=(0,a.caculateScore)(e,t.name)})),i}catch(e){return console.error("Search members form server error",e),[]}}))).apply(this,arguments)}function G(e){e instanceof l.default||(e=new l.default(e));var t,n,r,o=(0,a.isEmptyString)(e.name);return e.isOne2One?(t=(0,c.getCurrentUser)(),e.theOtherMemberID||(n=t.id,e.theOtherMemberID=e.isPrivate?n:Array.from(e.members).find((function(e){return e!==n}))),(r=d.default.getItemFromCache(e.theOtherMemberID))&&(o&&(e.name=e.isPrivate?m.default.format("chat.privateChat.name",t.displayName):r.displayName),r.isDeleted&&(e.isDeleted=!0))):o&&(e.isSystem?e.name=m.default.string("chat.systemGroup.name"):e.isRobot?e.name=m.default.string("common.notification"):e.name=m.default.format("chat.group.tempName",e.id)),e}function q(e){return $.apply(this,arguments)}function $(){return($=z((function*(e){try{return(yield p.default.sendAndListen({method:"chatgetmembers",params:[e]})).members}catch(e){return new Set}}))).apply(this,arguments)}function K(e){return Y.apply(this,arguments)}function Y(){return(Y=z((function*(e){try{return yield p.default.sendAndListen({method:"chatgetbygid",params:[e]})}catch(e){return{}}}))).apply(this,arguments)}function J(){return(J=z((function*(){if("super"===(0,c.getCurrentUser)().admin)try{return yield p.default.sendAndListen({method:"chatsearch",params:["",null,"",!0]})}catch(e){return{}}return{}}))).apply(this,arguments)}var X=new(function(e){var t=I;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A(t,e);var n,s,g,_,C,E,T=R(I);function I(e){var t;if(this instanceof I)return F(N(t=T.call(this,"Chat",e,{key:"gid",channelDelayTime:100})),"_idleTasks",new r.default),F(N(t),"_noticeChannel",new o.EventChannel),F(N(t),"_databaseSaveTask",new y.default(t.saveChatsToDatabase.bind(N(t)),200)),F(N(t),"_chatsNeedSave",new Set),F(N(t),"_ready",!1),F(N(t),"normalizeItem",(function(e){e=G(e);var n=t.getItemFromCache(e.gid);return n&&(e.members.size||e.editedDate!==n.editedDate||e.setMembers(n.members),e.isOne2One&&!e.name&&n.name&&(e.name=n.name),e.lastActiveTime=Math.max(e.lastActiveTime,n.lastActiveTime),e.lastAccessTime=Math.max(e.lastAccessTime,n.lastAccessTime),e.setLastReadMessageIndex(Math.max(e.lastReadMessageIndex,n.lastReadMessageIndex)),["lastMessageInfo","bulletins","localMessages","theOtherMemberID"].forEach((function(t){e.$set(t,n.$get(t))}))),e})),d.default.subscribeAny(t.handleMemberChange.bind(N(t))),t;throw new TypeError("Cannot call a class as a function")}return t=I,(e=[{key:"isReady",get:function(){return this._ready}},{key:"reset",value:function(e){var t=D(L(I.prototype),"reset",this).call(this,e);t&&(this._idleTasks.cancelAll(),this._databaseSaveTask.cancel()),this._ready=!1,DEBUG_I&&(console.collapse("STORE.Chats","pinkBg","reset","pinkPale",t,""),console.log("identify",e),console.groupEnd())}},{key:"handleMemberChange",value:function(e){var t,n=[],r=M(e);try{for(r.s();!(t=r.n()).done;){var o,a,i,l=t.value,u=l.cgid,s=this.getItemFromCache(u);s&&(o=!1,a=l.displayName,i=l.isDeleted,s.name!==a&&(s.name=a,o=!0),i&&!s.isDeleted&&(o=s.isDeleted=!0,this.muteChatUnreadMessages(u)),o&&n.push(s))}}catch(e){r.e(e)}finally{r.f()}n.length&&this.store(n)}},{key:"tryFetchChatMembers",value:(E=z((function*(e){var t=this,n=this.getChat(e);return n?n.members.size?n.members:(n.isSystem&&n.setMembers(d.default.allKeys()),this._fetchingMembersTasks||(this._fetchingMembersTasks=new Map),this._fetchingMembersTasks.has(e)?new Promise((function(n){t._fetchingMembersTasks.get(e).push(n)})):(this._fetchingMembersTasks.set(e,[]),yield this._idleTasks.requestAndWait(z((function*(){if(yield q(e),t._fetchingMembersTasks&&t._fetchingMembersTasks.has(e)){var r=t._fetchingMembersTasks.get(e);if(r.length){var o,a=M(r);try{for(a.s();!(o=a.n()).done;)(0,o.value)(n.members)}catch(r){a.e(r)}finally{a.f()}}t._fetchingMembersTasks.delete(e)}})),{name:"fetchChatMembers",timeout:3e3}),this._fetchingMembersTasks&&!this._fetchingMembersTasks.size&&(this._fetchingMembersTasks=null),n.members)):null})),function(e){return E.apply(this,arguments)})},{key:"store",value:function(e){var t;return"reset"===(t=void 0===(t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).putToDatabase)||t)&&this._cache.clear(),(e=D(L(I.prototype),"store",this).call(this,e,{normalizeFunc:this.normalizeItem}))&&t&&this.planToSaveChatsToDatabase(e,"reset"===t),DEBUG_I&&(console.collapse("STORE.Chat","pinkBg","store","pinkPale",e?e.length:0,""),console.trace("chats",e?x(e):null),console.log("store",this),console.groupEnd()),e||[]}},{key:"getUnreadMessageCount",value:function(e){if(!this._ready)return 0;var t=0,n=b.default.call("ui.isWindowFocus");return e?this.forEach((function(n){!1!==(n=e(n))&&"number"==typeof n&&(t+=n)})):this.forEach((function(e){var r=e.unreadMessagesCount;!r||e.isDeleted||e.mute||e.isDismissed||n&&(0,w.isOpenedActiveChat)(e.gid)||e.isMerged||(t+=r)})),t}},{key:"muteChatUnreadMessages",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=this.getChat(e);if(!n)return!1;var r=t.mustActive;return t=t.windowMustFocus,r&&!(0,w.isOpenedActiveChat)(e)||t&&!b.default.call("ui.isWindowFocus")?void 0:n.muteUnreadMessages()?(this.store(n),(0,v.emitUnreadMessagesChange)(this.getUnreadMessageCount()),(0,O.syncLastReadMessageForChat)(n),!0):((0,v.tryEmitUnreadMessagesChange)(this.getUnreadMessageCount()),!1)}},{key:"subscribeChatsReadyEvent",value:function(e){return this._noticeChannel.subscribe(W,e)}},{key:"unsubscribeChatsReadyEvent",value:function(e){return this._noticeChannel.unsubscribe(e)}},{key:"planToSaveChatsToDatabase",value:function(e){1<arguments.length&&void 0!==arguments[1]&&arguments[1]&&(this._chatsNeedSave.clear(),this._chatsNeedSave.add("clear"));var t,n=M(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._chatsNeedSave.add("object"===j(r)?r.gid:r)}}catch(e){n.e(e)}finally{n.f()}this._databaseSaveTask.do()}},{key:"saveChatsToDatabase",value:(C=z((function*(){if(this._chatsNeedSave.size){var e,t=[],n=[],r=!1,o=M(this._chatsNeedSave);try{for(o.s();!(e=o.n()).done;){var a,i=e.value;"clear"===i?r=!0:(a=this.getChat(i))&&(a.isDeleted?t.push(a.gid):n.push(a.plain()))}}catch(e){o.e(e)}finally{o.f()}this._chatsNeedSave.clear(),(0,u.beginDBBusyTask)();try{var l=u.default.database.chats;r&&(yield l.clear()),n.length&&(yield l.bulkPut(n)),t.length&&(yield l.bulkDelete(t)),DEBUG_I&&(console.collapse("STORE.Chat","pinkBg","save chat to chatTable","pinkPale",t.length+n.length,""),console.log("needClear",r),console.log("chatsNeedDelete",t),console.log("chatsNeedSave",n),console.log("store",this),console.groupEnd())}catch(e){DEBUG&&(console.collapse("STORE.Chat","pinkBg","save chat to chatTable Error","redPale",String(e),"red"),console.error("error",e),console.log("needClear",r),console.log("chatsNeedDelete",t),console.log("chatsNeedSave",n),console.log("store",this),console.groupEnd())}(0,u.endDBBusyTask)()}})),function(){return C.apply(this,arguments)})},{key:"mergeChatsFromDatabase",value:(_=z((function*(e){var t=u.default.database.chats,n=this._identify,r=yield t.toArray();if(n===this._identify){if(null==r||!r.length)return e;var o,a=e.reduce((function(e,t){return e.set(t.gid,t)}),new Map),s=new Set,c=M(r);try{for(c.s();!(o=c.n()).done;){var f,d,p=o.value,h=p.gid;if(a.has(h)){var m,y=a.get(h),g=(1e3*y.editedDate>p.editedDate&&delete p.members,new Set(Object.keys(p))),b=(g.has("name")&&(y.name||y.type!==l.TYPES.one2one||(y.name=p.name),g.delete("name")),g.has("lastActiveTime")&&(y.lastActiveTime=Math.max(p.lastActiveTime,(0,i.createDate)(y.lastActiveTime).getTime()),g.delete("lastActiveTime")),g.has("lastMessageInfo")&&(null==(f=p.lastMessageInfo)?void 0:f.index)>(null==(d=y.lastMessageInfo)?void 0:d.index)&&(y.lastMessageInfo=p.lastMessageInfo),g.has("lastReadMessageIndex")&&p.lastReadMessageIndex>y.lastReadMessageIndex&&(y.lastReadMessageIndex=p.lastReadMessageIndex),M(g));try{for(b.s();!(m=b.n()).done;){var v=m.value,w=p[v];void 0===y[v]&&void 0!==w&&(y[v]=w)}}catch(e){b.e(e)}finally{b.f()}}else s.add(h)}}catch(e){c.e(e)}finally{c.f()}return s.size&&(yield t.bulkDelete(x(s))),DEBUG_I&&(console.collapse("STORE.Chat","pinkBg","merge chats from chatTable","pinkPale",r.length,""),console.log("chatsMap",a),console.log("chatsInDb",r),console.log("remoteChats",e),console.log("chatsNeedDelete",s),console.log("store",this),console.groupEnd()),x(a.values())}})),function(e){return _.apply(this,arguments)})},{key:"storeChatsFromRemote",value:(g=z((function*(e){var t=this,n=(0,c.getCurrentUser)(),r=n.id,o=new Set(e.map((function(e){return e.gid})));if(h.default.system["notification.enable"]&&!o.has(l.NOTIFICATION_CHAT_GID)&&e.push({gid:l.NOTIFICATION_CHAT_GID,type:l.TYPES.robot,lastActiveTime:Date.now()-1296e5,members:[r],name:m.default.string("common.notification")}),n.isVersionSupport(S.VersionSupport.privateChat)&&!o.has("".concat(r,"&").concat(r))&&e.push({gid:"".concat(r,"&").concat(r),type:l.TYPES.one2one,lastActiveTime:Date.now()-1296e5,members:[r],name:m.default.format("chat.privateChat.name",n.displayName)}),n.isVersionSupport(S.VersionSupport.xuanbot)&&!o.has((0,l.getXuanbotGid)(r))&&e.push({gid:(0,l.getXuanbotGid)(r),type:l.TYPES.bot,lastActiveTime:Date.now()-1296e5,members:[r],name:m.default.string("common.xuanbot"),avatar:{type:"image",data:{imgUrl:"".concat(n.backendURL,"data/image/xuanbot.png")}}}),DEBUG_I&&(console.collapse("STORE.Chat","pinkBg","store chats from remote","pinkPale",e.length,""),console.log("chats",x(e)),console.log("store",this),console.groupEnd()),e.forEach((function(e){var n=t.getChat(e.gid);n&&(e.latestMessageIndexes=n.latestMessageIndexes)})),o=this._identify,e=yield this.mergeChatsFromDatabase(e),o===this._identify)return e=this.store(e,{putToDatabase:"reset"}),this._ready=!0,this._noticeChannel.publish(W),(0,v.emitUnreadMessagesChange)(this.getUnreadMessageCount()),e})),function(e){return g.apply(this,arguments)})},{key:"getChat",value:function(e){var t=this,n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],r=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(!(a=this.getItemFromCache(e))){var o=(0,c.getCurrentUser)();if(!o)return null;if(n&&/^\d+&\d+$/.test(e)){if(!(n=e.split("&").map((function(e){return Number.parseInt(e,10)}))).includes(o.id))return null;(a={gid:e,members:n,createdBy:o.account,type:l.default.TYPES.one2one}).theOtherMemberID=n.find((function(e){return e!==o.id}));var a=k(this.store(a,{putToDatabase:!1}),1)[0]}else r&&K(e).then((function(e){t.store(new l.default(e),{putToDatabase:!1})})).catch(console.error)}return a}},{key:"getContactChat",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=(0,c.getCurrentUserID)();return n===e?null:this.getChat((0,f.getOne2OneChatGid)(e,n),t)}},{key:"getChats",value:function(e){var t=this;return e.map((function(e){return t.getChat(e)}))}},{key:"getAllChats",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default",t=this.all.filter((function(e){return!e.isDeleted}));return e?(0,f.sortChats)(t,e):t}},{key:"queryChats",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!this.size)return[];var n,r=void 0===(r=t.sortRules)?"default":r,o=void 0===(o=t.limit)?0:o,a=void 0!==(n=t.includeDeleted)&&n,i=void 0!==(n=t.excludeLocal)&&n;return t=this.filter((function(t,n){return!(!a&&t.isDeleted)&&!(i&&t.isLocal&&!t.isPrivate)&&e(t,n)})),t.length&&(r&&(t=(0,f.sortChats)(t,r)),o&&t.length>o&&(t=t.slice(0,o))),t}},{key:"searchChats",value:(s=z((function*(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if((0,a.isEmptyString)(e))return[];if(!(e=e.trim().toLowerCase().split(" ")).length)return[];function n(e,t){return t.score-e.score}var r,o=void 0===(o=t.chatType)?"":o,i=void 0!==(r=t.excludeMemberIdList)&&r,u=void 0===(r=t.includeReadonly)||r,s=void 0!==(r=t.searchFromRemote)&&r,p=void 0!==(r=t.includeNotification)&&r,h="contacts"===o,m="groups"===o,y=h||m,g=(0,c.getCurrentUser)();return t=this.queryChats((function(t){var n=t.gid.toLowerCase();if(n!==l.NOTIFICATION_CHAT_GID||p){var r=t.isOne2One;if((!s||!r||t.isPrivate)&&(!y||!(h&&!r||m&&!t.isGroupOrSystem))){var o,c,b,v,w,O=t.theOtherMemberID;if(!(i&&r&&i.has(O))&&!(t.isDeleted||t.isDismissed||t.isMerged)&&(u||!t.isReadonly(g)))return o=t.name.toLowerCase(),c=(0,f.getChatPinYinName)(t),v=b="",r&&((O=d.default.getMember(O))?(b=O.account,v+=(O.email||"")+(O.mobile||"")):DEBUG&&console.warn("Cannot get the other one of chat",t)),w=0,e.forEach((function(e){(0,a.isEmptyString)(e)||(1<e.length&&("#"===e[0]?(e=e.substr(1),w+=2*(0,a.caculateScore)(e,n),(t.isSystem||t.isGroup)&&(w+=2*(0,a.caculateScore)(e,o),t.isSystem&&(w+=2*(0,a.caculateScore)(e,"system")))):"@"===e[0]&&(e=e.substr(1),r&&(w+=2*(0,a.caculateScore)(e,b)))),w=(w+=(0,a.caculateScore)(e,o))+(0,a.caculateScore)(e,c),v&&(w+=(0,a.caculateScore)(e,v)))})),0<(t.score=w)}}}),{sortRules:!s&&n}),s&&(r=yield function(){return V.apply(this,arguments)}(e,i?P(Set,x(i)):new Set),t=(0,f.sortChats)(t.concat(r),n)),t})),function(e){return s.apply(this,arguments)})},{key:"removeChat",value:function(e){return!!(e=this.getChat(e,!1))&&(e.isDeleted=!0,this.store(e),!0)}},{key:"getSystemChats",value:function(){return this.queryChats((function(e){return e.isSystem}),{limit:0<arguments.length&&void 0!==arguments[0]?arguments[0]:0})}},{key:"getPrivateChats",value:function(){var e=(t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).sortRules,t=t.excludeLocal;return this.queryChats((function(e){return e.isOne2One}),{sortRules:void 0===e?"recentFirst":e,excludeLocal:void 0!==t&&t})}},{key:"getBotChats",value:function(){return this.queryChats((function(e){return e.isNotification||e.isBot}),{sortRules:"recentFirst",excludeLocal:!1})}},{key:"getRecentChats",value:function(){var e,t=void 0===(n=(u=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).includeStar)||n,n=void 0===(n=u.sortList)?"recentFirst":n,r=void 0!==(e=u.excludeSystemChats)&&e,o=void 0===(e=u.includeReadonly)||e,a=void 0===(e=u.maxRecentTime)?H:e,i=Date.now(),l=(0,c.getCurrentUser)(),u=this.queryChats((function(e){return(!r||!e.isSystem||e.isNotification||e.isBot)&&(e.unreadMessagesCount||!e.hidden||!e.isArchived||e.isBot)&&!e.isDeleted&&!e.isDismissed&&!e.frozen&&(e.unreadMessagesCount||e.draft||t&&e.star||(!a||e.lastActiveTime&&i-e.lastActiveTime<=a)&&(e.lastMessageIndex||e.isPrivate||e.isNotification&&e.lastMessageInfo)||e.isBot)&&(o||!e.isReadonly(l))&&!e.isMerged}),{sortRules:n});return r||u.length?u:this.getSystemChats()}},{key:"getLastChatWithUnreadMessages",value:function(){return this.queryChats((function(e){return 0<e.unreadMessagesCount}),{sortRules:"lastMessageId",limit:1})[0]}},{key:"getGroupsChats",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"recentFirst",n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],o=(0,c.getCurrentUser)();if(!o)return[];var a=o.account,l=(new Date).getTime(),u=null==(e=(0,c.getCurrentUser)())?void 0:e.dismissedGroupLife;return this.queryChats((function(e){return e.isGroupOrSystem&&(!n||e.createdBy===a)&&(r||!e.isReadonly(o))&&(!e.isDismissed||e.dismissDate+u*i.TIME_DAY>l)&&!e.isMerged}),{sortRules:t,excludeLocal:!0})}},{key:"getRecentContactMembers",value:function(){function e(e,t){return e.size?(e=Array.from(e.values()).sort((function(e,t){var n=e.chat.lastMessageIndex<t.chat.lastMessageIndex?1:e.chat.lastMessageIndex===t.chat.lastMessageIndex?0:-1;return 0===(n=0===n?e.contact.lastAccessTime<t.contact.lastAccessTime?1:e.contact.lastAccessTime===t.contact.lastAccessTime?0:-1:n)?e.contact.id-t.contact.id:n})).map((function(e){return e.contact}))).length>t?e.slice(0,t):e:[]}var t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:20,r=new Map,o=new Map,a=(this.forEach((function(e){var t;e.isOne2One&&e.lastMessageIndex&&e.id&&(t=d.default.getItemFromCache(e.theOtherMemberID))&&!t.isDeleted&&r.set(t.id,{chat:e,contact:t})})),e(r,Math.min(r.size,n)));if(a.length===n)return a;a.length<n&&(t=Date.now(),d.default.forEach((function(e){e.id!==(0,c.getCurrentUserID)()&&e.lastAccessTime&&!r.has(e.id)&&!o.has(e.id)&&t-e.lastAccessTime<=H&&o.set(e.id,{chat:{},contact:e})})));var i=e(o,Math.min(o.size,n));return(a=a.concat(i)).length>n?a.slice(0,n):a}},{key:"fetchPublicChat",value:(n=z((function*(e){return(yield this.fetchPublicChats()).find((function(t){return t.gid===e}))})),function(e){return n.apply(this,arguments)})},{key:"fetchPublicChats",value:function(){return this._idleTasks.requestAndWait(z((function*(){var e=yield p.default.sendAndListen("chatGetPublicList");return e&&e.length?e.map(G):[]})),{name:"fetchPublicChats",timeout:1e3})}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),I}(s.DataStore));(0,u.setCallbackOnInitedDatabase)(X.reset.bind(X)),(0,c.onUserLogout)((function(){X.saveChatsToDatabase()})),(0,g.registerCommand)("fetchPublicChats",(function(){return X.fetchPublicChats()})),n.g.ExtsRuntime&&n.g.ExtsRuntime.registerExtensionAPI([{name:"im.getChats",level:3,func:function(e){return X.getChats(e).map((function(e){return e&&e.proxy}))}},{name:"im.queryChats",level:3,func:function(e){return X.queryChats(e).map((function(e){return e&&e.proxy}))}},{name:"im.fetchPublicChats",level:3,func:function(){return X.fetchPublicChats().then((function(e){return Promise.resolve(e?e.map((function(e){return e.proxy})):[])}))}},{name:"im.getChat",level:3,func:function(e){return(e=X.getChat(e))&&e.proxy}},{name:"im.subscribeChats",level:3,func:function(e,t){return X.subscribe(e,(function(e){Array.isArray(e)?t(e.map((function(e){return e&&e.proxy}))):t(e.proxy)}))}},{name:"im.subscribeAnyChats",level:3,func:function(e){return X.subscribeAny((function(t){Array.isArray(t)?e(t.map((function(e){return e&&e.proxy}))):e(t.proxy)}))}},{name:"im.unsubscribeChats",level:3,func:function(e){return X.unsubscribe(e)}},{name:"im.subscribeNoticeChange",level:3,func:function(e){return(0,v.subscribeUnreadMessagesChange)(e)}},{name:"im.unsubscribeNotice",level:3,func:function(e){return(0,v.unsubscribeMessagesChange)(e)}}]),DEBUG&&(n.g.$chatsStore=X),t.default=X},23405:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetAbortSyncSignal=t.onStartFetchingHistory=t.onFinishFetchingHistory=t.onFetchingHistoryProgress=t.onFetchingHistory=t.offFetchingHistoryEvent=t.getFetchingChannel=t.getAbortSyncSignal=t.abortSyncHistory=t.EVENT_HISTORY_START=t.EVENT_HISTORY_PROGRESS=t.EVENT_HISTORY_FINISH=void 0,n=n(84401);var r=Symbol("EVENT_HISTORY_PROGRESS"),o=(t.EVENT_HISTORY_PROGRESS=r,Symbol("EVENT_HISTORY_START")),a=(t.EVENT_HISTORY_START=o,Symbol("EVENT_HISTORY_FINISH")),i=(t.EVENT_HISTORY_FINISH=a,!1),l=(t.getAbortSyncSignal=function(){return i},t.abortSyncHistory=function(){i=!0},t.resetAbortSyncSignal=function(){i=!1},new n.EventChannel({delayTime:0}));t.getFetchingChannel=function(){return l},t.onStartFetchingHistory=function(e){return l.subscribe(o,e)},t.onFinishFetchingHistory=function(e){return l.subscribe(a,e)},t.onFetchingHistoryProgress=function(e){return l.subscribe(r,e)},t.onFetchingHistory=function(e){return l.subscribeAny(e)},t.offFetchingHistoryEvent=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.unsubscribe(t)}},5150:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateChatTyping=t.updateChatSendboxStatus=t.sendChatTyping=t.msgSendInterval=t.chatTypingChannel=void 0;var r,o=n(84401),a=(r=n(24260))&&r.__esModule?r:{default:r},i=n(15973),l=n(33417);function u(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}t.msgSendInterval=3e3;var s=new Map,c=!1,f=new Map,d=new o.EventChannel({delayTime:0,dynamicParams:!1}),p=(t.chatTypingChannel=d,t.updateChatTyping=function(e,t,n){d.publish(e,t,n),f.has(e)&&clearTimeout(f.get(e)),t&&f.set(e,setTimeout((function(){d.publish(e,!1,n),f.delete(e)}),3e3))},function(){e=function*(e,t){var n,r;if(null!=(n=(0,i.getCurrentUser)())&&n.isOnline&&!e.isPrivate){c=!0;try{r=yield a.default.send({method:"chattyping",requestData:{cgid:e.gid,users:e.theOtherMemberID,typing:t}})}catch(e){}return c=!1,r}};var e,t=function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){u(a,r,o,i,l,"next",e)}function l(e){u(a,r,o,i,l,"throw",e)}i(void 0)}))};return function(e,n){return t.apply(this,arguments)}}());t.sendChatTyping=p,t.updateChatSendboxStatus=function(e,t){var n,r,o;(0,l.isOne2OneChatOnline)(e)&&!c&&(n=(0,i.getCurrentUser)())&&n.config.sendTypingStatus&&(n=e.gid,r=s.get(n),o=Date.now(),(!r&&t||3e3<=o-r)&&(p(e,!0),s.set(n,o)))},(0,i.onSwapUser)((function(){return s.clear()}))},45498:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGroupsChats=t.getChatCategories=void 0;var r=n(15973),o=n(61997),a=u(n(61862)),i=n(33417),l=u(n(74101));function u(e){return e&&e.__esModule?e:{default:e}}function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"recentFirst",t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],u=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],s=(0,r.getCurrentUser)();if(!s)return[];if(n=l.default.getGroupsChats(e,n,u),"category"!==t)return n;var c={},f=(n.forEach((function(e){var t=e.isDismissed,n=e.isArchived,r=e.category||"",o=r||s.config.groupsDefaultCategoryName;t?(r="_dismissed",o=a.default.string("chats.menu.group.dismissed")):n&&(r="_archived",o=a.default.string("chat.group.archived")),c[r]?c[r].list.push(e):(c[r]={id:r,title:o||a.default.string("chats.menu.group.default"),list:[e]},(t||n)&&(c[r].system=!0))})),u=Object.keys(c),s.config.groupsCategories);if(1===u.length&&!u[0]&&1===Object.keys(f).length)return n;var d=!1,p=u.map((function(t){var n,r=c[t],a=f[t];return a||(n="_archived"===t?f._dismissed?f._dismissed.order-1:99999999999989:"_dismissed"===t?f._archived?f._archived.order+1:99999999999999:""===t?1:(0,o.timeSequence)(),f[t]=a={order:n,key:n},d=!0),Object.assign(r,a),e&&(0,i.sortChats)(r.list,e),r}));return Object.keys(f).forEach((function(e){var t;p.some((function(t){return t.id===e}))||("_dismissed"===(t=e)?t=a.default.string("chats.menu.group.dismissed"):"_archived"===e?t=a.default.string("chat.group.archived"):""===e&&(t=a.default.string("chats.menu.group.default")),p.push({id:e,key:f[e].key,list:[],order:f[e].order,title:t}))})),p.sort((function(e,t){var n=t.order-e.order;return-(n=0===n?e.id>t.id?1:-1:n)})),d&&(s.config.groupsCategories=f),p}t.getGroupsChats=s,t.getChatCategories=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"contact";return"contact"===e?l.default.getPrivateChats():"group"!==e||(e=s("default","category")).length&&"Chat"===e[0].entityType?[]:e}},29946:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.updateChatNotice=t.initIMNotice=void 0;var o=n(68271),a=v(n(84836)),i=n(727),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=b(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(61862)),u=n(15973),s=v(n(74160)),c=v(n(94128)),f=n(40910),d=n(83981),p=n(33417),h=v(n(74101)),m=n(20116),y=n(37907),g=v(n(73052));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function v(e){return e&&e.__esModule?e:{default:e}}function w(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(){P.do.apply(P,arguments)}var C,E=0,P=new a.default((function(){var e,t,n,r,a,f,y,b,v,S,_,P,k=(0,u.getCurrentUser)();k&&k.isOnline&&(e=c.default.call("ui.isWindowFocus"),y=(t=k.config).safeWindowNotification,n=s.default.ui["chat.muteOnChatNotActive"],r=!y&&(0,i.isMatchWindowCondition)(s.default.ui["chat.bulletinNotificationCondition"]),a=0,f=null,y=h.default.getUnreadMessageCount((function(t){if(t.isDeleted||t.mute||t.isDismissed||e&&(0,o.isOpenedActiveChat)(t.gid))return!1;if(n&&!(0,o.isActiveChat)(t.gid))return!1;var i=t.unreadMessagesCount;if(0===i)return!1;var l=t.bulletins,u=t.unreadMessageIndexes,s=t.gid,c=new Map(w(g.default.unionIdMap).map((function(e){return e.reverse()})));if(t="".concat(s,"@").concat(Math.max.apply(Math,w(t.unreadMessageIndexes).concat([0]))),(t=g.default.unionIdMap.get(t))&&(a=t),!r||!l.length)return i;var d=w(u).map((function(e){return"".concat(s,"@").concat(e)}));if(null!=(t=l.filter((function(e){return d.includes(c.get(e.id))})))&&t.length){var p,h=function(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=O(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}(t);try{for(h.s();!(p=h.n()).done;){var m=p.value;E>m.id||(!f||f.id<m.id)&&(f=m)}}catch(t){h.e(t)}finally{h.f()}}return i})),S=null,t.enableWindowNotification&&(c.default.isType("browser")||(0,i.isMatchWindowCondition)(t.windowNotificationCondition))&&(t.safeWindowNotification&&y?S={title:l.default.format("notification.receviedMessages.format",y),click:function(){c.default.call("ui.setFullScreen",!1),c.default.call("ui.showAndFocusWindow")}}:(v=null,!(v=!(v=f?g.default.getMessage(f.id):v)&&E<a?g.default.getMessage(a):v)||v.isInLocal||v.deleted||(b=h.default.getChat(v.cgid))&&(_=b.isOne2One,P=(0,m.getChatMessageSender)(v).displayName,S={title:b.isNotification?P:_?l.default.format("notification.memberSays.format",P):l.default.format("notification.memberSaysInGroup.format",P,b.name),body:(0,m.getChatMessageSummaryText)(v)},_&&(v=(P=(0,p.getOtherMemberInOne2OneChat)(b))&&(0,d.getMemberAvatar)(P.avatar))&&(S.icon=v),S.click=function(){(0,o.setActiveChat)(b.gid,"recents"),c.default.call("ui.setFullScreen",!1),c.default.call("ui.showAndFocusWindow")}))),E=Math.max(E,a),_={label:y?l.default.format("notification.receviedMessages.format",y):"",flash:y&&t.flashTrayIcon&&(0,i.isMatchWindowCondition)(t.flashTrayIconCondition)},P=k&&"".concat(k.displayName," [").concat(l.default.string("member.status.".concat(k.statusName)),"]"),C={count:y,notification:S,tray:_,userInfo:P},(0,i.updateNotice)(C))}),200);t.updateChatNotice=_,t.initIMNotice=function(){function e(){var e=(0,o.getActiveChatGid)();(e=e&&h.default.getChat(e,!1))&&e.hasUnreadMessages||(e=h.default.getLastChatWithUnreadMessages())&&(0,o.setActiveChat)(e.gid,"recents")}var t;(0,y.subscribeReceiveNewMessages)((function(){var e=(0,u.getCurrentUser)(),t=e.config;!t.enableSound||t.muteOnUserIsBusy&&(e.isBusy||e.isInMeeting)||!(0,i.isMatchWindowCondition)(t.playSoundCondition)||(0,i.playNoticeSound)(),c.default.call("ui.isWindowOpen")||(0,i.requestAttention)()})),(0,o.onActiveChat)((function(e){h.default.muteChatUnreadMessages(e)})),(0,l.onLangChange)(_),(0,y.subscribeUnreadMessagesChange)(_),c.default.has("ui.onWindowFocus")&&(t=new a.default((function(){var e;!(0,f.isRoutePathMatch)("chats")||(e=(e=(0,o.getActiveChatGid)())&&h.default.getChat(e,!1))&&(e.hasUnreadMessages||e.fileSavedNoticeCount)&&h.default.muteChatUnreadMessages(e.gid)}),200),c.default.call("ui.onWindowFocus",t.do.bind(t))),c.default.has("ui.onRequestOpenFromTray")?c.default.call("ui.onRequestOpenFromTray",e):c.default.has("ui.onWindowRestore ")&&c.default.call("ui.onWindowRestore",e)}},57018:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.imServerHandlers=t.GroupManagementEvent=void 0;var o=b(n(65286)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=g(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(58851)),i=n(15973),l=b(n(74160)),u=n(5150),s=b(n(74101)),c=b(n(73052)),f=b(n(26774)),d=n(52133),p=n(78717),h=n(7066),m=n(57485),y=n(13347);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function b(e){return e&&e.__esModule?e:{default:e}}function v(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){v(a,r,o,i,l,"next",e)}function l(e){v(a,r,o,i,l,"throw",e)}i(void 0)}))}}function O(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e){var t,n;if(e.isSuccess)return o.default.emit(j.chatMemberChange),n=!0,(t=s.default.getChat(e.data.gid))?(t.archiveDate=e.data.archiveDate,t.isDeleted=!1,t.setMembers(e.data.members),t.setAdmins(e.data.admins),e.data.mergedChats&&t.$set("mergedChats",e.data.mergedChats)):((t=s.default.normalizeItem(e.data)).setLastReadMessageIndex(t.lastMessageIndex),(0,h.createDate)(t.createdDate+20)>Date.now()&&(n=!1)),t.isMember((0,i.getCurrentUserID)())?(s.default.store(t),n&&(0,m.canUseConference)()&&(0,p.executeCommand)("updateOngoingChatConference",t.gid)):(s.default.removeChat(t.gid),(0,p.executeCommand)("tryDisconnectConference",t.gid)),t}function C(e,t){var n;if(e.isSuccess)return o.default.emit(j.changeOwnership),(n=s.default.getChat(e.data.gid))&&(e.data=S(S({},e.data),{mute:n.mute,star:n.star,category:n.category,latestMessageIndexes:n.latestMessageIndexes,lastReadMessageIndex:n.lastReadMessageIndex})),n=new a.default(e.data),s.default.store(n),n}function E(e,t){if(e.isSuccess){var n=e.data;if(null!=(e=n=Array.isArray(n)?n:n.cgid&&n.content?[n]:Object.keys(n).map((function(e){return n[e]})))&&e.length)return c.default.store(n,{putToDatabase:!0,putToCache:!0,unread:!0}),!0}}function P(e,t){var n,r;e.isSuccess&&(n=(e=e.data).gids,r=e.category,n&&n.length&&(e=n.map((function(e){return(e=s.default.getChat(e)).category=r,e})),s.default.store(e)))}function k(e){var t=s.default.getChat(e.gid);t&&(t.setAdmins(e.admins),s.default.store(t))}var j={rename:"group.management.rename",chatMemberChange:"group.management.chatMemberChange",changeOwnership:"group.management.changeOwnership",setAdmin:"group.management.setAdmin",groupMerge:"group.management.groupMerge",chatArchive:"group.management.chatArchive"},x=(t.GroupManagementEvent=j,n=function(){var e=w((function*(e){return!!e.isSuccess&&(s.default.storeChatsFromRemote(e.data),e=e.data.map((function(e){return e.lastMessageInfo})).filter((function(e){return!!e})),c.default.store(e,{skipChatFilter:!0}),!0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=w((function*(e){var t;e.isSuccess&&((t=s.default.getChat(e.data.gid)).avatar=e.data.avatar,s.default.store(t))}));return function(t){return e.apply(this,arguments)}}());t.imServerHandlers={chatArchive:function(e){if(e.isSuccess){o.default.emit(j.chatArchive);var t,n=s.default.getChat(e.data.gid);if(n)return n.archiveDate=e.data.archiveDate,n.star=null!=(t=e.data.star)?t:n.star,n.mute=null!=(t=e.data.mute)?t:n.mute,n.freeze=null!=(t=e.data.freeze)?t:n.freeze,n.hide=null!=(t=e.data.hide)?t:n.hide,s.default.store(n),n}},chatRename:function(e,t){if(e.isSuccess){o.default.emit(j.rename);var n=s.default.getChat(e.data.gid);if(n)return n.name=e.data.name,s.default.store(n),n}else(0,p.executeCommand)("showMessager",e.message,{type:"info"})},chatSetCommitters:function(e,t){if(e.isSuccess){var n=s.default.getChat(e.data.gid);if(n)return n.setCommitters(e.data.committers),s.default.store(n)}},chatSetConfig:function(e,t){if(e.isSuccess){var n=s.default.getChat(e.data.gid);if(n)return n.setCommitters(e.data.committers),n.public=e.data.public,n.adminInvite=e.data.adminInvite,s.default.store(n)}},chatInvite:_,chatKick:_,chatLeave:_,chatJoin:_,chatChangeOwnership:C,chatCreate:C,chatGetMembers:function(e){var t;if(e.isSuccess&&e.data&&e.data.gid&&e.data.members)return(t=s.default.getChat(e.data.gid))&&(t.setMembers(e.data.members),s.default.store(t)),t},messageSend:E,messageRetract:E,messageUpdate:E,chatStar:function(e){if(e.isSuccess){var t=s.default.getChat(e.data.gid);if(t)return t.star=e.data.star,s.default.store(t),t}},chatMute:function(e){if(e.isSuccess){var t=s.default.getChat(e.data.gid);if(t)return t.mute=e.data.mute,s.default.store(t),t}},chatSetCategory:P,chatRenameCategory:P,chatDeleteCategory:P,chatHide:function(e,t){if(e.isSuccess){var n=s.default.getChat(e.data.gid);if(n)return n.hide=e.data.hide,s.default.store(n),n}},chatFreeze:function(e){if(e.isSuccess){var t=s.default.getChat(e.data.gid);if(t)return t.frozen=e.data.freeze,s.default.store(t),t}},chatDismiss:function(e){if(e.isSuccess){var t=s.default.getChat(e.data.gid);if(t)return t.dismissDate=e.data.dismissDate,s.default.store(t),o.default.emit("im.chats.dismissedChat",t.gid),(0,p.executeCommand)("tryDisconnectConference",t.gid),t}},chatSetVisibility:function(e){if(e.isSuccess){var t=s.default.getChat(e.data.gid);if(t)return t.public=e.data.public,s.default.store(t),t}},syncNotifications:function(e){var t,n;if(l.default.system["notification.enable"]&&e.isSuccess)return t=e.data,(t=Array.isArray(t)?t:t.cgid?[t]:Object.keys(t).map((function(e){return t[e]})))&&t.length&&(n=null!=(e=(0,i.getCurrentUser)())&&e.isVersionSupport(y.VersionSupport.xuanbot)?(0,a.getXuanbotGid)((0,i.getCurrentUserID)()):"",t.forEach((function(e){e.type="notification",e.cgid&&e.cgid!==a.NOTIFICATION_CHAT_GID||(e.cgid=n||a.NOTIFICATION_CHAT_GID)})),c.default.store(t,{putToCache:!0,putToDatabase:!0,unread:!0})),!0},syncDepts:function(e){e.isSuccess&&(e=e.data)&&f.default.updateDeptsData(e)},chatTyping:function(e){e.isSuccess&&(e=e.data)&&(0,u.updateChatTyping)(e.cgid,e.typing,e.user)},chatAddAdmins:function(e){e.isSuccess&&(o.default.emit(j.setAdmin),k(e.data))},chatRemoveAdmins:function(e){e.isSuccess&&(o.default.emit(j.setAdmin),k(e.data))},chatPinMessages:function(e){var t,n;if(e.isSuccess)return n=e.data,(t=s.default.getChat(n.cgid))&&(t.pinnedMessages=n.allPinned),n.pinned&&(n=c.default.getMessages(n.pinned,n.cgid),c.default.store(n)),void s.default.store(t);(0,d.showAlert)(e.message)},chatUnpinMessages:function(e){var t;e.isSuccess&&(e=e.data,(t=s.default.getChat(e.cgid))&&(t.pinnedMessages=e.allPinned),e.unpinned&&(e=c.default.getMessages(e.unpinned,e.cgid),c.default.store(e)),s.default.store(t))},chatSetLastReadMessageByIndex:function(e){var t;e.isSuccess&&(t=s.default.getChat(e.data.gid))&&(t.setLastReadMessageIndex(e.data.id),s.default.store(t))},chatGetList:n,chatSetAvatar:x}},20491:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unpinMessage=t.toggleMuteChat=t.toggleHideChat=t.toggleFreezeChat=t.toggleChatStar=t.toggleChatPublic=t.toggleChatGroupPublic=t.toggleChatArchive=t.shareContentToChats=t.setChatGroupSettings=t.setChatCommitters=t.setChatCategory=t.sendTextMessage=t.sendImageMessage=t.sendFilesByRTC=t.sendFileMessage=t.sendFileBroadcastChatMessage=t.sendEmojiMessage=t.sendCodeMessage=t.sendChatMessage=t.sendBroadcastChatMessage=t.sendBotCommandMessage=t.renameChat=t.removeAdmins=t.pinMessage=t.onSendChatMessages=t.onChatActionChanged=t.mergeChat=t.kickOfMemberFromChat=t.joinOrExitChat=t.inviteMembersToChat=t.forwardMessage=t.fetchChatList=t.fetchChat=t.exitChat=t.dismissChat=t.deleteChatMessage=t.default=t.createTextChatMessage=t.createEmojiChatMessage=t.createChatWithMembers=t.createChat=t.createBroadcastChatMessage=t.createBotCommandMessage=t.changeOwnership=t.batchKickMemberFromChat=t.addCategory=t.addAdmins=void 0;var r=n(21614),o=N(n(23848)),a=N(n(91230)),i=n(74933),l=N(n(25852)),u=R(n(74160)),s=N(n(94128)),c=n(7066),f=n(64393),d=n(84035),p=n(16986),h=n(78717),m=N(n(65286)),y=N(n(12482)),g=n(77925),b=N(n(36255)),v=N(n(52260)),w=R(n(39483)),O=n(17531),S=N(n(61862)),_=N(n(84431)),C=R(n(15973)),E=N(n(24260)),P=N(n(58851)),k=R(n(92691)),j=n(20116),x=N(n(73052)),M=N(n(74101)),T=n(57018),I=n(94592),D=n(61997);function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(A=function(e){return e?n:t})(e)}function R(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==q(e)&&"function"!=typeof e)return{default:e};if((t=A(t))&&t.has(e))return t.get(e);var n,r,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=a?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}function N(e){return e&&e.__esModule?e:{default:e}}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||W(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=W(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function F(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function U(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){F(a,r,o,i,l,"next",e)}function l(e){F(a,r,o,i,l,"throw",e)}i(void 0)}))}}function z(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||W(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){if(e){if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function V(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e){return E.default.sendAndListen({method:"chatCreate",params:[e.gid,e.name||"",e.type,Array.from(e.members),0,e.public||!1]})}function K(e,t){return(e=function(e,t){Array.isArray(e)||(e=[e]);var n,r=C.default.user.id;return(e=e.map((function(e){return"object"===q(e)?e.id:e}))).find((function(e){return e===r}))||e.push(r),2===e.length?(n=e.sort().join("&"),M.default.getChat(n)||new P.default(G({members:e,createdBy:C.default.userAccount,type:P.default.TYPES.one2one},t))):new P.default(G({members:e,createdBy:C.default.user.account,type:P.default.TYPES.group},t))}(e,t)).id?Promise.resolve(e):$(e)}function Y(e,t){return E.default.send({method:"chatSetCommitters",params:[e.gid,t]})}function J(e){return E.default.send({method:"chatSetVisibility",params:[e.gid,!e.public]})}function X(e,t){return E.default.send({method:"chatSetVisibility",params:[e.gid,t]})}function Q(e,t){var n=(0,C.getCurrentUser)(),r=t.committers;if(r instanceof Set&&(r=Array.from(r)),Array.isArray(r)&&(r=r.join(",")),n.isVersionSupport("chatSetConfig"))return n={public:t.public,adminInvite:!t.public&&t.adminInvite,committers:r},E.default.sendAndListen({method:"chatsetconfig",params:[e.gid,n]});X(e,t.public),Y(e,r)}function Z(e,t){function n(){return E.default.send({method:"chatStar",params:[void 0===t?!e.star:!!t,e.gid]})}return e.id?n():$(e).then(n)}function ee(e,t){function n(){return E.default.send({method:"chatMute",params:[void 0===t?!e.mute:!!t,e.gid]})}return e.id?n():$(e).then(n)}function te(e,t){function n(){return E.default.sendAndListen({method:"chatHide",params:[null!=t?t:!e.hide,e.gid]}).then((function(e){e&&m.default.emit(xe,e,"hide",e.hide)}))}return e.id?n():$(e).then(n)}function ne(e,t){function n(){return E.default.sendAndListen({method:"chatFreeze",params:["boolean"==typeof t?t:!e.frozen,e.gid]}).then((function(t){t&&m.default.emit(xe,t,"freeze",e.frozen)}))}return e.id?n():$(e).then(n)}function re(e,t){function n(){return E.default.send({method:"chatSetCategory",params:[o,t]})}var r=Array.isArray(e),o=r?e.map((function(e){return e.gid})):[e.gid];return r||e.id?n():$(e).then(n)}function oe(e,t){var n,r,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=C.default.userConfig;a=null==o?u.default.ui["chat.sendMarkdown"]&&a&&a.sendMarkdown?k.CONTENT_TYPES.text:k.CONTENT_TYPES.plain:o?k.CONTENT_TYPES.text:k.CONTENT_TYPES.plain;try{r=RegExp("(?<!`)```(?!`)","g")}catch(e){console.log("codeBlockRegex /(?<!`)```(?!`)/g failed to construct: ",e)}if(a===k.CONTENT_TYPES.text&&null!=(o=r)&&o.test(e)){var i=z(e.matchAll(r)).map((function(e){return e.index})),l=[];l.push(e.slice(0,i[0]));for(var s=0;s<i.length;s++){var c=i[s],f=i[s+1];s%2==0&&void 0!==f?f+=3:s%2==1&&(c+=3),l.push(e.slice(c,f))}n="",l.forEach((function(e,t){t%2==0&&""!==e?n+=(0,j.normalizeMentionsInMessage)(e):t%2==1&&""!==e&&(n+=e)}))}else n=(0,j.normalizeMentionsInMessage)(e);return(0,k.createChatMessage)({content:n,user:C.default.userId,cgid:t.gid,contentType:a})}function ae(e,t){var n,r,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Ie(e&&(0,f.isWebUrl)(e.trim())?(n=e.trim(),r=t,(0,k.createChatMessage)({content:JSON.stringify({type:k.OBJECT_TYPES.url,url:n}),user:C.default.userId,cgid:r.gid,contentType:k.CONTENT_TYPES.object})):oe(e,t,o),t)}function ie(e,t){return(e="string"==typeof e?{code:e}:e).code=(0,i.encodeEmojiMessage)(e.code),(0,k.createChatMessage)({content:JSON.stringify(e),user:C.default.userId,cgid:t.gid,contentType:k.CONTENT_TYPES.code})}function le(e,t){return Ie(ie(e,t),t)}function ue(e,t){return(0,k.createChatMessage)({contentType:k.CONTENT_TYPES.emotion,content:JSON.stringify({type:"emoji",content:e}),user:C.default.userId,cgid:t.gid})}function se(e,t){return Ie(ue(e,t),t,!0)}function ce(e,t){return(0,k.createChatMessage)({type:k.TYPES.botcommand,contentType:k.CONTENT_TYPES.text,content:e,user:C.default.userId,cgid:t.gid})}function fe(e,t){return Ie(ce(e,t),t)}function de(e,t){return e&&(e.canRename(C.default.user)||"super"===(0,C.getCurrentUser)().admin)?e.id?E.default.send({method:"chatRename",params:[e.gid,t]}):Promise.reject(new Error("Cannot rename a local chat.")):Promise.reject(new Error("You have no permission to rename the chat."))}function pe(e,t){return new k.default({content:e,user:C.default.userId,cgid:t.gid,type:k.default.TYPES.broadcast})}function he(e,t){return Ie(pe(e,t),t,!0)}function me(e,t,n){if("super"===(0,C.getCurrentUser)().admin||e.canInvite(C.default.user))return e.isOne2One?(t.push.apply(t,z(e.members)),K(t,n)):E.default.sendAndListen({method:"chatInvite",params:[e.gid,t]})}function ye(e,t){if(e.canKickOff(C.default.user,t)||"super"===(0,C.getCurrentUser)().admin)return E.default.sendAndListen({method:"chatKick",params:[e.gid,[t.id]]})}function ge(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return E.default.sendAndListen({method:t?"chatJoin":"chatLeave",params:[e.gid]}).then((function(n){n&&m.default.emit(xe,e,"join",t)}))}function be(e){return e.canExit()?ge(e,!1):Promise.reject()}function ve(e){return e.canDismiss(C.default.user)?E.default.sendAndListen({method:"chatDismiss",params:[e.gid]}).then((function(t){t&&m.default.emit(xe,e,"dismiss")})):Promise.reject()}function we(e,t){return e.isOwner(C.default.user)||"super"===(0,C.getCurrentUser)().admin?E.default.sendAndListen({method:"chatChangeOwnership",params:[e.gid,t]}):Promise.reject()}function Oe(e,t){return e.isOwner(C.default.user)?E.default.send({method:"chatMerge",params:[e.gid,t.gid]}):"super"===(0,C.getCurrentUser)().admin?E.default.sendAndListen({method:"chatMerge",params:[e.gid,t.gid]}):Promise.reject()}function Se(e){return m.default.on(je,e)}function _e(){return E.default.sendAndListen({method:"chatGetList"})}function Ce(e){return E.default.sendAndListen({method:"chatCreate",params:[e,"","","",0,!1]})}var Ee,Pe=s.default.isType("browser"),ke=s.default.access("fs"),je="im.server.message.send",xe="im.server.chat.action",Me=(t.createChat=$,t.createChatWithMembers=K,t.setChatCommitters=Y,t.toggleChatPublic=J,t.toggleChatGroupPublic=X,t.setChatGroupSettings=Q,t.toggleChatArchive=function(e,t){function n(){return E.default.send({method:"chatarchive",params:[null!=t?t:!e.isArchived,e.gid]})}return e.id?n():$(e).then(n)},t.toggleChatStar=Z,t.toggleMuteChat=ee,t.toggleHideChat=te,t.toggleFreezeChat=ne,t.setChatCategory=re,t.addCategory=function(e){var t=(0,C.getCurrentUser)(),n=t.config.groupsCategories,r=(0,D.timeSequence)();n[e]={order:r,key:r},t.config.groupsCategories=n,m.default.emit("menu.categories.changed")},t.createTextChatMessage=oe,t.sendTextMessage=ae,t.sendCodeMessage=le,function(){var e=U((function*(e,t,n){Array.isArray(t)||(t=[t]);var r,o=(e=Array.isArray(e)?e:[e]).length,a=t.length,i=0,l=o*a,u=[],s=L(e);try{for(s.s();!(r=s.n()).done;)if((h=r.value)&&""!==h){var c=!1;if("string"==typeof h){var f,d=L(t);try{for(d.s();!(f=d.n()).done;){var p=f.value,h=("string"==typeof p&&(p=M.default.getChat(p)),oe(h,p,!1));c=(yield Ie(h,p)).isSuccess,null!=n&&n(++i,l)}}catch(e){d.e(e)}finally{d.f()}}else h instanceof k.default&&(c=!!(yield Te(h,t,(function(){return null==n?void 0:n(++i,l)}))).length);c&&u.push(h)}}catch(e){s.e(e)}finally{s.f()}return null!=n&&n(l,l),u}));return function(t,n,r){return e.apply(this,arguments)}}()),Te=(t.shareContentToChats=Me,function(){var e=U((function*(e,t,n){function r(e){return e.isFileContent&&!!e.fileContent.editable}if(Array.isArray(e)||(e=[e]),e.some(r)&&(l.default.show(S.default.string("file.collabora.forwardWarning"),{type:"warning"}),!(e=e.filter((function(e){return!r(e)}))).length))return[];var o,a=L(t);try{for(a.s();!(o=a.n()).done;)yield*function*(){var t=o.value,r=e.map((function(e){return(0,k.createChatMessage)({user:C.default.userId,cgid:t.gid,type:e.type,content:e.content,contentType:e.contentType,data:{forwardFrom:{gid:e.gid,user:e.senderId,date:e.date}}})}));yield Ie(r,t),null!=n&&n()}()}catch(t){a.e(t)}finally{a.f()}return e}));return function(t,n,r){return e.apply(this,arguments)}}()),Ie=(t.forwardMessage=Te,t.createEmojiChatMessage=ue,t.sendEmojiMessage=se,t.createBotCommandMessage=ce,t.sendBotCommandMessage=fe,t.renameChat=de,function(){var e=U((function*(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(e)||(e=[e]),t)t instanceof P.default||(t=M.default.getChat(t.gid));else if(!(t=M.default.getChat(e[0].cgid)))return Promise.reject(new Error("Chat is not set before send messages."));if(!n&&t.isReadonly(C.default.user))return Promise.reject(S.default.string("chat.blockedCommitterTip"));var r=(0,C.isUserOnline)(),o=(0,C.getUserConfig)(),i=o.getChatBulletinSetting(t.gid),l=o.getChatReplyTo(t.gid);return i&&o.setChatBulletinSetting(t.gid,null),e.forEach((function(e){var n,f,d,p,h;i&&e.isTextContent?(e.type=k.TYPES.bulletin,e.setDataValue({type:i.type||k.BULLETIN_TYPES.bulletin,expiration:(0,c.calculateTimestamp)(i.duration,i.unit)||0})):l&&(e.setDataValue({replyTo:l}),e.isFileContent&&o.setChatReplyTo(t.gid,null)),e.date=Date.now(),r?(n=e.getCommand())&&(f=e.isMarkdownTextContent,"version"===n.action?(h=(h=(0,u.getSpecialVersionName)())?" for ".concat(h):"",d=process.env.HOT?"(HOT)":"",p=[],f&&p.push("```js:$$version"),p.push("version       = '".concat(a.default.name," ").concat(a.default.version).concat(a.default.buildVersion?".".concat(a.default.buildVersion):"").concat(h).concat(d,"';"),"serverVersion = '".concat(C.default.user.serverVersion,"';"),"buildTime     = '".concat(a.default.buildTime?(0,c.formatDate)(a.default.buildTime):"","';"),"commit        = '".concat(a.default.commit,"';"),"lang          = '".concat(S.default.name,"';"),"platform      = '".concat(s.default.displayName,"';"),"os            = '".concat(s.default.access("env.os"),"';")),s.default.has("env.arch")&&p.push("arch          = '".concat(s.default.access("env.arch"),"';")),f&&p.push("```"),e.content=p.join("\n")):"dataPath"===n.action&&s.default.has("os.createUserDataPath")&&(h=[],f&&h.push("```"),h.push("$$dataPath = '".concat(s.default.call("os.createUserDataPath",C.default.user.identify,"",""),"';")),f&&h.push("```"),e.content=h.join("\n"))):e.markSendFailed()})),x.default.store(e,{putToDatabase:!1,unread:!1}),n||m.default.emit(je,e,t),r?E.default.sendAndListen({method:"messagesend",params:[e.map((function(e){return e.plainServer()}))]},t):Promise.resolve()}));return function(t,n){return e.apply(this,arguments)}}()),De=(t.sendChatMessage=Ie,function(){var e=U((function*(e,t,n){if(0===(r=(e=y.default.create(e)).size))l.default.show(S.default.error("UPLOAD_FILE_IS_ZERO_SIZE"),{type:"warning"});else{if(r<10240)return function(e,t){return new Promise((function(n,r){function o(o){var a=(0,k.createChatMessage)({user:C.default.userId,cgid:t.gid,contentType:k.CONTENT_TYPES.image});(0,d.getImageInfo)(o).then((function(r){a.imageContent={content:o,time:(new Date).getTime(),name:e.name,size:e.size,send:!0,type:"base64",width:r.width,height:r.height},Ie(a,t),n()})).catch((function(){l.default.show(S.default.error("CANNOT_HANDLE_IMAGE"),{type:"danger"}),DEBUG&&console.warn("Cannot get image information",e),r()}))}var a=e.base64||e.originFile&&e.originFile.base64;a?o(a):((a=new FileReader).onload=function(e){o(e.target.result)},a.readAsDataURL(e.blob||e.originFile||e))}))}(e,t);if((0,O.checkUploadFileSize)(r)){var r,a={gid:(r=(0,k.createChatMessage)({user:(0,C.getCurrentUserID)(),cgid:t.gid,contentType:k.CONTENT_TYPES.image})).gid,cgid:r.cgid,senderId:r.senderId};try{var i=yield(0,d.getImageInfo)(e.viewUrl);a.width=i.width,a.height=i.height}catch(u){return void l.default.show(S.default.error("CANNOT_HANDLE_IMAGE"),{type:"danger"})}e.change(a),(r.imageContent=e).sendMethod="sendImageMessage";var u=B(yield(0,o.default)((0,O.uploadFile)(e,n,!0)),1)[0];return u?(l.default.show("".concat(S.default.string("file.uploadFailed"),"(").concat(S.default.error(u),")"),{type:"danger"}),void(DEBUG&&console.error("Upload image file error",{error:u,imageFile:e}))):(r.updateImageContent(e.plain()),r.cacheFilePath=e.cachePath,Ie(r,t))}l.default.show(S.default.format("error.UPLOAD_FILE_IS_TOO_LARGE",(0,p.formatBytes)(C.default.user.uploadFileSize)),{type:"warning",autoHide:!0})}}));return function(t,n,r){return e.apply(this,arguments)}}()),Ae=(t.sendImageMessage=De,t.sendFilesByRTC=function(e,t){var n,o,a,i,u=t.gid,s=t.theOtherMemberID,c=t.isOne2One;null!=(n=w.default.getRTCInitiator(t.gid))&&n.dataChannelSize||null!=(n=w.default.getSendingFiles(t.gid))&&n.size||null!=(n=w.default.getRTCResponder(t.gid))&&n.dataChannelSize||null!=(n=w.default.getReceivingFiles(t.gid))&&n.size?(0,h.executeCommand)("showMessager",S.default.string("file.upload.p2p.exitHint.sendingFileOnlyOne"),{type:"warning"}):c?_.default.getMember(s).isOnline?(o=(0,C.getCurrentUserID)(),a=new Map,i=new Map,e.forEach((function(e){var n=(0,r.v4)(),l=((0,I.setP2pFilePath)(n,e.path),e.name),u=e.size;a.set(n,{id:n,name:l,size:u,sender:o,receiver:s,status:w.RTC_FILE_STATUS.pending,originFile:e}),i.set(n,{id:n,name:l,size:u,sender:o,receiver:s,status:w.RTC_FILE_STATUS.pending}),Ae(g.FILE_BROAD_MESSAGE_TYPES.readyToReceive,t,e.name,e.size)})),E.default.send({method:"datatransfer",params:{cgid:t.gid,user:t.theOtherMemberID,data:JSON.stringify({type:w.RTC_TRANSFER_EVENT.sendFilesRequest,files:z(i)}),userID:o}}),w.default.setSendingFiles(u,a)):(0,h.executeCommand)("showMessager",S.default.string("chat.sendbox.toolbar.file.online.offlinewarning"),{type:"warning"}):l.default.show(S.default.format("error.suggestion.RTC_ONLY_ONE2ONE"),{type:"warning",autoHide:!0})},t.createBroadcastChatMessage=pe,t.sendBroadcastChatMessage=he,function(){var e=U((function*(e,t,n,r){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"",a=null;return n="`".concat(n,"(").concat((0,p.formatBytes)(r),")`"),r="[@".concat((0,C.getCurrentUser)().realname,"](@#").concat(C.default.userId,")"),e===g.FILE_BROAD_MESSAGE_TYPES.readyToReceive?a=S.default.format("chat.message.notification.file.readyToReceive",r,n):e===g.FILE_BROAD_MESSAGE_TYPES.cancelSend?a=S.default.format("chat.message.notification.file.cancelSend",r,n):e===g.FILE_BROAD_MESSAGE_TYPES.terminalSend?a=S.default.format("chat.message.notification.file.terminalSend",r,n):e===g.FILE_BROAD_MESSAGE_TYPES.rejctReceive?a=S.default.format("chat.message.notification.file.rejctReceive",r,n):e===g.FILE_BROAD_MESSAGE_TYPES.cancelReceive?a=S.default.format("chat.message.notification.file.cancelReceive",r,n):e===g.FILE_BROAD_MESSAGE_TYPES.reciveDone&&(a=o?S.default.format("chat.message.notification.file.reciveDone","[".concat(n,"](xxc://showFileInExplorer/").concat(o,")")):S.default.format("chat.message.notification.file.reciveDone",n)),he(a,t)}));return function(t,n,r,o){return e.apply(this,arguments)}}()),Re=(t.sendFileBroadcastChatMessage=Ae,function(){var e=U((function*(e,t,n){if(0===(r=(e=y.default.create(e)).size))l.default.show(S.default.error("UPLOAD_FILE_IS_ZERO_SIZE"),{type:"warning",autoHide:!0});else if((0,O.checkUploadFileSize)(r)){var r,a={gid:(r=(0,k.createChatMessage)({user:(0,C.getCurrentUserID)(),cgid:t.gid,contentType:k.CONTENT_TYPES.file})).gid,cgid:r.cgid,senderId:r.senderId};if(e.mimeType.includes("image"))try{var i=yield(0,d.getImageInfo)(e.viewUrl);a.width=i.width,a.height=i.height}catch(u){l.default.show(S.default.error("CANNOT_HANDLE_IMAGE"),{type:"danger"}),DEBUG&&console.warn("Cannot get image size info",e,u)}e.change(a),(r.fileContent=e).sendMethod="sendFileMessage";var u=B(yield(0,o.default)((0,O.uploadFile)(e,n)),1)[0];if(u)return"HTTP_ABORT"!==u.code&&l.default.show("".concat(S.default.string("file.uploadFailed"),"(").concat(S.default.error(u),")"),{type:"danger"}),void(DEBUG&&console.error("Upload file error",{error:u,file:e}));r.updateFileContent(e.plain()),r.cacheFilePath=e.cachePath,Ie(r,t)}else l.default.show(S.default.format("error.UPLOAD_FILE_IS_TOO_LARGE",(0,p.formatBytes)(C.default.user.uploadFileSize)),{type:"warning",autoHide:!0})}));return function(t,n,r){return e.apply(this,arguments)}}());t.sendFileMessage=Re,t.inviteMembersToChat=me,t.kickOfMemberFromChat=ye,t.batchKickMemberFromChat=function(e,t){var n=!0;if(t.forEach((function(t){e.canKickOff(C.default.user,{id:t})||(n=!1)})),n)return E.default.sendAndListen({method:"chatKick",params:[e.gid,t]})},t.joinOrExitChat=ge,t.exitChat=be,t.dismissChat=ve,t.changeOwnership=we,t.mergeChat=Oe,t.addAdmins=function(e,t){if(e.canSetAdmins(C.default.user)||"super"===(0,C.getCurrentUser)().admin)return E.default.sendAndListen({method:"chatAddAdmins",params:[e.gid,t="number"==typeof t?[t]:t,C.default.user.id]})},t.removeAdmins=function(e,t){if(e.canSetAdmins(C.default.user)||"super"===(0,C.getCurrentUser)().admin)return E.default.sendAndListen({method:"chatRemoveAdmins",params:[e.gid,t="number"==typeof t?[t]:t,C.default.user.id]})},t.pinMessage=function(e,t){if(e.isOne2One||e.isAdmin(C.default.user))return"number"==typeof t&&(t=[t]),s.default.call("ui.showAndFocusWindow"),E.default.sendAndListen({method:"chatPinMessages",params:[e.gid,t,C.default.user.id]})},t.unpinMessage=function(e,t){if(e.isOne2One||e.isAdmin(C.default.user))return"number"==typeof t&&(t=[t]),s.default.call("ui.showAndFocusWindow"),E.default.sendAndListen({method:"chatUnpinMessages",params:[e.gid,t,C.default.user.id]})},t.onSendChatMessages=Se,t.onChatActionChanged=function(e){return m.default.on(xe,e)},t.fetchChatList=_e,t.fetchChat=Ce,t.deleteChatMessage=function(e,t){return e.canDelete(C.default.user)||t.isAdmin(C.default.user)?((t=e.plainServer()).deleted=!0,s.default.call("ui.showAndFocusWindow"),E.default.sendAndListen({method:"messageretract",params:[[t]]})):Promise.reject(new Error("Current use can't delete the message."))},n.g.ExtsRuntime&&(Ee=n.g.ExtsRuntime.registerExtensionAPI,[{name:"im.shareContentToChat",level:4,func:function(e,t){return Me(e,{gid:t})}},{name:"im.sendTextMessage",level:4,func:function(e,t,n){return ae(e,{gid:t},n)}},{name:"im.sendCodeMessage",level:4,func:function(e,t){return le(e,{gid:t})}},{name:"im.sendEmojiMessage",level:4,func:function(e,t){return se(e,{gid:t})}},{name:"im.sendBotCommandMessage",level:4,func:function(e,t){return fe(e,{gid:t})}},{name:"im.sendImageMessage",level:4,func:function(e,t,n){return De(e,{gid:t},n)}},{name:"im.sendFileMessage",level:4,func:function(e,t,n){return Re(e,{gid:t},n)}},{name:"im.createGroupChat",level:4,func:function(e,t){return K(e,{name:t})}},{name:"im.inviteMembersToChat",level:4,func:function(e,t){return me({gid:e},t)}},{name:"im.renameChat",level:4,func:function(e,t){return de({gid:e},t)}},{name:"im.toggleStarChat",level:4,func:function(e,t){return Z({gid:e},t)}},{name:"im.toggleMuteChat",level:4,func:function(e,t){return ee({gid:e},t)}},{name:"im.toggleFreezeChat",level:4,func:function(e,t){return ne({gid:e},t)}},{name:"im.joinChat",level:4,func:function(e){return ge({gid:e})}},{name:"im.exitChat",level:4,func:function(e){return ge({gid:e},!1)}},{name:"im.dismissChat",level:4,func:function(e){return ve({gid:e})}},{name:"im.sendBroadcastChatMessage",level:4,func:function(e,t){return he(e,{gid:t})}}].forEach((function(e){return Ee(e)}))),E.default.setHandlers(T.imServerHandlers),E.default.setHandler("datatransfer",(function(e){if(e.isSuccess){e=e.data;try{e.data=JSON.parse(e.data)}catch(e){console.error(e)}var t=e.data,n=e.cgid;if(e=e.userID,"offer"===t.type)return w.default.getRTCResponder(n)&&w.default.removeRTCResponder(n),(e=new v.default(n,e)).createPeerConnection(),e.onGetOffer(t),void w.default.storeRTCResponder(n,e);if("answer"===t.type){if(e=w.default.getRTCInitiator(n))return void e.onGetAnswer(t);throw new Error("can't find RTC initiator.")}if("candidate"===t.type){if("initiator"===t.from){if(e=w.default.getRTCResponder(n))return void e.onGetCandidate(t);throw new Error("can't find RTC responder.")}if("responder"!==t.from)return;if(e=w.default.getRTCInitiator(n))return void e.onGetCandidate(t);throw new Error("can't find RTC initiator.")}if(t.type===w.RTC_TRANSFER_EVENT.sendFilesRequest)w.default.setReceivingFiles(n,new Map(t.files));else{if(t.type===w.RTC_TRANSFER_EVENT.sendFilesCancel)return!Pe&&ke.pathExistsSync("".concat(null==(e=w.default.getReceivingFile(n))?void 0:e.savedPath,".tmp"))&&ke.removeSync("".concat(null==(e=w.default.getReceivingFile(n))?void 0:e.savedPath,".tmp")),void w.default.removeReceivingFile(n,t.file.id);t.type===w.RTC_TRANSFER_EVENT.receiveFilesCancel?w.default.removeSendingFile(n,t.file.id):t.type===w.RTC_TRANSFER_EVENT.receiveFilesConfirm&&(t.file.status===w.RTC_FILE_STATUS.accepted&&(w.default.acceptSendingFile(n,t.file.id),(e=w.default.getRTCInitiator(n))?e.sendFile(t.file.id):((e=new b.default(n,t.file.receiver)).createPeerConnection(),w.default.storeRTCInitiator(n,e))),t.file.status===w.RTC_FILE_STATUS.refused&&w.default.removeSendingFile(n,t.file.id))}}})),n={fetchChatList:_e,fetchChat:Ce,createChat:$,createChatWithMembers:K,setCommitters:Y,toggleChatPublic:J,toggleChatGroupPublic:X,toggleChatStar:Z,toggleFreezeChat:ne,toggleHideChat:te,toggleMuteChat:ee,setChatGroupSettings:Q,setChatCategory:re,renameChat:de,sendChatMessage:Ie,joinOrExitChat:ge,exitChat:be,dismissChat:ve,changeOwnership:we,mergeChat:Oe,inviteMembersToChat:me,shareContentToChats:Me,sendImageMessage:De,sendFileMessage:Re,createTextChatMessage:oe,createEmojiChatMessage:ue,sendTextMessage:ae,sendEmojiMessage:se,createBotCommandMessage:ce,sendBotCommandMessage:fe,createCodeMessage:ie,sendCodeMessage:le,onSendChatMessages:Se,kickOfMemberFromChat:ye},t.default=n},15998:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getActivatedCacheChatsGID=t.emitChatSendboxFocus=t.default=t.createGroupChat=t.createFileServerContextMenuItems=t.createCatureScreenContextMenuItems=t.chatRenamePrompt=t.chatExitConfirm=t.chatDismissConfirm=t.captureAndCutScreenImage=void 0,t.getRecentMembersOfGroupChat=Oe,t.renameChatCategory=t.onSuggestSendImage=t.onSendContentToChat=t.onChatSendboxFocus=t.mentionMemberInSendbox=t.isChatsCacheChanged=t.initImUI=void 0,t.searchMembersOfGroupChat=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:5,r=x.default.getChat(e);if(!r)return[];if((r=r.members).size||(r=new Set(Oe(e,100))),!r.size)return[];var o=[];return r.forEach((function(e){var n=M.default.getItemFromCache(e);!n||(n=n.getMatchScore(t))&&o.push({score:n,member:e})})),o.length&&(o.sort((function(e,t){return t.score-e.score})),o=o.map((function(e){return e.member})),n&&o.length>n)?o.slice(0,n):o},t.setChatCacheState=t.sendMessageToChat=t.sendFilesToChat=t.sendContentToChat=void 0,t.showChatMessage=Ce,t.showMessageInList=Se,t.takeOutChatCacheState=void 0;var o=V(n(65286)),a=n(15973),i=V(n(61862)),l=n(20491),u=n(16986),s=(n(7066),n(4829)),c=n(69851),f=n(64393),d=V(n(62004)),p=n(9215),h=V(n(52133)),m=V(n(81087)),y=H(n(74933)),g=n(77325),b=n(98649),v=n(78717),w=V(n(74160)),O=V(n(94128)),S=V(n(70562)),_=n(17531),C=n(90534),E=V(n(12482)),P=n(18876),k=(H(n(92691)),n(40910)),j=n(20116),x=V(n(74101)),M=V(n(84431)),T=V(n(29795)),I=V(n(73052)),D=(n(79429),n(68271)),A=n(25852),R=(V(n(74689)),V(n(94592))),N=(n(74249),n(15116)),B=n(15142),L=n(73002),F=(n(95396),void n(89904)),U=["type","cgid"],z=["message"];function W(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(W=function(e){return e?n:t})(e)}function H(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=W(t))&&t.has(e))return t.get(e);var n,o,a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]);return a.default=e,t&&t.set(e,a),a}function V(e){return e&&e.__esModule?e:{default:e}}function G(e){return function(e){if(Array.isArray(e))return ee(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function $(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){q(a,r,o,i,l,"next",e)}function l(e){q(a,r,o,i,l,"throw",e)}i(void 0)}))}}function K(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||Z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Z(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function Z(e,t){if(e){if("string"==typeof e)return ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(e,t):void 0}}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function te(){var e,t=Date.now(),n=Q(pe);try{for(n.s();!(e=n.n()).done;){var r=X(e.value,2),o=r[0],a=r[1];if(!(0,D.isActiveChat)(o)&&a.isExpired(t,(0,u.convertTimes)(w.default.ui["chat.cacheLife"])))return!0}}catch(e){n.e(e)}finally{n.f()}return!1}function ne(e,t){(e=pe.get(e))&&e.keepState(t)}function re(e,t){if(e=pe.get(e))return e.takeOutState(t)}function oe(e){e&&x.default.getChat(e)&&((t=pe.get(e))?t.active():pe.set(e,new S.default(e)));var t,n=Date.now();return Array.from(pe.keys()).filter((function(e){if((0,D.isActiveChat)(e))return!0;var t=pe.get(e);return!(t.isCleaned||t.isExpired(n,(0,u.convertTimes)(w.default.ui["chat.cacheLife"]))&&(t.clean(),null!=(e=x.default.getChat(e))&&e.shrinkMessageIndexList(20),DEBUG&&(e=x.default.getChat(t.cgid),console.collapse("Chat cache cleaned","tealBg",e?e.name:null,"tealPale"),console.log("cache",t),console.groupEnd()),1))}))}function ae(e){(0,v.executeCommand)("showChatSendDialog",{message:e})}function ie(e,t){return o.default.on("".concat(he.sendContentToChat,".").concat(e),t)}function le(e){var t=e.name;return h.default.prompt(i.default.string("chat.rename.title"),e.name,{inputProps:{inputProps:{maxLength:16},placeholder:i.default.string("chat.rename.newTitle")}}).then((function(n){e.name!==n&&n!==t&&n.trim()!==t&&""!==String(n).trim()&&(0,l.renameChat)(e,String(n).trim())}))}function ue(e){return 1<arguments.length&&void 0!==arguments[1]&&arguments[1]&&!e.isDismissed?(0,A.showMessager)(i.default.format("chat.group.exitTip"),{type:"warning"}):h.default.confirm(i.default.format("chat.group.exitConfirm",e.name)).then((function(t){t&&(0,l.exitChat)(e)}))}function se(e){return h.default.prompt(i.default.string("chat.create.newChatNameTip"),"",{inputProps:{placeholder:i.default.string("chat.rename.newTitle")},onSubmit:function(e){if(!e)return h.default.alert(i.default.string("chat.rename.newTitleRequired")),!1}}).then((function(t){if(t)return(0,l.createChatWithMembers)(e,{name:t})}))}function ce(e){return o.default.on(he.suggestSendImage,e)}function fe(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;o.default.emit(he.sendboxFocus,e,t),(0,a.getUserConfig)().listenClipboardImage&&(0,u.isEmptyString)(t)&&(0,v.executeCommandLine)("suggestClipboardImage")}function de(e){return o.default.on(he.sendboxFocus,e)}var pe=new Map,he={sendContentToChat:"im.chats.sendContentToChat",suggestSendImage:"im.chats.suggestSendImage",sendboxFocus:"im.chat.sendbox.focus",dismissedChat:"im.chats.dismissedChat",replyChat:"im.chats.reply"},me=(t.isChatsCacheChanged=te,t.setChatCacheState=ne,t.takeOutChatCacheState=re,t.getActivatedCacheChatsGID=oe,function(e){var t=void 0===(t=(r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).type)?"text":t,n=void 0===(n=r.cgid)?(0,D.getActiveChatGid)():n,r=J(r,U);if("file"!==t)return"text"===t&&"string"==typeof e&&(e=(0,u.restoreMessageContainAt)(e)),o.default.emit("".concat(he.sendContentToChat,".").concat(n),Y({content:e,type:t},r));(0,l.sendFileMessage)(e,x.default.getChat(n))}),ye=(t.sendContentToChat=me,function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof t&&(t={cgid:t}),"string"==typeof e?e=e.split(","):Array.isArray(e)||(e=[e]),e.length&&me(e,Y({type:"mention"},t))}),ge=(t.mentionMemberInSendbox=ye,t.sendMessageToChat=ae,function(){var e=$((function*(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:(0,D.getActiveChatGid)();if(e&&e.length){2===e.length&&null!=(n=e.every)&&n.call(e,(function(e){return e.type.startsWith("image/")}))&&e.some((function(e){return!e.path}))&&O.default.env.isWindowsOS&&e.splice(e.indexOf((function(e){return 0===e.name.search(e.path.contains("WeChat Files"))})),1);for(var n=x.default.getChat(t),r=!1,o=!1,i=!0,u=[],s=[],c=0;c<e.length;c++){var f=e[c];i&&!f.type.startsWith("image/")&&(i=!1),(0,_.checkUploadFileSize)(f.size)?u.push(E.default.create(f)):f.size<=0?""===f.type?o=!0:r=!0:s.push(E.default.create(f))}if(n.isOne2One&&M.default.getMember(n.theOtherMemberID).isOnline&&!i){var d=n.theOtherMemberID===(0,a.getCurrentUserID)(),p=u.concat(s);if(yield(0,N.showConfirmSendModeDialog)(u.concat(s),{isMe:d,useP2p:!0})){var h=(0,B.getLocalConfig)("sendCurrentFilesByP2p");if((0,B.removeLocalConfig)("sendCurrentFilesByP2p"),h)(0,l.sendFilesByRTC)(p.map((function(e){return e.originFile})),n);else if(u.length&&u.forEach((function(e){return me(e,{type:"file",cgid:t})})),s.length)if(d)me(s[0],{type:"file",cgid:t});else if((0,a.getUserConfig)().get("ui.chat.sendBigFileOnline"))(0,l.sendFilesByRTC)(s.map((function(e){return e.originFile})),n);else{if(!(yield(0,L.showConfirmSendFilesDialog)(s,!0)))return;(0,l.sendFilesByRTC)(s.map((function(e){return e.originFile})),n)}be(o,r)}else(0,B.removeLocalConfig)("sendCurrentFilesByP2p")}else if(u.length||s.length){if(i)return me(u,{type:"image",cgid:t}),void be(o,r,!!s.length);h=u.concat(s),(yield(0,N.showConfirmSendModeDialog)(h,{isMe:!1,useP2p:!1}))&&(u.forEach((function(e){return me(e,{type:"file",cgid:t})})),be(o,r,!!s.length))}}}));return function(t){return e.apply(this,arguments)}}()),be=(t.sendFilesToChat=ge,function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];e&&(0,v.executeCommand)("showMessager",i.default.error("UPLOAD_FILE_IS_TYPE_ERROR"),{type:"warning"}),t&&(0,v.executeCommand)("showMessager",i.default.error("UPLOAD_FILE_IS_ZERO_SIZE"),{type:"warning"}),n&&(0,v.executeCommand)("showMessager",i.default.error({code:"UPLOAD_FILE_IS_TOO_LARGE",formats:(0,u.formatBytes)((0,a.getCurrentUser)().uploadFileSize)}),{type:"warning"})}),ve=(t.onSendContentToChat=ie,function(){var e=$((function*(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if(!O.default.has("screenshot"))throw new Error("The platform(".concat(O.default.type,") not support capture screenshot."));var r,o=(0,D.getActiveChatGid)();try{if(!t&&O.default.env.isOSX&&O.default.has("displayMedia.isGrantedScreenAccess")&&!O.default.call("displayMedia.isGrantedScreenAccess","screen"))return r=[{label:i.default.string("common.systemPreferneces"),click:function(){O.default.call("os.openMacScreenCapturePreferences")}}],DEBUG&&r.push({label:"Skip Permission Check",click:function(){return ve(e,!0)}}),void(0,v.executeCommand)("showMessager",i.default.string("conference.shareScreen.noPermission"),{type:"danger",actions:r});var a=yield O.default.access("screenshot").captureAndCutScreenImage(e);if(n)return(0,D.setActiveChat)(o),a&&me(Y(Y({},a),{},{name:"screenshot-".concat(Date.now(),".png"),blob:(0,P.dataURItoBlob)(a.base64),base64:null}),{type:"image",cgid:o})}catch(e){DEBUG&&console.warn("Capture screen image error: ",e)}}));return function(){return e.apply(this,arguments)}}()),we=(t.captureAndCutScreenImage=ve,function(){if(O.default.has("screenshot"))return[{id:"captureScreen",label:i.default.string("chat.sendbox.toolbar.captureScreen"),click:function(){ve()}},{id:"hideAndCaptureScreen",label:i.default.string("imageCutter.hideCurrentWindowAndCaptureScreen"),click:function(){ve(!0)}},{type:"separator"},{id:"captureScreenHotSetting",label:i.default.string("imageCutter.setGlobalHotkey"),click:function(){(0,v.executeCommand)("showHotkeySettingDialog",i.default.string("imageCutter.setGlobalHotkey"),(0,a.getUserConfig)().captureScreenHotkey,(function(e){(0,a.getUserConfig)().captureScreenHotkey=e}))}}];throw new Error("The platform(".concat(O.default.type,") not support take screenshots."))});function Oe(e,t){var n,r=void 0===(n=(t=(t="number"==typeof t?{limit:t}:t)||{}).limit)?5:n;if(t=void 0===(n=t.fillRest)||n,!(n=x.default.getChat(e)))return[];for(var o=[],a=new Set,i=n.latestMessageIndexes,l=n.members,u=i.length-1;0<=u;--u){var s=I.default.getMessage(i[u],e,"index");if(s&&!s.isNotification&&(s=s.senderId,!(a.has(s)||0<l.size&&!l.has(s))&&(a.add(s),o.push(s),o.length>=r)))break}if(o.length<r&&t){var c,f=Q(l);try{for(f.s();!(c=f.n()).done;){var d=c.value;if(!a.has(d)&&(a.add(d),o.push(d),o.length>=r))break}}catch(e){f.e(e)}finally{f.f()}}return o}function Se(e,t){return _e.apply(this,arguments)}function _e(){return(_e=$((function*(e,t){function n(){var e=document.getElementById("message-".concat(t));return!!e&&(e.closest(".app-message-list").querySelectorAll(".highlight-focus").forEach((function(e){return e.classList.remove("highlight-focus")})),!!(0,f.scrollIntoView)(e,{behavior:"smooth",block:"center"})&&(setTimeout((function(){e.classList.add("highlight-focus"),setTimeout((function(){e.classList.remove("highlight-focus")}),5e3)}),500),!0))}var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:5;if((0,k.isRoutePathMatch)("chats","*",e)||((0,k.setRoutePath)("chats","recents",e),yield(0,d.default)(1e3)),n())return!0;if(!r)return!1;for(var o=0;o<r;++o){if(!(yield T.default.loadMoreList(e)))return!1;var a=T.default.getList(e).list;if(a[0]<t)return!1;if(a.includes(t))return yield(0,d.default)(600*(o+1)),n()}return!1}))).apply(this,arguments)}function Ce(e,t){return Ee.apply(this,arguments)}function Ee(){return(Ee=$((function*(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:5;if(t=+t,!e){var r=I.default.getMessage(t);if(!r)return!1;e=r.cgid}if(!(yield Se(e,t,n)))return(0,v.executeCommand)("showMessageInDialog",t,e)}))).apply(this,arguments)}t.createCatureScreenContextMenuItems=we,t.createFileServerContextMenuItems=function(e){var t,n=[{id:"sendFileOffLine",label:i.default.string("chat.sendbox.toolbar.file.offline"),click:function(){O.default.access("dialog").showOpenDialog((function(t){t&&t.length&&(t=t[0],(0,l.sendFileMessage)(t,e))}))}}],r=(0,a.getCurrentUser)();return e.isOne2One&&r.isVersionSupport("p2pFileTransfer")&&!(0,a.isCurrentUser)(e.theOtherMemberID)&&n.push({id:"sendFileOnLine",label:i.default.string("chat.sendbox.toolbar.file.online"),click:function(){M.default.getMember(e.theOtherMemberID).isOnline?O.default.access("dialog").showOpenDialog((function(t){t&&t.length&&(t=t[0],(0,l.sendFilesByRTC)([t],e))})):(0,v.executeCommand)("showMessager",i.default.string("chat.sendbox.toolbar.file.online.offlinewarning"),{type:"warning"})}}),r.isVersionSupport("collaboraEditing")&&r.isServerSideIntegrated("collaboraOffice")&&!e.isBot&&n.push({id:"sendCollaboraFile",label:i.default.string("chat.sendbox.toolbar.file.collabora"),click:(t=$((function*(){var t=(0,a.getUserConfig)();if(null==t?void 0:t.get("ui.chat.showCollaboraPrompt")){if(!(yield h.default.confirm(i.default.string("file.collabora.prompt"))))return;t.set("ui.chat.showCollaboraPrompt",!1)}O.default.access("dialog").showOpenDialog(".xls,.xlsx,.doc,.docx",(function(t){t&&t.length&&((t=E.default.create(t[0])).editable=!0,(0,l.sendFileMessage)(t,e))}))})),function(){return t.apply(this,arguments)})}),n},t.chatRenamePrompt=le,t.chatExitConfirm=ue,t.chatDismissConfirm=function(e){return h.default.confirm(i.default.format("chat.group.dismissConfirm",e.name)).then((function(t){return t&&(0,l.dismissChat)(e).then((function(){return Promise.resolve()}))}))},t.createGroupChat=se,t.renameChatCategory=function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"contact",r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(null===r)return h.default.prompt(i.default.string("chats.menu.group.renameTip"),t.title).then((function(r){return e(t,n,r)}));if(r!==t.title){if(t.id){var u="contact"===n,s=x.default.queryChats((function(e){return(u?e.isOne2One:e.isGroupOrSystem)&&"".concat(e.category)==="".concat(t.id)})),c=u?"contactsCategories":"groupsCategories",f=(0,a.getCurrentUser)().config[c];if(0<s.length)return(0,l.setChatCategory)(s,r).then((function(){f[r]||(f[r]=f[t.id]),delete f[t.id],(0,a.getCurrentUser)().config[c]=f}));f[r]||(f[r]=f[t.id]),delete f[t.id],(0,a.getCurrentUser)().config[c]=f,o.default.emit("menu.categories.changed")}(0,a.getCurrentUser)().config["contact"===n?"contactsDefaultCategoryName":"groupsDefaultCategoryName"]=r}},t.onSuggestSendImage=ce,t.emitChatSendboxFocus=fe,t.onChatSendboxFocus=de,t.initImUI=function(){var e;(0,a.onSwapUser)((function(e,t){t&&pe.clear()})),(0,D.onActiveChat)((function(e){var t,n=x.default.getChat(e);if(n)return(t=pe.get(e))?t.active():pe.set(e,new S.default(e)),(n.unreadMessagesCount||n.fileSavedNoticeCount)&&x.default.muteChatUnreadMessages(e),!0})),(0,l.onChatActionChanged)((function(e,t,n){e&&(n&&"join"===t&&e.public?(0,D.setActiveChat)(e.gid):(n&&("dismiss"===t||"hide"===t||"freeze"===t)||!n&&"join"===t)&&(0,D.activeNextChatOnMenu)({lastChatGid:e.gid}))})),o.default.on(he.dismissedChat,(function(e){(0,D.isActiveChat)(e)&&(0,D.activeNextChatOnMenu)({lastChatGid:e})})),(0,C.onFileSaved)((function(e,t){return t=t.cgid,!(0,D.isOpenedActiveChat)(t)&&!!(t=x.default.getChat(t))&&(t.fileSavedNoticeCount++,x.default.store(t),!0)})),(0,b.addContextMenuCreator)("chat.actions",(function(e){var t=e.chat;return e=[],t.isSystem||t.isRobot||t.isArchived||e.push({id:"chat-star",label:i.default.string(t.star?"chat.toolbar.unstar":"chat.toolbar.star"),click:function(){(0,l.toggleChatStar)(t)}}),t.isRobot||t.isArchived||e.push({id:"chat-mute",label:i.default.string(t.mute?"chat.toolbar.cancelMute":"chat.toolbar.mute"),click:function(){(0,l.toggleMuteChat)(t)}}),t.public&&!t.isArchived&&O.default.has("clipboard.writeText")&&e.push({id:"chat-invite-link",label:i.default.string("chat.public.copyInvitation"),click:function(){O.default.call("clipboard.writeText","[".concat(t.name,"](xxc://confirmJoinPublicChat/").concat(t.gid,")"))}}),e}),{apiLevel:5}),(0,b.addContextMenuCreator)("chat.toolbar.more",(function(e){return(0,b.getMenuItemsForContext)("chat.actions",e)}),{apiLevel:5}),(0,b.addContextMenuCreator)("chat.toolbar",(function(e){var t=("string"==typeof(e=e.chat)&&(e=x.default.getChat(e)),[]),n=(0,b.getMenuItemsForContext)("chat.toolbar.more",{chat:e});return n&&n.length&&t.push({id:"chat-more",icon:"sprite-more",label:i.default.string("chat.toolbar.more"),click:function(e){m.default.show({x:e.pageX,y:e.pageY,direction:"bottom-left"},n)}}),t.push({id:"close-chat-page",icon:"mdi-close",label:i.default.string("common.close"),hintPosition:"bottom-left",click:function(e){(0,k.setRoutePath)("chats","recents")}}),t.length&&(t[t.length-1].hintPosition="bottom-left"),t}),{apiLevel:5}),(0,b.addContextMenuCreator)("chat.sendbox.toolbar",(function(e){var t=e.openMessagePreview,n=e.chat;if(!(n="string"==typeof n?x.default.getChat(n):n))return[];e=(0,a.getCurrentUser)();var r,o=(0,a.getUserConfig)(),u=[{id:"emoticon",icon:"sprite-input-emoji",label:i.default.string("chat.sendbox.toolbar.emoticon"),click:function(e){(0,v.executeCommand)("showEmojiPopover",{x:e.pageX,y:e.pageY,target:e.target,placement:"top"},(function(e){e=y.default.emojiList[e.shortname],me(e,{type:"emoji"})}))}}];return e.isVersionSupport("fileServer")&&u.push({id:"image",icon:"sprite-input-image",label:i.default.string("chat.sendbox.toolbar.image"),click:function(){O.default.access("dialog").showOpenDialog({filters:[{name:"Images",extensions:["jpg","jpeg","png","gif","apng","webp"]}]},(function(e){null!=e&&e.length&&me(e[0],{type:"image",cgid:n.gid})}))}}),O.default.has("screenshot")&&o&&u.push({id:"captureScreen",icon:"sprite-input-screenshot",label:"".concat(i.default.string("chat.sendbox.toolbar.captureScreen")," ").concat((0,s.formatKeyDecoration)(o.captureScreenHotkey)||""," (").concat(i.default.string("chat.sendbox.toolbar.moreOptions"),")"),click:function(e){ve(),null!=e&&null!=(e=e.target.closest("button,a"))&&e.blur()},contextMenu:function(e){m.default.show({x:e.pageX,y:e.pageY},we()),e.preventDefault()}}),(0,b.tryAddDividerItem)(u),e.isVersionSupport("fileServer")&&u.push({id:"file",icon:"sprite-input-file",label:i.default.string("chat.sendbox.toolbar.file"),click:function(){O.default.access("dialog").showOpenDialog(null,(function(e){e&&e.length&&(0,l.sendFileMessage)(e[0],x.default.getChat(n.gid))}))}}),w.default.ui["chat.sendCode.enable"]&&u.push({id:"code",icon:"sprite-input-code",label:i.default.string("chat.sendbox.toolbar.code"),click:function(){(0,v.executeCommandLine)("showChatSendCodeDialog/".concat(n.gid))}}),w.default.ui["chat.sendMarkdown"]&&(r=o&&o.sendMarkdown,u.push({id:"markdown",icon:r?"sprite-input-markdown-sel":"sprite-input-markdown-unsel",label:i.default.string(r?"chat.sendbox.toolbar.markdown.enabled":"chat.sendbox.toolbar.markdown.disabled")+(r?" (".concat(i.default.string("chat.sendbox.toolbar.moreOptions"),")"):""),click:function(){o.sendMarkdown=!o.sendMarkdown},contextMenu:r?function(e){var n=[{label:i.default.string("chat.sendbox.toolbar.previewDraft"),click:t,icon:"mdi-file-find",disabled:!t}],r=w.default.ui["markdown.hintUrl"];r&&n.push({icon:"sprite-input-help",label:i.default.string("chat.sendbox.toolbar.markdownGuide"),url:O.default.isType("browser")?r:"!openUrlInDialog/".concat(encodeURIComponent(r),"/?size=lg&insertCss=").concat(encodeURIComponent(".wikistyle>p:first-child{display:none!important}"))}),(0,v.executeCommand)("contextMenu",{x:e.pageX,y:e.pageY,target:e.target,placement:"top"},n),e.preventDefault()}:null})),w.default.ui["chat.simpleChatView"]||u.push({id:"setFontSize",icon:"mdi-format-size",label:i.default.string("chat.sendbox.toolbar.setFontSize"),click:function(e){(0,v.executeCommand)("showChangeFontPopover",{x:e.pageX,y:e.pageY,target:e.target,placement:"top"})}}),o&&o.showMessageTip&&!w.default.ui["chat.hideMessageTipPopover"]&&u.push({id:"tips",icon:"sprite-input-help",label:i.default.string("chat.sendbox.toolbar.tips"),click:function(e){(0,v.executeCommand)("showChatTipPopover",{x:e.pageX,y:e.pageY,target:e.target,placement:"top"})}}),n.isGroupOrSystem&&n.isAdmin(e)&&e.permissions.includes("im/messagesend/bulletin")&&((0,b.tryAddDividerItem)(u),r=o&&o.getChatBulletinSetting(n.gid),u.push({id:"bulletin",icon:"mdi-bullhorn",label:i.default.string("chat.sendbox.toolbar.bulletin"),className:r?"pill warning-pale text-warning":"",content:r?"".concat(i.default.string("chat.bulletin.type.".concat(r.type))," ").concat(r.duration," ").concat(i.default.string("common.time.".concat(r.unit))):null,click:function(){(0,v.executeCommand)("showChatBulletinSettingDialog",n)}})),u}),{apiLevel:5}),(0,b.addContextMenuCreator)("chat.sendbox.sendButton",(function(){var e=(0,s.formatKeyDecoration)((0,a.getUserConfig)().sendMessageHotkey),t=!1,n=[{label:i.default.string("chat.sendbox.changeHotkeyTip"),disabled:!0}];return w.default.ui["hotkey.sendMessageOptions"].forEach((function(r){r=(0,s.formatKeyDecoration)(r),e===r&&(t=!0),n.push({label:r,click:function(){(0,a.getUserConfig)().sendMessageHotkey=r},checked:e===r})})),t||n.push({label:e,checked:!0}),n}),{apiLevel:5}),(0,b.addContextMenuCreator)("chat.menu",(function(e){if("string"==typeof(t=e.chat)){var t,n=t;if(!(t=x.default.getChat(n))||t.isNotInGroup)return[{id:"joinPublicGroup",label:i.default.string("chat.create.join"),href:"xxc://confirmJoinPublicChat/".concat(n)}];e.chat=t}n=void 0===(n=e.menuType)?null:n;var r=void 0===(r=e.viewType)?null:r,o=[];return t.isOne2One&&(o.push.apply(o,G((0,b.getMenuItemsForContext)("member",{member:t.theOtherMemberID}))),(0,b.tryAddDividerItem)(o)),o.push.apply(o,G((0,b.getMenuItemsForContext)("chat.actions",e))),t.isDismissed||t.isRobot||t.isArchived||("category"!==r||"contacts"!==n&&"groups"!==n||o.push({id:"chat-category",label:i.default.string("chats.menu.group.add"),click:function(){(0,v.executeCommand)("showChatAddCategoryDialog",t)}}),t.hidden&&o.push({id:"chat-hide",label:i.default.string("chat.toolbar.cancelHide"),click:function(){(0,l.toggleHideChat)(t,!1)}}),"recents"===n&&o.push({label:i.default.string("chat.toolbar.freeze"),click:function(){(0,l.toggleFreezeChat)(t)}})),DEBUG&&O.default.has("clipboard.writeText")&&((0,b.tryAddDividerItem)(o),o.push({id:"chat-copy-gid",label:i.default.string("chat.copyChatGID"),click:function(){O.default.call("clipboard.writeText",t.gid)}})),(0,b.tryRemoveLastDivider)(o)}),{apiLevel:5}),(0,b.addContextMenuCreator)("chat.pinned",(function(e){var t=e.chat,n=e.message;return[{id:"message-view",label:i.default.string("common.viewDetail"),url:"xxc://showChatMessage/".concat(t.gid,"/").concat(n.id)},t.isAdmin((0,a.getCurrentUser)())&&{id:"pinned-unpin",label:i.default.string("chat.message.unpin"),click:function(){return(0,l.unpinMessage)(t,n.id)}}]})),(0,b.addContextMenuCreator)("chat.member",(function(e){var t=e.member,n=(e=e.chat,[]),r=(n.push.apply(n,G((0,b.getMenuItemsForContext)("member",{member:t}))),(0,b.tryAddDividerItem)(n),(0,a.getCurrentUser)());return t.id!==r.id&&e.isGroupOrSystem&&(r=t.cgid,n.push({id:"member-mention",label:i.default.string("chat.atHim.".concat(t.gender),i.default.string("chat.atHim")),url:"xxc://mentionMemberInSendbox/".concat(encodeURIComponent("#".concat(t.id)))}),w.default.ui["chat.denyChatFromMemberProfile"]||n.push({id:"chat-active",label:i.default.string("chat.sendMessage"),url:"#/chats/recents/".concat(r)})),n}),{apiLevel:5}),(0,b.addContextMenuCreator)("message.basic",(function(e){var t,n,r,o=e.message;if(e.startMultiSelection,o)return t=x.default.getChat(o.cgid),n=M.default.getMember(o.senderId),e=[],(r=(0,a.getCurrentUser)()).permissions.includes("im/messagesend/reply")&&e.push({id:"message-reply",label:i.default.string("chat.message.reply"),icon:"reply-outline",click:function(){r.config.setChatReplyTo(o.cgid,o.id),o.senderId!==r.id?ye(n,{cgid:o.cgid}):me("",{cgid:o.cgid}),(0,k.isRoutePathMatch)("chats","*",o.cgid)||(0,k.setRoutePath)("chats","recents",o.cgid),(0,p.displayHide)(null,(function(){}),!0)}}),o.canDelete((0,a.getCurrentUser)())&&e.push({id:"message-retract",label:i.default.string("chat.message.retract"),icon:"undo-variant",click:function(){return(0,l.deleteChatMessage)(o)}}),o.canPin()&&t.isAdmin(r)&&r.permissions.includes("im/chatpinmessages")&&(t.isPinnedMessage(o.id)?e.push({id:"message-unpin",label:i.default.string("chat.message.unpin"),icon:"pin-off",click:function(){return(0,l.unpinMessage)(t,o.id)}}):e.push({id:"message-pin",label:i.default.string("chat.message.pin"),icon:"pin",click:function(){return(0,l.pinMessage)(t,o.id)}})),e}),{apiLevel:5}),(0,b.addContextMenuCreator)("message.text",(function(e){var t=e.message;return e=[],O.default.has("clipboard.writeText")&&(e.push({id:"message-copy",icon:"mdi-content-copy",label:i.default.string("chat.message.copy"),click:function(){var e=t.isPlainTextContent?t.content:null,n=t.content,r=(null!==e||(r=document.getElementById("message-".concat(t.id)).querySelector(".app-message-content"))&&(e=r.innerHTML,n=r.innerText),void 0===e&&(e=(0,j.renderChatMessageContent)(t)),e=(0,u.restoreMessageContainAt)(e),n=(0,u.restoreMessageContainAt)(n),O.default.access("clipboard"));r.write?r.write({text:t.isPlainTextContent?e:(0,f.strip)(e),html:e}):r.writeHTML?r.writeHTML(e):r.writeText&&r.writeText(n)}}),t.isPlainTextContent||e.push({id:"message-copy-md",icon:"mdi-markdown",label:i.default.string("chat.message.copyMarkdown"),click:function(){O.default.call("clipboard.writeText",(0,u.restoreMessageContainAt)(t.content))}})),w.default.ui["todo.enable"]&&!w.default.ui["chat.simpleChatView"]&&"zdoo"===(0,a.getCurrentUser)().backendType&&(e.length&&e.push("divider"),e.push({id:"message-todo",label:i.default.string("todo.create"),icon:"mdi-calendar-check",click:function(e,n,r){(0,v.executeCommand)("showTodoEditDialog",(0,g.createTodoFromMessage)(t)),r.preventDefault()}})),e}),{apiLevel:5}),(0,b.addContextMenuCreator)("message.code",(function(e){var t=e.message;return O.default.has("clipboard.writeText")?[{id:"message-copy",icon:"mdi-content-copy",label:i.default.string("common.copyCode"),click:function(){var e=(0,y.decodeEmojiMessage)(t.codeContent.code),n=O.default.access("clipboard");n.write?n.write({text:e}):n.writeText&&n.writeText(e)}},{id:"message-copy-md",icon:"mdi-markdown",label:i.default.string("chat.message.copyMarkdown"),click:function(){var e=t.codeContent,n=(e=["```".concat(e.lang||"").concat(e.name?":".concat(e.name):""),(0,y.decodeEmojiMessage)(e.code),"```"].join("\n"),O.default.access("clipboard"));n.write?n.write({text:e}):n.writeText&&n.writeText(e)}}]:[]}),{apiLevel:5}),(0,b.addContextMenuCreator)("message.image",(function(e){var t=e.message;if(!(n=e.event.target.closest("img")))return[];var n,r=t.imageContent,o=R.default.getMessageFile(t);return(n=null!=(n=n.getAttribute("src"))?n:o.viewUrl).startsWith("file://")&&(n=n.substr(7).split("?")[0]),G((0,b.getMenuItemsForContext)("image",Y(Y({},e),{},{url:n,dataType:r.type,image:r,file:o,options:{messageID:t.id}})))}),{apiLevel:5}),(0,b.addContextMenuCreator)("message.url",(function(e){var t=e.url,n=e.card;return e=e.event,t=G((0,b.getMenuItemsForContext)("link",{url:t,event:e})),null!=n&&n.webviewContent?(n=(e=n.content).originSrc,t.push("divider"),t.push({id:"open-app",label:i.default.string("ext.app.open"),url:"!openUrlInDialog/".concat(encodeURIComponent(n||e.src),"/?size=lg&insertCss=").concat(encodeURIComponent(e.insertCss)),icon:"mdi-open-in-app"}),DEBUG&&"iframe"!==e.type&&t.push({label:i.default.string("ext.app.openDevTools"),icon:"mdi-auto-fix",click:function(){var e;null!=(e=F.webview)&&null!=(e=e.webview)&&e.openDevTools?F.webview.webview.openDevTools():DEBUG&&console.warn("Cannot open dev tools for current webview.")}}),t):t}),{apiLevel:5}),(0,b.addContextMenuCreator)("message.file",(function(e){var t=e.message;return e=J(e,z),t=R.default.getMessageFile(t),(0,b.getMenuItemsForContext)("file",Y({file:t},e))}),{apiLevel:5}),(0,b.addContextMenuCreator)("message",(function(e){var t,n;if(!(n="number"==typeof(n=void 0===(n=e.message)?e.params[0]:n)?I.default.getMessage(n):n))return[];function r(t){return t=G(t),(0,b.tryAddDividerItem)(t),t.push.apply(t,G((0,b.getMenuItemsForContext)("message.basic",e))),t}return(e.message=n).isCodeContent?r((0,b.getMenuItemsForContext)("message.code",e)):n.isFileContent?r((0,b.getMenuItemsForContext)("message.file",e)):n.isEmotionContent&&null!=(t=n.emotionContent)&&t.content?r((0,b.getMenuItemsForContext)("emoji",Y(Y({},e),{},{emoji:y.default.shortnameToUnicode(n.emotionContent.content)}))):n.isImageContent?r((0,b.getMenuItemsForContext)("message.image",e)):n.isTextContent?r((0,b.getMenuItemsForContext)("message.text",e)):n.isUrlObject?r((0,b.getMenuItemsForContext)("message.url",e)):G((0,b.getMenuItemsForContext)("message.basic",e))}),{apiLevel:5}),(0,v.registerCommand)("sendContentToChat",(function(e,t){e=void 0===(e=e.options)?{}:e,me(t||e.content,e)}),null,{apiLevel:2}),(0,v.registerCommand)("sendContentToServerBySendbox",(function(e,t){(e=void 0===(e=e.options)?{}:e).send=!0,e.clear=!0,me(t||e.content,e)}),null,{apiLevel:7}),(0,v.registerCommand)("mentionMemberInSendbox",(function(e,t,n){e=void 0===(e=e.options)?{}:e,ye(t||e.content,n||e.cgid)}),null,{apiLevel:2}),(0,v.registerCommand)("confirmJoinPublicChat",function(){var e=$((function*(e,t){var n=x.default.getChat(t);if(n&&!n.isDeleted)(0,D.setActiveChat)(t);else{if(null!=n&&n.isArchived)return h.default.alert(i.default.string("chats.cannotJoinArchivedChat"));if(!(n=yield x.default.fetchPublicChat(t)))return h.default.alert(i.default.string("chats.joinedChatNotFound"));try{(yield h.default.confirm(i.default.format("chats.confirmToJoinPublicChat",n.name)))&&(yield(0,l.joinOrExitChat)(n),(0,D.setActiveChat)(t))}catch(e){h.default.alert(i.default.error(e))}}}));return function(t,n){return e.apply(this,arguments)}}(),null,{apiLevel:4}),(0,v.registerCommand)("showMessageInList",(function(e,t,n,r){return Se(t,n,r)}),null,{apiLevel:4}),(0,v.registerCommand)("showChatMessage",(function(e,t,n,r){return Ce(t,n,r)}),null,{apiLevel:4}),O.default.has("screenshot")&&(0,v.registerCommand)("shortcut.captureScreenHotkey",(function(){ve(!1,!1,!1)}),null,{apiLevel:2}),O.default.has("clipboard.getNewImage")&&(0,v.registerCommand)("suggestClipboardImage",(function(){var e;!(0,a.getUserConfig)().listenClipboardImage||(e=O.default.call("clipboard.getNewImage"))&&o.default.emit(he.suggestSendImage,e)})),(0,v.registerCommand)("sendFileBroadcastChatMessage",(function(e,t,n,r,o,a){(0,l.sendFileBroadcastChatMessage)(t,n,r,o,a)}),null,{apiLevel:2}),n.g.ExtsRuntime&&(0,n.g.ExtsRuntime.registerExtensionAPI)({name:"im.sendContentToChatSendbox",level:2,func:function(e,t){return me(e,t)}}),PERF&&(0,c.setPerfCommandHandlers)({openTestChats:(e=$((function*(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"perf test.",r=function(e){return new Promise((function(t){return setTimeout(t,e)}))},o=function(){var e=$((function*(e){console.log("Chat open",e);try{var t;PERF_MARK("activeChatBegin_".concat(e.gid)),(0,D.setActiveChat)(e.gid),yield r(500),n&&(yield r(1500),me(n,{cgid:e.gid}),yield r(500),(t=document.querySelector("#chat-view-".concat(e.gid.replace("&","_")," .app-chat-sendbox-send-btn")))&&t.click())}catch(t){console.log("Chat open error for chat",e),console.error(t)}}));return function(t){return e.apply(this,arguments)}}(),a=x.default.queryChats((function(e){return!t||e.type===t}),{sortRules:"recentFirst",limit:e}),i=(e=Math.min(a.length,e),0);i<e;++i)yield o(a[i]);return e})),function(){return e.apply(this,arguments)})})},ge={setActiveChat:D.setActiveChat,isActiveChat:D.isActiveChat,getActiveChatGid:D.getActiveChatGid,getActivatedCacheChatsGID:oe,chatExitConfirm:ue,chatRenamePrompt:le,createGroupChat:se,sendContentToChat:me,mentionMemberInSendbox:ye,onSendContentToChat:ie,onSuggestSendImage:ce,sendMessageToChat:ae,emitChatSendboxFocus:fe,onChatSendboxFocus:de,isChatsCacheChanged:te,setChatCacheState:ne,takeOutChatCacheState:re},t.default=ge,DEBUG&&(n.g.$getActivatedCacheChatsGID=oe,n.g.$activeCaches=pe)},82717:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initIM=void 0;var r=n(29946),o=n(15998);t.initIM=function(){(0,o.initImUI)(),(0,r.initIMNotice)()}},62411:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationMessage=void 0,t.createNotificationMessage=m;var o,a=(o=n(74160))&&o.__esModule?o:{default:o},i=n(58851),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=u(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(92691));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function s(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var h=function(e){var t=i;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e);var o=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=d(e);if(n=t?(n=d(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==o)return o;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(i);function i(){var e=this,t=i;if(e instanceof t)return o.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=i,(e=[{key:"sender",get:function(){var e,t;return this._sender||(e=this.notification.sender,n.g.ExtsRuntime&&n.g.ExtsRuntime.getNotificationSender&&(t=n.g.ExtsRuntime.getNotificationSender(e))&&(t.system=!0,e=t),e.system||"ranzhi"!==e.id&&"zdoo"!==e.id?e.name&&!e.realname&&(e.realname=e.name):e={id:"ranzhi",realname:"",system:!0,avatar:"".concat(a.default.media["image.path"],"ranzhi-icon.png")},(e="number"==typeof e?{id:"".concat(e),realname:"".concat(e),system:!1}:e).displayName||(e.displayName=e.realname||e.name||e.id),e.id?"string"!=typeof e.id&&(e.id="".concat(e.id)):e.id="",this._sender=e),this._sender}},{key:"senderName",get:function(){var e=this.sender;return e?e.displayName:this.senderId}},{key:"senderId",get:function(){return this.notification.sender.id||"robot1"}},{key:"isNotification",get:function(){return!0}},{key:"actions",get:function(){var e=this.notification.actions;return e&&!Array.isArray(e)?[e]:e}},{key:"notification",get:function(){return this.data}},{key:"getSender",value:function(){return this.sender}},{key:"isInLocal",get:function(){return!1}},{key:"isSendFailed",get:function(){return!1}},{key:"title",get:function(){return this.notification.title}},{key:"summaryText",get:function(){return"".concat(this.sender.displayName,": ").concat(this.title||this.content)}},{key:"subtitle",get:function(){return this.notification.subtitle}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),i}(l.default);function m(e){var t;return"number"==typeof(null==(t=e.data)?void 0:t.index)&&delete e.data.index,e instanceof h?e:(e.type===l.TYPES.notification&&"object"===e.contentType&&e.content?e=c(c(c({},e),"string"==typeof e.content?JSON.parse(e.content):e.content),{},{data:null}):e.data&&(e=c(c(c({},e),"string"==typeof e.data?JSON.parse(e.data):e.data),{},{data:null})),"string"==typeof e&&(e=JSON.parse(e)),new h({cgid:e.cgid||i.NOTIFICATION_CHAT_GID,content:e.content,contentType:e.contentType,data:e,date:e.date,gid:e.gid,user:e.sender.id,type:l.TYPES.notification,id:e.id,index:e.index}))}p(t.NotificationMessage=h,"create",m)},61862:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMediaPath=t.getLangDisplayName=t.getAllLangList=t.describeDateFromNow=t.default=void 0,t.getShortTextOfDate=k,t.onLangChange=t.loadLanguage=t.isSupportMultiLanguages=t.isJustLangSwitched=t.initLang=t.getStringFromObject=void 0;var r=f(n(44575)),o=f(n(94128)),a=n(81595),i=f(n(19791)),l=f(n(65286)),u=f(n(74160)),s=n(7066),c=n(64393);function f(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function y(e){return l.default.on(S,e)}function g(){return C.ALL||[{name:"zh-cn",label:""}]}function b(){return 1<g().length}function v(){return E}function w(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:_.name,t=g().find((function(t){return t.name===e}));return t&&t.label}function O(e,t){e=(0,s.createDate)(e);var n=((t=t?(0,s.createDate)(t):new Date).getTime()-e.getTime())/6e4;return n<-2e7?(console.warn("Cannot describe such date: ",e),O(e.getTime()/1e3,t)):n<2?_.string("time.justNow"):n<60?_.format("time.minuteAgo",Math.floor(n)):(0,s.isToday)(e,t)?(0,s.formatDate)(e,"hh:mm"):(0,s.isYesterday)(e,t)?_.string("time.yesterday"):(0,s.isDBY)(e,t)?_.string("time.dby")||(0,s.formatDate)(e,_.string("time.format.month")):(0,s.isSameYear)(e,t)||t.getTime()-e.getTime()<=31*s.TIME_DAY?(0,s.formatDate)(e,_.string("time.format.month")):(0,s.formatDate)(e,_.string("time.format.yearMonth"))}var S="lang.change",_=new i.default,C=null,E=!1,P=(t.onLangChange=y,t.getAllLangList=g,t.isSupportMultiLanguages=b,t.isJustLangSwitched=v,t.getLangDisplayName=w,function(){e=function*(e){var t,n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return e?(e!==_.name&&(t=yield function(e){return"zh-cn"===e?Promise.resolve():(e=e||o.default.call("language.getPlatformLangName",u.default.lang),(e=o.default.call("language.loadLangData",e,u.default.system.langFilePathFormat))instanceof Promise?e:Promise.resolve(e))}(e),E=!0,setTimeout((function(){E=!1}),500),t=h(h(h({},r.default),t),null!=(t=null==(t=C)?void 0:t[e])?t:{}),_.change(e,t),(0,a.setStoreItem)("LANG_NAME",e),l.default.emit(S,_),n&&o.default.call("language.handleLangChange",e,t)),Promise.resolve()):Promise.reject(new Error("Must provide the langName."))};var e,t=function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){m(a,r,o,i,l,"next",e)}function l(e){m(a,r,o,i,l,"throw",e)}i(void 0)}))};return function(e){return t.apply(this,arguments)}}());function k(e,t){return e=(0,s.createDate)(e),t=t?(0,s.createDate)(t):new Date,(0,s.isToday)(e,t)?(0,s.formatDate)(e,"hh:mm"):(0,s.isYesterday)(e,t)?(0,s.formatDate)(e,"".concat(_.string("time.yesterday")," hh:mm")):(0,s.isSameYear)(e,t)?(0,s.formatDate)(e,"MM-dd hh:mm"):(0,s.formatDate)(e,"yyyy-MM-dd hh:mm")}function j(e,t){var n;return"object"===d(e)?null!=(n=n=void 0===(n=e[_.name])&&void 0===(n=void 0===(n=e.default)?e[e.defaultLang]:n)?e[Object.keys(e)[0]]:n)?n:t:null!=e?e:t}function x(e){return u.default.media["image.path.".concat(_.name,".").concat(e)]||u.default.media["image.path.".concat(e)]||"".concat(u.default.media["image.path"]).concat(e,".png")}t.loadLanguage=P,t.initLang=function(e){return C=h(h({},u.default.lang),e),e=null!=(e=(0,c.getSearchParam)("lang"))?e:"zh-cn",P(e)},t.describeDateFromNow=O,t.getStringFromObject=j,t.getMediaPath=x,Object.assign(_,{onLangChange:y,isJustLangSwitched:v,getAllLangList:g,getLangDisplayName:w,describeDateFromNow:O,isSupportMultiLanguages:b,getMediaPath:x,getStringFromObject:j,getShortTextOfDate:k}),DEBUG&&(n.g.$lang=_),n.g.ExtsRuntime&&(n.g.ExtsRuntime.registerExtensionAPI({name:"lang",moduleName:"lang",type:"lib",data:_,level:7,libExportAll:!0}),n.g.ExtsRuntime.registerExtensionAPI({name:"env.lang",type:"data",dataType:"langName: string",func:function(){return _.name},level:5})),i=_,t.default=i},15142:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setLocalConfig=t.removeLocalConfig=t.getLocalConfig=t.getAllLocalConfig=void 0;var r=n(81595);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){return(0,r.getStoreItem)(l,{})}function i(e){(0,r.setStoreItem)(l,e)}var l="LOCAL_SETTINGS";t.getLocalConfig=function(e){return(0,r.getStoreItem)(l,{})[e]||void 0},t.getAllLocalConfig=a,t.setLocalConfig=function(e,t){var n=a();"object"===o(e)?Object.assign(n,e):n[e]=t,i(n)},t.removeLocalConfig=function(e){var t=a();Object.keys(t).includes(e)&&(delete t[e],i(t))}},26774:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deptsSorter=t.deptsDeepSort=t.default=t.DeptsStore=void 0;var r=n(84401),o=n(15973),a=(i=n(24260))&&i.__esModule?i:{default:i},i=n(33594);function l(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){l(a,r,o,i,u,"next",e)}function u(e){l(a,r,o,i,u,"throw",e)}i(void 0)}))}}function s(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){var n=(e.order||0)-(t.order||0);return 0===n||Number.isNaN(n)?e.id-t.id:n}function h(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.children&&(r.children=h(r.children))}}catch(e){n.e(e)}finally{n.f()}return e.sort(p)}t.deptsSorter=p,t.deptsDeepSort=h;var m=Symbol("depts"),y=Symbol("roles");function g(e,t){t=t||new Map;for(var n=[],r=0,o=Object.keys(e);r<o.length;r++){var a,i=o[r];i&&((a=c({},e[i])).id=Number.parseInt(i,10),0===a.parent&&delete a.parent,t.set(a.id,a),n.push(a))}for(var l=0,u=n;l<u.length;l++){var s=u[l],f=s.parent&&t.get(s.parent);if(f){var d=new Set;for(f.children||(f.children=[]),f.children.push(s);f;)d.add(f.id),f=f.parent&&t.get(f.parent);s.parentsSet=d}}}var b=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this._identify=t,this._deptsDataStatus=!1,this._fetchCallbacks=[],this._depts=new Map,this._deptsTree=null,this._roles=new Map,this._channel=new r.EventChannel}var t,n,i,l,s,c;return t=e,(n=[{key:"isUpdatedData",get:function(){return"updated"===this._deptsDataStatus}},{key:"needUpdateData",get:function(){return"updated"!==this._deptsDataStatus}},{key:"reset",value:function(e){var t=this._identify!==e;if(t){this._identify=e,this._roles.clear(),this._depts.clear();var n=(r=(this._deptsTree=null,o.getCurrentUser)()).rolesCache,r=r.deptsCache;if(n)for(var a=0,i=Object.keys(n);a<i.length;a++){var l=i[a];this._roles.set(l,n[l])}if(r&&g(r,this._depts),this._deptsDataStatus=n||r?"expired":"none",this._fetchCallbacks.length){var u,s=f(this._fetchCallbacks);try{for(s.s();!(u=s.n()).done;)u.value.reject()}catch(e){s.e(e)}finally{s.f()}this._fetchCallbacks.length=0}DEBUG_I&&(console.collapse("STORE.Deps","pinkBg","load from expired","pinkPale"),console.log("rolesCache",n),console.log("deptsCache",r),console.log("store",this),console.groupEnd())}else this._deptsDataStatus="expired";DEBUG_I&&(console.collapse("STORE.Deps","pinkBg","reset","pinkPale",t,""),console.log("identify",e),console.groupEnd())}},{key:"updateDeptsData",value:function(e){if(e.roles){this._roles.clear();for(var t=0,n=Object.keys(e.roles);t<n.length;t++){var r=n[t];this._roles.set(r,e.roles[r])}this._channel.publish(y,this._roles)}e.depts&&(this._depts.clear(),g(e.depts,this._depts),this._deptsTree=null,this._channel.publish(m,this._depts));var a=(0,o.getCurrentUser)();a.rolesCache=e.roles,a.deptsCache=e.depts,a.save()}},{key:"fetchDeptsDataFromRemote",value:(c=u((function*(){var e=this;if(this._fetchingIdentify===this._identify)return new Promise((function(t,n){e._fetchCallbacks.push({resolve:t,reject:n})}));var t=null;try{if(this._fetchingIdentify=this._identify,t=yield a.default.sendAndListen("sysgetdepts"),this._fetchingIdentify!==this._identify)return!1;if(t&&this.updateDeptsData(t),this._deptsDataStatus="updated",this._fetchCallbacks.length){var n,r=f(this._fetchCallbacks);try{for(r.s();!(n=r.n()).done;)n.value.resolve()}catch(t){r.e(t)}finally{r.f()}}DEBUG_I&&(console.collapse("STORE.Deps","pinkBg","fetch from remote","pinkPale"),console.log("data",t),console.log("store",this),console.groupEnd())}catch(t){if(this._fetchCallbacks.length){var o,i=f(this._fetchCallbacks);try{for(i.s();!(o=i.n()).done;)o.value.reject()}catch(t){i.e(t)}finally{i.f()}}DEBUG&&(console.collapse("STORE.Deps","pinkBg","fetch from remote error","redPale",t.toString(),"red"),console.error("error",t),console.log("store",this),console.groupEnd())}return this._fetchCallbacks.length=0,this._fetchingIdentify=null,t})),function(){return c.apply(this,arguments)})},{key:"tryFetchDeptsDataFromRemote",value:(s=u((function*(){this.needUpdateData&&(yield this.fetchDeptsDataFromRemote())})),function(){return s.apply(this,arguments)})},{key:"getRoleName",value:function(e){return this.tryFetchDeptsDataFromRemote(),this._roles.get(e)}},{key:"getDept",value:function(e){return"number"!=typeof e&&(e=Number.parseInt(e,10)),this.tryFetchDeptsDataFromRemote(),this._depts.get(e)}},{key:"getDeptName",value:function(e){return(e=this.getDept(e))?e.name:""}},{key:"hasDepts",value:function(){return!!this._depts.size}},{key:"getDeptsTree",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this.tryFetchDeptsDataFromRemote(),this._depts.size?e?(e=this.getDept(e))?e.children:null:(this._deptsTree||(this._deptsTree=h(Array.from(this._depts.values()).filter((function(e){return!e.parentsSet||!e.parentsSet.size})))),this._deptsTree):[]}},{key:"fetchDeptsTree",value:(l=u((function*(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return yield this.tryFetchDeptsDataFromRemote(),this.getDeptsTree(e)})),function(){return l.apply(this,arguments)})},{key:"fetchMembersListOfDept",value:(i=u((function*(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{page:1,recPerPage:50},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],r=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return r=yield a.default.sendAndListen({method:"usergetlistbydept",params:(0,o.getCurrentUser)().isVersionSupport("userGetListByDeptOnlySelf")?[e,{pageID:t.page||t.pageID,recPerPage:t.recPerPage},"",n,r]:[e,{pageID:t.page||t.pageID,recPerPage:t.recPerPage},"",n]},!0),DEBUG_I&&(console.collapse("STORE.Deps","pinkBg","fetch dept members from remote","pinkPale",e,""),console.log("data",r.data),console.log("pager",r.pager),console.log("store",this),console.groupEnd()),r&&r.isSuccess?{data:r.data,pager:r.pager}:(DEBUG_W&&console.error('Cannot get member list of dept "'.concat(e,'"')),null)})),function(e){return i.apply(this,arguments)})},{key:"unsubscribe",value:function(e){return this._channel.unsubscribe(e)}},{key:"subscribeDeptsChange",value:function(e){return this._channel.subscribe(m,e)}},{key:"subscribeDeptChange",value:function(e,t){var n=this;return this.subscribeDeptsChange((function(){return t(n.getDept(e))}))}},{key:"subscribeRolesChange",value:function(e){return this._channel.subscribe(y,e)}},{key:"subscribeRoleChange",value:function(e,t){var n=this;return this.subscribeRolesChange((function(){return t(n.getRoleName(e))}))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();b=new(t.DeptsStore=b),(0,i.setCallbackOnInitedDatabase)(b.reset.bind(b)),n.g.ExtsRuntime&&n.g.ExtsRuntime.registerExtensionAPI([{name:"members.getRoleName",level:3,func:b.getRoleName.bind(b)},{name:"members.fetchDeptsTree",level:3,func:b.fetchDeptsTree.bind(b)},{name:"members.getDeptsTree",level:3,func:b.getDeptsTree.bind(b)},{name:"members.getDept",level:3,func:b.getDept.bind(b)}]),DEBUG_I&&(n.g.$deptsStore=b),t.default=b},41832:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onMemberLogout=t.emitMemberLogout=void 0;var r,o=(n=n(65286))&&n.__esModule?n:{default:n};(r=r||{}).logout="member.logout",t.onMemberLogout=function(e){return o.default.on(r.logout,e)},t.emitMemberLogout=function(e){return o.default.emit(r.logout,e)}},83981:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMemberAvatar=function(e){if("object"===l(e)&&null!==e&&(e=e.avatar),!e)return null;if(e.startsWith("$"))return e.substr(1);if(!/^(http?:|https?:|file:|data:|mdi-|icon-)/.test(e)){var t=(0,o.getCurrentUser)();if(t)return"".concat(t.serverUrlRoot).concat(e)}return e},t.sortMembers=void 0;var r=n(75738),o=n(15973);function a(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.sortMembers=function(e,t){if(e.length<2)return e;if("function"==typeof t)return e.sort(t);t&&"default"!==t&&!0!==t?"string"==typeof t&&(t=t.split(" ")):t=["me","status","realname","-id"];var n=!1,i=("-"!==t[0]&&-1!==t[0]||(n=!0,t.shift()),(0,o.getCurrentUserID)());return e.sort((function(e,o){var l,u=0,s=a(t);try{for(s.s();!(l=s.n()).done;){var c=l.value;if(0!==u)break;if("function"==typeof c)u=c(e,o);else{var f="-"===c[0],d=(f&&(c=c.substr(1)),o.status),p=e.status,h=void 0,m=void 0;switch(c){case"me":i===o.id?u=1:i===e.id&&(u=-1);break;case"realname":o.realname&&e.realname&&(u=o.realname.localeCompare(e.realname));break;case"status":d===r.STATUS.online&&(d=100),u=(p=p===r.STATUS.online?100:p)<d?1:d===p?0:-1;break;default:h=o[c],u=(m=null==(m=e[c])?0:m)<(h=null==h?0:h)?1:h===m?0:-1}u*=f?-1:1}}}catch(e){s.e(e)}finally{s.f()}return u*(n?-1:1)}))}},75738:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.STATUS=void 0;var o=d(n(27945)),a=d(n(6511)),i=d(n(52324)),l=d(n(60811)),u=n(71782),s=d(n(61862)),c=n(48389),f=n(16986);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=y(e);if(n=t?(n=y(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return m(o)}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){var r=e;if(t.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object");t.set(e,n)}function b(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function v(e,t,n){if((t=O(e,t,"set")).set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function w(e,t){return(t=O(e,t,"get")).get?t.get.call(e):t.value}function O(e,t,n){if(t.has(e))return t.get(e);throw new TypeError("attempted to "+n+" private field on non-instance")}var S=[{name:"namePinyin",equal:100,include:50},{name:"displayName",equal:100,include:50},{name:"account",equal:100,include:50},{name:"email",equal:70,include:30},{name:"phone",equal:70,include:30},{name:"site",equal:50,include:25}],_=new l.default({unverified:0,disconnect:1,offline:1,logged:2,online:3,busy:4,away:5,meeting:6},0,null,{isOnline:function(){return 2<=this.value}}),C=((t.STATUS=_).isOffline=function(e){return _.isLessOrSame(e,_.offline)},_.isOnline=function(e){return _.isGreaterOrSame(e,_.logged)},new a.default({id:{type:"int",indexed:!0,primaryKey:!0},account:{type:"string",unique:!0},email:{type:"string",indexed:!0},phone:{type:"string",indexed:!0},mobile:{type:"string",indexed:!0},realname:{type:"string",indexed:!0},realnames:{type:"json"},site:{type:"string"},avatar:{type:"string"},role:{type:"string"},gender:{type:"string"},dept:{type:"int",indexed:!0},admin:{type:"string",indexed:!0},deleted:{type:"boolean"},weixin:{type:"string"},qq:{type:"string"},address:{type:"string"}})),E=(l=(0,c.createProxyPropertiesMap)([{name:"gid",deleted:!0},"account","email","phone","mobile","realname","site","avatar","role","gender","dept","admin","deleted","displayName","namePinyin","weixin","qq","address"],o.default.PROXY_PROPERTIES),(0,c.createProxyHandler)(l)),P=new WeakMap,k=new WeakMap,j=new WeakMap;a=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e);var n=h(r);function r(e){var t=this,o=r;if(t instanceof o)return b(m(t=n.call(this,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Member")),"statusKeeper",void 0),g(m(t),P,{writable:!0,value:void 0}),g(m(t),k,{writable:!0,value:void 0}),g(m(t),j,{writable:!0,value:void 0}),t.statusKeeper=_.create(t.$.status),t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"proxyHandler",get:function(){return E}},{key:"schema",get:function(){return C}},{key:"isDeleted",get:function(){return this.$get("deleted")}},{key:"status",get:function(){return this.statusKeeper.value},set:function(e){this.statusKeeper.change(e)}},{key:"lastStatusBeforeDisconnect",get:function(){return w(this,P)||w(this,k)}},{key:"setLastStatusBeforeDisconnect",value:function(e){v(this,k,_.create(e))}},{key:"statusName",get:function(){return this.statusKeeper.name}},{key:"isOnline",get:function(){return this.status>=_.logged}},{key:"isOffline",get:function(){return!this.isOnline}},{key:"isBusy",get:function(){return this.statusKeeper.is(_.busy)}},{key:"isInMeeting",get:function(){return this.isStatus(_.meeting)}},{key:"statusBeforeJoinconference",get:function(){return w(this,P)}},{key:"setStatusBeforeJoinconference",value:function(e){v(this,P,e?_.create(e):null)}},{key:"isAway",get:function(){return this.isStatus(_.away)}},{key:"isStatus",value:function(e){return this.statusKeeper.is(e)}},{key:"isMember",value:function(e){return this.account===e}},{key:"gender",get:function(){return this.$get("gender")}},{key:"dept",get:function(){return this.$get("dept")}},{key:"isSuperAdmin",get:function(){return"super"===this.$get("admin")}},{key:"isAdmin",get:function(){return"no"!==this.$get("admin")}},{key:"realnames",get:function(){return this.$get("realnames")}},{key:"realname",get:function(){var e=this.realnames;return e&&(e.cn&&!e["zh-cn"]&&(e["zh-cn"]=e.cn),e.tw&&!e["zh-tw"]&&(e["zh-tw"]=e.tw),e=e[s.default.name])?e:this.$get("realname")},set:function(e){this.$set("realname",e)}},{key:"account",get:function(){return this.$get("account")}},{key:"avatar",get:function(){return this.$get("avatar")}},{key:"phone",get:function(){return this.$get("phone")}},{key:"mobile",get:function(){return this.$get("mobile")}},{key:"email",get:function(){return this.$get("email")}},{key:"role",get:function(){return this.$get("role")}},{key:"displayName",get:function(){return this.$get("realname")||"".concat(this.account)}},{key:"mentionText",get:function(){var e=this.realname;return(0,f.isNotEmptyString)(e)?"@".concat(e):(e=this.account,(0,f.isNotEmptyString)(e)?"@".concat(e):"@#".concat(this.id))}},{key:"namePinyin",get:function(){return null==w(this,j)&&v(this,j,(0,i.default)(this.displayName)),w(this,j)}},{key:"weixin",get:function(){return this.$get("weixin")}},{key:"qq",get:function(){return this.$get("qq")}},{key:"address",get:function(){return this.$get("address")}},{key:"getMatchScore",value:function(e){return(0,u.matchScore)(S,this,e)}},{key:"plain",value:function(){return{id:this.id,gid:this.gid,account:this.account,email:this.email,phone:this.phone,mobile:this.mobile,realnames:this.realnames,avatar:this.avatar,role:this.role,gender:this.gender,dept:this.dept,site:this.$get("site"),realname:this.$get("realname"),admin:this.$get("admin"),deleted:this.$get("deleted")}}},{key:"toPlain",value:function(){return{id:this.id,displayName:this.displayName,avatar:this.avatar}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.default),b(t.default=a,"NAME","Member"),b(a,"SCHEMA",C),b(a,"PROXY_PROPERTIES",l),b(a,"PROXY_HANDLER",E),b(a,"STATUS",_),DEBUG&&(n.g.$Member=a)},84431:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.fetchMembersFromRemote=P;var r=p(n(84836)),o=n(99087),a=n(16986),i=p(n(75738)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==m(e)&&"function"!=typeof e)return{default:e};if((t=d(t))&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(n(33594)),u=n(55292),s=p(n(24260)),c=n(15973),f=n(83981);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=g(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){_(a,r,o,i,l,"next",e)}function l(e){_(a,r,o,i,l,"throw",e)}i(void 0)}))}}function E(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=(e instanceof i.default||(e=new i.default(e)),(0,c.getCurrentUserID)());return e.cgid||n!==e.id&&(e.cgid=[n,e.id].sort().join("&")),t||n!==e.id||(0,c.getCurrentUser)().updateFromMember(e),e}function P(e){return k.apply(this,arguments)}function k(){return(k=C((function*(e){return yield s.default.sendAndListen({method:"usergetlist",params:(0,c.getCurrentUser)().isVersionSupport("userGetListWithoutBasicParam")?[e]:[e,0]})}))).apply(this,arguments)}var j=new(function(e){var t=x;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e);var n,u,d,p,g,b,_,k,j=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(n=t?(n=S(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,n&&("object"===m(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return O(r)}}(x);function x(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=this,a=x;if(!(o instanceof a))throw new TypeError("Cannot call a class as a function");return t=j.call(this,"Member",e,{recordRecentAccess:100}),a=function(e){return e<=0?{id:e,status:"offline",realname:"",account:""}:t.getMember(e)||new i.default({id:e,status:"offline",realname:"",account:""})},(e="getMemberOrTemp")in(o=O(t))?Object.defineProperty(o,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[e]=a,t._fetchInfo={timerID:0,waiting:new Set,fetching:new Set},o=n.fetchWaitTime,t._fetchWaitTime=void 0===o?1e3:o,t._databaseSaveTask=new r.default(t.saveMembersToDatabase.bind(O(t)),3e3),t._membersNeedSave=new Set,t._databaseQueryTask=new r.default(t.queryMembersFromDatabase.bind(O(t)),200),t._membersNeedQuery=new Set,t.membersSubscribed=new Set,t}return t=x,(e=[{key:"reset",value:function(e){var t=v(S(x.prototype),"reset",this).call(this,e);this._fetchInfo.timerID&&(clearTimeout(this._fetchInfo.timerID),this._fetchInfo.timerID=0),this._fetchInfo.waiting.clear(),this._fetchInfo.fetching&&this._fetchInfo.fetching.clear(),this._databaseQueryTask.cancel(),this._membersNeedQuery.clear(),this.membersSubscribed.clear(),DEBUG_I&&(console.collapse("STORE.Member","pinkBg","reset","pinkPale",t,""),console.log("identify",e),console.groupEnd())}},{key:"store",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(e){if(Array.isArray(e)){if(!e.length)return}else e=[e];return t=void 0===(t=t.putToDatabase)||t,e=v(S(x.prototype),"store",this).call(this,e,{normalizeFunc:E}),t&&this.planToSaveMembersToDatabase(e),DEBUG_I&&(console.collapse("STORE.Member","pinkBg","store","pinkPale",e.length,""),console.trace("members",e),console.log("store",this),console.groupEnd()),e}}},{key:"fetchFromRemote",value:function(e){var t=this,n=(r=this._fetchInfo).fetching,r=r.waiting;(e="number"==typeof e?[e]:e)&&e.length&&(e=n?e.filter((function(e){return!n.has(e)})):e).length&&(this._fetchInfo.waiting=(0,o.unionSets)(r,e)),n&&n.length||(this._fetchInfo.timerID&&clearTimeout(this._fetchInfo.timerID),this._fetchInfo.timerID=setTimeout(C((function*(){t._fetchInfo.timerID=0,yield t.fetchFromRemoteImmediately(),t._fetchInfo.waiting.length&&t.fetchFromRemote()})),this._fetchWaitTime))}},{key:"fetchFromRemoteImmediately",value:(k=C((function*(){var e=this,t=this._fetchInfo.waiting;if((0,c.isUserOnline)()&&s.default.isConnected&&t.size){t=y(t),this._fetchInfo.waiting.clear(),this._fetchInfo.fetching=new Set(t);try{return s.default.subscribeUser("userupdate",t),t.forEach((function(t){return e.membersSubscribed.add(t)})),yield P(t)}catch(e){this._fetchInfo.waiting=(0,o.unionSets)(this._fetchInfo.waiting,t)}this._fetchInfo.fetching=null}})),function(){return k.apply(this,arguments)})},{key:"searchFromRemote",value:(_=C((function*(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=(e=yield s.default.sendAndListen({method:"usersearch",params:[e,t,!0]})).data,r=(e=e.pager,this.getMembers(n).filter((function(e){return!!e}))),o=r.map((function(e){return e.id}));return n=n.filter((function(e){return!o.includes(e)})),n=n.length?yield P(n):[],t.pager?{list:[].concat(y(r),y(n)),pager:e}:[].concat(y(r),y(n))})),function(e){return _.apply(this,arguments)})},{key:"queryMembersFromCache",value:function(e){var t,n,r,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=("object"===m(e)&&null!==e?(t=e,n=Object.keys(t),e=function(e){var r,o=h(n);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(t[a]!==e[a])return!1}}catch(e){o.e(e)}finally{o.f()}return!0}):Array.isArray(e)&&(r=new Set(e),e=function(e){return r.has(e.id)||r.has(e.account)}),[]),i=o.sortList,l=o.excludeDeleted,u=o.excludeIdList;return o=void 0===(o=o.limit)?0:o,this.forEach((function(t){e&&!e(t)||a.push(t)}),void 0!==l&&l,void 0!==u&&u),a.length&&(i&&(0,f.sortMembers)(a,i),o&&a.length>o)?a.slice(0,o):a}},{key:"searchMembersFromCache",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if((0,a.isEmptyString)(e))return[];if(!(e=e.trim().toLowerCase().split(" ")).length)return[];var n=t.excludeDeleted,r=t.excludeIdList,o=(t=void 0===(t=t.limit)?0:t,[]);return this.forEach((function(t){var n=t.getMatchScore(e);n&&o.push({score:n,member:t})}),void 0!==n&&n,void 0!==r&&r),o.length&&(o.sort((function(e,t){return t.score-e.score})),o=o.map((function(e){return e.member})),t&&o.length>t)?o.slice(0,t):o}},{key:"planToSaveMembersToDatabase",value:function(e){var t,n=h(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._membersNeedSave.add("object"===m(r)?r.id:r)}}catch(e){n.e(e)}finally{n.f()}this._databaseSaveTask.do()}},{key:"saveMembersToDatabase",value:(b=C((function*(){if(this._membersNeedSave.size){var e,t=[],n=h(this._membersNeedSave);try{for(n.s();!(e=n.n()).done;){var r=e.value,o=this.getItemFromCache(r);o&&t.push(o.plain())}}catch(e){n.e(e)}finally{n.f()}if(this._membersNeedSave.clear(),t.length){(0,l.beginDBBusyTask)();try{var a=l.default.database.members;t.length&&(yield a.bulkPut(t)),DEBUG_I&&(console.collapse("STORE.Member","pinkBg","save members to memberTable","pinkPale",t.length,""),console.log("membersNeedSave",t),console.log("store",this),console.groupEnd())}catch(e){DEBUG&&(console.collapse("STORE.Member","pinkBg","save members to memberTable Error","redPale",String(e),"red"),console.error("error",e),console.log("membersNeedSave",t),console.log("store",this),console.groupEnd())}(0,l.endDBBusyTask)()}}})),function(){return b.apply(this,arguments)})},{key:"tryQueryMembersFromDatabase",value:function(e){var t,n=!1,r=h(e="number"==typeof e?[e]:e);try{for(r.s();!(t=r.n()).done;){var o=t.value;this._membersNeedQuery.has(o)||(this._membersNeedQuery.add(o),n=!0)}}catch(e){r.e(e)}finally{r.f()}n&&this._databaseQueryTask.do()}},{key:"queryMembersFromDatabase",value:(g=C((function*(){var e;if(this._membersNeedQuery.size)return e=y(this._membersNeedQuery),this._membersNeedQuery.clear(),yield this.getMembersFromDatabase(e)})),function(){return g.apply(this,arguments)})},{key:"getMembersFromDatabase",value:(p=C((function*(e){var t,n,r=this,o=this._identify,a=null==(a=l.default.database)?void 0:a.members;if(a&&(Array.isArray(e)?t=yield a.bulkGet(e):(a=yield a.get(e))&&(t=[a]),t&&o===this._identify))return n=[],e=t.map((function(e){if(!e)return null;var t=r._cache.get(e.id);return t?e=t:((e=E(e,!0)).expired=!0,n.push(e)),e})),DEBUG_I&&(console.collapse("STORE.Member","pinkBg","get members from memberTable","pinkPale",e.length,""),console.log("members",e),console.log("store",this),console.groupEnd()),n.length&&this.store(n,{putToDatabase:!1}),e})),function(e){return p.apply(this,arguments)})},{key:"loadRecentAccessMembersFromDatabase",value:(d=C((function*(){var e,t=this.recentAccessList;t&&t.length&&(e=yield this.getMembersFromDatabase(t),DEBUG_I&&(console.collapse("STORE.Member","pinkBg","load recent access members","pinkPale",e.length,""),console.log("recentAccessList",t),console.log("members",e),console.log("store",this),console.groupEnd()))})),function(){return d.apply(this,arguments)})},{key:"getMember",value:function(e){if("string"==typeof e&&(e=Number.parseInt(e,10),Number.isNaN(e)))return null;var t=this.getItemFromCache(e);return t||this.tryQueryMembersFromDatabase(e),!t||t.expired?this.fetchFromRemote(e,!0):t.lastAccessTime=Date.now(),t}},{key:"guessMemberInCache",value:function(e){var t;if("string"==typeof e&&("#"===e[0]?(t=Number.parseInt(e.substr(1),10),Number.isNaN(t)||(e=t)):"@"===e[0]&&(e=e.substr(1))),"number"==typeof e)return this.getItemFromCache(e);var n=null;return this.forEach((function(t){if(t.account===e||t.realname===e)return n=t,!1})),n}},{key:"getMembers",value:function(e){var t=this,n=this.getItemsFromCache(e),r=new Set,o=new Set;return e.forEach((function(e,a){(a=n[a])?a.expired&&o.add(e):(t._gettingFromDatabase&&!t._gettingFromDatabase.has(e)&&r.add(e),o.add(e))})),r.size&&this.tryQueryMembersFromDatabase(y(r)),o.size&&this.fetchFromRemote(y(o)),n}},{key:"asyncGetMember",value:(u=C((function*(e){if(!e)return null;var t,n=this.getItemFromCache(e);return n||(t=yield this.getMembersFromDatabase([e]))&&(n=t[0]),n&&!n.expired||(t=yield P([e]))&&(n=t[0]),n})),function(e){return u.apply(this,arguments)})},{key:"asyncGetMembers",value:(n=C((function*(e){if(!e||!e.length)return null;var t=this.getItemsFromCache(e),n=new Set,r=new Map;if(e.forEach((function(e,o){t[o]||n.add(e),r[e]=o})),n.size){var o=yield this.getMembersFromDatabase(y(n));if(o&&o.length){var a,i=h(o);try{for(i.s();!(a=i.n()).done;){var l=a.value;l&&!l.expired&&(n.delete(l.id),t[r[l.id]]=l)}}catch(e){i.e(e)}finally{i.f()}}}if(n.size&&(o=yield P(e))&&o.length){var u,s=h(o);try{for(s.s();!(u=s.n()).done;){var c=u.value;t[r[c.id]]=c}}catch(e){s.e(e)}finally{s.f()}}return t})),function(e){return n.apply(this,arguments)})}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),x}(u.DataStore));(0,l.setCallbackOnInitedDatabase)(j.reset.bind(j)),(0,c.onUserLogout)((function(){j.saveMembersToDatabase()})),(0,c.onUserReconnect)((function(){j.membersSubscribed.size&&s.default.subscribeUser("userupdate",y(j.membersSubscribed))})),n.g.ExtsRuntime&&n.g.ExtsRuntime.registerExtensionAPI([{name:"members.getMember",level:3,func:function(e){return(e=j.getMember(e))&&e.proxy}},{name:"members.getMembers",level:3,func:function(e){return j.getMembers(e).map((function(e){return e&&e.proxy}))}},{name:"members.subscribe",level:3,func:function(e,t){return j.subscribe(e,(function(e){Array.isArray(e)?t(e.map((function(e){return e&&e.proxy}))):t(e.proxy)}))}},{name:"members.subscribeAny",level:3,func:function(e){return j.subscribeAny((function(t){Array.isArray(t)?e(t.map((function(e){return e&&e.proxy}))):e(t.proxy)}))}},{name:"members.unsubscribe",level:3,func:function(e){return j.unsubscribe(e)}}]),DEBUG&&(n.g.$membersStore=j),t.default=j},727:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onNoticeUpdate=t.isMatchWindowCondition=t.getCurrentNotice=t.default=void 0,t.playNoticeSound=m,t.updateUserInfoOnTray=t.updateNotice=t.requestAttention=void 0;var r=s(n(65286)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==c(e)&&"function"!=typeof e)return{default:e};if((t=u(t))&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(n(61862)),a=s(n(74160)),i=s(n(94128)),l=n(40910);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=i.default.access("notify"),d=i.default.access("ui"),p="notice.update",h=null;function m(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"message";f.playSound&&e&&f.playSound(e)}function y(){var e,t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=(n.sound&&m(n.sound),n.count?"".concat(99<n.count?"99+":n.count):"");null!=(e=f.setBadgeLabel)&&e.call(f,i),f.updateTrayIcon&&(e=o.default.string("app.title",a.default.pkg.displayName),n.userInfo&&(e="".concat(e," - ").concat(n.userInfo)),n.tray?(i=n.tray.text||i,t=n.tray.label?"".concat(e," - ").concat(n.tray.label):e,f.updateTrayIcon(t,n.tray.flash,i)):n.userInfo&&f.updateTrayIcon(e)),n.notification&&f.showNotification&&(null==(t="object"===c(n.notification)?n.notification:{title:n.notification}).icon&&(t.icon=(0,o.getMediaPath)("icon")),null==t.silent&&(t.silent=!0),f.showNotification(t)),h=n,r.default.emit(p,n)}function g(e){return!0===e||("onWindowHide"===e?!d.isWindowOpen():"onWindowBlur"===e?!d.isWindowOpenAndFocus()||!(0,l.isRoutePathMatch)("chats"):!1!==e)}function b(e){return r.default.on(p,e)}function v(e){y({userInfo:e&&e.isVerified?"".concat(e.displayName," [").concat(o.default.string("member.status.".concat(e.statusName)),"]"):""})}t.updateNotice=y,t.isMatchWindowCondition=g,t.onNoticeUpdate=b,t.getCurrentNotice=function(){return h},n=f.requestAttention||function(){},t.requestAttention=n,t.updateUserInfoOnTray=v,i={playSound:m,update:y,onNoticeUpdate:b,isMatchWindowCondition:g,requestAttention:n,updateUserInfoOnTray:v},t.default=i},99605:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n=((n=n(94128))&&n.__esModule?n:{default:n}).default.call("nwc.createNwc"),t.default=n},15973:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLastSavedUser=t.getCurrentUserID=t.getCurrentUserAccount=t.getCurrentUser=t.emitUserLoginOnOtherDeviceEvent=t.emitUserLoginEvent=t.emitUserAutoLoginEvent=t.default=t.createUser=void 0,t.getUserConfig=j,t.setCurrentUser=t.onUserStatusChange=t.onUserReconnect=t.onUserLogout=t.onUserLoginOnOtherDevice=t.onUserLogin=t.onUserConfigRequestUpload=t.onUserConfigChange=t.onUserAutoLogin=t.onSwapUser=t.isUserVerified=t.isUserOnline=t.isCurrentUser=t.getUserStatus=void 0;var r,o=c(n(65286)),a=c(n(61629)),i=c(n(61862)),l=n(727),u=n(72749),s=n(75738);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e){if(e instanceof a.default)return e;var t=a.default.createIdentify(e.server,e.account);return e=d(d({},(0,u.getUserFromStore)(t)),e),t=new a.default(e),void 0!==e.authKey&&(t.authKey=e.authKey),void 0!==e.server&&t.setServer(e.server),t}function h(e){if(!(e instanceof a.default))throw new Error("Cannot set user for profile, because the user param is not User instance.");var t=P;return null!=t&&t.destroy(),(P=e).enableEvents(),DEBUG&&(console.collapse("Profile.setUser","tealBg",P.identify,"tealPale"),console.log("user",P),console.groupEnd()),e=!t||t.identify!==P.identify,(0,l.updateUserInfoOnTray)(P),o.default.emit(r.swap,P,e),P}function m(e){return o.default.on(r.swap,e)}function y(e){return o.default.on(a.default.EVENT.status_change,e)}function g(e){return o.default.on(a.default.EVENT.config_change,e)}function b(e){return o.default.on(a.default.EVENT.config_request_upload,e)}function v(e){return!(!e||!P)&&(e="number"==typeof e?e:e.id,P.id===e)}function w(){return P}function O(){return P?P.id:null}function S(){return P?P.account:""}function _(){return P&&P.status}function C(){return!!P&&P.isVerified}function E(){return P&&P.isOnline}(k=r=r||{}).swap="profile.user.swap",k.login="server.user.login",k.logout="server.user.logout",k.loginOnOhterDevice="server.user.loginOnOhterDevice",k.reconnect="server.user.reconnect",k.autoLogin="profile.user.autoLogin";var P=null,k=(t.createUser=p,t.setCurrentUser=h,t.onSwapUser=m,t.onUserStatusChange=y,t.onUserConfigChange=g,t.onUserConfigRequestUpload=b,u.getLastUserFromStore);function j(e){var t=P?P.config:null;return t?e?t.get(e):t:e?null:{}}t.getLastSavedUser=k,t.isCurrentUser=v,t.getCurrentUser=w,t.getCurrentUserID=O,t.getCurrentUserAccount=S,t.getUserStatus=_,t.isUserVerified=C,t.isUserOnline=E,t.onUserLogin=function(e){return o.default.on(r.login,e)},t.onUserLogout=function(e){return o.default.on(r.logout,e)},t.onUserReconnect=function(e){return o.default.on(r.reconnect,e)},t.emitUserLoginEvent=function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return o.default.emit.apply(o.default,[r[e]].concat(n))},t.onUserLoginOnOtherDevice=function(e){return o.default.on(r.loginOnOhterDevice,e)},t.emitUserLoginOnOtherDeviceEvent=function(e){return o.default.emit(r.loginOnOhterDevice,e)},t.emitUserAutoLoginEvent=function(e){return o.default.emit(r.autoLogin,e)},t.onUserAutoLogin=function(e){return o.default.on(r.autoLogin,e)},y((function(e,t,n){n.status!==s.STATUS.offline&&(0,l.updateUserInfoOnTray)(n)})),n.g.ExtsRuntime&&n.g.ExtsRuntime.registerExtensionAPI({name:"user.getCurrentUser",level:1,func:function(){var e=w();return e&&e.proxy}}),k={EVENT:r,createUser:p,setUser:h,onSwapUser:m,onUserStatusChange:y,onUserConfigChange:g,onUserConfigRequestUpload:b,getLastSavedUser:k,isCurrentUser:v,get user(){return P},get userId(){return O()},get isUserOnline(){return E()},get isUserVerified(){return C()},get userStatus(){return _()},get summaryText(){return P?"".concat(P.displayName," [").concat(i.default.string("member.status.".concat(P.statusName)),"]"):""},get userConfig(){return j()},get userAccount(){return S()}},DEBUG&&(n.g.$profile=k),t.default=k},61328:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(2568)),o=u(n(74160)),a=u(n(5833)),i=u(n(84836)),l=n(61997);function u(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n=function(){function e(t){var n=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");t&&t.version!==a.default.version&&(t=null),this.$=f(f(f({},a.default),o.default.system.defaultConfig),t),this.changeAction=new i.default((function(e){n.onChange(n.lastChange,n),!e&&n.newChanges&&"function"==typeof n.onRequestUpload&&n.uploadAction.do(),n.lastChange=null})),this.uploadAction=new i.default((function(){n.onRequestUpload(n.newChanges,n),n.newChanges=null}),5e3)}var t,n;return t=e,(n=[{key:"hash",get:function(){return this._hash||this.exportCloud(),this._hash}},{key:"plain",value:function(){var e=this,t={};return Object.keys(this.$).forEach((function(n){var r;n.startsWith("temp.")||void 0!==(r=e.$[n])&&(t[n]=r)})),t}},{key:"exportCloud",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=t?this.newChanges:this.$,o={};return Object.keys(n).forEach((function(t){t.startsWith("local.")||t.startsWith("temp.")||(o[t]=e.$[t])})),Object.keys(o).length?(t||(o.hash=(0,r.default)(JSON.stringify(o)),this._hash=o.hash),o):null}},{key:"makeChange",value:function(e,t){this.lastChange=f(f({},this.lastChange),e),this.newChanges=f(f({},this.newChanges),this.lastChange),this.$.lastChangeTime=Date.now(),this._hash="","function"==typeof this.onChange&&this.changeAction.do(t)}},{key:"get",value:function(e,t){if(this.$){var n=this.$[e];if(void 0!==n)return n}return void 0===t?a.default[e]:t}},{key:"set",value:function(e,t){var n,r=this,o=2<arguments.length&&void 0!==arguments[2]&&arguments[2];"object"===s(e)?(n={},Object.keys(e).forEach((function(t){var o=e[t];r.$&&r.$[t]===o||(n[t]=o)})),Object.keys(n).length&&(Object.assign(this.$,n),this.makeChange(n,o))):this.$&&this.$[e]===t||(this.$[e]=t,this.makeChange(d({},e,t),o||e.startsWith("local.")||e.startsWith("temp.")))}},{key:"getForExtension",value:function(e,t,n){return"object"===s(e)&&e.name&&(e=e.name),e=this.get("EXTENSION::".concat(e),{}),void 0!==(t=void 0!==t?e[t]:e)?t:n}},{key:"setForExtension",value:function(e,t,n){var r=this.getForExtension(e);return"object"===s(t)?Object.assign(r,t):r[t]=n,this.set("EXTENSION::".concat(e),r)}},{key:"reset",value:function(e){this.$=f(f({},a.default),e),this.makeChange(this.$,!0)}},{key:"autoReconnect",get:function(){return this.get("user.autoReconnect")},set:function(e){this.set("user.autoReconnect",e)}},{key:"avatarPosition",get:function(){return this.get("ui.navbar.avatarPosition")},set:function(e){this.set("ui.navbar.avatarPosition",e)}},{key:"lastChangeTime",get:function(){return this.get("lastChangeTime")},set:function(e){e instanceof Date&&(e=e.getTime()),this.set("lastChangeTime",e)}},{key:"showMessageTip",get:function(){return this.get("ui.chat.showMessageTip")},set:function(e){this.set("ui.chat.showMessageTip",e)}},{key:"sendHDEmoticon",get:function(){return!0},set:function(e){this.set("ui.chat.sendHDEmoticon",e)}},{key:"sendMarkdown",get:function(){return o.default.ui["chat.sendMarkdown"]&&this.get("ui.chat.sendMarkdown")},set:function(e){o.default.ui["chat.sendMarkdown"]&&this.set("ui.chat.sendMarkdown",e)}},{key:"isChatSidebarShow",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return this.get("temp.ui.chat.showSidebar.".concat(e),t)}},{key:"setChatSidebarShow",value:function(e,t){return e="temp.ui.chat.showSidebar.".concat(e),this.set(e,!!t,!0)}},{key:"setChatBulletinSetting",value:function(e,t){return e="temp.im.chat.bulletinSetting.".concat(e),this.set(e,t,!0)}},{key:"getChatBulletinSetting",value:function(e){return e="temp.im.chat.bulletinSetting.".concat(e),this.get(e,null)}},{key:"setChatReplyTo",value:function(e,t){return e="temp.im.chat.replyTo.".concat(e),this.set(e,t,!0)}},{key:"getChatReplyTo",value:function(e){return e="temp.im.chat.replyTo.".concat(e),this.get(e,null)}},{key:"showMeOnMenu",get:function(){return!!this.get("ui.chat.menu.showMe")},set:function(e){this.set("ui.chat.menu.showMe",e)}},{key:"enableSearchInEmojiPicker",get:function(){return!1},set:function(e){this.set("ui.chat.enableSearchInEmojiPicker",e)}},{key:"enableWindowNotification",get:function(){return this.get("ui.notify.enableWindowNotification")},set:function(e){this.set("ui.notify.enableWindowNotification",e)}},{key:"safeWindowNotification",get:function(){return this.get("ui.notify.safeWindowNotification")},set:function(e){this.set("ui.notify.safeWindowNotification",e)}},{key:"windowNotificationCondition",get:function(){return this.get("ui.notify.windowNotificationCondition")},set:function(e){this.set("ui.notify.windowNotificationCondition",e)}},{key:"enableSound",get:function(){return this.get("ui.notify.enableSound")},set:function(e){this.set("ui.notify.enableSound",e)}},{key:"playSoundCondition",get:function(){return this.get("ui.notify.playSoundCondition")},set:function(e){this.set("ui.notify.playSoundCondition",e)}},{key:"flashTrayIcon",get:function(){return this.get("ui.notify.flashTrayIcon")},set:function(e){this.set("ui.notify.flashTrayIcon",e)}},{key:"flashTrayIconCondition",get:function(){return this.get("ui.notify.flashTrayIconCondition")},set:function(e){this.set("ui.notify.flashTrayIconCondition",e)}},{key:"muteOnUserIsBusy",get:function(){return this.get("ui.notify.muteOnUserIsBusy")},set:function(e){this.set("ui.notify.muteOnUserIsBusy",e)}},{key:"captureScreenHotkey",get:function(){return this.get("shortcut.captureScreen")},set:function(e){this.set("shortcut.captureScreen",e)}},{key:"focusWindowHotkey",get:function(){return this.get("shortcut.focusWindow")},set:function(e){this.set("shortcut.focusWindow",e)}},{key:"globalHotkeys",get:function(){return{captureScreenHotkey:this.captureScreenHotkey,focusWindowHotkey:this.focusWindowHotkey}}},{key:"sendMessageHotkey",get:function(){return this.get("shortcut.sendMessage")||"Enter"},set:function(e){this.set("shortcut.sendMessage",e)}},{key:"chatFontSize",get:function(){return this.get("ui.chat.fontSize")},set:function(e){this.set("ui.chat.fontSize",e)}},{key:"appCloseOption",get:function(){return this.get("ui.app.onClose")},set:function(e){this.set("ui.app.onClose",e)}},{key:"removeFromTaskbarOnHide",get:function(){return this.get("ui.app.removeFromTaskbarOnHide")},set:function(e){this.set("ui.app.removeFromTaskbarOnHide",e)}},{key:"hideWindowOnBlur",get:function(){return this.get("ui.app.hideWindowOnBlur")},set:function(e){this.set("ui.app.hideWindowOnBlur",e)}},{key:"hideWindowOnOpenAtLogin",get:function(){return this.get("ui.app.hideWindowOnOpenAtLogin")},set:function(e){this.set("ui.app.hideWindowOnOpenAtLogin",e)}},{key:"contactsGroupByType",get:function(){return this.get("ui.chat.contacts.groupBy")},set:function(e){this.set("ui.chat.contacts.groupBy",e)}},{key:"contactsOrderRole",get:function(){return this.get("ui.chat.contacts.order.role",{})},set:function(e){this.set("ui.chat.contacts.order.role",e)}},{key:"contactsCategories",get:function(){return this.get("ui.chat.contacts.categories",{})},set:function(e){this.set("ui.chat.contacts.categories",e)}},{key:"contactsOrderDept",get:function(){return this.get("ui.chat.contacts.order.dept",{})},set:function(e){this.set("ui.chat.contacts.order.dept",e)}},{key:"contactsDefaultCategoryName",get:function(){return this.get("ui.chat.contacts.category.default")},set:function(e){this.set("ui.chat.contacts.category.default",e)}},{key:"groupsCategories",get:function(){var e=this.get("ui.chat.groups.categories",{});return e._hidden&&(delete e._hidden,this.set("ui.chat.groups.categories",e)),Object.keys(e).forEach((function(t){var n=e[t];n.order<1e12&&(t.startsWith("_")?n.order=1e11+(0,l.timeSequence)():n.order=(0,l.timeSequence)())})),e},set:function(e){this.set("ui.chat.groups.categories",e)}},{key:"groupsDefaultCategoryName",get:function(){return this.get("ui.chat.groups.category.default")},set:function(e){this.set("ui.chat.groups.category.default",e)}},{key:"chatGroupStates",get:function(){return this.get("ui.chat.list.group.states",{})},set:function(e){this.set("ui.chat.list.group.states",e)}},{key:"listenClipboardImage",get:function(){return!1},set:function(e){this.set("ui.chat.listenClipboardImage",e)}},{key:"sendTypingStatus",get:function(){return this.get("ui.chat.sendTypingStatus",!0)},set:function(e){this.set("ui.chat.sendTypingStatus",e)}},{key:"setChatMenuGroupState",value:function(e,t,n,r){var o=this.chatGroupStates;e="".concat(e,".").concat(t,".").concat(n),r?o[e]=r:o[e]&&delete o[e],this.chatGroupStates=o}},{key:"getChatMenuGroupState",value:function(e,t,n){var r=this.chatGroupStates;return!(!r||!r["".concat(e,".").concat(t,".").concat(n)])}},{key:"skippedVersion",get:function(){return this.get("local.skippedVersion")},set:function(e){this.set("local.skippedVersion",e)}},{key:"extsState",get:function(){return this.get("extsState",{})}},{key:"addExtStateToConfig",value:function(e){var t=this.extsState;t[e.name]=e.disabled,this.set("extsState",t)}},{key:"useInitConference",get:function(){return this.get("ui.chat.initConference")},set:function(e){this.set("ui.chat.initConference",e)}},{key:"botMode",get:function(){return this.get("temp.bot.mode","command")},set:function(e){this.set("temp.bot.mode",e,!0)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),d(t.default=n,"DEFAULT",a.default)},5833:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={version:3,lastChangeTime:0,"ui.animate.enable":!1,"ui.navbar.width":50,"ui.navbar.active":"chat","ui.navbar.avatarPosition":"bottom","ui.navbar.onlyShowNoticeCountOnRecents":!0,"ui.chat.menu.with":200,"ui.chat.menu.showMe":!0,"ui.chat.sendbox.height":125,"ui.chat.sidebar.width":300,"ui.chat.fontSize":{name:13,time:"0.9230769231em",lineHeight:1.53846153846,size:13},"ui.chat.sendHDEmoticon":!0,"ui.chat.showMessageTip":!0,"ui.chat.sendMarkdown":!1,"ui.chat.enableSearchInEmojiPicker":!1,"ui.chat.contacts.groupBy":"normal","ui.chat.contacts.order.role":{},"ui.chat.contacts.categories":{},"ui.chat.contacts.order.dept":{},"ui.chat.menu.group.states":{},"ui.chat.contacts.category.default":"","ui.chat.groups.category.default":"","ui.chat.groups.categories":{},"ui.chat.listenClipboardImage":!1,"ui.chat.sendTypingStatus":!0,"ui.chat.sendBigFileOnline":!1,"ui.chat.showCollaboraPrompt":!0,"ui.notify.enableSound":!0,"ui.notify.playSoundCondition":"onWindowHide","ui.notify.muteOnUserIsBusy":!0,"ui.notify.flashTrayIcon":!0,"ui.notify.flashTrayIconCondition":"","ui.notify.enableWindowNotification":!1,"ui.notify.windowNotificationCondition":"onWindowBlur","ui.notify.safeWindowNotification":!1,"ui.app.hideWindowOnOpenAtLogin":!1,"ui.app.hideWindowOnBlur":!1,"ui.app.removeFromTaskbarOnHide":!1,"ui.app.onClose":"ask","local.ui.app.lastFileSavePath":"","shortcut.captureScreen":"Ctrl+Alt+Z","shortcut.focusWindow":"Ctrl+Alt+X","shortcut.sendMessage":"Enter","user.autoReconnect":!0,"ui.chat.initConference":!1}},72749:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.saveUserToStore=t.removeUserFromStore=t.getUserListFromStore=t.getUserFromStore=t.getLastUserFromStore=t.getAllUsersFromStore=t.default=void 0;var r=(n=n(81595))&&n.__esModule?n:{default:n};function o(){return r.default.get(f,{})}function a(e){if(!e)return null;var t=r.default.get("".concat(c).concat(e));return t&&(t.identify=e,null==t.rememberMe&&(t.rememberMe=!0)),t}function i(e){var t=o();if(!t)return null;var n=Array.isArray(e)?new Set(e):e,i=0,l=null,u=null!=(e=r.default.get("loginedUsers"))?e:{};return Object.keys(t).forEach((function(e){var r;null!=n&&n.has(e)||process.env.HOT&&u[e]&&u[e]!==process.env.WIN_NAME||(r=t[e],i<r&&(i=r,l=e))})),l?a(l):null}function l(){var e=o(),t=[],n=!1;return Object.keys(e).forEach((function(r){var o=a(r);o?t.push(o):(delete e[r],n=!0)})),n&&r.default.set(f,e),t.sort((function(e,t){return(t.lastLoginTime||0)-(e.lastLoginTime||0)})),t}function u(e){var t=e.identify;if(!t)throw new Error("Cannot save user, because user.identify property is not defined.");(e=e.plain()).rememberMe||delete e.authKey,r.default.set("".concat(c).concat(t),e),(e=o())[t]=Date.now(),r.default.set(f,e)}function s(e){if(!e)throw new Error("Cannot remove user, because identify is not defined.");r.default.remove("".concat(c).concat(e));var t=o();t[e]&&(delete t[e],r.default.set(f,t))}var c="USER::",f="USER_LIST";t.getAllUsersFromStore=o,t.getUserFromStore=a,t.getLastUserFromStore=i,t.getUserListFromStore=l,t.saveUserToStore=u,t.removeUserFromStore=s,n={allUsers:o,getUser:a,userList:l,saveUser:u,removeUser:s,getLastUser:i},t.default=n},61629:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AUTH_TOKEN_FLAG=t.AUTH_PASSWORD_FLAG=void 0;var o=p(n(2568)),a=p(n(75738)),i=p(n(61328)),l=p(n(84836)),u=n(7066),s=p(n(65286)),c=p(n(74160)),f=n(72749),d=n(48389);function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=w(e);if(n=t?(n=w(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return v(o)}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,n){var r=e;if(t.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object");t.set(e,n)}function S(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function _(e,t,n){if((t=E(e,t,"set")).set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function C(e,t){return(t=E(e,t,"get")).get?t.get.call(e):t.value}function E(e,t,n){if(t.has(e))return t.get(e);throw new TypeError("attempted to "+n+" private field on non-instance")}function P(e){var t;return e="string"==typeof e&&e.length?e.startsWith(x)?(t="token",e.substring(x.length)):e.startsWith(j)?(t="password",e.substring(j.length)):64===e.length?(t="token",e):32===e.length?(t="password",e):(t="password",(0,o.default)(e)):(t="password",""),{type:t,key:e}}var k,j="%%%PWD_FLAG%%% ",x=(t.AUTH_PASSWORD_FLAG=j,"%%%TOKEN_FLAG%%% "),M=(t.AUTH_TOKEN_FLAG=x,"11443"),T=((N=k=k||{}).config_change="user.config.change",N.status_change="user.status.change",N.reconnect="user.reconnect",N.config_request_upload="user.config.requestUpload",new WeakMap),I=new WeakMap,D=new WeakMap,A=new WeakMap,R=new WeakMap,N=function(e){var t=d;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e);var n,r=b(d);function d(e){var t;if(this instanceof d)return S(v(t=r.call(this,e,"USER")),"saveUserAction",void 0),S(v(t),"eventsEnable",void 0),S(v(t),"statusChangeCallTimer",void 0),O(v(t),T,{writable:!0,value:void 0}),O(v(t),I,{writable:!0,value:void 0}),S(v(t),"tokenNeedRenew",void 0),S(v(t),"sessionID",void 0),O(v(t),D,{writable:!0,value:void 0}),S(v(t),"backendType",void 0),S(v(t),"socketPort",void 0),O(v(t),A,{writable:!0,value:void 0}),O(v(t),R,{writable:!0,value:void 0}),S(v(t),"_clientUpdate",void 0),S(v(t),"enableClientAES",void 0),S(v(t),"isFirstSignedToday",void 0),S(v(t),"versionSupport",{}),t.saveUserAction=new l.default((function(){(0,f.saveUserToStore)(v(t))})),t.eventsEnable=!1,t.statusKeeper.onChange=function(e,n){t.isEventsEnable&&s.default.emit(k.status_change,t.statusKeeper.proxy,a.default.STATUS.create(n).proxy,v(t)),clearTimeout(t.statusChangeCallTimer),t.statusKeeper.is(a.default.STATUS.logged)&&(t.$set("lastLoginTime",(new Date).getTime()),t.statusChangeCallTimer=setTimeout((function(){t.isStatus(a.default.STATUS.logged)&&(t.status=a.default.STATUS.online)}),1e3))},t;throw new TypeError("Cannot call a class as a function")}return t=d,e=[{key:"create",value:function(e){return e instanceof d?e:new d(e)}},{key:"createIdentify",value:function(e,t){e instanceof URL||(e.startsWith("https://")||e.startsWith("http://")||(e="https://".concat(e)),e=new URL(e)),e.port||(e.port=M);var n=e.pathname;return n&&n.length&&(n=(n="/"===n?"":n).replace(/\//g,"_")),e=e.host.replace(":","__"),"".concat(t,"@").concat(e).concat(n)}},{key:"simplifyServerUrl",value:function(e){if(e){e.startsWith("http://")||e.startsWith("https://")||(e="https://".concat(e));try{var t=new URL(e);t.port===M&&(t.port="",e=t.toString())}catch(t){DEBUG&&console.error("Cannot parse url ",e,t)}}return e}}],(n=[{key:"proxyHandler",get:function(){return d.PROXY_HANDLER}},{key:"schema",get:function(){return d.SCHEMA}},{key:"isEventsEnable",get:function(){return this.eventsEnable}},{key:"enableEvents",value:function(){this.eventsEnable=!0}},{key:"destroy",value:function(){this.eventsEnable=!1}},{key:"plain",value:function(){var e=m(m({},this.$),{},{config:this.config.plain()});if(e.password)for(var t=0,n=["password","ranzhiUrl"];t<n.length;t++){var r=n[t];void 0!==e[r]&&delete e[r]}var o=this.server;return o.port===M&&(o.port="",e.server=o.toString(),o.port=M),e}},{key:"save",value:function(){this.saveUserAction.do()}},{key:"signed",get:function(){return this.$get("signed")},set:function(e){this.$set("signed",e)}},{key:"config",get:function(){var e=this;return C(this,T)||(_(this,T,new i.default(this.$get("config"))),C(this,T).onChange=function(t,n){e.save(),e.isEventsEnable&&s.default.emit(k.config_change,t,n,e)},C(this,T).onRequestUpload=function(t,n){e.isEventsEnable&&e.isOnline&&s.default.emit(k.config_request_upload,t,n,e)}),C(this,T)}},{key:"isDisconnect",get:function(){return this.statusKeeper.is(a.default.STATUS.disconnect)}},{key:"isUnverified",get:function(){return this.status<=a.default.STATUS.unverified}},{key:"isVerified",get:function(){return this.status>=a.default.STATUS.disconnect}},{key:"isLogged",get:function(){return this.status>=a.default.STATUS.logged}},{key:"markDisconnect",value:function(){this.status=a.default.STATUS.disconnect}},{key:"markUnverified",value:function(){this.status=a.default.STATUS.unverified}},{key:"isLogging",get:function(){return!!C(this,I)}},{key:"beginLogin",value:function(e){this.isOnline&&(this.status=a.default.STATUS.unverified),_(this,I,!e||"simple")}},{key:"endLogin",value:function(e,t){_(this,I,!1),e?this.isOffline&&(this.status=a.default.STATUS.logged):!t&&this.isDisconnect||(this.status=a.default.STATUS.unverified,t&&this.clearAuthToken())}},{key:"authTokenLifetime",get:function(){return this.$get("authTokenLifetime",0)}},{key:"authKey",get:function(){var e=this.$get("authKey");return void 0===e?this.$get("password",""):e},set:function(e){this.ldap?this.$set("authKey",e):"token"===(e=P(e)).type?this.setAuthToken(e.key):this.setPassword(e.key)}},{key:"authKeyInfo",get:function(){return P(this.authKey)}},{key:"rememberMe",get:function(){return!!this.$get("rememberMe")},set:function(e){this.ldap&&(e=!1),this.$set("rememberMe",!!e)}},{key:"setAuthToken",value:function(e){e&&(e.startsWith(x)||(e="".concat(x).concat(e)),this.$set("authKey",e),this.$set("generatedTimeOfToken",Date.now()))}},{key:"clearAuthToken",value:function(){this.$set("authKey",""),this.$set("generatedTimeOfToken",0)}},{key:"setAuthTokenConfig",value:function(e,t){"number"==typeof e&&this.$set("authTokenLifetime",e),"number"==typeof t&&this.$set("tokenAuthWindow",t)}},{key:"isAuthTokenNeedRenew",get:function(){if(!this.hasAuthToken)return!1;var e=this.generatedTimeOfToken;return this.tokenNeedRenew||!e||Date.now()-e>this.authTokenLifetime*u.TIME_DAY*2/3}},{key:"hasAuthToken",get:function(){return"token"===this.authKeyInfo.type}},{key:"authToken",get:function(){var e=this.authKeyInfo;return"token"===e.type?e.key:""}},{key:"setPassword",value:function(e){e.startsWith(j)||(this.ldap||32===e.length||(e=(0,o.default)(e)),e="".concat(j).concat(e)),this.$set("authKey",e)}},{key:"sidCookieInfo",get:function(){return{url:this.server.origin,name:"sid-".concat(this.id),value:(0,o.default)("".concat(this.id,":").concat(this.sessionID)),path:"/"}}},{key:"sidCookieInfoWithoutUserId",get:function(){return{url:this.server.origin,name:"sid",value:(0,o.default)("".concat(this.id,":").concat(this.sessionID)),path:"/"}}},{key:"server",get:function(){return C(this,D)||this.setServer(this.$get("server")),C(this,D)}},{key:"setServer",value:function(e){e&&(e=d.simplifyServerUrl(e),(e=new URL(e)).port||(e.port=M),this.$set("server",e.toString()),_(this,D,e))}},{key:"serverUrl",get:function(){var e=this.server;return e&&e.toString()}},{key:"webServerPort",get:function(){var e=this.server;return e?e.port:""}},{key:"serverName",get:function(){var e=this.server;return e?e.username||(e.pathname?e.pathname.substr(1):""):""}},{key:"webServerInfoUrl",get:function(){var e=this.server;return e?"".concat(e.origin,"/serverInfo"):""}},{key:"possibleServerInfoUrls",get:function(){var e=this.server,t=[this.webServerInfoUrl];if(this.isVerified)return t;var n="".concat(e.pathname).concat(e.pathname.endsWith("/")?"":"/","serverInfo");return t.push("".concat("https:"===e.protocol?"http:":"https:","//").concat(e.host).concat(n)),e.port!==M&&(t.push("https://".concat(e.hostname,":11443").concat(n)),t.push("http://".concat(e.hostname,":11443").concat(n))),t}},{key:"socketUrl",get:function(){if(C(this,A))return C(this,A);var e=this.serverUrl;return e?((e=new URL(e)).protocol="https:"===e.protocol?"wss:":"ws:",e.pathname="/ws",e.port=this.socketPort,e.toString()):""},set:function(e){_(this,A,e)}},{key:"serverVersion",get:function(){return C(this,R)},set:function(e){"v"===(e=e.toLowerCase())[0]&&(e=e.substring(1)),_(this,R,e)}},{key:"clientUpdate",get:function(){return this._clientUpdate},set:function(e){this._clientUpdate=e}},{key:"serverUrlRoot",get:function(){var e=this.serverUrl,t="";return e&&((e=new URL(e)).hash="",e.search="",e.pathname="",t=e.toString()),t&&!t.endsWith("/")&&(t+="/"),t}},{key:"makeServerUrl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return e&&e.startsWith("/")&&(e=e.substring(1)),this.serverUrlRoot+e}},{key:"uploadUrl",get:function(){return this.makeServerUrl("fileUpload")}},{key:"identify",get:function(){var e=this.server;return e?d.createIdentify(e,this.account):""}},{key:"company",get:function(){return this.$get("company")},set:function(e){this.$set("company",e)}},{key:"token",get:function(){return this.$get("token")},set:function(e){this.$set("token",e)}},{key:"permissions",get:function(){return this.$get("permissions")||[]},set:function(e){"string"==typeof e&&(e=(e=e.split(",")).filter((function(e){return e}))),this.$set("permissions",e)}},{key:"conference",get:function(){return this.$get("conference")},set:function(e){this.$set("conference",e)}},{key:"dismissedGroupLife",get:function(){return this.$get("dismissedGroupLife",90)},set:function(e){this.$set("dismissedGroupLife",e)}},{key:"apiScheme",get:function(){return this.$get("apiScheme")},set:function(e){this.$set("apiScheme",e)}},{key:"deptsCache",get:function(){return this.$get("deptsCache")},set:function(e){this.$set("deptsCache",e)}},{key:"rolesCache",get:function(){return this.$get("rolesCache")},set:function(e){this.$set("rolesCache",e)}},{key:"apiVersion",get:function(){var e=this.apiScheme;return e&&e.$version||""}},{key:"hasApiScheme",get:function(){return!!this.apiScheme}},{key:"cipherIV",get:function(){return this.token.substring(0,16)},set:function(e){this.$set("cipherIV",e)}},{key:"uploadFileSize",get:function(){return this.$get("uploadFileSize")},set:function(e){this.$set("uploadFileSize",e)}},{key:"lastLoginTime",get:function(){return this.$get("lastLoginTime")}},{key:"serverTimeOffset",get:function(){return this.$get("serverTimeOffset",0)},set:function(e){this.$set("serverTimeOffset",e)}},{key:"serverNowTime",get:function(){var e=this.serverTimeOffset;return e?new Date(Date.now()+e):new Date}},{key:"backendURL",get:function(){return this.$get("backendURL")},set:function(e){this.$set("backendURL",e)}},{key:"requestType",get:function(){return this.$get("requestType")},set:function(e){this.$set("requestType",e)}},{key:"requestFix",get:function(){return this.$get("requestFix")},set:function(e){this.$set("requestFix",e)}},{key:"autoLogin",get:function(){return this.$get("autoLogin")},set:function(e){this.$set("autoLogin",e)}},{key:"ldap",get:function(){return!!c.default.ui["login.ldap"]&&this.$get("ldap")},set:function(e){this.$set("ldap",e)}},{key:"avatar",get:function(){var e=this.$get("avatar");return!e||e.startsWith("https://")||e.startsWith("http://")?e:this.serverUrlRoot+e},set:function(e){this.$set("avatar",e)}},{key:"isNeverLogged",get:function(){return!this.lastLoginTime}},{key:"tokenAuthWindow",get:function(){return this.$get("tokenAuthWindow")||20}},{key:"generatedTimeOfToken",get:function(){return this.$get("generatedTimeOfToken",0)}},{key:"authKeyForServer",get:function(){if(this.ldap&&!(r=this.$get("authKey")).includes(x))return r;var e,t,n,r,a=(r=this.authKeyInfo).key;return"token"===r.type?(r=this.account,e=this.serverNowTime,t=this.tokenAuthWindow,64===(n=a).length?n=(0,o.default)("".concat(r).concat(a).concat(Math.round(e.getTime()/1e3/t))):32<=n.length&&(n=n.substring(0,32)),"".concat(n).concat((0,o.default)(n))):a}},{key:"serverSideIntegration",get:function(){return this.$get("serverSideIntegration",[])},set:function(e){this.$set("serverSideIntegration",e)}},{key:"stunPort",get:function(){return this.$get("stunPort","3478")},set:function(e){this.$set("stunPort",e)}},{key:"iceServers",get:function(){return this.$get("iceServers","")},set:function(e){this.$set("iceServers",e)}},{key:"admin",get:function(){return this.$get("admin","")}},{key:"isServerSideIntegrated",value:function(e){return this.$get("serverSideIntegration",[]).includes(e)}},{key:"isVersionSupport",value:function(e){return!!this.versionSupport&&this.versionSupport[e]}},{key:"setVersionSupport",value:function(e){e&&Object.assign(this.versionSupport,e)}},{key:"updateFromMember",value:function(e){e.account===this.account&&(this.realname=e.realname,this.avatar=e.avatar,this.status=e.status)}}])&&y(t.prototype,n),e&&y(t,e),Object.defineProperty(t,"prototype",{writable:!1}),d}(a.default);S(t.default=N,"NAME","USER"),S(N,"EVENT",k),S(N,"SCHEMA",a.default.SCHEMA.extend({lastLoginTime:{type:"timestamp"},config:{type:"object",defaultValue:{}},authKey:{type:"string"},authTokenLifetime:{type:"int"},tokenAuthWindow:{type:"int"},token:{type:"string"},cipherIV:{type:"string"},server:{type:"string"},serverVersion:{type:"string"},uploadFileSize:{type:"int"},autoLogin:{type:"boolean",default:!1},rememberMe:{type:"boolean",default:!0},signed:{type:"timestamp",setter:function(e,t){var n=t.signed;return t.isFirstSignedToday=e&&(0,u.isToday)(e)&&(!n||!(0,u.isSameDay)(e,n)),e}},admin:{type:"string",default:""}})),S(N,"PROXY_PROPERTIES",(0,d.createProxyPropertiesMap)(["lastLoginTime","server","serverVersion","uploadFileSize","signed","backendType","serverNowTime","authToken"],a.default.PROXY_PROPERTIES)),S(N,"PROXY_HANDLER",(0,d.createProxyHandler)(N.PROXY_PROPERTIES)),S(N,"STATUS",a.default.STATUS),DEBUG&&(n.g.$User=N)},12443:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=d(n(45780)),a=d(n(65286)),i=d(n(94128)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=f(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(61862)),u=d(n(74160)),s=n(82717),c=n(14227);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}var h="runtime.ready",m=!1;(function(){e=function*(){yield(0,l.initLang)(),o.default&&o.default.loadModules(),i.default.init({config:u.default,lang:l.default}),(0,s.initIM)(),(0,c.initConferenceUI)(),m=!0,a.default.emit(h)};var e,t=function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){p(a,r,o,i,l,"next",e)}function l(e){p(a,r,o,i,l,"throw",e)}i(void 0)}))};return function(){return t.apply(this,arguments)}})()(),t.default=function(e){return m?(e(),!1):a.default.once(h,e)}},13347:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.changeUserStatus=t.changeUserPassword=t.VersionSupport=t.FeatureMinVersions=void 0,t.getAuthToken=function(){return I.apply(this,arguments)},t.reconnect=t.logout=t.login=void 0,t.renewAuthToken=D;var o=_(n(91230)),a=_(n(24260)),i=_(n(68520)),l=n(15973),u=n(11491),s=S(n(727)),c=_(n(74160)),f=n(74543),d=n(90625),p=n(43058),h=S(n(11803)),m=_(n(84431)),y=n(33594),g=_(n(94128)),b=_(n(61862)),v=n(7217),w=n(78717);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function S(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=O(t))&&t.has(e))return t.get(e);var n,o,a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]);return a.default=e,t&&t.set(e,a),a}function _(e){return e&&e.__esModule?e:{default:e}}function C(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){j(a,r,o,i,l,"next",e)}function l(e){j(a,r,o,i,l,"throw",e)}i(void 0)}))}}var M,T=c.default.system["http.timeout"]||3e4;function I(){return(I=x((function*(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";try{var n=yield a.default.sendAndListen({method:"usergetauthtoken",params:[e,t]},!0);return null==n?void 0:n.data}catch(e){return null}}))).apply(this,arguments)}function D(){return A.apply(this,arguments)}function A(){return(A=x((function*(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:c.default.system.device,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:(0,v.getDeviceID)();try{var n=yield a.default.sendAndListen({method:"userrenewauthtoken",params:[e,t]},!0);return null==n?void 0:n.data}catch(e){return null}}))).apply(this,arguments)}function R(){U&&(clearTimeout(U),U=null)}function N(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"normal",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:T;try{e=(0,l.createUser)(e)}catch(t){return Promise.reject(new h.default(h.Codes.USER_INVALID,"User info is not valid.",{user:e}))}var r="silent"===t,i="simple"===t;return r||i||(t="normal",(0,l.setCurrentUser)(e)),DEBUG&&(console.collapse("Server.login","tealBg","[".concat(t,"] ").concat(e.identify),"tealPale"),console.log("user",e),console.log("user.isLogging",e.isLogging),console.trace("mode",t),console.groupEnd()),e?e.isLogging?Promise.reject(new h.default(h.Codes.BUSY,"Last login request not finish, please wait a minute.",{user:e})):i&&!e.isVerified?Promise.reject(new h.default(h.Codes.USER_INVALID,"User is not verified before reconnect.",{user:e})):(e.beginLogin(),(0,d.limitTimePromise)((0,u.requestServerInfo)(e),n).then((function(){return(0,y.initUserDatabase)(e.identify)})).then((function(){var t;return(t=P((t=e.serverVersion)?("v"===t[0].toLowerCase()&&(t=t.substring(1)),(0,f.compareVersions)(t,M.MIN_SUPPORT_VERSION)<0?(console.warn("The server version '".concat(t,"' not support, require the min version '").concat(M.MIN_SUPPORT_VERSION,"'.")),[!1,new h.default(h.Codes.SERVER_VERSION_NOT_SUPPORT,{version:c.default.pkg.displayVersion,serverVersion:t,minSupportVersion:M.MIN_SUPPORT_VERSION})]):[!0,null]):[!1,new h.default(h.Codes.SERVER_VERSION_UNKNOWN)],2))[0],(t=t[1])?Promise.reject(t):(0,p.checkClientUpdateInfo)(e).needUpdateForce?Promise.reject(new h.default(h.Codes.CLIENT_REQUIRE_UPDATE,"The server required a newer version client '".concat(e.clientUpdate.version,"', current version is '").concat(o.default.version,"'."),{version:o.default.version})):(e.setVersionSupport({fileServer:0!==(t=e).uploadFileSize,prependServerName:-1<(0,f.compareVersions)(t.serverVersion,M.MIN_PREPEND_SERVERNAME_VERSION),tokenAuth:-1<(0,f.compareVersions)(t.serverVersion,M.MIN_TOKEN_AUTH_VERSION),fetchUserProfileOnDemand:c.default.ui["chat.fetchUserProfileOnDemand"]&&-1<(0,f.compareVersions)(t.serverVersion,M.MIN_BASIC_USER_LIST_VERSION),messageGetListWithGid:-1<(0,f.compareVersions)(t.serverVersion,M.MIN_MESSAGE_GET_LIST_GID_VERSION),userGetListWithoutBasicParam:-1<(0,f.compareVersions)(t.serverVersion,M.MIN_USER_GET_LIST_WITHOUT_BASIC_PARAM_VERSION),chatSetAdmins:-1<(0,f.compareVersions)(t.serverVersion,M.MIN_CHAT_SET_ADMINS_VERSION),chatSetLastReadMessage:0<(0,f.compareVersions)(t.serverVersion,M.MIN_CHAT_SET_LAST_READ_MESSAGE_VERSION),chatSetLastReadMessageByIndex:0<=(0,f.compareVersions)(t.serverVersion,M.MIN_CHAT_SET_LAST_READ_MESSAGE_BY_INDEX_VERSION),userGetListByDeptOnlySelf:0<=(0,f.compareVersions)(t.serverVersion,M.MIN_USER_GET_LIST_BY_DEPT_ONLY_SELF_VERSION),continueToInviteConference:0<=(0,f.compareVersions)(t.serverVersion,M.MIN_CONTINUE_TO_INVITE_CONFERENCE),privateChat:0<=(0,f.compareVersions)(t.serverVersion,M.MIN_PRIVATE_CHAT_VERSION),messageSyncMissed:0<=(0,f.compareVersions)(t.serverVersion,M.MIN_SYNC_MISSING_VERSION),sidCookie:0<=(0,f.compareVersions)(t.serverVersion,M.MIN_COOKIE_SID_VERSION),p2pFileTransfer:0<=(0,f.compareVersions)(t.serverVersion,M.MIN_P2P_FILE_TRANSFER_VERSION)||!!process.env.HOT,mergeChats:0<=(0,f.compareVersions)(t.serverVersion,M.MIN_MERGE_CHATS_VERSION),chatSetConfig:0<=(0,f.compareVersions)(t.serverVersion,M.MIN_CHAT_SET_CONFIG_VERSION),collaboraEditing:0<=(0,f.compareVersions)(t.serverVersion,M.MIN_COLLABORA_EDIT_VERSION),chatGroupAvatar:0<=(0,f.compareVersions)(t.serverVersion,M.MIN_GROUP_AVATAR_VERSION),chatArchive:0<=(0,f.compareVersions)(t.serverVersion,M.MIN_CHAT_ARCHIVE_VERSION),xuanbot:0<=(0,f.compareVersions)(t.serverVersion,M.MIN_XUANBOT_VERSION)}),new Promise((function(t,n){var o=!1;a.default.login(e,{pingInterval:!r&&0<=(0,f.compareVersions)(e.serverVersion,M.MIN_PING_INTERVAL_VERSION),onClose:function(t,r,a,i){s.default.update(),(0,l.emitUserLoginEvent)("logout",e,r,a,i),o||(o=!0,n(new h.default(h.Codes.SOCKET_CLOSED,"Socket connection is unexpectedly disconnected when logging in, usually because the server encountered an unhandled error.")))}},i).then((function(n){var r,a,i;return o||(o=!0,g.default.isType("electron")&&e.config.useInitConference&&e.conference&&"srs"===e.conference.backend&&void 0===e.lastStatusBeforeDisconnect&&(r=g.default.call("os.uptime"),a=localStorage.getItem("conferenceLastInit"),i=Math.floor(Date.now()/1e3),(!a||i-r>parseInt(a,10))&&(localStorage.setItem("conferenceLastInit",i.toString()),(0,w.executeCommand)("createConference","".concat(e.id,"&").concat(e.id),"_",!1,"audio"))),t(n)),n})).catch((function(e){return o||(o=!0,n(e)),e}))})))})).then(x((function*(){if(e.isVersionSupport("sidCookie"))try{yield g.default.call("docCookies.set",e.sidCookieInfo),yield g.default.call("docCookies.set",e.sidCookieInfoWithoutUserId),e.sidCookieUpdate=Date.now(),DEBUG&&console.log("Session cookie setted",E(E({},e.sidCookieInfo),{},{time:e.sidCookieUpdate,sessionID:e.sessionID,userID:e.id}))}catch(t){DEBUG&&console.error("Error when set cookie",e,t)}}))).then((function(){return m.default.loadRecentAccessMembersFromDatabase()})).then((function(){return e.endLogin(!0),e.save(),m.default.store(e),z(),c.default.ui.defaultUser&&g.default.call("buildIn.removeDefaultUser"),r||((0,l.emitUserLoginEvent)("login",e,null,i),i&&(0,l.emitUserLoginEvent)("reconnect",e)),Promise.resolve(e)})).catch((function(t){var n;return"BACKEND_SERVER_ERROR"!==t.code?((t=h.default.create(t)).setExtras("user",e),n=["HTTP_STATUS_401",h.Codes.INVALID_TOKEN].includes(t.code),e.endLogin(!1,n),r||(0,l.emitUserLoginEvent)("login",e,t,i),Promise.reject(t)):Promise.reject()})).finally((function(){e.isLogging&&e.endLogin(!1)}))):Promise.reject(new h.default(h.Codes.USER_INVALID,"User is not set.",{user:e}))}function B(){var e=(0,l.getCurrentUser)();return e.isOnline?Promise.resolve(e):N(e,"simple")}function L(e){return a.default.changeUserStatus(e)}function F(e){return a.default.changeUserPassword(e)}(0,l.onSwapUser)((function(){a.default.close()})),t.FeatureMinVersions=M,(n=M||(t.FeatureMinVersions=M={})).MIN_SUPPORT_VERSION="6.0.beta",n.MIN_PING_INTERVAL_VERSION="3.0.0-beta.4",n.MIN_PREPEND_SERVERNAME_VERSION="3.1",n.MIN_TOKEN_AUTH_VERSION="3.2",n.MIN_BASIC_USER_LIST_VERSION="3.2.4",n.MIN_MESSAGE_GET_LIST_GID_VERSION="4.0.beta2",n.MIN_CHAT_SET_ADMINS_VERSION="4.0.beta3",n.MIN_USER_GET_LIST_WITHOUT_BASIC_PARAM_VERSION="4.0.beta2",n.MIN_USER_GET_LIST_BY_DEPT_ONLY_SELF_VERSION="4.3",n.MIN_CHAT_SET_LAST_READ_MESSAGE_VERSION="4.2",n.MIN_CONTINUE_TO_INVITE_CONFERENCE="4.4.1",n.MIN_PRIVATE_CHAT_VERSION="4.7",n.MIN_SYNC_MISSING_VERSION="5.0",n.MIN_COOKIE_SID_VERSION="5.0",n.MIN_P2P_FILE_TRANSFER_VERSION="5.1",n.MIN_MERGE_CHATS_VERSION="5.6",n.MIN_CHAT_SET_LAST_READ_MESSAGE_BY_INDEX_VERSION="5.6",n.MIN_CHAT_SET_CONFIG_VERSION="6.0.beta",n.MIN_COLLABORA_EDIT_VERSION="6.4",n.MIN_GROUP_AVATAR_VERSION="6.5",n.MIN_CHAT_ARCHIVE_VERSION="6.6",n.MIN_XUANBOT_VERSION="7.0",t.VersionSupport=void 0,t.VersionSupport={fileServer:"fileServer",prependServerName:"prependServerName",tokenAuth:"tokenAuth",fetchUserProfileOnDemand:"fetchUserProfileOnDemand",messageGetListWithGid:"messageGetListWithGid",userGetListWithoutBasicParam:"userGetListWithoutBasicParam",chatSetAdmins:"chatSetAdmins",chatSetLastReadMessage:"chatSetLastReadMessage",chatSetLastReadMessageByIndex:"chatSetLastReadMessageByIndex",userGetListByDeptOnlySelf:"userGetListByDeptOnlySelf",continueToInviteConference:"continueToInviteConference",privateChat:"privateChat",messageSyncMissed:"messageSyncMissed",sidCookie:"sidCookie",p2pFileTransfer:"p2pFileTransfer",mergeChats:"mergeChats",chatSetConfig:"chatSetConfig",collaboraEditing:"collaboraEditing",chatGroupAvatar:"chatGroupAvatar",chatArchive:"chatArchive",xuanbot:"xuanbot"};var U=null,z=function(){var e=x((function*(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:(0,l.getCurrentUser)();R(),t&&t.hasAuthToken&&(t.isAuthTokenNeedRenew&&(e=yield D(),t.setAuthToken(e),t.tokenNeedRenew=!1,t.save()),U=setTimeout((function(){return z()}),432e5))}));return function(){return e.apply(this,arguments)}}();t.login=N,t.reconnect=B,t.changeUserStatus=L,t.changeUserPassword=F,n=function(){var e=x((function*(e){R();var t,n=(0,l.getCurrentUser)();n&&DEBUG&&(console.collapse("Server.logout","tealBg",n.identify,"tealPale"),console.trace("currentUser",n),console.groupEnd()),e&&(t={tray:{text:b.default.string("member.status.disconnect")}}),s.default.update(t),a.default.logout(),n&&n.markUnverified(),e&&((0,s.requestAttention)("critical"),g.default.call("ui.showAndFocusWindow"))}));return function(t){return e.apply(this,arguments)}}(),t.logout=n,a.default.setHandlers(i.default),i={login:N,reconnect:B,logout:n,socket:a.default,changeUserStatus:L,changeUserPassword:F},t.default=i},95126:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openInCollabora=t.generateCollaboraURL=void 0;var r,o=(r=n(61862))&&r.__esModule?r:{default:r},a=n(78717),i=n(15973),l=n(4547);function u(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=t.serverName,o=t.sessionID,a=t.id,i=t.requestType,u=t.requestFix,s=(f=t.server).protocol,c=f.hostname,f=f.port;return(0,l.generateRequestURL)(t.backendURL,"integration","wopi",t.isVersionSupport("collaboraEditing")?{fileID:e.id,serverName:r,protocol:s.replace(":",""),hostname:c,port:f,sessionID:o,mode:n?"rw":"ro",messageID:e.messageID,userID:a}:{fileID:e.id,serverName:r,protocol:s.replace(":",""),hostname:c,port:f,sessionID:o,userID:a},{requestType:i,requestFix:u})}t.generateCollaboraURL=u,t.openInCollabora=function(e){var t,n,r,l=1<arguments.length&&void 0!==arguments[1]&&arguments[1],s=(0,i.getCurrentUser)();s.isServerSideIntegrated("collaboraOffice")?(t=u(e,s,l),n={ppt:"#b13719",doc:"#1651aa",xls:"#0f703b"}[e.previewType],r=["setTimeout(function(){",'if(L.Map.THIS.stateChangeHandler.getItemValue(".uno:SpellOnline") !== "false") {L.Map.THIS.sendUnoCommand(".uno:SpellOnline");}','window.localStorage.setItem("SpellOnline", false)',"}, 2000);"],"ppt"===e.previewType?r.push('L.Map.THIS.fire("fullscreen");'):e.editable&&!l&&r.push("\n            setTimeout(() => {\n                const editButton = document.createElement('a');\n                const editButtonIcon = document.createElement('span');\n                editButtonIcon.setAttribute('class', 'w2ui-tb-icon w2ui-icon-pencil');\n                editButton.appendChild(editButtonIcon);\n                const editButtonText = document.createTextNode(' ".concat(o.default.string("menu.edit"),"');\n                editButton.appendChild(editButtonText);\n                editButton.setAttribute('href', '").concat(u(e,s,!0),"');\n                editButton.setAttribute('style', 'padding: 8px 12px; font-family: Arial; text-decoration: none; color: inherit; border: 1px var(--co-color-border-dark) solid; border-radius: 4px; margin-right: 8px;');\n                const titleDiv = document.querySelector('.main-nav.readonly #document-titlebar .document-title');\n                titleDiv.insertBefore(editButton, titleDiv.firstChild);\n                document.querySelector('.main-nav.readonly').setAttribute('style', 'display:unset !important;')\n            }, 2000);\n        ")),(0,a.executeCommand)("openWebviewWindow",{id:"officeFile-".concat(e.id),title:e.name,source:t,favicon:{doc:"mdi-file-word-box-outline text-blue",xls:"mdi-file-excel-box-outline text-green",ppt:"mdi-file-powerpoint-box-outline text-red"}[e.previewType],titleBarStyle:{boxShadow:"none",border:"none",background:n},theme:"dark",windowOptions:{maximizeAfterShow:!0},options:{executeJavaScript:{code:r.join(""),userGesture:"ppt"===e.previewType}}})):(0,a.executeCommand)("showMessager",o.default.string("integrations.collaboraOffice.notConfigured"),{type:"warning"})}},55471:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.diagnoseNetwork=function(e,t,n){return g.apply(this,arguments)};var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=p(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(11803)),a=d(n(94128)),i=n(15973),l=d(n(74160)),u=d(n(61862)),s=n(13347),c=n(7066),f=n(16986);function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function h(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function g(){var e;return e=function*(e,t,n){function r(e){var t;e.code&&(null==e.message&&(e.message=u.default.format("error.".concat(e.code),e)),(t=u.default.format("error.suggestion.".concat(e.code),e))&&(e.suggestions=t.split("|"))),null==e.time&&(e.time=Date.now()),b[e.type]++,e.id=y.length,y.push(e),DEBUG&&(t={error:"red",success:"green",warning:"yellow",info:"blue"},console.collapse("Diagnostics","blueBg","".concat(e.type.toUpperCase()).concat(e.code?"[".concat(e.code,"]"):""),"".concat(t[e.type],"Pale"),e.message,t[e.type]),e.detail&&console.log("DETAIL",e.detail),console.trace("RESULT",e),console.groupEnd()),n&&n(e,[].concat(y))}e=(0,i.createUser)(e),"function"==typeof t&&(n=t,t=null);var d=e.server,p=d.hostname,h=d.port,y=[],g=(0,f.isValidIP)(p)?p:null,b={error:0,warning:0,info:0,success:0};if(r({type:"info",message:u.default.format("diagnostics.startingDiagnoseNetwork",{url:d.toString(),account:e.account,version:"".concat(l.default.pkg.version),server:d,user:e}),detail:"log time: ".concat((0,c.formatDate)(Date.now(),"yyyy-MM-dd hh:mm:ss.SSS"),"\nbuild time: ").concat((0,c.formatDate)(l.default.pkg.buildTime),"\nplatform: ").concat(a.default.type,"\nos: ").concat(a.default.env.os,"\narch: ").concat(null==(d=a.default.env)?void 0:d.arch)}),!t)try{return e=yield(0,s.login)(e,"silent",1e4),r({type:"success",message:u.default.string("diagnostics.endDiagnoseNetwork")}),y}catch(w){t=o.default.create(w)}if(d=!1,"HTTP_REQUEST_FAIL"===t.code||"COMMON_ERROR"===t.code){!1===navigator.onLine&&(r({type:"warning",code:"NET_OFFLINE"}),d=!0),g||!a.default.has("netTools.getNameServers")||(0===(v=a.default.call("netTools.getNameServers")).length||1===v.length&&"127.0.0.1"===v[0])&&r({type:"warning",code:o.Codes.NAMESERVER_NOT_FOUND,detail:v});var v=!0;if(!g&&a.default.has("netTools.dnsLookup"))try{g=yield a.default.call("netTools.dnsLookup",p),r({type:"info",message:u.default.format("diagnostics.resolveHostname",{hostname:p,ip:g})})}catch(e){var w=o.default.create(e,e.code?"HOST_".concat(e.code):"NET_LOOKUP_FAIL");r({type:"error",code:w.code,hostname:p,detail:w.detailMessage,error:w}),v=!(d=!0)}if(v&&a.default.has("netTools.ping"))try{r(1e3<(O=(S=yield a.default.call("netTools.ping",p)).time)?{type:"warning",hostname:p,message:u.default.format("diagnostics.pingWithLongTime",{hostname:p,pingTime:O}),pingTime:O,detail:S.output}:{type:"info",hostname:p,message:u.default.format("diagnostics.pingLogs",{hostname:p,pingTime:O}),pingTime:O,detail:S.output})}catch(e){O=o.default.create(e,"NET_PING_FAIL"),r({type:"error",code:O.code,hostname:p,detail:O.detailMessage,error:O}),d=!0,S=null}var O=y.some((function(e){return"NET_PING_FAIL"===e.code})),S=!1;if(g&&a.default.has("netTools.isSameSubnet")&&(S=a.default.call("netTools.isSameSubnet",g)),v&&!S&&a.default.has("netTools.traceroute"))try{var _=yield a.default.call("netTools.traceroute",p,null,null,O?15e3:0);r({type:"info",hostname:p,message:u.default.format("diagnostics.tracerouteInfo",{hostname:p}),detail:_})}catch(e){g=o.default.create(e,"NET_TRACEROUTE_ERROR"),r({type:"error",code:g.code,hostname:p,message:u.default.format("diagnostics.tracerouteError",{hostname:p}),detail:g.detailMessage,error:g}),d=!0}if(v&&a.default.has("netTools.request")){S=t.getExtras("serverInfoUrl")||e.webServerInfoUrl;try{var C=yield a.default.call("netTools.request",S,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:"data=".concat(JSON.stringify({method:"sysgetserverinfo",params:[e.serverName,e.account,e.authKeyForServer,e.apiVersion],version:l.default.pkg.displayVersion||l.default.pkg.version,device:l.default.system.device||"desktop",lang:u.default.name})),timeout:6e3}),E=new Set([401,402,403]),P=new Set([405]),k=["POST to ".concat(S),"    Response:","        Headers: ".concat(JSON.stringify(C.headers)),"        Status: ".concat(C.statusCode," - ").concat(C.statusMessage),"        Body: ".concat(C.data)].join("\n");200===C.statusCode?r({type:"info",hostname:p,port:h,serverInfoUrl:S,message:u.default.format("diagnostics.serverInfo",{serverInfoUrl:S}),detail:k,response:C}):(r({type:"error",code:E.has(C.statusCode)||P.has(C.statusCode)?"HTTP_STATUS_".concat(C.statusCode):"HTTP_STATUS_ERROR",hostname:p,port:h,serverInfoUrl:S,detail:k,response:C}),d=!0)}catch(e){O=e instanceof o.default?e:o.default.create(e),r({port:h,hostname:p,type:"error",code:O.code===o.Codes.HTTP_ETIMEDOUT?o.Codes.HTTP_ETIMEDOUT:O.code&&"HTTP_ERROR"!==O.code?"HTTP_".concat(O.code):"HTTP_ERROR",url:S,detail:O.detailMessage,error:O}),d=!0}}}return d||r(m({time:t.time,type:"error",code:t.code,loginError:t,message:u.default.error(t),detail:"".concat(t.message).concat(t.detail?"\n".concat(t.detail):"")},t.extras)),0<b.error||0<b.warning?r({type:0<b.error?"error":"warning",message:u.default.format("diagnostics.endDiagnoseNetworkWithErrors",{errorsCount:b.error,warningsCount:b.warning})}):r({type:"success",message:u.default.string("diagnostics.endDiagnoseNetwork")}),y},(g=function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){y(a,r,o,i,l,"next",e)}function l(e){y(a,r,o,i,l,"throw",e)}i(void 0)}))}).apply(this,arguments)}},43493:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getJSONOptimizer=t.encodeSocketMessage=t.encodeJSON=t.encodeData=t.decodeSocketMessage=t.decodeJSON=t.decodeData=void 0;var r,o=i(n(38076)),a=i(n(77537));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){return r&&r.version===e.apiVersion&&r.identify===e.identify||((r=new o.default(e.apiScheme)).identify=e.identify),r}function u(e,t,n){return l(e).encodeToJSON(t,n,"requestPack")}function s(e,t){return l(e).decode(t,null,"responsePack")}t.getJSONOptimizer=l,t.decodeJSON=function(e,t){return l(e).decodeFromJSON(t)},t.encodeJSON=u,t.decodeData=s,t.encodeData=function(e,t,n){return l(e).encode(t,n,"requestPack")},t.encodeSocketMessage=function(e,t,n){var r,o,a,i,l;try{r=u(e,t.requestSchemeName,t.requestData)}catch(e){throw DEBUG_E&&(console.collapse("Encode ERROR","redBg",e.message,"redPale"),console.error(e),console.log("scheme",e.scheme),console.log("optimizer",e.optimizer),console.log("originalData",JSON.stringify(e.originalData)),console.log("encodeData",JSON.stringify(e.encodeData)),console.log("socketMessage",t),console.groupEnd()),e}return DEBUG_V&&n&&(o=t.json.length,a=r.length,n.encodedSize+=a,n.sendSize+=o,i=n.encodedSize+n.receiveSize,l=n.sendSize+n.decodedSize,console.collapse("Encoded","indigoBg",t.requestSchemeName,"indigoPale","".concat(o,"  ").concat(a),"bold","".concat((100*a/o).toFixed(1),"%%"),a<o?"green":o===a?"muted":"red","average ".concat((100*n.encodedSize/n.sendSize).toFixed(1),"%%"),n.sendSize>n.encodedSize?"green":n.sendSize===n.encodedSize?"muted":"red","total ".concat((100*i/l).toFixed(1),"%%"),i<l?"green":l===i?"muted":"red"),console.log("original",t.requestData),console.log("encoded",r),console.groupEnd()),"userloginRequest"===t.requestSchemeName&&e.isVersionSupport("prependServerName")?e.serverName+r:r},t.decodeSocketMessage=function(e,t,n){var r,o,i,l="string"==typeof t?JSON.parse(t):t;if(e&&e.hasApiScheme&&Array.isArray(l))try{r=s(e,l)}catch(e){return DEBUG_E&&(console.collapse("Decoded ERROR","redBg",e.message,"redPale"),console.error(e),console.log("jsonData",l),console.log("scheme",e.scheme),console.log("optimizer",e.optimizer),console.log("encodedData",JSON.stringify(e.encodedData)),console.log("originalData",JSON.stringify(e.originalData)),console.groupEnd()),[]}else r=l;return DEBUG_V&&n&&e&&e.hasApiScheme&&(e=t?JSON.stringify(l).length:0,l=r?JSON.stringify(r).length:0,n.decodedSize+=l,n.receiveSize+=e,o=n.encodedSize+n.receiveSize,i=n.sendSize+n.decodedSize,console.collapse("Decoded","indigoBg","".concat(r.module?"".concat(r.module,"/"):"").concat(r.method,"Response"),"indigoPale","".concat(e,"  ").concat(l),"bold","".concat((100*e/l).toFixed(1),"%%"),e<l?"green":l===e?"muted":"red","average ".concat((100*n.receiveSize/n.decodedSize).toFixed(1),"%%"),n.decodedSize>n.receiveSize?"green":n.receiveSize===n.decodedSize?"muted":"red","total ".concat((100*o/i).toFixed(1),"%%"),o<i?"green":i===o?"muted":"red"),console.log("original",r),console.log("encoded",t),console.groupEnd()),new a.default(r)}},11491:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestServerInfo=void 0;var r=c(n(74160)),o=c(n(61862)),a=c(n(94128)),i=n(7066),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==f(e)&&"function"!=typeof e)return{default:e};if((t=s(t))&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(n(11803)),u=n(13347);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function c(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function m(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=a.default.access("net");n=function(){e=function*(e){PERF_MARK("serverInfoBegin");var t,n,a,s,c,p,h=JSON.stringify({method:"sysgetserverinfo",params:[(v=e).serverName,v.account,v.authKeyForServer,DEBUG?"":v.apiVersion],version:r.default.pkg.displayVersion||r.default.pkg.version,device:r.default.system.device||"desktop",lang:o.default.name}),m=new Set(["HTTP_STATUS_401","HTTP_STATUS_402","HTTP_STATUS_403"]),b=new Set(["HTTP_STATUS_405"]),v=e.possibleServerInfoUrls,w=[],O=null,S=!1,_=d(v);try{for(_.s();!(t=_.n()).done;){var C=t.value;try{var E=Date.now(),P=yield g.postJSON(C,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"data=".concat(h)});if(!P)throw new l.default(l.Codes.HTTP_DATA_ERROR,"Empty data.");if(P.token)return P.requestConsumedTime=Date.now()-E,a=P,s=C,(n=e).socketPort=a.chatPort,n.token=a.token,n.serverVersion="xxdbuildversion"===a.version.toLowerCase()?"99.9.9":a.version,n.socketUrl=a.socketUrl,n.uploadFileSize=a.uploadFileSize,n.backendType=a.backend,n.backendURL=a.backendURL,n.clientUpdate=a.clientUpdate,n.company=a.company,n.permissions=a.permissions,n.enableClientAES=!!a.enableClientAES,n.dismissedGroupLife=a.dismissedGroupLife,n.serverTimeOffset=(0,i.createDate)(a.serverTime).getTime()+Math.floor(a.requestConsumedTime/2)-Date.now(),a.apiScheme&&(n.apiScheme=a.apiScheme),a.conference?n.conference=a.conference:a.owt&&(n.conference=y(y({},a.owt),{},{backend:"owt"})),s!==n.webServerInfoUrl&&n.setServer(s.endsWith("/serverInfo")?s.substring(0,s.length-11):s),a.authToken&&n.setAuthToken(a.authToken),a.authTokenLifetime&&n.setAuthTokenConfig(a.authTokenLifetime,a.authTokenAuthWindow),a.tokenNeedRenew&&(n.tokenNeedRenew=!0),a.integration&&(n.serverSideIntegration=a.integration),a.requestType&&(n.requestType=a.requestType),a.requestFix&&(n.requestFix=a.requestFix),a.stunPort&&(n.stunPort=a.stunPort),a.iceServers&&(n.iceServers=a.iceServers),e=n,PERF_MARK("serverInfoEnd","serverInfoBegin","serverInfoTime"),e;throw new l.default(l.Codes.HTTP_DATA_ERROR,P.message||"Server token is empty.")}catch(t){var k=l.default.create(t),j=k.getExtras();if(j&&j.responseText){if("map[push:<nil> update:map[]]\n"===j.responseText){k.detail="Server version not supported.\n-------------------\n",k.setExtras({version:r.default.pkg.version,serverVersion:"2.5",minSupportVersion:"3.0"}),k.code=l.Codes.SERVER_VERSION_NOT_SUPPORT,O=k,w.push(k);break}try{"string"==typeof j.responseText&&/Verify authentication credentials error: \[VerifyLogin\] backend server \[.*\] cannot found\. \n/.test(j.responseText)&&(S=!0,x={server:e.serverUrlRoot,account:e.account,authKey:e.authKey,rememberMe:e.rememberMe,autoLogin:e.autoLogin,ldap:e.ldap},e.endLogin(!1,!0),(0,u.login)(x));var x,M=JSON.parse(j.responseText);if(M&&"object"===f(M)){M.message&&(k.message=M.message,k.code=M.code||"Invalid Token."===M.data?l.Codes.INVALID_TOKEN:"SER_ERR"),O=k,w.push(k);break}}catch(t){}}if(k.setExtras("serverInfoUrl",C),w.push(k),m.has(k.code)||b.has(k.code)){O=k;break}}}}catch(t){_.e(t)}finally{_.f()}if(w.length&&!S)throw O=O||w[0],O=l.default.create(O),1<w.length&&(c=[],p=[],w.forEach((function(e,t){var n;e!==O&&(c.push("Attempt #".concat(t,":"),"    [".concat(e.code,"] ").concat(e.message&&e.message!=="[".concat(e.code,"]")?e.message:"")),t=e.detail,n=e.stack,t&&c.push("Detail: ".concat(e.detail)),n&&c.push("Stack: ".concat(e.stack)),c.push("\n"),p.push(e))})),O.setExtras("attemptsDetail",c.join("\n")),O.setExtras("attempts",p)),PERF_MARK("serverInfoEndWithError","serverInfoBegin","serverInfoTime"),O;if(PERF_MARK("serverInfoEnd","serverInfoBegin","serverInfoTime"),S)throw new l.default(l.Codes.BACKEND_SERVER_ERROR)};var e,t=function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){h(a,r,o,i,l,"next",e)}function l(e){h(a,r,o,i,l,"throw",e)}i(void 0)}))};return function(e){return t.apply(this,arguments)}}(),t.requestServerInfo=n},68520:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(41832),o=c(n(84431)),a=c(n(61862)),i=n(75738),l=c(n(65286)),u=n(15973),s=n(96521);function c(e){return e&&e.__esModule?e:{default:e}}t.default={userLogin:function(e,t){var n=t.user;if(e.isSuccess){if(e.rid===t._loginRid)return n.$set(e.data),e.data.status&&(n.status=e.data.status),!0;if(e.data.id===n.id)return(0,u.emitUserLoginOnOtherDeviceEvent)(e.device),!0;(t=o.default.getMember(e.data.id))?(t.$set(e.data),t.status=e.data.status,o.default.store(t)):o.default.store(e.data)}else(n.isLogging||e.data.id===n.id)&&e.message&&(n.loginError=new Error(e.message));return!1},userLogout:function(e,t){var n;e.isSuccess&&(n=t.user,e.data.id===n.id&&t.isConnected?(n.markUnverified(),t.close()):(n=o.default.getMember(e.data.id))&&(n.status=i.STATUS.unverified,o.default.store(n),(0,r.emitMemberLogout)(n)))},sysError:function(e){(e=a.default.error(e))&&l.default.emit("ui.showMessage",e)},userSyncSettings:function(e,t){var r;e.isSuccess&&(r=t.user.config,(t=e.data)&&r.hash!==t.hash&&(t.reset?r.reset({}):t.lastChangeTime&&t.lastChangeTime>r.lastChangeTime?r.reset(t):r.set(t,null,!0),n.g.ExtsRuntime&&n.g.ExtsRuntime.exts&&n.g.ExtsRuntime.exts.exts&&n.g.ExtsRuntime.exts.exts.forEach((function(e){void 0!==r.extsState[e.name]&&e.isRemote&&(0,s.setExtensionDisabled)(e,r.extsState[e.name])}))))},userUpdate:function(e,t){if(e.isSuccess&&e.data&&(t=t.user,e.data.id&&e.data.id!==t.id||(t.$set(e.data),e.data.status&&(t.status=e.data.status)),e.data.id&&(t=o.default.getMember(e.data.id))))return t.$set(e.data),e.data.status&&(t.status=e.data.status),o.default.store(t),t},userKickoff:function(e,t){e=e.reason,t.close(null,e?"USER_KICKOFF_".concat(e):"USER_KICKOFF")},userGetList:function(e){if(e.isSuccess)return o.default.store(e.data)},userGetDeleted:function(e){e.isSuccess&&o.default.store(e.data)},userSearch:function(e){if(e.isSuccess)return{data:e.data,pager:e.pager}},sysSessionID:function(e,t){(e.isSuccess||e.sessionID)&&(t.user.sessionID=e.data||e.sessionID)},ping:function(){}}},77537:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(74160)),o=i(n(61862)),a=i(n(61997));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");u(this,"method",void 0),u(this,"params",void 0),u(this,"data",void 0),u(this,"result",void 0),u(this,"version",void 0),u(this,"device",void 0),u(this,"rid",void 0),u(this,"module",void 0),u(this,"lang",void 0),u(this,"userID",void 0),u(this,"_requestData",void 0),u(this,"pager",void 0),u(this,"message",void 0),Object.assign(this,{version:r.default.pkg.displayVersion||r.default.pkg.version,device:r.default.system.device||"desktop",lang:o.default.name},t)}var t,n,i;return t=e,i=[{key:"create",value:function(t){return t instanceof e?t:new e(t="string"==typeof t?{method:t}:t)}}],(n=[{key:"createRequestID",value:function(){return this.rid||(this.rid=(0,a.default)()),this.rid}},{key:"apiName",get:function(){var e=this.method.toLowerCase();return void 0!==this.module&&"im"!==this.module&&this.module.length?"".concat(this.module.toLowerCase(),"/").concat(e):e}},{key:"requestSchemeName",get:function(){return"".concat(this.apiName,"Request")}},{key:"json",get:function(){return JSON.stringify(this.requestData)}},{key:"requestData",get:function(){var e={version:this.version,device:this.device,lang:this.lang,method:this.method.toLowerCase()};return void 0!==this.params&&(e.params=this.params),void 0!==this.rid&&(e.rid=this.rid),void 0!==this.userID&&(e.userID=this.userID),void 0!==this.module&&"im"!==this.module&&(e.module=this.module),Object.assign(e,this._requestData)},set:function(e){this._requestData=e}},{key:"isSuccess",get:function(){return"success"===this.result||void 0===this.result}}])&&l(t.prototype,n),i&&l(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),t.default=n},24260:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AppSocket=void 0;var r=d(n(2568)),o=d(n(77537)),a=d(n(65286)),i=d(n(61862)),l=d(n(74160)),u=d(n(94128)),s=n(43493),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==y(e)&&"function"!=typeof e)return{default:e};if((t=f(t))&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(n(11803));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){p(a,r,o,i,l,"next",e)}function l(e){p(a,r,o,i,l,"throw",e)}i(void 0)}))}}function m(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function S(e){return 1e3<e?"red":200<e?"orange":50<e?"muted":"green"}function _(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:l.default.system["socket.timeout"];return new Promise((function(o,i){var l=null,u=setTimeout((function(){l&&a.default.off(l);var t=new Error('Socket server request "'.concat(e,'" timed out.'));t.code="SOCKET_TIMEOUT",i(t)}),r);l=a.default.on(E,(function(r,s,c){r.apiName!==e.toLowerCase()||r.rid&&r.rid!==t||(u&&clearTimeout(u),l&&a.default.off(l),c?i(c):o(n?r:s))}))}))}var C=u.default.access("Socket"),E="app_socket.message";u=function(){var e=d,t=C;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t);var n,u,f=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(n=t?(n=w(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,n&&("object"===y(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return v(r)}}(d);function d(){var e=this,t=d;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return O(v(e=f.call.apply(f,[this].concat(r))),"user",null),O(v(e),"handlers",{}),O(v(e),"requestTimes",DEBUG?{}:null),e}return e=d,(t=[{key:"addMockResponse",value:function(e,t){DEBUG&&(this.mocks||(this.mocks={}),this.mocks[e.toLowerCase()]=t)}},{key:"send",value:function(e){var t=this;return new Promise((function(n){var r=o.default.create(e),a=(t.user.id&&(r.userID=t.user.id),DEBUG?r.createRequestID():null);if(DEBUG&&t.mocks&&t.mocks[r.apiName])return setTimeout((function(){var e=t.mocks[r.apiName](r);e&&!e.timeout&&t.handleMessage(o.default.create(e))}),100),void n(r);var i=DEBUG?process.uptime?1e3*process.uptime():(new Date).getTime():null,l=t.user.hasApiScheme?(0,s.encodeSocketMessage)(t.user,r,t.perfData):r.json;g(w(d.prototype),"send",t).call(t,l,(function(){var e,o,u;DEBUG&&(DEBUG_V||"ping"!==r.apiName)&&((r.startSendTime=i)?(e=process.uptime?1e3*process.uptime():(new Date).getTime(),r.endSendTime=e,t.requestTimes[a]=e,50<(o=Object.keys(t.requestTimes)).length&&o.forEach((function(n){2e4<e-o[n]&&delete t.requestTimes[n]})),u=e-i,t.perfData.sendCount+=1,t.perfData.sendTotal+=u,t.perfData.sendAverage=t.perfData.sendTotal/t.perfData.sendCount,console.collapse("Socket Send ","indigoBg",r.apiName,"indigoPale","".concat(u.toFixed(2)," ms, average ").concat(t.perfData.sendAverage.toFixed(2)," ms"),S(u))):console.collapse("Socket Send ","indigoBg",r.apiName,"indigoPale"),console.trace("msg",r),t.user.hasApiScheme&&console.log("encoded",l),console.groupEnd()),n(r)}))}))}},{key:"setHandler",value:function(e,t){if("object"===y(e))return DEBUG&&console.error("Warning: Use AppSocket.setHandlers(handlers) to set multiple handlers one time."),this.setHandlers(e);DEBUG&&this.handlers[e.toLowerCase()]&&console.error('Warning: Socket message handler named "'.concat(e,'" already exists.')),this.handlers[e.toLowerCase()]=t}},{key:"unsetHandler",value:function(e){delete this.handlers[e.toLowerCase()]}},{key:"setHandlers",value:function(e){var t=this;Object.keys(e).forEach((function(n){DEBUG&&t.handlers[n.toLowerCase()]&&console.error('Warning: Socket message handler named "'.concat(n,'" already exists.')),t.handlers[n.toLowerCase()]=e[n]}))}},{key:"getHandler",value:function(e){return e?this.handlers[e.toLowerCase()]:null}},{key:"handleMessage",value:function(e){var t=null,n=(DEBUG&&e.rid&&(n=this.requestTimes[e.rid])&&(delete this.requestTimes[e.rid],t=(process.uptime?1e3*process.uptime():(new Date).getTime())-n,this.perfData.count+=1,this.perfData.total+=t,this.perfData.average=this.perfData.total/this.perfData.count),this.waitingMessages),r=e.apiName;if(n)return"userlogin"===r&&e.rid===this._loginRid||"syssessionid"===r?n[r]=e:(n.others||(n.others=[]),n.others.push(e)),DEBUG&&(t?console.collapse("SOCKET WAITING Data ","purpleBg",r,"purplePale",e.isSuccess?"OK":"FAILED",e.isSuccess?"greenPale":"dangerPale","".concat(t," ms, average ").concat(this.perfData.average.toFixed(2)," ms"),S(t)):console.collapse("SOCKET WAITING Data ","purpleBg",r,"purplePale",e.isSuccess?"OK":"FAILED",e.isSuccess?"greenPale":"dangerPale"),console.log("msg",e),console.log("socket",this),console.groupEnd()),void(n.userlogin&&n.syssessionid&&(this.waitingMessages=null,this.handleMessage(n.userlogin),this.handleMessage(n.syssessionid),n.others&&n.others.forEach(this.handleMessage.bind(this))));var o,i=this.getHandler(r);if(i){for(;i&&"string"==typeof i;)i=this.getHandler(i);i&&(o=i(e,this))}else o=e.data;void 0===o&&(o=e.isSuccess),DEBUG&&(DEBUG_V||"ping"!==e.apiName?(t?console.collapse("SOCKET Data ","purpleBg",r,"purplePale",i?e.isSuccess?"OK":"FAILED":"NOT-HANDLED",e.isSuccess&&i?"greenPale":i?"yellowPale":"dangerPale","".concat(t.toFixed(2)," ms, average ").concat(this.perfData.average.toFixed(2)," ms"),S(t)):console.collapse("SOCKET Data ","purpleBg",r,"purplePale",i?e.isSuccess?"OK":"FAILED":"NOT-HANDLED",e.isSuccess&&i?"greenPale":i?"yellowPale":"dangerPale"),console.log("msg",e),console.log("socket",this),console.groupEnd()):console.color("SOCKET Data ","purpleBg","ping","purplePale",e.isSuccess?"OK":"FAILED",e.isSuccess?"greenPale":i?"yellowPale":"dangerPale",t&&200<t?"".concat(t.toFixed(2)," ms"):"",t&&200<t?"red":"")),"ping"!==e.apiName&&a.default.emit(E,e,o,e.isSuccess?null:new c.default(e.code||c.Codes.SOCKET_FAIL,"".concat(e.message||"","(").concat(e.apiName," failed)")))}},{key:"sendAndListen",value:function(e,t){var n=this;return this.isConnected?new Promise((function(r,a){var i=o.default.create(e);_(i.apiName,i.createRequestID(),t).then(r).catch(a),n.send(i)})):Promise.reject(new Error("Cannot send message, because socket is disconnected."))}},{key:"onInit",value:function(){this.lastHandTime=0,DEBUG&&(this.perfData={count:0,total:0,sendCount:0,sendTotal:0,sendSize:0,encodedSize:0,receiveSize:0,decodedSize:0})}},{key:"onClose",value:function(e,t,n){this.stopPing();var r=this.user;DEBUG&&(console.collapse("Socket Close","indigoBg","".concat(n?"unexpected":"","[").concat(e,"]"),"indigoPale",t,""),r?(console.log("User",r),console.log("User status",r.statusName)):console.log("User is empty."),console.groupEnd()),r&&r.isOnline&&(r.setLastStatusBeforeDisconnect(r.status),r[n||"PING_TIMEOUT"===t?"markDisconnect":"markUnverified"]())}},{key:"onData",value:function(e){var t=(0,s.decodeSocketMessage)(this.user,e,this.perfData);t?(this.lastHandTime=(new Date).getTime(),this.handleMessage(t)):DEBUG&&console.error("Cannot handle data:",e)}},{key:"login",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return PERF_MARK("socketLoginBegin"),this.isLogging=!0,this.waitingMessages={},new Promise((function(o,a){e?n.user=e:e=n.user,e?n.init(e.socketUrl,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({userToken:e.token,cipherIV:e.cipherIV,version:l.default.pkg.version,pingTimeout:12e4,pingInterval:6e4,connect:!0,encryptEnable:e.enableClientAES,onConnect:function(){var t,i="login_".concat(l.default.system.device||"desktop","_").concat(e.account);n._loginRid=i,_("userlogin",i).then((function(t){return n.isLogging=!1,t?(n.syncUserSettings(),n.startPing(),o(e)):a(e.loginError||new Error("Login result is not success.")),PERF_MARK("socketLoginEnd","socketLoginBegin","socketLoginTime"),t})).catch(a),e.loginError=null,n.send({method:"userLogin",params:[(t=e).serverName,t.account,t.authKeyForServer,{status:r&&t.lastStatusBeforeDisconnect?t.lastStatusBeforeDisconnect.name:"online",simple:r}],rid:i})},onConnectFail:function(e){var t;n.isLogging=!1,1006===e.code&&((t=new Error("SOCKET_CLOSE_ABNORMAL")).originError=e,e=t),a(e)}},t)):a(new Error("User is not defined."))}))}},{key:"stopPing",value:function(){this.pingTimer&&(clearInterval(this.pingTimer),this.pingTimer=null)}},{key:"startPing",value:function(){this.stopPing(),this.options.pingInterval&&this.isConnected&&(this.pingInterval="number"==typeof this.options.pingInterval?this.options.pingInterval:6e4,this.pingTimer=setInterval(this.ping.bind(this),this.pingInterval/2))}},{key:"ping",value:function(){var e;if(this.isConnected)return(e=Date.now()-this.lastHandTime)>this.options.pingTimeout?this.close(4e3,"PING_TIMEOUT"):void(e>=this.pingInterval&&this.send("ping"))}},{key:"logout",value:(u=h((function*(){this.isConnected?(yield this.uploadUserSettings(),this.markClose(),this.send({method:"userLogout",params:[!0]})):(this.markClose(),this.handleClose(null,"logout"))})),function(){return u.apply(this,arguments)})},{key:"uploadUserSettings",value:function(){var e=this.user,t=e.config.exportCloud(0<arguments.length&&void 0!==arguments[0]&&arguments[0]);return e.config.newChanges=null,t?this.isConnected&&e.isOnline?this.sendAndListen({method:"usersyncsettings",params:[e.account,t]}):(DEBUG&&console.warn("Socket is disconnected, cannot upload user settings of",t),Promise.resolve()):Promise.resolve()}},{key:"syncUserSettings",value:function(){var e=this.user;return this.sendAndListen({method:"usersyncsettings",params:[e.account,e.config.hash]})}},{key:"changeUserStatus",value:(n=h((function*(e){try{return yield this.changeUser({status:e}),!0}catch(e){return!1}})),function(e){return n.apply(this,arguments)})},{key:"changeUser",value:function(e){return e.account=this.user.account,void 0===e.status&&(e.status=""),this.sendAndListen({method:"userUpdate",params:[e]})}},{key:"changeUserPassword",value:function(e){return this.user.ldap?Promise.reject(i.default.string("user.changePassword.notSupport")):this.changeUser({password:(0,r.default)(e)})}},{key:"subscribeUser",value:function(e,t){return this.send({method:"usersubscribe",requestData:{type:e,objects:t}})}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),d}(),u=new(t.AppSocket=u),DEBUG&&(n.g.$socket=u),t.default=u},77325:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.createTodoFromMessage=t.createTodo=void 0;var r=a(n(24260)),o=a(n(15219));function a(e){return e&&e.__esModule?e:{default:e}}var i=(0,n(13544).lazyModuleProxy)("remove-markdown");n={createTodo:t.createTodo=function(e){return e.type||(e.type="custom"),e.desc&&(e.desc="".concat((0,o.default)(e.desc),'<div class="hidden xxc-todo-source" style="display: none">').concat(e.desc,"</div>")),r.default.sendAndListen({method:"todoupsert",params:[e]})},createTodoFromMessage:t.createTodoFromMessage=function(e){var t={desc:e=e.content},n=(e=i.$(e),document.getSelection().toString()),r=e;return n&&e.includes(n)?r=n:0<(n=e.indexOf("\n"))&&(r=e.substr(0,n)),145<r.length&&(r=r.sub(0,144)),t.name=r,t}},t.default=n},99838:(e,t)=>{"use strict";function n(){var e=window.navigator.userAgent;return e.match(/(Mac OS|MacPPC|MacIntel|Mac_PowerPC|Macintosh)/i)?"mac":e.match(/(Linux|X11(?!.*CrOS))/i)?"linux":"win"}function r(){return window.navigator.userAgent.match(/Electron/i)?"electron":"browser"}Object.defineProperty(t,"__esModule",{value:!0}),t.getOSType=n,t.getPlatformType=r,t.isDarkThemeMode=function(){var e;return(null==(e=document.body.getAttribute("data-theme"))?void 0:e.includes("dark"))||document.body.classList.contains("os-dark-mode")},t.isOSType=function(e){return n()===e},document.body.classList.add("platform-".concat(r())),document.body.classList.add("os-".concat(n()))},7217:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDeviceID=void 0;var r,o=n(21614),a=n(81595);t.getDeviceID=function(){return r||(r=(0,a.getStoreItem)("DEVICE_ID"))||(r=(0,o.v4)(),(0,a.setStoreItem)("DEVICE_ID",r)),r}},82587:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.triggerUIReady=t.setTitle=t.reloadWindow=t.onUIReady=t.isAutoLoginNextTime=t.entryParams=t.default=t.applyZoomFactor=void 0;var o=S(n(74160)),a=S(n(52133)),i=n(9215),l=n(64393),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=O(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(61862)),s=S(n(65286)),c=n(727),f=S(n(81595)),d=n(78717),p=S(n(62004)),h=S(n(94128)),m=n(15973),y=S(n(24260)),g=n(13347),b=n(32355),v=n(15142),w=(n(99838),n(57489),n(61786),n(90534),n(90756));function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function S(e){return e&&e.__esModule?e:{default:e}}function _(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){_(a,r,o,i,l,"next",e)}function l(e){_(a,r,o,i,l,"throw",e)}i(void 0)}))}}function E(){return a.default.confirm(u.default.string("dialog.reloadWindowConfirmTip"),{title:u.default.string("dialog.reloadWindowConfirm")}).then((function(e){return e&&((0,g.logout)(),setTimeout((function(){f.default.set("autoLoginNextTime",!0),M.reloadWindow?M.reloadWindow():window.location.reload()}),1e3)),Promise.resolve(e)}))}function P(){var e=f.default.get("autoLoginNextTime");return e&&f.default.remove("autoLoginNextTime"),e}function k(){s.default.emit(T)}function j(e){return s.default.on(T,e)}function x(e){var t,n;t=e,(n=h.default.access("ui.setWindowTitle"))?n(t):document.title=t,(0,w.sendEmbedMessage)("titleUpdated",e)}n(20491);var M=h.default.access("ui"),T="app.ready";function I(){var e=(0,c.getCurrentNotice)(),t=[u.default.string("app.title",o.default.pkg.displayName)];e&&(e.userInfo&&t.push("- ".concat(e.userInfo)),e.tray&&e.tray.label&&t.push("- ".concat(e.tray.label))),x(t.join(" "))}(t.applyZoomFactor=function(e){h.default.has("ui.setZoomFactor")&&(e||(e=(0,v.getLocalConfig)("local.ui.zoomFactor")))&&h.default.call("ui.setZoomFactor",Number(e))})(),M.onWindowMinimize&&M.onWindowMinimize((function(){var e=(0,m.getUserConfig)();e&&e.removeFromTaskbarOnHide&&M.setShowInTaskbar(!1)})),M.onWindowBlur&&M.hideWindow&&M.onWindowBlur((function(){var e=(0,m.getUserConfig)();e&&e.hideWindowOnBlur&&M.hideWindow()})),(0,m.onUserLogin)((function(e,t,n){!n&&o.default.ui.showDailySignMessage&&!t&&e.isFirstSignedToday&&(0,d.executeCommand)("showMessager",u.default.string("login.signed"),{type:"success",icon:"calendar-check",autoHide:!0}),t||(t=null!=(n=f.default.get("loginedUsers"))?n:{})[n=e.identify]||(t[n]=process.env.WIN_NAME,f.default.set("loginedUsers",t))})),(0,m.onUserLogout)((function(e,t,n){var r;e&&(n&&n.startsWith("USER_KICKOFF")&&((0,i.displayHide)(),(0,d.executeCommand)("showMessager",u.default.error(n),{rootClassName:"message-kickoff-confirm",type:"danger",icon:"alert",actions:"USER_KICKOFF_3"===n||"USER_KICKOFF_4"===n?[]:[{label:u.default.string("login.retry"),click:function(){(0,g.login)(e)}}]}),(0,c.requestAttention)("critical")),process.env.HOT&&(n=null!=(n=f.default.get("loginedUsers"))?n:{})[r=e.identify]&&(delete n[r],f.default.set("loginedUsers",n)))})),"electron"===h.default.type&&h.default.call("ui.isFirstMainWindow")&&(0,m.onUserAutoLogin)((function(e){var t;h.default.call("ui.isWindowOpenAndFocus")||(t=(0,m.getCurrentUser)())&&"success"===e&&t.config.hideWindowOnOpenAtLogin||h.default.call("ui.showAndFocusWindow")})),window.addEventListener("online",(function(){(0,m.getCurrentUser)()&&!y.default.isLogging&&(0,g.reconnect)().catch(console.err)})),null==M||null!=(n=M.setWindowRequestCloseHandler)&&n.call(M,(function(e){var t,n;if("quit"!==e)return(t=(0,m.getCurrentUser)())&&!t.isUnverified?"minimize"===(e=t.config.appCloseOption)?(M.hideWindow(),!1):"close"!==e&&M.showQuitConfirmDialog?(M.showQuitConfirmDialog({message:u.default.string("dialog.appClose.title"),rememberText:u.default.string("dialog.appClose.rememberOption"),buttons:[u.default.string("dialog.appClose.minimizeMainWindow"),u.default.string("dialog.appClose.quitApp"),u.default.string("dialog.appClose.cancelAction")],callback:(n=C((function*(e,n){return n&&e&&(t.config.appCloseOption=e),"close"===e&&null!=M&&M.hideWindow(),e})),function(e,t){return n.apply(this,arguments)})}),!1):void 0:void 0})),null!=(n=M.setWindowBeforeCloseHandler)&&n.call(M,C((function*(){(0,m.isUserOnline)()&&(yield(0,g.logout)(),yield(0,p.default)(2e3))}))),t.reloadWindow=E,t.isAutoLoginNextTime=P,n=(0,l.getSearchParam)(),t.entryParams=n,t.triggerUIReady=k,t.onUIReady=j,t.setTitle=x,(0,m.onUserConfigRequestUpload)((function(e){e&&Object.keys(e).length&&y.default.uploadUserSettings(!0)})),(0,u.onLangChange)(I),(0,c.onNoticeUpdate)(I),(0,b.isGlobalShortcutAvailable)()&&((0,m.onUserLogin)((function(e,t){e.isOnline&&!t&&(0,b.registerShortcut)()})),(0,m.onUserLogout)(b.unregisterGlobalShortcut),M.showAndFocusWindow&&(0,d.registerCommand)("shortcut.focusWindowHotkey",(function(){var e;M.hideWindow&&null!=(e=M.isWindowOpenAndFocus)&&e.call(M)?M.hideWindow():M.showAndFocusWindow()}),null,{apiLevel:2}),(0,m.onUserConfigChange)((function(e){e&&Object.keys(e).some((function(e){return e.startsWith("shortcut.")}))&&(0,b.registerShortcut)()}))),h.default.call("ui.isFirstMainWindow")&&!sessionStorage.getItem("lastOpenTime")&&(f.default.set("loginedUsers",{}),sessionStorage.setItem("lastOpenTime",Date.now())),l={entryParams:n,get canQuit(){return!!M.confirmToCloseWindow},quit:M.confirmToCloseWindow,reloadWindow:E,triggerUIReady:k,onUIReady:j,isAutoLoginNextTime:P},t.default=l,(0,w.isEmbed)()&&(j((function(){return(0,w.sendEmbedMessage)("ready")})),(0,c.onNoticeUpdate)((function(e){return(0,w.sendEmbedMessage)("notice",e)})),(0,u.onLangChange)((function(e){return(0,w.sendEmbedMessage)("langChange",e.name)})),(0,m.onUserLogin)((function(e,t){return(0,w.sendEmbedMessage)("login",e.plain(),t?String(t):null)})),(0,m.onUserLogout)((function(e){return(0,w.sendEmbedMessage)("logout",e.plain())})))},57489:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openUrlInBrowser=void 0;var r=n(78717),o=u(n(94128)),a=u(n(61862)),i=n(95214),l=n(40910);function u(e){return e&&e.__esModule?e:{default:e}}t.openUrlInBrowser=function(e){return s.openExternal(e)};var s=o.default.access("ui"),c=o.default.access("clipboard"),f=null;c&&c.writeText&&(0,r.registerCommand)("copyCode",(function(e){var t=e.targetElement;return!!t&&(f&&(clearTimeout(f),f=null),e=t.nextElementSibling.innerText,c.writeText(e),t.setAttribute("data-hint",a.default.string("common.copied")),t.classList.add("hint--success"),f=setTimeout((function(){f=null,t.setAttribute("data-hint",a.default.string("common.copyCode")),t.classList.remove("hint--success")}),2e3),!0)})),(0,r.registerCommand)("setRoute",(function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];l.setRoutePath.apply(void 0,n)}),null,{apiLevel:6}),(0,r.registerCommand)("openUrlInDialog",(function(e,t){return e=e.options,!!(t=!t&&e&&e.url?e.url.url:t)&&((0,i.openUrlInDialog)(t,e),!0)}),null,{apiLevel:5}),(0,r.registerCommand)("openUrlInBrowser",(function(e,t){return!!(t=!t&&e.options&&e.options.url?e.options.url.url:t)&&(s.openExternal(t),!0)}),null,{apiLevel:5}),s.onRequestOpenUrl&&s.onRequestOpenUrl((function(e,t){(0,i.openUrl)(t)})),(0,r.registerCommand)("openInApp",(function(e,t,n){"zentao-integrated"===t&&(0,r.executeCommand)("openUrlInBrowser",n)}),null)},61786:(e,t,n)=>{"use strict";var r=u(n(94128)),o=n(98649),a=n(78717),i=u(n(61862)),l=u(n(74160));function u(e){return e&&e.__esModule?e:{default:e}}var s=r.default.access("ui");(0,o.addContextMenuCreator)("member",(function(e){var t=e.member;return[{id:"member-profile",label:i.default.string("member.profile.view"),click:function(){(0,a.executeCommand)("showMemberProfile",t)}}]}),{apiLevel:5}),(0,o.addContextMenuCreator)("login.setting",(function(e){var t=e.ldap,n=e.logging,o=e.showServerInput,u=e.showAbout,c=e.onLdapChange,f=(e=e.onRequestShowServerInput,r.default.access("ui.isOpenAtLogin"));return[f&&{id:"open-at-login",label:i.default.string("login.openAtLogin"),checked:f(),click:function(){var e=f();s.setOpenAtLogin(!e),e===f()&&(0,a.executeCommand)("showMessager",i.default.string("login.openAtLogin.failure"),{type:"danger",icon:"alert"})}},!o&&{id:"show-server-setting",label:i.default.string("login.showServerSetting"),click:e},l.default.ui["login.ldap"]&&{label:i.default.string("login.ldap"),checked:t,disabled:n,click:function(){return c(!t)}},u&&{label:i.default.string("common.about"),click:u}]})),(0,a.registerCommand)("showContextMenu",(function(e,t){for(var n=e.options,r=(e=e.event,arguments.length),a=new Array(2<r?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];(0,o.showContextMenu)(t,{options:n,event:e,params:a})}))},40910:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isRoutePathMatch=t.getRoutePathArray=t.getRoutePath=t.formatRoutePath=t.createRoutePath=void 0,t.isRoutePathMatchWith=s,t.offRoutePathChange=function(e){return f.delete(e)},t.onRoutePathChange=function(e){var t=Symbol("event-route-change");return f.set(t,e),t},t.parseRoutePath=function(){var e=u.apply(void 0,arguments),t=e.substring(2).split("/"),n=t[t.length-1],o=null;return 0<n.indexOf("?")&&(t.pop(),n=n.split("?"),t.push(n[0]),o=(0,r.getSearchParam)(null,n[1],!0)),{route:e,path:t.join("/"),pathList:t,params:o||{}}},t.setRoutePath=void 0;var r=n(64393);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return e.startsWith("#/")?e:e.startsWith("#")||e.startsWith("/")?"#/".concat(e.substring(1)):"#/".concat(e)}function l(){return u()}t.formatRoutePath=i;var u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t||!t.length||1===t.length&&(void 0===t[0]||null===t[0]))return i(window.location.hash);var r,o="",l=((l=t[t.length-1])&&"object"===a(l)?(r=t.pop(),o=Object.keys(r).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(r[e]))})).join("&"),o="?".concat(o)):"string"==typeof l&&l.startsWith("?")&&(o=t.pop()),t.join("/")+o);return i(l)};function s(e){for(var t=c(e),n=arguments.length,r=new Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var a=c.apply(void 0,r),i=0;i<a.length;++i){var l=a[i];if("*"!==l&&l!==t[i])return!1}return!0}t.createRoutePath=u,t.getRoutePath=l,t.isRoutePathMatch=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.apply(void 0,[l()].concat(t))},t.setRoutePath=function(){var e=u.apply(void 0,arguments);return window.location.hash!==e&&(window.location.hash=e),e};var c=function(){var e=u.apply(void 0,arguments).substring(2).split("/"),t=e[e.length-1];return 0<t.indexOf("?")&&(e.pop(),t=t.split("?"),e.push(t[0],"?".concat(t[1]))),e};t.getRoutePathArray=c;var f=new Map,d=u();window.addEventListener("hashchange",(function(e){var t=u();if(DEBUG&&console.color("","orangeBg",t,"orangePale"),t!==d){if(f.size){var n,r=function(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw a}}}}(f.values());try{for(r.s();!(n=r.n()).done;)(0,n.value)(t,d,e)}catch(e){r.e(e)}finally{r.f()}}d=t}}),!1)},32355:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterGlobalShortcut=t.registerShortcut=t.isGlobalShortcutAvailable=t.enableGlobalShortcut=t.disableGlobalShortcut=void 0;var r=n(15973),o=(o=n(94128))&&o.__esModule?o:{default:o},a=n(78717);function i(){var e;u&&(e=(0,r.getUserConfig)())&&(c=e.globalHotkeys,Object.keys(c).forEach((function(e){u.registerGlobalShortcut(e,c[e],(function(){s?DEBUG&&console.log("Global shortcut command '".concat(e,"' skipped.")):(0,a.executeCommandLine)("shortcut.".concat(e))}))})))}function l(){u&&c&&(Object.keys(c).forEach((function(e){u.unregisterGlobalShortcut(e)})),c=null)}var u=o.default.access("shortcut"),s=!1,c=null;t.registerShortcut=i,t.unregisterGlobalShortcut=l,t.disableGlobalShortcut=function(){s=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],l()},t.enableGlobalShortcut=function(){s=!1,i()},t.isGlobalShortcutAvailable=function(){return!!u}},32481:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUrlMeta=void 0;var r=a(n(74160)),o=a(n(94128));function a(e){return e&&e.__esModule?e:{default:e}}var i={};t.getUrlMeta=function(e){var t,a,l=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return r.default.ui["chat.urlInspector"]?!l&&(l=i[e])?Promise.resolve(l.meta):(l=o.default.access("urlMeta.getUrlMeta"))?(t=null,a=function(){var n;return t&&t.getUrl?(n=t.getUrl(e))instanceof Promise?n:Promise.resolve(n):Promise.resolve(e)},(t=n.g.ExtsRuntime?n.g.ExtsRuntime.getUrlInspector(e):t)&&t.noMeta&&t.inspect?a().then((function(n){return(n=t.inspect(n,e))instanceof Promise?n:Promise.resolve(n)})):a().then(l).then((function(n){var r=n.favicon;if(r={url:e,title:n.title,image:n.image,subtitle:n.description&&200<n.description.length?"".concat(n.description.substring(0,150),"..."):n.description,icon:r?r.href:null},n.isImage?(r.contentUrl=e,r.contentType="image",r.icon="mdi-image text-green icon-2x"):n.isVideo?(r.contentUrl=e,r.contentType="video",r.clickable="title",r.icon="mdi-video text-red icon-2x"):n.isAudio?(r.contentUrl=e,r.contentType="audio",r.clickable="title",r.icon="mdi-music text-yellow icon-2x"):r.title||r.subtitle||(r.title=e),r.image&&r.image.startsWith("//")&&(r.image="https:".concat(r.image)),r.icon&&r.icon.startsWith("//")&&(r.icon="https:".concat(r.icon)),t&&t.inspect){try{r=t.inspect(e,n,r)}catch(o){DEBUG&&console.error("Inspect url error",{err:o,meta:n,cardMeta:r,extInspector:t})}if(r instanceof Promise)return r.then((function(e){return e.provider=t.provider,e}));if(r)return r.provider=t.provider,r}if(20<(o=Object.keys(i)).length)for(var o=o.sort((function(e,t){return e.time-t.time})),a=0;a<o.length-20;++a)delete i[o[a]];return i[e]={meta:r,time:(new Date).getTime()},Promise.resolve(r)}))):Promise.resolve({url:e,title:e}):Promise.resolve({url:e,title:e})}},95214:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openUrlInDialog=t.openUrlInBrowser=t.openUrlInApp=t.openUrl=void 0;var r,o=n(64393),a=n(78717),i=(r=n(99605))&&r.__esModule?r:{default:r};function l(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e){return i.default?i.default.invoke("openUrlInBrowser",e):(0,a.executeCommand)("openUrlInBrowser",e)}function c(e,t,r,i){if(DEBUG&&(console.collapse("Open Url","redBg",e,"redPale"),console.log("targetElement",t),console.log("event",r),console.log("context",i),console.groupEnd()),(0,o.isWebUrl)(e)||(0,o.isLocalUrl)(e)){if(n.g.ExtsRuntime){var l=n.g.ExtsRuntime.getUrlOpener(e,t);if(l&&l.open){if(!0===(l=l.open(e))||!1===l)return l;if("string"==typeof l)return(0,o.isWebUrl)(l)?s(l):c(l,t)}}return s(e),!0}if("@"===(l=e[0]))(0,a.executeCommandLine)("showContextMenu/member.profile/".concat(e.substring(1)),u({targetElement:t,event:r},i));else if("!"===l||"|"===l||e.startsWith("xxc:"))return e=e.substr("!"===l||"|"===l?1:e.startsWith("xxc://")?6:4),(0,a.executeCommandLine)(e,u({targetElement:t,event:r},i)),!0;if("#"===l&&!e.startsWith("#/")||"@"===l)return!0}t.openUrlInBrowser=s,t.openUrl=c,t.openUrlInApp=function(e,t,n){(0,a.executeCommandLine)("openInApp/".concat(t,"/").concat(encodeURIComponent(e),"/").concat(n?encodeURIComponent(n):""),{appName:t,url:e,redirectConfirm:n})},t.openUrlInDialog=function(e,t,n){t=u({url:e},t),(0,a.executeCommand)("openWebviewDialog",e,t,n)},document.addEventListener("click",(function(e){for(var t=e.target;t&&!(t.classList&&t.classList.contains("app-link")||"A"===t.tagName&&t.attributes.href);)t=t.parentNode;!t||("A"!==t.tagName||t.attributes.href&&t.attributes.href.value.startsWith("#/"))&&!t.classList.contains("app-link")||!t.attributes.href&&!t.attributes["data-url"]||(c((t.attributes["data-url"]||t.attributes.href).value,t,e),e.preventDefault())}))},43058:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skipNewVersion=t.quitAndInstall=t.onUpdaterStatusChanged=t.notifyMeNextTime=t.isUpdaterAvailable=t.getUpdaterStatus=t.downloadNewVersion=t.checkClientUpdateInfo=void 0;var r=f(n(91230)),o=f(n(94128)),a=f(n(65286)),i=f(n(61862)),l=f(n(15973)),u=f(n(12482)),s=n(78717),c=n(74543);function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function p(){return b=null===b?o.default.has("autoUpdater.quitAndInstall")&&o.default.has("autoUpdater.downloadNewVersion"):b}function h(e){e&&g&&Object.assign(g,e),a.default.emit(y.status_change,g),"downloaded"===g.status&&(0,s.executeCommandLine)("showUpdateGuideDialog")}function m(){var e,t,n;return p()&&g&&g.user===l.default.user.identify&&g.needUpdate&&"downloading"!==g.status&&"downloaded"!==g.status&&(e=(n=g).downloadUrl,t=n.downloadFileID,n=n.newVersion,e?(h({status:"downloading",progress:.001,message:i.default.string("update.message.downloading")}),o.default.call("autoUpdater.downloadNewVersion",l.default.user,u.default.create({name:"".concat(r.default.name,".").concat(n,".").concat(t,".zip"),url:e,gid:"".concat(r.default.name,".").concat(n,".").concat(t),storageType:"cache"}),(function(e){.01<e-g.progress&&h({status:"downloading",progress:e,message:i.default.string(.9<=e?"update.message.unziping":"update.message.downloading")})})).then((function(e){return h({status:"downloaded",progress:1,downloadedPath:e,message:i.default.string("update.message.downloaded")})})).catch((function(e){return h({status:"downloadFail",progress:1,message:i.default.error(e)})}))):h({status:"downloadFail",progress:1,message:i.default.string("update.message.downloadUrlNotAvailable")})),g}var y={status_change:"updater.status.changed"},g=null,b=null;t.isUpdaterAvailable=p,t.onUpdaterStatusChanged=function(e){return a.default.on(y.status_change,e)},t.getUpdaterStatus=function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},g)},t.checkClientUpdateInfo=function(e){var t=r.default.version,n=e.clientUpdate,a=p(),l=((l=n&&n.version)&&((l=l.toLowerCase()).startsWith("v")&&(l=l.substr(1)),l=(0,c.formatVersion)(l.trim()),/^((([0-9]+)\.([0-9]+)\.([0-9]+)(?:-([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?)(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?)$/.test(l)||(l=!1)),e=!(g={name:r.default.name,user:e.identify,status:"ready",progress:0,currentVersion:t,newVersion:l,serverUrl:e.serverUrl,skipped:l===e.config.skippedVersion}),t="force"===(e=l&&(0,c.compareVersions)(t,l)<0?n.strategy||"optional":e),e&&!t),u=a?"".concat(o.default.env.os).concat(o.default.env.arch.includes("64")?"64":"32"):null;return a=a&&n&&n.downloads&&n.downloads[u],Object.assign(g,{needUpdate:e,needUpdateForce:t,needUpdateOptional:l,updateInfo:n,downloadUrl:a,downloadFileID:u,message:i.default.string(e?"update.message.newVersionAvailable":"update.message.alreadyNew")})},t.downloadNewVersion=m,t.skipNewVersion=function(e){return!(!g||!g.needUpdateOptional||(e.config.skippedVersion=g.newVersion,0))},t.notifyMeNextTime=function(e){return!(!g||!g.needUpdateOptional||(e.config.skippedVersion=null))},t.quitAndInstall=function e(){return g&&"downloaded"===g.status?o.default.call("autoUpdater.quitAndInstall",g):m.then(e)}},23810:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.APP_TYPES=void 0;var o,a=s(n(26470)),i=s(n(92030)),l=n(64393),u=n(48389);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=y(e);if(n=t?(n=y(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return m(o)}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}t.APP_TYPES=o,(b=o||(t.APP_TYPES=o={})).insideView="insideView",b.webView="webView",b.custom="custom",b.browser="browser";var b=function(e){var t=i;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e);var r=h(i);function i(e,t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");if(g(m(e=r.call(this,e,t)),"_appType",void 0),g(m(e),"auth",void 0),g(m(e),"_webViewUrl",void 0),g(m(e),"_isLocalWebView",void 0),g(m(e),"_webViewPreloadScript",void 0),g(m(e),"_appIcon",void 0),g(m(e),"_menuIcon",void 0),e.isApp)return e._appType=o[e._pkg.appType],e._appType||(e._appType=e._pkg.webViewUrl?o.webView:o.insideView,e.addError("appType","AppType (".concat(e._pkg.appType,") must be one of '").concat(Object.keys(o).join(","),"', set to ").concat(e._appType," temporarily."))),e._appType!==o.webView&&e._appType!==o.browser||e._pkg.webViewUrl||e.addError("webViewUrl",'The webViewUrl attribute must be set when appType is "'.concat(e._appType,'".')),e;throw new Error("Cannot create a app extension from the type '".concat(e.type,"'."))}return t=i,(e=[{key:"proxyHandler",get:function(){return i.PROXY_HANDLER}},{key:"isWebview",get:function(){return this._appType===o.webView}},{key:"isCustomApp",get:function(){return this._appType===o.custom}},{key:"isOpenInBrowser",get:function(){return this._appType===o.browser}},{key:"appType",get:function(){return this._appType}},{key:"webViewUrl",get:function(){if(this._appType!==o.webView&&this._appType!==o.browser)return null;if(this.auth)return this.auth;var e=this._pkg.webViewUrl;return e&&!this._webViewUrl&&((0,l.isWebUrl)(e)?(this._isLocalWebView=!1,this._webViewUrl=e):(this._isLocalWebView=!0,this._webViewUrl="file://".concat(a.default.join(this.localPath,e)))),this._webViewUrl}},{key:"getEntryUrl",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=f({disposition:"app",entryID:this.entryID},1<arguments.length&&void 0!==arguments[1]?arguments[1]:null);return this.hasModuleMethod("getEntryUrl")?this.callModuleMethod("getEntryUrl",t,n,(function(r){return d(y(i.prototype),"getEntryUrl",e).call(e,r||t,n)})):this.hasServerEntry?d(y(i.prototype),"getEntryUrl",this).call(this,t,n):Promise.resolve(this.webViewUrl)}},{key:"webViewPreloadScript",get:function(){if(this._appType!==o.webView)return null;var e=this._pkg.webViewPreloadScript;return e&&!this._webViewPreloadScript&&(this._webViewPreloadScript="file://".concat(a.default.join(this.localPath,e))),this._webViewPreloadScript}},{key:"injectCSS",get:function(){return this._pkg.injectCSS}},{key:"injectScript",get:function(){var e=void 0===(e=this._pkg.injectScript)?"":e;return this.autoSetHeaderStyle&&(e+='\n(() => {const style = window.getComputedStyle(document.body, null); window.callXXCCommand("setAppHeaderStyle", '.concat(JSON.stringify(this.name),", JSON.stringify({background: style.backgroundColor, color: new $.zui.Color(style.backgroundColor).contrast().toCssStr()}))})()")),e}},{key:"isLocalWebView",get:function(){return this._isLocalWebView}},{key:"appAccentColor",get:function(){return this._pkg.appAccentColor||this._pkg.accentColor}},{key:"appBackColor",get:function(){var e;return null!=(e=this._data.appBackColor)?e:this._pkg.appBackColor},set:function(e){this._data.appBackColor=e}},{key:"appHeaderStyle",get:function(){var e=null!=(e=this._data.appHeaderStyle)?e:this._pkg.appHeaderStyle;return"string"==typeof e?"{"===e[0]?JSON.parse(e):{background:e}:e},set:function(e){this._data.appHeaderStyle=e}},{key:"setAppHeaderStyle",value:function(e,t){var n;"string"==typeof e&&(n="{"===e[0]?JSON.parse(e):{background:e}),this._data.appHeaderStyle=t?e:f(f({},this.appHeaderStyle),n)}},{key:"autoSetHeaderStyle",get:function(){return this._pkg.autoSetHeaderStyle}},{key:"appIcon",get:function(){var e=this._pkg.appIcon;return e&&!this._appIcon&&(this._appIcon=this.getIconPath(e)),this._appIcon||d(y(i.prototype),"icon",this)}},{key:"menuIcon",get:function(){var e=this._pkg.menuIcon;return e&&!this._menuIcon&&(this._menuIcon=this.getIconPath(e)),this._menuIcon||this.appIcon}},{key:"icon",get:function(){return this._pkg.icon?d(y(i.prototype),"icon",this):this.appIcon}},{key:"accentColor",get:function(){return this._pkg.accentColor||this._pkg.appAccentColor}},{key:"MainView",get:function(){var e;if(n.g.ExtsRuntime&&n.g.ExtsRuntime.checkExtensionAPIPermission(this,"ext.MainView"))return(e=this._module)&&e.MainView}},{key:"customOpenHandler",get:function(){var e;return this.isCustomApp?(e=this.module)&&e.onRequestOpenApp:(DEBUG&&console.warn("Try get customOpenHandler in which is not custom app.",this),null)}},{key:"buildIn",get:function(){return this._pkg.buildIn}},{key:"hidden",get:function(){return this._pkg.hidden},set:function(e){this._pkg.hidden=e}},{key:"isDefault",get:function(){var e=this.buildIn;return e&&e.asDefault}},{key:"isFixed",get:function(){var e=this.buildIn;return e&&(e.asDefault||e.fixed)}},{key:"canPinnedOnMenu",get:function(){var e=this._pkg.pinnedOnMenu;return("fixed"!==e&&"main-fixed"!==e||!this.isBuildInOrRemote)&&!this.isFixed&&!1!==e}},{key:"pinnedOnMenuOrder",get:function(){var e=this._pkg.pinnedOnMenuOrder;return null==(e=null==e?this._data.pinnedOnMenuOrder:e)?0:e},set:function(e){this._data.pinnedOnMenuOrder=e}},{key:"pinnedOnMainMenu",get:function(){return!("main-fixed"!==this._pkg.pinnedOnMenu||!this.isBuildInOrRemote)}},{key:"pinnedOnMenu",get:function(){var e=this._pkg.pinnedOnMenu,t=this._data.pinnedOnMenu;return!("fixed"!==e&&"main-fixed"!==e||!this.isBuildInOrRemote)||!1!==e&&t||(!0===e||"fixed"===e||"main-fixed"===e)&&!1!==t},set:function(e){!1!==this._pkg.pinnedOnMenu&&(this._data.pinnedOnMenu=e)}},{key:"noticeCount",get:function(){return this._data.noticeCount||0},set:function(e){this._data.noticeCount=e}},{key:"muteNoticeOnActive",get:function(){return!1!==this._pkg.muteNoticeOnActive}},{key:"hasNotice",get:function(){return this.noticeCount&&0<this.noticeCount}},{key:"baseRoutePath",get:function(){return"/exts/app/".concat(this.name)}},{key:"createAppMenuItems",value:function(e){var t=this.noticeCount,n=e.isCurrent,r=(e=e.isOpened,{id:"",active:n,label:this.displayName,hint:"".concat(this.displayName,"").concat(null!=(r=this.description)?r:""),noticeCount:t,icon:this.menuIcon});return this.hasModuleMethod("createAppMenuItems")?(null!=(t=this.callModuleMethod("createAppMenuItems",{noticeCount:t,isCurrent:n,isOpened:e},r))&&t.length||this.addError("createAppMenuItems",'The method "createAppMenuItems" must return an array with at least one item.'),t||[r]):[r]}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),i}(i.default);g(t.default=b,"PROXY_PROPERTIES",(0,u.createProxyPropertiesMap)(["isWebview","isCustomApp","webViewUrl","injectCSS","injectScript","isLocalWebView","appAccentColor","appBackColor",{name:"appIcon",get:function(e){return e._pkg.appIcon}},{name:"menuIcon",get:function(e){return e._pkg.menuIcon}},"hidden","canPinnedOnMenu","pinnedOnMainMenu","noticeCount","hasNotice","muteNoticeOnActive"],i.default.PROXY_PROPERTIES)),g(b,"PROXY_HANDLER",(0,u.createProxyHandler)(b.PROXY_PROPERTIES)),DEBUG&&(n.g.$AppExtension=b)},92030:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TYPES=void 0;var r,o=d(n(26470)),a=n(16986),i=d(n(61997)),l=n(71782),u=d(n(52324)),s=d(n(81595)),c=n(61862),f=n(48389);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}t.TYPES=r,(v=r||(t.TYPES=r={})).app="app",v.theme="theme",v.plugin="plugin";var b=[{name:"name",equal:100,include:50},{name:"displayName",equal:100,include:50},{name:"pinyinNames",equal:50,include:25},{name:"description",include:25},{name:"keywords",equal:50,include:10,array:!0},{name:"type",equal:100,prefix:"#"},{name:"author",equal:100,prefix:"@"},{name:"publisher",equal:100,prefix:"@"},{name:"homepage",include:25}],v=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");g(this,"_data",void 0),g(this,"_proxy",void 0),g(this,"_type",void 0),g(this,"_name",void 0),g(this,"_safeName",void 0),g(this,"_pkg",void 0),g(this,"_errors",[]),g(this,"_pinyinName",void 0),g(this,"_config",void 0),g(this,"_mainFile",void 0),g(this,"_icon",void 0),g(this,"_notificationSenders",void 0),g(this,"_needRestart",void 0),g(this,"_module",void 0),g(this,"_commandNames",void 0),g(this,"_contextMenuCreators",void 0),g(this,"_loadTime",void 0),g(this,"_loaded",void 0),g(this,"_attached",void 0),g(this,"noticeCount",void 0),this.initPkg(t);var r=(delete(t=this.getConfig("_data")||{}).remoteLoaded,delete t.loadRemoteFailed,delete t.serverData,this.buildIn);r&&r.localPath&&delete t.localPath,this._data=y(y({},n),t),this.optional?null==(r=this._data).disabled&&(r.disabled="0"===this.pkg.enable):this._data.disabled=!1}var t,f;return t=e,(f=[{key:"optional",get:function(){return"1"===this.pkg.optional}},{key:"proxyHandler",get:function(){return e.PROXY_HANDLER}},{key:"proxy",get:function(){return this._proxy||(this._proxy=new Proxy(this,this.proxyHandler)),this._proxy}},{key:"initPkg",value:function(e){(e=y(y({},e),e.xext)).xext&&delete e.xext,this._type=r[e.type],this._type||(this._type=r.plugin,this.addError("type","Unknown extension type (".concat(e.type,"), set to ").concat(this._type," temporarily."))),this._name=e.name,!(0,a.isEmptyString)(e.name)&&/[A-Za-z0-9_-]+/.test(e.name)||(this._safeName=(0,i.default)(),this.addError("name","Extension name(".concat(e.name,") is not valid, use random name '").concat(this._safeName,"'."))),(0,a.isEmptyString)(e.version)&&this.addError("version","Extension version not set."),this._pkg=e}},{key:"addError",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];t||(t=e,e="_"),DEBUG&&console.color("Extension.".concat(this.name),"greenBg",e,"greenPale",t,"red"),n&&-1<(n=this._errors.findIndex((function(t){return t.name===e})))&&this._errors.splice(n,1),this._errors.push({name:e,error:t,time:(new Date).getTime()})}},{key:"errors",get:function(){return this._errors}},{key:"hasError",get:function(){return!(!this._errors||!this._errors.length)}},{key:"getError",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"_";return this.hasError?this.errors.filter((function(t){return t.name===e})).map((function(e){return e.error})).join("\n"):null}},{key:"pinyinNames",get:function(){return this._pinyinName||(this._pinyinName=(0,u.default)(this.displayName,"default")),this._pinyinName}},{key:"config",get:function(){return this._config}},{key:"displayName",get:function(){return(0,c.getStringFromObject)(this._pkg.displayName,this._name)}},{key:"type",get:function(){return this._type}},{key:"name",get:function(){return this._safeName||this._name}},{key:"isTheme",get:function(){return this._type===r.theme}},{key:"isPlugin",get:function(){return this._type===r.plugin}},{key:"isApp",get:function(){return this._type===r.app}},{key:"buildIn",get:function(){return this._pkg.buildIn}},{key:"configurations",get:function(){return this._pkg.configurations||[]}},{key:"pkg",get:function(){return this._pkg}},{key:"description",get:function(){return(0,c.getStringFromObject)(this._pkg.description)}},{key:"version",get:function(){return this._pkg.version}},{key:"author",get:function(){return this._pkg.author}},{key:"authorName",get:function(){return(0,c.getStringFromObject)("object"===h(this.author)?this.author.name:this.author)}},{key:"publisher",get:function(){return this._pkg.publisher}},{key:"publisherName",get:function(){return(0,c.getStringFromObject)("object"===h(this.publisher)&&(0,a.isNotEmptyString)(this.publisher.name)?this.publisher.name:this.publisher)}},{key:"company",get:function(){return(0,c.getStringFromObject)(this._pkg.company)}},{key:"license",get:function(){return this._pkg.license}},{key:"homepage",get:function(){return this._pkg.homepage}},{key:"keywords",get:function(){return this._pkg.keywords}},{key:"engines",get:function(){return this._pkg.engines}},{key:"repository",get:function(){return this._pkg.repository}},{key:"bugs",get:function(){return this._pkg.bugs}},{key:"hot",get:function(){return!!this._pkg.hot}},{key:"usesPermissions",get:function(){var e=this._pkg.usesPermissions;return"string"==typeof e?e.split(","):e}},{key:"entryUrl",get:function(){return this._pkg.entryUrl}},{key:"entryID",get:function(){return this._pkg.entryID}},{key:"getEntryUrl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(n.g.ExtsRuntime){var t=n.g.ExtsRuntime.getEntryVisitUrl;if(t)return t((1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).entryID||this,e)}return Promise.resolve(this.entryUrl)}},{key:"hasServerEntry",get:function(){return this.entryID||this._pkg.entry||this.hasModuleMethod("getEntryUrl")}},{key:"serverData",get:function(){return this._data.serverData}},{key:"download",get:function(){return this._pkg.download}},{key:"isRemote",get:function(){return this._data.remote}},{key:"isBuildInOrRemote",get:function(){return this.isRemote||this.buildIn}},{key:"isRemoteLoaded",get:function(){return this._data.remoteLoaded}},{key:"md5",get:function(){return this._pkg.md5}},{key:"user",get:function(){return this._data.user}},{key:"remoteCachePath",get:function(){return this._data.remoteCachePath}},{key:"loadRemoteFailed",get:function(){return this._data.loadRemoteFailed}},{key:"downloadProgress",get:function(){return this.isRemoteLoaded?1:this._data.downloadProgress||0},set:function(e){this._data.downloadProgress=e}},{key:"setLoadRemoteResult",value:function(e,t){this._data.loadRemoteFailed=!e,this._data.remoteLoaded=!!e,t&&this.addError("download",t)}},{key:"getAbsolutePath",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return e=o.default.isAbsolute(e)?e:o.default.resolve(n||this.localPath,e),t&&""===o.default.extname(e)?"".concat(e,".").concat(t):e}},{key:"getIconPath",value:function(e){return 1<e.length&&!/^(file:|https?:|icon-|mdi-|data:)/.test(e)?"file://".concat(this.getAbsolutePath(e)):e}},{key:"accentColor",get:function(){return this._pkg.accentColor||"#f50057"}},{key:"mainFile",get:function(){var e;return this._mainFile||((e=this.buildIn)&&e.module?this._mainFile="BUILD-IN":this.pkg.main&&(this._mainFile=this.getAbsolutePath(this.pkg.main))),this._mainFile}},{key:"icon",get:function(){var e=this._pkg.icon;return e&&!this._icon&&(this._icon=this.getIconPath(e)),this._icon||"mdi-cube"}},{key:"notificationSenders",get:function(){var e,t,n=this;return this._notificationSenders||(e=this.module,(t=e&&e.notificationSenders||this._pkg.notificationSenders)&&Object.keys(t).forEach((function(e){(e=t[e]).avatar&&!/^(https?|file|data):/.test(e.avatar)&&(e.avatar="file://".concat(n.getAbsolutePath(e.avatar)))})),this._notificationSenders=t),this._notificationSenders}},{key:"getNotificationSender",value:function(e){var t=this.notificationSenders;return"object"!==h(e)&&(e={id:e}),t&&t[e.id]?Object.assign(e,t[e.id]):null}},{key:"storeData",get:function(){return{data:this._data,pkg:this._pkg}}},{key:"data",get:function(){return this._data}},{key:"installTime",get:function(){return this._data.installTime},set:function(e){this._data.installTime=e,this.updateTime=e}},{key:"disabled",get:function(){return!0===this._data.disabled},set:function(e){this._data.disabled===e||this.hot||(this._needRestart=!0),this._data.disabled=e}},{key:"available",get:function(){return!this.disabled&&!this.needRestart&&(!this.isRemote||this.isRemoteLoaded)}},{key:"updateTime",get:function(){return this._data.updateTime},set:function(e){this._data.updateTime=e}},{key:"localPath",get:function(){return this._data.localPath},set:function(e){this._data.localPath=e}},{key:"isDev",get:function(){return this._data.isDev},set:function(e){this._data.isDev=e}},{key:"hasModule",get:function(){return!!this.mainFile}},{key:"configStoreName",get:function(){return"EXTENSION::".concat(this.name,"::config")}},{key:"getConfig",value:function(e){return this._config||(this._config=s.default.get(this.configStoreName,{})),void 0===e?this._config:this._config[e]}},{key:"setConfig",value:function(e,t){var n=this.getConfig();"object"===h(e)?Object.assign(n,e):n[e]=t,this._config=n,s.default.set(this.configStoreName,this._config)}},{key:"deleteConfig",value:function(){s.default.remove(this.configStoreName)}},{key:"getUserConfig",value:function(t,n){return e.user?e.user.config.getForExtension(this.name,t,n):(DEBUG&&console.warn("Cannot set user config for the extension, because current user is not logged.",this),n)}},{key:"setUserConfig",value:function(t,n){if(e.user)return e.user.config.setForExtension(this.name,t,n);DEBUG&&console.warn("Cannot set user config for the extension, because current user is not logged.",this)}},{key:"loadModule",value:function(){var e=this;if(this.disabled)return DEBUG&&console.warn("The extension has been disabled.",this),null;var t=this.mainFile;if(t){var r,o=(new Date).getTime();if("BUILD-IN"===t)this._module=this.buildIn.module;else try{var a=n.g.extensionRequire(this,this.mainFile);"object"===h(a)&&a.__esModule&&(a=a.default),this._module=a,this.hasReplaceViews&&this.hot&&this.addError("module.replaceViews","ReplaceViews not work on hot mode.")}catch(t){DEBUG&&(console.collapse("Extension Attach","greenBg",this.name,"redPale","load module error","red"),console.error("error",t),console.log("extension",this),console.groupEnd()),this._module={},this.addError("loadModule()","Some errors occurred while loading the module:\n".concat(t.message,"\n").concat(t.stack),!0)}this._module&&(this.tryCallModuleMethod("onAttach",this),this._module.commands&&(r=this._module.commands,this._commandNames=[],Array.isArray(r)?r.forEach((function(t){try{n.g.ExtsRuntime.callExtensionAPI(e.name,"commander.registerCommand",t.name,t.func,t.context),e._commandNames.push(t.name)}catch(t){}})):Object.keys(r).forEach((function(t){try{n.g.ExtsRuntime.callExtensionAPI(e.name,"commander.registerCommand",t,r[t]),e._commandNames.push(t)}catch(t){}}))),this._contextMenuCreators=[],this._module.contextMenuCreators&&this._module.contextMenuCreators.forEach((function(t){try{var r,o=n.g.ExtsRuntime.callExtensionAPI(e.name,"contextmenu.addContextMenuCreator",t.match||t.contextName,t.create||t.items);o&&(Array.isArray(o)?(r=e._contextMenuCreators).push.apply(r,function(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(o)):e._contextMenuCreators.push(o))}catch(t){}}))),this._loadTime=(new Date).getTime()-o,100<this._loadTime&&this.addError("loadModule()","It takes more than 100ms(".concat(this._loadTime,") to load the module."),!0),this._loaded=!0,DEBUG&&(console.collapse("Extension Attach","greenBg",this.name,"greenPale","spend time: ".concat(this._loadTime,"ms"),100<this._loadTime?"red":"green"),console.trace("extension",this),console.log("module",this._module),console.groupEnd())}return this._module}},{key:"isModuleLoaded",get:function(){return this._loaded}},{key:"needRestart",get:function(){return this._needRestart||!this.disabled&&this.hasModule&&!this._loaded&&!this.hot&&!this.buildIn}},{key:"attach",value:function(){if(!this.disabled&&!this._loaded&&this.hasModule)return this.loadModule(),this._attached=!0}},{key:"hotAttach",value:function(){return!(!this.hot||!this.attach()||(this.tryCallModuleMethod("onReady",this),0))}},{key:"detach",value:function(){var e=this,t=(this._module&&this._loaded&&(this._contextMenuCreators&&(this._contextMenuCreators.forEach((function(t){n.g.ExtsRuntime.callExtensionAPI(e.name,"contextmenu.removeContextMenuCreator",t)})),this._contextMenuCreators=null),this._commandNames&&(this._commandNames.forEach((function(t){n.g.ExtsRuntime.callExtensionAPI(e.name,"commander.unregisterCommand",t)})),this._commandNames=null),this.tryCallModuleMethod("onDetach",this)),this.mainFile);t&&"BUILD-IN"!==t&&require.cache&&delete require.cache[t],this._module=null,this._loaded=!1,this._attached=!1,this.isRemote||this.deleteConfig(),DEBUG&&(console.collapse("Extension Detach","greenBg",this.name,"greenPale"),console.trace("extension",this),console.groupEnd())}},{key:"hasReplaceViews",get:function(){if(this.disabled)return DEBUG&&console.warn("The extension has been disabled.",this),!1;var e=this.module;return e&&e.replaceViews}},{key:"replaceViews",get:function(){return this.disabled?(DEBUG&&console.warn("The extension has been disabled.",this),null):n.g.ExtsRuntime&&n.g.ExtsRuntime.checkExtensionAPIPermission(this,"ext.replaceViews")?(e=this.module)&&e.replaceViews:void 0;var e}},{key:"loadTime",get:function(){return this._loadTime}},{key:"module",get:function(){return this.disabled?(DEBUG&&console.warn("The extension has been disabled.",this),!1):this._module||this.loadModule()}},{key:"hasModuleMethod",value:function(e){if(this.disabled)return!1;var t=this._module;return"function"==typeof(t&&t[e])}},{key:"callModuleMethod",value:function(e){if(this.disabled)DEBUG&&console.warn("The extension has been disabled.",this);else if(this.buildIn||n.g.ExtsRuntime&&n.g.ExtsRuntime.checkExtensionAPIPermission(this,"ext.".concat(e))){var t=null==(t=this._module)?void 0:t[e];if("function"==typeof t){for(var r=arguments.length,o=new Array(1<r?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];try{return t.apply(this.proxy,o)}catch(t){DEBUG&&(console.collapse("Extension","greenBg",this.name,"redPale","call module method '".concat(e,"' error"),"red"),console.log("methodName",e),console.log("params",o),console.error("error",t),console.log("extension",this),console.groupEnd()),this.addError("module.".concat(e,"()"),'Some errors occurred while call module method ".'.concat(e,"(").concat(o?o.map(JSON.stringify).join(", "):"",')":\n').concat(t.message,"\n").concat(t.stack),!0)}}}else this.addError("module.".concat(e,"()"),'The extension has not permission to call module method "'.concat(e,'".'),!0)}},{key:"tryCallModuleMethod",value:function(e){if(!this.disabled){var t=null==(t=this._module)?void 0:t[e];if("function"==typeof t){for(var n=arguments.length,r=new Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return this.callModuleMethod.apply(this,[e].concat(r))}}}},{key:"getUrlInspector",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"inspect";if(this.disabled)return DEBUG&&console.warn("The extension has been disabled.",this),null;if(!n.g.ExtsRuntime||!n.g.ExtsRuntime.checkExtensionAPIPermission(this,"ext.urlInspectors"))return null;var r=null==(r=this.module)?void 0:r.urlInspectors;if(!r)return null;Array.isArray(r)||(r=[r]);try{var o=new URL(e),a=r.find((function(n){return!!n[t]&&("function"==typeof n.test?n.test(e,o):(Array.isArray(n.test)?n.test=new Set(n.test):"string"==typeof n.test&&(n.test=new RegExp(n.test,"i")),n.test instanceof Set?n.test.has(o.host):n.test.test(e)))}));return a&&!a.provider&&(a.provider={icon:this.icon,name:this.name,label:this.displayName,url:"!showExtensionDialog/".concat(this.name)}),a}catch(r){return DEBUG&&console.warn("Get url inspectors error: ",r,this),null}}},{key:"getUrlOpener",value:function(e){return this.getUrlInspector(e,"open")}},{key:"formatContextMenuItem",value:function(e){var t={EXTENSION:"extension.".concat(this.name),NAME:this.name};return(e=y({},e)).url&&(e.url=(0,a.formatString)(e.url,t)),"object"===h(e.label)&&(e.label=(0,c.getStringFromObject)(e.label)),e.label="".concat(e.label||e.url),"!"===e.label[0]?e.label=e.label.substr(1):e.noLabelPrefix?delete e.noLabelPrefix:e.label="".concat(this.displayName,": ").concat(e.label),e.icon||(e.icon=this.icon),e}},{key:"getMatchScore",value:function(e){return(0,l.matchScore)(b,this,e)}},{key:"saveData",value:function(){var e=y({},this._data);delete e.remoteLoaded,delete e.loadRemoteFailed,delete e.serverData,this.setConfig("_data",e)}},{key:"category",get:function(){var e=this._pkg.category;return(0,a.isNotEmptyString)(e)?e:this.isRemote?"remote":this.buildIn?"buildIn":null}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,f),Object.defineProperty(t,"prototype",{writable:!1}),e}();g(t.default=v,"TYPES",r),g(v,"PROXY_PROPERTIES",(0,f.createProxyPropertiesMap)(["name","displayName","type","isTheme","isApp","isPlugin","accentColor",{name:"icon",get:function(e){return e._pkg.icon}},"description","version","author","publisher","category","company","homepage","keywords","repository","bugs","installTime","updateTime","hot","serverData","isRemote","isDev",{name:"getConfig",func:function(e,t){return e.getConfig(t)}},{name:"setConfig",func:function(e,t,n){return e.getConfig(t,n)}},{name:"getUserConfig",func:function(e,t){return e.getUserConfig(t)}},{name:"setUserConfig",func:function(e,t,n){return e.getUserConfig(t,n)}},{name:"getAbsolutePath",func:function(e,t,n){return e.getAbsolutePath(t,n)}}])),g(v,"PROXY_HANDLER",(0,f.createProxyHandler)(v.PROXY_PROPERTIES)),g(v,"user",void 0),DEBUG&&(n.g.$Extension=v)},74115:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=[{name:"home",displayName:i.default.string("exts.home.label"),description:i.default.string("exts.home.desc"),buildIn:{fixed:!0,asDefault:!0},type:"app",appIcon:"mdi-apps",appAccentColor:"#3f51b5",appType:"insideView"},{name:"extensions",displayName:i.default.string("exts.extensions.label"),description:i.default.string("exts.extensions.desc"),buildIn:{},type:"app",appIcon:"mdi-puzzle",appAccentColor:"#00c853",appType:"insideView",hidden:a.default.ui["exts.app.home.hideExtensionsApp"]},{name:"themes",displayName:i.default.string("exts.themes.label"),description:i.default.string("exts.themes.desc"),buildIn:{},type:"app",appIcon:"mdi-airballoon",appAccentColor:"#f50057",appType:"insideView"},{name:"group",displayName:i.default.string("exts.group.label"),description:i.default.string("exts.group.desc"),buildIn:{},type:"app",appIcon:"mdi-account-group",appAccentColor:"#35a8f8",appType:"insideView",hidden:!0},{name:"files",displayName:i.default.string("exts.files.label"),description:i.default.string("exts.files.desc"),buildIn:{},type:"app",appIcon:"mdi-folder",appAccentColor:"#ff9100",appType:"insideView"},{name:"api",displayName:i.default.string("exts.api.label"),description:i.default.string("exts.api.desc"),buildIn:{},type:"app",appIcon:"mdi-api",appAccentColor:"#9958dc",appType:"insideView"}],n=null==(n=a.default.exts)?void 0:n.internals;return Array.isArray(n)&&n.length&&t.push.apply(t,function(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n)),(n=o.default.call("buildIn.getBuildInExtensions"))&&Array.isArray(n)&&(e=o.default.access("buildIn.buildInPath"),n.forEach((function(n){var a;"string"==typeof n?(a=r.default.join(e,n,"package.json"),null!=(a=o.default.fs.readJsonSync(a,{throws:!1}))&&a.name):n&&"object"===u(n)&&(n.buildIn={localPath:r.default.join(e,n.name)},t.push(n),DEBUG&&(console.collapse("Extension local","greenBg",n.name,"greenPale"),console.log("ext",n),console.groupEnd()))}))),t};var r=l(n(26470)),o=l(n(94128)),a=l(n(74160)),i=l(n(61862));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},94743:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AppExtension",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"PluginExtension",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"ThemeExtension",{enumerable:!0,get:function(){return i.default}}),t.setExtensionUser=t.default=t.createExtension=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};if((t=u(t))&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(n(92030)),o=l(n(23810)),a=l(n(8927)),i=l(n(49034));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.createExtension=function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(e.pkg&&!n&&(n=(t=e).data,e=t.pkg),!0!==(2<arguments.length&&void 0!==arguments[2]&&arguments[2])?(e&&e.buildIn&&delete e.buildIn,n&&n.buildIn&&delete n.buildIn):e.buildIn&&e.buildIn.localPath&&(n.localPath=e.buildIn.localPath),"object"!==s(n)&&(n=null),e.type||e.xext&&e.xext.type){case r.TYPES.app:return new o.default(e,n);case r.TYPES.plugin:return new a.default(e,n);case r.TYPES.theme:return new i.default(e,n);default:return new r.default(e,n)}},t.setExtensionUser=function(e){r.default.user=e},n=r.default,t.default=n},46809:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setInstalledExtensionChangeListener=t.saveInstalledExtension=t.saveExtensionsToStore=t.saveExtensionData=t.removeInstalledExtensionByName=t.removeInstalledExtension=t.getInstalledExtensions=t.getInstalledExtension=t.getIndexOfInstallExtension=t.default=void 0;var r=(m=n(81595))&&m.__esModule?m:{default:m},o=n(94743);function a(){r.default.set(d,h.map((function(e){return e.storeData})))}function i(e){return h.find((function(t){return t.name===e}))}function l(e){return h.findIndex((function(t){return t.name===e}))}function u(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;if(e.isRemote)return p&&p(e,"update"),Promise.resolve(e);var o=l(e.name);if(-1<o){if(!t)return Promise.reject(new Error("EXT_NAME_ALREADY_INSTALLED"));t=h[o],e._data=Object.assign(t.data,e._data),e.updateTime=(new Date).getTime(),h.splice(o,1,e)}else void 0===e.installTime&&(e.installTime=(new Date).getTime()),h.push(e);return n&&n(e),a(),p&&p(e,-1<o?"update":"add"),r&&r(e),Promise.resolve(e)}function s(e){var t=l(e.name);return t<0?Promise.reject(new Error("EXT_NOT_FOUND")):(h.splice(t,1),a(),p&&p(e,"remove"),Promise.resolve())}function c(e){return(e=i(e))?s(e):Promise.reject(new Error("EXT_NOT_FOUND"))}function f(e){p=e}var d="EXTENSIONS::database",p=null,h=r.default.get(d,[]).map((function(e){return(0,o.createExtension)(e)})),m=(t.getInstalledExtensions=function(){return h},t.saveExtensionsToStore=a,t.getInstalledExtension=i,t.getIndexOfInstallExtension=l,t.saveInstalledExtension=u,t.removeInstalledExtension=s,t.removeInstalledExtensionByName=c,t.setInstalledExtensionChangeListener=f,t.saveExtensionData=function(e){e.saveData(),p(e,"update")},{get installs(){return h},getInstall:i,saveInstall:u,removeInstall:s,setOnChangeListener:f,removeInstallByName:c});t.default=m},46815:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.triggerExtensionChange=t.searchExts=t.searchApps=t.onExtensionChange=t.initExtensions=t.getTypeList=t.getThemeExts=t.getThemeExt=t.getPluginExts=t.getPluginExt=t.getExts=t.getExt=t.getDefaultApp=t.getAppExts=t.getAppExt=t.forEachExtension=t.default=void 0;var o=p(n(74160)),a=p(n(74115)),i=n(94743),l=n(46809),u=p(n(65286)),s=n(18685),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=d(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(61862)),f=n(74543);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(){I.sort((function(e,t){var n=(t.isDev?1:0)-(e.isDev?1:0);return 0===(n=0===(n=0===n?(t.disabled?0:1)-(e.disabled?0:1):n)?(t.isRemote?1:0)-(e.isRemote?1:0):n)?t.installTime-e.installTime:n}))}function y(){k=I.filter((function(e){return"app"===e.type})),j=I.filter((function(e){return"theme"===e.type})),x=I.filter((function(e){return"plugin"===e.type}))}function g(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"update";Array.isArray(e)||(e=[e]),"remove"===n?e.forEach((function(e){var t=I.findIndex((function(t){return t.name===e.name}));-1<t&&I.splice(t,1)})):"update"!==n&&"add"!==n&&"upsert"!==n||(t=!1,e.forEach((function(e){var n=I.findIndex((function(t){return t.name===e.name}));-1<n?I.splice(n,1,e):(I.splice(0,0,e),t=!0)})),t&&m()),y(),A?(A.timer&&clearTimeout(A.timer),e.forEach((function(e){return A.list.add(e)}))):A={list:new Set(e)},A[n]?e.forEach((function(e){return A[n].add(e)})):A[n]=new Set(e),A.timer=setTimeout((function(){u.default.emit(T,Array.from(A.list),A),A=null}),10)}function b(e){switch(e){case"app":return k;case"theme":return j;case"plugin":return x;default:return I}}function v(e,t){return b(t).find((function(t){return t.name===e}))}function w(e){return v(e,"app")}function O(e){return v(e,"plugin")}function S(e){return v(e,"theme")}function _(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"app",n=(e=e.trim().toLowerCase().split(" "),[]);return b(t).forEach((function(t){var r=t.getMatchScore(e);r&&n.push({score:r,ext:t})})),n.sort((function(e,t){return t.score-e.score})),n.map((function(e){return e.ext}))}function C(e){return _(e)}function E(e){return u.default.on(T,e)}function P(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];I.forEach((function(n){n.disabled&&!t||e(n)}))}var k,j,x,M,T="extension.change",I=[],D=o.default.pkg,A=null;t.triggerExtensionChange=g,t.getTypeList=b,t.getExt=v,t.getAppExt=w,t.getPluginExt=O,t.getThemeExt=S,t.searchExts=_,t.searchApps=C,t.onExtensionChange=E,t.forEachExtension=P,t.getExts=function(){return I},t.getAppExts=function(){return k},t.getThemeExts=function(){return j},t.getPluginExts=function(){return x},t.initExtensions=function(){(0,a.default)().forEach((function(e,t){null==e.publisher&&(e.publisher=o.default.exts.buildInPublisher||o.default.pkg.companyShortName||c.default.string("app.companyShortName",o.default.pkg.company)),null==e.author&&(e.author=o.default.exts.buildInAuthor||o.default.pkg.companyShortName||c.default.string("app.companyShortName",o.default.pkg.company)),["license","homepage","bugs","repository"].forEach((function(t){e[t]=D[t]})),e.version=(0,f.simplifyVersion)(D.version),I.push((0,i.createExtension)(e,{installTime:t,pinnedOnMenuOrder:t},!0))})),(!0===o.default.system["localExtensions.enabled"]||DEBUG&&"debug"===o.default.system["localExtensions.enabled"])&&I.push.apply(I,function(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,l.getInstalledExtensions)())),m(),y(),(0,l.setInstalledExtensionChangeListener)(g),(0,s.setServerExtsChangeListener)(g),M=k.find((function(e){return e.buildIn&&e.buildIn.asDefault}))||I.apps[0],(0,c.onLangChange)((function(e){var t=[];P((function(n){n.buildIn&&(n._pkg.displayName=e.string("exts.".concat(n.name,".label"),n._pkg.displayName),n._pkg.description=e.string("exts.".concat(n.name,".desc"),n._pkg.description),t.push(n))})),g(t,"update")})),DEBUG&&(console.collapse("Extensions Init","greenBg","Total: ".concat(I.length,", Apps: ").concat(k.length,", Plugins: ").concat(x.length,", Themes: ").concat(j.length),"greenPale"),console.log("exts",I),console.log("apps",k),console.log("themes",j),console.log("plugins",x),console.groupEnd())},t.getDefaultApp=function(){return M},n.g.ExtsRuntime&&n.g.ExtsRuntime.registerExtensionAPI({name:"ext.updateExtension",level:5,func:function(){g(v(this.name),"update")}}),n={get exts(){return I},get apps(){return k},get themes(){return j},get plugins(){return x},get defaultApp(){return M},getTypeList:b,getExt:v,getApp:w,getPlugin:O,getTheme:S,search:_,searchApps:C,onExtensionChange:E,forEach:P},t.default=n},96521:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.reloadDevExtension=t.openInstallExtensionDialog=t.loadExtensionReadmeFile=t.installExtensionFromFile=t.installExtensionFromDevDir=t.default=t.createExtensionSavePath=void 0,Object.defineProperty(t,"saveExtensionData",{enumerable:!0,get:function(){return i.saveExtensionData}}),t.uninstallExtension=t.setExtensionEnabled=t.setExtensionDisabled=void 0;var o=g(n(26470)),a=n(21614),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=y(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(46809)),l=n(74543),u=n(94743),s=g(n(52133)),c=g(n(61862)),f=g(n(94128)),d=n(78717),p=g(n(74160)),h=n(13544),m=n(15973);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function g(e){return e&&e.__esModule?e:{default:e}}function b(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function v(e){var t=e.localPath;return e.isModuleLoaded&&e.detach(),!!(t&&(t=o.default.join(t,"package.json"),t=M.readJsonSync(t,{throws:!1})))&&(e=(0,u.createExtension)(t,e.data),I(e),DEBUG&&(console.collapse("Extension Reload for Dev","greenBg",e.name,"greenPale"),console.log("extension",e),console.groupEnd()),e)}function w(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=o.default.join(e,"package.json"),a=null;return M.readJSON(r).then((function(t){return a=(0,u.createExtension)(t,{isDev:n}),t=n?e:T(a),a.localPath=t,a.hasModule?(0,d.executeCommand)("showExtensionInstallDialog",a).then((function(e){return e?Promise.resolve(a):Promise.reject()})):Promise.resolve(a)})).then((function(){var e=(0,i.getInstalledExtension)(a.name);return e?e.version&&a.version&&(0,l.compareVersions)(e.version,a.version)<0?s.default.confirm(c.default.format("ext.updateInstall.format",e.displayName,e.version,a.version)).then((function(t){return t?(e.detach(),I(a,!0,!1)):Promise.reject()})):s.default.confirm(c.default.format("ext.overrideInstall.format",e.displayName,e.version||"*",a.displayName,a.version||"*")).then((function(t){return t?(e.detach(),I(a,!0,!1)):Promise.reject()})):I(a,!1,!1)})).then((function(){return n?Promise.resolve(a):M.emptyDir(a.localPath).then((function(){return M.copy(e,a.localPath)}))})).then((function(){return I(a,!0,!0)})).finally((function(){if(t)return M.remove(e)}))}function O(e){return w(e,!1,!0)}function S(e){var t,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return t=e,new Promise((function(e,n){var r=o.default.join(x.tmpPath,(0,a.v4)());k.$(t,{dir:r},(function(t){t?(t.code="EXT_UNZIP_ERROR",n(t)):e(r)}))})).then((function(t){return n&&M.removeSync(e),w(t,!0)}))}function _(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!(DEBUG&&"debug"===p.default.system["localExtensions.enabled"]||!0===p.default.system["localExtensions.enabled"]))return Promise.reject(new Error("Install extensions failed, because local extension is disabled in this client."));j.showOpenDialog(t?".json":".xext,.zip",(function(n){var r;n&&n.length?(n=n[0].path,".json"===(r=o.default.extname(n).toLowerCase())&&"package.json"===o.default.basename(n)?w(o.default.dirname(n),!1,t).then((function(t){return e&&e(t),t})).catch((function(t){e&&e(!1,t)})):".xext"===r||".zip"===r?S(n).then((function(t){return e&&e(t),t})).catch((function(t){e&&e(!1,t)})):e&&e(!1,"EXT_NOT_EXT_SOURCE")):e&&e(!1)}))}function C(e){return e=o.default.join(T(e),"README.md"),M.readFile(e)}function E(e){var t;(e.disabled!==(t=!(1<arguments.length&&void 0!==arguments[1]&&!arguments[1]))||2<arguments.length&&void 0!==arguments[2]&&arguments[2])&&(e.isRemote&&(0,m.getCurrentUser)().config.addExtStateToConfig({name:e.name,disabled:t}),t?(e.detach(),e.disabled=!0):(e.disabled=!1,e.hotAttach())),(0,i.saveExtensionData)(e)}function P(e){return E(e,!1)}var k=(0,h.lazyModuleProxy)("extract-zip"),j=f.default.access("dialog"),x=f.default.access("env"),M=f.default.access("fs"),T=function(e){return e.localPath||o.default.join(x.dataPath,"xexts",e.name)},I=(t.createExtensionSavePath=T,n=function(){e=function*(e){e.detach(),yield(0,i.removeInstalledExtension)(e),e.isDev||(e=T(e),M.remove(e))};var e,t=function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){b(a,r,o,i,l,"next",e)}function l(e){b(a,r,o,i,l,"throw",e)}i(void 0)}))};return function(e){return t.apply(this,arguments)}}(),t.uninstallExtension=n,function(e){return(0,i.saveInstalledExtension)(e,!(1<arguments.length&&void 0!==arguments[1])||arguments[1],null,2<arguments.length&&void 0!==arguments[2]&&!arguments[2]?null:function(e){e.hotAttach()})});t.reloadDevExtension=v,t.installExtensionFromDevDir=O,t.installExtensionFromFile=S,t.openInstallExtensionDialog=_,t.loadExtensionReadmeFile=C,t.setExtensionDisabled=E,t.setExtensionEnabled=P,h={db:i.default,createSavePath:T,uninstall:n,installExtensionFromFile:S,openInstallDialog:_,loadReadmeMarkdown:C,installFromDevDir:O,reloadDevExtension:v,setExtensionDisabled:E,setExtensionEnabled:P},t.default=h},8927:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=i(e);if(n=t?(n=i(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==o)return o;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e);var n=a(r);function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,o=this,a=r;if(!(o instanceof a))throw new TypeError("Cannot call a class as a function");if((o=n.call(this,e,t)).isPlugin)return o._pkg.main||o._pkg.buildIn&&o._pkg.buildIn.module||(o._pkg.main="index.js",o.addError("main",'The main attribute must be set when the extension type is plugin, set to "index.js" temporarily.')),o;throw new Error("Cannot create a plugin extension from the type '".concat(o.type,"'."))}return r}(((n=n(92030))&&n.__esModule?n:{default:n}).default),t.default=n},18685:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setServerExtsChangeListener=t.getEntryVisitUrl=t.fetchServerExtensions=t.detachServerExtensions=t.default=void 0;var r=h(n(26470)),o=h(n(24260)),a=h(n(13347)),i=n(94743),l=h(n(61997)),u=h(n(94128)),s=h(n(61862)),c=n(13544),f=h(n(12482)),d=n(96521),p=n(15973);function h(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){b(a,r,o,i,l,"next",e)}function l(e){b(a,r,o,i,l,"throw",e)}i(void 0)}))}}var w=(0,c.lazyModuleProxy)("extract-zip"),O=(n=u.default.modules).fs,S=n.net,_=n.os,C=null,E=null,P=!1,k=null;function j(){return(j=v((function*(e){var t,n,o,a,i=f.default.create({url:e.download,gid:"EXT_".concat(e.name),name:e.name,storageType:"extension"});i.userSavePath=e.remoteCachePath;try{var l=yield S.downloadFile((0,p.getCurrentUser)(),i,(function(t){e.downloadProgress=t/100,C&&C(e,"update")}));return l.cachePath&&(t={zipPath:l.cachePath,destPath:e.localPath},n=t.zipPath,o=t.destPath,a=void 0===(t=t.removeZip)||t,yield new Promise((function(e,t){w.$(n,{dir:o},(function(r){a&&O.removeSync(n),r?(r.code="EXT_UNZIP_ERROR",t(r)):e()}))})),yield O.outputJson(r.default.join(e.localPath,"md5.json"),{md5:e.md5,download:e.download,downloadTime:Date.now()})),l}catch(t){throw i=new Error("Cannot download extension package form remote server ".concat(e.download,", the origin error is ").concat(t)),i.originError=t,i}}))).apply(this,arguments)}function x(e){var t,n;e&&D.push(e),A||D.length&&(A=!0,t=D[0],n=function(){var e=D.findIndex((function(e){return e.id===t.id}));-1<e&&D.splice(e,1),A=!1,D.length&&x()},a.default.socket.sendAndListen({module:"entry",method:"visit",params:{entryID:t.entryID,referer:t.referer}}).then((function(e){return n(),t.resolve(e),e})).catch((function(e){n(),t.reject(e)})))}function M(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return new Promise((function(n,r){x({id:(0,l.default)(),entryID:"object"===m(e)?e.entryID||e.name:e,referer:t,resolve:n,reject:r})}))}function T(){D=[],E&&E.length&&(E.forEach((function(e){e.detach()})),C&&C(E,"remove"),E=null)}var I=function(){var e=v((function*(){if(E&&E.length&&!P){var e,t=E.find((function(e){return!e.isRemoteLoaded&&!e.loadRemoteFailed}));if(t){P=!0;try{e=t,(yield new Promise((function(t){O.pathExists(e.localPath).then((function(n){if(n){if((n=O.readJsonSync(r.default.join(e.localPath,"md5.json"),{throws:!1}))&&n.md5===e.md5)return t(!0);O.emptyDirSync(e.localPath)}t(!1)})).catch((function(){return t(!1)}))})))||(yield function(){return j.apply(this,arguments)}(t));var n,o,a,l=yield O.readJson(r.default.join(t.localPath,"package.json"),{throws:!1});l&&l.name?(l.name!==t.name&&DEBUG&&console.warn("The package name(".concat(l.name,") is not match the server name(").concat(t.name,")")),C&&C(t,"remove"),n=E.findIndex((function(e){return e.name===t.name})),t.setLoadRemoteResult(l),t.delete=!0,o=(0,i.createExtension)(g(g({icon:t.icon,serverEntry:t.serverEntry},l),{},{download:t.download,md5:t.md5,entryUrl:t.entryUrl,entryID:t.entryID,optional:t.pkg.optional}),t.data),E.splice(n,1,o),C&&C(o,"add"),void 0!==(a=(0,p.getCurrentUser)().config).extsState[o.name]&&(0,d.setExtensionDisabled)(o,a.extsState[o.name],!0)):t.setLoadRemoteResult(!1,"".concat(s.default.string("ext.extension.pkgHasError")).concat(t.localPath))}catch(n){DEBUG&&console.error('Download extension "'.concat(t.name,'" with error:'),n),t.setLoadRemoteResult(!1,"".concat(s.default.error(n),"(").concat(t.download,")"))}!t.delete&&C&&C(t,"update"),P=!1,I()}}}));return function(){return e.apply(this,arguments)}}(),D=[],A=!1;t.getEntryVisitUrl=M,o.default.setHandlers({extensionGetList:function(e){var t,n=(0,p.getCurrentUser)();n&&e.isSuccess&&e.data.length&&(t=_.createUserDataPath(n.identify,"","extensions"),e.data.forEach((function(e){e=g({},e);var n=Object.assign(e,{icon:e.logo,entryUrl:e.entryUrl||e.webViewUrl}),o=(!e.download&&e.webViewUrl&&(n.type="app",n.appType="webView",n.webViewUrl=e.webViewUrl),{remote:!0,serverData:e.data}),a=(e.download?(o.remoteCachePath=r.default.join(t,"".concat(e.name,".zip")),o.localPath=r.default.join(t,e.name)):e.webViewUrl&&(o.remoteLoaded=!0),(0,i.createExtension)(n,o));-1<(e=E.findIndex((function(e){return e.name===a.name})))?E.splice(e,1,a):E.splice(0,0,a)})),null!=(n=C)&&n(E,"add"),I())},"entry/visit":function(e){return!!((0,p.getCurrentUser)()&&e.isSuccess&&e.data)&&e.data}}),t.detachServerExtensions=T,c={getEntryVisitUrl:M,fetchServerExtensions:t.fetchServerExtensions=function e(){k&&(clearTimeout(k),k=null);var t=(0,p.getCurrentUser)();t&&!t.isOffline&&(T(),E=[],o.default.send("extensionGetList"),k=setTimeout((function(){(0,p.getCurrentUser)()&&e()}),54e5))},setServerExtsChangeListener:t.setServerExtsChangeListener=function(e){C=e},detachServerExtensions:T},t.default=c},49034:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(92030)),a=i(n(6282));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=c(e);if(n=t?(n=c(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return s(o)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e);var n=u(r);function r(e,t){var o,i;if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");if(o=n.call(this,e,t),t=[],(i="_themes")in(e=s(o))?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,!o.isTheme)throw new Error("Cannot create a theme extension from the type '".concat(o.type,"'."));return(e=o._pkg.themes)&&e.length?o._themes=e.map((function(e){return new a.default(e,s(o))})):o.addError("themes",'At least one theme must be set with "themes" attribute in package.json for theme extension.'),o}return t=r,(e=[{key:"themes",get:function(){return this._themes}},{key:"getTheme",value:function(e){return this.themes.find((function(t){return t.name===e}))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.default),t.default=n},6282:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=u(n(26470)),a=u(n(52324)),i=n(71782),l=n(61862);function u(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(n=r=r||{}).append="append",n.override="override";var f=[{name:"name",equal:100,include:50},{name:"displayName",equal:100,include:50},{name:"pinyinNames",equal:50,include:25},{name:"description",include:25},{name:"author",equal:100,prefix:"@"},{name:"publisher",equal:100,prefix:"@"},{name:"extKeywords",equal:50,include:10,array:!0},{name:"extDisplayName",equal:50,include:25},{name:"extName",equal:50,include:25},{name:"extPinyinNames",equal:50,include:25}];n=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(c(this,"_extension",void 0),c(this,"_data",void 0),c(this,"_pinyinName",void 0),c(this,"_id",void 0),c(this,"_styleFile",void 0),c(this,"_preview",void 0),!t)throw new Error('Theme error: The "data" param can not be empty.');if(!n)throw new Error('Theme error: The "extension" param can not be empty.');this._extension=n,this._data=t}var t,n;return t=e,(n=[{key:"color",get:function(){return this._data.color}},{key:"extension",get:function(){return this._extension}},{key:"name",get:function(){return this._data.name}},{key:"displayName",get:function(){return(0,l.getStringFromObject)(this._data.displayName,this.name)}},{key:"pinyinNames",get:function(){return null==this._pinyinName&&(this._pinyinName=(0,a.default)(this.displayName,"default")),this._pinyinName}},{key:"id",get:function(){return null==this._id&&(this._id="".concat(this.extension.name,":").concat(this.name)),this._id}},{key:"inject",get:function(){return r[this._data.inject]||r.append}},{key:"isAppend",get:function(){return this.inject===r.append}},{key:"isOverride",get:function(){return this.inject===r.override}},{key:"styleFile",get:function(){var e=this._data.style;return e&&!this._styleFile&&(e.startsWith("https://")||e.startsWith("http://")?this._styleFile=e:this._styleFile="file://".concat(o.default.join(this.extension.localPath,e))),this._styleFile}},{key:"scheme",get:function(){var e;return null!=(e=this._data.scheme)?e:"light"}},{key:"author",get:function(){return this.extension.author}},{key:"authorName",get:function(){var e;return"object"===s(this.author)&&(e=this.author.name),(0,l.getStringFromObject)(e)}},{key:"publisher",get:function(){return this.extension.publisher}},{key:"publisherName",get:function(){var e;return"object"===s(this.publisher)&&(e=this.publisher.name),(0,l.getStringFromObject)(e)}},{key:"extKeywords",get:function(){return this.extension.keywords}},{key:"extDisplayName",get:function(){return this.extension.displayName}},{key:"extName",get:function(){return this.extension.name}},{key:"extPinyinNames",get:function(){return this.extension.pinyinNames}},{key:"extDescription",get:function(){return this.extension.description}},{key:"getMatchScore",value:function(e){return(0,i.matchScore)(f,this,e)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),t.default=n},63627:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.writeText=t.writeHTML=t.write=t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=a(t))&&t.has(e))return t.get(e);var n,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var l;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((l=i?Object.getOwnPropertyDescriptor(e,n):null)&&(l.get||l.set)?Object.defineProperty(o,n,l):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(63886));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function i(e){e=new o.ClipboardItem({"text/html":new Blob([e],{type:"text/html"})}),o.write([e])}n=o.writeText,t.writeText=n,t.writeHTML=i,n={write:t.write=function(e){var t={};void 0!==e.html&&(t["text/html"]=new Blob([e.html],{type:"text/html"})),void 0!==e.text&&(t["text/plain"]=new Blob([e.text],{type:"text/plain"})),e=new o.ClipboardItem(t),o.write([e])},writeText:n,writeHTML:i},t.default=n},86632:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(n=n(78826))&&n.__esModule?n:{default:n};t.default={encrypt:function(e,t,n){return t=r.default.utils.utf8.toBytes(t),n=r.default.utils.utf8.toBytes(n),t=new r.default.ModeOfOperation.cbc(t,n),n=r.default.utils.utf8.toBytes(e),e=r.default.padding.pkcs7.pad(n),t.encrypt(e)},decrypt:function(e,t,n){return t=r.default.utils.utf8.toBytes(t),n=r.default.utils.utf8.toBytes(n),t=new r.default.ModeOfOperation.cbc(t,n),n=new Uint8Array(e),e=t.decrypt(n),r.default.utils.utf8.fromBytes(r.default.padding.pkcs7.strip(e))}}},81732:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showSaveDialog=t.default=void 0,n=n(52244),n={showSaveDialog:t.showSaveDialog=function(e,t){e.fileUrl?(window.open(e.fileUrl),null!=t&&t(!0)):(DEBUG&&console.warn("Cannot save file without file url definition"),null!=t&&t(!1))},showOpenDialog:n.showOpenDialog},t.default=n},58399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={get:function(e){return e=e.name,decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*".concat(encodeURIComponent(e).replace(/[-.+*]/g,"\\$&"),"\\s*\\=\\s*([^;]*).*$)|^.*$")),"$1"))||null},set:function(){var e=(i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).url,t=i.name,n=i.value,r=i.expirationDate,o=i.domain,a=i.path,i=i.secure;t&&!["expires","max-age","path","domain","secure"].includes(t.toLowerCase())&&(o=(null!=o?o:e)?new URL(e).hostname:"",document.cookie="".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n)).concat("number"==typeof(e=r)?e===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age=".concat(e):"string"==typeof e?"; expires=".concat(e):e instanceof Date?"; expires=".concat(e.toUTCString()):"").concat(o?"; domain=".concat(o):"").concat(a?"; path=".concat(a):"").concat(i?"; secure":""))},remove:function(e,t){t&&this.hasItem(t)&&(e=e?new URL(e).hostname:"",document.cookie="".concat(encodeURIComponent(t),"=; expires=Thu, 01 Jan 1970 00:00:00 GMT").concat(e?"; domain=".concat(e):""))}}},9533:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=null,r=(a=window.navigator.userAgent).includes("Mac OS"),o=a.includes("Windows"),a=a.includes("Linux");r?n="osx":o?n="windows":a&&(n="linux"),t.default={os:n,isWindowsOS:o,isOSX:r,isLinux:a}},57757:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n=((n=n(94795))&&n.__esModule?n:{default:n}).default,t.default=n},45780:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=!1},38234:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.default=void 0;var r=y(n(47471)),o=y(n(26098)),a=y(n(63627)),i=y(n(10431)),l=y(n(86632)),u=y(n(57757)),s=y(n(9533)),c=y(n(67978)),f=y(n(81732)),d=y(n(37599)),p=y(n(70872)),h=y(n(90657)),m=y(n(58399));function y(e){return e&&e.__esModule?e:{default:e}}n.g.Immutable=r.default,n={type:"browser",displayName:"browser",init:t.init=function(e){(e=e.config)&&i.default.init(e.media["sound.path"])},Socket:o.default,clipboard:a.default,crypto:l.default,EventEmitter:u.default,env:s.default,ui:c.default,notify:d.default,sound:i.default,net:p.default,dialog:f.default,language:h.default,docCookies:m.default},t.default=n},90657:(e,t,n)=>{"use strict";function r(e,t){return(0,o.getJSON)(t?(0,a.formatString)(t,e||i()):"lang/".concat(e||i(),".json"))}Object.defineProperty(t,"__esModule",{value:!0}),t.loadLangData=t.getPlatformLangName=t.default=void 0;var o=n(78437),a=n(16986),i=(t.loadLangData=r,function(e){var t=e.FUZZY_MATCH,n=navigator.language;if(n){if(n=n.toLowerCase(),!t)return n;"zh-cn"!==n&&n.startsWith("zh-")?n="zh-tw":"en"!==n&&!n.startsWith("en-")||(n="en"),e.ALL.find((function(e){return e.name===n}))||(n=e.DEFAULT)}else n=e.DEFAULT;return n});n={loadLangData:r,getPlatformLangName:t.getPlatformLangName=i},t.default=n},70872:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(n=n(78437))&&n.__esModule?n:{default:n};function o(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n=a(a({},r.default),{},{downloadFile:function(e,t){return t},uploadFile:function(e,t){var n,o,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;if(t.originFile)return n=e.uploadUrl,(o=new FormData).append("file",t.originFile,t.name),o.append("userID",e.id.toString()),o.append("gid",t.cgid),t.form=o,r.default.uploadFile(t,n,(function(r){r.setRequestHeader("ServerName",e.serverName),r.setRequestHeader("Authorization",e.token),i&&i(r,t,n)}),a);console.warn("Upload file fail, cannot get origin file object.",t)}}),t.default=n},37599:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(31527);n=n(10431),r={showNotification:r.showNotification,playSound:n.playSound},t.default=r},26098:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(86632));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=u(e);if(n=t?(n=u(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==o)return o;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e);var n=l(r);function r(){var e=this,t=r;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"handleData",value:function(e,t){this.updateStatusFromClient();var n,r=null;if((r=t&&t.binary?this.options&&this.options.encryptEnable?o.default.decrypt(e,this.options.userToken,this.options.cipherIV):this.textDecoder.decode(e):r)&&this.options.parseJSON)try{r=JSON.parse(r)}catch(t){this.options&&this.options.encryptFallback&&"string"==typeof(n=o.default.decrypt(e,this.options.userToken,this.options.cipherIV))&&(r=JSON.parse(n),DEBUG&&(console.collapse("SOCKET Data Encrypt Fallback","redBg"),console.log("data",r),console.log("rawData",e),console.log("socket",this),console.log("decryptData",n),console.groupEnd()))}this.options&&this.options.onData&&this.options.onData(this,r,t),this.onData&&this.onData(r,t)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(a(n(75161)).default),t.default=n},67978:(e,t)=>{"use strict";function n(e){return window.open(e)}function r(){return window.document.hasFocus()}function o(e){i.push(e)}function a(){return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.setZoomFactor=t.openExternal=t.onWindowFocus=t.isWindowOpenAndFocus=t.isWindowOpen=t.isWindowFocus=t.getZoomFactor=t.default=void 0,t.openExternal=n;var i=[],l=r(),u=(setInterval((function(){var e=r();e!==l&&e&&i.forEach((function(e){return e()})),l=e}),300),t.onWindowFocus=o,t.isWindowOpen=a,r),s=(t.isWindowOpenAndFocus=u,r);u={openExternal:n,isWindowOpenAndFocus:u,isWindowFocus:t.isWindowFocus=s,isWindowOpen:a,onWindowFocus:o,getZoomFactor:t.getZoomFactor=function(){var e=Number.parseFloat(document.documentElement.style.zoom);return Number.isNaN(e)?1:e},setZoomFactor:t.setZoomFactor=function(e){document.documentElement.style.zoom=String(e||1)}},t.default=u},78437:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.uploadFile=t.timeout=t.request=t.postText=t.postJSONData=t.postJSON=t.getTextFromResponse=t.getText=t.getJSONData=t.getJSON=t.downloadFile=t.default=t.abortUploadFile=t.abortDownloadFile=void 0;var o=(E=n(23848))&&E.__esModule?E:{default:E},a=n(90625),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=l(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(11803));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function u(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){d(a,r,o,i,l,"next",e)}function l(e){d(a,r,o,i,l,"throw",e)}i(void 0)}))}}function h(e,t){return _(e,t).then(C)}function m(e,t){return _(e,t).then((function(e){return e.json()}))}function y(e,t){return t instanceof FormData&&(t={body:t}),P(e,s({method:"POST"},t))}function g(e,t,n){return new Promise((function(r,o){var a=new XMLHttpRequest;a.onload=function(){var t;delete k[e],200===a.status?(t=a.response)?r(t):o(new i.default(i.Codes.EMPTY_FILE_DATA,"File data is empty.")):o(new i.default(i.Codes.HTTP_STATUS_ERROR,"Status code is not 200.",{status:a.status,statusMessage:a.statusText}))},a.onprogress=function(e){e.lengthComputable&&n&&n(100*e.loaded/e.total,e.loaded,e.total)},a.onerror=function(t){delete k[e],o(new i.default(i.Codes.HTTP_REQUEST_FAIL,"Download request error.",{event:t}))},a.onabort=function(t){delete k[e],o(new i.default(i.Codes.HTTP_ABORT,"Download request abort.",{event:t}))},a.open("GET",e),a.responseType="arraybuffer",t&&t(a),(k[e]=a).send()}))}function b(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return new Promise((function(o,a){var l,u=e.gid,s=new XMLHttpRequest;s.onload=function(){if(u&&delete k[u],200===s.status){var e=s.responseText;try{var t=JSON.parse(e);"success"===t.result&&t.data?o(t.data):a(new i.default(i.Codes.WRONG_RESULT,"The server returned wrong result: ".concat(s.responseText),{responseText:s.responseText}))}catch(t){0<e.indexOf("user-deny-attach-upload")?a(new i.default(i.Codes.USER_DENY_UPLOAD,"Server denied the request.",{responseText:s.responseText})):a(new i.default(i.Codes.HTTP_DATA_ERROR,"Unknown data content: ".concat(e),{responseText:s.responseText,error:t}))}}else a(new i.default(i.Codes.HTTP_STATUS_ERROR,"Status code is not 200.",{status:s.status,statusMessage:s.statusText}))},s.upload.onprogress=function(e){e.lengthComputable&&r&&r(100*e.loaded/e.total,e.loaded,e.total)},s.onerror=function(e){u&&delete k[u],a(new i.default(i.Codes.HTTP_REQUEST_FAIL,"Upload request error.",{event:e}))},s.onabort=function(e){u&&delete k[u],a(new i.default(i.Codes.HTTP_ABORT,"Upload request abort.",{event:e}))},s.open("POST",t),s.setRequestHeader("X-FILENAME",encodeURIComponent(e.name)),n&&n(s),u&&(k[u]=s),s.send(null!=(l=e.form)?l:e.originFile)}))}function v(e){var t=k[e];return!!(t&&1<=t.readyState&&t.readyState<=3)&&(t.abort(),delete k[e],!0)}function w(e){var t=k[e];return!!(t&&1<=t.readyState&&t.readyState<=3)&&(t.abort(),delete k[e],!0)}function O(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:15e3,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new Error("timeout");return(0,a.limitTimePromise)(e,t,n)}var S=new Set([401,402,403,405,500]),_=function(){var e=p((function*(e,t){var n=new Request(e,t),r=(a=c(yield(0,o.default)(window.fetch(n)),2))[0],a=a[1];return r?(DEBUG&&(console.collapse("HTTP ".concat((null==t?void 0:t.method)||"GET"),"blueBg",e,"bluePale","HTTP_REQUEST_FAIL","redPale"),console.log("options",t),console.log("error",r),console.groupEnd()),Promise.reject(new i.default(i.Codes.HTTP_REQUEST_FAIL,{error:r,detail:["Fetch.".concat(t&&t.method||"GET"," from ").concat(e),"    Request:","        Method: ".concat(n.method||"")].join("\n")}))):a.ok?(DEBUG&&(console.collapse("HTTP ".concat((null==t?void 0:t.method)||"GET"),"blueBg",e,"bluePale","OK","greenPale"),console.log("options",t),console.log("response",a),console.log("body",a.body),console.groupEnd()),a):(r=new i.default(S.has(a.status)?"HTTP_STATUS_".concat(a.status):i.Codes.HTTP_STATUS_ERROR,a.statusMessage||"Status code is ".concat(a.status,"."),{request:_,response:a,detail:["Fetch from ".concat(n.url),"    Request:","        Method: ".concat(n.method||""),"        Headers: ".concat(t&&t.headers?JSON.stringify(t.headers):""),"    Response:","        Type: ".concat(a.type||""),"        Status: ".concat(a.status||""),"        OK: ".concat(a.ok||""),"        Redirected: ".concat(a.redirected||""),"        StatusText: ".concat(a.statusText||"")].join("\n")}),(e=c(yield(0,o.default)(a.clone().text()),2))[0],(n=e[1])&&(r.extras.detail+="\n        Body: ".concat(n||"")),Promise.reject(r))}));return function(t,n){return e.apply(this,arguments)}}(),C=(t.request=_,function(){var e=p((function*(e){var t,n=e.headers.get("Content-Type");return n&&n.toLowerCase().includes("charset=gb")?(t=yield e.blob(),new Promise((function(e,n){var r=new FileReader;r.onload=function(){e(r.result)},r.onerror=n,r.readAsText(t,"GBK")}))):e.text()}));return function(t){return e.apply(this,arguments)}}()),E=(t.getTextFromResponse=C,t.getText=h,function(){var e=p((function*(e,t){return t instanceof FormData&&(t={body:t}),(yield _(e,s({method:"POST"},t))).text()}));return function(t,n){return e.apply(this,arguments)}}()),P=(t.postText=E,t.getJSON=m,n=function(){var e=p((function*(e,t){t instanceof FormData&&(t={body:t});var n=(t=c(yield(0,o.default)(_(e,s({method:"POST"},t))),2))[0];if(t=t[1],n)return(r=n.getExtras("response"))&&(r=yield r.text(),n.setExtras("responseText",r),null==n.detail&&(n.detail=["Fetch json from ".concat(e),"    Response:","        Type: ".concat(t.type||""),"        Status: ".concat(t.status||""),"        OK: ".concat(t.ok||""),"        Redirected : ".concat(t.redirected||""),"        StatusText: ".concat(t.statusText||"")].join("\n")),n.detail="".concat(r,"\n-------------------\n").concat(n.detail)),Promise.reject(n);var r=(e=c(yield(0,o.default)(t.json()),2))[0];return n=e[1],r?Promise.reject(new i.default(r)):n}));return function(t,n){return e.apply(this,arguments)}}(),t.postJSON=n,function(){var e=p((function*(e,t){var n;return(t=yield m(e,t))?"success"===(n=t.status||t.result)||"ok"===n||200===n?Promise.resolve(t.data):Promise.reject(new i.default(i.Codes.WRONG_RESULT,t.message||t.reason||"The server data result is ".concat(n),{jsonResult:n,detail:["Fetch json data from ".concat(e),"    JSON: ".concat(JSON.stringify(t))].join("\n")})):Promise.reject(new i.default(i.Codes.HTTP_DATA_ERROR,"Server return a null json when get json from ".concat(e,"."),{url:e}))}));return function(t,n){return e.apply(this,arguments)}}()),k=(t.getJSONData=P,t.postJSONData=y,{});t.downloadFile=g,t.uploadFile=b,t.abortUploadFile=v,t.abortDownloadFile=w,t.timeout=O,E={request:_,getTextFromResponse:C,getText:h,postText:E,getJSON:m,postJSON:n,getJSONData:P,postJSONData:y,downloadFile:g,uploadFile:b,abortUploadFile:v,abortDownloadFile:w,timeout:O},t.default=E},31527:(e,t)=>{"use strict";function n(e){var t=e.title,n=e.click;return delete e.title,delete e.click,t=new Notification(t,e),n&&(t.onclick=n),t}Object.defineProperty(t,"__esModule",{value:!0}),t.showNotification=t.default=void 0;var r={show:t.showNotification=function(e){return"granted"===Notification.permission?Promise.resolve(n(e)):"denied"!==Notification.permission?new Promise((function(t,r){Notification.requestPermission((function(o){"granted"===o?t(n(e)):r(new Error("denied"))}))})):Promise.reject(new Error("denied"))}};t.default=r},52244:(e,t)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.showOpenDialog=o;var r=document.getElementById("fileOpenButton");function o(e,t){var o,a;"function"==typeof e&&(t=e,e=""),"object"===n(e)&&(a=[],null!=(o=e)&&null!=(o=o.filters)&&o.forEach((function(e){null!=(e=e.extensions)&&e.forEach((function(e){e&&"*"!==e&&a.push(e.includes("/")?e:".".concat(e))}))})),e=a.join(",")),r.accept=e,r.onchange=function(){var e=r.files;e.length?(t(e),setTimeout((function(){r.onchange=null,r.value=""}),500)):t(null)},r.click()}t.default={showOpenDialog:o}},75161:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(86632));function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function i(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var l=new(o(n(60811)).default)({CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3,UNCONNECT:4},4);n=function(){function e(t,n){var r=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");i(this,"_status",l.create(l.UNCONNECT)),i(this,"options",void 0),i(this,"url",void 0),i(this,"client",void 0),i(this,"textDecoder",new TextDecoder("utf-8")),i(this,"textEncoder",new TextEncoder),this._status.onChange=function(e,t){r.onStatusChange&&r.onStatusChange(e,t)},t&&this.init(t,n)}var t,n;return t=e,(n=[{key:"init",value:function(e,t){this.close(1e3,"Normal Closure From Init"),this.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({connect:!0,userToken:"",cipherIV:"",encryptEnable:!0,parseJSON:!0,encryptFallback:!0},t),this.url=e,this._status.change(l.UNCONNECT),this.options.connect&&this.url&&this.connect(),this.onInit&&this.onInit()}},{key:"statusName",get:function(){return this._status.name}},{key:"status",get:function(){return this._status.value},set:function(e){this._status.change(e)}},{key:"isConnected",get:function(){return this.isStatus(l.OPEN)}},{key:"isConnecting",get:function(){return this.isStatus(l.CONNECTING)}},{key:"isStatus",value:function(e){return this._status.is(e)}},{key:"updateStatusFromClient",value:function(){this.client?this.status=this.client.readyState:this.status=l.UNCONNECT}},{key:"connect",value:function(){var e=this,t=(this.close(1e3,"Normal Closure From Connect"),this.status=l.CONNECTING,new WebSocket(this.url));t.binaryType="arraybuffer",t.onopen=this.handleConnect.bind(this),t.onmessage=function(t){e.handleData(t.data,{binary:!0})},t.onclose=function(t){if(e.isConnecting)return e.handleConnectFail(t);e.handleClose(t.code,t.reason)},t.onerror=function(t){e.isConnected&&e.handleError(t)},this.client=t}},{key:"reconnect",value:function(){return this.connect()}},{key:"handleConnectFail",value:function(e){this.onConnectFail&&this.onConnectFail(e),this.options&&this.options.onConnectFail&&this.options.onConnectFail(e)}},{key:"handleConnect",value:function(){this.updateStatusFromClient(),DEBUG&&(console.collapse("SOCKET Connected","greenBg",this.url,"greenPale"),console.log("socket",this),console.groupEnd()),this.options&&this.options.onConnect&&this.options.onConnect(),this.onConnect&&this.onConnect()}},{key:"handleClose",value:function(e,t){var n=!this._status.is(l.CLOSING);this.updateStatusFromClient(),this.client=null,DEBUG&&(console.collapse("SOCKET Closed","greenBg",this.url,"greenPale"),console.trace("socket",this),console.log("code",e),console.log("reason",t),console.groupEnd()),this.options&&this.options.onClose&&this.options.onClose(this,e,t,n),this.onClose&&this.onClose(e,t,n)}},{key:"handleError",value:function(e){this.updateStatusFromClient(),DEBUG&&(console.collapse("SOCKET Error","redBg",this.url,"redPale"),console.log("socket",this),console.log("error",e),console.groupEnd()),this.options&&this.options.onError&&this.options.onError(this,e),this.onError&&this.onError(e)}},{key:"send",value:function(e,t){var n=this.options&&this.options.encryptEnable?r.default.encrypt(e,this.options.userToken,this.options.cipherIV):this.textEncoder.encode(e);this.client.send(n),t&&t()}},{key:"markClose",value:function(){this.status=l.CLOSING}},{key:"removeAllListeners",value:function(){this.client.onclose=null,this.client.onerror=null,this.client.onmessage=null,this.client.onopen=null}},{key:"close",value:function(e,t){this.client&&(t&&("close"===t||t.startsWith("USER_KICKOFF")||"PING_TIMEOUT"===t)&&(DEBUG&&(console.collapse("SOCKET Close","greenBg",t,"greenPale"),console.log("socket",this),console.log("reason",t),console.groupEnd()),this.markClose()),this.removeAllListeners(),this.client.close(),this.handleClose(e,t))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),i(t.default=n,"STATUS",l)},10431:(e,t)=>{"use strict";function n(e){(o=e||o).endsWith("/")||(o="".concat(o,"/"))}function r(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"message",n=a.get(t="string"!=typeof t?"message":t);n||(e="sound-".concat(t),(n=document.getElementById(e))||((n=document.createElement("audio")).id=e,(e=document.createElement("source")).type="audio/ogg",e.src="".concat(o).concat(t,".ogg"),n.appendChild(e),(e=document.createElement("source")).type="audio/mpeg",e.src="".concat(o).concat(t,".mp3"),n.appendChild(e),(e=document.createElement("source")).type="audio/mp4",e.src="".concat(o).concat(t,".aac"),n.appendChild(e),document.getElementById("sound-audios").appendChild(n)),a.set(t,n)),n.play()}Object.defineProperty(t,"__esModule",{value:!0}),t.playSound=t.initSound=t.default=void 0;var o="media/sound/",a=new Map,i=(t.initSound=n,t.playSound=r,document.getElementById("sound-audios")||((i=document.createElement("div")).id="sound-audios",i.style.display="none",document.body.appendChild(i)),{init:n,play:r});t.default=i},94128:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.platformHas=t.platformCall=t.platformAccess=t.default=t.PlatformModule=void 0;var r=(r=n(38234))&&r.__esModule?r:{default:r},o=n(74160);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function u(e,t){return(t=s(e,t,"get")).get?t.get.call(e):t.value}function s(e,t,n){if(t.has(e))return t.get(e);throw new TypeError("attempted to "+n+" private field on non-instance")}var c=new WeakMap,f=function(){function e(t){var n=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");(function(e,t,n){var r=e;if(t.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object");t.set(e,{writable:!0,value:void 0})})(this,c),l(this,"call",(function(e){if("function"!=typeof(e=n.access(e)))return e;for(var t=arguments.length,r=new Array(1<t?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return e.apply(void 0,r)})),l(this,"access",(function(e){"string"==typeof e&&(e=e.split("."));var t,r=u(n,c),o=function(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw o}}}}(e);try{for(o.s();!(t=o.n()).done&&null!==(r=r[t.value])&&"object"===a(r););}catch(e){o.e(e)}finally{o.f()}return r})),l(this,"has",(function(e){return void 0!==n.access(e)})),function(e,t,n){if((t=s(e,t,"set")).set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(this,c,t)}var t,n;return t=e,(n=[{key:"modules",get:function(){return u(this,c)}},{key:"type",get:function(){return u(this,c).type}},{key:"displayName",get:function(){return u(this,c).displayName}},{key:"env",get:function(){return u(this,c).env}},{key:"isType",value:function(e){return e===this.type}},{key:"init",value:function(e){this.call("init",e)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();r=(f=new(t.PlatformModule=f)(r.default)).access,t.platformAccess=r,r=f.call,t.platformCall=r,r=f.has,t.platformHas=r,(r=f.call("buildIn.getBuildInConfig"))&&(r.system&&(delete r.system.permissions,delete r.system["localExtensions.enabled"]),(0,o.updateConfig)(r)),DEBUG&&(n.g.$platform=f),t.default=f},81233:(e,t)=>{"use strict";function n(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");n(this,"aborted",!1),n(this,"abortCallback",null)}var t,r;return t=e,(r=[{key:"isAborted",get:function(){return this.aborted}},{key:"onAbort",value:function(e){this.abortCallback=e}},{key:"abort",value:function(){this.abortCallback&&this.abortCallback(),this.aborted=!0}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=r},37869:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeAsap=t.cancelAsap=void 0,t.executeAsap=function(e){return{id:setTimeout(e,0),type:"timeout"}},t.cancelAsap=function(e){return clearTimeout(e)}},11803:(e,t)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e){var t=l();return function(){var r,o=s(e);if(r=t?(r=s(this).constructor,Reflect.construct(o,arguments,r)):o.apply(this,arguments),o=this,r&&("object"===n(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return a(o)}}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t,n){return(i=l()?Reflect.construct:function(e,t,n){var r=[null];return r.push.apply(r,t),t=new(Function.bind.apply(e,r)),n&&u(t,n.prototype),t}).apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Codes=void 0;var f=function(e){var t=s;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e);var i,l=o(s);function s(e){var t,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"[".concat(e,"]"),o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=this,u=s;if(i instanceof u)return"object"===n(r)&&null!==r&&(o=r,r=null),c(a(t=l.call(this,r)),"name",void 0),c(a(t),"code",void 0),c(a(t),"extras",void 0),c(a(t),"time",void 0),c(a(t),"getExtras",(function(e){var n;return e?null==(n=t.extras)?void 0:n[e]:t.extras})),t.name="CodedError",t.code=e,t.extras=o,t.time=Date.now(),t;throw new TypeError("Cannot call a class as a function")}return t=s,e=[{key:"create",value:function(e){var t,n,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:d.COMMON_ERROR;return"string"==typeof e?new s(r,e):e instanceof s?e:e instanceof Error?((n=new s(r,e.message,{error:e})).stack=e.stack,n):null!==(n=e)&&"message"in n?(t=e.message,e.code||(r=e.code),delete e.message,delete e.code,new s(r,t,e)):new s(d.TYPE_ERROR,"Cannot create a CodedError instance with the given params.",{error:e,code:r})}}],(i=[{key:"setExtras",value:function(e,t){"object"===n(e)?Object.assign(this.extras,e):this.extras[e]=t}},{key:"detail",get:function(){return this.getExtras("detail")},set:function(e){this.setExtras("detail",e)}},{key:"error",get:function(){return this.getExtras("error")},set:function(e){this.setExtras("error",e)}},{key:"detailMessage",get:function(){var e=this.message,t=this.detail,n=e;return t&&e!==t?"".concat(n,"\n").concat(t):n}}])&&r(t.prototype,i),e&&r(t,e),Object.defineProperty(t,"prototype",{writable:!1}),s}(function(e){var t="function"==typeof Map?new Map:void 0;return function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return i(e,arguments,s(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,e)}(e)}(Error)),d=(t.default=f,{COMMON_ERROR:"COMMON_ERROR",SERVER_VERSION_UNKNOWN:"SERVER_VERSION_UNKNOWN",SERVER_VERSION_NOT_SUPPORT:"SERVER_VERSION_NOT_SUPPORT",USER_INVALID:"USER_INVALID",USER_DENY_UPLOAD:"USER_DENY_UPLOAD",BUSY:"BUSY",CLIENT_REQUIRE_UPDATE:"CLIENT_REQUIRE_UPDATE",SOCKET_CLOSED:"SOCKET_CLOSED",SOCKET_FAIL:"SOCKET_FAIL",HTTP_DATA_ERROR:"HTTP_DATA_ERROR",HTTP_REQUEST_FAIL:"HTTP_REQUEST_FAIL",HTTP_STATUS_ERROR:"HTTP_STATUS_ERROR",HTTP_ABORT:"HTTP_ABORT",HTTP_ERROR:"HTTP_ERROR",HTTP_ETIMEDOUT:"HTTP_ETIMEDOUT",NET_TRACEROUTE_ERROR:"NET_TRACEROUTE_ERROR",NET_PING_FAIL:"NET_PING_FAIL",WRONG_RESULT:"WRONG_RESULT",EMPTY_FILE_DATA:"EMPTY_FILE_DATA",TYPE_ERROR:"TYPE_ERROR",INVALID_TOKEN:"INVALID_TOKEN",INVALID_URL:"INVALID_URL",BACKEND_SERVER_ERROR:"BACKEND_SERVER_ERROR",NAMESERVER_NOT_FOUND:"NAMESERVER_NOT_FOUND"});t.Codes=d},28064:(e,t)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function a(e,t){return f(e,t)}function i(e){return Math.floor(a(e,255))}function l(e){if(!c.test(e))throw new Error("Wrong hex string! (hex: ".concat(e,")"));if(4===(e=e.toLowerCase()).length){for(var t="#",n=1;n<4;n++)t+=e.slice(n,n+1).concat(e.slice(n,n+1));e=t}for(var r=[],o=1;o<7;o+=2)r.push(Number.parseInt("0x".concat(e.slice(o,o+2)),16));return{r:r[0],g:r[1],b:r[2],a:1}}function u(e){function t(e){return 6*(e=e<0?e+1:1<e?e-1:e)<1?l+(i-l)*e*6:2*e<1?i:3*e<2?l+(i-l)*(2/3-e)*6:l}var n=e.h,r=e.s,o=e.l,i=(e=e.a,n=n%360/360,r=a(r),o=a(o),e=a(e),o<=.5?o*(r+1):o+r-o*r),l=2*o-i;return{r:255*t(n+1/3),g:255*t(n),b:255*t(n-1/3),a:e}}function s(e){return 1===(e=e.toString(16)).length?"0".concat(e):e}Object.defineProperty(t,"__esModule",{value:!0}),t.isColor=t.hslToRgb=t.hexToRgb=t.default=t.Color=void 0;var c=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,f=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:255;return Math.min(Math.max(e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:0),t)},d=(t.hexToRgb=l,t.isColor=function(e){return"transparent"===e.toLowerCase()||c.test(e.trim().toLowerCase())},t.hslToRgb=u,function(){function e(t,n,r){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,i=this,l=e;if(!(i instanceof l))throw new TypeError("Cannot call a class as a function");o(this,"r",void 0),o(this,"g",void 0),o(this,"b",void 0),o(this,"a",void 0),this.init(t,n,r,a)}var t,c,f;return t=e,f=[{key:"create",value:function(t,n,r,o){return t instanceof e?t:new e(t,n,r,o)}}],(c=[{key:"init",value:function(e,t,r){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;this.r=0,this.g=0,this.b=0,this.A=o,"string"==typeof e?"transparent"===(o=e.toLowerCase())?this.A=0:this.rgb=l(o):"number"==typeof e?(this.R=e,this.G=t,this.B=r):"object"===n(e)&&(void 0!==(o=e).h?(t={h:a(o.h,360),s:1,l:1,a:this.A},void 0!==o.s&&(t.s=a(o.s,1)),void 0!==o.l&&(t.l=a(o.l,1)),void 0!==o.a&&(t.a=a(o.a,1)),this.rgb=u(t)):this.rgb=e)}},{key:"R",get:function(){return this.r},set:function(e){this.r=i(e)}},{key:"G",get:function(){return this.g},set:function(e){this.g=i(e)}},{key:"B",get:function(){return this.b},set:function(e){this.b=i(e)}},{key:"A",get:function(){return this.a},set:function(e){this.a=a(e,1)}},{key:"rbg",get:function(){return{r:this.r,g:this.g,b:this.b,a:this.a}}},{key:"rgb",set:function(e){void 0!==e.r&&(this.R=e.r),void 0!==e.g&&(this.G=e.g),void 0!==e.b&&(this.B=e.b),void 0!==e.a&&(this.A=e.a)}},{key:"setRgb",value:function(e){return this.rgb=e,this}},{key:"hsl",get:function(){var e,t,n=this.r/255,r=this.g/255,o=this.b/255,a=this.a,i=Math.max(n,r,o),l=Math.min(n,r,o),u=(i+l)/2,s=i-l;if(i===l)e=t=0;else{switch(t=.5<u?s/(2-i-l):s/(i+l),i){case n:e=(r-o)/s+(r<o?6:0);break;case r:e=(o-n)/s+2;break;case o:e=(n-r)/s+4}e/=6}return{h:360*e,s:t,l:u,a}},set:function(e){this.rgb=u(e)}},{key:"setHsl",value:function(e){return this.hsl=Object.assign(this.hsl,e),this}},{key:"H",get:function(){return this.hsl.h},set:function(e){var t=this.hsl;t.h=a(e,360),this.hsl=t}},{key:"S",get:function(){return this.hsl.s},set:function(e){var t=this.hsl;t.s=a(e,1),this.hsl=t}},{key:"L",get:function(){return this.hsl.l},set:function(e){var t=this.hsl;t.l=a(e,1),this.hsl=t}},{key:"luma",get:function(){var e=this.r/255,t=this.g/255,n=this.b/255;return.2126*(e=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))}},{key:"hex",get:function(){return"#".concat(s(this.r)).concat(s(this.g)).concat(s(this.b))}},{key:"css",get:function(){return 0<this.a?this.a<1?"rgba(".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.a,")"):this.hex:"transparent"}},{key:"darken",value:function(e){var t=this.hsl;return t.l-=e/100,t.l=a(t.l,1),this.hsl=t,this}},{key:"lighten",value:function(e){return this.darken(-e)}},{key:"fade",value:function(e){return this.A=a(e/100,1),this}},{key:"spin",value:function(e){var t=this.hsl;return e=(t.h+e)%360,t.h=e<0?360+e:e,this.hsl=t,this}},{key:"saturate",value:function(e){var t=this.hsl;return t.s+=e/100,t.s=a(t.s),this.hsl=t,this}},{key:"lightness",value:function(e){var t=this.hsl;return t.l+=e/100,t.l=a(t.l),this.hsl=t,this}},{key:"contrast",value:function(){var t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new e(0,0,0,1),r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new e(255,255,255,1),o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:.43;return n=e.create(n),r=e.create(r),n.luma>r.luma&&(r=(t=[n,r])[0],n=t[1]),this.a<.5||!this.isDark(o)?n:r}},{key:"isDark",value:function(){return this.luma<(0<arguments.length&&void 0!==arguments[0]?arguments[0]:.43)}},{key:"clone",value:function(){return new e(this.r,this.g,this.b,this.a)}}])&&r(t.prototype,c),f&&r(t,f),Object.defineProperty(t,"prototype",{writable:!1}),e}());d=t.Color=d,t.default=d},7066:(e,t)=>{"use strict";function n(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){var n,o;n=e,o=r[t],t in n?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return e?e instanceof Date?e:("string"==typeof e&&(e=e.trim(),/^\d+$/.test(e)&&(e=Number.parseInt(e,10))),"number"==typeof e&&e<1e10&&(e*=1e3),new Date(e)):new Date}function a(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Date;return e=o(e),t=o(t),e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Date;return o(e).getFullYear()===o(t).getFullYear()}function l(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Date;return e=o(e),t=o(t),e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function u(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm",n={"M+":(e=o(e)).getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"S+":e.getMilliseconds()};return/(y+)/i.test(t)&&(t=t.replace(RegExp.$1,"".concat(e.getFullYear()).substring(4-RegExp.$1.length))),Object.keys(n).forEach((function(e){new RegExp("(".concat(e,")")).test(t)&&(e="".concat(n[e]),t=t.replace(RegExp.$1,1===RegExp.$1.length?e:"00".concat(e).substring(e.length)))})),t}Object.defineProperty(t,"__esModule",{value:!0}),t.isYesterday=t.isTomorrow=t.isToday=t.isSameYear=t.isSameWeek=t.isSameMonth=t.isSameDay=t.isDBY=t.getTimeBeforeDesc=t.formatDateSpan=t.formatDate=t.createDate=t.calculateTimestamp=t.TIME_DAY=void 0;var s=864e5;t.TIME_DAY=s,t.createDate=o,t.isSameDay=a,t.isSameYear=i,t.isSameMonth=l,t.isSameWeek=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Date;return e=o(e),t=o(t),e=Math.floor(e.getTime()/864e5),t=Math.floor(t.getTime()/864e5),Math.floor((e+4)/7)===Math.floor((t+4)/7)},t.isToday=function(e){return a(o(1<arguments.length&&void 0!==arguments[1]?arguments[1]:null),e)},t.isYesterday=function(e){return a(o(1<arguments.length&&void 0!==arguments[1]?arguments[1]:null).getTime()-s,e)},t.isTomorrow=function(e){return a(o(1<arguments.length&&void 0!==arguments[1]?arguments[1]:null).getTime()+s,e)},t.isDBY=function(e){return a(o(1<arguments.length&&void 0!==arguments[1]?arguments[1]:null).getTime()-2*s,e)},t.formatDate=u,t.formatDateSpan=function(e,t,n){n=r({full:"yyyy-M-d",month:"M-d",day:"d",str:"{0} ~ {1}"},n);var o=u(e,i(e)?n.month:n.full);return a(e,t)?o:(e=u(t,i(e,t)?l(e,t)?n.day:n.month:n.full),n.str.replace("{0}",o).replace("{1}",e))},t.getTimeBeforeDesc=function(e){var t=(new Date).getTime();switch(e){case"oneWeek":return t-7*s;case"oneMonth":return t-31*s;case"threeMonth":return t-80352e5;case"halfYear":return t-183*s;case"oneYear":return t-31536e6;case"twoYear":return t-63072e6;default:return 0}},t.calculateTimestamp=function e(t,n){var r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:Date.now();switch(n){case"year":return e(t*=365,"day",r,o);case"quarter":t*=3;case"month":return e(t*=30,"day",r,o);case"week":t*=7;case"day":t*=24;case"hour":t*=60;case"minute":t*=6e4;break;default:t=0}return r?o+t:o-t}},39450:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e3,n=null,r=null;return function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];n?(clearTimeout(n),r.args.push(a)):r={args:[]},n=setTimeout.apply(void 0,[function(){e.apply(r,a),n=null},t].concat(a))}}},8842:(e,t,n)=>{"use strict";function r(e){var t,r={none:0,error:1,warn:2,info:3,verbose:4};return void 0===e?e="string"==typeof(t=null!=(t=n.g.process.env.LOG)?t:"")&&t.length?/^\d+$/.test(t)?+t:void 0!==r[t]?r[t]:r.verbose:"development"===(t=n.g.process.env.NODE_ENV)||"debug"===t?"verbose":t?"error":"none":!0===e?e=r.verbose:!1===e&&(e=r.none),e=("number"==typeof e?Math.min(r.verbose,Math.max(0,e)):r[e])||0,Object.assign(n.g,{LOG_LEVEL:e,DEBUG:0<e,DEBUG_E:r.error<=e,DEBUG_I:r.info<=e,DEBUG_W:r.warn<=e,DEBUG_V:r.verbose<=e}),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(),DEBUG&&(n.g.setDebugLogLevel=r);var o=n.g.DEBUG;t.default=o},84836:(e,t)=>{"use strict";function n(e,t,n){var r=e;if(t.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object");t.set(e,n)}function r(e,t){return(t=a(e,t,"get")).get?t.get.call(e):t.value}function o(e,t,n){if((t=a(e,t,"set")).set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function a(e,t,n){if(t.has(e))return t.get(e);throw new TypeError("attempted to "+n+" private field on non-instance")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=new WeakMap,l=new WeakMap,u=new WeakMap,s=new WeakMap,c=new WeakMap,f=new WeakMap,d=function(){function e(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=3<arguments.length&&void 0!==arguments[3]&&arguments[3],p=this,h=e;if(!(p instanceof h))throw new TypeError("Cannot call a class as a function");n(this,i,{writable:!0,value:void 0}),n(this,l,{writable:!0,value:void 0}),n(this,u,{writable:!0,value:void 0}),n(this,s,{writable:!0,value:void 0}),n(this,c,{writable:!0,value:void 0}),n(this,f,{writable:!0,value:void 0}),o(this,i,t),o(this,l,r),o(this,u,a),o(this,s,!1),o(this,c,d)}var t,a;return t=e,(a=[{key:"do",value:function(){for(var e=this,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];o(this,s,!1),this.cancel(),o(this,f,setTimeout((function(){r(e,c)?window.requestIdleCallback((function(){e.doIm.apply(e,n)})):e.doIm.apply(e,n)}),r(this,l)))}},{key:"cancel",value:function(){r(this,f)&&clearTimeout(r(this,f)),o(this,f,null)}},{key:"doIm",value:function(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var l=(l=r(this,i)).call.apply(l,[this].concat(n));o(this,f,null),null!=(e=r(this,u))&&e.call(this,l),o(this,s,!0)}},{key:"isDone",get:function(){return r(this,s)}},{key:"destroy",value:function(){r(this,f)&&clearTimeout(r(this,f))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=d},62004:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new Promise((function(t){setTimeout(t,e)}))}},84401:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.immediateChannel=t.delayChannel=t.EventChannel=t.EVENT_ANY=void 0;var r=n(37869);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=l(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function l(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var f=Symbol("*"),d=(t.EVENT_ANY=f,n=function(){function e(){var t=void 0===(t=(r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).delayTime)?500:t,n=void 0===(n=r.dynamicParams)||n,r=void 0!==(r=r.passEventToListener)&&r,o=this,a=e;if(!(o instanceof a))throw new TypeError("Cannot call a class as a function");c(this,"delayTime",void 0),c(this,"dynamicParams",void 0),c(this,"passEventToListener",void 0),c(this,"subscribers",new Map),c(this,"subscriptions",new Map),c(this,"timerID",null),c(this,"publications",new Map),this.delayTime=t,this.dynamicParams=n,this.passEventToListener=r}var t,n;return t=e,(n=[{key:"reset",value:function(){this.clearPublications(),this.clear(),this.subscribers.clear(),this.subscriptions.clear()}},{key:"clearPublications",value:function(){this.timerID&&((this.delayTime?clearTimeout:r.cancelAsap)(this.timerID),this.timerID=null),this.publications.clear()}},{key:"subscribe",value:function(e,t){var n=Symbol("symbol"===s(e)?e.description:e);return this.subscribers.set(n,{event:e,listener:t}),this.subscriptions.has(e)?this.subscriptions.get(e).add(n):this.subscriptions.set(e,new Set([n])),n}},{key:"subscribeSome",value:function(e,t){var n,r=Symbol(e.map((function(e){return"symbol"===s(e)?e.description:e})).join(" ")),o=(this.subscribers.set(r,{events:e,listener:t}),i(e));try{for(o.s();!(n=o.n()).done;){var a=n.value;this.subscriptions.has(a)?this.subscriptions.get(a).add(r):this.subscriptions.set(a,new Set([r]))}}catch(e){o.e(e)}finally{o.f()}return r}},{key:"subscribeAny",value:function(e){return this.subscribe(f,e)}},{key:"unsubscribe",value:function(e){if(Array.isArray(e))return e.map(this.unsubscribe.bind(this));var t=this.subscribers.get(e);if(!t)return!1;this.subscribers.delete(e);var n,r=i(t.events||[t.event]);try{for(r.s();!(n=r.n()).done;){var o=n.value,a=this.subscriptions.get(o);a&&a.has(e)&&(a.delete(e),a.size||this.subscriptions.delete(o))}}catch(e){r.e(e)}finally{r.f()}return!0}},{key:"clear",value:function(){if(this.subscribers.size){var e,t=i(this.subscribers.keys());try{for(t.s();!(e=t.n()).done;){var n=e.value;this.unsubscribe(n)}}catch(e){t.e(e)}finally{t.f()}}}},{key:"publish",value:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(Array.isArray(e)){var o,a=i(e);try{for(a.s();!(o=a.n()).done;){var l=o.value;f!==l&&this.publications.set(l,n)}}catch(e){a.e(e)}finally{a.f()}}else f!==e&&this.publications.set(e,n);this.tryNotifySubscribers()}},{key:"publishNow",value:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(Array.isArray(e)){var o,a=i(e);try{for(a.s();!(o=a.n()).done;){var l=o.value;f!==l&&this.emitEvent.apply(this,[l].concat(n))}}catch(e){a.e(e)}finally{a.f()}}else f!==e&&this.emitEvent.apply(this,[e].concat(n))}},{key:"tryNotifySubscribers",value:function(){if(this.delayTime)return this.timerID&&clearTimeout(this.timerID),void(this.timerID=setTimeout(this.notifySubscribers.bind(this),this.delayTime));this.timerID&&(0,r.cancelAsap)(this.timerID),this.timerID=(0,r.executeAsap)(this.notifySubscribers.bind(this)).id}},{key:"emitEvent",value:function(e){var t=this.subscriptions.has(f)?a(this.subscriptions.get(f)):[],n=this.subscriptions.get(e);if(n&&n.size&&t.push.apply(t,a(n)),t.length){for(var r=arguments.length,o=new Array(1<r?r-1:0),l=1;l<r;l++)o[l-1]=arguments[l];this.dynamicParams&&"function"==typeof o[0]&&(o[0]=o[0](e)),this.passEventToListener&&o.unshift(e);var u,s=i(new Set(t));try{for(s.s();!(u=s.n()).done;){var c=u.value,d=this.subscribers.get(c);d&&d.listener.apply(d,o)}}catch(e){s.e(e)}finally{s.f()}}}},{key:"notifySubscribers",value:function(){if(this.publications.size){var e,t=i(this.publications);try{for(t.s();!(e=t.n()).done;){var n=o(e.value,2),r=n[0],l=n[1],u=void 0===l?[]:l;this.emitEvent.apply(this,[r].concat(a(u)))}}catch(e){t.e(e)}finally{t.f()}this.timerID=null,this.publications.clear()}}},{key:"getSubscription",value:function(e){return this.subscriptions.get(e)}},{key:"getSubscriber",value:function(e){return this.subscribers.get(e)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),new(t.EventChannel=n));t.delayChannel=d,d=new n({delayTime:0}),t.immediateChannel=d},61997:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return r().toString(36)},t.fuidAsNumber=r,t.timeSequence=function(){return 1e3*(Date.now()-1595904404862)+n++%1e3};var n=0;function r(){return 1e8*(Date.now()-1595904404862)+1e3*Math.floor(1e5*Math.random())+n++%1e3}},38358:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=(t.default=void 0,n(13544).lazyModuleProxy)("highlight/highlight",{browser:"hljs",root:"assets",id:"highlight",styleFile:!0}),t.default=n},64393:(e,t)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return t.map((function(e){return Array.isArray(e)?i.apply(void 0,r(e)):null!==e&&"object"===n(e)?Object.keys(e).filter((function(t){return"function"==typeof(t=e[t])?!!t():!!t})).join(" "):e})).filter((function(e){return"string"==typeof e&&e.length})).join(" ")}function l(e){return"".concat(e/(1<arguments.length&&void 0!==arguments[1]?arguments[1]:20),"rem")}function u(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r={};if(1<(t=t||window.location.search).length){var a;if("?"===t[0]&&(t=t.substr(1)),t=new URLSearchParams(t),e)return null===(a=t.get(e))?"":a;var i,l=function(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=o(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw a}}}}(t.entries());try{for(l.s();!(i=l.n()).done;){var u=i.value,s=u[1];if(n)try{s=JSON.parse(s)}catch(e){}r[u[0]]=s}}catch(e){l.e(e)}finally{l.f()}}return e?r[e]:r}function s(e){return e.replace(/<(?:.|\n)*?>/gm,"")}function c(e){var t=document.createElement("DIV");return t.innerText=e,t.innerHTML||""}function f(e){return"string"==typeof e&&/^(https?):\/\/[-A-Za-z0-9\u4e00-\u9fa5+&@#/%?=~_|!:,.;]+[-A-Za-z0-9\u4e00-\u9fa5+&@#/%=~_|]$/gi.test(e)}function d(e){return(e||"").replace(/(((https?:\/\/)|(www\.))([-A-Za-z0-9\u4e00-\u9fa5+&@#/%=~_$|?.'()!,:;]+)([-A-Za-z0-9\u4e00-\u9fa5+&@#/%=~_$|']))/gi,(function(e,t){var n=t;return n.match("^https?://")||(n="http://".concat(n)),'<a href="'.concat(n,'">').concat(t,"</a>")}))}function p(e,t){void 0===t&&(t="".concat(encodeURIComponent(e).replace(/%/g,"_"),"__").concat(Math.floor(1e5*Math.random())));var n=document.getElementById(t);return n||((n=document.createElement("script")).id=t,document.body.appendChild(n)),n.src!==e&&(n.src=e),t}function h(e,t){void 0===t&&(t="".concat(encodeURIComponent(e).replace(/%/g,"_"),"__").concat(Math.floor(1e5*Math.random())));var n=document.getElementById(t);return n||((n=document.createElement("link")).rel="stylesheet",n.id=t,document.body.appendChild(n)),n.href!==e&&(n.href=e),t}function m(e){return"string"==typeof e?e:(e=Array.isArray(e)?e:Object.entries(e)).reduce((function(e,t){t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||o(e,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t);var n=t[0];return t=t[1],e.append(n,t),e}),new URLSearchParams).toString()}Object.defineProperty(t,"__esModule",{value:!0}),t.rem=t.linkify=t.isWebUrl=t.isLocalUrl=t.getSearchParam=t.escape=t.default=t.classes=t.appendStyleFile=t.appendScript=void 0,t.scrollIntoView=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!e)return!1;"boolean"==typeof t&&(t={behavior:t?"smooth":"auto"});var n=void 0===(n=(i=t).ifNeed)||n,r=void 0===(r=i.checkScrollList)||r,o=void 0===(o=i.behavior)?"auto":o,a=void 0===(a=i.block)?"nearest":a,i=void 0===(i=i.inline)?"nearest":i;return r&&(r=e.closest(".scroll-list"))?(r.dispatchEvent(new CustomEvent("scrolllist",{bubbles:!0,detail:["scrollToElement",e,{behavior:o,block:a,ifNeed:n}]})),!0):n&&"function"==typeof e.scrollIntoViewIfNeeded?(e.scrollIntoViewIfNeeded("center"===t.block),!0):!!e.scrollIntoView&&(e.scrollIntoView({behavior:o,block:a,inline:i}),!0)},t.stringifySearchParams=m,t.strip=void 0,t.classes=i,t.rem=l,t.getSearchParam=u,t.strip=s,t.escape=c,t.isWebUrl=f,t.isLocalUrl=function(e){return"string"==typeof e&&/^file:\/\/[-A-Za-z0-9\u4e00-\u9fa5+&@#/%?=~_|!:,.;]+[-A-Za-z0-9\u4e00-\u9fa5+&@#/%=~_|]$/gi.test(e)},t.linkify=d,t.appendScript=p,t.appendStyleFile=h,t.default={classes:i,rem:l,getSearchParam:u,stringifySearchParams:m,strip:s,escape:c,isWebUrl:f,linkify:d,appendScript:p,appendStyleFile:h}},20213:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=["onComplete"];function r(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function i(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){l(a,r,o,i,u,"next",e)}function u(e){l(a,r,o,i,u,"throw",e)}i(void 0)}))}}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var p=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");d(this,"tasks",new Map)}var t,r;return t=e,(r=[{key:"size",get:function(){return this.tasks.size}},{key:"cancelAll",value:function(){var e,t=function(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}(this.tasks.entries());try{for(t.s();!(e=t.n()).done;){var n,r=s(e.value,2),o=r[0],a=r[1];window.cancelIdleCallback(o),null!=(n=a.onComplete)&&n.call(a,new Error("Idle task canceled."))}}catch(e){t.e(e)}finally{t.f()}this.tasks.clear()}},{key:"cancel",value:function(e){var t=this.tasks.get(e);return!!t&&(this.tasks.delete(e),window.cancelIdleCallback(e),null!=(e=t.onComplete)&&e.call(t,new Error("Idle task canceled.")),!0)}},{key:"request",value:function(e){var t=this,n=(a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).params,r=a.onComplete,o=a.name,a=a.timeout,l={id:null,params:void 0===n?[]:n,onComplete:r,name:o,timeout:a},s=window.requestIdleCallback(u((function*(){t.tasks.delete(s);try{var n=yield e.apply(void 0,i(l.params));null!=r&&r(null,n)}catch(n){null!=r&&r(n),DEBUG&&(console.collapse("Idle Task ERROR","redBg",l.name||"#".concat(s),"redPale",String(n),"red"),console.error("error",n),console.log("task",l),console.log("idleTaskList",t),console.groupEnd())}})),a?{timeout:a}:{});return l.id=s,this.tasks.set(s,l),s}},{key:"requestAndWait",value:function(e){var t=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=r.onComplete,l=a(r,n);return new Promise((function(n,r){t.request(e,o(o({},l),{},{onComplete:function(e,t){null!=i&&i(e,t),e?r(e):n(t)}}))}))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=p},84035:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getImageInfo=function(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){var e=r.width,n=r.height;t({width:e,height:n})},r.onerror=function(t){console.error('Cannot load image from "'.concat(e,'".')),n(t)},r.src=e}))},t.getThumbnailSize=function(e,t){var n=e.width,r=(e=e.height,t.width);return t=t.height,r&&r<n&&(e=Math.floor(r*e/n),n=r),t&&t<e&&(n=Math.floor(t*n/e),e=t),{width:n,height:e}}},38076:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isJSONDataEqual=t.default=void 0;var r,o=(n=n(8541))&&n.__esModule?n:{default:n};function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function s(e,t){return l(l(l({},t),e),{},{type:t.type})}function c(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!c(e[n],t[n]))return!1;return!0}if("object"!==a(e)||"object"!==a(t))return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(var i=0,l=r;i<l.length;i++){var u=l[i];if(!c(e[u],t[u]))return!1}return!0}(n=r=r||{}).any="any",n.string="string",n.number="number",n.boolean="boolean",n.object="object";var f={string:{type:"string"},boolean:{type:"boolean",map:[!(n.array="array"),!0,null]},number:{type:"number"},array:{type:"array"},object:{type:"object"},any:{type:"any"}};t.isJSONDataEqual=c,n=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");u(this,"mappingScheme",void 0),u(this,"mappingSchemeCache",{}),u(this,"schemeNamesIndex",void 0),u(this,"schemeNamesIndexMap",void 0),this.mappingScheme=Object.freeze(l(l({},f),t))}var t,n;return t=e,(n=[{key:"version",get:function(){return this.mappingScheme.$version}},{key:"validation",get:function(){return!!this.mappingScheme.$validation}},{key:"omitDefaultProps",get:function(){return!!this.mappingScheme.$omitDefaultProps}},{key:"encodeName",get:function(){return!1!==this.mappingScheme.$encodeName}},{key:"formatDataScheme",value:function(e,t){if(e._schemeName=t,!(e.type in r)||t!==e.type){var n=this.getDataScheme(e.type);if(!n)throw(i=new o.default('JSONOptimizer: The scheme type "'.concat(t,'" referenced in "').concat(t,'" is not found.'))).scheme=e,i.optimizer=this,i;e=s(e,n)}if(e.extend){var i=this.getDataScheme(e.extend);if(!i)throw(n=new o.default('JSONOptimizer: The scheme type "'.concat(e.extend,'" extended in "').concat(t,'" is not found.'))).scheme=e,n.optimizer=this,n;e=function(e,t){t=t.props;var n=e.props;if(!t||!t.length||!n.length)return e;var r={},o=t.map((function(e,t){return r[e.name]=t,e}));return n.forEach((function(e){void 0!==r[e.name]?o[r[e.name]]=e:o.push(e)})),e.props=o,e}(e,i)}if(e.map){if(Array.isArray(e.map))for(var l=[],u=0;u<e.map.length;++u){var c=e.map[u];"object"===a(c)?l.push(JSON.stringify(c)):l.push(c)}else{var f=e.map;l={},Object.keys(f).forEach((function(e){var t=f[e];"object"===a(t)?l[e]=JSON.stringify(t):l[e]=t}))}e._mapForEncode=l}if(e.props&&e.props.length)for(var d=0;d<e.props.length;++d){if(!(p=e.props[d]).name)throw(h=new o.default('JSONOptimizer: One of scheme type "'.concat(e.extend,"\" 's properties name(index is ").concat(d,") is undefined."))).scheme=e,h.optimizer=this,h;var p=this.formatDataScheme(p,"".concat(t,".").concat(p.name)),h=this.getDataScheme(p.type);p=s(p,h),e.props[d]=p}return e}},{key:"getDataScheme",value:function(e,t){var n=this.mappingSchemeCache[e];return n||((n=!(n=this.mappingScheme[e])&&t?this.mappingScheme[t]:n)?(n=this.formatDataScheme(n,e),this.mappingSchemeCache[e]=n):null)}},{key:"getSchemeNameByIndex",value:function(e){return this.schemeNamesIndex||(this.schemeNamesIndex=Object.keys(this.mappingScheme).filter((function(e){return!e.startsWith("$")})),this.schemeNamesIndex.sort()),this.schemeNamesIndex[e]}},{key:"getSchemeIndexByName",value:function(e){if(!this.schemeNamesIndexMap){this.schemeNamesIndexMap={},this.getSchemeNameByIndex(0);for(var t=0;t<this.schemeNamesIndex.length;++t)this.schemeNamesIndexMap[this.schemeNamesIndex[t]]=t}return this.schemeNamesIndexMap[e]}},{key:"encodeWithScheme",value:function(e,t){var n=this,i=void 0===t?e.default:t;if(t instanceof Date)throw(l=new o.default('Date type is not supported in scheme "'.concat(e._schemeName,'".'))).scheme=e,l.optimizer=this,l.originalData=t,l.encodeData=i,l;if(e.map){var l=function(e,t){var n="object"===a(t)?JSON.stringify(t):t;if(Array.isArray(e)){for(var r=0;r<e.length;++r)if(e[r]===n)return r}else for(var o=e,i=Object.keys(o),l=0;l<i.length;++l){var u=i[l];if(o[u]===n)return u}}(e._mapForEncode,i);if(void 0!==l)return l}if(this.validation&&(l=function(e,t){if(void 0===t&&e.required)throw(n=new o.default('JSONOptimizer: Data value of scheme type "'.concat(e._schemeName,'" is required.'))).scheme=e,n;if(e.match){if(null===t)throw(n=new o.default('JSONOptimizer: Data value of scheme type "'.concat(e._schemeName,'" is not match regex rule, because original value is ').concat(t.toString(),"."))).scheme=e,n;var n="object"===a(t)?JSON.stringify(t):t.toString();if(!new RegExp(e.match).test(n))throw(t=new o.default('JSONOptimizer: Data value of scheme type "'.concat(e._schemeName,'" is not match regex rule.'))).scheme=e,t}return null}(e,i),l))return l;if(null!=i){if((l=r[e.type])===r.object){var u=e.props;if(!u||!u.length)throw(g=new o.default('JSONOptimizer: Properties scheme array is empty in data type scheme "'.concat(e._schemeName,'".'))).scheme=e,g.optimizer=this,g.originalData=t,g.encodeData=i,g;for(var s=[],f=-1,d=0;d<u.length;++d){var p=i[(h=u[d]).name],h=(this.omitDefaultProps&&!c(p,h.default)&&(f=d),this.encodeWithScheme(h,p));s.push(h)}return this.omitDefaultProps&&-1<f&&f<u.length-1&&s.splice(f+1,u.length-f-1),s}if(l===r.array&&i.length){if(!(g=e.arrType))throw(y=new o.default('JSONOptimizer: Array type name(arrType) cannot be empty in data type scheme "'.concat(e._schemeName,'" which is array type.'))).scheme=e,y.optimizer=this,y.originalData=t,y.encodeData=i,y;var m=this.getDataScheme(g);if(m)return i.map((function(e){return n.encodeWithScheme(m,e)}));throw(y=new o.default('JSONOptimizer: Array type scheme is not found in data type scheme "'.concat(e._schemeName,'" which is array type.'))).scheme=e,y.optimizer=this,y.originalData=t,y.encodeData=i,y}var y,g=a(i);if(l===r.string&&"string"!==g||l===r.number&&"number"!==g||l===r.boolean&&"boolean"!==g)throw(y=new o.default('JSONOptimizer: Value actual type "'.concat(g,'" is not match the type "').concat(l,'" of scheme "').concat(e._schemeName,'".'))).scheme=e,y.optimizer=this,y.originalData=t,y.encodeData=i,y;if(l===r.array&&"object"===g&&i instanceof Set)return Array.from(i)}return i}},{key:"decodeWithScheme",value:function(e,t){var n=this,i=t;if(null!=i){var l=a(i);if(e.map&&("string"===l||"number"===l)){u=e.map,s=i,Array.isArray(u);var u=u[s];if(void 0!==u)return u}var s=r[e.type];if(s===r.object){if(!Array.isArray(i))throw(u=new o.default('JSONOptimizer: Encoded data is not an array with scheme "'.concat(e._schemeName,'".'))).scheme=e,u.optimizer=this,u.encodedData=t,u;var c=e.props;if(!c||!c.length)throw(m=new o.default('JSONOptimizer: Properties scheme array is empty in data type scheme "'.concat(e._schemeName,'".'))).scheme=e,m.optimizer=this,m.encodedData=t,m;for(var f={},d=0;d<c.length;++d){var p,h=c[d];void 0!==(p=d>=i.length?h.default:this.decodeWithScheme(h,i[d]))&&(f[h.name]=p)}return f}if(s===r.array){if(!Array.isArray(i))throw(m=new o.default('JSONOptimizer: Encoded data is not an array with scheme "'.concat(e._schemeName,'".'))).scheme=e,m.optimizer=this,m.encodedData=t,m;var m=e.arrType;if(!m)throw(y=new o.default('JSONOptimizer: Array type name(arrType) cannot be empty in data type scheme "'.concat(e._schemeName,'" which is array type.'))).scheme=e,y.optimizer=this,y.encodedData=t,y;var y,g=this.getDataScheme(m);if(g)return i.map((function(e){return n.decodeWithScheme(g,e)}));throw(y=new o.default('JSONOptimizer: Array type scheme is not found in data type scheme "'.concat(e._schemeName,'" which is array type.'))).scheme=e,y.optimizer=this,y.encodedData=t,y}if(s===r.boolean&&"boolean"!==l)return DEBUG&&console.warn('JSONOptimizer: Encoded data type "'.concat(l,'" not match the scheme "').concat(e._schemeName,'" type "').concat(s,'".')),"number"===l?0<i:"string"===l?"1"===(m=i.toLowerCase())||"true"===m:e.default;if(s===r.number&&"number"!==l)return DEBUG&&console.warn('JSONOptimizer: Encoded data type "'.concat(l,'" not match the scheme "').concat(e._schemeName,'" type "').concat(s,'".')),"string"===l?i.length?Number.parseFloat(i):0:e.default;if(s===r.string&&"string"!==l)return DEBUG&&console.warn('JSONOptimizer: Encoded data type "'.concat(l,'" not match the scheme "').concat(e._schemeName,'" type "').concat(s,'".')),"".concat(i)}return i}},{key:"encode",value:function(e,t,n){if(!(n=this.getDataScheme(e,n)))throw(r=new o.default('JSONOptimizer: Scheme mapping object of data type "'.concat(e,'" is not found.'))).scheme=n,r.optimizer=this,r.originalData=t,r;var r=this.encodeWithScheme(n,t);return this.encodeName?[e,r]:r}},{key:"decode",value:function(e,t,n){if(this.encodeName){if(!Array.isArray(e))throw(r=new o.default('JSONOptimizer: Encoded data must be a array when use "encodeName" option.')).optimizer=this,r.encodedData=e,r;var r=e[0];t="number"==typeof r?this.getSchemeNameByIndex(r):r,e=e[1]}if(null==t)throw(r=new o.default("JSONOptimizer: Scheme name is null on decode data.")).optimizer=this,r.encodedData=e,r;if(r=this.getDataScheme(t,n))return this.decodeWithScheme(r,e);throw(n=new o.default('JSONOptimizer: Scheme mapping object of data type "'.concat(t,'" is no found.'))).optimizer=this,n.encodedData=e,n}},{key:"encodeToJSON",value:function(e,t,n){return JSON.stringify(this.encode(e,t,n))}},{key:"decodeFromJSON",value:function(e,t,n){return this.decode(JSON.parse(e),t,n)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),t.default=n},19791:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(r=n(2514))&&r.__esModule?r:{default:r},o=n(16986);function a(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){if((t=d(e,t,"set")).set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function d(e,t,n){if(t.has(e))return t.get(e);throw new TypeError("attempted to "+n+" private field on non-instance")}var p=new WeakMap;n=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(n=t?(n=c(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,n&&("object"===l(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return s(r)}}(r);function r(e,t){if(this instanceof r)return function(e,t,n){var r=e;if(t.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object");t.set(e,{writable:!0,value:void 0})}(s(t=n.call(this,t)),p),f(s(t),p,e),t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"change",value:function(e,t){this.setData(t),f(this,p,e)}},{key:"name",get:function(){return(e=d(this,e=p,"get")).get?e.get.call(this):e.value;var e}},{key:"error",value:function(e){if(!e)return DEBUG&&(console.collapse("LANG.error","redBg","<Unknown Error>","redPale"),console.error(e),console.groupEnd()),"<Unknown Error>";if("string"==typeof e)return this.string(e.startsWith("error.")?e:"error.".concat(e),e);var t="";return e.code?t+=this.string("error.".concat(e.code),"".concat(e.message||"","[").concat(e.code,"]")):e.message&&(t=this.string("error.".concat(e.message),e.message)),t&&(e=e.formats||e.extras)?"object"!==l(e)||Array.isArray(e)?(Array.isArray(e)||(e=[e]),o.formatString.apply(void 0,[t].concat(a(e)))):(0,o.formatString)(t,e):t}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(r.default),t.default=n},13544:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadLazyModule=t.lazyModuleProxy=void 0;var r=n(64393);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){var t,o,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},s=void 0===(s=(y=a||{}).root)?"node_modules":s,c=void 0!==(f=y.browser)&&f,f=void 0===(f=y.browserPath)?"":f,d=void 0!==(d=y.styleFile)&&d,p=void 0===(p=y.id)?"":p,h=y.onLoad,m=void 0===h?null:h,y=void 0===(h=y.beforeLoad)?null:h;if((h=u[e])===l)return t={},o=l,g='The module of "'.concat(e,'" is loading.'),o in t?Object.defineProperty(t,o,{value:g,enumerable:!0,configurable:!0,writable:!0}):t[o]=g,t;if(void 0!==h)return h;if(d&&(o="string"==typeof d?d:"",o=s?"".concat(s,"/").concat(o||"".concat(e,".css")):o||"".concat(e,".css"),(0,r.appendStyleFile)(o,"".concat(p||e.replace(/[/.]/g,"_"),"-style")),DEBUG_I&&(console.collapse("LazyModule","blueBg",e,"bluePale","<style> appended",""),console.log("styleFilePath",o),console.log("options",a),console.groupEnd())),y&&y(),i){var g=s&&"node_modules"!==s?"".concat(process.env.APP_ROOT,"/").concat(s,"/").concat(e):e;try{var b=require(g);return u[e]=b,m&&m(b),DEBUG&&(console.collapse("LazyModule","blueBg",e,"bluePale","require","red"),console.trace("module",b),console.log("fullPath",g),console.log("options",a),console.groupEnd()),b}catch(t){DEBUG&&(console.collapse("LazyModule","blueBg",e,"redPale","load failed with ".concat(t),"red"),console.error("error",t),console.log("fullPath",g),console.log("options",a),console.groupEnd())}}else if(c){var v,w,O,S=s?"".concat(s,"/").concat(f||"".concat(e,".js")):f||"".concat(e,".js");if((0,r.appendScript)(S,"lazyLoad_".concat(p||e.replace(/[/.]/g,"_"))),"string"==typeof c)return v=n.g[c],u[e]=void 0===v?l:v,m&&(void 0===v?(w=0,O=setInterval((function(){w++,void 0!==(v=n.g[c])?(u[e]=v,m(v),DEBUG&&(console.collapse("LazyModule","blueBg",e,"bluePale","loaded",""),console.trace("module",v),console.log("fullPath",S),console.log("options",a),console.log("lazyModuleCheckTimes",w),console.groupEnd()),clearInterval(O)):100<w&&clearInterval(O)}),100)):m(v)),DEBUG_I&&(console.collapse("LazyModule","blueBg",e,"bluePale","<script> appended","red"),console.trace("module",v),console.log("fullPath",S),console.log("options",a),console.groupEnd()),v;DEBUG_I&&(console.collapse("LazyModule","blueBg",e,"bluePale","<script> appended","red"),console.log("fullPath",S),console.log("options",a),console.groupEnd())}}var i=void 0!==n.g.require,l=Symbol("lazy_module_is_loading"),u={};t.loadLazyModule=a,t.lazyModuleProxy=function(e,t){!i&&t&&t.browser&&a(e,t);var r=new Proxy({},{get:function(i,u){if("$$typeof"!==u){if("__esModule"===u||"default"===u)return DEBUG_V&&(console.collapse("LazyModuleProxy","blueBg",e,"bluePale",u,""),console.trace("options",t),console.groupEnd()),r;var s=a(e,t);return s&&s[l]&&t&&t.browser&&(s=n.g[t.browser]),"$"===u?s:"object"===o(s)&&null!==s?s[u]:void 0}}});return DEBUG_V&&(console.collapse("LazyModuleProxy","blueBg",e,"bluePale","Imported!",""),console.log("options",t),console.groupEnd()),r}},7491:(e,t)=>{"use strict";function n(e,t){var n,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return o&&(e=o),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==o.return||o.return()}finally{if(l)throw a}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.generateContinuousList=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(e=Math.floor(e),(t=Math.floor(t))<e&&n||e<t&&!n)throw new Error("ILLEGAL_ARGUMENTS: from ".concat(e," to ").concat(t,", increment ").concat(n));if(e===t)return[e];var r=n?1:-1,o=Array(n?t-e:e-t).fill(0).reduce((function(e,t,n){return e.concat(e[n]+r)}),[e]);return DEBUG&&(console.collapse("List helper","grayBg","generate list","grayPale","list info: from ".concat(e,", to ").concat(t,", increment ").concat(n)),console.trace("list",o),console.groupEnd()),o},t.isDiffList=function(e,t){if(!e!=!t||e.length!==t.length)return!0;for(var n=e.length-1;0<=n;--n)if(e[n]!==t[n])return!0;return!1},t.mergeOrderedItem=function e(t,r){if(Array.isArray(r)){var o,a=n(r);try{for(a.s();!(o=a.n()).done;)e(t,o.value)}catch(e){a.e(e)}finally{a.f()}return t}var i=t.length;if(!i||t[i-1]<r)t.push(r);else if(t[0]>r)t.unshift(r);else for(var l=1;l<i;++l)if(r<t[l]){r!==t[l-1]&&t.splice(l,0,r);break}return t}},86273:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLocalID=function(){return r++},t.isLocalID=function(e){return n<=e};var n=Math.floor(Number.MAX_SAFE_INTEGER/2),r=Math.floor(n+Date.now()/2)+1},66834:(e,t,n)=>{"use strict";var r=(n=n(91230))&&n.__esModule?n:{default:n};function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}DEBUG&&"undefined"!=typeof window&&window.console&&function(){function e(e){var n=[""],r=[];return e.forEach((function(e,o){var a=Math.floor(o/2);o%2==1?(r[a]="%c".concat(r[a]),o="padding: 0 4px; border: 1px solid transparent;",Array.isArray(e)?o+=e.reduce((function(e,n){return e+(t[n]||n)}),""):"object"===i(e)?o+=Object.keys(e).reduce((function(t,n){return"".concat(t).concat(n,": ").concat(e[n])}),""):o+=t[e]||e,n.push(o)):r.push(e)})),n[0]=r.join(""),n}var t={rounded:"border-radius: 3px;",block:"display: block;",bold:"font-weight: bold;",h1:"font-size: 24px; font-weight: bold;",h2:"font-size: 20px; font-weight: bold;",h3:"font-size: 18px; font-weight: bold;",h4:"font-size: 16px; font-weight: bold;",h5:"font-size: 14px; font-weight: bold;",h6:"font-size: 12px; font-weight: bold;",muted:"color: #aaa;",pink:"color: #e91e63;",pinkLight:"color: #ff6090;",pinkDark:"color: #b0003a;",pinkPale:"background: rgba(233, 30, 99, 0.2); color: #e91e63; border-radius: 0 2px 2px 0",pinkBg:"background: #e91e63; color: #fff; border-radius: 2px 0 0 2px",pinkBgLight:"background: #ff6090; color: #fff;",pinkBgDark:"background: #b0003a; color: #fff;",pinkOutline:"color: #e91e63; border-color: #e91e63;",blue:"color: #2196f3;",blueLight:"color: #6ec6ff;",blueDark:"color: #0069c0;",bluePale:"background: rgba(33, 150, 243, 0.2); color: #2196f3; border-radius: 0 2px 2px 0",blueBg:"background: #2196f3; color: #fff; border-radius: 2px 0 0 2px",blueBgLight:"background: #6ec6ff; color: #fff;",blueBgDark:"background: #0069c0; color: #fff;",blueOutline:"color: #2196f3; border-color: #2196f3;",green:"color: #4caf50;",greenLight:"color: #80e27e;",greenDark:"color: #087f23;",greenPale:"background: rgba(76, 175, 80, 0.2); color: #4caf50; border-radius: 0 2px 2px 0",greenBg:"background: #4caf50; color: #fff; border-radius: 2px 0 0 2px",greenBgLight:"background: #80e27e; color: #fff;",greenBgDark:"background: #087f23; color: #fff;",greenOutline:"color: #4caf50; border-color: #4caf50;",red:"color: #f44336;",redLight:"color: #ff7961;",redDark:"color: #ba000d;",redPale:"background: rgba(244, 67, 54, 0.2); color: #f44336; border-radius: 0 2px 2px 0",redBg:"background: #f44336; color: #fff; border-radius: 2px 0 0 2px",redBgLight:"background: #ff7961; color: #fff;",redBgDark:"background: #ba000d; color: #fff;",redOutline:"color: #f44336; border-color: #f44336;",orange:"color: #ff9800;",orangeLight:"color: #ffc947;",orangeDark:"color: #c66900;",orangePale:"background: rgba(255, 152, 0, 0.2); color: #ff9800; border-radius: 0 2px 2px 0",orangeBg:"background: #ff9800; color: #fff; border-radius: 2px 0 0 2px",orangeBgLight:"background: #ffc947; color: #fff;",orangeBgDark:"background: #c66900; color: #fff;",orangeOutline:"color: #ff9800; border-color: #ff9800;",deepOrange:"color: #ff5722;",deepOrangeLight:"color: #ff8a50;",deepOrangeDark:"color: #c41c00;",deepOrangePale:"background: rgba(255, 87, 34, 0.2); color: #ff5722; border-radius: 0 2px 2px 0",deepOrangeBg:"background: #ff5722; color: #fff; border-radius: 2px 0 0 2px",deepOrangeBgLight:"background: #ff8a50; color: #fff;",deepOrangeBgDark:"background: #c41c00; color: #fff;",deepOrangeOutline:"color: #ff5722; border-color: #ff5722;",purple:"color: #9c27b0;",purpleLight:"color: #d05ce3;",purpleDark:"color: #6a0080;",purplePale:"background: rgba(156, 39, 176, 0.2); color: #9c27b0; border-radius: 0 2px 2px 0",purpleBg:"background: #9c27b0; color: #fff; border-radius: 2px 0 0 2px",purpleBgLight:"background: #d05ce3; color: #fff;",purpleBgDark:"background: #6a0080; color: #fff;",purpleOutline:"color: #9c27b0; border-color: #9c27b0;",teal:"color: #009688;",tealLight:"color: #52c7b8;",tealDark:"color: #00675b;",tealPale:"background: rgba(0, 150, 136, 0.2); color: #009688; border-radius: 0 2px 2px 0",tealBg:"background: #009688; color: #fff; border-radius: 2px 0 0 2px",tealBgLight:"background: #52c7b8; color: #fff;",tealBgDark:"background: #00675b; color: #fff;",tealOutline:"color: #009688; border-color: #009688;",indigo:"color: #3f51b5;",indigoLight:"color: #757de8;",indigoDark:"color: #002984;",indigoPale:"background: rgba(63, 81, 181, 0.2); color: #3f51b5; border-radius: 0 2px 2px 0",indigoBg:"background: #3f51b5; color: #fff; border-radius: 2px 0 0 2px",indigoBgLight:"background: #757de8; color: #fff;",indigoBgDark:"background: #002984; color: #fff;",indigoOutline:"color: #3f51b5; border-color: #3f51b5;",gray:"color: #666;",grayLight:"color: #999;",grayDark:"color: #333;",grayPale:"background: #6663; color: #666; border-radius: 0 2px 2px 0",grayBg:"background: #666; color: #fff; border-radius: 2px 0 0 2px",grayBgLight:"background: #999; color: #000;",grayBgDark:"background: #333; color: #fff;",grayOutline:"color: #666; border-color: #666;"},n=(console.color=function(){if(DEBUG){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];(t=console).log.apply(t,o(e(r)))}},console.collapse=function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];(t=console).groupCollapsed.apply(t,o(e(r)))},console.collapse(r.default.name,["h1","pinkBg","block","padding: 5px 10px; border-radius: 10px 0 0 10px"],r.default.version,["h1","pinkPale","block","padding: 5px 10px; border-radius: 0 10px 10px 0"]),{Company:r.default.company,License:r.default.license,Homepage:r.default.homepage,Issues:r.default.bugs.url,BuildTime:r.default.buildTime});process.versions&&(process.versions.electron?n.Electron=process.versions.electron:process.versions.nw&&(n.NWJS=process.versions.nw),n.NodeJS=process.versions.node,process.versions.chrome?n.chrome=process.versions.chrome:process.versions.chromium&&(n.chromium=process.versions.chromium),n.modules=process.versions.modules,n.V8=process.versions.v8),process.arch&&(n.arch=process.arch),process.env&&["DIRNAME","LANG","NODE_ENV","HOT","HOT_SERVER","PERF","REACT_PERF","PERF_FPS_INTERVAL","EXTENSIONS_PATH","SKIP_INSTALL_EXTENSIONS","BROWSER_URL_PARAMS","DEV_TOOLS"].forEach((function(e){void 0!==process.env[e]&&(n["env.".concat(e)]=process.env[e])})),process.argv&&(n.argv=JSON.stringify(process.argv)),console.table(n),console.groupEnd()}()},15219:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderer=t.default=void 0;var r=u(n(47084)),o=u(n(95931)),a=u(n(38358)),i=u(n(61862)),l=n(64393);function u(e){return e&&e.__esModule?e:{default:e}}n=new r.default.Renderer;var s=((t.renderer=n).code=function(e,t){var n=null,r=(t&&(r=t.indexOf(":"),o=t.lastIndexOf("."),-1<r?(n=t.substr(r+1),t=t.substr(0,r)):-1<o&&(t=(n=t).substr(o+1))),a.default.highlightAuto(e,t?[t]:void 0)),o=t||(r.language?"".concat(r.language,"?"):"");return'<pre class="code-block" '.concat(n?' data-name="'.concat(n,'"'):"").concat(o?' data-lang="'.concat(o,'"'):"",'><div class="hint--left btn-copy-code app-link" data-url="!copyCode/').concat(t||"",'" data-hint="').concat(i.default.string("common.copyCode"),'"><button class="btn iconbutton rounded primary-pale text-primary" type="button"><i class="icon mdi mdi-code-not-equal-variant icon-2x"></i></button></div><code data-lang="').concat(o,'" class="lang-').concat(r.language,'">').concat(r.value,"</code></pre>")},new Set(["class"])),c={a:new Set(["class","href","title"]),b:s,blockquote:s,code:!0,em:s,h1:s,h2:s,h3:s,h4:s,h5:s,h6:s,li:s,ol:s,ul:s,p:s,pre:s,address:s,s,i:s,sub:s,sup:s,strong:s,kbd:!0,del:!0,mark:!0,ins:!0,hr:!0,var:!0,table:s,tr:s,thead:s,th:new Set(["class","colspan","rowspan"]),td:new Set(["class","colspan","rowspan"]),tfoot:s,tbody:s,img:new Set(["class","src","alt","width","height"]),video:new Set(["class","controls","autoPlay","buffered","crossorigin","height","loop","muted","preload","poster","width","playsinline","src"]),source:new Set(["src","type"]),audio:new Set(["class","autoplay","buffered","controls","crossorigin","loop","muted","preload","src"]),track:new Set(["default","kind","label","src","srclang"]),div:s,span:s,dl:s,dt:s,dd:s,abbr:s,details:new Set(["class","open"]),summary:s,caption:s},f=new o.default.DefaultHandler;r.default.setOptions({renderer:n,breaks:!1,gfm:!0,sanitize:!0,sanitizer:function(e){if(e.startsWith("</"))return n=e.substring(2,e.length-1),c[n]?e:(0,l.strip)(e);var t=0<(n=e.indexOf(" ")),n=e.substring(1,t?n:e.length-1),r=c[n];if(!r)return(0,l.strip)(e);if(!(t&&r instanceof Set))return"<".concat(n,">");var a=["<".concat(n)],i=(new o.default.Parser(f).parseComplete("".concat(e,"</").concat(n,">")),(t=f.dom&&f.dom[0])&&t.attribs);return i&&Object.keys(i).forEach((function(e){var t;r.has(e)&&(t=i[e],"href"===e.toLowerCase()&&t&&t.trim().toLowerCase().startsWith("javascript:")||(t=t.replace(/"/g,"&quot;"),a.push("".concat(e,'="').concat(t,'"'))))})),a.push(">"),a.join(" ")},headerIds:!1,smartLists:!0,smartypants:!1,silent:!DEBUG}),s=r.default,t.default=s},83532:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n="sprite-file-excel",r="sprite-file-word",o="sprite-file-powerpoint",a="file-music",i="sprite-file-media",l="file-image",u="sprite-file-zip",s="language-html5",c={txt:"sprite-file-pages",md:"markdown",doc:r,docx:r,pages:r,xls:n,xlsx:n,csv:n,numbers:n,ppt:o,pptx:o,key:o,pdf:"sprite-file-pdf",zip:u,"7z":u,rar:u,iso:"disk",dmg:"disk",exe:"windows",app:"apple",bat:"console",sh:"console",avi:i,mp4:i,mkv:i,mov:i,wmv:i,ogg:a,mp3:a,wav:a,wma:a,aac:a,jpg:l,jpeg:l,png:l,apng:l,webp:l,gif:l,bmp:l,psd:l,tiff:l,svg:"file-xml",cpp:"language-cpp",c:"language-c",php:"language-php",js:"language-javascript",css:"language-css3",html:s,htm:s,ts:"language-typescript",swift:"language-swift",go:"language-go",cs:"language-csharp",py:"language-python"};t.default=function(e){return e.includes(".")&&(e=e.substr(e.lastIndexOf(".")+1),e=c[e.toLowerCase()])?e:"file-outline"}},8541:(e,t)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){var t=i();return function(){var r,a=u(e);if(r=t?(r=u(this).constructor,Reflect.construct(a,arguments,r)):a.apply(this,arguments),a=this,r&&("object"===n(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return o(a)}}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t,n){return(a=i()?Reflect.construct:function(e,t,n){var r=[null];return r.push.apply(r,t),t=new(Function.bind.apply(e,r)),n&&l(t,n.prototype),t}).apply(null,arguments)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e);var n=r(a);function a(){var e=this,t=a;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return s(o(e=n.call.apply(n,[this].concat(i))),"scheme",void 0),s(o(e),"originalData",void 0),s(o(e),"encodedData",void 0),s(o(e),"decodedData",void 0),s(o(e),"encodeData",void 0),s(o(e),"decodeData",void 0),s(o(e),"optimizer",void 0),e}return a}(function(e){var t="function"==typeof Map?new Map:void 0;return function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return a(e,arguments,u(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,e)}(e)}(Error));t.default=c},69851:(e,t,n)=>{"use strict";function r(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function o(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function a(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.initPerf=function(e,t,s,c){var f,d,p,h,m="undefined"!=typeof window;function y(t){return{type:t.entryType,detail:t.detail,duration:t.duration,name:t.name,startTime:t.startTime,process:e}}m&&window.performance?(h=window,s=h.performance,c=h.PerformanceObserver):(n.g.performance=s,n.g.PerformanceObserver=c),new c((function(e){var n,r=[],o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){var r;if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}(e.getEntries());try{for(o.s();!(n=o.n()).done;){var i=n.value;""!==i.name[0]&&""!==i.name[0]&&r.push(y(i))}}catch(e){o.e(e)}finally{o.f()}1<r.length?t.send(r):r.length&&t.send(r[0]),m&&r.length&&console.log("%cPERF.entries","color:#f50057;font-weight:bold",r)})).observe({entryTypes:["mark","frame","measure"]}),u(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({mark:function(e){return y(s.mark(e))},measure:function(e){return y(s.measure(e))}},t.cmdHandlers)),t.on(function(){n=function*(n){var r;if(m&&console.log("%cPERF.message","color:#f50057;font-weight:bold",n),!t.messageHandler||!0!==t.messageHandler(n))if("cmd"===n.type){var o=n.mid,u=n.cmd,s=n.args,c=(c=l[u])||function(){return new Error('Invalid command name "'.concat(u,'".'))};try{var f=yield c.apply(void 0,function(e){if(Array.isArray(e))return i(e)}(r=s)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||a(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());t.send({type:"cmd",mid:o,resolve:f,process:e})}catch(n){c={message:n.message,stack:n.stack,name:n.name},t.send({type:"cmd",mid:o,reject:c,process:e})}}else t.fallbackHandler&&t.fallbackHandler(n)};var n,o=function(){var e=this,t=arguments;return new Promise((function(o,a){var i=n.apply(e,t);function l(e){r(i,o,a,l,u,"next",e)}function u(e){r(i,o,a,l,u,"throw",e)}l(void 0)}))};return function(e){return o.apply(this,arguments)}}()),m&&(f=0,d=s.now(),p=process.env.PERF_FPS_INTERVAL?Number.parseInt(process.env.PERF_FPS_INTERVAL,10):500,h=function n(){f++;var r,o=s.now(),a=o-d;p<=a&&(a={type:"fps",fps:r=1e3*f/a,time:o,duration:a,process:e},t.memoryUsage&&(a.memory=t.memoryUsage()),t.cpuUsage&&(a.cpu=t.cpuUsage()),t.send(a),d=o,f=0,r<59&&console.log("%cPERF.fps","color:#f50057;font-weight:bold",r)),window.requestAnimationFrame(n)},window.requestAnimationFrame(h)),t.send({type:"ready",time:s.now(),now:Date.now(),process:e}),n.g.cmdHandlers=l},t.setPerfCommandHandlers=u,n.g.PERF=!!process.env.PERF,n.g.PERF_MARK_STASHES=n.g.PERF?new Set:null,n.g.PERF_MARK=n.g.PERF?function(e,t,r){var o;if(3<arguments.length&&void 0!==arguments[3]&&!arguments[3]||!t||n.g.PERF_MARK_STASHES.has(t))return o=performance.mark(e),n.g.PERF_MARK_STASHES.add(e),t&&n.g.PERF_MARK_STASHES.has(t)?(n.g.PERF_MARK_STASHES.delete(t),[o,performance.measure("".concat(r||"",":").concat(t,"-").concat(e),t,e)]):o;"undefined"!=typeof window&&console.log("%cPERF.mark fail","color:#f50057;font-weight:bold",'Measure start mark name "'.concat(t,'" not exists.'))}:function(){},n.g.PERF_MEASURE=n.g.PERF?function(e,t,n){return performance.measure(n||"".concat(e,"-").concat(t),e,t)}:function(){},n.g.PERF_HAS_MARK=n.g.PERF?function(e){return n.g.PERF_MARK_STASHES.has(e)}:function(){};var l=n.g.PERF?{}:null;function u(e){l&&Object.assign(l,e)}var s=n.g.PERF;t.default=s},52324:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(t.default=void 0,n(13544).lazyModuleProxy)("tiny-pinyin",{browser:"Pinyin",root:"assets",id:"tiny-pinyin"});t.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:" ";return"string"==typeof e&&e.length?(e=r.parse(e).map((function(e){return e.target})),"".concat(e.join("")).concat(t).concat(e.map((function(e){return e.length?e[0]:""})).join("")).toLowerCase()):""}},90625:(e,t)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isPromise=function(e){return"object"===n(e)&&"function"==typeof e.then},t.limitTimePromise=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:15e3,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=new Promise((function(e,r){setTimeout((function(){var e="function"==typeof n?n():null!=n?n:new Error("[TIMEOUT]");r(e)}),t)}));return Promise.race([e,r])}},48389:(e,t)=>{"use strict";function n(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.createProxyPropertiesMap=t.createProxyHandler=t.createEventProxy=void 0,t.createProxyPropertiesMap=function(e,t){var n,r={},o=function(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=i(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw o}}}}(e);try{for(o.s();!(n=o.n()).done;){var l=n.value;"string"==typeof l?r[l]={name:l,get:!0}:l.name&&(r[l.name]=l.deleted?null:l)}}catch(e){o.e(e)}finally{o.f()}return t?a(a({},t),r):r},t.createProxyHandler=function(e,t){var o={get:function(t,n){var r=e[n];if(r){if("string"==typeof r||!0===r.get)return t[n];if(r.get)return r.get(t);if(r.func)return r.func.bind(null,t)}return null==t._proxyData&&(t._proxyData={}),t._proxyData[n]},set:function(t,n,o){var a=e[n];if(a&&"object"===r(a)){if(!0===a.set)return t[n]=o,!0;if("function"==typeof a.set)return a.set(t,o),!0}else null!=t._proxyData||(t._proxyData={}),t._proxyData[n]=o;return!1},has:function(t,n){return!!(e[n]||t._proxyData&&t._proxyData[n])},deleteProperty:function(t,n){return!e[n]&&t._proxyData&&delete t._proxyData[n],!1},ownKeys:function(t){var r=Object.keys(e);return t._proxyData&&r.push.apply(r,n(Object.keys(t._proxyData))),r},getOwnPropertyDescriptor:function(t,n){var o=e[n];return o?{writable:"object"===r(o)&&!!o.set,configurable:!1,enumerable:!0}:t._proxyData?Object.getOwnPropertyDescriptor(t._proxyData,n):void 0},defineProperty:function(t,n,r){return!e[n]&&(null==t._proxyData&&(t._proxyData={}),Object.defineProperty(t,n,r),!0)},preventExtensions:function(){return!1},isExtensible:function(){return!0},getPrototypeOf:function(e){return null==e._proxyData&&(e._proxyData={}),Object.getPrototypeOf(e._proxyData)},setPrototypeOf:function(e,t){return null==e._proxyData&&(e._proxyData={}),Object.setPrototypeOf(e._proxyData,t)},apply:function(){throw new Error("Cannot call apply method on proxy object.")},construct:function(){throw new Error("Cannot call constructor on proxy object.")}};return t&&Object.assign(o,t),o},t.createEventProxy=function(e,t){var r=new Set(["clientX","clientY","altKey","bubbles","button","buttons","cancelable","ctrlKey","metaKey","movementX","movementY","pageX","pageY","screenX","screenY","timeStamp","type","stopPropagation","preventDefault"]);return new Proxy(e,a({get:function(e,t){if(r.has(t))return e._proxyData[t]},set:function(e,t,n){return!!r.has(t)&&(e._proxyData[t]=n,!0)},has:function(e,t){return!!(r.has(t)||e._proxyData&&e._proxyData[t])},deleteProperty:function(e,t){return!(r.has(t)||!e._proxyData||(delete e._proxyData[t],0))},ownKeys:function(e){var t=Array.from(r);return e._proxyData&&t.push.apply(t,n(Object.keys(e._proxyData))),t},getOwnPropertyDescriptor:function(e,t){if(r.has(t))return Object.getOwnPropertyDescriptor(e,t)},defineProperty:function(){return!1},preventExtensions:function(){return!1},isExtensible:function(){return!0},getPrototypeOf:function(e){return Object.getPrototypeOf(e)},setPrototypeOf:function(e,t){return Object.setPrototypeOf(e,t)},apply:function(){throw new Error("Cannot call apply method on proxy object.")},construct:function(){throw new Error("Cannot call constructor on proxy object.")}},t))}},71782:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchScore=void 0,t.matchScore=function(e,t,n){Array.isArray(n)||(n=[n]),Array.isArray(e)||(e=[e]);var r=0,o=0;return n.forEach((function(n){null!=n&&n.length&&e.forEach((function(e){e=function(e,t,n){var r=0;if(null==(n=n[e.name]))return r;"number"==typeof n&&(n="".concat(n));var o,a=t;if(e.prefix){if(!(t.startsWith(e.prefix)&&t.length>e.prefix.length))return r;var i=t.lastIndexOf("(");a=")"===t[t.length-1]&&-1<i?t.substring(i+1,t.length-1):t.substr(e.prefix.length)}return e.array&&Array.isArray(n)?(o=0,n.forEach((function(t){t=t.trim().toLowerCase(),e.equal&&t===a?(r+=e.equal,o+=1):e.include&&t.includes(a)&&(r+=e.include,o+=1)})),o<n.length&&(r/=2)):(i=n.trim().toLowerCase(),e.equal&&i===a?r+=e.equal:e.include&&i.includes(a)&&(r+=e.include)),r}(e,n,t),e&&(o+=1,r+=e)}))})),o!==n.length&&(r/=2),r}},99087:(e,t)=>{"use strict";function n(e,t){var n,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return o&&(e=o),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==o.return||o.return()}finally{if(l)throw a}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.isSameSet=function(e,t){if(!e!=!t||e.size!==t.size)return!1;var r,o=n(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(!t.has(a))return!1}}catch(e){o.e(e)}finally{o.f()}return!0},t.unionSets=function(e){for(var t=e instanceof Set?e:new Set(e),r=arguments.length,o=new Array(1<r?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];if(o.length){var i,l=n(o);try{for(l.s();!(i=l.n()).done;){var u,s=n(i.value);try{for(s.s();!(u=s.n()).done;){var c=u.value;t.add(c)}}catch(e){s.e(e)}finally{s.f()}}}catch(e){l.e(e)}finally{l.f()}}return t}},4829:(e,t,n)=>{"use strict";function r(e){return e&&(o?e.replace("Meta","Windows").replace("Command","Windows").replace("Option","Alt"):a?e.replace("Meta","Command").replace("Windows","Command").replace("Alt","Option"):e.replace("Command","Meta").replace("Windows","Meta").replace("Option","Alt"))}Object.defineProperty(t,"__esModule",{value:!0}),t.isOnlyModifyKeys=t.getKeyDecoration=t.formatKeyDecoration=void 0;var o=(n=((n=n(94128))&&n.__esModule?n:{default:n}).default.access("env")).isWindowsOS,a=n.isOSX,i={8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"Capslock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"Scroll",191:"/",224:"Meta"},l=new Set(["Alt",18,"Meta",224,"Ctrl",17,"Shift",16,"Option","Windows","Command"]);t.formatKeyDecoration=r,t.getKeyDecoration=function(e){var t=e.keyCode,n=[];return e.shiftKey&&n.push("Shift"),e.ctrlKey&&n.push("Ctrl"),e.altKey&&n.push("Alt"),e.metaKey&&n.push("Meta"),t&&!l.has(t)&&(i[t]?n.push(i[t]):n.push(String.fromCharCode(t)||e.key)),r(n.join("+"))},t.isOnlyModifyKeys=function(e){return!!e&&e.split("+").every((function(e){return l.has(e)}))}},60276:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skinStyle=t.longShadow=t.getCodeFromString=t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};if((t=a(t))&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(n(28064)),o=["outline","pale","dark","textTint","backTint","darkText","lightText","color","code","textColor","hueSpace","threshold","darkLight","paleLight","saturation","lightness","name","longShadow"];function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function i(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function l(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e){return e?e.split("").map((function(e){return e.charCodeAt(0)})).reduce((function(e,t){return t+e})):0}function f(e,t){for(var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:8,a=("number"!=typeof e&&(e=40),r.default.create(t).darken(o).css),i=[],l=1;l<=e;++l)i.push("".concat(a," ").concat(l,"px ").concat(l,"px"));return t=i.join(","),n?t:{textShadow:t}}function d(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=("object"===s(e)?t=e:t.code=e,e=t=u(u({},p),t)).outline,a=e.pale,l=e.dark,d=e.textTint,h=e.backTint,m=e.darkText,y=e.lightText,g=e.color,b=e.code,v=e.textColor,w=e.hueSpace,O=e.threshold,S=e.darkLight,_=e.paleLight,C=e.saturation,E=e.lightness,P=(e.name,e.longShadow);return e=i(e,o),g||("string"!=typeof(b="random"===b?Math.floor(360*Math.random()):b)||(0,r.isColor)(b)||(b=c(b)),g=r.default.create(b="number"==typeof b?{h:b*w%360,s:C,l:E}:b),"random"!==b&&(t.color=g)),w="",E="",b=v,n?(E=l?g.clone().setHsl({s:C,l:S}):a?g.clone().setHsl({s:C,l:_}):g,!b&&d&&(b=E)):b=h?(w=l?g.clone().setHsl({s:C,l:S}):a?g.clone().setHsl({s:C,l:_}):g,b||(w.isDark(O)?m:d?g.clone().setHsl({s:C,l:S}):y)):l?g.clone().setHsl({s:C,l:S}):a?g.clone().setHsl({s:C,l:_}):g,t=u({},e),w&&(t.backgroundColor=w.css||w),E&&(t.borderColor=E.css||E),b&&(t.color=b.css||b),P&&(t.textShadow=f(P,w,!0)),t}var p={outline:!1,pale:!1,dark:!1,code:"random",textTint:!0,backTint:!0,textColor:"",darkText:"#fff",lightText:"#333",hueSpace:43,threshold:.43,darkLight:.4,paleLight:.92,saturation:.7,lightness:.6,longShadow:!1};t.getCodeFromString=c,t.longShadow=f,t.skinStyle=d,t.default={style:d,text:function(e,t){return d(e,u({backTint:!1},t))},longShadow:f}},75413:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatusKeeper=void 0;var r=n(48389);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function i(e,t,n){if((t=u(e,t,"set")).set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function l(e,t){return(t=u(e,t,"get")).get?t.get.call(e):t.value}function u(e,t,n){if(t.has(e))return t.get(e);throw new TypeError("attempted to "+n+" private field on non-instance")}var s=new WeakMap;n=function(){function e(t,n){var r=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(a(this,"status",void 0),a(this,"mapper",void 0),function(e,t,n){var r=e;if(t.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object");t.set(e,{writable:!0,value:void 0})}(this,s),a(this,"onChange",void 0),this.mapper=n,this.status=null!=(t=n.getValue(t))?t:n.defaultValue,n.helpers)for(var o=0,i=Object.keys(n.helpers);o<i.length;o++){var l=i[o];void 0===this[l]&&function(){var e=n.helpers[l];Object.defineProperty(r,l,{get:function(){return e.call(r,r)}})}()}}var t,n;return t=e,(n=[{key:"proxy",get:function(){var e;return l(this,s)||(e=["name","value","is"],this.mapper.helpers&&e.push.apply(e,function(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object.keys(this.mapper.helpers))),i(this,s,new Proxy(this,(0,r.createProxyHandler)((0,r.createProxyPropertiesMap)(e))))),l(this,s)}},{key:"name",get:function(){return this.mapper.getName(this.status)}},{key:"value",get:function(){return this.mapper.getValue(this.status)}},{key:"canChange",value:function(e,t){return e=this.mapper.getValue(e),t=void 0!==t?this.mapper.getValue(t):this.value,void 0!==e&&t!==e&&this.mapper.canChange(t,e)}},{key:"change",value:function(e){e=this.mapper.getValue(e);var t=this.value;return t===e||(this.canChange(e)?(this.status=e,"function"==typeof this.onChange&&this.onChange(e,t,this),!0):(DEBUG&&console.error('Status "'.concat(this.mapper.getName(t),"(").concat(t,')" cannot change to "').concat(this.mapper.getName(e),"(").concat(e,')" with conversion rules.'),this),!1))}},{key:"is",value:function(e){return void 0!==(e=this.mapper.getValue(e))&&e===this.status}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),t.StatusKeeper=n},60811:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(75413);function o(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function s(e,t,n){var r=e;if(t.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object");t.set(e,n)}function c(e,t){return t=function(e,t,n){if(t.has(e))return t.get(e);throw new TypeError("attempted to get private field on non-instance")}(e,t),t.get?t.get.call(e):t.value}var f=new WeakMap,d=new WeakMap,p=new WeakMap;n=function(){function e(t,n,r,o){var l=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(s(this,f,{writable:!0,value:new Map}),s(this,d,{writable:!0,value:new Map}),s(this,p,{writable:!0,value:{}}),u(this,"defaultStatus",void 0),Array.isArray(t)?t.forEach((function(e,t){l.defineStatus(e,t)})):Object.keys(t).forEach((function(e){l.defineStatus(e,t[e])})),void 0!==n&&(this.defaultStatus=this.getValue(n)),void 0===this.defaultStatus&&(this.defaultStatus=this.values[0]),Array.isArray(r)){var c,h=function(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=i(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw o}}}}(r);try{for(h.s();!(c=h.n()).done;){var m=c.value;"string"==typeof m&&(m=m.split(">")),Array.isArray(m)&&this.defineRule(m[0].trim(),m[1].trim())}}catch(n){h.e(n)}finally{h.f()}}else"object"===a(r)&&null!==r&&Object.keys(r).forEach((function(e){l.defineRule(e,r[e])}));"object"===a(o)&&null!==o&&this.defineHelpers(o)}var t,n;return t=e,(n=[{key:"helpers",get:function(){return c(this,p)}},{key:"defineHelpers",value:function(e){Object.assign(c(this,p),e)}},{key:"defineRule",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],o=("string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]),this.getValue(e));!r&&c(this,d).has(o)?t.forEach((function(e){c(n,d).get(o).add(n.getValue(e))})):c(this,d).set(o,new Set(t.map((function(e){return n.getValue(e)}))))}},{key:"defineStatus",value:function(e,t){if(void 0!==this[e])throw new Error("Cannot define status, the name '".concat(e,"' is duplicated."));if("number"!=typeof t)throw new Error("Cannot define status, the status value(".concat(t,") must be a number."));c(this,f).set(t,e),Object.defineProperty(this,e,{value:t,writable:!1})}},{key:"names",get:function(){return o(c(this,f).values())}},{key:"values",get:function(){return o(c(this,f).keys())}},{key:"defaultName",get:function(){return this.getName(this.defaultStatus)}},{key:"defaultValue",get:function(){return this.getValue(this.defaultStatus)}},{key:"getName",value:function(e,t){var n;return"number"==typeof e?null!=(n=c(this,f).get(e))?n:t:Object.prototype.hasOwnProperty.call(this,e)&&null!=e?e:t}},{key:"getValue",value:function(e,t){var n;return"string"==typeof e?null!=(n=this[e])?n:t:c(this,f).has(e)&&null!=e?e:t}},{key:"isSame",value:function(e,t){return this.getValue(e)===this.getValue(t)}},{key:"isLessOrSame",value:function(e,t){return this.getValue(e)<=this.getValue(t)}},{key:"isGreaterOrSame",value:function(e,t){return this.getValue(e)>=this.getValue(t)}},{key:"create",value:function(e){return void 0===e&&(e=this.defaultValue),new r.StatusKeeper(e,this)}},{key:"canChange",value:function(e,t){return!c(this,d).size||(null==(e=c(this,d).get(e))?void 0:e.has(t))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),u(t.default=n,"Keeper",r.StatusKeeper)},81595:(e,t)=>{"use strict";function n(e,t){s.setItem(e,"string"==typeof(e=t)?e:JSON.stringify(e))}function r(e,t){return null!=(e=function(e){try{return JSON.parse(e)}catch(t){return e}}(s.getItem(e)))?e:t}function o(e){return s.removeItem(e)}function a(){return s.clear()}function i(){return s.length}function l(e){for(var t=i(),n=0;n<t;++n){var o=s.key(n);null!=e&&e(r(o),o,n)}}function u(){var e={};return l((function(t,n){e[n]=t})),e}Object.defineProperty(t,"__esModule",{value:!0}),t.storeGetAll=t.storeForEach=t.setStoreItem=t.removeStoreItem=t.getStoreLength=t.getStoreItem=t.default=t.clearStore=void 0;var s=window.localStorage,c=(t.setStoreItem=n,t.getStoreItem=r,t.removeStoreItem=o,t.clearStore=a,t.getStoreLength=i,t.storeForEach=l,t.storeGetAll=u,Object.freeze({set:n,get:r,remove:o,clear:a,forEach:l,get length(){return i()},get all(){return u()}}));t.default=c},16986:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REGEXP_AT_USER=void 0,t.caculateScore=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:v;return m(e)||m(t)?0:e===t?n.matchAll:0===(t=t.indexOf(e))?n.matchPrefix:0<t?n.include:0},t.default=t.convertTimes=t.convertBytes=t.checkPhoneFormat=t.checkMobileFormat=t.checkEmailFormat=void 0,t.escapeRegExp=b,t.formatBytes=void 0,t.formatString=l,t.restoreMessageContainAt=t.limitStringLength=t.isWideCharacter=t.isValidIP=t.isNotEmptyString=t.isEmptyString=t.ifEmptyStringThen=t.getAsciiWidth=t.getAppearanceLength=void 0;var r,o,a=(n=n(34021))&&n.__esModule?n:{default:n};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e){if(0==(arguments.length<=1?0:arguments.length-1))return e;var t;if(1==(arguments.length<=1?0:arguments.length-1)&&"object"===i(arguments.length<=1?void 0:arguments[1]))return t=arguments.length<=1?void 0:arguments[1],Object.keys(t).forEach((function(n){var r=t[n];void 0!==r&&("string"==typeof r&&(r=r.replaceAll("$","$$$$")),e=e.replaceAll("{".concat(n,"}"),"".concat(r)))})),e;for(var n=0;n<(arguments.length<=1?0:arguments.length-1);n++){var r=n+1<1||arguments.length<=n+1?void 0:arguments[n+1];void 0===r&&null===r||("string"==typeof r&&(r=r.replaceAll("$","$$$$")),e=e.replaceAll("{".concat(n,"}"),"".concat(r)))}return e}function u(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";return"number"!=typeof e&&(e=Number.parseInt(e,10)),Number.isNaN(e)?"?KB":(n=n||(e<o.KB?"B":e<o.MB?"KB":e<o.GB?"MB":e<o.TB?"GB":"TB"),(e/o[n]).toFixed(t)+n)}function s(e){return null!=e&&""!==e}function c(e,t){return m(e)?t:e}function f(e,t,n){return e.length>t&&(e=e.substring(0,t),n&&(e="".concat(e).concat(n))),e}function d(e){return a.default.length(e)}function p(e){return 1<a.default.characterLength(e)}function h(e){if(1===e.length)return y[e]||0;var t=!1;return e=e.split("").reduce((function(e,n){return(n=y[n])||(t=!0),n?e+n:e}),0),t?0:e}(n=r=r||{})[n.MS=1]="MS",n[n.S=1e3]="S",n[n.MIN=6e4]="MIN",n[n.H=36e5]="H",n[n.D=864e5]="D",(n=o=o||{})[n.B=1]="B",n[n.KB=1024]="KB",n[n.MB=1048576]="MB",n[n.GB=1073741824]="GB",n[n.TB=1099511627776]="TB",t.formatBytes=u,t.convertBytes=function(e){var t=(e=e.toUpperCase()).match(/^[0-9]*(B|KB|MB|GB|TB)$/);return t?(t=t[1],e=e.replace(t,""),Number.parseInt(e,10)*o[t]):0},t.convertTimes=function(e){var t=(e=e.toUpperCase()).match(/^[0-9]*(MS|S|MIN|H|D)$/);return t?(t=t[1],e=e.replace(t,""),Number.parseInt(e,10)*r[t]):0};var m=function(e){return null==e||""===e},y=(t.isEmptyString=m,t.isNotEmptyString=s,t.ifEmptyStringThen=c,t.limitStringLength=f,t.getAppearanceLength=d,t.isWideCharacter=p,{"!":18,'"':30,"#":30,$:30,"%":36,"&":36,"'":18,"(":24,")":24,"*":30,"+":30,",":18,"-":30,".":18,"/":30,0:30,1:30,2:30,3:30,4:30,5:30,6:30,7:30,8:30,9:30,":":18,";":18,"<":30,"=":30,">":30,"?":30,"@":36,A:36,B:36,C:36,D:36,E:36,F:36,G:36,H:36,I:24,J:30,K:36,L:36,M:42,N:36,O:36,P:36,Q:36,R:36,S:36,T:36,U:42,V:36,W:43,X:36,Y:36,Z:30,"[":24,"\\":30,"]":24,"^":30,_:30,"`":18,a:30,b:36,c:30,d:36,e:30,f:24,g:36,h:36,i:18,j:24,k:36,l:18,m:42,n:36,o:30,p:36,q:36,r:30,s:30,t:24,u:36,v:36,w:42,x:30,y:36,z:30,"{":24,"|":18,"}":24,"~":30}),g=(t.getAsciiWidth=h,t.checkMobileFormat=function(e){return/^1\d{10}$/.test(e)},t.checkEmailFormat=function(e){return/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(e)},t.checkPhoneFormat=function(e){return/^([0-9]{3,4}-?)?[0-9]{7,8}$/.test(e)},"@(#?[_.\\w\\d\\u4e00-\\u9fa5]{1,20})");function b(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}t.REGEXP_AT_USER=g,t.restoreMessageContainAt=function(e){return"string"==typeof e&&e.replace?e.replace(new RegExp("\\[(?<atuser>".concat(g,")\\]\\(\\@\\#\\d+\\)"),"g"),"$<atuser>"):e},t.isValidIP=function(e){return/\b(?:(?:2(?:[0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9])\.){3}(?:(?:2([0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9]))\b/gi.test(e)};var v={matchAll:100,matchPrefix:75,include:50,similar:10};t.default={format:l,isEmpty:m,isNotEmpty:s,formatBytes:u,ifEmptyThen:c,limitLength:f,getAppearanceLength:d,isWideCharacter:p,getAsciiWidth:h,escapeRegExp:b}},2514:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(16986);function o(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){return(t=u(e,t,"get")).get?t.get.call(e):t.value}function l(e,t,n){if((t=u(e,t,"set")).set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function u(e,t,n){if(t.has(e))return t.get(e);throw new TypeError("attempted to "+n+" private field on non-instance")}var s=new WeakMap;n=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");(function(e,t,n){var r=e;if(t.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object");t.set(e,{writable:!0,value:void 0})})(this,s),l(this,s,a({},t))}var t,n;return t=e,(n=[{key:"data",get:function(){return a({},i(this,s))}},{key:"setData",value:function(e){l(this,s,e)}},{key:"format",value:function(e){var t=this.string(e);if(void 0===t||!t.length)return"";for(var n=arguments.length,o=new Array(1<n?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];if(o&&o.length)try{return r.formatString.apply(void 0,[t].concat(o))}catch(n){throw new Error("Cannot format lang string with key '".concat(e,"', the lang string is '").concat(t,"'."))}return t}},{key:"string",value:function(e,t){return null!=(e=i(this,s)[e])?e:t}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),t.default=n},75345:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e3,r=null,o=0;return function(){for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];var u=Date.now();clearTimeout(r),n<u-o?(e.apply(t,i),o=Date.now()):r=setTimeout((function(){e.apply(t,i)}),u-o)}}},4547:(e,t)=>{"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.generateRequestURL=void 0,t.generateRequestURL=function(e,t,r){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},a=void 0===(a=(l=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{}).requestType)?"GET":a,i=void 0===(i=l.requestFix)?"-":i,l=void 0===(l=l.type)?"html":l;return t=encodeURIComponent(t),r=encodeURIComponent(r),"PATH_INFO"===a?(a=Object.values(o).map((function(e){return encodeURIComponent(e)})),"".concat(e).concat(t).concat(i).concat(r).concat(a.length?"".concat(i).concat(a.join(i)):"",".").concat(l)):"".concat(e,"index.php?m=").concat(t,"&f=").concat(r).concat(Object.entries(o).map((function(e){var t=(e=n(e,2))[0];return e=e[1],"&".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e))})).join(""))}},74543:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.compareVersions=void 0,t.formatVersion=o,t.simplifyVersion=void 0;var r=(n=n(74247))&&n.__esModule?n:{default:n};function o(e){return e.replace(/^([0-9]+)((?:\.[0-9]+)?)((?:\.[0-9]+)?)(?:[.\s-+]?)((?:[A-Za-z]+)?)((?:\.?[0-9]+)?)/gi,(function(e,t,n,r,o,a){return t=[t,n||".0",r||".0"],(o||a)&&t.push("-"),o&&t.push(o),a&&(o||t.push("build"),"."!==a[0]&&t.push("."),t.push(a)),t.join("")}))}function a(e){return e.replace(/^([0-9]+)((?:\.[0-9]+)?)((?:\.[0-9]+)?)(?:[.\s-+]?)((?:[A-Za-z]+)?)((?:\.?[0-9]+)?)/gi,(function(e,t,n,r,o,a){return t=[t,n||".0"],r&&".0"!==r&&"0"!==r&&t.push(r),(o||a)&&t.push("."),o&&t.push(o),a&&(o||t.push("build"),t.push("."===a[0]?a.substr(1):a)),t.join("")}))}t.simplifyVersion=a,n={compareVersions:t.compareVersions=function(e,t){return(0,r.default)(o(e),o(t))},formatVersion:o,simplifyVersion:a},t.default=n},92256:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unsubscribeWindowSizeTypeChange=t.unsubscribeWindowSizeChange=t.subscribeWindowSizeTypeChange=t.subscribeWindowSizeChange=void 0;var r=n(28361),o=n(84401),a=new r.WindowSizeInfo,i=Symbol("window-size-type-change"),l=Symbol("window-size-change");window.addEventListener("resize",(function(e){var t=new r.WindowSizeInfo;a.type!==t.type&&o.immediateChannel.publish(i,t,a,e),a.width===t.width&&a.height===t.height||o.immediateChannel.publish(l,t,a,e),a=t})),t.subscribeWindowSizeTypeChange=function(e){return o.immediateChannel.subscribe(i,e)},t.unsubscribeWindowSizeTypeChange=function(e){return o.immediateChannel.unsubscribe(e)},t.subscribeWindowSizeChange=function(e){return o.immediateChannel.subscribe(l,e)},t.unsubscribeWindowSizeChange=function(e){return o.immediateChannel.unsubscribe(e)}},28361:(e,t)=>{"use strict";function n(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}Object.defineProperty(t,"__esModule",{value:!0}),t.getWindowSizeInfo=t.WindowSizeInfo=void 0,(o=r=r||{})[o.small=1]="small",o[o.middle=2]="middle",o[o.normal=3]="normal",o[o.large=4]="large";var r,o,a=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");n(this,"width",void 0),n(this,"height",void 0),n(this,"type",void 0),this.width=window.innerWidth,this.height=window.innerHeight;var t=this.width;this.type=t<500?"small":t<740?"middle":t<1080?"normal":"large"}var t,o;return t=e,(o=[{key:"typeValue",get:function(){return r[this.type]}},{key:"isSmall",get:function(){return 1===this.typeValue}},{key:"isLargerThanSmall",get:function(){return 1<this.typeValue}},{key:"isMiddle",get:function(){return 2===this.typeValue}},{key:"isLargerThanMiddle",get:function(){return 2<this.typeValue}},{key:"isSmallerThanMiddle",get:function(){return this.typeValue<2}},{key:"isNormal",get:function(){return 3===this.typeValue}},{key:"isLargerThanNormal",get:function(){return 3<this.typeValue}},{key:"isSmallerThanNormal",get:function(){return this.typeValue<3}},{key:"isLarge",get:function(){return 4===this.typeValue}},{key:"isSmallerThanLarge",get:function(){return this.typeValue<4}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.WindowSizeInfo=a,t.getWindowSizeInfo=function(){return new a}},51943:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showAddCategoryDialog=t.default=void 0;var r=u(n(67294)),o=u(n(52133)),a=u(n(6022)),i=u(n(61862)),l=n(20491);function u(e){return e&&e.__esModule?e:{default:e}}n={show:t.showAddCategoryDialog=function(e){var t=null;return o.default.show({id:"app-add-category-dialog",modal:!0,closeButton:!1,title:i.default.string("chat.menu.addCategory.title"),style:{width:300},content:r.default.createElement(a.default,{ref:function(e){t=e}}),onSubmit:function(){var e=t.category;return e.name?!t.isNewNameExist()&&void(0,l.addCategory)(e.name):(o.default.alert(i.default.string("chats.menu.group.requiredNewName")),!1)}},e)}},t.default=n},6022:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=d(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=f(n(45697)),i=n(64393),l=n(45498),u=f(n(61862)),s=f(n(70389)),c=["className","onCategoryChange"];function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=y(e);if(n=t?(n=y(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return m(o)}}(a);function a(e){var t;if(this instanceof a)return g(m(t=n.call(this,e)),"handleNewNameChange",(function(e,n){t.setState({newName:e}),n.stopPropagation()})),t.allCategories=(0,l.getChatCategories)("group"),t.state={newName:""},t;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"category",get:function(){return{name:this.state.newName}}},{key:"isNewNameExist",value:function(){var e=this.state.newName;return e&&(e===u.default.string("chats.menu.group.default")||this.allCategories.find((function(t){return t.id===e})))}},{key:"render",value:function(){var e=(t=this.props).className,t=(t.onCategoryChange,function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(t,c));return o.default.createElement("div",p({className:(0,i.classes)("app-chats-add-category",e)},t),o.default.createElement("div",{className:"sub-control"},o.default.createElement(s.default,{onChange:this.handleNewNameChange,label:!1,placeholder:u.default.string("chats.menu.group.createTip"),helpText:this.isNewNameExist()?u.default.string("chats.menu.group.existsTip"):null})))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component),g(t.default=n,"propTypes",{className:a.default.string,onCategoryChange:a.default.func}),g(n,"defaultProps",{className:null,onCategoryChange:null})},56654:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showChatAddCategoryDialog=t.default=void 0;var r=u(n(67294)),o=u(n(52133)),a=u(n(36899)),i=u(n(61862)),l=n(20491);function u(e){return e&&e.__esModule?e:{default:e}}n={show:t.showChatAddCategoryDialog=function(e,t){var n=null;return o.default.show({id:"app-chat-add-category-dialog",modal:!0,closeButton:!1,title:i.default.string("chats.menu.group.add"),style:{width:400},content:r.default.createElement(a.default,{ref:function(e){n=e},chat:e}),onSubmit:function(){var t=n.category,r=e.category;if(t.name!==r)return"create"!==t.type||t.name?void(0,l.setChatCategory)(e,t.name):(o.default.alert(i.default.string("chats.menu.group.requiredNewName")),!1)}},t)}},t.default=n},36899:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=m(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=h(n(45697)),i=n(64393),l=n(45498),u=h(n(61862)),s=h(n(70389)),c=h(n(18922)),f=h(n(21205)),d=h(n(74379)),p=["chat","className","children","onCategoryChange"];function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=w(e);if(n=t?(n=w(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return v(o)}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e);var n=b(r);function r(e){var t;if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");return O(v(t=n.call(this,e)),"changeCategory",(function(){var e=t.props.onCategoryChange,n=(o=t.state).type,r=o.newName,o=o.selectName;e&&e("create"===n?r:o,n)})),O(v(t),"handleRadioGroupChange",(function(e,n){n.nativeEvent.isComposing||t.setState({type:e},(function(){var n="create"===e?t.inputGroup:t.selectBox;n&&n.focus(),t.changeCategory()}))})),O(v(t),"handleNewNameChange",(function(e,n){t.setState({newName:e},t.changeCategory),n.stopPropagation()})),O(v(t),"handleSelectNameChange",(function(e,n){t.setState({selectName:e},t.changeCategory),n.stopPropagation()})),e=e.chat,t.allCategories=(0,l.getChatCategories)(e.isOne2One?"contact":"group"),t.originCategory=e.category,t.state={type:t.allCategories&&t.allCategories.length?"modify":"create",selectName:t.originCategory,newName:""},t}return t=r,(e=[{key:"category",get:function(){var e=(n=this.state).type,t=n.newName,n=n.selectName;return{type:e,name:"create"===e?t:n}}},{key:"isNewNameExist",value:function(){var e=this.state.newName;return e&&(e===u.default.string("chats.menu.group.default")||this.allCategories.find((function(t){return t.id===e})))}},{key:"render",value:function(){var e,t=this,n=((a=this.props).chat,a.className),r=a.children,a=(a.onCategoryChange,function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(a,p)),l=(m=this.state).type,h=m.newName,m=m.selectName,g=null,b=((l="create"===l)&&(g=o.default.createElement("div",{className:"sub-control"},o.default.createElement(s.default,{ref:function(e){t.inputGroup=e},defaultValue:h,onChange:this.handleNewNameChange,label:!1,placeholder:u.default.string("chats.menu.group.createTip"),helpText:this.isNewNameExist()?u.default.string("chats.menu.group.existsTip"):null}))),h=null,this.allCategories&&this.allCategories.length);return!l&&b&&(e=this.allCategories.filter((function(e){return"_archived"!==e.id&&"_dismissed"!==e.id&&"_hidden"!==e.id})).map((function(e){var n,r=e.title;return e.id?e.id===t.originCategory&&(r+=" (".concat(u.default.string("chats.menu.group.current"),")")):(n=u.default.string("chats.menu.group.default"))!==r&&(r+=" (".concat(n,")")),{label:r,value:e.id}})),h=o.default.createElement("div",{className:"sub-control"},o.default.createElement(d.default,{ref:function(e){t.selectBox=e},value:m,onChange:this.handleSelectNameChange,options:e}))),m=u.default.string("chats.menu.group.addExist"),o.default.createElement("div",y({className:(0,i.classes)("app-chats-add-category",n)},a),r,o.default.createElement(f.default,{onChange:this.handleRadioGroupChange},o.default.createElement(c.default,{name:"chat-category",disabled:!b,label:b?m:o.default.createElement("span",null,m," (",o.default.createElement("small",null,u.default.string("chats.menu.group.noCategoryToAdd")),")"),checked:!l,value:"modify"},h),o.default.createElement(c.default,{name:"chat-category",label:u.default.string("chats.menu.group.create"),checked:l,value:"create"},g)))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component),O(t.default=n,"propTypes",{className:a.default.string,children:a.default.any,chat:a.default.any.isRequired,onCategoryChange:a.default.func}),O(n,"defaultProps",{className:null,children:null,onCategoryChange:null})},89904:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showChatArchiveDialog=function(e,t){r.default.show({closeButton:!1,content:o.default.string("chat.group.archive.alert"),onSubmit:function(){(0,a.toggleChatArchive)(e)}},t)};var r=i(n(52133)),o=i(n(61862)),a=n(20491);function i(e){return e&&e.__esModule?e:{default:e}}},67819:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showChatAvatarSettingsDialog=t.default=void 0;var r=d(n(67294)),o=d(n(52133)),a=d(n(61862)),i=d(n(31197)),l=d(n(24260)),u=n(18876),s=n(4547),c=n(15973),f=d(n(74160));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){m(a,r,o,i,l,"next",e)}function l(e){m(a,r,o,i,l,"throw",e)}i(void 0)}))}}function g(){return(g=y((function*(e){var t=new FormData,n=(t.append("imgFile",(0,u.dataURItoBlob)(e),"avatar.png"),e=(0,c.getCurrentUser)()).authKeyForServer,r=e.backendURL,o=e.account,a=e.requestType,i=(e=e.requestFix,(0,s.generateRequestURL)("","file","uploadChatAvatar",{},{requestFix:"_",requestType:a}));if(r=(0,s.generateRequestURL)(r,"im","authorize",{account:o,token:n,device:f.default.system.device||"desktop",url:i},{requestFix:e,requestType:a}),!(o=yield fetch(r,{method:"POST",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"},body:t})).ok)throw new Error("HTTP error! Status: ".concat(o.status));try{return(yield o.json()).id}catch(e){return console.error(e),null}}))).apply(this,arguments)}n={show:t.showChatAvatarSettingsDialog=function(e,t){var n,u={type:null,textAvatarData:{customText:"",bgColor:""},imageAvatarData:{imgUrl:""}};return o.default.show({title:a.default.format("chat.group.settings.groupAvatar.change"),style:{width:420,height:360},onSubmit:(n=y((function*(){var t;return"image"===u.type?!!(t=yield function(){return g.apply(this,arguments)}(u.imageAvatarData.imgUrl))&&(l.default.sendAndListen({method:"chatsetavatar",params:[e.gid,{type:u.type,data:{imgId:t}}]},!0),!0):"text"===u.type&&(l.default.sendAndListen({method:"chatsetavatar",params:[e.gid,{type:u.type,data:{bgColor:u.textAvatarData.bgColor,customText:u.textAvatarData.customText}}]},!0),!0)})),function(){return n.apply(this,arguments)}),content:r.default.createElement(i.default,{chat:e,getAvatarState:function(){return u},setAvatarState:function(e){"text"===e.type&&(u=h(h({},u),{},{type:e.type,textAvatarData:e.data})),"image"===e.type&&(u=h(h({},u),{},{type:e.type,imageAvatarData:e.data}))}})},t)}},t.default=n},27983:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ChatImageAvatarSettings=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=s(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=u(n(40328)),i=(n(28571),n(97217)),l=u(n(45508));function u(e){return e&&e.__esModule?e:{default:e}}function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.ChatImageAvatarSettings=function(e){var t=e.chat,n=e.getAvatarState,r=e.setAvatarState,u=(e=n(),(n=c((0,o.useState)(e.imageAvatarData.imgUrl),2))[0]),s=n[1];return(0,o.useEffect)((function(){r({type:"image",data:{imgUrl:u}})}),[u]),e=u?{type:"image",data:{imgUrl:u}}:t.avatar,n=(0,o.useCallback)((function(e){e.preventDefault(),e=e.target.files;var t=new FileReader;t.onload=function(){var e;(0,i.showImgCropperDialog)(null!=(e=t.result)?e:"",s)},e&&e.length&&t.readAsDataURL(e[0])}),[]),o.default.createElement("div",{className:"flex",style:{justifyContent:"space-between",width:200,alignItems:"center"}},o.default.createElement("div",{className:"preview-size avatar circle gray-pale"},o.default.createElement(l.default,{chat:{avatar:e},avatarSize:80})),o.default.createElement("label",{className:"preview-size avatar circle gray-pale pointer"},o.default.createElement(a.default,{name:"mdi-arrow-up-bold-box-outline",size:55,color:"white",style:{opacity:"70%"}}),o.default.createElement("input",{id:"file-upload-button",type:"file",accept:".jpg,.jpeg,.png",style:{display:"none"},onClick:function(e){e.target.value=null},onChange:n})))}},31197:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=w(n(67294)),a=b(n(45697)),i=n(64393),l=b(n(21205)),u=b(n(18922)),s=w(n(40328)),c=b(n(61862)),f=n(78717),d=n(27983),p=b(n(28784)),h=b(n(74933)),m=b(n(45508)),y=n(16986),g=b(n(9215));function b(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=v(t))&&t.has(e))return t.get(e);var n,o,a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]);return a.default=e,t&&t.set(e,a),a}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e){var t=e.chat,n=e.getAvatarState,r=(e=e.setAvatarState,(i=O((0,o.useState)((null==(i=t.avatar)?void 0:i.type)||"text"),2))[0]),a=i[1],i=(0,o.useCallback)((function(e){a(e)}),[]);return o.default.createElement("div",{className:"app-group-setting avatar-settings"},o.default.createElement(l.default,{className:"flex",onChange:i},o.default.createElement(u.default,{name:"textAvatar",label:c.default.string("chat.group.settings.groupAvatar.textAvatar"),value:"text",checked:"text"===r,className:"inline-block"}),o.default.createElement(u.default,{name:"imgAvatar",label:c.default.string("chat.group.settings.groupAvatar.uploadAvatar"),value:"image",checked:"image"===r,className:"inline-block"})),o.default.createElement("div",{style:{marginTop:25}},"text"===r?o.default.createElement(E,{chat:t,getAvatarState:n,setAvatarState:e}):o.default.createElement(d.ChatImageAvatarSettings,{chat:t,getAvatarState:n,setAvatarState:e})))}_.propTypes={chat:a.default.object.isRequired,getAvatarState:a.default.func.isRequired,setAvatarState:a.default.func.isRequired};var C=["#37C3A4","#66ADFF","#E05151","#E0B751","#A2E051","#51E067","#7C51E0","#E051DE","#E05177","#E09A51"];function E(e){var t=e.chat,n=e.getAvatarState,r=e.setAvatarState,a=((0,o.useEffect)((function(){return g.default.remove("app-emoji-popover"),function(){g.default.remove("app-emoji-popover")}}),[]),e=n(),n=t.public?C[0]:C[1],c.default.string("common.group"));e.textAvatarData.customText||e.textAvatarData.bgColor?(n=e.textAvatarData.bgColor,a=e.textAvatarData.customText):t.avatar&&"text"===t.avatar.type&&(n=t.avatar.data.bgColor,a=t.avatar.data.customText);var l=(e=O((0,o.useState)(a),2))[0],u=e[1],d=(e=O((0,o.useState)(n),2))[0],b=e[1],v=((0,o.useEffect)((function(){r({type:"text",data:{bgColor:d,customText:l}})}),[d,l]),e=C.map((function(e,t){return o.default.createElement("div",{style:{backgroundColor:e,color:"#fff"},className:(0,i.classes)("avatar-circle color-space relative"),key:"group-avatar-color-".concat(t),onClick:function(){v(e)}},e===d?o.default.createElement(s.default,{className:"abs-center",name:"mdi-check-bold"}):null)})),(0,o.useCallback)((function(e){b(e)}),[])),w=(0,o.useCallback)((function(e){e=e.getPlainText(),u(h.default.toShort(e))}),[]),S=(n=a||n||!t.avatar?{type:"text",data:{customText:l||c.default.string("common.group"),bgColor:d}}:t.avatar,(0,o.useRef)(null));return o.default.createElement("div",null,o.default.createElement("div",{className:"inline-block icon-custom-text flex"},o.default.createElement(m.default,{chat:{avatar:n},avatarSize:80}),o.default.createElement("div",{className:"space-left flex-middle"},o.default.createElement("p",null,c.default.string("chat.group.settings.groupAvatar.customText"),8<(0,y.getAppearanceLength)(l)?o.default.createElement("span",{className:"text-warning"},"(".concat(c.default.string("chat.group.settings.groupAvatar.customTextTooLong"),")")):null),o.default.createElement("div",null,o.default.createElement(p.default,{className:"app-group-avatar-drafteditor",ref:S,placeholder:c.default.string("chat.group.settings.groupAvatar.inputTextPlaceholder"),onChange:w,onPastedFiles:function(){return"handled"},onReturnKeyDown:function(){return"handled"},defaultState:h.default.shortnameToUnicode(a)}),o.default.createElement("button",{type:"button",className:"btn iconbutton rounded emoji-btn",onClick:function(e){(0,f.executeCommand)("showEmojiPopover",{x:e.pageX,y:e.pageY,target:e.target,placement:"bottom"},(function(e){S.current.appendEmoji(e)}))}},(0,s.renderIcon)("sprite-input-emoji"))),o.default.createElement("div",null,o.default.createElement("p",null,c.default.string("chat.group.settings.groupAvatar.chooseColor")),o.default.createElement("div",{className:"checkbox-list"},e),o.default.createElement("p",{className:"text-gray small"},c.default.string("chat.group.settings.groupAvatar.chooseColorTips"))))))}E.prototype={chat:a.default.object.isRequired,getAvatarState:a.default.func.isRequired,setAvatarState:a.default.func.isRequired},t.default=(0,o.memo)(_)},45508:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ChatAvatarCommon=O,t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=y(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=n(64393),i=m(n(2388)),l=m(n(40328)),u=m(n(88446)),s=m(n(28064)),c=m(n(67940)),f=m(n(86575)),d=m(n(60357)),p=["chat","className","grayOffline","avatarSize","iconSize","avatarClassName","showNoticeBadge","showStar","isPublic","children","showStatusDot"],h=["gid","children"];function m(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function O(e){var t,n,r=e.chat,f=e.className,h=(e.grayOffline,e.avatarSize),m=e.iconSize,y=e.avatarClassName,v=void 0===(v=e.showNoticeBadge)||v,O=void 0!==(O=e.showStar)&&O,S=void 0!==(S=e.isPublic)&&S,_=e.children,C=void 0!==(C=e.showStatusDot)&&C,E=(e=w(e,p),null),P=null,k=b((0,d.default)(),1)[0],j=r?(v&&0<r.unreadMessagesCount&&(E=o.default.createElement("span",{className:"label label-xs badge circle ".concat(r.isMuteOrHidden?"blue":"red")},99<r.unreadMessagesCount?"99+":r.unreadMessagesCount)),O&&r.star&&(P=o.default.createElement(l.default,{name:"star",className:"star"})),r.isOne2One?o.default.createElement(c.default,{className:y,memberID:r.theOtherMemberID,size:h,showStatusDot:C}):(v=["circle",y,t=r.isNotification?"red":r.isRobot?"accent":r.public?"green":"blue"],O={size:h,className:""},r.avatar?(n=(C=r.avatar).type,C=C.data,"image"===n?(O.image=o.default.createElement(u.default,{src:null==C?void 0:C.imgUrl},o.default.createElement(l.default,{name:"comment-multiple muted"})),O.icon=null,O.label=null):(O.label=(null==C?void 0:C.customText)||k.string("common.group",""),null!=C&&C.bgColor&&(O.skin={color:s.default.create(null==C?void 0:C.bgColor),textColor:"#fff"},v=v.filter((function(e){return e!==t}))))):r.isNotification?O.label=k.string("common.notificationIconLabel",""):r.isRobot?O.icon="mdi-bell-outline":S?(O.label=k.string("common.group",""),O.className=(0,a.classes)("circle",y,"green")):O.label=k.string("common.group",""),O.className=(0,a.classes)(v),o.default.createElement(i.default,O))):o.default.createElement(i.default,{size:h,iconSize:m,className:(0,a.classes)("circle info",y),icon:"comment-multiple"});return o.default.createElement("div",g({className:(0,a.classes)("app-chat-avatar",f)},e),j,_,E,P)}t.default=(0,o.memo)((function(e){var t=e.gid,n=e.children;return e=w(e,h),t=b((0,f.default)(t),1)[0],o.default.createElement(O,g({chat:t},e),n)}))},45802:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=w(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=v(n(45697)),i=v(n(73216)),l=n(64393),u=v(n(65286)),s=n(10088),c=n(57485),f=n(44374),d=v(n(19239)),p=v(n(20354)),h=n(32360),m=v(n(93206)),y=v(n(46005)),g=v(n(94128)),b=["gid","className"];function v(e){return e&&e.__esModule?e:{default:e}}function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=C(e);if(n=t?(n=C(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return _(o)}}(a);function a(e){var t;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");return E(_(t=n.call(this,e)),"_handleConferenceChange",(function(e){t.setState({conferenceOpen:!e.isClosed,hasVideoOrScreenShowed:(0,h.hasShownConferenceVideoOrScreen)(e.room)})})),e=e.gid,t.canUseChatConference=(0,c.canUseConference)(e,!0),e=t.canUseChatConference?(0,f.getChatConference)(e):null,t.state={conferenceOpen:e&&!e.isClosed,hasVideoOrScreenShowed:e&&e.isOpen&&(0,h.hasShownConferenceVideoOrScreen)(e.room)},t}return t=a,(e=[{key:"componentDidMount",value:function(){var e=this,t=this.props.gid;this.canUseChatConference&&(this.conferenceChangeHandler=(0,s.onConferenceChange)(t,(function(t){e.handleConferenceChangeTimer&&clearTimeout(e.handleConferenceChangeTimer),e._conference=t,e.handleConferenceChangeTimer=setTimeout((function(){e.unmounted||(e.handleConferenceChangeTimer=null,e._handleConferenceChange(e._conference))}),500)})))}},{key:"componentWillUnmount",value:function(){this.conferenceChangeHandler&&u.default.off(this.conferenceChangeHandler),this.unmounted=!0}},{key:"render",value:function(){var e=(n=this.props).gid,t=n.className,n=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(n,b),r=(a=this.state).conferenceOpen,a=a.hasVideoOrScreenShowed;return r?g.default.isType("electron")||!a?o.default.createElement("div",O({className:(0,l.classes)("app-chat-body column single",t)},n),o.default.createElement(p.default,{cgid:e,className:"flex-none"}),o.default.createElement(d.default,{gid:e,className:"flex-auto"})):o.default.createElement(i.default,O({split:"horizontal",primary:"first",minSize:90,defaultSize:300,maxSize:-1,className:(0,l.classes)("app-chat-body column single not-selectable",t)},n),o.default.createElement(p.default,{cgid:e,className:"flex flex-none fluid"}),o.default.createElement(d.default,{gid:e,className:"flex-auto dock"})):o.default.createElement("div",O({className:(0,l.classes)("app-chat-body column single",t)},n),o.default.createElement(m.default,{gid:e,className:"flex flex-none"}),o.default.createElement(y.default,{gid:e,className:"flex flex-none"}),o.default.createElement(d.default,{gid:e,className:"flex-auto"}))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component),E(t.default=n,"propTypes",{gid:a.default.string.isRequired,className:a.default.string,children:a.default.any}),E(n,"defaultProps",{className:null,children:null})},46005:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=f(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=c(n(45697)),i=c(n(40328)),l=c(n(1805)),u=c(n(62906)),s=c(n(60357));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e){e=e.gid;var t=(0,l.default)(e),n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),1!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,1);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,1):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,s.default)())[0];return t?o.default.createElement("div",{className:"app-chat-bulletin row single flex-none flex-middle text-accent accent-pale"},o.default.createElement(i.default,{name:"bullhorn",className:"flex-none"})," ",o.default.createElement(u.default,{type:"a",href:"xxc://showChatMessage//".concat(t.id),className:"small flex-auto",messageID:t.id,cgid:e,prefix:o.default.createElement("strong",{key:t.id},"[",n.string("chat.bulletin.type.".concat(t.type)),"] ")})):null}p.propTypes={gid:a.default.string.isRequired},t.default=(0,o.memo)(p)},99981:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=f(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=c(n(45697)),i=c(n(1805)),l=c(n(62906)),u=c(n(60357)),s=["gid"];function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e){var t=e.gid,n=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,s),(0,i.default)(t)),r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),1!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,1);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,1):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,u.default)())[0];return n?o.default.createElement("div",e,o.default.createElement("span",{className:"accent label rounded label-xs"},r.string("chat.message.bulletin.type.".concat(n.type)))," ",o.default.createElement(l.default,{messageID:n.id,cgid:t})):null}p.propTypes={gid:a.default.string.isRequired},t.default=(0,o.memo)(p)},39113:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showChatBulletinSettingDialog=t.default=void 0;var r=u(n(67294)),o=u(n(52133)),a=u(n(77108)),i=u(n(61862)),l=n(15973);function u(e){return e&&e.__esModule?e:{default:e}}n={show:t.showChatBulletinSettingDialog=function(e,t){var n=(0,l.getUserConfig)().getChatBulletinSetting(e.gid),u=null;return o.default.show({id:"app-chat-bulletin-setting-dialog",title:i.default.string("chat.bulletin.settings"),style:{width:280},actions:[{type:"submit"},{type:"cancel",label:i.default.string("chat.bulletin.cancel")}],content:r.default.createElement(a.default,{ref:function(e){u=e},chat:e,initialSetting:n||{}}),onSubmit:function(){var t=(r=u).unit,n=r.duration,r=r.type;(0,l.getUserConfig)().setChatBulletinSetting(e.gid,{unit:t,duration:n<1?1:n,type:r})},onCancel:function(){(0,l.getUserConfig)().setChatBulletinSetting(e.gid,null)}},t)}},t.default=n},77108:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=h(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=p(n(45697)),i=n(64393),l=p(n(70389)),u=p(n(18922)),s=p(n(21205)),c=p(n(74379)),f=p(n(61862)),d=["className","initialSetting"];function p(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=b(e);if(n=t?(n=b(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return g(o)}}(a);function a(e){var t;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");return v(g(t=n.call(this,e)),"handleRadioGroupChange",(function(e){t.type=e,t.setState({type:e})})),v(g(t),"handleInputControlChange",(function(e,n){t.duration=parseInt(e,10),n.target.value=t.duration})),v(g(t),"handleSelectBoxChange",(function(e){t.unit=e,t.setState({unit:e})})),e=e.initialSetting,t.type=e.type||"notice",t.duration=e.duration||"3",t.unit=e.unit||"day",t.state={type:e.type||"notice",unit:e.unit||"day"},t}return t=a,(e=[{key:"render",value:function(){var e=(t=this.props).className,t=(t.initialSetting,function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(t,d)),n=(r=this.state).type,r=r.unit,a=["minute","hour","day","week"].map((function(e){return{value:e,label:f.default.string("common.time.".concat(e))}}));return o.default.createElement("div",m({className:(0,i.classes)("app-chat-bulletin-settings",e)},t),o.default.createElement("div",{className:"control"},o.default.createElement("label",{htmlFor:"bulletin-type"},f.default.string("chat.bulletin.type")),o.default.createElement(s.default,{name:"bulletin-type",onChange:this.handleRadioGroupChange},["notice","bulletin"].map((function(e){return o.default.createElement(u.default,{name:"chat-bulletin",key:e,label:f.default.string("chat.bulletin.type.".concat(e)),checked:e===n,value:e,className:"inline-block radio-sm"})})))),o.default.createElement("div",{className:"app-chat-bulletin-settings-duration"},o.default.createElement(l.default,{defaultValue:this.duration,onChange:this.handleInputControlChange,label:f.default.string("chat.bulletin.expiryDate"),inputType:"number",inputProps:{min:1},className:"inline-block"}),o.default.createElement(c.default,{value:r,onChange:this.handleSelectBoxChange,className:"inline-block",options:a})))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component),v(t.default=n,"propTypes",{className:a.default.string,initialSetting:a.default.object}),v(n,"defaultProps",{className:null,initialSetting:{}})},99270:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.showChangeFontPopover=t.default=t.ChangeFontView=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=c(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=s(n(21898)),i=s(n(61862)),l=s(n(15973)),u=s(n(84836));function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var m=[{size:12,lineHeight:1.5,title:12,titleLineHeight:1.5},{size:13,lineHeight:1.5384615385,title:13,titleLineHeight:1.53846153846},{size:14,lineHeight:1.5,title:14,titleLineHeight:1.4285714286},{size:15,lineHeight:1.5,title:15,titleLineHeight:1.6},{size:18,lineHeight:1.5,title:15,titleLineHeight:1.6},{size:20,lineHeight:1.5,title:16,titleLineHeight:1.75},{size:24,lineHeight:1.5,title:16,titleLineHeight:1.75},{size:30,lineHeight:1.5,title:18,titleLineHeight:1.666666667},{size:36,lineHeight:1.5,title:18,titleLineHeight:1.666666667}],y=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=p(e);if(n=t?(n=p(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return d(o)}}(a);function a(e){var t;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");h(d(t=n.call(this,e)),"handleSliderChange",(function(e){e=parseInt(e.target.value,10),t.setState({select:e}),t.changeFontSizeTask.do(e)})),h(d(t),"handleResetBtnClick",(function(){t.setState({select:1}),t.changeFontSizeTask.do(1)})),t.state={select:1};var r=l.default.userConfig.chatFontSize;return r&&-1<(e=m.findIndex((function(e){return e.size===r.size})))&&(t.state.select=e),t.changeFontSizeTask=new u.default((function(){var e=t.state.select;l.default.userConfig.chatFontSize=m[e]}),200),t}return t=a,(e=[{key:"componentWillUnmount",value:function(){this.changeFontSizeTask.isDone||this.changeFontSizeTask.doIm()}},{key:"render",value:function(){var e=this.state.select,t=m[e];return o.default.createElement("div",{className:"box rounded"},o.default.createElement("div",{className:"flex space space-between"},o.default.createElement("strong",null,i.default.string("chat.sendbox.toolbar.setFontSize")),o.default.createElement("small",{className:"text-gray"},i.default.format("chat.fontSize.current.format",t.size),"px  ",1!==e?o.default.createElement("a",{className:"text-primary",onClick:this.handleResetBtnClick},i.default.string("chat.fontSize.resetDefault")):null)),o.default.createElement("input",{className:"fluid",type:"range",min:"0",value:e,max:m.length-1,step:"1",onChange:this.handleSliderChange}))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component);t.ChangeFontView=y,n={show:t.showChangeFontPopover=function(e,t){return a.default.show(e,o.default.createElement(y,null),{id:"app-chat-change-font-popover",width:250,height:80},t)}},t.default=n},32286:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showChatCommittersSettingDialog=t.default=void 0;var r=l(n(67294)),o=l(n(52133)),a=l(n(7290)),i=l(n(61862));function l(e){return e&&e.__esModule?e:{default:e}}n={show:t.showChatCommittersSettingDialog=function(e,t,n){var l=null;return o.default.show({title:i.default.format("chat.committers.setCommittersFormat",e.name),style:{width:"80%"},onSubmit:function(){l&&t&&t(e,l.getCommitters())},content:r.default.createElement(a.default,{ref:function(e){l=e},chat:e})},n)}},t.default=n},7290:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=g(n(67294)),a=m(n(45697)),i=n(64393),l=m(n(40328)),u=m(n(61862)),s=m(n(58851)),c=m(n(74379)),f=m(n(93055)),d=n(33417),p=g(n(74101)),h=["chat","className","children"];function m(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=y(t))&&t.has(e))return t.get(e);var n,o,a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]);return a.default=e,t&&t.set(e,a),a}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function v(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=y;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e);var n,a,m=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=C(e);if(n=t?(n=C(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return _(o)}}(y);function y(e){var t;if(!(this instanceof y))throw new TypeError("Cannot call a class as a function");E(_(t=m.call(this,e)),"handleSelectChange",(function(e){t.setState({type:e})}));var n=e.chat,r=(e=n.committersType,(0,d.getChatMembers)(n)),o=n.whitelist||new Set,a=!o.size,i=r.filter((function(e){return n.isAdmin(e)})),l=i.length;return a&&i.forEach((function(e){return o.add(e.id)})),t.state={type:e,whitelist:o,chatMembers:r,adminsCount:l},t}return t=y,(e=[{key:"componentDidMount",value:(n=function*(){var e,t;this.state.chatMembers.length||(t=this.props.chat,yield(0,p.fetchChatMembersFromRemote)(t.gid),e=v((t=p.default.getChat(t.gid)).members),this.setState({chatMembers:e,adminsCount:t.admins.size+1}))},a=function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(e){O(a,r,o,i,l,"next",e)}function l(e){O(a,r,o,i,l,"throw",e)}i(void 0)}))},function(){return a.apply(this,arguments)})},{key:"getCommitters",value:function(){var e=this.state.type;return"whitelist"===e?this.state.whitelist:"admins"===e?"$ADMINS":""}},{key:"handleCheckboxChange",value:function(e,t){var n=this.state.whitelist;t?n.add(e):n.delete(e),this.setState({whitelist:n}),this.forceUpdate()}},{key:"render",value:function(){var e=this,t=((r=this.props).chat,r.className),n=r.children,r=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(r,h),a=(m=this.state).whitelist,d=m.type,p=m.chatMembers,m=m.adminsCount;return m=[{value:s.default.COMMITTERS_TYPES.all,label:"".concat(u.default.string("chat.committers.type.all"),"(").concat(p.length,")")},{value:s.default.COMMITTERS_TYPES.admins,label:"".concat(u.default.string("chat.committers.type.admins"),"(").concat(m,")")},{value:s.default.COMMITTERS_TYPES.whitelist,label:"".concat(u.default.string("chat.committers.type.whitelist"),"(").concat(a.size,")")}],o.default.createElement("div",b({},r,{className:(0,i.classes)("app-chat-committers-setting",t)}),o.default.createElement("div",{className:"text-gray space-sm flex flex-middle"},o.default.createElement(l.default,{name:"information-outline"})," ",u.default.string("chat.committers.committersSettingTip")),o.default.createElement(c.default,{className:"space-sm",style:{width:"50%"},value:d,options:m,onChange:this.handleSelectChange}),"whitelist"===d&&o.default.createElement("div",{className:"checkbox-list rounded box x-outline"},p.map((function(t){return o.default.createElement(f.default,{key:t.id,className:"inline-block",onChange:e.handleCheckboxChange.bind(e,t.id),checked:a.has(t.id),label:t.displayName})}))),n)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),y}(o.PureComponent),E(t.default=n,"propTypes",{chat:a.default.instanceOf(s.default),className:a.default.string,children:a.default.any}),E(n,"defaultProps",{chat:null,className:null,children:null})},12549:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showConferenceCreateDialog=function(e){return u.apply(this,arguments)},t.showConferenceInviteDialog=function(e,t){return s.apply(this,arguments)};var r=(t=n(61862))&&t.__esModule?t:{default:t},o=n(78717),a=n(58890);function i(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function l(e){i(a,r,o,l,u,"next",e)}function u(e){i(a,r,o,l,u,"throw",e)}l(void 0)}))}}function u(){return(u=l((function*(e){var t=yield(0,a.showChatMembersSelectDialog)(e,{selections:1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],selectTip:r.default.string("conference.selectParticipants")});return null!=t&&t.length&&(yield(0,o.executeCommand)("createConference",e,t,!1,"audio")),t}))).apply(this,arguments)}function s(){return(s=l((function*(e,t){return null!=(t=yield(0,a.showChatMembersSelectDialog)(e,{excludes:t,selectTip:r.default.string("conference.selectParticipants")}))&&t.length&&(yield(0,o.executeCommand)("inviteConference",e,t)),t}))).apply(this,arguments)}},61298:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=w(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=v(n(45697)),i=n(64393),l=v(n(68634)),u=v(n(36443)),s=n(98649),c=v(n(65286)),f=n(10088),d=n(57485),p=n(44374),h=n(32360),m=v(n(61862)),y=v(n(84431)),g=v(n(74101)),b=["cgid","children","className"];function v(e){return e&&e.__esModule?e:{default:e}}function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=E(e);if(n=t?(n=E(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return C(o)}}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e);var n=_(r);function r(e){var t;if(this instanceof r)return P(C(t=n.call(this,e)),"handleItemRender",(function(e){return o.default.createElement(u.default,{key:e.account,conference:t._conference,member:e,onContextMenu:t.handleItemContextMenu,onClick:t.handleMemberItemClick})})),P(C(t),"handleItemContextMenu",(function(e){var n=y.default.getMember(e.currentTarget.attributes["data-id"].value),r=t.props.cgid;(0,s.showContextMenu)("chat.sidebar.member",{chat:g.default.getChat(r),event:e,member:n})})),P(C(t),"handleMemberItemClick",(function(e){var t=y.default.getMember(e.currentTarget.attributes["data-id"].value);(0,s.showContextMenu)("member.profile",{event:e,showMentionBtn:!0,member:t,options:{onItemClick:function(){return!1},position:{x:e.target.parentNode.parentNode.getBoundingClientRect().x-20,y:e.target.parentNode.getBoundingClientRect().y,direction:"bottom-left"}}})})),t._canUseChatConference=(0,d.canUseConference)(t.props.cgid,!0),t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"componentDidMount",value:function(){var e=this;this._canUseChatConference&&(this._conferenceChangeHandler=(0,f.onConferenceChange)(this.props.cgid,(function(t){e._conference=t,e.forceUpdate()})))}},{key:"componentWillUnmount",value:function(){this._conferenceChangeHandler&&c.default.off(this._conferenceChangeHandler)}},{key:"render",value:function(){var e=(r=this.props).cgid,t=r.children,n=r.className,r=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(r,b);if(!this._canUseChatConference)return null;if(this._conference||(this._conference=(0,p.getChatConference)(e)),!(0,d.isJoinedConference)(this._conference)&&!(0,h.isConferenceServerConnected)(this._conference))return null;if(!(e=this._conference.participantsList).length)return null;var a=(0,d.getConferenceParticipantMembers)(this._conference);return o.default.createElement("div",O({},r,{className:(0,i.classes)("app-chat-conference-participants rounded darken-0 primary x-outline",n)}),o.default.createElement("div",{className:"heading compact"},o.default.createElement("div",{className:"title strong text-primary small muted"},m.default.string("conference.participantsList")," (",e.length,")")),o.default.createElement(l.default,{itemRender:this.handleItemRender,className:"compact fluid flex-auto",members:a}),t)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component),P(t.default=n,"propTypes",{cgid:a.default.string.isRequired,className:a.default.string,children:a.default.any}),P(n,"defaultProps",{className:null,children:null})},20354:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=m(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=h(n(45697)),i=n(64393),l=n(44374),u=n(57485),s=h(n(58177)),c=h(n(16276)),f=n(15973),d=n(14227),p=["cgid","className"];function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=b(e);if(n=t?(n=b(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==o)return o;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(a);function a(){var e=this,t=a;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"render",value:function(){var e=(n=this.props).cgid,t=n.className,n=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(n,p),r=(0,l.getChatConference)(e);if(!r||r.isClosed||(0,u.isIgnoredConference)(r)||r.isJoinedOnOtherDevice((0,f.getCurrentUserID)()))return null;var a=(0,f.getCurrentUser)();return r&&a.config.useInitConference&&r.isOne2One&&r.cgid==="".concat(a.id,"&").concat(a.id)?null:o.default.createElement("div",y({className:(0,i.classes)("app-chat-conference relative primary-pale flex-none single column",t)},n),!d.isUsedIndependentConferenceWindow&&o.default.createElement(c.default,{cgid:e,className:"flex-auto"}),o.default.createElement(s.default,{conference:r,independentMode:d.isUsedIndependentConferenceWindow,className:"flex-none"}))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component),v(t.default=n,"propTypes",{cgid:a.default.string.isRequired,className:a.default.string,children:a.default.any}),v(n,"defaultProps",{className:null,children:null})},68232:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showCreateChatDialog=t.default=void 0;var r=c(n(61862)),o=n(68271),a=n(33417),i=c(n(25852)),l=n(15973),u=n(17215),s=n(68905);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}n=function(){e=function*(e,t){if((e=yield(0,s.showMembersSelectDialog)({selections:e,excludes:[(0,l.getCurrentUserID)()]},t))&&0<e.length)if(1===e.length)(0,o.setActiveChat)(a.getOne2OneChatGid.apply(void 0,function(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e)));else try{yield(0,u.showChatCreateGroupsDialog)(e)}catch(e){i.default.show(r.default.error(e),{type:"danger"})}};var e,t=function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){d(a,r,o,i,l,"next",e)}function l(e){d(a,r,o,i,l,"throw",e)}i(void 0)}))};return function(e,n){return t.apply(this,arguments)}}(),n={show:t.showCreateChatDialog=n},t.default=n},17215:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showChatCreateGroupsDialog=t.default=void 0;var r=c(n(67294)),o=c(n(52133)),a=c(n(60307)),i=n(20491),l=c(n(25852)),u=c(n(61862)),s=n(68271);function c(e){return e&&e.__esModule?e:{default:e}}n={show:t.showChatCreateGroupsDialog=function(e,t){return new Promise((function(n,l){var u="app-chat-create-groups-dialog";o.default.show({id:u,className:"app-chat-create-groups-dialog",content:r.default.createElement(a.default,{onRequestClose:function(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};t&&t.name?(t.name=t.name.trim(),(0,i.createChatWithMembers)(e,t).then((function(e){(0,s.setActiveChat)(e),n(e);var t=r.category;return t&&(0,i.setChatCategory)(e,t),e})).catch(l)):n(),o.default.hide(u)}}),actions:!1,closeButton:!1},t)})).catch((function(e){e&&l.default.show(u.default.error(e),{type:"danger"})}))}},t.default=n},60307:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=y(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=m(n(45697)),i=m(n(61862)),l=m(n(18922)),u=m(n(21205)),s=m(n(70389)),c=m(n(18033)),f=m(n(94128)),d=n(16986),p=n(45498),h=m(n(74379));function m(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=f.default.env.isOSX;n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v(e);if(n=t?(n=v(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return b(o)}}(a);function a(e){var t;if(this instanceof a)return w(b(t=n.call(this,e)),"handleRadioChange",(function(e,n){"visibility"!==(n=n.target.name)&&"avatar"!==n||t.setState(w({},n,e))})),w(b(t),"handleGroupNameChange",(function(e){t.setState({name:e})})),w(b(t),"handleCreateBtnClick",(function(){var e=(r=t.state).name,n=r.visibility,r=r.selectCategory;t.requestClose({name:e,public:"public"===n},{category:r})})),w(b(t),"handleSelectCategoryChange",(function(e,n){t.setState({selectCategory:e})})),t.state={avatar:"default",visibility:"private",name:"",selectCategory:""},t.allCategories=(0,p.getChatCategories)("group"),t;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"requestClose",value:function(e){var t=this.props.onRequestClose;t&&t(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})}},{key:"render",value:function(){var e=(n=this.state).visibility,t=(n.avatar,n.name),n=n.selectCategory,r=[o.default.createElement(c.default,{disabled:(0,d.isEmptyString)(t.trim()),key:"btn-confirm",className:"btn-wide bg-primary rounded",onClick:this.handleCreateBtnClick,label:i.default.string("chat.group.start")}),o.default.createElement(c.default,{key:"btn-cancel",className:"gray x-outline cancel-btn btn-wide rounded",onClick:this.requestClose.bind(this,null),label:i.default.string("common.cancel")})],a=(O&&r.reverse(),this.allCategories.filter((function(e){return"_archived"!==e.id&&"_dismissed"!==e.id&&"_hidden"!==e.id})).map((function(e){return{label:e.id?e.title:i.default.string("chats.menu.group.default"),value:e.id}})));return n=o.default.createElement("div",{className:"sub-control"},o.default.createElement(h.default,{value:n,onChange:this.handleSelectCategoryChange,options:a})),o.default.createElement("div",{className:"chat-create-groups-info"},o.default.createElement("div",{className:"flex space-between"},o.default.createElement("div",{className:"groups-name item"},o.default.createElement("p",{className:"title"},i.default.string("chat.group.name")),o.default.createElement(s.default,{label:!1,autoFocus:!0,defaultValue:t,onChange:this.handleGroupNameChange,inputProps:{maxLength:16}}),o.default.createElement("p",{className:"title small"},i.default.string("chat.group.limited")))),o.default.createElement("div",{className:"item"},o.default.createElement("p",{className:"title"},i.default.string("chats.menu.group.add")),n),o.default.createElement("div",{className:"item"},o.default.createElement("p",{className:"title"},i.default.string("chat.group.visibility")),o.default.createElement(u.default,{onChange:this.handleRadioChange},o.default.createElement(l.default,{name:"visibility",value:"private",label:i.default.string("chat.group.groupsVisual"),checked:"private"===e,className:"inline-block radio-sm"}),o.default.createElement(l.default,{name:"visibility",label:i.default.string("chat.group.publicVisual"),value:"public",checked:"public"===e,className:"inline-block radio-sm"}))),o.default.createElement("div",{className:"actions toolbar dock-bottom divider-top text-center has-padding-lg"},r))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component),w(t.default=n,"propTypes",{onRequestClose:a.default.func}),w(n,"defaultProps",{onRequestClose:null})},59702:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showChatGroupSettingsDialog=t.default=void 0;var r=l(n(67294)),o=l(n(52133)),a=l(n(30345)),i=l(n(61862));function l(e){return e&&e.__esModule?e:{default:e}}n={show:t.showChatGroupSettingsDialog=function(e,t,n){var l=null;return o.default.show({title:i.default.format("chat.group.settings"),style:{width:"80%"},onSubmit:function(){l&&t&&t(e,l.getSettings())},content:r.default.createElement(a.default,{ref:function(e){l=e},chat:e})},n)}},t.default=n},30345:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=v(n(67294)),o=g(n(45697)),a=n(64393),i=g(n(40328)),l=g(n(61862)),u=g(n(58851)),s=g(n(74379)),c=g(n(93055)),f=n(33417),d=v(n(74101)),p=n(15973),h=g(n(84431)),m=g(n(20155)),y=["chat","className","children"];function g(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==O(e)&&"function"!=typeof e)return{default:e};if((t=b(t))&&t.has(e))return t.get(e);var n,r,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=a?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n=function(e){var t=b;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E(t,e);var n,o,g=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(n=t?(n=k(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,n&&("object"===O(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return P(r)}}(b);function b(e){var t;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");j(P(t=g.call(this,e)),"handleSelectChange",(function(e){t.setState({type:e})}));var n=e.chat,r=(e=n.committersType,(0,f.getChatMembers)(n)),o=n.whitelist||new Set,a=!o.size,i=r.filter((function(e){return n.isAdmin(e)})),l=i.length;return a&&i.forEach((function(e){return o.add(e.id)})),t.state={type:e,whitelist:o,chatMembers:r,adminsCount:l,public:n.public,adminInvite:n.adminInvite},t}return t=b,(e=[{key:"componentDidMount",value:(n=function*(){var e,t=this.props.chat;yield(0,d.fetchChatMembersFromRemote)(t.gid),t=d.default.getChat(t.gid),this.state.chatMembers.length||(e=S(t.members).map(h.default.getMemberOrTemp).filter((function(e){return!e.isDeleted})),this.setState({chatMembers:e,adminsCount:t.admins.size+1}))},o=function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(e){C(a,r,o,i,l,"next",e)}function l(e){C(a,r,o,i,l,"throw",e)}i(void 0)}))},function(){return o.apply(this,arguments)})},{key:"renderBooleanItem",value:function(e){var t=this.state[e.name];return t=!!(t=e.getConverter?e.getConverter(t):t),r.default.createElement("div",{className:(0,a.classes)(e.className),key:e.name},r.default.createElement(c.default,{className:"inline-block",checked:t,label:e.caption,onChange:this.changeConfig.bind(this,e)}),r.default.createElement("span",{className:"text-gray items items-tips"},e.tips))}},{key:"changeConfig",value:function(e,t){var n=e.name;"object"===O(t)&&t.target&&(t="checkbox"===t.target.type?t.target.checked:t.target.value),e.setConverter&&(t=e.setConverter(t)),this.setState(j({},n,t))}},{key:"renderConfigItem",value:function(e){if(e.hidden){var t=e.hidden;if(t="function"==typeof e.hidden?e.hidden(this.state):t)return null}return"boolean"===e.type?this.renderBooleanItem(e):null}},{key:"getSettings",value:function(){return{public:this.state.public,adminInvite:this.state.adminInvite||!1,committers:this.getCommitters()}}},{key:"getCommitters",value:function(){var e=this.state.type;return"whitelist"===e?this.state.whitelist:"admins"===e?"$ADMINS":""}},{key:"handleCheckboxChange",value:function(e,t){var n=this.state.whitelist;t?n.add(e):n.delete(e),this.setState({whitelist:new Set(S(n))})}},{key:"render",value:function(){var e=this,t=(d=this.state).whitelist,n=d.type,o=d.chatMembers,f=d.adminsCount,d=(d.isAvatarFold,[{value:u.default.COMMITTERS_TYPES.all,label:"".concat(l.default.string("chat.committers.type.all"),"(").concat(o.length,")")},{value:u.default.COMMITTERS_TYPES.admins,label:"".concat(l.default.string("chat.committers.type.admins"),"(").concat(f,")")},{value:u.default.COMMITTERS_TYPES.whitelist,label:"".concat(l.default.string("chat.committers.type.whitelist"),"(").concat(t.size,")")}]),h=(f=this.props).chat,g=f.className,b=f.children;return f=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(f,y),h=h.isGroup?[{name:"chats",items:[{type:"boolean",name:"public",caption:l.default.string("chat.group.setting.public"),tips:l.default.string("chat.group.setting.public.tips")},{type:"boolean",name:"adminInvite",caption:l.default.string("chat.group.setting.adminInvite"),hidden:!(0,p.getCurrentUser)().isVersionSupport("chatSetConfig")||this.state.public}]}]:[],r.default.createElement("div",w({},f,{className:(0,a.classes)("app-group-setting space",g)}),!!h.length&&r.default.createElement("div",{className:"item"},h.map((function(t){return t.hidden?null:r.default.createElement("section",{key:t.name,className:"app-setting-group-".concat(t.name)},r.default.createElement("div",{className:"items"},t.items.map((function(t){return e.renderConfigItem(t)}))))}))),r.default.createElement("div",{className:(0,a.classes)("app-chat-committers-setting item",g)},r.default.createElement("div",{className:"text-gray space-sm flex flex-middle"},r.default.createElement(i.default,{name:"information-outline"})," ",l.default.string("chat.committers.committersSettingTip")),r.default.createElement(s.default,{className:"space-sm",style:{width:"50%"},value:n,options:d,onChange:this.handleSelectChange}),"whitelist"===n&&r.default.createElement("div",{className:"checkbox-list rounded box x-outline"},o.map((function(n){return r.default.createElement(c.default,{key:n.id,className:"inline-block",onChange:e.handleCheckboxChange.bind(e,n.id),checked:t.has(n.id),label:r.default.createElement(m.default,{memberID:n.id})})}))),b))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),b}(r.PureComponent),j(t.default=n,"propTypes",{chat:o.default.instanceOf(u.default),className:o.default.string,children:o.default.any}),j(n,"defaultProps",{chat:null,className:null,children:null})},68440:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=y(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=n(64393),i=m(n(40328)),l=m(n(66290)),u=n(98649),s=m(n(74160)),c=m(n(60357)),f=m(n(74689)),d=m(n(86575)),p=m(n(94128)),h=m(n(36043));function m(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}var g=p.default.env.isOSX?function(){return p.default.call("ui.handleTitlebarDblClick")}:null;t.default=(0,o.memo)((function(e){var t=e.cgid,n=e.className,r=(e=void 0!==(e=e.forceHideSidebar)&&e,(0,c.default)(),(0,d.default)(t),(0,f.default)("temp.ui.chat.showSidebar.".concat(t)),(0,h.default)(t),s.default.ui["chat.simpleChatView"]),p=(0,u.getMenuItemsForContext)("chat.toolbar",{chat:t}).filter((function(e){return!(0,u.isDividerItem)(e)}));return e&&(p=p.filter((function(e){return"chat-sidebar"!==e.id}))),o.default.createElement("div",{className:(0,a.classes)("app-chat-header flex flex-wrap space-between user-app-dragable divider",n),onDoubleClick:g},o.default.createElement(l.default,{cgid:t,className:"flex flex-middle"}),r?null:o.default.createElement("div",{className:"toolbar flex flex-middle rounded"},p.map((function(e){var t=o.default.createElement(i.default,{name:e.icon}),n=(0,a.classes)("app-chat-header-toolbar-item btn iconbutton rounded hint--bottom-right",e.className);return e.url?o.default.createElement("a",{key:e.id,"data-id":e.id,className:n,"data-hint":e.label,href:e.url},t):o.default.createElement("button",{key:e.id,"data-id":e.id,className:n,"data-hint":e.label,onClick:e.click,type:"button"},t)}))))}))},65835:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showChatHistoryDialog=t.default=void 0;var r=i(n(67294)),o=n(52133),a=i(n(59337));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n={show:t.showChatHistoryDialog=function(e,t,n){return e&&"object"===l(e)&&(e=e.gid),(0,o.showModal)({id:"app-chat-history-dialog",style:{left:10,right:10,bottom:0,top:20},className:"app-chat-history-dialog dock primary-pale",animation:"enter-from-bottom",actions:!1,content:r.default.createElement(a.default,{className:"flex-auto",messageID:+t,cgid:e,style:{maxHeight:"100%"},showScrollButton:!0})},n)}},t.default=n},16537:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=y(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=m(n(45697)),i=n(64393),l=m(n(91705)),u=m(n(10352)),s=m(n(2388)),c=m(n(60357)),f=m(n(17253)),d=m(n(80797)),p=m(n(86575)),h=m(n(59337));function m(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e){var t=e.cgid,n=e.searchKeys,r=e.timeFilter,a=(e=e.className,(r=(0,d.default)(n,t,{dateRange:r,returnType:"message"})).searching),m=(r=r.searchResult,g((0,c.default)(),1)[0]),y=g((0,p.default)(t),1)[0],b=(E=g((0,o.useState)(null),2))[0],v=E[1],w=(E=g((0,o.useState)(t),2))[0],O=E[1],S=((0,o.useEffect)((function(){O(t)}),[t]),[]),_=0,C=(r&&r.forEach((function(e){var t=e.list;e=e.count,S=S.concat(t),_+=e})),b),E=(_&&(S.some((function(e){return e.id===b}))?C=b:(C=S[0].id,w!==S[0].cgid&&O(S[0].cgid))),(0,o.useCallback)((function(e){!(e=e.target.closest(".app-message-item"))||(e=e.getAttribute("data-id"))&&v(+e)}),[])),P=(0,o.useCallback)((function(e,t){if(!t||t.id!==C)return e;var r=new RegExp("(".concat(n.split(" ").join("|"),")(?![^<]*>)"),"gi");return r&&r.test(e)&&(e=e.replace(r,"<span class='highlight'>$1</span>")),O(t.cgid),e}),[n,C]);return r=(0,o.useCallback)((function(e){return{showDateDivider:!1,showReplied:!1,hideHeader:!1,avatarSize:20,headDateFormat:"yyyy-MM-dd hh:mm",className:e.id===C?"state active":"state","data-id":e.id,hideActions:!0,contentConverter:P}}),[C,P]),a||!y?o.default.createElement("div",{className:(0,i.classes)("center-content",e)},o.default.createElement(l.default,null)):_?(200<S.length&&S.splice(200,S.length-200),o.default.createElement("div",{className:(0,i.classes)("app-chat-history-search white row single",e)},o.default.createElement("div",{className:"app-chat-history-search-result column single flex-none"},o.default.createElement("header",{className:"heading flex-none gray"},o.default.createElement("div",{className:"title"},o.default.createElement("small",null,m.format("chats.chat.search.result.format",y.name,_)))),o.default.createElement("div",{className:"flex-auto user-selectable overflow-y-auto overflow-x-auto scrollbar-hover fluid"},o.default.createElement(f.default,{cgid:t,className:"use-font-size-12",messagesOrIndexes:S,listItemProps:r,onClick:E,bubbleContextMenu:!0,needResort:!0})),100<S.length&&o.default.createElement("div",{className:"flex-none heading info-pale"},o.default.createElement(s.default,{icon:"information-outline"}),o.default.createElement("div",{className:"title"},o.default.createElement("small",null,200<_?m.format("chats.history.search.result.notShow.format",_-200):"",m.string("chats.history.search.result.toMany"))))),o.default.createElement(h.default,{className:"flex-auto",messageID:C,cgid:w,messageContentConverter:P,parentCgid:t}))):o.default.createElement("div",{className:(0,i.classes)("center-content",e)},o.default.createElement("div",null,o.default.createElement(u.default,{name:":duck:",className:"text-center"}),o.default.createElement("div",{className:"text-gray small"},m.string("chats.history.search.result.noResults"))))}v.propTypes={cgid:a.default.string.isRequired,searchKeys:a.default.string,timeFilter:a.default.string,className:a.default.string},v.defaultProps={searchKeys:null,timeFilter:null,className:null},t.default=(0,o.memo)(v)},82871:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=m(n(45697)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=h(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),i=m(n(54256)),l=m(n(91705)),u=n(64393),s=m(n(61351)),c=m(n(66290)),f=m(n(17253)),d=m(n(60651)),p=m(n(74101));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function m(e){return e&&e.__esModule?e:{default:e}}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e){var t=e.cgid,n=(e=e.className,(m=y((0,a.useState)(t),2))[0]),r=m[1];(0,a.useEffect)((function(){r(t)}),[t]),n=(m=y((0,d.default)(n),4))[0];var o=m[1],h=m[2],m=m[3],g=null;return o&&(g=a.default.createElement("nav",{className:"toolbar flex flex-middle text-nowrap"},a.default.createElement(i.default,{onPageChange:h?null:m,page:o.pageID,recTotal:o.recTotal,recPerPage:o.recPerPage,pageTotal:o.pageTotal}))),m=p.default.getChat(t),a.default.createElement("div",{className:(0,u.classes)("app-chat-history column single",e)},m.isOne2One||Array.isArray(m.mergedChats)&&0===m.mergedChats.length||void 0===m.mergedChats?a.default.createElement(c.default,{className:"flex-none has-padding-h",cgid:t},g):a.default.createElement(s.default,{className:"flex-none",cgid:t,setActiveChat:r,pagerView:g}),h?a.default.createElement("div",{className:"flex-auto center-content"},a.default.createElement(l.default,null)):a.default.createElement("div",{className:"flex-auto user-selectable scrollbar-hover overflow-y-auto overflow-x-auto fluid"},a.default.createElement(f.default,{cgid:t,messagesOrIndexes:n,bubbleContextMenu:!0})))}b.propTypes={cgid:o.default.string.isRequired,className:o.default.string},b.defaultProps={className:null},t.default=(0,a.memo)(b)},14992:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showChatInviteDialog=t.default=void 0;var r=c(n(61862)),o=n(15998),a=n(68271),i=n(20491),l=c(n(25852)),u=n(68905),s=c(n(74101));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}n=function(){e=function*(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],c=3<arguments.length&&void 0!==arguments[3]&&arguments[3],d=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;if(e=c||"string"!=typeof e?e:s.default.getChat(e)){var p,h=Array.from(e.members);if((t=yield(0,u.showMembersSelectDialog)({selections:t,selectTip:r.default.string("chat.invite.selectMembers"),excludes:[].concat(h,f(n))},d))&&t.length)try{return!c&&e.isOne2One?(t.push.apply(t,h),p=yield(0,o.createGroupChat)(t),(0,a.setActiveChat)(p),p):(yield(0,i.inviteMembersToChat)(e,t),e)}catch(e){e&&l.default.show(r.default.error(e),{type:"danger"})}}};var e,t=function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){p(a,r,o,i,l,"next",e)}function l(e){p(a,r,o,i,l,"throw",e)}i(void 0)}))};return function(e){return t.apply(this,arguments)}}(),n={show:t.showChatInviteDialog=n},t.default=n},50618:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=v(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=b(n(45697)),i=n(64393),l=b(n(40328)),u=b(n(2388)),s=b(n(25852)),c=b(n(93956)),f=b(n(91705)),d=b(n(61862)),p=n(40910),h=b(n(85091)),m=n(20491),y=b(n(74101)),g=["className","children","onRequestClose"];function b(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=_(e);if(n=t?(n=_(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return S(o)}}(a);function a(e){var t;if(this instanceof a)return C(S(t=n.call(this,e)),"handleSearchChange",(function(e){e=e&&e.toLowerCase(),t.setState({search:e})})),C(S(t),"handleRefreshBtnClick",(function(){t.loadPublicChats()})),C(S(t),"handleJoinBtnClick",(function(){var e=t.state.choosed;(0,m.joinOrExitChat)(e).then((function(e){(0,p.setRoutePath)("chats","groups",e.gid);var n=t.props.onRequestClose;return n&&n(),e})).catch((function(e){e&&s.default.show(d.default.error(e),{type:"danger"})}))})),t.state={choosed:null,search:"",chats:[],loading:!0},t;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"componentDidMount",value:function(){this.loadPublicChats()}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"loadPublicChats",value:function(){var e=this;this.setState({loading:!0}),y.default.fetchPublicChats().then((function(t){e.unmounted||e.setState({loading:!1,chats:t})})).catch((function(t){e.unmounted||(e.setState({loading:!1,chats:[]}),t&&s.default.show(d.default.error(t),{type:"danger"}))}))}},{key:"handleChatItemClick",value:function(e){this.setState({choosed:e})}},{key:"isMatchSearch",value:function(e){var t=this.state.search;return!t.length||e.name.toLowerCase().includes(t)||e.gid===t}},{key:"isChoosed",value:function(e){return this.state.choosed&&this.state.choosed.gid===e.gid}},{key:"render",value:function(){var e=this,t=(r=this.props).className,n=r.children,r=(r.onRequestClose,function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(r,g)),a=this.state.choosed;return o.default.createElement("div",w({},r,{className:(0,i.classes)("app-chat-join-public column single",t)}),o.default.createElement("div",{className:"x-list-item divider flex-none"},o.default.createElement(u.default,{icon:"arrow-right",iconClassName:"text-muted icon-2x"}),o.default.createElement("div",{className:"title"},d.default.string("chat.create.joinGroupTip")),o.default.createElement("div",{className:"flex-none"},o.default.createElement("button",{type:"button",onClick:this.handleJoinBtnClick,disabled:!a,className:"btn primary rounded"},a?d.default.format("chat.create.joinGroup.format",a.name):d.default.string("chat.create.join")))),o.default.createElement("div",{className:"white cell"},o.default.createElement("div",{className:"column single"},o.default.createElement("div",{className:"cell heading flex-none has-padding"},o.default.createElement("nav",{className:"flex-auto"},o.default.createElement("a",{className:(0,i.classes)("btn text-primary rounded",{disabled:this.state.loading}),onClick:this.handleRefreshBtnClick},d.default.string("common.refresh"))),o.default.createElement(c.default,{defaultValue:this.state.search,onSearchChange:this.handleSearchChange,className:"flex-none",style:{width:(0,i.rem)(200)},placeholder:d.default.string("common.search")})),o.default.createElement("div",{className:"cell overflow-y-auto has-padding relative"},o.default.createElement("div",{className:"list fluid compact app-chat-join-public-chat-list"},!this.state.loading&&this.state.chats.map((function(t){var n;return!y.default.getChat(t.gid)&&e.isMatchSearch(t)?(n=e.isChoosed(t),o.default.createElement(h.default,{className:n?"item primary-pale space-sm":"item space-sm",onClick:e.handleChatItemClick.bind(e,t),key:t.gid,gid:t.gid},n&&o.default.createElement(l.default,{name:"check text-success"}))):null})),this.state.loading&&o.default.createElement("div",{className:"dock center-content"},o.default.createElement(f.default,{className:"text-primary",iconSize:36})))))),n)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component),C(t.default=n,"propTypes",{className:a.default.string,children:a.default.any,onRequestClose:a.default.func}),C(n,"defaultProps",{className:null,children:null,onRequestClose:null})},85091:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=m(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=h(n(45697)),i=n(64393),l=h(n(40328)),u=h(n(45508)),s=n(33417),c=h(n(86575)),f=h(n(60357)),d=n(16986),p=["gid","className","badge","children","subname","grayOffline","showStatusDot"];function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e){var t=e.gid,n=e.className,r=e.badge,a=e.children,h=e.subname,m=e.grayOffline,b=e.showStatusDot,v=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,p),g((0,c.default)(t),1)[0]),w=v.name,O=g((0,f.default)(),1)[0],S=null,_=(!0===h?v.isOne2One?(_=(0,s.getOtherMemberInOne2OneChat)(v))&&(S="[".concat(O.string("member.status.".concat(_.statusName)),"]")):v.isRobot?(_=O.string("common.notificationSubname"))!==w&&(S="(".concat(_,")")):v.isSystem?S="(".concat(O.format("chat.membersCount.format",O.string("chat.all")),")"):v.isGroup&&(S="(".concat(O.format("chat.membersCount.format",v.members.size),")")):h&&(S=h),null);return!0===r?(O=v.noticeCount)?_=o.default.createElement("div",{className:(0,i.classes)("label circle label-sm",v.isMuteOrHidden?"blue":"red")},99<O?"99+":O):v.mute&&(_=o.default.createElement(l.default,{name:"bell-off",className:"icon-sm muted"})):r&&(_=r),o.default.createElement("a",y({className:(0,i.classes)("app-chat-item flex-middle item",n)},e),o.default.createElement(u.default,{showStar:!1,gid:t,avatarClassName:"avatar-sm",avatarSize:24,grayOffline:m,showStatusDot:b,className:"flex-none"}),o.default.createElement("div",{className:"title text-ellipsis text-black"},(0,d.isEmptyString)(w)?o.default.createElement("span",{className:"inline-block loading-holder relative loading-holder-line"},w):w,S&&o.default.createElement("small",{className:"muted"}," ",S)),_&&o.default.createElement("div",{className:"flex-none",style:{lineHeight:1}},_),a)}v.propTypes={gid:a.default.string.isRequired,className:a.default.string,children:a.default.any,badge:a.default.any,subname:a.default.any,grayOffline:a.default.bool,showStatusDot:a.default.bool},v.defaultProps={className:null,children:null,badge:null,subname:null,grayOffline:!1,showStatusDot:!1},t.default=(0,o.memo)(v)},58890:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.showChatMembersSelectDialog=t.ChatMembersSelectDialog=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=_(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=S(n(45697)),i=S(n(61997)),l=n(64393),u=S(n(91705)),s=S(n(40328)),c=S(n(52133)),f=S(n(36940)),d=S(n(62031)),p=S(n(61862)),h=S(n(74101)),m=n(99087),y=S(n(84431)),g=n(83981),b=n(68905),v=n(15973),w=S(n(93956)),O=S(n(63318));function S(e){return e&&e.__esModule?e:{default:e}}function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function C(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){k(a,r,o,i,l,"next",e)}function l(e){k(a,r,o,i,l,"throw",e)}i(void 0)}))}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var D=function(e){var t=i;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x(t,e);var n,a=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=T(e);if(n=t?(n=T(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return M(o)}}(i);function i(e){var t;if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");I(M(t=a.call(this,e)),"handleClickMember",(function(e){var n=new Set(t.state.selections);n.has(e)?n.delete(e):n.add(e),t.setState({selections:Array.from(n)})})),I(M(t),"handleClickPrimaryBtn",(function(){t.props.onFinish&&t.props.onFinish(t.state.selections)})),I(M(t),"handleSearchChange",(function(e){t.setState({searchValue:e},(function(){t.searchMembers()}))}));var n=h.default.getChat(e.gid);return t.state={selections:e.selections||[],membersSet:n?n.members:new Set,searchValue:"",searchResult:[],loading:!1},t}return t=i,(e=[{key:"componentDidMount",value:(n=j((function*(){var e=this;if(!this.state.membersSet.size){var t=yield h.default.tryFetchChatMembers(this.props.gid);if(this._unmounted)return;this.setState({membersSet:t})}this.chatChangeHandler=h.default.subscribe(this.props.gid,(function(t){t=t.members,(0,m.isSameSet)(t,e.state.membersSet)||e._unmounted||e.setState({membersSet:new Set(t)})}))})),function(){return n.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){h.default.unsubscribe(this.chatChangeHandler),this._unmounted=!0}},{key:"searchMembers",value:function(){var e=this,t=this.state.searchValue,n=this.props.gid;""===t?this.setState({searchResult:[]}):this.setState({loading:!0},j((function*(){var r=e.props.excludes,o=r?new Set(r):null;try{var a=(yield y.default.searchFromRemote(t,{chat:n})).map((function(e){return e.id}));if(o&&(a=a.filter((function(e){return!o.has(e)}))),e._unmounted)return;e.setState({searchResult:a,loading:!1})}catch(r){if(e._unmounted)return;e.setState({searchResult:[],loading:!1}),console.error("Search members from server error",r)}})))}},{key:"render",value:function(){var e=this,t=(r=this.props).excludes,n=r.onFinish,r=r.selectTip,a=(m=this.state).selections,i=m.searchValue,c=m.searchResult,h=m.membersSet,m=m.loading,b=t?new Set(t):null,v=(t=b?C(h).filter((function(e){return!b.has(e)})):C(h),h=""===i?t:c,null);if(m)v=o.default.createElement(u.default,{key:"spinner"});else if(h.length){v=[];var S,_=new Set(a),P=function(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=E(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}((0,g.sortMembers)(h.map(y.default.getMemberOrTemp)));try{for(P.s();!(S=P.n()).done;){var k=S.value.id;v.push(o.default.createElement(d.default,{memberID:k,key:k,onClick:this.handleClickMember.bind(null,k)},o.default.createElement("div",{className:(0,l.classes)("checkbox checkbox-sm",{checked:_.has(k)})},o.default.createElement("label",null))))}}catch(r){P.e(r)}finally{P.f()}}else v=o.default.createElement(O.default,{key:"notFound",icon:"information-outline",className:"flex-middle item muted disabled",title:o.default.createElement("span",{className:"title small"},p.default.string("common.notFoundOptions"))});return o.default.createElement("div",{className:"app-members-select app-select-panel dock"},o.default.createElement("div",{className:"dock-left single column divider-right col-6",style:{paddingLeft:10,paddingRight:10}},o.default.createElement("header",{className:"flex-none"},o.default.createElement("div",{className:"title text-gray bold",style:{padding:"0.5rem 0"}},r||p.default.string("chat.selectMembers")),o.default.createElement(w.default,{placeholder:p.default.string("chats.search.recents"),onSearchChange:this.handleSearchChange,style:{marginBottom:6},changeDelay:500})),o.default.createElement("div",{className:"flex-auto overflow-y-auto"},o.default.createElement("div",{className:"list compact"},v))),o.default.createElement("div",{className:"dock-right single column col-6",style:{paddingLeft:10,paddingRight:10}},o.default.createElement("header",{className:"flex-none heading space-sm"},o.default.createElement("div",{className:"title strong text-primary"},p.default.string("chat.invite.choosed")," (",a.length,")")),o.default.createElement("div",{className:"list compact overflow-y-auto"},a.map((function(t){return o.default.createElement(d.default,{memberID:t,key:t,onClick:e.handleClickMember.bind(null,t)},o.default.createElement(s.default,{name:"sprite-selection-remove"}))})))),o.default.createElement(f.default,{className:"dock-bottom divider-top text-center has-padding-lg",onClickPrimary:a&&a.length?this.handleClickPrimaryBtn:null,onClickCancel:n.bind(null,[])}))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.PureComponent);I(t.ChatMembersSelectDialog=D,"propTypes",{gid:a.default.string.isRequired,selections:a.default.arrayOf(a.default.number),excludes:a.default.arrayOf(a.default.number),onFinish:a.default.func,selectTip:a.default.string}),I(D,"defaultProps",{selections:null,excludes:null,onFinish:null,selectTip:null}),t.showChatMembersSelectDialog=function(e){function t(){document.getSelection().removeAllRanges(),"function"==typeof r&&r()}var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=n.selections,l=n.excludes,u=void 0===l?[]:l,s=n.selectTip;return u.length||u.push((0,v.getCurrentUserID)()),h.default.getChat(e,!0).isSystem?(0,b.showMembersSelectDialog)({selections:a,excludes:u,selectTip:s},t):new Promise((function(n){var r=(0,i.default)();c.default.show({id:r,actions:!1,closeButton:!1,style:{width:400,height:500},content:o.default.createElement(D,{gid:e,onFinish:function(e){c.default.hide(r),n(e)},selections:a,excludes:u,selectTip:s})},t)}))}},54881:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showChatMentionsDialog=t.default=void 0;var r=(l=n(61862))&&l.__esModule?l:{default:l},o=n(15998),a=n(58890);function i(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}var l=function(){e=function*(e,t){(t=yield(0,a.showChatMembersSelectDialog)(e,{selectTip:r.default.string("chat.selectMentions")},t))&&0<t.length&&(0,o.mentionMemberInSendbox)(t,{cgid:e,replaceAfter:"@"})};var e,t=function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function l(e){i(a,r,o,l,u,"next",e)}function u(e){i(a,r,o,l,u,"throw",e)}l(void 0)}))};return function(e,n){return t.apply(this,arguments)}}();n={show:t.showChatMentionsDialog=l},t.default=n},63633:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=f(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=c(n(61862)),i=n(13939),l=n(64393),u=c(n(74101)),s=n(15973);function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=y(e);if(n=t?(n=y(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return m(o)}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=f;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e);var n,r,c=h(f);function f(e){var t;if(this instanceof f)return g(m(t=c.call(this,e)),"handleSelectChange",(function(e){t.setState({mergeToChat:e}),(0,t.props.disableConfirmBtn)(!e)})),g(m(t),"getMergeToChatGid",(function(){return t.state.mergeToChat})),t.state={mergeToChat:"",chatList:[]},t;throw new TypeError("Cannot call a class as a function")}return t=f,(e=[{key:"componentDidMount",value:(n=function*(){var e=(n=this.props).chatGid,t=n.chatGroups,n=n.disableConfirmBtn,r=(0,s.getCurrentUser)();t=(0<t.length?t:u.default.queryChats((function(t){return!t.isDismissed&&!t.isDeleted&&"group"===t.type&&t.isOwner(r)&&t.gid!==e&&!t.isMerged&&!t.isArchived}),{sortRules:"recentFirst"})).map((function(e){return{label:e.name,value:e.gid}})),this.setState({chatList:t}),n(!0)},r=function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(e){d(a,r,o,i,l,"next",e)}function l(e){d(a,r,o,i,l,"throw",e)}i(void 0)}))},function(){return r.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.chatName,t=this.state.chatList;return o.default.createElement("div",{className:(0,l.classes)("app-chat-committers-setting")},o.default.createElement("div",{className:"text-gray space-sm flex flex-middle"},o.default.createElement("span",{dangerouslySetInnerHTML:{__html:a.default.format("chat.group.mergeTo",'<span class="text-primary">'.concat(e,"</span>"))}})),o.default.createElement(i.SearchBox,{options:t,onChange:this.handleSelectChange}),o.default.createElement("div",{className:"text-red flex flex-middle",style:{marginTop:10}},a.default.format("chat.group.mergeTips")))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),f}(o.PureComponent),g(t.default=n,"defaultProps",{chatGroups:[]})},95396:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showChatMergeDialog=void 0;var r=f(n(67294)),o=f(n(52133)),a=f(n(61862)),i=f(n(63633)),l=n(20491),u=f(n(74101)),s=n(68271),c=f(n(58851));function f(e){return e&&e.__esModule?e:{default:e}}t.showChatMergeDialog=function(e,t,n){var f=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],d=null,p=null,h=null,m=[];0<f.length?(f.forEach((function(t){t.gid!==e&&m.push(t),t.gid===e&&(p=new c.default(t))})),f=m):p=u.default.getChat(e),o.default.show({title:a.default.format("chat.group.merge"),style:{width:"520px"},onSubmit:function(){var e=d.getMergeToChatGid();if(e){if(f.length){var t=f.find((function(t){return e===t.gid}));if(!t)return!0;h=new c.default(t)}else h=u.default.getChat(e);(0,l.mergeChat)(p,h)}o.default.hide(),f.length||(0,s.setActiveChat)(e)},content:r.default.createElement(i.default,{chatName:t,chatGid:e,chatGroups:f,disableConfirmBtn:function(e){e?document.getElementsByClassName("action-submit")[0].setAttribute("disabled",e):document.getElementsByClassName("action-submit")[0].removeAttribute("disabled")}.bind(void 0),ref:function(e){d=e}})},n)}},61351:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=m(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=h(n(45697)),i=n(64393),l=h(n(40328)),u=h(n(74160)),s=h(n(94128)),c=h(n(86575)),f=h(n(60357)),d=h(n(87618)),p=["cgid","className","children","setActiveChat","pagerView"];function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e){function t(e){null!=(n=(t=e.target).scrollIntoViewIfNeeded)&&n.call(t);var t,n=e.target.closest(".center-content").id;w(n),m(n)}function n(e){var t=document.getElementById("ulscroll");t.scrollLeft+=("left"===e?-1:1)*Math.min(120,Math.floor(t.clientWidth/2))}var r=e.cgid,a=e.className,h=e.children,m=e.setActiveChat,b=e.pagerView,v=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,p),(O=g((0,o.useState)(r),2))[0]),w=O[1],O=g((0,f.default)(),1)[0],S=g((0,c.default)(r),1)[0],_=null,C=g((0,o.useState)(!1),2),E=C[0],P=C[1];return(0,o.useEffect)((function(){w(r)}),[r]),(0,o.useEffect)((function(){var e=document.getElementById("ulscroll");e&&P(e.scrollWidth>e.parentNode.clientWidth)})),u.default.ui["chat.showNoticeOnChatTitle"]&&(C=S.unreadMessagesCount)&&!s.default.call("ui.isWindowOpenAndFocus")&&(_=o.default.createElement("div",{className:(0,i.classes)("label circle label-sm",S.isMuteOrHidden?"blue":"red")},99<C?"99+":C)),window.onresize=function(){var e=document.getElementById("ulscroll");e&&P(e.scrollWidth>e.parentNode.clientWidth)},o.default.createElement("div",y({className:(0,i.classes)("chat-title heading space-between",a)},e),o.default.createElement("nav",{className:(0,i.classes)("chats-title-group nav")},o.default.createElement("ul",{className:(0,i.classes)("nav nav-tabs content-start"),id:"ulscroll",onWheel:function(e){e.currentTarget.scrollLeft+=e.deltaY}},o.default.createElement("li",{className:(0,i.classes)("center-content",v===r?"activeTab":""),id:r},o.default.createElement("a",{"data-tab":!0,onClick:t},o.default.createElement(d.default,{cgid:r,className:"strong"}),S.public&&o.default.createElement("div",{"data-hint":O.string("chat.public.label")},o.default.createElement(l.default,{className:"text-green",name:"access-point"})),S.mute&&o.default.createElement("div",{"data-hint":O.string("chat.mute.label")},o.default.createElement(l.default,{className:"text-brown",name:"bell-off"})),S.isArchived&&o.default.createElement("div",{className:"small label rounded yellow"},O.string("chat.group.archived")),S.isDismissed&&o.default.createElement("div",{className:"small label rounded dark"},O.string("chat.group.dismissed")),S.isDeleted&&o.default.createElement("div",{className:"small label rounded dark"},O.string("chat.deleted")),_)),S.mergedChats.map((function(e){return o.default.createElement("li",{key:e,className:(0,i.classes)("center-content",v===e?"activeTab":""),id:e},o.default.createElement("a",{"data-tab":!0,onClick:t},o.default.createElement(d.default,{cgid:e,className:"strong"})))})))),h,E?o.default.createElement("div",{className:(0,i.classes)("center-content arrow-pager")},o.default.createElement("div",{className:"chat-history-nav-arrows nav"},o.default.createElement("a",{onClick:function(){return n("left")}},o.default.createElement(l.default,{name:"menu-left icon-2x"})),o.default.createElement("a",{onClick:function(){return n("right")}},o.default.createElement(l.default,{name:"menu-right icon-2x"}))),o.default.createElement("div",{className:"pagerView"},b)):o.default.createElement("div",{className:"pagerView"},b))}v.propTypes={cgid:a.default.string.isRequired,className:a.default.string,children:a.default.any,setActiveChat:a.default.func,pagerView:a.default.element},v.defaultProps={className:null,children:null,setActiveChat:null,pagerView:null},t.default=(0,o.memo)(v)},59337:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=b(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=g(n(45697)),i=n(64393),l=g(n(40328)),u=g(n(91705)),s=g(n(17253)),c=g(n(66290)),f=g(n(61862)),d=g(n(73052)),p=g(n(18033)),h=g(n(74101)),m=g(n(87618)),y=["messageID","cgid","className","recPerPage","messageContentConverter","showScrollButton","parentCgid"];function g(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function w(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){S(a,r,o,i,l,"next",e)}function l(e){S(a,r,o,i,l,"throw",e)}i(void 0)}))}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=P(e);if(n=t?(n=P(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return E(o)}}(a);function a(e){var t;if(this instanceof a)return k(E(t=n.call(this,e)),"loadNext",_((function*(){var e,n,r,o,a,i,l=t.state.nextBegin;l&&(e=(n=t.props).messageID,o=n.recPerPage,n=n.cgid,o={recPerPage:r=l===e?o+1:o,pageID:1,recTotal:r,pageTotal:1,range:[l,Number.MAX_SAFE_INTEGER]},l=yield d.default.fetchChatMessagesByPage(n,{pager:o,reverse:!1,putToCache:!1}),a=l.ids,i=l.list,t._messageID===e&&(i&&i.length?t.setState((function(e){return{nextBegin:i.length<r?0:Math.max.apply(Math,w(a))+1,list:[].concat(w(e.list),w(i))}})):t.setState({nextBegin:0})))}))),k(E(t),"loadPrev",_((function*(){var e,n,r,o,a,i=t.state.prevEnd;i&&(e=(r=t.props).messageID,n=r.recPerPage,r=r.cgid,r=yield d.default.fetchChatMessagesByPage(r,{pager:{recPerPage:n,pageID:1,recTotal:n,pageTotal:1,range:[0,i]},reverse:!0,putToCache:!1}),o=r.ids,a=r.list,t._messageID===e&&(a&&a.length?t.setState((function(e){return{prevEnd:a.length<n?0:Math.min.apply(Math,w(o))-1,list:[].concat(w(a.reverse()),w(e.list))}})):t.setState({prevEnd:0})))}))),k(E(t),"getRef",(function(e){t._messageList=e})),k(E(t),"itemPropsGenerator",(function(){return{contentConverter:t.props.messageContentConverter}})),t.state={prevEnd:0,nextBegin:0,list:[]},t;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"componentDidMount",value:function(){this.tryRefresh()}},{key:"componentDidUpdate",value:function(){this.tryRefresh()}},{key:"componentWillUnmount",value:function(){this._highlightTimer&&clearTimeout(this._highlightTimer),this._messageID=0}},{key:"tryRefresh",value:function(){var e=this,t=this.props.messageID;this._messageID!==t&&(this._messageID=t,this.setState({prevEnd:t-1,nextBegin:t,list:[]},_((function*(){yield e.loadNext(),e._messageID===t&&(yield e.loadPrev(),e._highlightTimer=setTimeout((function(){e.scrollToMessage(),e._highlightTimer=null}),500))}))))}},{key:"scrollToMessage",value:function(){var e;this._messageList&&(e=this.props.messageID,(e=this._messageList.querySelector("#message-".concat(e)))&&(e.classList.add("highlight"),(0,i.scrollIntoView)(e,{behavior:"smooth",block:"center"})))}},{key:"render",value:function(){var e=this,t=((d=this.props).messageID,d.cgid),n=d.className,r=(d.recPerPage,d.messageContentConverter,d.showScrollButton),a=d.parentCgid,d=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(d,y),g=(w=this.state).prevEnd,b=w.nextBegin,w=w.list,O=h.default.getChat(t);return o.default.createElement("div",v({className:(0,i.classes)("app-chat-message-context column single",n)},d),!O||O.isMerged?o.default.createElement("div",{className:"merged-title"},o.default.createElement(m.default,{className:"strong",cgid:a})," (",o.default.createElement(m.default,{cgid:t}),")"):o.default.createElement(c.default,{cgid:t,className:"flex-none"}),w.length?o.default.createElement("div",{className:"flex-auto user-selectable overflow-y-auto overflow-x-auto scrollbar-hover fluid"},o.default.createElement("div",{className:"box center-content"},g?o.default.createElement("a",{className:"btn block rounded text-primary primary-pale",onClick:this.loadPrev},o.default.createElement(l.default,{name:"chevron-double-up"})," ",f.default.string("common.loadMore")):o.default.createElement("small",{className:"muted"},f.default.string("chat.noMoreMessage"))),o.default.createElement(s.default,{cgid:t,listRef:this.getRef,className:"use-font-size-13",messagesOrIndexes:w,listItemProps:this.itemPropsGenerator,bubbleContextMenu:!0}),o.default.createElement("div",{className:"box center-content"},b?o.default.createElement("a",{className:"btn block rounded text-primary primary-pale",onClick:this.loadNext},o.default.createElement(l.default,{name:"chevron-double-down"})," ",f.default.string("common.loadMore")):o.default.createElement("small",{className:"muted"},f.default.string("chat.noMoreMessage")))):o.default.createElement("div",{className:"flex-auto center-content"},o.default.createElement(u.default,null)),r&&o.default.createElement(p.default,{key:"goToTopBtn",onClick:function(){e.scrollToMessage()},title:f.default.string("chat.toolbar.scrollToTarget"),icon:"mdi-crosshairs-gps",className:"app-message-list-scroll-btn dock-right has-margin btn-lg btn-icon circle primary-pale has-badge shadow-1 dock dock-bottom"}))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.PureComponent),k(t.default=n,"propTypes",{messageID:a.default.number.isRequired,cgid:a.default.string.isRequired,className:a.default.string,recPerPage:a.default.number,messageContentConverter:a.default.func,showScrollButton:a.default.bool,parentCgid:a.default.string}),k(n,"defaultProps",{className:null,recPerPage:5,messageContentConverter:null,showScrollButton:!1,parentCgid:null})},79424:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showChatMessageImagePreivew=function(e,t,n){var i=(n=n||{}).imageInfo;return n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,a),e=new r.ChatMessageImageObtainer(e,t,i),(0,o.showMediaPreviewWindow)(e,n)};var r=n(99794),o=n(70290),a=["imageInfo"]},34160:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=s(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=u(n(7149)),i=u(n(61435)),l=["messageIndex","prevMessageIndex","cgid"];function u(e){return e&&e.__esModule?e:{default:e}}function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=(0,o.memo)((function(e){var t=e.messageIndex,n=void 0===(n=e.prevMessageIndex)?0:n,r=e.cgid;return e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,l),t=[t,n].filter((function(e){return!!e})),n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,i.default)(t,r)),t=n[0],r=n[1],t?o.default.createElement(a.default,c({id:t.id,prevMessage:r,message:t,showReplied:!0},e)):null}))},19239:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=S(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=O(n(45697)),i=n(64393),l=O(n(91705)),u=n(15998),s=n(20491),c=O(n(18033)),f=O(n(20270)),d=O(n(74101)),p=O(n(60357)),h=O(n(74689)),m=O(n(86575)),y=O(n(59440)),g=O(n(29795)),b=O(n(17253)),v=O(n(65286)),w=["gid","className"];function O(e){return e&&e.__esModule?e:{default:e}}function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e){var t=e.gid,n=e.className,r=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,w),C((0,m.default)(t),1)[0]),a=void 0===(a=(B=(0,y.default)(t)).list)?[]:a,O=B.loading,S=B.canLoadMore,P=C((0,p.default)(),1)[0],k=(B=C((0,o.useState)(),2))[0],j=B[1],x=(0,u.takeOutChatCacheState)(t,"scrollPos"),M=(B=C((0,o.useState)(!x),2))[0],T=B[1],I=(0,o.useRef)(),D=(0,o.useRef)(),A=(0,o.useRef)(),R=r.unreadMessagesCount,N=r.unreadMessageIndexes,B=C((0,h.default)("ui.chat.fontSize"),1)[0],L=(z=C((0,o.useState)(N),2))[0],F=z[1],U=(0,o.useCallback)((function(){for(var e=D.current.querySelectorAll(".app-message-divider"),t=I.current.listElement.getBoundingClientRect().top,n=null,r=e.length-1;0<=r;--r){var o=e[r];if(o.getBoundingClientRect().top<t){n=o;break}}A.current!==n&&(A.current=n,j(n?n.innerText:""))}),[]),z=((0,o.useEffect)((function(){var e=I.current,n=(x&&e&&e.scrollTo(x,!1),(0,s.onSendChatMessages)((function(e,n){n.gid===t&&(I.current.scrollToBegin(!1),g.default.shrinkList(t))}))),r=setTimeout((function(){e.scrollInfo.scrollbarShowed||g.default.loadMoreList(t),U()}),1500);return function(){var o;clearTimeout(r),v.default.off(n),e&&(o=e.scrollInfo)&&!o.isStickiedAtBegin&&(0,u.setChatCacheState)(t,{scrollPos:o.position})}}),[t,x,U]),(0,o.useEffect)((function(){if(R&&!M){var e,t=!1,n=function(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=E(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}(N);try{for(n.s();!(e=n.n()).done;){var r=e.value;L.has(r)||(L.add(r),t=!0)}}catch(e){n.e(e)}finally{n.f()}t&&F(new Set(L))}}),[R,N,L,M]),(0,o.useEffect)((function(){M&&((R||r.fileSavedNoticeCount)&&d.default.muteChatUnreadMessages(t,{windowMustFocus:!0,mustActive:!0}),L.size&&F(new Set))}),[t,r,M,R,L]),(0,o.useCallback)((function(e){var n=e.isStickiedAtBegin,r=e.isStickiedAtEnd;e=e.scrollbarShowed,T(n),!S||!r&&e||g.default.loadMoreList(t),U()}),[S,t,U])),W=(0,o.useCallback)((function(){return O?o.default.createElement(l.default,{className:"has-padding"}):S?o.default.createElement("a",{className:"has-padding small text-gray text-center block space-sm",onClick:g.default.loadMoreList.bind(g.default,t)}," ",P.string("chat.loadMoreMessage")," "):o.default.createElement("div",{className:"has-padding small text-gray text-center space-sm"}," ",P.string("chat.noMoreMessage")," ")}),[O,S,t,P]),H=(0,o.useCallback)((function(){I.current.scrollToBegin(),T(!0)}),[]),V=(0,o.useCallback)((function(){A.current&&I.current.scrollToElement(A.current,{behavior:"smooth",block:"start",offset:10})}),[]),G=r.isMuteOrHidden,q=r.isNotification,$=!q;return V=[o.default.createElement("a",{key:"dateBadge",onClick:V,className:(0,i.classes)("app-message-list-date-badge btn btn-sm small circle white text-gray shadow-1",k?"":"hidden")},k),o.default.createElement(c.default,{key:"goToTopBtn",onClick:H,title:$?P.string("chat.toolbar.scrollToBottom"):P.string("chat.toolbar.scrollToTop"),icon:$?"arrow-down-thick":"arrow-up-thick",className:(0,i.classes)("app-message-list-scroll-btn dock-right has-margin btn-lg btn-icon circle primary-pale has-badge shadow-1 dock",$?"dock-bottom":"dock-top",M?"hidden":"inline-block")},L.size?o.default.createElement("span",{className:(0,i.classes)("label badge circle shadow ".concat(G?"blue":R?"red":"yellow"))},L.size):null)],k=[].concat(V),o.default.createElement(f.default,{className:(0,i.classes)("app-chat-messages white",n),stickyToBottom:$,onScroll:z,ref:I,customView:k},o.default.createElement(b.default,_({listRef:D,cgid:t,reverse:q,className:(0,i.classes)("user-selectable","use-font-size-".concat(B.size)),messagesOrIndexes:a.concat(r.localMessagesList),header:$?W:null,footer:$?null:W,unreadMessageIndexes:M?null:L,bubbleContextMenu:!0,fromHistory:!1},e)))}k.propTypes={gid:a.default.string.isRequired,className:a.default.string},k.defaultProps={className:null},t.default=(0,o.memo)(k)},93206:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=m(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=h(n(45697)),i=h(n(74101)),l=h(n(73052)),u=h(n(18033)),s=h(n(40328)),c=n(98649),f=h(n(17196)),d=h(n(62906)),p=h(n(61862));function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e){var t,n=e.currentTarget.attributes["data-message"].value;(n=l.default.getMessage(+n))&&(t=i.default.getChat(n.cgid),(0,c.showContextMenu)("chat.pinned",{event:e,chat:t,message:n}),e.preventDefault())}function b(e,t){return t.isBulletin?"[".concat(p.default.string("chat.bulletin.type.".concat(t.bulletin.type)),"] ").concat(e):e}function v(e){e=e.gid;var t=(0,f.default)(e),n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return y(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,o.useState)(-1)),r=n[0],a=n[1],i=t.length,l=(n=(0,o.useRef)(0),r<0||n.current!==i?i-1:Math.max(0,Math.min(r,i-1)));if(n.current=i,r=(0,o.useCallback)((function(){a((i+l-1)%i)}),[i,l]),n=(0,o.useCallback)((function(){a((l+1)%i)}),[i,l]),!i)return null;var c=t[l];return o.default.createElement("div",{className:"app-chat-pinned-messages row single flex-none text-primary primary-pale"},o.default.createElement("div",{className:"app-chat-pinned-messages-content row single flex-middle"},o.default.createElement(s.default,{name:"pin",className:"flex-none"})," ",o.default.createElement(d.default,{type:"a",href:"xxc://showChatMessage//".concat(c),className:"small flex-auto",messageID:c,cgid:e,formatCallback:b,"data-message":c,onContextMenu:g})),1<t.length&&o.default.createElement("div",{className:"app-chat-pinned-messages-actions flex-none column single flex-center",title:"".concat(l+1,"/").concat(i)},o.default.createElement(u.default,{key:"pinned-page-up",icon:"chevron-up",className:"btn-sm button-up",disabled:0===l,onClick:r}),o.default.createElement(u.default,{key:"pinned-page-down",icon:"chevron-down",className:"btn-sm button-down",disabled:l===t.length-1,onClick:n})))}v.propTypes={gid:a.default.string.isRequired},t.default=(0,o.memo)(v)},31239:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showChatCodeDialog=t.default=void 0;var r=c(n(67294)),o=c(n(52133)),a=c(n(1247)),i=c(n(61862)),l=n(20491),u=n(16986),s=n(68271);function c(e){return e&&e.__esModule?e:{default:e}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}var p=function(){e=function*(e,t){yield(0,l.sendCodeMessage)(e,t),(0,s.setActiveChat)(t,"recents")};var e,t=function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){d(a,r,o,i,l,"next",e)}function l(e){d(a,r,o,i,l,"throw",e)}i(void 0)}))};return function(e,n){return t.apply(this,arguments)}}();n={show:t.showChatCodeDialog=function(e){var t,n=void 0===(n=(l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).defaultValue)?"":n,l=l.callback;try{t=JSON.parse(n)}catch(n){t={}}var s=null;return o.default.show({id:"app-chat-code-dialog",style:{width:650,position:"absolute",bottom:0},closeButton:!1,className:"app-chat-code-dialog",animation:"enter-from-bottom",actions:[{type:"submit",label:i.default.string("chat.sendCode.sendBtnLabel"),click:function(){var t=s.getCode();if((0,u.isEmptyString)(t.code))return s.setRequireCodeWarning(),!1;p(t,e)}},{type:"cancel"}],content:r.default.createElement(a.default,f({ref:function(e){s=e},chat:e},t))},l)}},t.default=n},1247:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=p(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=d(n(45697)),i=d(n(74379)),l=d(n(61862)),u=n(64393),s=d(n(74160)),c=n(16986),f=d(n(70389));function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=g(e);if(n=t?(n=g(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return y(o)}}(a);function a(e){var t,r;if(this instanceof a)return b(y(r=n.call(this,e)),"handleCodeChange",(function(e){var t={code:e=e.target.value};r.state.requireCodeWarning&&(0,c.isNotEmptyString)(e)&&(t.requireCodeWarning=!1),r.setState(t)})),b(y(r),"handleLangChange",(function(e){r.setState({lang:e})})),b(y(r),"handleNameChange",(function(e){r.setState({name:e})})),r.state={lang:null!=(t=e.lang)?t:"",code:null!=(t=e.code)?t:"",name:null!=(t=e.name)?t:"",requireCodeWarning:!1},r;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"getCode",value:function(){var e=this.state;return{lang:e.lang,code:e.code,name:e.name}}},{key:"setRequireCodeWarning",value:function(){this.setState({requireCodeWarning:!(0<arguments.length&&void 0!==arguments[0])||arguments[0]})}},{key:"render",value:function(){var e=(r=this.state).lang,t=r.requireCodeWarning,n=r.name,r=r.code,a=[{label:l.default.string("chat.sendCode.defaultLanguage"),value:""}].concat(function(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(s.default.ui["chat.sendCode.langs"]));return o.default.createElement("div",{className:"chat-send-code-panel"},o.default.createElement("div",{className:"space row space-between flex-middle"},o.default.createElement(f.default,{className:"no-margin",label:!1,style:{width:(0,u.rem)(220)},defaultValue:n,onChange:this.handleNameChange,placeholder:l.default.string("chat.sendCode.codeName")}),o.default.createElement(i.default,{style:{width:(0,u.rem)(200)},value:e,options:a,selectClassName:"rounded",onChange:this.handleLangChange})),o.default.createElement("div",{className:(0,u.classes)("control",{"has-error":t})},o.default.createElement("textarea",{value:r,className:"textarea rounded code",rows:"16",placeholder:"".concat(l.default.string("chat.sendCode.content.placeholder")),onChange:this.handleCodeChange})))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component),b(t.default=n,"propTypes",{lang:a.default.string,code:a.default.string,name:a.default.string}),b(n,"defaultProps",{lang:null,code:null,name:null})},36100:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=h(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=p(n(45697)),i=p(n(73052)),l=p(n(74689)),u=n(20116),s=p(n(18033)),c=p(n(40328)),f=p(n(20155)),d=n(15973);function p(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e){var t=e.gid,n=(e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),1!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return m(e,1);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,1):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,l.default)("temp.im.chat.replyTo.".concat(t)))[0],(0,o.useCallback)((function(){(0,d.getUserConfig)().setChatReplyTo(t,null)}),[t]));if(!e)return null;var r=i.default.getMessage(e);return r?o.default.createElement("div",{className:"app-chat-reply single row flex-none flex-middle info rounded"},o.default.createElement(c.default,{name:"reply-circle",className:"flip-h",size:18}),o.default.createElement("a",{className:"app-chat-reply-content flex-auto text-ellipsis",href:"xxc://showChatMessage//".concat(e)},r.senderName?o.default.createElement("span",{className:"strong"},r.senderName):o.default.createElement(f.default,{memberID:r.senderId,className:"strong"}),o.default.createElement("span",null,": ",(0,u.getChatMessageSummaryText)(r))),o.default.createElement(s.default,{className:"rounded",icon:"close",onClick:n})):null}y.propTypes={gid:a.default.string.isRequired},t.default=(0,o.memo)(y)},3418:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=m(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=h(n(45697)),i=n(40328),l=n(98649),u=n(15998),s=n(64393),c=h(n(60357)),f=h(n(86575)),d=h(n(74689)),p=["className","chatGid","sendButtonDisabled","onPreviewButtonClick","onSendButtonClick"];function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e){var t=e.className,n=e.chatGid,r=e.sendButtonDisabled,a=e.onPreviewButtonClick,h=(e.onSendButtonClick,e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,p),g((0,c.default)(),1)[0]);return(0,f.default)(n),(0,d.default)(),o.default.createElement("div",y({className:(0,s.classes)("app-chat-sendbox-toolbar flex",t)},e),o.default.createElement("div",{className:"flex flex-middle flex-auto toolbar flex-wrap"},(0,l.getMenuItemsForContext)("chat.sendbox.toolbar",{chat:n,openMessagePreview:r?null:a,sendContent:u.sendContentToChat}).map((function(e,t){var n;return(0,l.isDividerItem)(e)?o.default.createElement("div",{key:e.id||t,className:"divider"}):"pill"===e.type&&"bulletin"===e.id?(n=e.extra,o.default.createElement("button",{key:e.id||t,"data-hint":e.label,onContextMenu:e.contextMenu,onClick:e.click,className:(0,s.classes)("btn iconbutton rounded",e.className,"app-chat-sendbox-btn-".concat(e.id),n&&"pill warning-pale text-warning"),type:"button"},(0,i.renderIcon)(e.icon),n&&o.default.createElement("div",{className:"pill-content"},o.default.createElement("span",null,h.string("chat.bulletin.type.".concat(n.type))),o.default.createElement("span",null," ",n.duration," "),o.default.createElement("span",null,h.string("common.time.".concat(n.unit)))))):o.default.createElement("button",{key:e.id||t,"data-hint":e.label,onContextMenu:e.contextMenu,onClick:e.click,className:(0,s.classes)("btn iconbutton rounded app-chat-sendbox-btn",e.className,"app-chat-sendbox-btn-".concat(e.id)),type:"button"},(0,i.renderIcon)(e.icon),e.content&&o.default.createElement("div",{className:"content"},e.content))}))))}v.propTypes={chatGid:a.default.string.isRequired,className:a.default.string,sendButtonDisabled:a.default.bool,onSendButtonClick:a.default.func,onPreviewButtonClick:a.default.func},v.defaultProps={className:null,sendButtonDisabled:!0,onSendButtonClick:null,onPreviewButtonClick:null},t.default=(0,o.memo)(v)},83337:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=M(n(45697)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==D(e)&&"function"!=typeof e)return{default:e};if((t=x(t))&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(n(67294)),a=M(n(74933)),i=M(n(40328)),l=M(n(74160)),u=n(98649),s=M(n(65286)),c=n(33417),f=n(5150),d=n(20491),p=n(15998),h=n(68271),m=M(n(61862)),y=M(n(84431)),g=n(15973),b=n(64393),v=n(4829),w=M(n(28784)),O=n(54881),S=M(n(3418)),_=M(n(16451)),C=M(n(12482)),E=M(n(74101)),P=M(n(62031)),k=M(n(2388)),j=["chat","className","maxMentionSuggestionCount"];function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}function M(e){return e&&e.__esModule?e:{default:e}}function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function R(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){A(a,r,o,i,l,"next",e)}function l(e){A(a,r,o,i,l,"throw",e)}i(void 0)}))}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=F(e);if(n=t?(n=F(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,n&&("object"===D(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return L(r)}}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=x;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N(t,e);var n,r=B(x);function x(e){var t;if(this instanceof x)return U(L(t=r.call(this,e)),"handleSendButtonClick",R((function*(){var e;if(!t.state.sendButtonDisabled){for(var n=t.editbox.getContentList(),r=(t.clearContent(),t.focusEditor(),t.props.chat),o=((0,h.setActiveChat)(r.gid,"recents"),(0,g.getUserConfig)()),i=0;i<n.length;++i){var l=n[i];try{if("text"===l.type){l.content=a.default.toShort(l.content);var u=!!(0,g.getUserConfig)().sendHDEmoticon&&l.content.trim();if("command"===o.botMode&&r.isBot){yield(0,d.sendBotCommandMessage)(l.content,r);continue}u&&a.default.emojiList[u]?yield(0,d.sendEmojiMessage)(u,r):yield(0,d.sendTextMessage)(l.content,r)}else"image"===l.type&&(yield(0,d.sendImageMessage)(l.image,r))}catch(e){DEBUG&&(console.collapse("Send message failed with error","redPale",String(e),"red"),console.error(e),console.log("content",l),console.groupEnd())}}o.setChatReplyTo(r.gid,null)}}))),U(L(t),"handleSendBtnContextMenu",(function(e){(0,u.showContextMenu)("chat.sendbox.sendButton",{event:e,chat:t.props.chat,options:{position:{direction:"top-left"}}})})),U(L(t),"handleOnChange",(function(e){var n=t.props.chat,r=e.hasText();t.setState({sendButtonDisabled:!r}),n.isOne2One&&(e=e.getPlainText())!==t.contentText&&(t.contentText=e,(0,f.updateChatSendboxStatus)(n,r))})),U(L(t),"handleOnReturnKeyDown",(function(e){return(0,v.getKeyDecoration)(e)===(0,g.getUserConfig)().sendMessageHotkey?(t.state.sendButtonDisabled||setTimeout((function(){t.handleSendButtonClick()}),10),e.preventDefault(),"handled"):"not-handled"})),U(L(t),"handlePreviewBtnClick",(function(){var e,n;t.state.sendButtonDisabled||(e=[],n=t.props.chat,t.editbox.getContentList().forEach((function(t){var r;"text"===t.type?(t.content=a.default.toShort(t.content),(r=!!(0,g.getUserConfig)().sendHDEmoticon&&t.content.trim())&&a.default.emojiList[r]?e.push((0,d.createEmojiChatMessage)(r,n)):e.push((0,d.createTextChatMessage)(t.content,n))):"image"===t.type&&(r=C.default.create(t.image),e.push((0,d.createTextChatMessage)("![preview-image](".concat(r.viewUrl,")"),n)))})),_.default.show(e,{onHidden:function(){t.focusEditor()}}))})),U(L(t),"handleOnFocus",(function(){var e=t.props.chat,n=L(t).editbox;(0,p.emitChatSendboxFocus)(e,null==n?void 0:n.getContent())})),U(L(t),"handleRequestSuggestions",(function(e,n){var r=(o=t.props).chat,o=o.maxMentionSuggestionCount;return(e=e.text).length?(y.default.searchFromRemote(e,{limit:o,chat:r.gid}).then((function(e){n(e)})).catch((function(){n([])})),(0,p.searchMembersOfGroupChat)(r.gid,e,o)):(0,p.getRecentMembersOfGroupChat)(r.gid,o)})),U(L(t),"handleMentionSuggestionClick",(function(e){"all"===e?t.editbox.appendMentions(e,{replaceAfter:!0}):(e="object"===D(e)?e.id:e,(e=y.default.getMember(e))&&t.editbox.appendMentions(e,{replaceAfter:!0}))})),U(L(t),"handleOnBlur",(function(){var e,n=t.props.chat,r=null==(r=(e=L(t).editbox).getEditorState())?void 0:r.getCurrentContent().getPlainText();(e=e.getContentList()).length?"image"===e[0].type?r=m.default.string("chat.message.type.image"):"text"===e[0].type&&null==r&&(r=e[0].content):r="",!n.draft&&r===n.draft||(n.draft=r,n.lastAccessTime=Date.now(),E.default.store(n))})),U(L(t),"renderSuggestionItem",(function(e,t,n){return"all"===e?o.default.createElement("div",{key:"SuggestionItem-".concat(e),className:(0,b.classes)("app-member-list-item item",n?"primary":""),onClick:t},o.default.createElement(k.default,{className:"user-avatar circle",label:"@",size:24,style:{backgroundColor:"var(--color-primary)",color:"var(--color-white)"}}),o.default.createElement("div",{className:"title text-ellipsis"},m.default.string("chat.message.atAll"))):(e="object"===D(e)?e.id:e,o.default.createElement(P.default,{key:"SuggestionItem-".concat(e),memberID:e,className:n?"primary":"",onClick:t}))})),U(L(t),"handleMoreMentionsBtnClick",(function(){(0,O.showChatMentionsDialog)(t.props.chat.gid)})),t.state={sendButtonDisabled:!0},t.defaultState=(0,p.takeOutChatCacheState)(e.chat.gid,"draft"),t;throw new TypeError("Cannot call a class as a function")}return t=x,(e=[{key:"componentDidMount",value:function(){var e=this,t=this.props.chat;this.onSendContentToChatHandler=(0,p.onSendContentToChat)(t.gid,(function(t){t.clear&&e.clearContent(),t&&t.content&&("image"===t.type?e.appendImages(t.content,t.callback):"mention"===t.type?e.editbox.appendMentions(t.content,{replaceAfter:t.replaceAfter,insertTrailingSpace:t.insertTrailingSpace},t.callback):"emoji"===t.type?e.editbox.appendEmoji(t.content,t.callback):e.editbox.appendContent(t.content,{skipDuplicateText:t.skipDuplicateText,replaceAfter:t.replaceAfter},t.callback)),e.focusEditor(),t&&t.send&&e.handleSendButtonClick()})),l.default.ui["chat.sendbox.focusOnActiveChat"]&&(this.onChatActiveHandler=(0,h.onActiveChat)((function(n){t.gid===n&&e.focusEditor()})),this.focusEditor()),t.isOne2One&&(this.onMemberChangeHandler=y.default.subscribe(t.theOtherMemberID,(function(t){t=t.status,e._memberStatus!==t&&(e._memberStatus=t,e.forceUpdate())})))}},{key:"componentWillUnmount",value:function(){var e,t=this.props.chat,n=this.editbox.getEditorState();n&&(e=n.getCurrentContent())&&e.hasText()&&(0,p.setChatCacheState)(t.gid,{draft:n}),s.default.off(this.onSendContentToChatHandler,this.onChatActiveHandler),this.onMemberChangeHandler&&y.default.unsubscribe(this.onMemberChangeHandler)}},{key:"appendImages",value:(n=R((function*(e){var t=this;if(e instanceof FileList){var n=e;e=[];for(var r=0;r<n.length;++r)e.push(n[r])}var o,a=function(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}(e=Array.isArray(e)?e:[e]);try{for(a.s();!(o=a.n()).done;){var i=o.value;try{yield function(e){return new Promise((function(n){var r=e instanceof C.default?e.originFile:e;t.editbox.appendImage(r,n)}))}(i)}catch(e){}}}catch(e){a.e(e)}finally{a.f()}this.focusEditor()})),function(e){return n.apply(this,arguments)})},{key:"clearContent",value:function(){this.editbox.clearContent(),this.setState({sendButtonDisabled:!0})}},{key:"focusEditor",value:function(){this.editbox.focus()}},{key:"_getPlaceholder",value:function(){var e=this.props.chat,t=null;return e.isOne2One&&(e=(0,c.getOtherMemberInOne2OneChat)(e))&&(e.isOffline?t=m.default.format("chat.sendbox.placeholder.memberIsOffline",e.displayName):(e.isBusy||e.isAway||e.isInMeeting)&&(t=m.default.format("chat.sendbox.placeholder.memberIsBusy",e.displayName,m.default.string("member.status.".concat(e.statusName))))),t||"".concat(m.default.string("chat.sendbox.placeholder.sendMessage")).concat((0,g.getUserConfig)().sendMarkdown?" (Markdown)":"")}},{key:"render",value:function(){var e=this,t=(a=this.props).chat,n=a.className,r=a.maxMentionSuggestionCount,a=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(a,j),l=this.state.sendButtonDisabled;return o.default.createElement("div",T({},a,{className:(0,b.classes)("app-chat-sendbox",n)}),o.default.createElement(S.default,{className:"dock-top",chatGid:t.gid,sendButtonDisabled:l,onPreviewButtonClick:this.handlePreviewBtnClick}),o.default.createElement(w.default,{className:"app-chat-drafteditor white dock-bottom overflow-y-auto scrollbar-hover","data-chat":t.gid,defaultState:this.defaultState,ref:function(t){e.editbox=t},placeholder:this._getPlaceholder(),onChange:this.handleOnChange,onReturnKeyDown:this.handleOnReturnKeyDown,onFocus:this.handleOnFocus,onRequestSuggestions:!r||t.isOne2One||t.isBot?null:this.handleRequestSuggestions,suggestionsItemRender:this.renderSuggestionItem,onClickMentionSuggestion:this.handleMentionSuggestionClick,onClickMentionsMoreBtn:this.handleMoreMentionsBtnClick,onBlur:this.handleOnBlur}),o.default.createElement("button",{type:"button",className:"app-chat-sendbox-send-btn btn iconbutton rounded hint--top-right dock dock-bottom dock-right","data-hint":"".concat(m.default.string("chat.sendbox.toolbar.send")," (").concat((0,g.getUserConfig)().sendMessageHotkey," - ").concat(m.default.string("chat.sendbox.toolbar.changeHotkeyTip"),")"),onClick:this.handleSendButtonClick,onContextMenu:this.handleSendBtnContextMenu},o.default.createElement(i.default,{className:(0,b.classes)("icon-2x",{muted:l,"text-primary":!l}),name:"mdi-keyboard-return"})))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),x}(o.Component),U(t.default=n,"propTypes",{className:r.default.string,chat:r.default.object,maxMentionSuggestionCount:r.default.number}),U(n,"defaultProps",{className:null,chat:null,maxMentionSuggestionCount:7})},86033:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showChatShareDialog=t.showChatSendDialog=t.default=void 0;var r=n(86208),o=s(n(61862)),a=s(n(25852)),i=n(20491),l=n(22852),u=s(n(74101));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function f(e){}n=function(){e=function*(e,t){return t=(t=yield(0,l.showChatsSelectDialog)({selectTip:o.default.string("chat.share.selectChats")},t))&&t.length?u.default.getChats(t):null,"function"==typeof e?(e(t),t):t?(e=yield(0,i.shareContentToChats)(e,t,(function(e,t){e<t&&a.default.show("".concat(o.default.string("chat.share.sending"),"(").concat(e,"/").concat(t,")"),{id:"messager-chat-share-message",autoHide:!1,closeButton:!1,modal:!0,backdrop:!1})})),e.length&&a.default.show(o.default.format("chat.share.sendSuccess",t.length),{type:"success",autoHide:3e3,id:"messager-chat-share-message",closeButton:!0,backdrop:!1,modal:!1}),e):void 0};var e,t=function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){c(a,r,o,i,l,"next",e)}function l(e){c(a,r,o,i,l,"throw",e)}i(void 0)}))};return function(e,n){return t.apply(this,arguments)}}(),n={show:t.showChatShareDialog=n,showChatSendDialog:t.showChatSendDialog=function(e,t){"string"==typeof(e=e.options.message)&&(e=(0,i.createTextChatMessage)(e,{})),(0,r.showSelectDialogWithPreview)(f,e,{primaryBtnText:o.default.string("chat.sendMessage")},t).then((function(t){return t&&t.length?(0,i.shareContentToChats)(e,t,(function(e,t){e<t&&a.default.show("".concat(o.default.string("chat.send.sending"),"(").concat(e,"/").concat(t,")"),{id:"messager-chat-send-message",autoHide:!1,closeButton:!1,modal:!0,backdrop:!1})})).then((function(e){return a.default.show(o.default.format("chat.send.sendSuccess",t.length),{type:"success",autoHide:3e3,id:"messager-chat-send-message",closeButton:!0,backdrop:!1,modal:!1}),e})):Promise.resolve()})).catch()}},t.default=n},28091:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=y(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=n(64393),i=m(n(61862)),l=m(n(60645)),u=m(n(10352)),s=m(n(94822)),c=n(78717),f=n(98649),d=m(n(94592)),p=m(n(93956)),h=["cgid","className","children"];function m(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){t.target.closest(".app-file-actions")||(0,c.executeCommand)("showChatMessage",e.cgid,e.messageID)}function w(e){var t=e.target.closest(".app-file-list-item"),n=(null!=t&&t.classList.add("selected"),null==t?void 0:t.getAttribute("data-file"));!n||(n=d.default.getFile(n))&&n.messageID&&((0,f.showContextMenu)("message",{event:e,message:n.messageID,options:{exclude:["message-unpin","message-pin","message-reply"]}}),document.addEventListener("click",(function(){null!=t&&t.classList.remove("selected")}),{once:!0}))}t.default=(0,o.memo)((function(e){var t=(0,s.default)(e.cgid),n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return b(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,o.useState)(t)),r=n[0],c=n[1],f=(e.cgid,n=e.className,e.children);return e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,h),(0,o.useEffect)((function(){c(t)}),[t]),o.default.createElement("div",g({className:(0,a.classes)("app-chat-sidebar-files",n)},e),null!=t&&t.length?o.default.createElement("div",{className:"search-box"},o.default.createElement(p.default,{onSearchChange:function(e){var n;if(e)return n=e?e.trim().toLowerCase().split(" "):null,e=t.map((function(e){return{score:e.getMatchScore(n),file:e}})).filter((function(e){return e.score})).sort((function(e,t){return t.score-e.score})).map((function(e){return e.file})),void c(e);c(t)},changeDelay:1e3,placeholder:i.default.string("common.search")})):null,null!=r&&r.length?o.default.createElement(l.default,{multiLines:!0,compact:!0,className:"white rounded",files:r,showDate:!0,showSender:!0,infos:"size,sender,date",onClickItem:v,onContextMenu:w}):o.default.createElement("div",{className:"dock center-content",style:{top:(0,a.rem)(50)}},o.default.createElement("div",null,o.default.createElement(u.default,{name:":blowfish:",className:"text-center"}),o.default.createElement("div",{className:"text-gray small"},i.default.string(null!=t&&t.length?"common.files.findCount.none":"chat.sidebar.tab.files.noFilesHere")))),f)}))},67804:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=I(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=T(n(45697)),i=T(n(40328)),l=T(n(61862)),u=T(n(52133)),s=n(40910),c=n(15973),f=T(n(25852)),d=T(n(91705)),p=n(64393),h=T(n(68634)),m=T(n(62031)),y=n(15998),g=n(68271),b=T(n(14992)),v=n(98649),w=n(33417),O=n(20491),S=T(n(65286)),_=n(83981),C=n(10088),E=n(32360),P=n(57485),k=n(14227),j=T(n(74101)),x=T(n(84431)),M=["chat","children","className"];function T(e){return e&&e.__esModule?e:{default:e}}function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function A(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=L(e);if(n=t?(n=L(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return B(o)}}(a);function a(e){var t;if(this instanceof a)return F(B(t=n.call(this,e)),"handleItemRender",(function(e,n){var r,a,u=t.props.chat,s=[],c=!1;return u.isCommitter(e)||s.push(o.default.createElement("span",{key:"committer-icon",className:"flex-none hint--left text-gray","data-hint":l.default.string("chat.committers.blocked")},o.default.createElement(i.default,{name:"account-lock-outline"}))),u.isAdmin(e)&&s.push(o.default.createElement("span",{key:"admin-icon",className:"flex-none hint--left","data-hint":l.default.string("chat.role.admin")},u.isOwner(e)?o.default.createElement(i.default,{name:"sprite-member-admin icon-sm"}):o.default.createElement(i.default,{name:"sprite-member-admin icon-sm hue-rotate"}))),t._canUseChatConference&&t._conferenceStatusMap&&(u=t._conference||u.gid,(0,P.isJoinedConference)(u)&&(r=t._conferenceStatusMap[e.id])&&(c=!0,a=(0,k.getConferenceIcon)(u,r),s.push(o.default.createElement("span",{key:"conference-icon","data-hint":(0,k.getConferenceStatusText)(u,r),className:"hint--left text-".concat((0,k.getConferenceColor)(u,r))},o.default.createElement(i.default,{name:a.startsWith("sprite-")?"".concat(a," icon-sm"):a}))))),o.default.createElement(m.default,{"data-id":e.id,onContextMenu:t.handleItemContextMenu,onClick:t.handleMemberItemClick,key:e.id,memberID:e.id,className:c?"primary-pale":""},0<s.length&&o.default.createElement("div",{className:"icons flex-none single row flex-middle"},s),n)})),F(B(t),"handleItemContextMenu",(function(e){var n=x.default.getMember(e.currentTarget.attributes["data-id"].value),r=t.props.chat,o=t.state.selection;(0,v.showContextMenu)("chat.sidebar.member",{chat:r,event:e,member:n,onClickMultiSelection:!o&&function(){t.setState({selection:!0})}})})),F(B(t),"handleInviteBtnClick",(function(){t.handleCancelSelectionBtnClick(),b.default.show(t.props.chat)})),F(B(t),"handleMemberItemClick",(function(e){var n,r,o=x.default.getMember(e.currentTarget.attributes["data-id"].value);t.state.selection?(n=o.id,(0,c.isCurrentUser)(n)||((r=t.state.chosen).has(n)?r.delete(n):r.add(n),t.setState({chosen:r}))):(0,v.showContextMenu)("member.profile",{event:e,showMentionBtn:!0,member:o,options:{onItemClick:function(){return!1},position:{x:e.target.parentNode.parentNode.getBoundingClientRect().x-20,y:e.target.parentNode.getBoundingClientRect().y,direction:"bottom-left"}}})})),F(B(t),"handleCancelSelectionBtnClick",(function(){t.setState({selection:!1,chosen:new Set})})),F(B(t),"handleActiveChatBtnClick",(function(){var e=t.state.chosen;1===e.size&&(e=w.getOne2OneChatGid.apply(void 0,A(e)),(0,g.setActiveChat)(e,"recents"))})),F(B(t),"handleCreateGroupBtnClick",(function(){var e=t.state.chosen;1<e.size&&(0,y.createGroupChat)(A(e)).then((function(e){return e&&(0,s.setRoutePath)("chats","groups",e.gid),t.handleCancelSelectionBtnClick(),!0})).catch((function(e){e&&f.default.show(l.default.error(e),{type:"danger"})}))})),F(B(t),"handleRemoveBtnClick",(function(){var e=t.props.chat,n=A(t.state.chosen);return u.default.confirm(l.default.string("chat.kickOffFromGroup.confirm.batch")).then((function(t){if(t)return(0,O.batchKickMemberFromChat)(e,n)})).then((function(){t.handleCancelSelectionBtnClick()}))})),t.state={selection:!1,chosen:new Set},t._canUseChatConference=(0,P.canUseConference)(t.props.chat.gid,!0),t._membersIdSet=null,t;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"componentDidMount",value:function(){var e=this;this.dataChangeEventHandler=j.default.subscribe(this.props.chat.gid,(function(){e.forceUpdate()})),this.onChatActiveHandler=(0,g.onActiveChat)((function(){e.handleCancelSelectionBtnClick()})),this._canUseChatConference&&(this._conferenceChangeHandler=(0,C.onConferenceChange)(this.props.chat.gid,(function(t){e._conference=t,e.forceUpdate()}))),this._membersChangeHandler=x.default.subscribeAny((function(t){t&&t.length&&e._membersIdSet&&e._membersIdSet.size&&t.some((function(t){return e._membersIdSet.has(t.id)}))&&e.forceUpdate()}))}},{key:"componentWillUnmount",value:function(){S.default.off(this.onChatActiveHandler),j.default.unsubscribe(this.dataChangeEventHandler),this._conferenceChangeHandler&&S.default.off(this._conferenceChangeHandler),x.default.unsubscribe(this._membersChangeHandler)}},{key:"render",value:function(){var e=this,t=(a=this.props).chat,n=a.children,r=a.className,a=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(a,M),i=(0,w.getChatMembers)(t);if(!i.length)return j.default.tryFetchChatMembers(t.gid),o.default.createElement("div",D({},a,{className:(0,p.classes)("app-chat-sidebar-peoples dock single column space-between has-padding-xl",r)}),o.default.createElement(d.default,null));var u,s,f,m=(y=this.state).selection,y=y.chosen,g=(0,c.getCurrentUser)(),b=g.account,v=(this._canUseChatConference&&(u=this._conference||t.gid,(0,P.isJoinedConference)(u)&&(0,E.isConferenceServerConnected)(u)?(this._conferenceStatusMap={},i.forEach((function(t){t.isOnline&&(e._conferenceStatusMap[t.id]=(0,P.getMemberStatusInConference)(u,t))}))):this._conferenceStatusMap=null),(0,_.sortMembers)(i,[function(n,r){if(n.account===b)return-1;if(r.account===b)return 1;if(e._canUseChatConference&&e._conferenceStatusMap){var o=e._conferenceStatusMap[n.id],a=e._conferenceStatusMap[r.id];if(o&&!a)return-1;if(a&&!o)return 1}return a=t.isAdmin(n),o=t.isAdmin(r),a&&!o?-1:o&&!a?1:0},"status","-id"]),null);return t.isSystem||(s=[],1===(f=y.size)&&s.push(o.default.createElement("a",{key:"btn-create-chat",className:"btn gray x-outline rounded",onClick:this.handleActiveChatBtnClick},l.default.string("chat.sidebar.createChat"))),1<f&&s.push(o.default.createElement("a",{key:"btn-create-group",className:"btn gray x-outline rounded",onClick:this.handleCreateGroupBtnClick},l.default.string("chat.sidebar.createGroup"))),t.canInvite(g)&&s.push(o.default.createElement("a",{key:"btn-invite",className:"btn gray x-outline rounded",onClick:this.handleInviteBtnClick},l.default.string("chat.sidebar.invite"))),t.canKickOff(g)&&0<f&&s.push(o.default.createElement("a",{key:"btn-remove-member",className:"btn gray x-outline rounded",onClick:this.handleRemoveBtnClick},l.default.string("chat.sidebar.removeMember"))),m&&s.push(o.default.createElement("a",{key:"btn-cancel-selection",className:"btn rounded",onClick:this.handleCancelSelectionBtnClick},l.default.string("chat.sidebar.cancelSelection"))),s.length&&(v=o.default.createElement("nav",{className:"actions flex-none has-padding-sm text-center"},s))),this._membersIdSet=new Set(i.map((function(e){return e.id}))),o.default.createElement("div",D({},a,{className:(0,p.classes)("app-chat-sidebar-peoples dock single column space-between",r)}),o.default.createElement("div",{className:"overflow-y-auto scrollbar-hover"},o.default.createElement(h.default,{itemRender:this.handleItemRender,className:"compact fluid flex-auto",members:i,selection:m,chosen:y})),v,n)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component),F(t.default=n,"propTypes",{className:a.default.string,chat:a.default.object,children:a.default.any}),F(n,"defaultProps",{className:null,chat:null,children:null})},6633:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=f(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=c(n(45697)),i=n(64393),l=c(n(71214)),u=c(n(74101)),s=["gid","className","children"];function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e){var t=e.gid,n=e.className,r=e.children;return e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,s),(t=u.default.getChat(t))?(t=t.theOtherMemberID,o.default.createElement("div",d({className:(0,i.classes)("app-chat-sidebar-profile has-padding",n)},e),o.default.createElement(l.default,{compact:!0,className:"white",memberId:t}),r)):null}p.defaultProps={className:null,children:null},p.propTypes={gid:a.default.string.isRequired,className:a.default.string,children:a.default.any},t.default=(0,o.memo)(p)},59396:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=m(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=h(n(45697)),i=n(64393),l=h(n(62031)),u=h(n(68634)),s=n(98649),c=h(n(84431)),f=h(n(61298)),d=h(n(74101)),p=["chat","children","className"];function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=w(e);if(n=t?(n=w(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return v(o)}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e);var n=b(r);function r(){var e,t=this,a=r;if(!(t instanceof a))throw new TypeError("Cannot call a class as a function");for(var i=arguments.length,u=new Array(i),f=0;f<i;f++)u[f]=arguments[f];return O(v(e=n.call.apply(n,[this].concat(u))),"handleItemRender",(function(t){return o.default.createElement(l.default,{"data-id":t.id,onContextMenu:e.handleItemContextMenu,onClick:e.handleMemberItemClick,key:t.account,memberID:t.id})})),O(v(e),"handleItemContextMenu",(function(t){var n=e.props.chat,r=c.default.getMember(t.currentTarget.attributes["data-id"].value);(0,s.showContextMenu)("chat.sidebar.member",{chat:n,event:t,member:r})})),O(v(e),"handleMemberItemClick",(function(e){var t=c.default.getMember(e.currentTarget.attributes["data-id"].value);(0,s.showContextMenu)("member.profile",{event:e,showMentionBtn:!0,member:t,options:{onItemClick:function(){return!1},position:{x:e.pageX,y:e.pageY,offsetX:Math.ceil(e.target.parentNode.parentNode.getBoundingClientRect().x*(Number.parseFloat(document.documentElement.style.zoom)||1)-e.pageX),direction:"bottom-left"}}})})),e}return t=r,(e=[{key:"componentDidMount",value:function(){var e=this;this.dataChangeEventHandler=c.default.subscribeAny((function(){e.forceUpdate()}))}},{key:"componentWillUnmount",value:function(){c.default.unsubscribe(this.dataChangeEventHandler)}},{key:"render",value:function(){var e=(r=this.props).chat,t=r.children,n=r.className,r=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(r,p),a=d.default.getRecentContactMembers();return o.default.createElement("div",y({},r,{className:(0,i.classes)("chat-sidebar-depts dock",n)}),o.default.createElement(f.default,{cgid:e.gid}),o.default.createElement("div",{className:"overflow-y-auto scrollbar-hover"},o.default.createElement(u.default,{itemRender:this.handleItemRender,className:"compact fluid flex-auto",members:a})),t)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component),O(t.default=n,"propTypes",{chat:a.default.object,children:a.default.any,className:a.default.string}),O(n,"defaultProps",{chat:null,children:null,className:null})},77055:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=h(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=n(64393),i=n(66222),l=p(n(28091)),u=p(n(59396)),s=p(n(67804)),c=p(n(6633)),f=p(n(60357)),d=["chat","className","children"];function p(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=(0,o.memo)((function(e){PERF&&(0,o.useEffect)((function(){PERF_MARK("chatSidebarShowed","beginOpenSystemChatSidebar","systemChatSidebarShowTime"),PERF_MARK("chatSidebarShowed","beginOpenOne2oneChatSidebar","one2oneChatSidebarShowTime")}),[]);var t=e.chat,n=e.className,r=e.children,p=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,d),y((0,f.default)(),1)[0]);return o.default.createElement("div",m({className:(0,a.classes)("app-chat-sidebar dock white",n)},e),o.default.createElement(i.Tabs,{className:"dock column single",defaultActivePaneKey:t.isOne2One?"profile":t.isSystem?"recentContacts":"peoples",navClassName:"overflow-hidden app-chat-sidebar-nav nav-pills flex-none nav-sm justified shadow-1",contentClassName:"flex-auto display overflow-y-auto scrollbar-hover"},t.isOne2One?o.default.createElement(i.TabPane,{key:"profile",label:p.string("chat.sidebar.tab.profile.label")},function(e){return o.default.createElement(c.default,{gid:e.gid})}.bind(null,t)):t.isSystem?o.default.createElement(i.TabPane,{key:"recentContacts",label:"".concat(p.string("chat.sidebar.tab.recentContacts.label"))},function(e){return o.default.createElement(u.default,{chat:e})}.bind(null,t)):o.default.createElement(i.TabPane,{key:"peoples",label:"".concat(p.string("chat.sidebar.tab.peoples.label"))},function(e){return o.default.createElement(s.default,{chat:e})}.bind(null,t)),o.default.createElement(i.TabPane,{key:"files",label:"".concat(p.string("chat.sidebar.tab.files.label"))},function(e){return o.default.createElement(l.default,{cgid:e.gid})}.bind(null,t))),r)}))},82847:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.showChatTipPopover=t.default=void 0;var o=f(n(67294)),a=f(n(40328)),i=f(n(21898)),l=f(n(61862)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=c(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(15973)),s=f(n(94128));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(e){return e&&e.__esModule?e:{default:e}}n={show:t.showChatTipPopover=function(e,t){var n="app-chat-tip-popover",r=o.default.createElement("div",null,o.default.createElement("div",{className:"heading"},o.default.createElement("div",{className:"title strong"},l.default.string("chat.tips.title")),o.default.createElement("nav",{className:"nav"},o.default.createElement("a",{className:"text-gray small",onClick:function(){u.default.userConfig.showMessageTip=!1,i.default.hide(n)}},o.default.createElement(a.default,{name:"close"})," ",l.default.string("chat.tips.close")))),o.default.createElement("div",{className:"box"},o.default.createElement("ul",{style:{paddingLeft:20,marginBottom:0}},o.default.createElement("li",null,l.default.string("chat.tips.dragging")),o.default.createElement("li",null,l.default.string("chat.tips.markdown")),o.default.createElement("li",null,l.default.string("chat.tips.pasting")),s.default.has("screenshot")&&(0,u.getUserConfig)()?o.default.createElement("li",null,l.default.string("chat.tips.screenshots")):null)));return i.default.show(e,r,{id:n,width:320,height:140},t)}},t.default=n},66290:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=v(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=b(n(45697)),i=n(64393),l=n(16986),u=b(n(40328)),s=b(n(62103)),c=n(67629),f=b(n(74160)),d=b(n(94128)),p=b(n(27149)),h=b(n(86575)),m=b(n(60357)),y=b(n(43088)),g=["cgid","className","children"];function b(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e){var t=e.cgid,n=e.className,r=e.children,a=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,g),O((0,m.default)(),1)[0]),b=(0,p.default)(t),v=(t=O((0,h.default)(t),1)[0],(0,y.default)(t.theOtherMemberID)),S=t.isOne2One,_=f.default.ui["chat.denyShowMemberProfile"],C=t.isGroupOrSystem&&(t.isSystem||t.members.size)?a.format("chat.groupName.format",t.name,t.isSystem?a.string("chat.all"):t.members.size):t.name,E=!_&&S?c.showMemberProfileDialog.bind(null,t.theOtherMemberID,null):null,P=null,k=(!f.default.ui["chat.showNoticeOnChatTitle"]||(k=t.unreadMessagesCount)&&!d.default.call("ui.isWindowOpenAndFocus")&&(P=o.default.createElement("div",{className:(0,i.classes)("label circle label-sm",t.isMuteOrHidden?"blue":"red")},99<k?"99+":k)),S&&!f.default.ui["chat.hideStatusDot"]),j=null;return b&&(j=o.default.createElement("small",{className:"muted small"},a.string("chat.one2one.typing"))),o.default.createElement("div",w({className:(0,i.classes)("chat-title heading",n)},e),k&&o.default.createElement(s.default,{size:10,status:v}),!_&&S?o.default.createElement("a",{className:(0,i.classes)("strong rounded title flex-none",(0,l.isEmptyString)(C)?"loading-holder relative loading-holder-line":""),onClick:E},C):o.default.createElement("strong",{className:(0,i.classes)("title flex-none",(0,l.isEmptyString)(C)?"loading-holder relative loading-holder-line":"")},C),S&&!k?o.default.createElement("span",{className:"muted"},"[",a.string("member.status.".concat(v)),"]"):null,t.public&&o.default.createElement("div",{"data-hint":a.string("chat.public.label")},o.default.createElement(u.default,{className:"text-green",name:"access-point"})),t.mute&&o.default.createElement("div",{"data-hint":a.string("chat.mute.label")},o.default.createElement(u.default,{className:"text-brown",name:"bell-off"})),t.isArchived&&o.default.createElement("div",{className:"small label rounded yellow"},a.string("chat.group.archived")),t.isDismissed&&o.default.createElement("div",{className:"small label rounded dark"},a.string("chat.group.dismissed")),t.isDeleted&&o.default.createElement("div",{className:"small label rounded dark"},a.string("chat.deleted")),P,j,o.default.createElement("div",{className:"flex-auto"}),r)}_.propTypes={cgid:a.default.string.isRequired,className:a.default.string,children:a.default.any},_.defaultProps={className:null,children:null},t.default=(0,o.memo)(_)},71920:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ChatTransfersByRTCInitiator=void 0;var o=w(n(67294)),a=b(n(45697)),i=w(n(39483)),l=b(n(7807)),u=b(n(65286)),s=b(n(24260)),c=n(15973),f=b(n(74101)),d=n(16986),p=b(n(61862)),h=b(n(40328)),m=b(n(36255)),y=n(78717),g=n(77925);function b(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=v(t))&&t.has(e))return t.get(e);var n,o,a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]);return a.default=e,t&&t.set(e,a),a}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e){var t,n,r,a=e.cgid,l=(e=O((0,o.useState)(function(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(null!=(e=null==(e=i.default.getSendingFiles(a))?void 0:e.values())?e:[])),2))[0],s=e[1],c=(t=a,n=(e=O((0,o.useState)(i.default.getRTCInitiator(t)),2))[0],r=e[1],(0,o.useEffect)((function(){var e=u.default.on("".concat("rtc.initiator.dataChannel.status.change",".").concat(t),(function(){r(i.default.getRTCInitiator(t))}));return function(){return u.default.off(e)}})),n);return(0,o.useEffect)((function(){return i.default.addSendingFilesListener(a,(function(e){s(e)})),function(){return i.default.removeReceivingFilesListener(a)}}),[a]),l&&l.length?o.default.createElement("div",{className:"app-chat-transfers flex flex-wrap space-between"},l.map((function(e){return o.default.createElement(E,{key:e.id,cgid:a,file:e,initiator:c})}))):null}function E(e){var t=e.cgid,n=e.file,r=e.initiator,a=(e=O((0,o.useState)(null!=(e=null==r?void 0:r.getOffset(n.id))?e:0),2))[0],u=e[1],m=(e=O((0,o.useState)(null==r?void 0:r.getSpeed(n.id)),2))[0],b=e[1],v=(e=O((0,o.useState)(null==r?void 0:r.getRemainingTime(n.id)),2))[0],w=e[1],S=(e=O((0,o.useState)(0),2))[0],_=e[1],C=((0,o.useEffect)((function(){return r&&r.addSendProgressListener(n.id,(function(e){u(r.getOffset(n.id)),b(r.getSpeed(n.id)),w(r.getRemainingTime(n.id)),_(100*e)})),function(){return null==r?void 0:r.removeSendProgressListener(n.id)}})),(0,c.getCurrentUserID)()),E=f.default.getChat(t),P=(e=null,(n.status===i.RTC_FILE_STATUS.accepted&&S<100||n.status===i.RTC_FILE_STATUS.pending)&&(e=o.default.createElement("div",{style:{minWidth:48,display:"flex",justifyContent:"center",flexShrink:0,paddingLeft:"16px"}},o.default.createElement("a",{className:"btn btn-sm gray rounded",onClick:function(){return P()}},p.default.string("common.cancel")))),m=m&&n.status===i.RTC_FILE_STATUS.accepted?o.default.createElement("span",{className:"app-file-info","data-info":"size"},o.default.createElement(h.default,{name:"mdi-upload",style:{display:"inline-block",verticalAlign:"middle"}}),o.default.createElement("span",{style:{display:"inline-block",verticalAlign:"middle"}},"".concat((0,d.formatBytes)(m),"/s - "))):null,v=v&&n.status===i.RTC_FILE_STATUS.accepted?o.default.createElement("span",{className:"app-file-info","data-info":"size",style:{verticalAlign:"middle"}},"- ",p.default.format("file.rtc.time",v)):null,function(){s.default.send({method:"datatransfer",params:{cgid:t,user:E.theOtherMemberID,data:JSON.stringify({type:i.RTC_TRANSFER_EVENT.sendFilesCancel,file:n}),userID:C}}),null!=r&&r.abortFileRead(n.id),i.default.removeSendingFile(t,n.id),(0,y.executeCommand)("sendFileBroadcastChatMessage",g.FILE_BROAD_MESSAGE_TYPES.cancelSend,E,n.name,n.size)});return o.default.createElement("div",{className:"app-file-list-item item flex-middle"},o.default.createElement(l.default,{skin:{code:n.name,pale:!0},size:30,progress:S,className:"flex-none shadow rounded-lg",icon:"mdi-file"}),o.default.createElement("div",{className:"content"},o.default.createElement("div",{className:"title text-ellipsis",title:n.name},n.name),o.default.createElement("div",{style:{flexShrink:0,paddingLeft:"4px"}},o.default.createElement("span",{className:"app-file-info","data-info":"progress"},n.status===i.RTC_FILE_STATUS.pending?p.default.string("file.rtc.waiting"):p.default.string("file.rtc.transferring")),m,o.default.createElement("span",{className:"app-file-info","data-info":"size"},n.status===i.RTC_FILE_STATUS.pending?(0,d.formatBytes)(n.size):"".concat((0,d.formatBytes)(a),"/").concat((0,d.formatBytes)(n.size))),v)),e)}C.propTypes={cgid:a.default.string.isRequired},E.propTypes={file:a.default.shape({id:a.default.string,name:a.default.string,size:a.default.number,sender:a.default.number,receiver:a.default.number,status:a.default.string,savedPath:a.default.string}).isRequired,cgid:a.default.string.isRequired,initiator:a.default.instanceOf(m.default)},E.defaultProps={initiator:null},t.ChatTransfersByRTCInitiator=(0,o.memo)(C)},4136:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ChatTransfersByRTCResponder=void 0;var o=w(n(67294)),a=b(n(45697)),i=w(n(39483)),l=b(n(7807)),u=b(n(65286)),s=b(n(24260)),c=n(15973),f=n(77925),d=b(n(74101)),p=b(n(94128)),h=n(16986),m=b(n(61862)),y=b(n(40328)),g=n(78717);function b(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=v(t))&&t.has(e))return t.get(e);var n,o,a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]);return a.default=e,t&&t.set(e,a),a}function O(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function S(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||C(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||C(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){if(e){if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n=b(n(52260));var P=p.default.isType("browser"),k=p.default.access("dialog"),j=p.default.access("fs");function x(e){var t,n,r,a=e.cgid,l=(e=_((0,o.useState)(S(null!=(e=null==(e=i.default.getReceivingFiles(a))?void 0:e.values())?e:[])),2))[0],s=e[1],c=(t=a,n=(e=_((0,o.useState)(i.default.getRTCResponder(t)),2))[0],r=e[1],(0,o.useEffect)((function(){var e=u.default.on("".concat("rtc.responder.dataChannel.status.change",".").concat(t),(function(){r(i.default.getRTCResponder(t))}));return function(){return u.default.off(e)}})),n);return(0,o.useEffect)((function(){return i.default.addReceivingFilesListener(a,(function(e){s(e)})),function(){return i.default.removeReceivingFilesListener(a)}}),[a]),l&&l.length?o.default.createElement("div",{className:"app-chat-transfers"},S(l.values()).map((function(e){return o.default.createElement(M,{cgid:a,file:e,responder:c,key:e.id})}))):null}function M(e){var t=e.cgid,n=e.file,r=e.responder,a=(e=_((0,o.useState)(null!=(e=null==r?void 0:r.getOffset(n.id))?e:0),2))[0],u=e[1],p=(e=_((0,o.useState)(null==r?void 0:r.getSpeed(n.id)),2))[0],b=e[1],v=(e=_((0,o.useState)(null==r?void 0:r.getRemainingTime(n.id)),2))[0],w=e[1],S=(e=_((0,o.useState)(0),2))[0],C=e[1],E=((0,o.useEffect)((function(){return r&&r.addReceiveProgressListener(n.id,(function(e){u(r.getOffset(n.id)),b(r.getSpeed(n.id)),w(r.getRemainingTime(n.id)),C(100*e)})),function(){return null==r?void 0:r.removeReceiveProgressListener(n.id)}})),(0,c.getCurrentUserID)()),x=d.default.getChat(t),M=(e=null,n.status===i.RTC_FILE_STATUS.pending?e=o.default.createElement("div",{style:{minWidth:48,display:"flex",justifyContent:"center",flexShrink:0,paddingLeft:"16px"}},o.default.createElement("a",{className:"btn btn-sm primary",style:{borderTopLeftRadius:"0.2rem",borderBottomLeftRadius:"0.2rem"},onClick:function(){return M(i.RTC_FILE_STATUS.accepted)}},m.default.string("file.rtc.accept")),o.default.createElement("a",{className:"btn btn-sm gray",style:{borderTopRightRadius:"0.2rem",borderBottomRightRadius:"0.2rem"},onClick:function(){return M(i.RTC_FILE_STATUS.refused)}},m.default.string("file.rtc.refuse"))):n.status===i.RTC_FILE_STATUS.accepted&&S<100&&(e=o.default.createElement("div",{style:{minWidth:48,display:"flex",justifyContent:"center",flexShrink:0,paddingLeft:"16px"}},o.default.createElement("a",{className:"btn btn-sm gray rounded",onClick:function(){return T()}},m.default.string("common.cancel")))),p=p&&n.status===i.RTC_FILE_STATUS.accepted?o.default.createElement("span",{className:"app-file-info","data-info":"size"},o.default.createElement(y.default,{name:"mdi-download",style:{display:"inline-block",verticalAlign:"middle"}}),o.default.createElement("span",{style:{display:"inline-block",verticalAlign:"middle"}},"".concat((0,h.formatBytes)(p),"/s - "))):null,v=v&&n.status===i.RTC_FILE_STATUS.accepted?o.default.createElement("span",{className:"app-file-info","data-info":"size",style:{verticalAlign:"middle"}},"- ",m.default.format("file.rtc.time",v)):null,function(){e=function*(e){if(e===i.RTC_FILE_STATUS.accepted){if(!P){var r=yield k.showSaveDialog({filename:n.name});if(!r)return;n.savedPath=r}i.default.acceptReceivingFile(t,n.id)}e===i.RTC_FILE_STATUS.refused&&(n.status="refused",i.default.removeReceivingFile(t,n.id),(0,g.executeCommand)("sendFileBroadcastChatMessage",f.FILE_BROAD_MESSAGE_TYPES.rejctReceive,x,n.name,n.size)),s.default.send({method:"datatransfer",params:{cgid:t,user:n.sender,data:JSON.stringify({type:i.RTC_TRANSFER_EVENT.receiveFilesConfirm,file:n}),userID:E}})};var e,r=function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){O(a,r,o,i,l,"next",e)}function l(e){O(a,r,o,i,l,"throw",e)}i(void 0)}))};return function(e){return r.apply(this,arguments)}}()),T=function(){var e;s.default.send({method:"datatransfer",params:{cgid:t,user:x.theOtherMemberID,data:JSON.stringify({type:i.RTC_TRANSFER_EVENT.receiveFilesCancel,file:n}),userID:E}}),i.default.removeReceivingFile(t,n.id),!P&&j.pathExistsSync("".concat(null==(e=i.default.getReceivingFile(t,n.id))?void 0:e.savedPath,".tmp"))&&j.removeFileSync("".concat(null==(e=i.default.getReceivingFile(t,n.id))?void 0:e.savedPath,".tmp")),(0,g.executeCommand)("sendFileBroadcastChatMessage",f.FILE_BROAD_MESSAGE_TYPES.cancelReceive,x,n.name,n.size)};return o.default.createElement("div",{className:"app-file-list-item item flex-middle"},o.default.createElement(l.default,{skin:{code:n.name,pale:!0},size:30,progress:S,className:"flex-none shadow rounded-lg",icon:"mdi-file"}),o.default.createElement("div",{className:"content"},o.default.createElement("div",{className:"title text-ellipsis",title:n.name},n.name),o.default.createElement("div",{style:{flexShrink:0,paddingLeft:"4px"}},o.default.createElement("span",{className:"app-file-info","data-info":"progress"},n.status===i.RTC_FILE_STATUS.pending?m.default.string("file.rtc.waiting"):m.default.string("file.rtc.transferring")),p,o.default.createElement("span",{className:"app-file-info","data-info":"size"},n.status===i.RTC_FILE_STATUS.pending?(0,h.formatBytes)(n.size):"".concat((0,h.formatBytes)(a),"/").concat((0,h.formatBytes)(n.size))),v)),e)}x.propTypes={cgid:a.default.string.isRequired},M.propTypes={file:a.default.shape({id:a.default.string,name:a.default.string,size:a.default.number,sender:a.default.number,receiver:a.default.number,status:a.default.string,savedPath:a.default.string}).isRequired,cgid:a.default.string.isRequired,responder:a.default.instanceOf(n.default)},M.defaultProps={responder:null},t.ChatTransfersByRTCResponder=(0,o.memo)(x)},85432:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=s(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=u(n(45697)),i=u(n(1528)),l=u(n(38400));function u(e){return e&&e.__esModule?e:{default:e}}function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function c(e){return(e=(0,l.default)(e.cgid)).length?o.default.createElement("div",{className:"app-chat-transfers flex flex-wrap space-between"},e.map((function(e){return o.default.createElement(i.default,{canPreview:!1,key:e.gid,file:e,className:"flex-inline x-list-item"})}))):null}c.propTypes={cgid:a.default.string.isRequired},t.default=(0,o.memo)(c)},89763:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=I(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=T(n(45697)),i=T(n(73216)),l=n(64393),u=n(7066),s=T(n(2388)),c=n(15973),f=T(n(68440)),d=T(n(45802)),p=T(n(83337)),h=T(n(77055)),m=T(n(85432)),y=T(n(74160)),g=T(n(58551)),b=T(n(86575)),v=T(n(60357)),w=T(n(74689)),O=T(n(36100)),S=T(n(84431)),_=T(n(74101)),C=n(68271),E=n(15142),P=n(12341),k=n(99500),j=n(71920),x=n(4136),M=["chatGid","hidden","className","children"];function T(e){return e&&e.__esModule?e:{default:e}}function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function A(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||N(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function L(e){var t,n=e.chatGid,r=e.hidden,a=e.className,T=e.children,I=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,M),R((0,v.default)(),1)[0]),N=(0,g.default)(),B=R((0,b.default)(n),1)[0],L=(0,o.useRef)(),F=R((0,w.default)("temp.ui.chat.showSidebar.".concat(n)),1)[0],U=($=R((0,o.useState)(""),2))[0],z=$[1],W=($=R((0,o.useState)(!1),2))[0],H=$[1],V=($=R((0,o.useState)(new Set),2))[0],G=$[1],q=(0,c.getCurrentUserID)(),$=(PERF&&(t=(0,o.useRef)(),(0,o.useEffect)((function(){t.current||(t.current=!0,PERF_MARK("openGroupChatEnd","openGroupChatBegin","openGroupChatTime")),PERF_MARK("activeChatEnd_".concat(n),"activeChatBegin_".concat(n),"activeChatTime")}))),(0,o.useCallback)((function(e){z(300<e?"lg":e<220?"sm":"")}),[]));if(!B)return o.default.createElement("div",{key:n,className:(0,l.classes)("box muted",{hidden:r})},I.string("chats.chat.selectOneOnMenu"));var K=N.isSmallerThanNormal,Y=(F=K||y.default.ui["chat.hideAllSidebar"]||!F,B.isReadonly((0,c.getCurrentUser)())),J=B.isRobot,X=(F||L.current||(L.current=!0),!Y||!B.isOne2One||null!=(X=S.default.getMember(B.theOtherMemberID))&&X.isDeleted||(B.isDeleted=!1,_.default.store(B),Y=!1,DEBUG&&console.error("The one-on-one chat was incorrectly marked as readonly.",B)),null);if(Y||B.isArchived){var Q=null;if(B.isDeletedOne2One)Q=I.string("chat.deletedOne2OneTip");else if(B.isNotInGroup)Q=I.string("chat.notInGroupTip");else if(B.isArchived)Q=I.format("chat.group.archivedTip");else if(B.isDismissed){var Z=null==(Z=(0,c.getCurrentUser)())?void 0:Z.dismissedGroupLife;if(!B.isVisible(Z))return(0,C.activeNextChatOnMenu)({lastChatGid:B.gid}),null;Q=I.format("chat.group.dismissTip",(0,u.formatDate)(B.getFinalVisibleDate(Z),I.string("time.format.full")))}else Q=I.string("chat.committers.blockedTip");X=o.default.createElement("div",{className:"column single dock white"},o.default.createElement(f.default,{cgid:n,forceHideSidebar:K,className:"flex-none"}),o.default.createElement(d.default,{gid:n,className:"flex-auto relative"}),J?null:o.default.createElement("div",{className:"flex-none gray text-gray heading"},o.default.createElement(s.default,{icon:"lock-outline"}),o.default.createElement("div",{className:"title"},Q)))}else Z=y.default.ui["chat.sendbox.enableSyncSize"]&&(0,E.getLocalConfig)("local.chat.sendbox.height.".concat(q))||y.default.ui["chat.sendbox.height"]||100,Q=(null!=(I=y.default.ui["app.windowMinHeight"])?I:548)-100,X=o.default.createElement(i.default,{split:"horizontal",primary:"second",maxSize:Q,minSize:100,defaultSize:Z,size:Z,onChange:function(e){y.default.ui["chat.sendbox.enableSyncSize"]&&(0,E.setLocalConfig)("local.chat.sendbox.height.".concat(q),e)},paneStyle:{userSelect:"none"}},o.default.createElement("div",{className:"column single dock white"},o.default.createElement(f.default,{cgid:n,forceHideSidebar:K,className:"flex-none"}),o.default.createElement(P.SelectionContext.Provider,{value:{chosen:V,selection:W,startMultiSelection:function(){W||H(!0)},onClickMultiSelection:function(e){var t=new Set(A(V));t.has(e)?t.delete(e):t.add(e),G(t)}}},o.default.createElement(d.default,{gid:n,className:"flex-auto relative"})),o.default.createElement(j.ChatTransfersByRTCInitiator,{cgid:n}),o.default.createElement(x.ChatTransfersByRTCResponder,{cgid:n}),o.default.createElement(m.default,{cgid:n}),o.default.createElement(O.default,{gid:n})),W?o.default.createElement(k.SelectionButtons,{chosen:V,endMultiSelection:function(){H(!1),G(new Set)}}):o.default.createElement(p.default,{className:"dock",chat:B,maxMentionSuggestionCount:20}));return o.default.createElement("div",D({},e,{className:(0,l.classes)("app-chat dock",a,"chat-type-".concat(B.type),{hidden:r,"chat-readonly":Y}),id:"chat-view-".concat(n.replace("&","_"))}),J?X:o.default.createElement(i.default,{className:F?"soloPane1":"",split:"vertical",primary:"second",maxSize:Math.max(360,Math.min(N.width/2,360)),minSize:175,defaultSize:175,paneStyle:{userSelect:"none"},onChange:$},X,L.current?o.default.createElement(h.default,{className:"is-size-".concat(U),chat:B}):o.default.createElement("div",null)),T)}L.propTypes={chatGid:a.default.string.isRequired,className:a.default.string,children:a.default.any,hidden:a.default.bool},L.defaultProps={className:null,children:null,hidden:!1},t.default=(0,o.memo)(L)},32196:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=b(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=g(n(45697)),i=n(64393),l=g(n(89763)),u=n(70562),s=g(n(74160)),c=n(15998),f=n(68271),d=n(40910),p=g(n(74101)),h=g(n(60357)),m=n(16986),y=["className","children","activeChatId"];function g(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e){var t=e.className,n=e.children,r=e.activeChatId,a=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,y),w((0,o.useState)({}),2)[1]),g=w((0,h.default)(),1)[0],b=((0,o.useEffect)((function(){var e=setInterval((function(){(0,c.isChatsCacheChanged)()&&a({})}),Math.floor((0,m.convertTimes)(s.default.ui["chat.cacheLife"])||u.DEFAULT_CACHE_LIFE_TIME/2));return function(){return clearInterval(e)}}),[r]),(0,o.useEffect)((function(){s.default.ui["chat.autoActiveNextChat"]&&(0,d.isRoutePathMatch)("chats")&&p.default.isReady&&(r&&p.default.getChat(r)?r!==(0,f.getActiveChatGid)()&&(0,f.setActiveChat)(r):(0,f.activeNextChatOnMenu)())})),(0,o.useEffect)((function(){return p.default.unsubscribeChatsReadyEvent.bind(p.default,p.default.subscribeChatsReadyEvent((function(){return a({})})))}),[]),(0,c.getActivatedCacheChatsGID)(r));return o.default.createElement("div",v({},e,{className:(0,i.classes)("app-chats-cache",t)}),b.length?b.map((function(e){return e?o.default.createElement(l.default,{key:e,chatGid:e,hidden:r!==e}):null})):o.default.createElement("div",{className:"has-padding text-gray dock white"},g.string("chats.chat.selectOneOnMenu")),n)}S.propTypes={className:a.default.string,children:a.default.any,activeChatId:a.default.string},S.defaultProps={className:null,children:null,activeChatId:null},t.default=(0,o.memo)(S)},18263:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=m(n(67294)),a=p(n(45697)),i=n(64393),l=m(n(61862)),u=n(15998),s=p(n(65286)),c=p(n(10352)),f=n(78717),d=["className"];function p(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=h(t))&&t.has(e))return t.get(e);var n,o,a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]);return a.default=e,t&&t.set(e,a),a}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v(e);if(n=t?(n=v(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return b(o)}}(a);function a(e){var t;if(this instanceof a)return w(b(t=n.call(this,e)),"handleDragComplete",(function(){document.body.classList.remove("drag-n-drop-over-in"),setTimeout((function(){document.body.classList.remove("drag-n-drop-over"),t.setState({dragging:!1})}),350)})),w(b(t),"handleDndEnter",(function(e){e.target.classList.add("hover")})),w(b(t),"handleDndLeave",(function(e){e.target.classList.remove("hover")})),w(b(t),"handleDndDrop",(function(e){if(e.target.classList.remove("hover"),window.navigator.userAgent.toLowerCase().includes("firefox")&&(e.stopPropagation(),e.preventDefault(),t.handleDragComplete(e)),e.dataTransfer.files){for(var n=0;n<e.dataTransfer.items.length;n++){var r=e.dataTransfer.items[n],o=void 0;if(r.webkitGetAsEntry)o=r.webkitGetAsEntry();else{if(!r.getAsEntry)break;o=r.getAsEntry()}if(o.isDirectory)return void(0,f.executeCommand)("showMessager",l.default.error("UPLOAD_FOLDER_NOT_SUPPORTED"),{type:"warning"})}(0,u.sendFilesToChat)(e.dataTransfer.files)}})),t.state={dragging:!1},t;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"componentDidMount",value:function(){var e=this;this.onLangChangeHandler=(0,l.onLangChange)((function(){e.forceUpdate()})),window.ondragover=function(t){return e.state.dragging||e.setState({dragging:!0}),clearTimeout(e._dragLeaveTask),t.dataTransfer&&t.dataTransfer.types.includes("Files")&&(document.body.classList.add("drag-n-drop-over"),setTimeout((function(){document.body.classList.add("drag-n-drop-over-in")}),10)),t.preventDefault(),!1},window.ondragleave=function(t){return clearTimeout(e._dragLeaveTask),e._dragLeaveTask=setTimeout(e.handleDragComplete,300),t.preventDefault(),!1},window.ondrop=function(t){return clearTimeout(e._dragLeaveTask),e.handleDragComplete(),DEBUG&&(console.collapse("DRAG FILE","redBg",t.dataTransfer&&t.dataTransfer.files&&t.dataTransfer.files.length?t.dataTransfer.files[0].path:"","redPale"),console.log(t),console.groupEnd()),t.preventDefault(),t.target.closest(".display-backdrop.clean")&&e.handleDndDrop(t),!1}}},{key:"componentWillUnmount",value:function(){s.default.off(this.onLangChangeHandler),clearTimeout(this._dragLeaveTask),window.ondragover=null,window.ondragleave=null,window.ondrop=null}},{key:"render",value:function(){var e=(t=this.props).className,t=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(t,d);return this.state.dragging?o.default.createElement("div",y({className:(0,i.classes)("app-chats-dnd-container drag-n-drop-message center-content",e)},t,{onDragEnter:this.handleDndEnter,onDrop:this.handleDndDrop,onDragLeave:this.handleDndLeave}),o.default.createElement("div",{className:"text-center"},o.default.createElement(c.default,{className:"dnd-over",name:":hatching_chick:"}),o.default.createElement(c.default,{className:"dnd-hover",name:":hatched_chick:"}),o.default.createElement("h1",null,l.default.string("chats.dragNDropFileMessage")))):null}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.PureComponent),w(t.default=n,"propTypes",{className:a.default.string}),w(n,"defaultProps",{className:null})},42809:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showChatsHistoryDialog=t.default=void 0;var r=i(n(67294)),o=n(52133),a=i(n(38355));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n={show:t.showChatsHistoryDialog=function(e,t){return e&&"object"===l(e)&&(e=e.gid),(0,o.showModal)({id:"app-chats-history-dialog",style:{left:10,right:10,bottom:0,top:20},className:"app-chats-history-dialog dock primary-pale",animation:"enter-from-bottom",actions:!1,content:r.default.createElement(a.default,{cgid:e})},t)}},t.default=n},88478:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=g(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=y(n(45697)),i=n(64393),l=y(n(93956)),u=y(n(74379)),s=y(n(40328)),c=y(n(60357)),f=y(n(14393)),d=y(n(18033)),p=n(98649),h=n(23405),m=["className","onSearchChange","searchingTip","searchProgress","searchKeys","searchTimeFilter","searchTypeFilter","searchFileTypeFilter","searching","selectedChat"];function y(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e){var t=e.className,n=e.onSearchChange,r=e.searchingTip,a=e.searchProgress,y=e.searchKeys,g=e.searchTimeFilter,w=e.searchTypeFilter,O=e.searchFileTypeFilter,S=(e.searching,e.selectedChat),_=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,m),(E=v((0,o.useState)("currentChat"),2))[0]),C=E[1],E=v((0,c.default)(),1)[0],P=(k=(0,f.default)()).fetching,k=k.progress,j=(0,o.useCallback)((function(e){n&&n("keys",e)}),[n]),x=(0,o.useCallback)((function(e){n&&n("time",e)}),[n]),M=(0,o.useCallback)((function(e){n&&n("type",e)}),[n]),T=(0,o.useCallback)((function(e){n&&n("filetype",e)}),[n]),I=[{label:E.string("time.oneWeek"),value:"oneWeek"},{label:E.string("time.oneMonth"),value:"oneMonth"},{label:E.string("time.threeMonth"),value:"threeMonth"},{label:E.string("time.halfYear"),value:"halfYear"},{label:E.string("time.oneYear"),value:"oneYear"},{label:E.string("time.all"),value:""}],D=[{label:E.string("chats.history.search.type.choosed"),value:"choosed"},{label:E.string("chats.history.search.type.contacts"),value:"contacts"},{label:E.string("chats.history.search.type.groups"),value:"groups"},{label:E.string("chats.history.search.type.all"),value:""}],A=[{label:E.string("chats.history.search.filetype.all"),value:""},{label:E.string("chats.history.search.filetype.image"),value:"[image]"},{label:E.string("chats.history.search.filetype.file"),value:"[file]"}];return o.default.createElement("div",b({className:(0,i.classes)("app-chats-history-header heading",t)},e),o.default.createElement("div",{className:"flex-none title"},E.string("chats.history.title")),o.default.createElement("div",{className:"flex-auto search-control row flex-middle"},o.default.createElement(l.default,{disabled:P,changeDelay:500,defaultValue:y,onSearchChange:j,placeholder:E.string("chats.history.search.placeholder")},o.default.createElement(u.default,{value:w,onChange:M,options:D,className:"search-box-type dock dock-right small",selectClassName:"rounded"}),o.default.createElement(u.default,{value:g,onChange:x,options:I,className:"search-box-time dock dock-right small",selectClassName:"rounded"}),o.default.createElement(u.default,{value:O,onChange:T,options:A,className:"search-box-filetype dock dock-right small",selectClassName:"rounded"})),r?o.default.createElement("div",{className:"search-control-tip"},o.default.createElement("small",{className:"muted"},r),o.default.createElement("div",{className:"progress"},o.default.createElement("div",{className:"bar",style:{width:"".concat(a,"%")}}))):null),o.default.createElement("nav",{className:"flex-none nav hint--bottom-right","data-hint":E.string("chats.history.fetchAllFromServer")},P?o.default.createElement("a",{onClick:h.abortSyncHistory},o.default.createElement(s.default,{name:"sync spin"})," ",o.default.createElement("small",null,E.string("chats.history.fetchingMessages")," ",Math.floor(k),"%")):o.default.createElement("a",{href:"xxc://showContextMenu/chats.history.fetchAllButton".concat("allChats"===_?"":"/".concat(S)),className:"text-primary"},o.default.createElement(s.default,{name:"cloud-sync"}),"  ",E.string("chats.history.fetchAll"),o.default.createElement(d.default,{className:"rounded app-chats-menu-type-btn",style:{padding:0,minWidth:"auto"},onClick:function(e){var t=e.target.closest(".btn");(0,p.showContextMenu)("chats.sync.type.menu",{event:e,setChatType:C,chatType:_,options:{preventDefault:!0,stopPropagation:!0,position:{direction:"below-left",triggerElement:t}}})}},o.default.createElement(s.default,{name:"chevron-down"})))))}O.propTypes={className:a.default.string,onSearchChange:a.default.func,searchingTip:a.default.string,searchProgress:a.default.number,searchKeys:a.default.string,searchTimeFilter:a.default.string,searchTypeFilter:a.default.string,searching:a.default.bool,selectedChat:a.default.string,searchFileTypeFilter:a.default.string},O.defaultProps={className:null,onSearchChange:null,searchingTip:null,searchProgress:null,searchKeys:"",searchTimeFilter:"oneMonth",searchTypeFilter:"choosed",searching:!1,selectedChat:"",searchFileTypeFilter:""},t.default=(0,o.memo)(O)},62155:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=d(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=f(n(45697)),i=n(64393),l=f(n(2388)),u=f(n(60357)),s=f(n(74101)),c=f(n(85091));function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e){var t=e.className,n=e.searchResultMap,r=e.searchTypeFilter,a=e.selectedChat,f=e.onSelectChat,d=y((0,u.default)(),1)[0],p=(e=y((0,o.useState)((function(){if(!a)return{contacts:!1,groups:!0,others:!1};var e,t={contacts:!1,groups:!1,others:!1};return a.includes("&")?(e=a.split("&"),Number.isNaN(+e[1])?t.others=!0:t.contacts=!0):t.groups=!0,t})),2),e[0]),g=e[1],b=(0,o.useCallback)((function(e){(e=e.target.closest("[data-group]"))&&(e=e.attributes["data-group"].value,g(h(h({},p),{},m({},e,!p[e]))))}),[p]),v=(0,o.useCallback)((function(e){(e=e.target.closest(".app-chat-item"))&&f&&f(e.attributes["data-gid"].value)}),[f]),w="groups"===r||"contacts"===r,O=n&&n.size;return o.default.createElement("div",{className:(0,i.classes)("app-chats-history-menu primary-pale overflow-y-auto",t)},["groups","contacts","others"].map((function(e){if(O&&w&&r!==e)return null;var t,i=!(!O||""!==r)||p[e],u=[];switch(e){case"groups":t=s.default.getGroupsChats();break;case"contacts":t=s.default.getPrivateChats();break;case"others":t=s.default.getBotChats();break;default:t=[]}return!i||(t.forEach((function(e){var t,i=e.gid,l=e.mergedChats;(r&&!w||!O||n.has(i)||l.some((function(e){return n.has(e)})))&&(l=i===a,t=O&&n.has(i)?n.get(i):0,O&&e.mergedChats.forEach((function(e){n.has(e)&&(t+=n.get(e))})),e=t?o.default.createElement("div",{className:"label accent circle"},t):null,u.push(o.default.createElement(c.default,{"data-gid":i,key:i,badge:e,className:l?"item active":"item",gid:i})))})),r||u.length)?o.default.createElement("div",{key:e,className:"app-chats-history-menu-group"},o.default.createElement("a",{className:"heading","data-group":e,onClick:b},o.default.createElement(l.default,{className:"text-ellipsis",icon:i?"menu-down":"menu-right"}),o.default.createElement("div",{className:"text-ellipsis"},d.string("chats.history.group.".concat(e)),t.length?" (".concat(t.length,")"):"")),u.length?o.default.createElement("div",{className:"app-chats-history-menu-list list compact",onClick:v},u):null):null})))}b.propTypes={className:a.default.string,searchResultMap:a.default.instanceOf(Map),searchTypeFilter:a.default.string,selectedChat:a.default.string,onSelectChat:a.default.func},b.defaultProps={className:null,searchResultMap:null,searchTypeFilter:null,selectedChat:null,onSelectChat:null},t.default=(0,o.memo)(b)},38355:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=y(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=m(n(45697)),i=n(64393),l=n(16986),u=m(n(60357)),s=m(n(88478)),c=m(n(62155)),f=m(n(82871)),d=m(n(16537)),p=m(n(80797)),h=["className","cgid"];function m(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e){var t,n=e.className,r=e.cgid,a=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,h),b((0,u.default)(),1)[0]),m=(r=b((0,o.useState)(r),2))[0],y=(r=r[1],(x=b((0,o.useState)(""),2))[0]),v=x[1],w=(x=b((0,o.useState)("oneMonth"),2))[0],O=x[1],S=(x=b((0,o.useState)("choosed"),2))[0],_=x[1],C=(x=b((0,o.useState)(""),2))[0],E=x[1],P=(x=(0,p.default)("".concat(y," ").concat(C),"choosed"===S?m:S,{dateRange:w,returnType:"count"})).searchResult,k=x.searching,j=x.searchingChats,x=x.searchProgress,M=0;return P=P?P.reduce((function(e,t){return t.count&&(e.set(t.gid,t.count),M+=t.count),e}),new Map):null,((0,l.isNotEmptyString)(y)||(0,l.isNotEmptyString)(C))&&100===x?t=a.format("chats.history.search.result.format",M):k&&(t=(t=j&&j.length?a.format("chats.history.searching.format",j.length):t)||a.string("chats.history.searching")),j=null,j=m?(0,l.isNotEmptyString)(y)||(0,l.isNotEmptyString)(C)?o.default.createElement(d.default,{className:"flex-auto white",cgid:m,searchKeys:"".concat(y," ").concat(C),timeFilter:w}):o.default.createElement(f.default,{className:"flex-auto white",cgid:m}):o.default.createElement("div",{className:"flex-auto center-content muted"},o.default.createElement("div",null,a.string("chats.history.selectChatTip"))),o.default.createElement("div",g({className:(0,i.classes)("app-chats-history dock column single",n)},e),o.default.createElement(s.default,{className:"flex-none",onSearchChange:function(e,t){("time"===e?O:"type"===e?_:"filetype"===e?E:v)(t)},searchKeys:y,searchTimeFilter:w,searchTypeFilter:S,searchFileTypeFilter:C,searchProgress:x,searching:k,searchingTip:t,selectedChat:m}),o.default.createElement("div",{className:"app-chats-history-content flex-auto row single overflow-auto"},o.default.createElement(c.default,{className:"flex-none",selectedChat:m,onSelectChat:r,searchTypeFilter:S,searchResultMap:P}),j))}w.propTypes={className:a.default.string,cgid:a.default.string},w.defaultProps={className:null,cgid:null},t.default=(0,o.memo)(w)},13011:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=v;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=d(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=(t=f(n(45697)),f(n(61862))),i=n(64393),l=f(n(40328)),u=f(n(91705)),s=f(n(64208)),c=f(n(26774));function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e){return e.title?e:{title:e.name,type:"group",id:e.id,list:e.children}}function v(e){var t=e.className,n=e.onSelectMenuItem,r=(e=m((0,o.useState)("recents"),2))[0],f=e[1],d=(e=m((0,o.useState)(!0),2))[0],y=e[1],g=(e=m((0,o.useState)(null),2))[0],v=e[1],w=((0,o.useEffect)((function(){function e(){var t;return t=function*(){y(!0);var e=yield c.default.fetchDeptsTree();v(e),y(!1)},(e=function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){h(a,r,o,i,l,"next",e)}function l(e){h(a,r,o,i,l,"throw",e)}i(void 0)}))}).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,o.useCallback)((function(e){f(e),n&&n(e)}),[n])),O=(e=(0,o.useCallback)((function(e,t){if(e.root&&!e.title)return null;var n=t.isExpand?"chevron-down":"chevron-right";return o.default.createElement("a",{onClick:w.bind(null,e.id),className:(0,i.classes)("heading",{"primary-pale":e.id===r})},o.default.createElement(l.default,{onClick:t.handleHeadingClick,name:n,className:(0,i.classes)("state circle",{invisible:!e.list||!e.list.length})}),o.default.createElement("div",{className:(0,i.classes)("title",{"text-primary":e.id===r})},e.title))}),[w,r]),{root:!0,list:[{id:"recents",title:a.default.string("chat.menu.recents"),onClick:w.bind(null,"recents"),className:"recents"===r?"primary-pale text-primary menu-recents":"menu-recents"},{id:"groups",title:a.default.string("chat.menu.groups"),onClick:w.bind(null,"groups"),className:"groups"===r?"primary-pale text-primary menu-groups":"menu-groups"},{id:"contacts",type:"group",title:a.default.string("chat.menu.contacts"),list:[]}]});return d?O.list[2].list.push(o.default.createElement(u.default,null)):g&&(d=O.list[2].list).push.apply(d,p(g)),o.default.createElement(s.default,{className:"compact",rootClassName:(0,i.classes)("app-depts-tree",t),group:O,hideEmptyGroup:!1,itemConverter:b,headingCreator:e,defaultExpand:!0,toggleWithHeading:!1})}v.defaultProps={className:null,onSelectMenuItem:null},v.propTypes={className:t.default.string,onSelectMenuItem:t.default.func}},12699:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==v(e)&&"function"!=typeof e)return{default:e};if((t=g(t))&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(n(67294)),o=y(n(45697)),a=n(33417),i=n(15973),l=y(n(74101)),u=y(n(84431)),s=y(n(63318)),c=y(n(62031)),f=n(64393),d=y(n(91705)),p=y(n(61862)),h=y(n(26774)),m=y(n(85091));function y(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){w(a,r,o,i,l,"next",e)}function l(e){w(a,r,o,i,l,"throw",e)}i(void 0)}))}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(n=t?(n=C(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,n&&("object"===v(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=y;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e);var n,o=_(y);function y(){var e;if(this instanceof y)return(e=o.call(this)).state={page:1,loading:!1,list:null,recTotal:0,searchResult:[]},e;throw new TypeError("Cannot call a class as a function")}return t=y,(e=[{key:"componentDidMount",value:function(){this.loadNextPage(!0)}},{key:"componentDidUpdate",value:function(e){this.props.searchValue!==e.searchValue&&this.loadNextPage(!0),this.props.type!==e.type&&this.loadNextPage(!0)}},{key:"componentWillUnmount",value:function(){this._unmounted=!0}},{key:"getTotalPage",value:function(){return this.props.recPerPage?Math.ceil(this.state.recTotal/this.props.recPerPage):0}},{key:"hasNextPage",value:function(){return 0<this.state.recTotal&&this.state.page<this.getTotalPage()}},{key:"searchMembers",value:function(){var e=(t=this.props).searchValue,t=t.type;return""===e?Promise.resolve([]):"groups"===t?l.default.searchChats(e,{chatType:"groups",excludeMemberIdList:!1,includeReadonly:!1}):"recents"===t?l.default.searchChats(e,{chatType:"",excludeMemberIdList:!1,includeReadonly:!1}):u.default.searchFromRemote(e,{dept:"contacts"===t?0:t})}},{key:"loadOptions",value:(n=O((function*(){var e=(t=this.props).type,t=t.recPerPage,n=(r=this.state).recTotal,r=r.page;return"contacts"===e||"number"==typeof e?h.default.fetchMembersListOfDept("contacts"===e?0:e,{pageID:n?r+1:1,recPerPage:t}):(n=n?r+1:r,{data:(e="groups"===e?l.default.getGroupsChats("recentFirst",!1,!1):l.default.getRecentChats({includeStar:!0,sortList:"recentFirst",excludeSystemChats:!1,includeReadonly:!1,maxRecentTime:0})).slice(t*(n-1),t*n),pager:{pageID:n,recTotal:e.length,recPerPage:t}})})),function(){return n.apply(this,arguments)})},{key:"loadNextSearchPage",value:function(e){var t=this;e?this.setState({loading:!0,searchResult:[],recTotal:0,page:1,list:null},O((function*(){var e,n=(r=t.props).recPerPage,r=r.type,o=t.state.list;try{e="groups"===r||"recents"===r?yield t.searchMembers():(yield t.searchMembers()).map((function(e){return e.id}))}catch(r){e=[],console.error("Search members from server error",r)}t._unmounted||t.setState({loading:!1,searchResult:e,recTotal:e.length,page:1,list:(o||[]).concat(e.slice(0,n))})}))):this.setState((function(e,t){return{page:e.page+1,list:(e.list||[]).concat(e.searchResult.slice(t.recPerPage*e.page,t.recPerPage*(e.page+1)))}}))}},{key:"loadNextNoSearchPage",value:function(e){var t=this;e=e?{recTotal:0,page:1,list:null}:{},Object.assign(e,{loading:!0}),this.setState(e,O((function*(){var e=t.state.list,n=(r=yield t.loadOptions()).pager,r=r.data;t._unmounted||t.setState({loading:!1,recTotal:n.recTotal,page:n.pageID,list:(e||[]).concat(r)})})))}},{key:"loadNextPage",value:function(e){""===this.props.searchValue?this.loadNextNoSearchPage(e):this.loadNextSearchPage(e)}},{key:"renderOptionItem",value:function(e,t,n){if("number"==typeof e)return o=(0,a.getOne2OneChatGid)(e),e===(0,i.getCurrentUserID)()||n&&n.has(o)?null:r.default.createElement(c.default,{memberID:e,key:e,onClick:this.props.onClickChat.bind(null,o)},r.default.createElement("div",{className:(0,f.classes)("checkbox checkbox-sm",{checked:t.has(o)})},r.default.createElement("label",null)));var o="object"===v(e)?e.gid:e;return n&&n.has(o)?null:r.default.createElement(m.default,{gid:o,key:o,onClick:this.props.onClickChat.bind(null,o),showStatusDot:!0},r.default.createElement("div",{className:(0,f.classes)("checkbox checkbox-sm",{checked:t.has(o)})},r.default.createElement("label",null)))}},{key:"render",value:function(){var e=(t=this.props).selections,t=t.excludes,n=[],o=(l=this.state).page,a=l.loading,i=l.list,l=l.recTotal;if(o&&i){var u,c=new Set(e),f=t?new Set(t):null,h=function(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}(i);try{for(h.s();!(u=h.n()).done;){var m=u.value,y=this.renderOptionItem(m,c,f);y&&n.push(y)}}catch(t){h.e(t)}finally{h.f()}}return a?n.push(r.default.createElement(d.default,{key:"spinner"})):0===l?n.push(r.default.createElement(s.default,{key:"notFound",icon:"information-outline",className:"flex-middle item muted disabled",title:r.default.createElement("span",{className:"title small"},p.default.string("common.notFoundOptions"))})):this.hasNextPage()&&(o=p.default.string("common.loadMore"),n.push(r.default.createElement(s.default,{key:"loadMore",icon:"chevron-double-down",className:"flex-middle item muted",title:r.default.createElement("span",{className:"title small"},o),onClick:this.loadNextPage.bind(this,!1)}))),r.default.createElement("div",{className:"list compact"},n)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),y}(r.PureComponent),E(t.default=n,"propTypes",{selections:o.default.array,excludes:o.default.array,onClickChat:o.default.func,recPerPage:o.default.number,type:o.default.oneOfType([o.default.number,o.default.string]),searchValue:o.default.string}),E(n,"defaultProps",{selections:[],excludes:null,onClickChat:null,recPerPage:20,type:"recents",searchValue:""})},22852:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.showChatsSelectDialog=t.default=t.ChatsSelectDialog=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=g(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=y(n(45697)),i=y(n(61862)),l=y(n(52133)),u=y(n(40328)),s=y(n(36940)),c=y(n(62031)),f=y(n(61997)),d=y(n(85091)),p=y(n(93956)),h=y(n(12699)),m=y(n(13011));function y(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var S=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=w(e);if(n=t?(n=w(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return v(o)}}(a);function a(e){var t;if(this instanceof a)return O(v(t=n.call(this,e)),"handleChatMenuSelect",(function(e){t.setState({menuType:e})})),O(v(t),"handleClickChat",(function(e){var n=new Set(t.state.selections);n.has(e)?n.delete(e):n.add(e),t.setState({selections:Array.from(n)})})),O(v(t),"handleClickPrimaryBtn",(function(){t.props.onFinish&&t.props.onFinish(t.state.selections)})),O(v(t),"handleSearchChange",(function(e){t.setState({searchValue:e})})),t.state={selections:e.selections||[],menuType:"recents",searchValue:""},t;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"render",value:function(){return o.default.createElement("div",{className:"app-chats-select app-select-panel column single dock"},this.props.header?o.default.createElement("header",{className:"dock-top app-select-panel-header flex-none"},this.props.header):null,o.default.createElement("div",{className:"flex-auto app-select-panel-body relative"},o.default.createElement("div",{className:"dock-left single column divider-right",style:{width:200,paddingLeft:10,paddingTop:10}},o.default.createElement("header",{className:"flex-none heading"},o.default.createElement("div",{className:"title text-gray bold"},i.default.string("chat.create.filterByDept"))),o.default.createElement("div",{className:"flex-auto overflow-y-auto"},o.default.createElement(m.default,{onSelectMenuItem:this.handleChatMenuSelect}))),o.default.createElement("div",{className:"dock single column divider-right",style:{left:200,width:200,paddingLeft:10,paddingRight:10,paddingTop:10}},o.default.createElement("header",{className:"flex-none"},o.default.createElement("div",{className:"title text-gray bold",style:{padding:"0.5rem 0"}},this.props.selectTip||i.default.string("chat.create.groupsTip")),o.default.createElement(p.default,{placeholder:i.default.string("chats.search.recents"),onSearchChange:this.handleSearchChange,style:{marginBottom:6},changeDelay:500})),o.default.createElement("div",{className:"flex-auto overflow-y-auto"},o.default.createElement(h.default,{type:this.state.menuType,excludes:this.props.excludes,selections:this.state.selections,onClickChat:this.handleClickChat,searchValue:this.state.searchValue}))),o.default.createElement("div",{className:"dock-right single column",style:{width:200,paddingLeft:10,paddingRight:10,paddingTop:10}},o.default.createElement("header",{className:"flex-none heading space-sm"},o.default.createElement("div",{className:"title strong text-primary"},i.default.string("chat.invite.choosed")," (",this.state.selections.length,")")),o.default.createElement("div",{className:"list compact overflow-y-auto"},this.state.selections.map(function(e,t){return"number"==typeof t?o.default.createElement(c.default,{memberID:t,key:t,onClick:e.bind(null,t)},o.default.createElement(u.default,{name:"sprite-selection-remove"})):o.default.createElement(d.default,{gid:t,key:t,grayOffline:!1,onClick:e.bind(null,t)},o.default.createElement(u.default,{name:"sprite-selection-remove"}))}.bind(null,this.handleClickChat))))),o.default.createElement(s.default,{className:"flex-none divider-top text-center has-padding-lg",onClickPrimary:this.state.selections&&this.state.selections.length?this.handleClickPrimaryBtn:null,onClickCancel:this.props.onFinish.bind(null,[])}))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.PureComponent);O(t.ChatsSelectDialog=S,"propTypes",{selections:a.default.arrayOf(a.default.string),excludes:a.default.arrayOf(a.default.string),onFinish:a.default.func,selectTip:a.default.string,header:a.default.any}),O(S,"defaultProps",{selections:null,excludes:null,onFinish:null,selectTip:null,header:null}),n={show:t.showChatsSelectDialog=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=e.selections,r=e.excludes,a=e.selectTip;return new Promise((function(e){var i=(0,f.default)();l.default.show({id:i,actions:!1,closeButton:!1,style:{width:600,height:500},content:o.default.createElement(S,{onFinish:function(t){l.default.hide(i),e(t)},selections:n,excludes:r,selectTip:a})},t)}))}},t.default=n},73002:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showConfirmSendFilesDialog=t.default=void 0;var r=c(n(67294)),o=c(n(2388)),a=n(52133),i=c(n(61862)),l=c(n(83532)),u=n(16986),s=n(73543);function c(e){return e&&e.__esModule?e:{default:e}}n={show:t.showConfirmSendFilesDialog=function(e,t,n){return t=r.default.createElement("div",null,r.default.createElement("div",{className:"list"},e.map((function(e){var t=e.name,n=e.extName;return r.default.createElement("div",{className:"item row flex-middle single",key:t},r.default.createElement(o.default,{skin:{code:n,pale:!0},className:"flex-none",icon:(0,l.default)(n)}),r.default.createElement("div",{className:"sub-content"},r.default.createElement("div",{className:"title"},t),r.default.createElement("span",{className:"muted small"},(0,u.formatBytes)(e.size))))}))),t&&r.default.createElement("div",{style:{color:"#A3A2BC",fontSize:12,padding:"0.5rem"}},i.default.string("file.upload.large.tip")),t&&r.default.createElement(s.P2pCheckbox,{isSizeLimit:t})),(0,a.showConfirm)(t,{title:r.default.createElement("strong",null,i.default.format("chat.confirmSendFiles.format",e.length))},n)}},t.default=n},15116:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showConfirmSendModeDialog=void 0;var r=f(n(67294)),o=f(n(45697)),a=f(n(2388)),i=n(52133),l=f(n(61862)),u=f(n(83532)),s=n(16986),c=n(73543);function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n){var o=t.isMe;return t=t.useP2p,o=r.default.createElement("div",null,r.default.createElement("div",{className:"list"},e.map((function(e){var t=e.name,n=e.extName;return r.default.createElement("div",{className:"item row flex-middle single",key:t},r.default.createElement(a.default,{skin:{code:n,pale:!0},className:"flex-none",icon:(0,u.default)(n)}),r.default.createElement("div",{className:"sub-content"},r.default.createElement("div",{className:"title"},t),r.default.createElement("span",{className:"muted small"},(0,s.formatBytes)(e.size))))}))),o?null:r.default.createElement(c.P2pCheckbox,{isSizeLimit:!1,canUseP2p:t})),(0,i.showConfirm)(o,{title:r.default.createElement("strong",null,l.default.format("chat.confirmSendFiles.format",e.length))},n)}(t.showConfirmSendModeDialog=d).propTypes={isMe:o.default.bool,useP2p:o.default.bool},d.defaultProps={isMe:!1,useP2p:!0}},80097:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=z(n(45508)),a=U(n(82847)),i=U(n(99270)),l=z(n(66290)),u=U(n(32286)),s=z(n(89763)),c=z(n(7290)),f=z(n(32196)),d=U(n(68232)),p=z(n(18263)),h=U(n(42809)),m=z(n(38355)),y=z(n(68440)),g=z(n(82871)),b=z(n(44884)),v=U(n(14992)),w=z(n(10737)),O=z(n(3578)),S=z(n(50618)),_=z(n(63689)),C=z(n(85091)),E=z(n(84662)),P=z(n(19239)),k=z(n(89971)),j=z(n(13409)),x=z(n(83337)),M=z(n(73665)),T=z(n(28091)),I=z(n(73404)),D=z(n(67804)),A=z(n(7149)),R=z(n(6633)),N=z(n(17253)),B=z(n(77055)),L=U(n(16451));function F(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(F=function(e){return e?n:t})(e)}function U(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=F(t))&&t.has(e))return t.get(e);var n,o,a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]);return a.default=e,t&&t.set(e,a),a}function z(e){return e&&e.__esModule?e:{default:e}}n=U(n(86033)),o={ChatAvatar:o.default,ChatTipPopover:a,ChatChangeFontPopover:i,ChatTitle:l.default,ChatCommittersSettingDialog:u,ChatView:s.default,ChatCommittersSetting:c.default,ChatsCache:f.default,ChatCreateDialog:d,ChatsDndContainer:p.default,ChatsHistoryDialog:h,ChatsHistory:m.default,ChatHeader:y.default,ChatHistory:g.default,Index:b.default,ChatInviteDialog:v,MenuSearchList:w.default,MenuList:O.default,ChatJoinPublic:S.default,Menu:_.default,ChatListItem:C.default,MessageBroadcast:E.default,ChatMessages:P.default,MessageContentFile:k.default,MessageContentMedia:j.default,ChatSendbox:x.default,MessageContentText:M.default,ChatSidebarFiles:T.default,MessageDivider:I.default,ChatSidebarPeoples:D.default,MessageListItem:A.default,ChatSidebarProfile:R.default,MessageList:N.default,ChatSidebar:B.default,MessagesPreviewDialog:L,ChatShareDialog:n},t.default=o},44884:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=m(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=h(n(45697)),i=(n(39711),h(n(73216)),n(64393)),l=n(68271),u=h(n(63689)),s=h(n(32196)),c=h(n(18263)),f=(h(n(58551)),h(n(74101))),d=h(n(39450)),p=h(n(71891));function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}var y=(0,d.default)((function(){var e=(0,l.getActiveChatGid)();e&&f.default.muteChatUnreadMessages(e)&&DEBUG&&console.error("tryMuteActiveChat works",e)}),1e3);function g(e){var t=e.hidden,n=e.className,r=(e=e.match,(0,o.useRef)()),a=0===(a=(0,p.default)().current).indexOf("#/chats/")&&!!a.split("/")[3],f=(e=e.params).filterType;return e=e.id,f||(r.current?f=r.current:r.current=f="recents"),e=e||(0,l.getActiveChatGid)(),o.default.createElement("div",{className:(0,i.classes)("dock app-chats",n,{hidden:t}),onClick:y},o.default.createElement(s.default,{className:(0,i.classes)("dock",{hidden:!a}),activeChatId:e},o.default.createElement(c.default,{className:"dock"})),o.default.createElement(u.default,{className:"dock",filterType:f,activeChatId:e}))}g.propTypes={match:a.default.object.isRequired,hidden:a.default.bool,className:a.default.string},g.defaultProps={hidden:!1,className:null},t.default=(0,o.memo)(g)},27844:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=A(n(67294)),a=I(n(45697)),i=n(39711),l=n(64393),u=n(16986),s=I(n(2388)),c=I(n(40328)),f=n(61862),d=n(15973),p=A(n(92691)),h=n(20116),m=n(14227),y=I(n(85110)),g=n(45508),b=I(n(86575)),v=I(n(27149)),w=I(n(60357)),O=I(n(32687)),S=I(n(20155)),_=I(n(84431)),C=I(n(73052)),E=I(n(65286)),P=n(40910),k=I(n(94128)),j=I(n(99981)),x=I(n(36043)),M=I(n(367)),T=["gid","filterType","className","children","showAvatar","hideOnLoading"];function I(e){return e&&e.__esModule?e:{default:e}}function D(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(D=function(e){return e?n:t})(e)}function A(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=D(t))&&t.has(e))return t.get(e);var n,o,a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]);return a.default=e,t&&t.set(e,a),a}function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function L(e){var t=e.gid,n=e.filterType,r=e.className,a=e.children,I=e.showAvatar,D=e.hideOnLoading,A=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,T),N((0,b.default)(t),1)[0]),B=(0,M.default)(t),L=(0,x.default)(t),F=(0,v.default)(t),U=N((0,w.default)(),1)[0],z=(0,o.useRef)(D),W=null==A?void 0:A.draft,H=!!W;if((0,O.default)(),(0,o.useEffect)((function(){if(D)return E.default.off.bind(E.default,(0,d.onSwapUser)((function(){z.current=!0})))}),[D]),!A)return null;if(z.current){var V=!(V=A).isOne2One||(G=_.default.getMember(V.theOtherMemberID),(0,u.isNotEmptyString)(V.name)&&G);if(z.current=!V,!V)return null}var G=A.lastMessageInfo,q=(V=A.fileSavedNoticeCount,A.name),$=((0,P.isRoutePathMatch)("chats","*",t)&&(H=!1,B&&k.default.call("ui.isWindowFocus")&&(B=0)),t=null,!I&&0<B&&(t=o.default.createElement("span",{className:"label red circle label-xs"},99<B?"99+":B)),A.isNotification&&G?(0,f.describeDateFromNow)(G.date):(0,f.describeDateFromNow)(A.lastActiveTime)),K=(q=o.default.createElement("div",{className:"title"},o.default.createElement("span",{className:(0,l.classes)("text text-ellipsis text-black",(0,u.isEmptyString)(q)?"loading-holder relative loading-holder-line":"")},q,A.mute&&o.default.createElement(c.default,{name:"bell-off",className:"muted icon-sm"}),t),G&&o.default.createElement("small",{className:"time"},$),!G&&A.star?o.default.createElement(c.default,{name:"pin",size:12,className:"star-icon time"}):null),t="",$=null,L?(0,m.getConferenceStatusName)(L):null),Y=(0,d.getCurrentUser)(),J=(Y=!!L&&Y.config.useInitConference&&L.isOne2One&&L.cgid==="".concat(Y.id,"&").concat(Y.id),(Y=K&&"closed"!==K&&"ignored"!==K&&!Y)&&(J=(0,m.getConferenceColor)(L,K),$=o.default.createElement(s.default,{size:38,icon:(0,m.getConferenceIcon)(L,K),className:(0,l.classes)("circle app-menu-chat-conference-avatar","text-".concat(J),"incoming"===K?"has-conference-incoming":"")})),F?t=U.string("chat.one2one.typing"):(null==G?void 0:G.type)===p.TYPES.notification?(K=(null==(J=null==G||null==(L=G.data)?void 0:L.sender)?void 0:J.realname)||(null==J?void 0:J.name)||(null==J?void 0:J.id),t=(L=null==G||null==(F=G.data)?void 0:F.title)&&K?"".concat(K,": ").concat(L):L||""):!G||G.id===X&&0!==B||(J=G.senderId,F=G.summary,K=G.type,L=G.user,J=J||L,(L=(L=F)||!G.content&&!G.deleted?F:(0,h.getChatMessageSummaryText)(new p.default(G),100))&&(t=L,A.isGroupOrSystem&&K!==p.TYPES.notification&&(J===(0,d.getCurrentUserID)()?(t=G.id===X?null:"".concat(U.string("chat.message.senderMe"),": ").concat(t),Q=G.id!==X||H?null:o.default.createElement(j.default,{gid:A.gid,className:"app-menu-chat-item-msg small text-ellipsis"})):t=o.default.createElement(S.default,{hideOnLoading:D,memberID:J},": ",t)))),F=[],!B&&!V||(K=(L=!(0===A.unreadMessagesCount||!G)&&(0,h.getChatMessageMentionType)(G.content))&&U.string("me"===L?"chat.status.atMe":"chat.status.atAll"))&&F.push(o.default.createElement("span",{key:"mention",className:"label label-xs accent rounded"},K)),V&&F.push(o.default.createElement("span",{key:"fileSaved",className:"label label-xs accent rounded"},1<V?U.format("chats.menu.fileSaved",V):U.string("chats.menu.fileSaved"))),F.length||(F=null),null),X=(B=!(!t&&!F||H),t&&(J=o.default.createElement("div",{className:"subtitle flex space-between flex-middle"},o.default.createElement("div",{className:"text-ellipsis"},F,t),A.star?o.default.createElement(c.default,{name:"pin",size:12,className:"star-icon"}):null)),(L=A.lastBulletinInfo)?L.id:0),Q=(F=X?null==(K=C.default.getMessage(X))?void 0:K.index:0,null);return!(!A.unreadMessagesCount||!F)&&A.isUnreadMessage(F)&&!H&&(Q=o.default.createElement("div",{className:"subtitle flex space-between flex-middle"},o.default.createElement("div",{className:"text-ellipsis"},o.default.createElement(j.default,{gid:A.gid,className:"app-menu-chat-item-msg"})),!B&&A.star?o.default.createElement(c.default,{name:"pin",size:12,className:"star-icon"}):null)),t=I?o.default.createElement(g.ChatAvatarCommon,{chat:A,gid:A.gid,avatarSize:34,className:(0,l.classes)("flex-none"),showStatusDot:!Y},$):null,L=H?o.default.createElement("div",{className:"subtitle flex space-between flex-middle"},o.default.createElement("div",{className:"text-draft text-ellipsis"},o.default.createElement("span",{className:"draft-label"},U.string("common.draft"),": "),W),A.star?o.default.createElement(c.default,{name:"pin",size:12,className:"star-icon"}):null):null,o.default.createElement(i.Link,R({to:y.default.chats.chat.id(A.gid,n),className:(0,l.classes)("app-menu-chat-item flex-middle",r,{"with-avatar":I,"multi-lines":B,"has-msg-view":Q,star:A.star})},e),t,o.default.createElement("div",{className:"content"},q,H?L:o.default.createElement(o.default.Fragment,null,Q,B&&J)),a)}L.propTypes={gid:a.default.string.isRequired,className:a.default.string,children:a.default.any,filterType:a.default.string,showAvatar:a.default.bool,hideOnLoading:a.default.bool},L.defaultProps={className:null,children:null,filterType:"recents",showAvatar:!0,hideOnLoading:!1},t.default=(0,o.memo)(L)},86424:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==b(e)&&"function"!=typeof e)return{default:e};if((t=y(t))&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(n(67294)),o=m(n(45697)),a=n(64393),i=m(n(27844)),l=n(68271),u=n(98649),s=m(n(74160)),c=n(40910),f=n(15998),d=m(n(74101)),p=m(n(29795)),h=["chats","className","filterType","listItemProps","activeChatId","children"];function m(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function w(){return O.apply(this,arguments)}function O(){var e;return e=function*(){d.default.isReady&&d.default.getRecentChats({maxRecentTime:0}).slice(0,20).map((function(e){return e.gid})).forEach((function(e){p.default.loadMoreList(e,10)}))},(O=function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){v(a,r,o,i,l,"next",e)}function l(e){v(a,r,o,i,l,"throw",e)}i(void 0)}))}).apply(this,arguments)}function S(e){var t=e.target.closest(".app-menu-chat-item"),n=t.closest(".app-menu-list").getAttribute("data-menu-type");(0,u.showContextMenu)("chat.menu",{event:e,chat:t.getAttribute("data-gid"),menuType:n,viewType:"groups"===n?"category":""})}function _(e){null!=(e=e.target.closest(".app-menu-chat-item"))&&e.classList.contains("active")&&(0,f.sendContentToChat)("",{cgid:e.getAttribute("data-gid")})}function C(e){var t=e.chats,n=e.className,o=e.filterType,u=e.listItemProps,f=e.activeChatId,p=e.children,m=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,h),f||(0,l.getActiveChatGid)());return(0,r.useEffect)((function(){var e,t;if(s.default.ui["chat.autoScrollToActiveChat"])return e=(0,c.parseRoutePath)().params.autoScrollBehavior,e=new Set((void 0===e?"":e).split(",")),(0,c.isRoutePathMatch)("chats","*",m)&&(0,a.scrollIntoView)(document.getElementById("menuChatListItem-".concat(m)),{behavior:e.has("smooth")?"smooth":"instant",block:e.has("end")?"end":e.has("center")?"center":e.has("start")?"start":"nearest",ifNeed:!e.has("always")}),t=d.default.subscribe(m,(function(){(0,c.isRoutePathMatch)("chats","*",m)&&(0,a.scrollIntoView)(document.getElementById("menuChatListItem-".concat(m)),{block:"center"})})),function(){return d.default.unsubscribe(t)}}),[m]),(0,r.useEffect)((function(){return d.default.unsubscribeChatsReadyEvent.bind(d.default,d.default.subscribeChatsReadyEvent(w))})),r.default.createElement("div",g({className:(0,a.classes)("app-chats-menu-list list",n),onContextMenu:S,onClick:_},e),t.map((function(e){if(!e)return DEBUG?console.error("Cannot render chat-list-item, because chat is empty",e):null;e="object"===b(e)?e.gid:e;var t=m===e;return r.default.createElement(i.default,g({filterType:o,"data-gid":e,id:"menuChatListItem-".concat(e),key:e,gid:e,className:(0,a.classes)("item",{active:t})},u))})),p)}C.propTypes={chats:o.default.array.isRequired,className:o.default.string,filterType:o.default.string,activeChatId:o.default.string,listItemProps:o.default.object,children:o.default.node},C.defaultProps={className:null,listItemProps:null,filterType:null,activeChatId:null,children:null},t.default=(0,r.memo)(C)},53766:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==w(e)&&"function"!=typeof e)return{default:e};if((t=b(t))&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(n(67294)),o=g(n(45697)),a=n(64393),i=n(45498),l=g(n(61862)),u=n(98649),s=g(n(40328)),c=g(n(64208)),f=g(n(27844)),d=n(15973),p=n(68271),h=g(n(74101)),m=g(n(65286)),y=["search","filter","className","children","activeChatId"];function g(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function E(e){(0,u.showContextMenu)("chat.menu",{event:e,chat:e.currentTarget.getAttribute("data-gid"),menuType:"groups",viewType:"category"})}function P(e){return e.list&&"Chat"!==e.entityType}n=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(n=t?(n=_(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,n&&("object"===w(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return S(r)}}(o);function o(e){var t;if(this instanceof o)return C(S(t=n.call(this,e)),"itemCreator",(function(e){var n=(o=t.props).activeChatId,o=o.filter;return r.default.createElement(f.default,{onContextMenu:E,"data-gid":e.gid,key:e.gid,filterType:o,gid:e.gid,className:(0,a.classes)("item",{active:n===e.gid})})})),C(S(t),"headingCreator",(function(e,n){var o,i=null,c=((o=n.isExpand?n.props.expandIcon:n.props.collapseIcon)&&(i=r.default.isValidElement(o)?o:"object"===w(o)?r.default.createElement(s.default,o):r.default.createElement(s.default,{name:o})),o=t.state).dragging,f={"is-dragging":f=(o=o.dropTarget)&&c&&o.id===e.id&&c.id!==e.id,"drop-top":f&&o.order<c.order,"drop-bottom":f&&o.order>c.order};return r.default.createElement("header",{onContextMenu:function(e,t){(0,u.showContextMenu)("chats.menu.group",{group:e,event:t,type:"group"})}.bind(null,e),onClick:n.props.toggleWithHeading?n.handleHeadingClick:null,className:(0,a.classes)("heading",f),draggable:!0,onDragOver:t.handleDragOver.bind(S(t),e),onDrop:t.handleDrop.bind(S(t),e),onDragStart:t.handleDragStart.bind(S(t),e),onDragEnd:t.handleDragEnd.bind(S(t),e)},i,r.default.createElement("div",{className:"title"},e.title||l.default.string("chats.menu.group.other")," (",e.list.length,")"))})),C(S(t),"defaultExpand",(function(e){return e.list&&!!e.list.find((function(n){return(0,p.isActiveChat)(n.gid)||(0,d.getUserConfig)().getChatMenuGroupState("groups",t.groupType,e.id)}))})),C(S(t),"onExpandChange",(function(e,n){(0,d.getUserConfig)().setChatMenuGroupState("groups",t.groupType,n.id,e)})),t.state={dragging:!1,dropTarget:null,chats:null},t.groupsChanged=null,t;throw new TypeError("Cannot call a class as a function")}return t=o,(e=[{key:"componentDidMount",value:function(){var e=this;this.dataChangeHandler=h.default.subscribeAny((function(t){t.some((function(e){return e.isGroup}))&&e.loadChats()})),this.groupsChanged=m.default.on("menu.categories.changed",(function(){e.loadChats()})),this.loadChats()}},{key:"componentWillUnmount",value:function(){h.default.unsubscribe(this.dataChangeHandler),this.groupsChanged&&m.default.off(this.groupsChanged)}},{key:"loadChats",value:function(){var e=this,t=(0,i.getGroupsChats)("default","category");this.setState({chats:t},this._loaded?null:function(){e._loaded=!0})}},{key:"handleDragOver",value:function(e){this.state.dropTarget&&this.state.dropTarget.id===e.id||this.setState({dropTarget:e})}},{key:"handleDrop",value:function(e,t){var n,r=(o=this.state).dragging,o=o.dropTarget;r&&o&&r.id!==o.id&&(o.order<r.order?r.order=o.order-.5:o.order>r.order&&(r.order=o.order+.5),n={},this.sortedGroups.sort((function(e,t){return e.order-t.order})),this.sortedGroups.forEach((function(e,t){e.order=t+1,n[e.id]={key:e.key,order:e.order}})),(0,d.getUserConfig)().groupsCategories=n),t.stopPropagation()}},{key:"handleDragStart",value:function(e,t){return this.setState({dragging:e}),this.sortedGroups=this.groupChats,t.stopPropagation(),!0}},{key:"handleDragEnd",value:function(e,t){return this.setState({dragging:!1}),t.stopPropagation(),!0}},{key:"render",value:function(){var e=((n=this.props).search,n.filter,n.className),t=n.children,n=(n.activeChatId,function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(n,y));if(!(i=this.state.chats)||!i.length)return null;var o=this.state.dragging,i={list:this.groupChats=i,root:!0};return r.default.createElement("div",v({className:(0,a.classes)("app-chat-group-list list",e)},n),r.default.createElement(c.default,{group:i,defaultExpand:this.defaultExpand,itemCreator:this.itemCreator,headingCreator:this.headingCreator,checkIsGroup:P,onExpandChange:this.onExpandChange,forceCollapse:!!o,showMoreText:l.default.string("common.clickShowMoreFormat"),hideEmptyGroup:!1}),t)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),o}(r.Component),C(t.default=n,"propTypes",{className:o.default.string,search:o.default.string,filter:o.default.string,children:o.default.any,activeChatId:o.default.string}),C(n,"defaultProps",{className:null,search:null,filter:null,children:null,activeChatId:null})},3578:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=h(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=p(n(45697)),i=n(64393),l=p(n(20270)),u=p(n(53766)),s=p(n(27850)),c=p(n(33467)),f=p(n(10737)),d=["search","filter","className","children","activeChatId"];function p(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=g(e);if(n=t?(n=g(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==o)return o;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(a);function a(){var e=this,t=a;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"render",value:function(){var e=(a=this.props).search,t=a.filter,n=a.className,r=(a.children,a.activeChatId),a=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(a,d),p=null;if(e)p=o.default.createElement(f.default,{search:e,activeChatId:r});else switch(t){case"groups":p=o.default.createElement(u.default,{filter:t,activeChatId:r});break;case"private":p=o.default.createElement(c.default,{filter:t,activeChatId:r});break;default:p=o.default.createElement(s.default,{filter:"recents",activeChatId:r})}return o.default.createElement(l.default,m({className:(0,i.classes)("app-menu-list",n),"data-menu-type":t},a),p)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component),b(t.default=n,"propTypes",{search:a.default.string,filter:a.default.string,className:a.default.string,children:a.default.any,activeChatId:a.default.string}),b(n,"defaultProps",{search:null,filter:"recents",className:null,children:null,activeChatId:null})},33467:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=c(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=s(n(45697)),i=s(n(86424)),l=s(n(74101)),u=(s(n(73052)),["filter","className","children","activeChatId"]);function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=m(e);if(n=t?(n=m(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==o)return o;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(a);function a(e){if(this instanceof a)return(e=n.call(this,e)).state={chats:null},e;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"componentDidMount",value:function(){var e=this;this.dataChangeHandler=l.default.subscribeAny((function(t){t.some((function(e){return e.isOne2One||e.isBot}))&&e.loadChats()})),this.loadChats()}},{key:"componentWillUnmount",value:function(){l.default.unsubscribe(this.dataChangeHandler)}},{key:"loadChats",value:function(){var e=this,t=[].concat(d(l.default.getPrivateChats()),d(l.default.getBotChats()));this.setState({chats:t},this._loaded?null:function(){e._loaded=!0})}},{key:"render",value:function(){var e=(a=this.props).filter,t=a.className,n=a.children,r=a.activeChatId,a=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(a,u),l=this.state.chats;return l&&l.length?o.default.createElement(i.default,f({className:t,activeChatId:r,chats:l,filterType:e},a),n):null}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component),y(t.default=n,"propTypes",{className:a.default.string,filter:a.default.string,children:a.default.any,activeChatId:a.default.string}),y(n,"defaultProps",{className:null,filter:null,children:null,activeChatId:null})},27850:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=f(n(45697)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=c(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),i=f(n(74101)),l=f(n(61997)),u=f(n(86424)),s=f(n(30947));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e){var t=e.filter,n=e.activeChatId,r=e.className,o=(e=e.children,(0,a.useRef)("menu-recent-".concat((0,l.default)(),"-end"))),c=(0,s.default)(),f=(m=d((0,a.useState)(10),2))[0],p=m[1],h=null==c?void 0:c.length;if((0,a.useEffect)((function(){var e;if(h)return e=new IntersectionObserver((function(t){t[0].isIntersecting&&(f<h?p((function(e){return Math.min(h,e+5)})):(e.disconnect(),e=null))})),e.observe(document.getElementById(o.current)),function(){var t;return null==(t=e)?void 0:t.disconnect()}}),[f,h]),!h)return null;var m=n?c.indexOf(n):-1,y=Math.max(m+10,f-1);return c=c.reduce((function(e,t,n){return(n<=y||null!=(n=i.default.getChat(t))&&n.unreadMessagesCount)&&e.push(t),e}),[]),m<0&&(m=i.default.getChat(n))&&!m.isSystem&&c.unshift(n),a.default.createElement(u.default,{className:r,activeChatId:n,chats:c,filterType:t,listItemProps:{hideOnLoading:!0}},e,a.default.createElement("div",{id:o.current,style:{height:1}}))}h.propTypes={className:o.default.string,activeChatId:o.default.string,filter:o.default.string,children:o.default.any},h.defaultProps={className:null,activeChatId:null,filter:null,children:null},t.default=(0,a.memo)(h)},10737:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==b(e)&&"function"!=typeof e)return{default:e};if((t=y(t))&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(n(67294)),o=m(n(45697)),a=m(n(3812)),i=n(64393),l=n(98649),u=m(n(85091)),s=m(n(63318)),c=m(n(61862)),f=n(68271),d=m(n(74101)),p=m(n(91705)),h=["search","filter","className","children","defaultPage","activeChatId","activeChatOnClick"];function m(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){t&&O(e.prototype,t),n&&O(e,n),Object.defineProperty(e,"prototype",{writable:!1})}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(n=t?(n=k(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,n&&("object"===b(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return P(r)}}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var x=function(){_(o,r.Component);var e,t,n=E(o);function o(e){var t;return w(this,o),j(P(t=n.call(this,e)),"handleItemContextMenu",(function(e){var n=t.props.filter;(0,l.showContextMenu)("chat.menu",{event:e,chat:e.currentTarget.getAttribute("data-gid"),menuType:n,viewType:""})})),j(P(t),"handleItemClick",(function(e){t.props.activeChatOnClick&&(e=d.default.getChat(e.currentTarget.attributes["data-gid"].value),(0,f.setActiveChat)(e,{autoScrollBehavior:"always,start"}))})),j(P(t),"handleItemMouseEnter",(function(e){t.selectItem(e.currentTarget.attributes["data-gid"].value)})),j(P(t),"handleRequestMorePage",(function(){t.setState((function(e){return{page:e.page+1}}))})),j(P(t),"scrollToSelectItem",(function(){var e=t.state.select;e&&(e=document.getElementById("menuChatSearchListItem-".concat(e)),(0,i.scrollIntoView)(e,{behavior:"smooth",block:"nearest",ifNeed:!0}))})),t.state={select:"",page:e.defaultPage,chats:null,loading:!1},t}return S(o,[{key:"componentDidMount",value:function(){var e=this;(0,a.default)("up","chatsMenuSearch",(function(t){var n=e.chats,r=e.selectIndex,o=e.maxIndex;1<o?e.selectItem(null==(r=n[(r-1+o)%o])?void 0:r.gid):o&&e.selectItem(null==(r=n[0])?void 0:r.gid),t.preventDefault()})),(0,a.default)("down","chatsMenuSearch",(function(t){var n=e.chats,r=e.selectIndex,o=e.maxIndex;1<o?e.selectItem(null==(r=n[(r+1+o)%o])?void 0:r.gid):o&&e.selectItem(null==(r=n[0])?void 0:r.gid),t.preventDefault()})),(0,a.default)("enter","chatsMenuSearch",(function(t){e.props.activeChatOnClick&&e._selectedChat&&((0,f.setActiveChat)(e._selectedChat.gid,{autoScrollBehavior:"always,start"}),document.getElementById("chatsMenuSearchInput").blur()),t.preventDefault()})),(0,a.default)("esc","chatsMenuSearch",(function(e){document.getElementById("chatsMenuSearchInput").blur(),e.preventDefault()})),this.loadChats()}},{key:"componentDidUpdate",value:function(e){var t=(n=this.props).search,n=n.filter;e.search===t&&e.filter===n||this.loadChats()}},{key:"componentWillUnmount",value:function(){a.default.deleteScope("chatsMenuSearch"),this._unmounted=!0}},{key:"loadChats",value:(e=function*(){var e=(t=this.props).search,t=t.filter;e.length<2&&encodeURIComponent(e)===e||(this.setState({loading:!0}),e=yield d.default.searchChats(e,{chatType:t,excludeMemberIdList:!1,includeReadonly:!0,searchFromRemote:!0,includeNotification:!0}),this._unmounted||this.selectItem({select:null,chats:e,loading:!1}))},t=function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){v(a,r,o,i,l,"next",e)}function l(e){v(a,r,o,i,l,"throw",e)}i(void 0)}))},function(){return t.apply(this,arguments)})},{key:"selectItem",value:function(e){var t={};"object"===b(e)?Object.assign(t,e):t.select=e,this.setState(t,this.scrollToSelectItem)}},{key:"render",value:function(){var e=(o=this.props).search,t=(o.filter,o.className),n=o.children,o=(o.defaultPage,o.activeChatId,o.activeChatOnClick,function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(o,h)),a=this.state,l=a.chats,f=[],d=null,m="overflow-y-auto scrollbar-hover";if(a.loading)m="overflow-hidden",f.push(r.default.createElement(p.default,{key:"spinner",style:{marginTop:4}}));else if(l&&l.length){var y=this.state.select,b=(y=y||(null==(a=l[0])?void 0:a.gid),this.chats=l,Math.min(l.length,50));this.maxIndex=b;for(var v=0;v<b;v+=1){var w=l[v],O=w.gid===y;O&&(this._selectedChat=w,this.selectIndex=v),f.push(r.default.createElement(u.default,{onMouseEnter:this.handleItemMouseEnter,onContextMenu:this.handleItemContextMenu,onClick:this.handleItemClick,onPointerDown:this.handleItemClick,key:w.gid,"data-gid":w.gid,gid:w.gid,showStatusDot:!0,id:"menuChatSearchListItem-".concat(w.gid),className:(0,i.classes)("item",{hover:O})}))}d=r.default.createElement("div",{className:"title"},c.default.string("chat.menu.searchResult")," (",l.length>b?c.default.format("common.moreThan",b):l.length,")"),l.length>b&&f.push(r.default.createElement(s.default,{key:"resultInfo",style:{pointerEvents:"none"},icon:"alert-circle-outline",className:"flex-middle item muted",title:r.default.createElement("span",{className:"title small"},c.default.string("chat.menu.resultTooMany"))}))}else d=r.default.createElement("div",{className:"title"},e.length<2&&encodeURIComponent(e)===e?c.default.string("chat.menu.searchTooShort"):c.default.format("chat.menu.emptySearchResultTip",e));return r.default.createElement("div",g({className:(0,i.classes)("app-menu-search-list ".concat(m," list compact"),t)},o),r.default.createElement("div",{className:"heading"},d),f,n)}}]),o}();j(x,"propTypes",{className:o.default.string,search:o.default.string,filter:o.default.string,children:o.default.any,defaultPage:o.default.number,activeChatId:o.default.string,activeChatOnClick:o.default.bool}),j(x,"defaultProps",{className:null,search:null,filter:null,children:null,defaultPage:1,activeChatId:null,activeChatOnClick:!0}),t.default=function(){_(t,x);var e=E(t);function t(){return w(this,t),e.apply(this,arguments)}return S(t,[{key:"componentDidMount",value:function(){var e=this;(0,a.default)("up","chatsMenuSearch",(function(t){var n=e.chats,r=e.selectIndex,o=e.maxIndex;1<o?e.selectItem(null==(r=n[(r-1+o)%o])?void 0:r.gid):o&&e.selectItem(null==(r=n[0])?void 0:r.gid),t.preventDefault()})),(0,a.default)("down","chatsMenuSearch",(function(t){var n=e.chats,r=e.selectIndex,o=e.maxIndex;1<o?e.selectItem(null==(r=n[(r+1+o)%o])?void 0:r.gid):o&&e.selectItem(null==(r=n[0])?void 0:r.gid),t.preventDefault()})),(0,a.default)("enter","chatsMenuSearch",(function(t){e.props.activeChatOnClick&&e._selectedChat&&((0,f.setActiveChat)(e._selectedChat.gid,{autoScrollBehavior:"always,start"}),document.getElementById("chatsMenuSearchInput").blur()),t.preventDefault()})),(0,a.default)("esc","chatsMenuSearch",(function(e){document.getElementById("chatsMenuSearchInput").blur(),e.preventDefault()})),this.loadChats()}}]),t}()},63689:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=b(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=g(n(45697)),i=g(n(40328)),l=g(n(61862)),u=g(n(18033)),s=n(64393),c=g(n(3578)),f=g(n(93956)),d=n(98649),p=n(68232),h=n(51943),m=["filterType","className","children","activeChatId"],y=["filterType","className","children","activeChatId"];function g(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function w(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){t&&S(e.prototype,t),n&&S(e,n),Object.defineProperty(e,"prototype",{writable:!1})}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=j(e);if(n=t?(n=j(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return k(o)}}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var M=function(){C(t,o.Component);var e=P(t);function t(n){var r;return O(this,t),x(k(r=e.call(this,n)),"handleMenuTypeBtnClick",(function(e){for(var t=(n=r.props).filterType,n=n.activeChatId,o=e.target;o&&(!o.classList||!o.classList.contains("btn"));)o=o.parentElement;(0,d.showContextMenu)("chats.menu",{event:e,activeChatId:n,filterType:t,options:{preventDefault:!0,stopPropagation:!0,position:{direction:"below-left",triggerElement:o}}})})),x(k(r),"handleCreateChatBtnClick",(function(){(0,p.showCreateChatDialog)()})),x(k(r),"handleSearchChange",(function(e){r.setState({search:e})})),x(k(r),"onClearSearch",(function(){r.searchControl.handleOnClearBtnClick(!1)})),x(k(r),"handleSearchFocusChange",(function(e){r.blurSearchTimer&&clearTimeout(r.blurSearchTimer),e?r.setState({searchFocus:e}):r.blurSearchTimer=setTimeout((function(){r.setState({searchFocus:!1}),r.blurSearchTimer=null,r.onClearSearch()}),200)})),r.state={search:"",searchFocus:!1},r}return _(t,[{key:"render",value:function(){var e=this,t=(d=this.props).filterType,n=d.className,r=d.children,a=d.activeChatId,d=w(d,m),p=(y=this.state).search,y=y.searchFocus&&"string"==typeof p&&p.length;return o.default.createElement("div",v({className:(0,s.classes)("app-chats-menu single column",n,y?"has-search":"")},d),o.default.createElement("div",{className:"app-chats-menu-search flex space-around"},o.default.createElement(f.default,{ref:function(t){e.searchControl=t},hotkeyScope:"chatsMenuSearch",onFocusChange:this.handleSearchFocusChange,className:"app-chats-search ",onSearchChange:this.handleSearchChange,placeholder:l.default.string("chats.search.recents"),name:"chatsMenuSearchInput",changeDelay:500})),o.default.createElement("div",{className:"flex app-chats-menu-header"},o.default.createElement(u.default,{className:"rounded app-chats-menu-type-btn",label:l.default.string("chat.menu.".concat(t)),onClick:this.handleMenuTypeBtnClick},o.default.createElement(i.default,{name:"chevron-down"})),"groups"===t&&o.default.createElement(u.default,{className:"primary x-outline rounded btn-sm app-chats-menu-add-category-btn",onClick:function(){(0,h.showAddCategoryDialog)()}},o.default.createElement(i.default,{name:"mdi-plus"}),l.default.string("chat.menu.addCategory")),o.default.createElement(u.default,{className:"primary x-outline rounded btn-sm app-chats-menu-create-btn",onClick:this.handleCreateChatBtnClick},o.default.createElement(i.default,{name:"mdi-plus"}),l.default.string("chat.menu.createChat"))),o.default.createElement(c.default,{id:"appChatsMenuList",filter:t,activeChatId:a,className:"flex-auto"}),y?o.default.createElement(c.default,{id:"appChatsSearchList",search:p,filter:t,activeChatId:a,className:"dock"}):null,r)}}]),t}();x(M,"propTypes",{className:a.default.string,filterType:a.default.string,children:a.default.any,activeChatId:a.default.string}),x(M,"defaultProps",{className:null,filterType:null,children:null,activeChatId:null}),n=function(){C(t,M);var e=P(t);function t(){return O(this,t),e.apply(this,arguments)}return _(t,[{key:"render",value:function(){var e=this,t=(i=this.props).filterType,n=i.className,r=i.children,a=i.activeChatId,i=w(i,y),d=(p=this.state).search,p=p.searchFocus&&"string"==typeof d&&d.length;return o.default.createElement("div",v({className:(0,s.classes)("app-chats-menu single column",n,p?"has-search":"")},i),o.default.createElement("div",{className:"app-chats-menu-search flex space-around"},o.default.createElement(u.default,{icon:"mdi-arrow-down-drop-circle",className:"rounded muted",style:{marginRight:"5px"},onClick:function(){var e;null!=(e=window.webEmbed)&&e.postMessage("invokeEmbedMethod","toggleCollapse")}}),o.default.createElement(f.default,{ref:function(t){e.searchControl=t},hotkeyScope:"chatsMenuSearch",onFocusChange:this.handleSearchFocusChange,className:"app-chats-search ",onSearchChange:this.handleSearchChange,placeholder:l.default.string("chats.search.recents"),name:"chatsMenuSearchInput",changeDelay:500})),o.default.createElement(c.default,{id:"appChatsMenuList",filter:t,activeChatId:a,className:"flex-auto"}),p?o.default.createElement(c.default,{id:"appChatsSearchList",search:d,filter:t,activeChatId:a,className:"dock"}):null,r)}}]),t}(),t.default=n},84662:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=d(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=f(n(45697)),i=n(64393),l=f(n(92691)),u=f(n(74002)),s=f(n(30274)),c=["message","className","contentConverter"];function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(e){var t=e.message,n=e.className,r=e.contentConverter;return e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,c),o.default.createElement("div",p({className:(0,i.classes)("center-content",n)},e),o.default.createElement(u.default,{date:t.date,avatar:{className:"avatar-sm flex-none",icon:"bell-outline text-secondary"}},o.default.createElement(s.default,{message:t,contentConverter:r})))}h.propTypes={message:a.default.instanceOf(l.default).isRequired,className:a.default.oneOfType([a.default.string,a.default.object,a.default.array]),contentConverter:a.default.func},h.defaultProps={className:null,contentConverter:null},t.default=(0,o.memo)(h)},84849:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=w(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=v(n(45697)),i=n(64393),l=n(7066),u=v(n(40328)),s=v(n(92691)),c=n(73052),f=v(n(81411)),d=v(n(57044)),p=v(n(87922)),h=v(n(55367)),m=v(n(60357)),y=v(n(99207)),g=v(n(74160)),b=["className","message","prevMessage","contentConverter","hideHeader","showedDivider","showReplied","avatarSize","ignoreStatus","hideActions","headDateFormat","selection","chosen","onClickMultiSelection"];function v(e){return e&&e.__esModule?e:{default:e}}function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e){function t(){null!=M&&M(r.id)}var n=e.className,r=e.message,a=e.prevMessage,s=e.contentConverter,v=e.hideHeader,w=e.showedDivider,_=e.showReplied,C=e.avatarSize,E=e.ignoreStatus,P=e.hideActions,k=e.headDateFormat,j=e.selection,x=e.chosen,M=e.onClickMultiSelection,T=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,b),S((0,m.default)(),1)[0]),I=r.senderId,D=r.type;return v=!1===v||"auto"===v&&(w||!a||a.deleted||a.senderId!==I||a.type!==D||r.date-a.date>60*g.default.ui["message.interval.minute"]*1e3)?o.default.createElement(d.default,{message:r,avatarSize:C,staticUI:P,dateFormat:k}):null,w=j?o.default.createElement("div",{className:"checkbox-container",onClick:t},o.default.createElement("div",{className:(0,i.classes)("checkbox checkbox-sm",{checked:x.has(r.id)})},o.default.createElement("label",null))):null,I=r.replyTo,D=r.id,a=r.cgid,C=r.index,P=_&&I?o.default.createElement(h.default,{replyTo:I,cgid:a,contentConverter:s}):null,k=r.isBulletin?o.default.createElement("div",{className:"app-message-bulletin-label rounded label accent"},T.string("chat.message.bulletin.type.".concat(r.bulletin.type))):null,x=(j=(0,c.isMessagePinnedInChat)(D,a))?o.default.createElement(u.default,{name:"pin",size:12,className:"app-message-pinned-badge"}):null,_=["app-message-bubble-item",n,{"has-header":v,"is-pinned":j,"has-reply":I}],DEBUG&&(I=(n=S((0,y.default)(a,C),2))[0],a=n[1],I&&_.push("is-unread"),a&&_.push("is-last-read")),o.default.createElement("div",O({className:i.classes.apply(void 0,_)},e,{id:"message-".concat(D)}),v,o.default.createElement("div",{className:"app-message-body"},w,o.default.createElement("div",{className:(0,i.classes)("app-message-bubble",{"is-transparent":r.isEmotionContent&&!P}),onClick:t,"data-id":D},P,k,o.default.createElement(f.default,{message:r,contentConverter:s}),x,o.default.createElement("div",{className:"app-message-hint hint"},(0,l.formatDate)(r.date,"yyyy-MM-dd hh:mm:ss"),j?", ".concat(T.string("chat.message.pinned")):null),!E&&r.isInLocal&&o.default.createElement(p.default,{message:r}))))}C.propTypes={message:a.default.instanceOf(s.default).isRequired,prevMessage:a.default.instanceOf(s.default),className:a.default.oneOfType([a.default.string,a.default.object,a.default.array]),hideHeader:a.default.oneOf(["auto",!0,!1]),hideActions:a.default.bool,contentConverter:a.default.func,showedDivider:a.default.bool,avatarSize:a.default.number,ignoreStatus:a.default.bool,showReplied:a.default.bool,headDateFormat:a.default.string,selection:a.default.bool,chosen:a.default.instanceOf(Set),onClickMultiSelection:a.default.func},C.defaultProps={prevMessage:null,className:null,hideHeader:"auto",hideActions:!1,contentConverter:null,showedDivider:!1,avatarSize:null,ignoreStatus:!1,showReplied:!0,headDateFormat:"hh:mm",selection:!1,chosen:new Set,onClickMultiSelection:null},t.default=(0,o.memo)(C)},78114:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=g(n(67294)),o=m(n(45697)),a=g(n(2388)),i=n(64393),l=n(95214),u=m(n(18033)),s=m(n(40328)),c=m(n(88446)),f=n(16986),d=m(n(61862)),p=m(n(55263)),h=["card","className","baseClassName","header","children","fluidWidth","style"];function m(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==O(e)&&"function"!=typeof e)return{default:e};if((t=y(t))&&t.has(e))return t.get(e);var n,r,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=a?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function v(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(n=t?(n=_(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,n&&("object"===O(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(o);function o(){var e=this,t=o;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=o,(e=[{key:"render",value:function(){var e=this,t=(S=this.props).card,n=S.className,o=S.baseClassName,m=S.header,y=S.children,g=S.fluidWidth,v=S.style,S=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(S,h),_=t.image,C=t.title,E=t.subtitle,P=t.content,k=t.icon,j=t.actions,x=t.url,M=t.htmlContent,T=t.webviewContent,I=t.contentType,D=t.contentUrl,A=t.originContentType,R=t.menu,N=t.provider,B=t.clickable,L=null;return D&&("image"===I?L=r.default.createElement(c.default,{src:D,alt:D}):"video"===I?L=r.default.createElement("video",{controls:!0},r.default.createElement("source",{src:D,type:A})):"audio"===I&&(L=r.default.createElement("audio",{controls:!0,className:"fluid"},r.default.createElement("source",{src:D,type:A})))),I=C===x,D=C?r.default.isValidElement(C)?C:I?r.default.createElement("a",{className:"title",href:x},x):r.default.createElement("div",{className:"title"},C):null,A=E?r.default.isValidElement(E)?E:r.default.createElement("div",{className:"subtitle"},E):null,C=null,_?C=r.default.isValidElement(_)?_:r.default.createElement(c.default,{className:"img",src:_,alt:_}):k&&(E=r.default.createElement(s.default,{name:"earth",className:"muted icon-2x"}),C="object"===O(k)?(0,a.renderAvatar)(w({imageErrorView:E},k)):r.default.createElement(a.default,{auto:k,imageErrorView:E})),_=null,(0,f.isNotEmptyString)(P)&&(_=r.default.isValidElement(P)?P:T?r.default.createElement(p.default,b({fluidWidth:g,className:"relative"},P)):M?r.default.createElement("div",{className:"content",dangerouslySetInnerHTML:{__html:P}}):r.default.createElement("div",{className:"content"},P)),E=null!=(k=null==j?void 0:j.map((function(t){return r.default.createElement(u.default,{className:t.btnClass||"rounded accent x-outline",key:t.id||t.label,label:t.label,icon:t.icon,onClick:function(e,t){e.url&&(0,l.openUrl)(e.url,t.target)?t.stopPropagation():e.click&&(e.click(t),t.stopPropagation())}.bind(e,t)})})))?k:[],g=null!=(T=null==R?void 0:R.map((function(t){return r.default.createElement("a",{key:t.id||t.label,title:t.label,className:"btn rounded iconbutton",onClick:t.click?function(e,t){e.click&&(e.click(t),t.stopPropagation())}.bind(e,t):null,href:t.url},r.default.createElement(a.default,{auto:t.icon,className:"avatar-sm"}))})))?T:[],N&&g.push(r.default.createElement("a",{key:"provider",title:d.default.format("chat.message.provider.format",N.label||N.name),className:"btn rounded iconbutton",onClick:N.click,href:N.url},r.default.createElement(a.default,{auto:N.icon,className:"avatar-sm"}))),r.default.createElement("div",b({className:(0,i.classes)("app-message-card",o,n,{"app-link state":!0===B,"only-title":!_&&!A&&!E.length}),"data-url":x,style:w(w({},v),t.style)},S),L,m||D||C||A?r.default.createElement("header",{className:"row single"},r.default.createElement("div",{className:"cell flex-auto"},r.default.createElement("div",{className:"tile"},D,A)),C?r.default.createElement("div",{className:"cell flex-none"},r.default.createElement("div",{className:"tile center-content"},C)):null,m):null,_,E&&E.length?r.default.createElement("nav",{className:"nav actions divider-top"},E):null,x&&!I?r.default.createElement("footer",null,r.default.createElement("a",{href:x},x)):null,y,g&&g.length?r.default.createElement("div",{className:"app-message-card-menu"},g):null)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),o}(r.Component),C(t.default=n,"propTypes",{baseClassName:o.default.string,card:o.default.object.isRequired,className:o.default.string,header:o.default.any,children:o.default.any,style:o.default.object,fluidWidth:o.default.oneOfType([o.default.number,o.default.func])}),C(n,"defaultProps",{baseClassName:"",className:"",header:null,style:null,children:null,fluidWidth:null})},34940:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=m(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=h(n(45697)),i=n(64393),l=n(16986),u=h(n(38358)),s=h(n(18033)),c=h(n(92691)),f=h(n(60357)),d=n(74933),p=["message","className","contentConverter"];function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e){var t=e.message,n=e.className,r=(e.contentConverter,e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,p),g((0,f.default)(),1)[0]),a=(b=g((0,o.useState)(!1),2))[0],c=b[1],h=(t=(b=t.codeContent).name,b.lot),m=b.lang,b=b.code,v=(0,o.useCallback)((function(){c(!a)}),[a]);return v=h?o.default.createElement("div",{className:"footer text-center"},o.default.createElement(s.default,{className:"btn-sm rounded text-gray block",icon:a?"chevron-double-up":"chevron-double-down",onClick:v,title:r.string(a?"chat.message.clickToCollapse":"chat.message.clickToExpand")})):null,b=(0,d.decodeEmojiMessage)(b),b=u.default.highlightAuto(b,m?[m]:void 0),o.default.createElement("div",y({},e,{className:(0,i.classes)("app-message-content-code",n,{"has-footer":h,collapsed:h&&!a})}),(0,l.isNotEmptyString)(t)?o.default.createElement("div",{className:"title"},t):null,o.default.createElement("pre",{className:"no-margin scrollbar-hover","data-lang":m||null},o.default.createElement("div",{className:"hint--left btn-copy-code app-link","data-url":"!copyCode/".concat(m||""),"data-hint":"".concat(r.string("common.copyCode"))},o.default.createElement(s.default,{className:"rounded primary-pale text-primary",icon:"code-not-equal-variant icon-2x"})),o.default.createElement("code",{className:m?"lang-".concat(m):null,dangerouslySetInnerHTML:{__html:b.value}})),v)}v.propTypes={message:a.default.instanceOf(c.default).isRequired,className:a.default.string,contentConverter:a.default.func},v.defaultProps={className:null,contentConverter:null},t.default=(0,o.memo)(v)},65441:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=f(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=c(n(45697)),i=n(64393),l=c(n(92691)),u=c(n(10352)),s=["message","className","contentConverter","imgHolderProps"];function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e){var t=e.message,n=e.className;return e.contentConverter,e.imgHolderProps,e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,s),(t=t.emotionContent)?o.default.createElement(u.default,d({className:(0,i.classes)("app-message-content-emotion emoji-hd",n),name:t.content},e)):null}p.propTypes={message:a.default.instanceOf(l.default).isRequired,className:a.default.string,contentConverter:a.default.func,imgHolderProps:a.default.object},p.defaultProps={className:null,contentConverter:null,imgHolderProps:null},t.default=(0,o.memo)(p)},89971:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=h(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=p(n(45697)),i=n(64393),l=p(n(1528)),u=p(n(92691)),s=p(n(13409)),c=p(n(17234)),f=n(15973),d=["message","className","contentConverter"];function p(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e){var t=e.message,n=e.className,r=(e.contentConverter,e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,d),function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return y(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,o.useState)(""))),a=r[0],u=r[1],p=(r=(0,c.default)(t),(0,f.getCurrentUser)()),h=(0,o.useCallback)((function(e){var t=e.previewType;return"image"===t||"video"===t||"audio"===t?(u(e),t):"default"}),[]);return p=!(["doc","ppt","xls"].includes(r.previewType)&&!p.isServerSideIntegrated("collaboraOffice")),n=o.default.createElement(l.default,m({key:"file",className:(0,i.classes)("app-message-content-file flex-inline",n),file:r,onRequestPreview:h,canPreview:p&&!a},e)),(r=p&&a?o.default.createElement(s.default,m({key:"preview",className:"app-message-file-preview",message:t},e)):null)?[r,n]:n}g.propTypes={message:a.default.instanceOf(u.default).isRequired,className:a.default.string,contentConverter:a.default.func},g.defaultProps={className:null,contentConverter:null},t.default=(0,o.memo)(g)},96246:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=d(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=f(n(45697)),i=n(64393),l=f(n(61862)),u=f(n(92691)),s=n(79424),c=["message","className","contentConverter","imgHolderProps"];function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(e){e.target.classList.add("broken"),e.target.setAttribute("data-broken",l.default.string("file.downloadFailed"))}function m(e){var t=e.message,n=e.className,r=(e.contentConverter,e.imgHolderProps),a=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,c),t.imageContent),l=t.id,u=t.cgid,f=a.content;return t=(0,o.useCallback)((function(){(0,s.showChatMessageImagePreivew)(u,l,{imageInfo:{src:f}})}),[f,l,u]),o.default.createElement("img",p({className:(0,i.classes)("app-message-content-image img-base64",n),onError:h,onDoubleClick:t,src:f,alt:a.type,style:r},e))}m.propTypes={message:a.default.instanceOf(u.default).isRequired,className:a.default.string,contentConverter:a.default.func,imgHolderProps:a.default.object},m.defaultProps={className:null,contentConverter:null,imgHolderProps:null},t.default=(0,o.memo)(m)},13409:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=g(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=n(64393),i=y(n(61862)),l=n(79424),u=y(n(41584)),s=n(90534),c=y(n(17234)),f=y(n(12740)),d=n(99838),p=y(n(40328)),h=y(n(99207)),m=n(17531);function y(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e){var t,n;"image"===e.previewType&&(t=e.viewUrl,n=e.remoteUrl,(t||n)&&(0,l.showChatMessageImagePreivew)(e.cgid,e.messageID,{imageInfo:{src:null!=t?t:n},id:"imageFile-".concat(e.gid)}))}t.default=(0,o.memo)((function(e){var t,n=e.message,r=e.className,l=(e=e.mediaHolderProps,(0,f.default)()),y=(0,c.default)(n),g=n.cgid,w=(n=n.index,v((0,h.default)(g,n),1)[0]);return"browser"!==(0,d.getPlatformType)()&&((0,o.useEffect)((function(){y&&(y.cacheThumbnailPath?y.checkCachePath(!0).then((function(e){e||(0,s.downloadFileToCache)(y,{isThumb:y.hasThumb})})):(0,s.downloadFileToCache)(y,{isThumb:y.hasThumb}))}),[y]),(0,o.useEffect)((function(){var e=new IntersectionObserver((function(e){e.find((function(e){return e.target.id===l&&0<e.intersectionRatio}))&&!w&&y.needAutoLoadOriginImage&&(0,m.downloadFile)(y)}));return e.observe(document.getElementById(l)),function(){return null==e?void 0:e.disconnect()}}),[y,l,w])),y?(n={width:(g=y).mediaWidth,height:g.mediaHeight,thumbnailWidth:g.thumbnailWidth,thumbnailHeight:g.thumbnailHeight,hint:g.name,mediaType:g.previewType||"image",sourceType:g.mimeType,brokenMessage:null!=(n=(0,s.getFileNetworkErrorMessage)(g))?n:i.default.string("file.downloadFailed")},(t=g.networking).error?(n.status="broken",n.onRequestReload=s.downloadFileToCache.bind(null,g,{showError:!0})):t.isInProgress?(n.status="loading",n.progress=t.progress,n.loadingText=i.default.string("file.loading"),g.isSendByMe&&(n.thumbnail=g.thumbnailViewUrl)):g.thumbnailViewUrl?(n.status="ok",n.source=g.thumbnailViewUrl,n.onDoubleClick=O.bind(null,g)):g.thumbnailRemoteUrl?(n.status="ok",n.source=g.thumbnailRemoteUrl,n.onDoubleClick=O.bind(null,g)):g.networking.isDownloadFail?(n.status="broken",n.onRequestReload=s.downloadFileToCache.bind(null,g,{showError:!0})):(n.status="loading",n.progress=t.progress,n.loadingText=i.default.string("file.loading")),g=n,e&&Object.assign(g,e),o.default.createElement(u.default,b({id:l,className:(0,a.classes)("app-message-content-media",r)},g),y.needLoadIamgeBtn?o.default.createElement("button",{className:"image-load btn btn-xs",onClick:s.downloadFileToCache.bind(null,y),type:"button"},o.default.createElement(p.default,{name:"cloud-download",color:"#fff",size:18}),o.default.createElement("span",null,i.default.string("menu.image.download"))):null)):null}))},83248:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=m(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=h(n(45697)),i=n(64393),l=n(16986),u=h(n(18033)),s=h(n(92691)),c=h(n(30274)),f=h(n(99588)),d=h(n(60357)),p=["message","className","contentConverter"];function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e){var t=e.message,n=e.className,r=e.contentConverter,a=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,p),g((0,d.default)(),1)[0]);if(t.contentType.startsWith("zentao-")||t.isObjectContent&&null!=(s=t.objectContent)&&null!=(s=s.contentType)&&s.startsWith("zentao-"))return o.default.createElement(f.default,y({message:t,className:n},e));var s=t.notification,h=t.actions,m=t.title,b=t.subtitle,v=[];return s.url&&v.push(o.default.createElement(u.default,{btnClass:"",key:"primaryUrl",label:a.string("common.viewDetail"),icon:"arrow-right-bold-circle",type:"a",url:s.url,className:"text-accent"})),h&&h.forEach((function(e){v.push(o.default.createElement(u.default,{btnClass:"",key:e.label,label:e.label,icon:e.icon,type:"a",url:e.url,className:"text-".concat(e.type)}))})),a=(0,o.useCallback)((function(e){return r&&(e=r(e,t)),(0,l.isNotEmptyString)(b)&&m!==b&&(e="<h5>".concat(b,"</h5>").concat(e)),(0,l.isNotEmptyString)(m)?"<h4>".concat(m,"</h4>").concat(e):e}),[m,b,r,t]),o.default.createElement("div",y({className:(0,i.classes)("app-message-content-notification",n)},e),o.default.createElement(c.default,{message:t,contentConverter:a}),null!=v&&v.length?o.default.createElement("nav",{className:"actions nav secondary-pale"},v):null)}v.propTypes={message:a.default.instanceOf(s.default).isRequired,className:a.default.string,contentConverter:a.default.func},v.defaultProps={className:null,contentConverter:null},t.default=(0,o.memo)(v)},28918:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=f(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=c(n(45697)),i=n(7066),l=c(n(92691)),u=c(n(63002)),s=["message","sleepUrlCard"];function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e){var t=e.message,n=e.sleepUrlCard,r=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,s),t.objectContent);return r&&r.type===l.default.OBJECT_TYPES.url&&r.url?(r="auto"===n?!(0,i.isToday)(t.date):n,o.default.createElement(u.default,d({sleep:r,message:t},e))):o.default.createElement("div",d({className:"box red-pale"},e),"[Unknown Object]",DEBUG?t.content:null)}p.propTypes={message:a.default.instanceOf(l.default).isRequired,sleepUrlCard:a.default.oneOf(["auto",!0,!1])},p.defaultProps={sleepUrlCard:"auto"},t.default=(0,o.memo)(p)},26356:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=f(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=c(n(45697)),i=c(n(92691)),l=c(n(60357)),u=c(n(84604)),s=["message","contentConverter"];function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e){var t=e.message,n=(e.contentConverter,e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,s),function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),1!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,1);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,1):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,l.default)())[0]),r=t.getDataValue("deletedBy");return r&&r!==t.senderId?(r=(0,u.default)(r),o.default.createElement("div",e,n.format("chat.message.retracted.byAdmin",r))):(r=(0,u.default)(t.senderId),o.default.createElement("div",e,n.format("chat.message.retracted",r)))}p.propTypes={message:a.default.instanceOf(i.default).isRequired,className:a.default.string,contentConverter:a.default.any},p.defaultProps={className:"content muted",contentConverter:null},t.default=(0,o.memo)(p)},30274:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=c(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=s(n(45697)),i=s(n(92691)),l=n(20116),u=["message","contentConverter"];function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e){var t=e.message,n=e.contentConverter;return e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,u),t=(0,l.renderChatMessageContent)(t,n),o.default.createElement("div",f({dangerouslySetInnerHTML:{__html:t}},e))}d.propTypes={message:a.default.instanceOf(i.default).isRequired,contentConverter:a.default.func,className:a.default.string},d.defaultProps={contentConverter:null,className:"content markdown-content"},t.default=(0,o.memo)(d)},73665:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=f(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=c(n(45697)),i=n(64393),l=c(n(92691)),u=c(n(30274)),s=["message","className","contentConverter"];function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e){var t=e.message,n=e.className,r=e.contentConverter;return e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,s),o.default.createElement(u.default,d({className:(0,i.classes)("app-message-content-text content markdown-content",n,t.isBlockContent?"is-content-block":"",t.isPlainTextContent?"is-plain-text":""),message:t,contentConverter:r},e))}p.propTypes={message:a.default.instanceOf(l.default).isRequired,className:a.default.string,contentConverter:a.default.func},p.defaultProps={className:null,contentConverter:null},t.default=(0,o.memo)(p)},63002:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=m(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=h(n(45697)),i=h(n(18033)),l=h(n(65286)),u=h(n(61862)),s=n(32481),c=n(64393),f=h(n(55263)),d=h(n(78114)),p=["className","sleep","message","contentConverter"];function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function y(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function v(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=m;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e);var n,a,h=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=S(e);if(n=t?(n=S(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return O(o)}}(m);function m(e){var t;if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");_(O(t=h.call(this,e)),"getFluidCardWidth",(function(){var e=t.props.message.cgid;if(e=document.querySelector(e?"#chat-view-".concat(e.replace("&","_")," .app-message-list"):".app-chats .app-chat:not(.hidden) .app-message-list"))return e.clientWidth-80})),_(O(t),"loadSleep",(function(){t.setState({sleep:!1,loading:!0},(function(){t.getUrlMeta(!0)}))}));var n=e.message;return e=e.sleep,n=n.objectContent,t._url=n.url,t._objectContent=n,t.state={meta:n&&n.title?n:null,sleep:e},t}return t=m,(e=[{key:"componentDidMount",value:function(){this.state.sleep||this.getUrlMeta()}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"getUrlMeta",value:(n=function*(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=(n=this.state).meta,n=n.loading;if(!t||n){t=this._url;try{var r=yield(0,s.getUrlMeta)(t,e);if(this.unmounted)return;this.setState({meta:r,loading:!1}),l.default.emit("message.content.url.loaded")}catch(e){return this.unmounted?void 0:(DEBUG&&console.error("Get url meta error",e),this.setState({meta:{url:t,title:t},loading:!1}))}}},a=function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(e){v(a,r,o,i,l,"next",e)}function l(e){v(a,r,o,i,l,"throw",e)}i(void 0)}))},function(){return a.apply(this,arguments)})},{key:"tryGetUrlMeta",value:function(){var e=this;this.setState({loading:!0},(function(){e.getUrlMeta(!0)}))}},{key:"render",value:function(){var e=this,t=((t=this.props).className,t.sleep,t.message,t.contentConverter,function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(t,p)),n=this._url,r=this.state,a=r.meta,l=r.loading;if(r.sleep)return r={icon:"",clickable:"title",url:n,title:n},h=o.default.createElement("div",{className:"flex-none has-padding-sm center-content"},o.default.createElement(i.default,{onClick:this.loadSleep,className:"iconbutton rounded text-accent hint--bottom-right","data-hint":u.default.string("chat.message.loadCard"),icon:"mdi-cards-playing-outline"})),o.default.createElement(d.default,b({header:h,card:r,className:(0,c.classes)("app-message-content-url relative")},t,{fluidWidth:this.getFluidCardWidth}));var s,h=g(g({clickable:"content",title:n,url:n,menu:[]},a),{},{icon:a&&!l?!1===a.icon?null:a.icon:"mdi-loading muted spin"});return l||(r=h.webviewContent,n=h.content,a&&r&&(s=n.src,l=n.style,a=g(g({},n),{},{style:g(g({},l),{},{width:l.width||800,maxWidth:"100%"})}),h.content=o.default.createElement(f.default,b({fluidWidth:this.getFluidCardWidth,className:"relative"},a,{ref:function(t){e.webview=t}})),h.clickable="header",h.menu.push({label:u.default.string("chat.message.refreshCard"),click:function(){e.webview?e.webview.webview.loadURL(s):e.tryGetUrlMeta()},icon:"mdi-refresh"}))),o.default.createElement(d.default,b({card:h,fluidWidth:this.getFluidCardWidth,className:(0,c.classes)("app-message-content-url relative",{"is-webview":h.webviewContent})},t))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),m}(o.PureComponent),_(t.default=n,"propTypes",{className:a.default.string,sleep:a.default.bool,message:a.default.object,contentConverter:a.default.func}),_(n,"defaultProps",{className:null,message:null,contentConverter:null,sleep:!1})},99588:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=h(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=p(n(45697)),i=n(64393),l=p(n(92691)),u=n(40328),s=p(n(60357)),c=p(n(55263)),f=n(46815),d=(n=p(n(94128)),["message","className"]);function p(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function y(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var O=n.default.isType("browser");function S(e){var t=e.message,n=e.className,r=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,d),b((0,s.default)(),1)[0]),a=t.notification,l=t.title,p="",h=(S=b((0,o.useState)(!1),2))[0],v=S[1],w=(0,o.useRef)(),S=function(){e=function*(){var e=!h;v(e),e&&(e=(0,f.getAppExt)("zentao-integrated"),p=yield e.getEntryUrl(p,{disposition:"card"}),null!=w&&null!=(e=w.current)&&e.webview&&w.current.webview.loadURL(p))};var e,t=function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){g(a,r,o,i,l,"next",e)}function l(e){g(a,r,o,i,l,"throw",e)}i(void 0)}))};return function(){return t.apply(this,arguments)}}(),_=P=t.parseContent();if(_.content)try{_=JSON.parse(_.content)}catch(e){console.error(e)}var C,E,P="product"===P.parentType,k="",j=[],x=null==(x=(t=t.contentType.split("-"))[2])?void 0:x.toLowerCase(),M=null==(M=a.extra)||null==(M=M.split(",",1)[0])?void 0:M.toLowerCase(),T=(t=t[1],_ instanceof Array&&1<_.length?j=[].concat(y(j),[_.map((function(e,t,n){var r=e.headTitle,a=e.headSubTitle,i=e.name,l=e.cardURL;return e=e.id,k=a?"".concat(r,"/").concat(a):r,a="mes".concat(t),o.default.createElement("div",{key:a,className:"notify-list-content"},o.default.createElement("div",{key:"item",className:"notify-list-item"},o.default.createElement("span",{className:"id"},e),O?o.default.createElement("a",{className:"name",href:l.replace("display=card","display=")},i):o.default.createElement("a",{className:"name",href:"xxc:openInApp/zentao-integrated/".concat(encodeURIComponent(l))},i)),n.length!==t+1?o.default.createElement("div",{key:"divider",className:"zentao-notification-divider"}):null)}))]):(_ instanceof Object||_ instanceof Array&&1===_.length)&&(T=(T=_)instanceof Array?_[0]:T,p=-1!==(null==(_=p=T.cardURL)?void 0:_.indexOf("?"))?"".concat(p,"&display=card&isNotice=1"):"".concat(p,"?display=card&isNotice=1"),T=(_=T).headTitle,E=_.headSubTitle,C=_.name,_=_.id,k=E?"".concat(T,"/").concat(E):T,E=a.url,j.push(o.default.createElement("div",{key:"content",className:h?"notify-list-content notify-list-content-detail":"notify-list-content"},o.default.createElement("div",{key:"item",className:"notify-list-item"},o.default.createElement("span",{className:"id"},_),O?o.default.createElement("a",{className:"name",href:p.replace("display=card","display=")},C):o.default.createElement("a",{className:"name",href:E},C),o.default.createElement("div",{className:"btn-content"},o.default.createElement("a",{className:"btn btn-sm btn-icon rounded",onClick:S},h?(0,u.renderIcon)("chevron-double-up"):(0,u.renderIcon)("chevron-double-down")))),h?o.default.createElement("div",{className:"zentao-notification-divider"}):null,h?o.default.createElement(c.default,{className:"notify-list-card-detail",src:p,ref:w,insertCss:"html body,#mainContent .cell {\n            background-color: #F8F8F8;\n        }\n        html body.xxc-embed #main {\n            top: 0px; !important;\n        }"}):null))),"notify-handle-view");return"story"!==t&&"feedback"!==t||"opened"!==x&&"changed"!==a&&"frombug"!==a&&"fromfeedback"!==a?("assigned"===x||"reviewed"===x&&"clarify"===M)&&(T="notify-handle-process"):T="notify-handle-review",o.default.createElement("div",m({className:(0,i.classes)("app-message-content-notification zentao-notification",n)},e),o.default.createElement("div",{className:"flex space-between notify-head-title",style:{marginRight:"10px"}},o.default.createElement("div",{className:"notify-action ".concat(T)},o.default.createElement("div",null,o.default.createElement("span",null,r.string("chat.message.notification.".concat(T))))),o.default.createElement("div",{key:"title",className:"notify-title strong"},l),o.default.createElement("div",{key:"head",className:"notify-list-head"},k?o.default.createElement("div",{className:"name"},P?(0,u.renderIcon)("icon-zt-product",{className:"muted"}):(0,u.renderIcon)("icon-zt-run",{className:"muted"}),"",k):null)),o.default.createElement("div",{className:"zentao-notification-divider2x"}),o.default.createElement("div",{className:"zentao-notification-msgview"},j))}S.propTypes={message:a.default.instanceOf(l.default).isRequired,className:a.default.string},S.defaultProps={className:null},t.default=(0,o.memo)(S)},81411:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=w(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=v(n(45697)),i=n(64393),l=v(n(92691)),u=v(n(62192)),s=v(n(34940)),c=v(n(89971)),f=v(n(13409)),d=v(n(73665)),p=v(n(26356)),h=v(n(83248)),m=v(n(28918)),y=v(n(65441)),g=v(n(96246)),b=["className","message"];function v(e){return e&&e.__esModule?e:{default:e}}function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function S(e){var t=e.className,n=e.message,r=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,b),((r=n).retracted?p:r.isNotification?h:r.isFileContent?c:r.isEmotionContent?y:r.isImageContent?"base64"===r.imageContent.type?g:f:r.isObjectContent?m:r.isCodeContent?s:d).default);return o.default.createElement(u.default,null,o.default.createElement(r,O({className:(0,i.classes)("app-message-content",t),message:n},e)))}S.propTypes={message:a.default.instanceOf(l.default).isRequired,className:a.default.string,contentConverter:a.default.func},S.defaultProps={className:null,contentConverter:null},t.default=(0,o.memo)(S)},73404:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=f(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=c(n(45697)),i=n(64393),l=n(7066),u=c(n(60357)),s=["date","className","children"];function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function y(e){var t=e.date,n=e.className,r=e.children,a=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,s),p((0,u.default)(),1)[0]),c=null;return t&&(c=(0,l.formatDate)(t,"YYYY-M-d"),(0,l.isToday)(t)?c="".concat(a.string("time.today")," ").concat(c):(0,l.isYesterday)(t)?c="".concat(a.string("time.yesterday")," ").concat(c):(0,l.isSameWeek)(t)&&(c="".concat(a.string("week.".concat(m[(0,l.createDate)(t).getDay()]))," ").concat(c))),o.default.createElement("div",d({className:(0,i.classes)("app-message-divider",n)},e),o.default.createElement("div",{className:"content"},c,r))}y.propTypes={date:a.default.oneOfType([a.default.number,a.default.string,a.default.instanceOf(Date)]),className:a.default.string,children:a.default.node},y.defaultProps={date:null,className:null,children:null},t.default=(0,o.memo)(y)},57044:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=w(n(67294)),a=b(n(45697)),i=n(7066),l=b(n(74160)),u=n(98649),s=n(15973),c=n(95214),f=b(n(20155)),d=w(n(67940)),p=n(20116),h=n(15998),m=b(n(74101)),y=b(n(84431)),g=b(n(60357));function b(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=v(t))&&t.has(e))return t.get(e);var n,o,a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]);return a.default=e,t&&t.set(e,a),a}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e){var t=e.message,n=e.staticUI,r=e.avatarSize,a=(e=e.dateFormat,O((0,g.default)(),1)[0]),b=t.isNotification,v=t.senderId,w=t.cgid,S=!b&&(0,s.isCurrentUser)(v),_=l.default.ui["chat.hideChatAvatar"],C=l.default.ui["chat.mentionOthers"],E=0===v,P=E?t.data.sender||{id:0,displayName:a.format("common.xuanbot"),avatar:"".concat((0,s.getCurrentUser)().backendURL,"data/image/xuanbot.png")}:b?t.getSender():(0,p.getChatMessageSender)(t),k=!b&&!E||P.url?function(e,t,n){t?e.url&&(0,c.openUrl)(e.url):(0,u.showContextMenu)("member.profile",{event:n,showMentionBtn:!0,member:e,options:{onItemClick:function(){return!1}}})}.bind(this,P,b):null,j=(v=b||E?null:function(e,t,n){t=y.default.getMemberOrTemp(t),(0,u.showContextMenu)("chat.member",{event:n,member:t,chat:m.default.getChat(e)})}.bind(null,w,v),null);return _||(j=b||E?o.default.createElement(d.MemberAvatarCommon,{code:P.id||P.displayName,avatar:P.avatar,shape:P.id&&P.id.startsWith("ext-")?"rounded":"circle",className:k?"state":null,onContextMenu:v,onClick:k,size:r,displayName:P.id?null:P.displayName}):o.default.createElement(d.default,{shape:"circle",className:k?"state":null,memberID:b?0:P.id,onContextMenu:v,onClick:k,size:r})),_=S&&l.default.ui["chat.showMeAsMySenderName"]?a.string("chat.message.senderMe"):b||E?P.displayName:o.default.createElement(f.default,{memberID:P.id}),o.default.createElement("div",{className:"app-message-header"},j,o.default.createElement("header",null,n||b||!C||E?o.default.createElement("span",{onClick:k,className:"title text-dark"},_):o.default.createElement("a",{className:"title rounded text-dark",onContextMenu:v,onClick:h.mentionMemberInSendbox.bind(null,P.id,w)},_),o.default.createElement("small",{className:"time"},(0,i.formatDate)(t.date,e))))}_.propTypes={message:a.default.object.isRequired,staticUI:a.default.bool,avatarSize:a.default.number,dateFormat:a.default.string},_.defaultProps={staticUI:!1,avatarSize:30,dateFormat:"hh:mm"},t.default=(0,o.memo)(_)},7149:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=h;var r=d(n(67294)),o=(t=d(n(45697)),n(7066)),a=n(15973),i=d(n(92691)),l=d(n(73404)),u=d(n(78622)),s=d(n(84662)),c=d(n(84849)),f=["message","prevMessage","className","showDateDivider","showReplied","unread"];function d(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(e){var t=e.message,n=e.prevMessage,i=e.className,d=e.showDateDivider,h=e.showReplied,m=e.unread;if(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,f),!t||t.localDeleted)return null;var y=null,g=t.date;return!0!==d&&("auto"!==d||n&&(0,o.isSameDay)(g,n.date))||(y=r.default.createElement(l.default,{className:"app-message-item",key:"divider",date:g})),d=t.isNotification,g=t.senderId,d=!d&&(0,a.isCurrentUser)(g),g=[i,"app-message-item","app-message-type-".concat(t.type),"is-content-type-".concat(t.contentType),d?"is-send-by-me":null],m&&g.push("is-unread"),i=t.retracted,d=t.isBroadcast,[y,i||d?(delete e.hideHeader,delete e.avatarSize,delete e.headDateFormat,delete e.hideActions,delete e.ignoreStatus,delete e.selection,delete e.chosen,delete e.onClickMultiSelection,m=(i?u:s).default,r.default.createElement(m,p({key:"message",className:g,message:t},e))):r.default.createElement(c.default,p({key:"message",className:g,message:t,prevMessage:n,showedDivider:!!y,showReplied:h},e))]}h.propTypes={message:t.default.instanceOf(i.default).isRequired,prevMessage:t.default.object,showDateDivider:t.default.oneOf(["auto",!0,!1]),className:t.default.string},h.defaultProps={prevMessage:null,className:null,showDateDivider:"auto"}},17253:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=g(n(45697)),a=y(n(67294)),i=n(98649),l=y(n(92691)),u=g(n(73052)),s=n(64393),c=g(n(34160)),f=g(n(7149)),d=n(12341),p=n(73692),h=["messagesOrIndexes","cgid","needResort","reverse","listItemProps","header","footer","className","listRef","bubbleContextMenu","unreadMessageIndexes","fromHistory"];function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=m(t))&&t.has(e))return t.get(e);var n,o,a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]);return a.default=e,t&&t.set(e,a),a}function g(e){return e&&e.__esModule?e:{default:e}}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function v(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e){var t=e.messagesOrIndexes,n=e.cgid,r=e.needResort,o=e.reverse,m=e.listItemProps,y=e.header,g=e.footer,w=e.className,O=e.listRef,S=e.bubbleContextMenu,_=e.unreadMessageIndexes,C=e.fromHistory,E=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,h),(M=(0,a.useContext)(d.SelectionContext)).chosen),P=M.selection,k=M.startMultiSelection,j=M.onClickMultiSelection,x=(0,a.useCallback)((function(e,t){var n,r;(t=u.default.getMessage(t))&&(C?(r=(r=(0,i.getContextMenuItems)("message",n={event:e,message:t,startMultiSelection:k,options:{copySelect:"first",linkTarget:!0}})).filter((function(e){return!["message-retract","message-pin","message-unpin","message-reply"].includes(e.id)})),(0,p.showContextMenuWithItems)("message",r,n)):(0,i.showContextMenu)("message",{event:e,message:t,startMultiSelection:k,options:{copySelect:"first",linkTarget:!0}}))}),[k,C]),M=(0,a.useCallback)((function(e){var t;S&&"WEBVIEW"!==e.target.tagName&&(t=e.target.closest(".app-message-bubble"))&&(t=t.getAttribute("data-id"))&&("function"==typeof S?S:x)(e,+t)}),[S,x]),T=[];if(t.length){var I=r?(0,l.sortChatMessages)(t):t,D=_;if("number"==typeof(I=o&&I[0]<I[I.length-1]?v(I.reverse()):I)[0])for(var A=null,R=0;R<I.length;R++){var N=I[R],B="function"==typeof m?m(N):m,L=D&&D.has(null==(L=u.default.getMessage(N,n,"index"))?void 0:L.index);T.push(a.default.createElement(c.default,b({cgid:n,key:N,messageIndex:N,prevMessageIndex:A,unread:L,selection:P,chosen:E,onClickMultiSelection:j},B))),A=N}else for(var F=null,U=0;U<I.length;U++){var z,W,H=I[U];H&&(z="function"==typeof m?m(H):m,W=D&&D.has(H),T.push(a.default.createElement(f.default,b({id:"message-".concat(H.id),prevMessage:F,key:H.gid,message:H,unread:W,selection:P,chosen:E,onClickMultiSelection:j},z))),F=H)}}return r="function"==typeof y?y():y,t="function"==typeof g?g():g,a.default.createElement("div",b({className:(0,s.classes)("app-message-list",w),onContextMenu:S?M:null,ref:O},e),r,T,t)}O.propTypes={messagesOrIndexes:o.default.oneOfType([o.default.arrayOf(o.default.number),o.default.arrayOf(o.default.instanceOf(l.default))]).isRequired,cgid:o.default.string,needResort:o.default.bool,listRef:o.default.oneOfType([o.default.object,o.default.func]),listItemProps:o.default.oneOfType([o.default.object,o.default.func]),className:o.default.any,header:o.default.any,footer:o.default.any,reverse:o.default.bool,bubbleContextMenu:o.default.oneOfType([o.default.func,o.default.bool]),unreadMessageIndexes:o.default.instanceOf(Set),fromHistory:o.default.bool},O.defaultProps={cgid:"",needResort:!1,listRef:null,listItemProps:null,header:null,footer:null,reverse:!1,className:null,bubbleContextMenu:!1,unreadMessageIndexes:null,fromHistory:!0},t.default=(0,a.memo)(O)},55367:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=h(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=p(n(45697)),i=p(n(40328)),l=n(64393),u=p(n(81411)),s=p(n(20155)),c=p(n(60357)),f=p(n(10562)),d=["replyTo","contentConverter","className","maxReplyLevel","cgid"];function p(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e){e.stopPropagation()}var v={maxWidth:200,maxHeight:150};function w(e){var t=e.replyTo,n=e.contentConverter,r=e.className,a=e.maxReplyLevel,p=e.cgid,h=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,d),y((0,c.default)(),1)[0]),g=(t=y((0,f.default)(t,p,"id"),1)[0],(S=y((0,o.useState)(!1),2))[0]),O=S[1],S=(0,o.useCallback)((function(){O(!0)}),[]);if(!t)return null;var _=t.replyTo,C=null;return _&&!1!==a&&(C=g||0!==a?o.default.createElement(w,{cgid:p,maxReplyLevel:!(!g&&"number"==typeof a)||a-1,replyTo:_,contentConverter:n}):o.default.createElement("a",{className:"app-message-replied-expand-btn btn btn-sm circle lighten-4 muted",onClick:S},o.default.createElement(i.default,{name:"unfold-more-horizontal"})," ",o.default.createElement("small",null,h.string("chat.message.expandAllReplies")))),o.default.createElement("div",m({className:(0,l.classes)("app-message-replied",r),onContextMenu:b},e),C,o.default.createElement("a",{className:"sender",href:"xxc://showChatMessage/".concat(t.cgid,"/").concat(t.id)},o.default.createElement("div",{className:"single row flex-middle "},t.senderName?o.default.createElement("span",{className:"strong  text-dark"},t.senderName):o.default.createElement(s.default,{memberID:t.senderId,className:"strong text-dark"})," ",o.default.createElement("span",{className:"muted"},h.getShortTextOfDate(t.sendTime))," "),o.default.createElement(i.default,{name:"download",size:16,className:"text-primary x-rotate-180"})),t.isImageContent?o.default.createElement(u.default,{message:t,contentConverter:n,imgHolderProps:v}):o.default.createElement(u.default,{message:t,contentConverter:n}))}w.propTypes={replyTo:a.default.number.isRequired,contentConverter:a.default.func,className:a.default.string,maxReplyLevel:a.default.oneOfType([a.default.number,a.default.bool]),cgid:a.default.string.isRequired},w.defaultProps={contentConverter:null,className:null,maxReplyLevel:2},t.default=(0,o.memo)(w)},78622:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=g(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=y(n(45697)),i=n(64393),l=n(15998),u=y(n(92691)),s=n(15973),c=y(n(60357)),f=y(n(74002)),d=y(n(26356)),p=n(31239),h=y(n(74101)),m=["message","className","contentConverter"];function y(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e){var t=e.message,n=e.className,r=(e.contentConverter,e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,m),v((0,c.default)(),1)[0]),a=(y=v((0,o.useState)(!1),2))[0],u=y[1],y=!a&&t.canReedit((0,s.getCurrentUserID)());return a=(0,o.useCallback)((function(){t.canReedit((0,s.getCurrentUserID)())&&(u(!0),t.isCodeContent?(0,p.showChatCodeDialog)(h.default.getChat(t.cgid),{defaultValue:t.doReedit()}):(0,l.sendContentToChat)(t.doReedit(),"text",{cgid:t.cgid,clear:!1,skipDuplicateText:!0}))}),[t]),o.default.createElement("div",b({className:(0,i.classes)("center-content",n)},e),o.default.createElement(f.default,null,o.default.createElement(d.default,{message:t}),y?o.default.createElement("span",null," ",o.default.createElement("a",{className:"text-primary",onClick:a},r.string("chat.message.reedit"))):null))}O.propTypes={message:a.default.instanceOf(u.default).isRequired,className:a.default.oneOfType([a.default.string,a.default.object,a.default.array]),contentConverter:a.default.func},O.defaultProps={className:null,contentConverter:null},t.default=(0,o.memo)(O)},74002:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=c(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=(a=n(45697))&&a.__esModule?a:{default:a},i=n(64393),l=n(7066),u=n(2388),s=["children","avatar","date","dateFormat","className","content"];function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e){var t=e.children,n=e.avatar,r=e.date,a=e.dateFormat,c=e.className,d=e.content;return e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,s),o.default.createElement("div",f({className:(0,i.classes)("app-message-ribbon primary-pale",c)},e),n?(0,u.renderAvatar)(n):null,r?o.default.createElement("span",{style:{paddingRight:8}},(0,l.formatDate)(r,a)):null,d?o.default.createElement("div",{className:"content"},d):null,t)}d.propTypes={date:a.default.oneOfType([a.default.string,a.default.number,a.default.instanceOf(Date)]),avatar:a.default.any,dateFormat:a.default.string,className:a.default.string,content:a.default.node,children:a.default.node},d.defaultProps={date:null,avatar:null,dateFormat:"hh:mm",className:null,content:null,children:null},t.default=(0,o.memo)(d)},87922:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=b(n(67294)),a=y(n(45697)),i=n(64393),l=y(n(40328)),u=y(n(91705)),s=b(n(92691)),c=n(20491),f=y(n(73052)),d=y(n(60357)),p=n(15973),h=n(78717),m=["message","className"];function y(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=g(t))&&t.has(e))return t.get(e);var n,o,a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]);return a.default=e,t&&t.set(e,a),a}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e){var t=e.message,n=e.className,r=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,m),(b=w((0,o.useState)(t.isSending?"sending":t.isSendFailed?"failed":""),2))[0]),a=b[1],y=w((0,d.default)(),1)[0],g=(0,o.useRef)();if((0,o.useEffect)((function(){var e,n,o=g.current,i="is-sending-long-time";if("sending"===r)return e=setTimeout((function(){f.default.getMessage(t.id).isSendFailed&&a("failed")}),s.EXPIRATION_TIME+500),null!=o&&o.classList.contains(i)||(n=setTimeout((function(){o.classList.add(i)}),100)),function(){clearTimeout(e),n&&clearTimeout(n)};null!=o&&o.classList.contains(i)&&o.classList.remove(i)}),[r,t.id]),!r)return null;var b=null,O=null;return"failed"===r?(b=o.default.createElement("span",{className:"text"},y.string("chat.message.sendFailed")),O=o.default.createElement("nav",{className:"nav nav-sm app-message-status-actions"},o.default.createElement("a",{onClick:function(){if(!(0,p.isUserOnline)())return a("failed"),void(0,h.executeCommand)("showMessager",y.string("chat.message.cannotSendOnOffline"),{type:"danger",icon:"alert"});(0,c.sendChatMessage)(t),a("sending")}},o.default.createElement(l.default,{name:"refresh"})," ",y.string("chat.message.resend")),o.default.createElement("a",{onClick:function(){f.default.deleteLocalMessage(t.id)}},o.default.createElement(l.default,{name:"delete"})," ",y.string("common.delete")))):"sending"===r&&(b=o.default.createElement(u.default,{iconClassName:"spin inline-block text-primary"})),o.default.createElement("div",v({className:(0,i.classes)("app-message-status",n,{"is-sending":"sending"===r,"is-send-failed":"failed"===r}),ref:g},e),b,O)}S.propTypes={message:a.default.instanceOf(s.default).isRequired,className:a.default.string},S.defaultProps={className:null},t.default=(0,o.memo)(S)},62906:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=c(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=s(n(45697)),i=n(16986),l=s(n(56692)),u=["messageID","cgid","children","limitLength","prefix","formatCallback","type"];function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e){var t=e.messageID,n=e.cgid,r=e.children,a=e.limitLength,s=e.prefix,c=e.formatCallback,f=e.type;return e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,u),n=(0,l.default)(n,t,a,c),(0,i.isEmptyString)(n)?null:o.default.createElement(f,d(d({},e),{},{title:n}),[s,n,r])}p.propTypes={messageID:a.default.number.isRequired,cgid:a.default.string.isRequired,children:a.default.any,prefix:a.default.any,limitLength:a.default.number,formatCallback:a.default.func,type:a.default.string},p.defaultProps={children:null,prefix:null,limitLength:200,formatCallback:null,type:"span"},t.default=(0,o.memo)(p)},14733:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showMessageInDialog=function(e,t,n){return o.default.show({className:"app-chat-message-view-dialog",content:r.default.createElement(a.default,{className:"space",message:e,cgid:t}),actions:!1,style:{minWidth:400}},n)};var r=i(n(67294)),o=i(n(52133)),a=i(n(26571));function i(e){return e&&e.__esModule?e:{default:e}}},26571:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=d(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=f(n(45697)),i=f(n(73052)),l=f(n(91705)),u=f(n(7149)),s=f(n(61862)),c=["message","cgid"];function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e){var t=e.message,n=e.cgid,r=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,c),m((0,o.useState)((function(){return"number"==typeof t?null:t})),2)),a=r[0],f=r[1];return(0,o.useEffect)((function(){"number"==typeof t&&function(){e=function*(){var e=yield i.default.asyncGetMessage(n,t);f(e)};var e,r=function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){h(a,r,o,i,l,"next",e)}function l(e){h(a,r,o,i,l,"throw",e)}i(void 0)}))};return function(){return r.apply(this,arguments)}}()()}),[t,n]),a?o.default.createElement(u.default,p({message:a,ignoreStatus:!0,showDateDivider:!1,headDateFormat:"yyyy-MM-dd hh:ss"},e)):o.default.createElement(l.default,{className:"has-padding-lg",label:s.default.string("common.loading")})}g.propTypes={message:a.default.oneOfType([a.default.number,a.default.object]).isRequired,cgid:a.default.string},g.defaultProps={cgid:null},t.default=(0,o.memo)(g)},16451:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showMessagesPreviewDialog=t.default=void 0;var r=l(n(67294)),o=l(n(52133)),a=l(n(61862)),i=l(n(17253));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}n={show:t.showMessagesPreviewDialog=function(e,t,n){return o.default.show(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:"app-messages-preview-dialog",title:a.default.string("chat.sendbox.toolbar.previewDraft"),animation:"enter-from-bottom",style:{bottom:0,top:"auto",width:"65%",minWidth:400,position:"absolute"},actions:!1,contentClassName:"box",content:r.default.createElement(i.default,{listItemProps:{ignoreStatus:!0,showDateDivider:!1},messagesOrIndexes:e})},t),n)}},t.default=n},99500:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionButtons=function(e){var t=e.chosen,n=e.endMultiSelection;return r.default.createElement("div",{className:"multi-selection-buttons white"},r.default.createElement(h,{key:"share-messages",disabled:0===t.size,icon:"mdi-share-all-outline",label:l.default.string("chat.share"),className:"btn-icon has-badge shadow-1",color:"#66adff",bgColor:"#DDF3F5",onClick:function(){var e=i.default.getMessages(d(t));(0,a.executeCommand)("showChatShareDialog",e),n()}}),r.default.createElement(h,{key:"copy-messages",disabled:0===t.size,onClick:function(){var e=d(t).sort((function(e,t){return e-t})).map((function(e){return(e=i.default.getMessage(e)).isImageContent?'<img src="'.concat(c.default.getMessageFile(e).getRemoteUrl({preview:!1,withSid:!0}),'" />'):e.isFileContent?e.fileContent.name:"<div>".concat(e.content,"</div>")})).join("\n");document.addEventListener("copy",(function(t){t.clipboardData.setData("text/html","<div>".concat(e,"</div>")),t.clipboardData.setData("text/plain",(0,s.strip)(e)),t.preventDefault()}),{once:!0}),document.execCommand("copy"),n(),(0,a.executeCommand)("showMessager",l.default.string("common.copied"),{type:"success",autoHide:!0})},color:"#04c2af",bgColor:"#d7f5f2",label:l.default.string("common.copy"),icon:"mdi-content-copy",className:(0,s.classes)("btn-icon has-badge shadow-1",{hidden:"browser"===u.default.type})}),r.default.createElement(h,{icon:"mdi-cancel",key:"cancel-multi-selection",color:"#3426af",bgColor:"#F8F5FF",label:l.default.string("chat.sidebar.cancelSelection"),className:"btn-icon has-badge shadow-1",onClick:n}))};var r=f(n(67294)),o=f(n(18033)),a=n(78717),i=f(n(73052)),l=f(n(61862)),u=f(n(94128)),s=n(64393),c=f(n(94592));function f(e){return e&&e.__esModule?e:{default:e}}function d(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e){var t=e.disabled,n=e.onClick,a=e.label,i=e.icon,l=e.className,u=e.color;return e=e.bgColor,r.default.createElement("div",{className:"selection-button"},r.default.createElement(o.default,{disabled:void 0!==t&&t,onClick:n,icon:{name:i,className:"icon-3x",color:u},className:l,style:{backgroundColor:e}}),r.default.createElement("div",{className:"selection-button-label"},a))}},12341:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionContext=void 0,n=((n=n(67294))&&n.__esModule?n:{default:n}).default.createContext({chosen:new Set,selection:!1,startMultiSelection:null,onClickMultiSelection:null}),t.SelectionContext=n},1805:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)((function(){var t=o.default.getChat(e);return t?t.lastBulletinInfo:null}))),n=t[0],i=t[1];return(0,r.useEffect)((function(){function t(){var t=(o.default.getChat(e)||{}).lastBulletinInfo,r=n?n.expiration:0;r===(t?t.expiration:0)&&!r==!n||i(t)}t();var r=o.default.subscribe(e,t),a=n?setTimeout(t,n.expiration-Date.now()+2e3):0;return function(){o.default.unsubscribe(r),a&&clearTimeout(a)}}),[e,n]),n};var r=n(67294),o=(t=n(74101))&&t.__esModule?t:{default:t};function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},10562:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"id",l=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)((function(){return[o.default.getMessage(e,t,n)]}))),u=l[0],s=l[1],c=(0,r.useRef)();return(0,r.useEffect)((function(){if("id"===n&&o.default.hasCacheItem(e))return s([o.default.getMessage(e,t,n)]);c.current=e,s(null),function(){r=function*(){var r=yield o.default.asyncGetMessage(t,e,!0,n);c.current===e&&s([r])};var r,i=function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function l(e){a(i,n,o,l,u,"next",e)}function u(e){a(i,n,o,l,u,"throw",e)}l(void 0)}))};return function(){return i.apply(this,arguments)}}()()}),[e,t,n]),null==u?[u]:u};var r=n(67294),o=(t=n(73052))&&t.__esModule?t:{default:t};function a(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},99207:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,i=(n=a((0,r.useState)((function(){var n;return!(null==(n=o.default.getChat(e))||!n.isUnreadMessage(t))})),2))[0],l=n[1],u=(n=a((0,r.useState)((function(){var n=o.default.getChat(e);return!!n&&n.lastReadMessageIndex===t&&n.lastMessageIndex!==t})),2))[0],s=n[1];return(0,r.useEffect)((function(){var n=o.default.getChat(e);return l(!!n&&n.isUnreadMessage(t)),s(!!n&&n.lastReadMessageIndex===t&&n.lastMessageIndex!==t),o.default.unsubscribe.bind(o.default,o.default.subscribe(e,(function(e){l(e.isUnreadMessage(t)),s(e.lastReadMessageIndex===t&&e.lastMessageIndex!==t)})))}),[e,t]),[i,u]};var r=n(67294),o=(t=n(74101))&&t.__esModule?t:{default:t};function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},61435:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)((function(){return o.default.getMessages(e,t,"index")}))),i=n[0],l=n[1];return n=e.join(","),(0,r.useEffect)((function(){return l(o.default.getMessages(e,t,"index")),o.default.unsubscribe.bind(o.default,o.default.subscribeByIndices(e,t,(function(){return l(o.default.getMessages(e,t,"index"))})))}),[t,n]),i};var r=n(67294),o=(t=n(73052))&&t.__esModule?t:{default:t};function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},59440:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)((function(){return o.default.getList(e)}))),n=t[0],i=t[1];return(0,r.useEffect)((function(){return i(o.default.getList(e)),o.default.unsubscribe.bind(o.default,o.default.subscribe(e,i))}),[e]),n};var r=n(67294),o=(t=n(29795))&&t.__esModule?t:{default:t};function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},17196:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)((function(){return s(e)}))),n=t[0],l=t[1];return(0,r.useEffect)((function(){function t(){var t=s(e);(0,o.isDiffList)(t,n)&&i.default.asyncGetMessages(e,t).then((function(){l(t)})).catch(console.error)}return t(),a.default.unsubscribe.bind(a.default,a.default.subscribe(e,t))}),[e,n]),n};var r=n(67294),o=n(7491),a=l(n(74101)),i=l(n(73052));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e){return(e=a.default.getChat(e,!1))?e.pinnedMessages:[]}},27149:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)(!1)),n=t[0],i=t[1];return(0,r.useEffect)((function(){if(i(!1),/\d+&\d+/.test(e))return o.chatTypingChannel.unsubscribe.bind(o.chatTypingChannel,o.chatTypingChannel.subscribe(e,(function(e){return i(e)})))}),[e]),n};var r=n(67294),o=n(5150);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},367:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)(null!=(t=null==(t=o.default.getChat(e))?void 0:t.unreadMessagesCount)?t:0)),n=t[0],l=t[1];return(0,r.useEffect)((function(){return a.unsubscribeMessagesChange.bind(null,(0,a.subscribeUnreadMessagesChange)(l))}),[e]),n};var r=n(67294),o=(t=n(74101))&&t.__esModule?t:{default:t},a=n(37907);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},86575:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)((function(){return[o.default.getChat(e)]}))),n=t[0],i=t[1];return(0,r.useEffect)((function(){return i([o.default.getChat(e)]),o.default.unsubscribe.bind(o.default,o.default.subscribe(e,(function(e){return i([e])})))}),[e]),n};var r=n(67294),o=(t=n(74101))&&t.__esModule?t:{default:t};function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},14393:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)(l)),t=e[0],n=e[1];return(0,r.useEffect)((function(){var e=(0,a.onFetchingHistory)((function(){return n(l())}));return function(){return(0,a.offFetchingHistoryEvent)(e)}}),[]),t};var r=n(67294),o=n(79429),a=n(23405);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(){var e=(0,o.getFetchingTask)();return e?{task:e,fetching:e.isFetching,progress:e.progress}:{task:null,fetching:!1,progress:0}}},56692:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,s){var c=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)(u(t,n,s))),f=c[0],d=c[1],p=(0,r.useRef)(!1);return(0,r.useEffect)((function(){p.current=!0;var r=u(t,n,s),l=(r?d(r):function(){r=function*(){var r=yield o.default.asyncGetMessage(e,t);p.current&&r&&d((0,a.getChatMessageSummaryText)(r,n,s))};var r,l=function(){var e=this,t=arguments;return new Promise((function(n,o){var a=r.apply(e,t);function l(e){i(a,n,o,l,u,"next",e)}function u(e){i(a,n,o,l,u,"throw",e)}l(void 0)}))};return function(){return l.apply(this,arguments)}}()(),o.default.subscribe(t,(function(){d(u(t,n,s))})));return function(){p.current=!1,o.default.unsubscribe(l)}}),[e,t,n,s]),f};var r=n(67294),o=(t=n(73052))&&t.__esModule?t:{default:t},a=n(20116);function i(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t,n){return(e=o.default.getItemFromCache(e))?(0,a.getChatMessageSummaryText)(e,t,n):""}},60651:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(t=s((0,r.useState)(t),2))[0],a=t[1],c=(t=s((0,r.useState)([]),2))[0],f=t[1],d=(t=s((0,r.useState)(!1),2))[0],p=t[1],h=(0,r.useRef)(),m=(0,r.useRef)(!0);return(0,r.useEffect)((function(){var t="".concat(e," ").concat(n&&n.pageID!==n.pageTotal?n.pageID:""),r=h.current&&h.current.includes(e);h.current!==t&&(h.current=t,function(){t=function*(){var t=h.current,i=(p(!0),s=yield o.default.fetchChatMessagesByPage(e,{pager:r?n:void 0,reverse:!r||m.current,putToCache:!1})).pager,l=s.list,u=s.nextPager,s=s.prevPager;h.current===t&&(i.nextPager=u,i.prevPager=s,2<=l.length&&(null==(t=l[0])?void 0:t.id)>(null==(u=l[1])?void 0:u.id)&&l.reverse(),f(l),a(i),p(!1))};var t,i=function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){u(a,r,o,i,l,"next",e)}function l(e){u(a,r,o,i,l,"throw",e)}i(void 0)}))};return function(){return i.apply(this,arguments)}}()())}),[e,n]),(0,r.useEffect)((function(){return function(){h.current=!1}}),[]),[c,n,d,function(e){if(n&&"object"===l(n)){var t;if((e=Math.max(1,Math.min(n.pageTotal,e)))===n.pageID)return!1;if(1<Math.abs(e-n.pageID))if(t=i(i({},n),{},{pageID:e,range:[0,Number.MAX_SAFE_INTEGER]}),1===e)m.current=!1;else{if(e!==n.pageTotal)return!1;m.current=!0}else t=e<n.pageID?n.prevPager:n.nextPager,m.current=e<n.pageID;return a(t),!0}return!1}]};var r=n(67294),o=(t=n(73052))&&t.__esModule?t:{default:t};function a(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},80797:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},p=(t=s((0,r.useState)(null),2))[0],h=t[1],m=(t=s((0,r.useState)(null),2))[0],y=t[1],g=(t=s((0,r.useState)(0),2))[0],b=t[1],v=(0,r.useRef)(),w=(0,r.useRef)(null),O=void 0===(t=d.returnType)?"message":t,S=d.dateRange,_=d.minDate,C=d.limit;return(0,r.useEffect)((function(){var t=[e,JSON.stringify(n),_,S].join(",");if(t!==w.current){if(w.current=t,v.current&&(v.current.abort(),v.current=null),(0,a.isEmptyString)(e))return b(100),y([]),void h(null);!function(){t=function*(){var t=new i.default,r=(v.current=t,[]),a=[],u=(b(0),y(r),h(null),S?(0,o.getTimeBeforeDesc)(S):_);u=yield(0,l.searchChatsMessagesInDatabase)(e,n,{minDate:u,returnType:O,abortHandler:t,limit:C,beforeSearch:function(e){var n;v.current===t&&(a.push.apply(a,function(e){if(Array.isArray(e))return f(e)}(n=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||c(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h(e))},afterSearchChat:function(e,n,o,i){v.current===t&&o!==i.length-1&&(r.push(n),y([].concat(r)),-1<(o=a.indexOf(e))&&a.splice(o,1),h([].concat(a)),b((i.length-a.length)/i.length))}}),v.current===t&&(v.current=null,y(u),b(100),h(null))};var t,r=function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){u(a,r,o,i,l,"next",e)}function l(e){u(a,r,o,i,l,"throw",e)}i(void 0)}))};return function(){return r.apply(this,arguments)}}()()}}),[e,n,S,_,O,C]),(0,r.useEffect)((function(){return function(){v.current&&(v.current.abort(),v.current=null)}}),[]),{searching:!(!p||!p.length),searchProgress:g,searchResult:m,searchingChats:p}};var r=n(67294),o=n(7066),a=n(16986),i=(t=n(81233))&&t.__esModule?t:{default:t},l=n(938);function u(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},30947:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)(i)),t=e[0],n=e[1];return(0,r.useEffect)((function(){return o.default.unsubscribe.bind(o.default,o.default.subscribeAny((function(){return n(i())})))}),[]),t.split(",").filter((function(e){return e.length}))};var r=n(67294),o=(t=n(74101))&&t.__esModule?t:{default:t};function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=function(){return o.default.getRecentChats({maxRecentTime:0}).map((function(e){return e.gid})).join(",")}},98709:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)(o.default.getUnreadMessageCount())),t=e[0],n=e[1];return(0,r.useEffect)((function(){return a.unsubscribeMessagesChange.bind(null,(0,a.subscribeUnreadMessagesChange)(n))}),[]),t};var r=n(67294),o=(t=n(74101))&&t.__esModule?t:{default:t},a=n(37907);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},88666:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showAboutDialog=t.default=void 0;var r=l(n(67294)),o=l(n(52133)),a=l(n(10176)),i=l(n(61862));function l(e){return e&&e.__esModule?e:{default:e}}n={show:t.showAboutDialog=function(e){return o.default.show({title:i.default.string("common.about"),actions:!1,id:"app-about-dialog",content:r.default.createElement(a.default,null)},e)}},t.default=n},10176:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=m(n(67294)),a=p(n(45697)),i=p(n(91230)),l=p(n(74160)),u=n(64393),s=m(n(61862)),c=p(n(76733)),f=p(n(78379)),d=["className"];function p(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=h(t))&&t.has(e))return t.get(e);var n,o,a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]);return a.default=e,t&&t.set(e,a),a}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=b(e);if(n=t?(n=b(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==o)return o;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(a);function a(){var e=this,t=a;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"render",value:function(){var e=(t=this.props).className,t=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(t,d),n=l.default.ui["app.showPoweredBy"],r=("auto"===n&&(n="xuanxuan"!==i.default.name),s.default.string("app.homepage",l.default.pkg.homepage));return o.default.createElement("div",y({},t,{className:(0,u.classes)("app-about center-content space",e)}),o.default.createElement("section",{className:"text-center"},o.default.createElement("img",{src:(0,s.getMediaPath)("logo"),alt:"logo"}),o.default.createElement(c.default,{className:"space-sm"}),r?o.default.createElement("div",{className:"space-xl"},o.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:"btn rounded text-primary strong",href:r},o.default.createElement("strong",null,r))):null,l.default.pkg.license?o.default.createElement("div",null,o.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:"btn rounded",href:l.default.ui["license.url"]},l.default.ui["license.fullname"])):null,n||"xuanxuan"===i.default.name?o.default.createElement("div",null,o.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:"btn rounded",href:"https://www.easycorp.cn/"},s.default.format("common.copyrightFormat",{year:(new Date).getFullYear(),name:s.default.string("app.companyName")}))):null,l.default.ui.about?o.default.createElement("div",null,l.default.ui.about):null,o.default.createElement("div",null,o.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:"btn rounded",href:"https://twemoji.twitter.com/"},"Emoji icons by Twemoji with CC-BY 4.0")),n&&o.default.createElement(f.default,{className:"btn rounded strong text-important"}," https://xuanim.com")))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.PureComponent),v(t.default=n,"propTypes",{className:a.default.string}),v(n,"defaultProps",{className:null})},76733:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=c(n(67294)),a=c(n(74160)),i=n(7066),l=(y=n(94128))&&y.__esModule?y:{default:y},u=n(74543);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=s(t))&&t.has(e))return t.get(e);var n,o,a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]);return a.default=e,t&&t.set(e,a),a}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=a.default.pkg,y=function(e){var t=s;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h(e);if(n=t?(n=h(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return p(o)}}(s);function s(){var e,t=this,r=s;if(!(t instanceof r))throw new TypeError("Cannot call a class as a function");for(var o,a=arguments.length,i=new Array(a),u=0;u<a;u++)i[u]=arguments[u];return r=function(){var t=(new Date).getTime();e.lastClickTime||(e.lastClickTime=t),e.clickTimes?t-e.lastClickTime<400?(e.clickTimes+=1,e.lastClickTime=t,5<=e.clickTimes&&l.default.call("ui.openDevTools")):(e.clickTimes=0,e.lastClickTime=0):e.clickTimes=1},(o="handleClick")in(t=p(e=n.call.apply(n,[this].concat(i))))?Object.defineProperty(t,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[o]=r,e}return t=s,(e=[{key:"render",value:function(){var e=(0,a.getSpecialVersionName)();return o.default.createElement("div",f({onClick:this.handleClick},this.props,{title:"build at ".concat((0,i.formatDate)(m.buildTime))}),"v",m.displayVersion||(0,u.simplifyVersion)(m.version),m.distributeTime?" (".concat((0,i.formatDate)(m.distributeTime,"YYYYMMDDHHmm"),")"):null,m.buildVersion?".".concat(m.buildVersion):null," ",e?" for ".concat(e):""," ",DEBUG?"[debug]":"")}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),s}(o.PureComponent);t.default=y},87618:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=f(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=c(n(45697)),i=n(64393),l=n(16986),u=c(n(88621)),s=["cgid","className","children","hideOnLoading","type"];function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e){var t=e.cgid,n=e.className,r=e.children,a=e.hideOnLoading,c=e.type,f=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,s),t=(0,u.default)(t),(0,l.isEmptyString)(t));return a&&f?null:o.default.createElement(c,p({className:(0,i.classes)(n,f?"inline-block loading-holder relative loading-holder-line":"")},e),t,r)}h.propTypes={cgid:a.default.string.isRequired,className:a.default.string,type:a.default.string,children:a.default.any,hideOnLoading:a.default.bool},h.defaultProps={type:"span",className:"",children:null,hideOnLoading:!1},t.default=(0,o.memo)(h)},97217:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showImgCropperDialog=t.default=void 0;var r=l(n(67294)),o=l(n(52133)),a=n(97591),i=l(n(61862));function l(e){return e&&e.__esModule?e:{default:e}}n={show:t.showImgCropperDialog=function(e,t,n){var l={current:{}};return o.default.show({id:"app-img-cropper-dialog",closeButton:!1,actions:[{type:"changeImg",className:"x-outline space-right",label:r.default.createElement("label",{className:"text-gray"},r.default.createElement("input",{id:"file-upload-button",type:"file",accept:".jpg,.jpeg,.png",style:{display:"none"},onChange:function(e){e.preventDefault(),e=e.target.files;var t=new FileReader;t.onload=function(){var e;t.result&&null!=(e=l.current)&&e.setImage(t.result)},e&&e.length&&t.readAsDataURL(e[0])},onClick:function(e){e.target.value=null}}),i.default.string("common.changeUploadPhoto")),click:function(){return!1}},{type:"submit"},{type:"cancel"}],onSubmit:function(){var e=null==(e=l.current)?void 0:e.cropperRef.current.getCroppedCanvas({width:100,height:100});if(!e)return!1;e=e.toDataURL(),t(e)},enableBackdropClick:!1,content:r.default.createElement(a.ImgCropper,{ref:l,isPreviewCircle:!0,inputImage:e})},n)}},t.default=n},48325:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=h(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=p(n(45697)),i=p(n(61862)),l=n(64393),u=p(n(63318)),s=p(n(91705)),c=p(n(26774)),f=p(n(62031)),d=p(n(84431));function p(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function m(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){b(a,r,o,i,l,"next",e)}function l(e){b(a,r,o,i,l,"throw",e)}i(void 0)}))}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=O(e);if(n=t?(n=O(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==o)return o;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(a);function a(e){if(this instanceof a)return(e=n.call(this,e)).state={page:1,loading:!1,list:null,recTotal:0},e;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"componentDidMount",value:function(){this.loadNextPage(!0)}},{key:"componentDidUpdate",value:function(e){this.props.searchValue!==e.searchValue&&this.loadNextPage(!0),this.props.deptID!==e.deptID&&this.loadNextPage(!0)}},{key:"componentWillUnmount",value:function(){this._unmounted=!0}},{key:"getTotalPage",value:function(){return this.props.recPerPage?Math.ceil(this.state.recTotal/this.props.recPerPage):0}},{key:"hasNextPage",value:function(){return 0<this.state.recTotal&&this.state.page<this.getTotalPage()}},{key:"loadNextSearchPage",value:function(e){var t=this,n=this.props.onMembersChange,r=this.state,o=r.page,a=r.recTotal;this.setState({loading:!0,list:null},v((function*(){var r=(u=t.props).recPerPage,i=u.searchValue,l=u.deptID,u=u.excludes;try{var s=yield d.default.searchFromRemote(i,{dept:l,exclude:u,pager:{recPerPage:r,recTotal:!e&&a||0,pageID:e?1:o+1}}),c=s.list,f=s.pager;c=c.map((function(e){return e.id}))}catch(u){c=[],console.error("Search members from server error",u)}n&&n(c),t._unmounted||t.setState({loading:!1,recTotal:f.recTotal,page:f.pageID,list:c})})))}},{key:"loadNextNoSearchPage",value:function(e){var t=this,n=this.props.onMembersChange;e=e?{recTotal:0,page:1,list:null}:{},Object.assign(e,{loading:!0}),this.setState(e,v((function*(){var e=(r=t.props).recPerPage,r=r.deptID,o=(i=t.state).list,a=i.page,i=i.recTotal,l=m(new Set(t.props.excludes));i=(r=yield c.default.fetchMembersListOfDept(r,{pageID:i?a+1:1,recPerPage:e},l)).pager,a=r.data,e=[].concat(m(o||[]),m(a)),n&&n(e),t._unmounted||t.setState({loading:!1,recTotal:i.recTotal,page:i.pageID,list:e})})))}},{key:"loadNextPage",value:function(e){""===this.props.searchValue?this.loadNextNoSearchPage(e):this.loadNextSearchPage(e)}},{key:"render",value:function(){var e=(d=this.props).selections,t=d.onClickMember,n=[],r=(d=this.state).page,a=d.loading,c=d.list,d=d.recTotal;if(r&&c){var p,h=new Set(e),m=function(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=y(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}(c);try{for(m.s();!(p=m.n()).done;){var g=p.value;n.push(o.default.createElement(f.default,{memberID:g,key:g,onClick:t.bind(null,g)},o.default.createElement("div",{className:(0,l.classes)("checkbox checkbox-sm",{checked:h.has(g)})},o.default.createElement("label",null))))}}catch(d){m.e(d)}finally{m.f()}}return a?n.push(o.default.createElement(s.default,{key:"spinner"})):0===d?n.push(o.default.createElement(u.default,{key:"notFound",icon:"information-outline",className:"flex-middle item muted disabled",title:o.default.createElement("span",{className:"title small"},i.default.string("common.notFoundOptions"))})):this.hasNextPage()&&(r=i.default.string("common.loadMore"),n.push(o.default.createElement(u.default,{key:"loadMore",icon:"chevron-double-down",className:"flex-middle item muted",title:o.default.createElement("span",{className:"title small"},r),onClick:this.loadNextPage.bind(this,!1)}))),o.default.createElement("div",{className:"list compact"},n)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.PureComponent),S(t.default=n,"propTypes",{selections:a.default.array,excludes:a.default.array,onClickMember:a.default.func,recPerPage:a.default.number,deptID:a.default.number,searchValue:a.default.string,onMembersChange:a.default.func}),S(n,"defaultProps",{selections:[],excludes:null,onClickMember:null,recPerPage:100,deptID:0,searchValue:"",onMembersChange:null})},99382:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=v;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=d(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=(t=f(n(45697)),f(n(61862))),i=n(64393),l=f(n(40328)),u=f(n(91705)),s=f(n(64208)),c=f(n(26774));function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e){return e.title?e:{title:e.name,type:"group",id:e.id,list:e.children}}function v(e){var t=e.className,n=e.onSelectMenuItem,r=(e=m((0,o.useState)(0),2))[0],f=e[1],d=(e=m((0,o.useState)(!0),2))[0],y=e[1],g=(e=m((0,o.useState)(null),2))[0],v=e[1],w=(0,o.useRef)(!1);function O(e){f(e),n&&n(e)}return(0,o.useEffect)((function(){function e(){var t;return t=function*(){var e;w.current&&(y(!0),e=yield c.default.fetchDeptsTree(),w.current&&(v(e),y(!1)))},(e=function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){h(a,r,o,i,l,"next",e)}function l(e){h(a,r,o,i,l,"throw",e)}i(void 0)}))}).apply(this,arguments)}return w.current=!0,function(){e.apply(this,arguments)}(),function(){w.current=!1}}),[]),e={list:[{title:a.default.string("contacts.members.all"),id:"root",onClick:O.bind(null,0),className:r?"":"primary-pale text-primary"}],root:!0},d?e.list.push(o.default.createElement(u.default,null)):g&&(d=e.list).push.apply(d,p(g)),o.default.createElement(s.default,{className:"compact",rootClassName:(0,i.classes)("app-depts-tree",t),group:e,hideEmptyGroup:!1,itemConverter:b,headingCreator:function(e,t){if(e.root&&!e.title)return null;var n=t.isExpand?"chevron-down":"chevron-right";return o.default.createElement("a",{onClick:O.bind(null,e.id),className:(0,i.classes)("heading",{"primary-pale":e.id===r})},o.default.createElement(l.default,{onClick:t.handleHeadingClick,name:n,className:(0,i.classes)("state circle",{invisible:!e.list||!e.list.length})}),o.default.createElement("div",{className:(0,i.classes)("title",{"text-primary":e.id===r})},e.title))},defaultExpand:!0,toggleWithHeading:!1})}v.defaultProps={className:null,onSelectMenuItem:null},v.propTypes={className:t.default.string,onSelectMenuItem:t.default.func}},36940:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=f(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=c(n(45697)),i=n(64393),l=c(n(18033)),u=c(n(94128)),s=c(n(60357));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e){var t=e.className,n=e.primaryBtnText,r=e.cancelBtnText,a=e.primaryBtnClassName,c=e.cancelBtnClassName,f=e.onClickPrimary,p=(e=e.onClickCancel,d((0,s.default)(),1)[0]);return a=[o.default.createElement(l.default,{disabled:!f,key:"btn-confirm",className:a,onClick:f,label:n||p.string("common.confirm")}),o.default.createElement(l.default,{key:"btn-cancel",className:c,onClick:e,label:r||p.string("common.cancel")})],u.default.env.isOSX&&a.reverse(),o.default.createElement("div",{className:(0,i.classes)("actions toolbar",t)},a)}h.propTypes={className:a.default.oneOfType([a.default.string,a.default.object,a.default.array]),primaryBtnText:a.default.string,cancelBtnText:a.default.string,primaryBtnClassName:a.default.string,cancelBtnClassName:a.default.string,onClickPrimary:a.default.func,onClickCancel:a.default.func},h.defaultProps={className:"text-center has-padding-lg",primaryBtnText:null,cancelBtnText:null,primaryBtnClassName:"btn-wide bg-primary rounded",cancelBtnClassName:"gray x-outline cancel-btn btn-wide rounded",onClickPrimary:null,onClickCancel:null},t.default=(0,o.memo)(h)},52278:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.showDisplaySourceSelector=t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=p(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=d(n(45697)),i=d(n(52133)),l=d(n(40328)),u=d(n(2388)),s=n(64393),c=d(n(11803)),f=n(99838);function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function h(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var b=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=y(e);if(n=t?(n=y(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==o)return o;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(a);function a(e){var t;if(this instanceof a)return(t=n.call(this,e)).state={selectedSourceID:e.selected},t;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"_handleSourceClick",value:function(e){var t=this;this.setState({selectedSourceID:e},(function(){var n=t.props.onSelectChange;n&&n(e)}))}},{key:"_handleSourceDoubleClick",value:function(e){var t=this;this.setState({selectedSourceID:e},(function(){var n=t.props.onDoubleClick;n&&n(e)}))}},{key:"render",value:function(){var e=this,t=this.props.sources,n=this.state.selectedSourceID,r=[],a=[];return t.forEach((function(t){var i=t.name,c="screen"===t.type;c&&("Entire Screen"===i?i=e.props.Lang.string("conference.entireScreen"):i.startsWith("Screen ")&&(i=i.replace(/^Screen /,e.props.Lang.string("conference.screenNamePrefix")))),t=o.default.createElement("div",{className:(0,s.classes)("app-display-source-item rounded state",{primary:n===t.id}),key:t.id,onClick:e._handleSourceClick.bind(e,t.id),onDoubleClick:e._handleSourceDoubleClick.bind(e,t.id)},o.default.createElement("div",{className:"app-display-source-thumbnail center-content"},t.thumbnail?o.default.createElement("img",{src:t.thumbnail,alt:i,className:"shadow"}):o.default.createElement(l.default,{name:c?"laptop-".concat((0,f.isOSType)("win")?"windows":"mac"):"application",size:56,className:"text-gray"})),o.default.createElement("div",{className:"app-display-source-name x-list-item flex-middle"},t.appIcon?o.default.createElement(u.default,{image:t.appIcon,size:24}):null,o.default.createElement("div",{className:"text-ellipsis title"},i))),(c?r:a).push(t)})),o.default.createElement("div",{className:"app-display-source-selector"},0<r.length&&o.default.createElement("div",{className:"app-display-source-section"},o.default.createElement("div",{className:"heading text-primary"},o.default.createElement(l.default,{name:"monitor"}),o.default.createElement("div",{className:"title strong"},this.props.Lang.string("conference.displayType.screen"))),o.default.createElement("div",{className:"row"},r)),0<a.length&&o.default.createElement("div",{className:"app-display-source-section"},o.default.createElement("div",{className:"heading text-primary"},o.default.createElement(l.default,{name:"application"}),o.default.createElement("div",{className:"title strong"},this.props.Lang.string("conference.displayType.window"))),o.default.createElement("div",{className:"row"},a)))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component);g(b,"propTypes",{sources:a.default.array.isRequired,Lang:a.default.object.isRequired,selected:a.default.string,onSelectChange:a.default.func,onDoubleClick:a.default.func}),g(b,"defaultProps",{selected:null,onSelectChange:null,onDoubleClick:null}),n={show:t.showDisplaySourceSelector=function(e,t,n){return new Promise((function(r,a){var l=e[0].id,u=!1,s=t.Lang,f="display-source-selector-dialog";i.default.show(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:f,id:f,title:s.string("conference.selectDisplaySourceToShare"),actions:[{type:"submit",label:s.string("common.confirmSelect")},{type:"cancel",label:s.string("common.cancel")}],onSubmit:function(){u=!0,r(l)},onHidden:function(){u||a(c.default.create("User canceled on select display source.","USER_CANCELED"))},content:o.default.createElement(b,{Lang:s,sources:e,selected:l,onSelectChange:function(e){l=e},onDoubleClick:function(e){u=!0,r(e),i.default.hide(f)}})},t),n)}))}},t.default=n},28784:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=w(n(45697)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==S(e)&&"function"!=typeof e)return{default:e};if((t=v(t))&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(n(67294)),a=n(50943),i=w(n(40328)),l=w(n(74933)),u=w(n(74101)),s=w(n(61862)),c=w(n(84431)),f=n(16986),d=n(70290),p=w(n(75738)),h=n(15998),m=n(18876),y=n(78717),g=w(n(94128)),b=["placeholder","onReturnKeyDown","onPastedFiles","onPastedText","handleKey","defaultState","onRequestSuggestions","suggestionsItemRender","onClickMentionSuggestion","onClickMentionsMoreBtn","onChange","useFakeEmptyInput"];function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function w(e){return e&&e.__esModule?e:{default:e}}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(n=t?(n=j(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,n&&("object"===S(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return k(r)}}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function M(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){M(a,r,o,i,l,"next",e)}function l(e){M(a,r,o,i,l,"throw",e)}i(void 0)}))}}var I=g.default.access("fs");function D(e){var t=e.block,n=e.src,r=void 0===(a=e.onDeleteBlock)?null:a,a=void 0===(a=e.alt)?"":a,l=void 0===(e=e.previewOnDoubleClick)||e,u=(0,o.useRef)(),c=((0,o.useEffect)((function(){u.current.parentNode.addEventListener("click",(function(e){var t=u;t=null==(t=t.current)||null==(t=t.parentNode)?void 0:t.nextSibling,"I"!==e.target.nodeName&&t&&(e.preventDefault(),window.getSelection().removeAllRanges(),window.getSelection().collapse(t))}))}),[]),e=(0,o.useCallback)((function(){l&&(0,d.showMediaPreviewWindow)(n)}),[n,l]),(0,o.useCallback)((function(){r(t)}),[r,t])),f=(0,o.useCallback)((function(e){var t,r,o=[];g.default.has("clipboard.writeImageFromUrl")&&o.push({id:"copy-image",label:s.default.string("menu.image.copy"),click:(t=T((function*(){try{var e,t=yield(yield fetch(n)).blob();return t instanceof Blob?(e=yield(0,m.blobToDataURI)(t),void g.default.call("clipboard.writeImageFromUrl",e,"base64")):(console.error("The image that cannot be copied is",t),(0,y.executeCommand)("showMessager",s.default.error("CANNOT_HANDLE_IMAGE")))}catch(e){return(0,y.executeCommand)("showMessager",s.default.error(e))}})),function(){return t.apply(this,arguments)})}),g.default.has("dialog.saveAsImageFromUrl")&&o.push({id:"save-image",label:s.default.string("menu.image.saveAs"),click:(r=T((function*(){try{var e=yield g.default.call("dialog.saveAsImageFromUrl",n);if(!e)return;var t=g.default.has("ui.openFileItem")?[{label:s.default.string("file.open"),click:function(){return g.default.call("ui.openFileItem",e)}},{label:s.default.string("file.openFolder"),click:function(){return g.default.call("ui.showItemInFolder",e)}}]:null;(0,y.executeCommand)("showMessager",s.default.format("file.fileSavedAt.format",e),{actions:t})}catch(e){return(0,y.executeCommand)("showMessager",s.default.error(e))}})),function(){return r.apply(this,arguments)})}),(0,y.executeCommand)("contextMenu",{x:e.pageX,y:e.pageY,target:e.target,placement:"top"},o),e.preventDefault()}),[n]);return o.default.createElement("div",{ref:u,className:"draft-editor-image-block relative flex-inline",onContextMenu:f},o.default.createElement("img",{className:"draft-editor-image",src:n,alt:a,onDoubleClick:e,style:{maxHeight:100}}),r?o.default.createElement("button",{className:"btn iconbutton rounded hint--bottom-right draft-editor-image-delete dock dock-top dock-right black","data-hint":s.default.string("common.delete"),onClick:c,type:"button"},o.default.createElement(i.default,{name:"mdi-close"})):null)}function A(e){var t=e.block,n=e.blockProps,r=(e=e.contentState,t.getEntityAt(0));return r&&"IMAGE"===(e=e.getEntity(r)).getType()?(r=e.getData(),o.default.createElement(D,{src:r.src,alt:r.alt,block:t,onDeleteBlock:n.onDeleteBlock})):null}D.propTypes={src:r.default.string.isRequired,block:r.default.object.isRequired,onDeleteBlock:r.default.func,alt:r.default.string,previewOnDoubleClick:r.default.bool},D.defaultProps={onDeleteBlock:null,alt:"",previewOnDoubleClick:!0},A.propTypes={block:r.default.object.isRequired,blockProps:r.default.object.isRequired,contentState:r.default.object.isRequired};var R=function(e,t,n){for(var r,o=t.getText();null!==(r=e.exec(o));){var a=r.index;n(a,a+r[0].length)}},N=null,B=null;function L(e,t){e.classList.toggle("app-mention-not-in-group",!t),t?e.removeAttribute("data-hint"):e.setAttribute("data-hint",s.default.format("chat.sendbox.memberNotInGroup",e.getAttribute("data-member-name")))}function F(e){var t=e.decoratedText,n=e.children,r=null==(r=new RegExp(f.REGEXP_AT_USER).exec(t))?void 0:r[1],a=(0,o.useRef)();if((0,o.useEffect)((function(){var e=a.current;if(e){var t,n=document.getElementById(e);if(n)return(e=null==(e=n.closest(".app-chat-drafteditor"))?void 0:e.getAttribute("data-chat"))&&(t=u.default.getChat(e))&&t.isGroup?void u.default.tryFetchChatMembers(e).then((function(e){L(n,e&&e.has(+n.getAttribute("data-member")))})):L(n,!0)}}),[t]),r){if(N=N||s.default.string("chat.message.atAll"),"all"===r||r===N)return o.default.createElement("span",{"data-hint":N,className:"at-all text-accent"},n);if(t=c.default.guessMemberInCache(r))return r="mention-".concat(e.offsetKey),a.current=r,o.default.createElement("span",{className:"hint-fast text-accent",id:r,"data-member":t.id,"data-member-name":t.displayName},n)}return n}function U(e){var t=e.decoratedText,n=(e=e.children,t=t.trim(),l.default.mapUnicodeCharactersToShort());return(n=l.default.emojiList[n[t]])?(n="".concat(l.default.imagePathPNG+n.uc_base,".").concat(l.default.imageType),n="url(".concat(n,") left top / contain no-repeat"),o.default.createElement("span",{title:t,style:{width:16,height:16,display:"inline-block",overflow:"hidden",whiteSpace:"nowrap",background:n,textAlign:"right",verticalAlign:"bottom",position:"relative",top:-2,fontSize:"16px",color:"transparent",caretColor:"var(--color-fore)"}},e)):e}function z(){return B=B||new a.DraftJS.CompositeDecorator([{strategy:function(e,t){R(new RegExp(f.REGEXP_AT_USER,"g"),e,t)},component:F},{strategy:function(e,t){R(l.default.regUnicode,e,t)},component:U},{strategy:function(e,t){R(/(https?):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/g,e,t)},component:function(e){var t=e.offsetKey;return e=e.children,o.default.createElement("span",{className:"text-accent","data-offset-key":t},e)}}])}n=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E(t,e);var n=P(r);function r(e){var t;if(this instanceof r)return x(k(t=n.call(this,e)),"handleEditorClick",(function(){t.focus(0)})),x(k(t),"handleDeleteBlock",(function(e,n){var r,o,i,l,u;e&&(l=(u=t.state.editorState).getCurrentContent(),i=e.getKey(),r=l.getBlockBefore(i),o=l.getBlockBefore(i),i=u.getSelection().merge({anchorKey:i,anchorOffset:0,focusKey:i,focusOffset:e.getLength()}),e=a.DraftJS.Modifier.applyEntity(l,i,null),l=a.DraftJS.EditorState.push(u,e,"apply-entity"),u=a.DraftJS.Modifier.removeRange(e,i,"backward"),e=a.DraftJS.EditorState.push(l,u,"remove-range"),r?e=a.DraftJS.EditorState.forceSelection(e,a.DraftJS.SelectionState.createEmpty(r.getKey()).merge({anchorOffset:r.getLength(),focusOffset:r.getLength()})):o&&(e=a.DraftJS.EditorState.forceSelection(e,a.DraftJS.SelectionState.createEmpty(o.getKey()))),t.onChange(e,n))})),x(k(t),"blockRendererFn",(function(e){if("atomic"===e.getType())return{component:A,editable:!1,props:{onDeleteBlock:t.handleDeleteBlock}}})),x(k(t),"getEditorRef",(function(e){t.editor=e})),x(k(t),"handleFakeInputChange",(function(e){t._fakeInputCompositionStarted||t.handleFakeInputCompositionEnd(e)})),x(k(t),"handleFakeInputCompositionStart",(function(){t._fakeInputCompositionStarted=!0})),x(k(t),"handleFakeInputCompositionEnd",(function(e){t.enableDraftEditor((function(){t.focus({moveCursorToEnd:!0})}),e.target.value)})),x(k(t),"handleFakeInputPaste",(function(e){var n,r=(e.clipboardData||e.originalEvent.clipboardData).items,o=[],a=_(r);try{for(a.s();!(n=a.n()).done;){var i=n.value;"file"===i.kind&&o.push(i.getAsFile())}}catch(e){a.e(e)}finally{a.f()}t.enableDraftEditor((function(){t.focus((function(){t.handlePastedFiles(o)}))}),e.target.value)})),t.state={enabled:!e.useFakeEmptyInput||!!e.defaultState,editorState:e.defaultState?"string"==typeof e.defaultState?a.DraftJS.EditorState.createWithContent(a.DraftJS.ContentState.createFromText(e.defaultState),z()):e.defaultState:a.DraftJS.EditorState.createEmpty(z())},t.onChange=t.onChange.bind(k(t)),t.handleKeyCommand=t.handleKeyCommand.bind(k(t)),t.handleReturn=t.handleReturn.bind(k(t)),t.handlePastedText=t.handlePastedText.bind(k(t)),t.handlePastedFiles=t.handlePastedFiles.bind(k(t)),t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"componentDidCatch",value:function(e,t){this.forceUpdate(),DEBUG&&console.warn("DraftEditor throwed a error",e,t)}},{key:"componentWillUnmount",value:function(){this.lastFocusTimer&&(clearTimeout(this.lastFocusTimer),this.lastFocusTimer=null)}},{key:"enableDraftEditor",value:function(e,t){var n;this.state.enabled?e&&e():(n=z(),this.setState({enabled:!0,editorState:"string"==typeof t&&t.length?a.DraftJS.EditorState.createWithContent(a.DraftJS.ContentState.createFromText(t),n):a.DraftJS.EditorState.createEmpty(n)},e))}},{key:"getEditorState",value:function(){return this.state.editorState}},{key:"getContent",value:function(){var e=this.state.editorState;return e?e.getCurrentContent().getPlainText():""}},{key:"clearContent",value:function(){this.state.enabled&&this.onChange(a.DraftJS.EditorState.createEmpty(B))}},{key:"appendContent",value:function(e,t,n){var r=this;"string"==typeof e&&e.length&&this.enableDraftEditor((function(){"function"==typeof t&&(n=t,t={});var o=void 0!==(o=(u=t||{}).skipDuplicateText)&&o,i=void 0!==(i=u.replaceAfter)&&i,l=u.clear,u=void 0!==(u=u.appendSpaceBefore)&&u,s=r.state.editorState;if(void 0!==l&&l)s=a.DraftJS.EditorState.createEmpty(B);else if(o&&(l=s.getCurrentContent().getPlainText(),!0===o&&l.includes(e)||"end"===o&&l.trim().endsWith(e.trim())))return;e=e.replace(/(\r?\n)+$/g,""),o=s.getSelection(),"string"==typeof i&&i.length&&(l=o.getAnchorOffset(),c=o.getAnchorKey(),c=s.getCurrentContent().getBlockForKey(c).getText().substring(0,l).lastIndexOf(i),o=o.merge({anchorOffset:c,focusOffset:l})),u&&!e.startsWith(" ")&&(i=o.getAnchorKey(),c=s.getCurrentContent().getBlockForKey(i).getText(),0<(l=o.getStartOffset())&&" "!==c[l-1]&&(e=" ".concat(e))),u=o.getEndOffset(),i=o.getStartOffset();var c=s.getCurrentContent();l=u===i?a.DraftJS.Modifier.insertText(c,o,e):a.DraftJS.Modifier.replaceText(c,o,e),s=a.DraftJS.EditorState.push(s,l,"insert-fragment"),r.onChange(s,n)}))}},{key:"appendEmoji",value:function(e,t){var n=null;"string"==typeof e&&e.length?l.default.emojiList[e]&&(n=l.default.shortnameToUnicode(e)):"object"===S(e)&&e&&(e.shortname?n=l.default.shortnameToUnicode(e.shortname):e.uc_full?n=l.default.convert(e.uc_full):e.unicode&&(n=l.default.convert(e.unicode))),null===n?t&&t(n,e):this.appendContent("".concat(n," "),{appendSpaceBefore:!0},t)}},{key:"appendImage",value:function(e,t){var n=this;this.enableDraftEditor((function(){var r=(i=n.state.editorState).getCurrentContent(),o=((o=e.path||e.url||e.viewUrl)?o.startsWith("data:image")||o.startsWith("http://")||o.startsWith("https://")||o.startsWith("file://")||(o="file://".concat(o,"?t=").concat((new Date).getTime())):e.blob?o=URL.createObjectURL(e.blob):(e instanceof Blob||e instanceof File)&&(o=URL.createObjectURL(e)),r=r.createEntity("IMAGE","IMMUTABLE",{src:o,alt:e.name||"",image:e})).getLastCreatedEntityKey(),i=a.DraftJS.EditorState.set(i,{currentContent:r});n.onChange(a.DraftJS.AtomicBlockUtils.insertAtomicBlock(i,o," "),t)}))}},{key:"appendMentions",value:function(e,t,n){var r=this;this.enableDraftEditor((function(){"function"==typeof t&&(n=t,t={});var o=void 0!==(o=(l=t||{}).replaceAfter)&&o,i=void 0===(u=l.insertTrailingSpace)||u,l=void 0!==(u=l.clear)&&u,u=!0===o?"@":o;Array.isArray(e)||(e=[e]);var f,d,h=r.state.editorState,m=(l&&(h=a.DraftJS.EditorState.createEmpty(B)),"string"==typeof u&&u.length&&(l=(o=h.getSelection()).getAnchorOffset(),f=o.getAnchorKey(),f=h.getCurrentContent().getBlockForKey(f).getText().substring(0,l).lastIndexOf(u),u=o.merge({anchorOffset:f,focusOffset:l}),o=a.DraftJS.Modifier.replaceText(h.getCurrentContent(),u,""),h=a.DraftJS.EditorState.push(h,o,"insert-fragment")),_(e));try{for(m.s();!(d=m.n()).done;){var y=d.value,g=void 0,b=void 0,v=void 0;if("all"===y)g="@".concat(s.default.string("chat.message.atAll")),b=h.getCurrentContent().createEntity("MENTION","IMMUTABLE",{id:"all",mention:g}),v=a.DraftJS.Modifier.insertText(b,h.getSelection(),g,["MENTION"]);else{if(!(y=y instanceof p.default?y:c.default.guessMemberInCache(y)))continue;g=y.mentionText;var w=(b=h.getCurrentContent().createEntity("MENTION","IMMUTABLE",{id:y.id,mention:g})).getLastCreatedEntityKey();v=a.DraftJS.Modifier.insertText(b,h.getSelection(),g,["MENTION"],w)}h=a.DraftJS.EditorState.push(h,v,"insert-fragment"),i&&(v=a.DraftJS.Modifier.insertText(h.getCurrentContent(),h.getSelection()," "),h=a.DraftJS.EditorState.push(h,v,"insert-fragment"))}}catch(l){m.e(l)}finally{m.f()}r.onChange(h,n)}))}},{key:"getContentList",value:function(){var e,t,n=[];if(this.state.enabled)return e=this.state.editorState.getCurrentContent(),t="",e.getBlocksAsArray().forEach((function(r){var o,i,l,u;"atomic"===r.type?(t.length&&t.trim().length&&(n.push({type:"text",content:t}),t=""),(o=r.getEntityAt(0))&&(o=e.getEntity(o))&&n.push({type:"image",image:o.data.image})):(t.length&&(t+="\n"),i=r.text,l=[],u=0,r.findEntityRanges((function(e){return!!(e=e.getEntity())&&"MENTION"===a.DraftJS.Entity.get(e).getType()}),(function(e,t){var n=r.getEntityAt(e);n=a.DraftJS.Entity.get(n),l.push(i.substring(u,e),"[".concat(n.data.mention,"](@#").concat(n.data.id,")")),u=t})),l.push(i.substring(u,i.length)),t+=l.join(""))})),t.length&&t.trim().length&&(n.push({type:"text",content:t}),t=""),n}},{key:"focus",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"number"===(n=S(t))?t={delay:t}:"boolean"===n?t={moveCursorToEnd:t}:"function"===n&&(t={callback:t});var n=void 0===(n=t.delay)?100:n,r=t.callback,o=t.moveCursorToEnd;this.lastFocusTimer&&(clearTimeout(this.lastFocusTimer),this.lastFocusTimer=null),this.lastFocusTimer=setTimeout((function(){e.editor.focus(),e.lastFocusTimer=null,o&&e.moveCursorToEnd(),r&&r()}),n)}},{key:"onChange",value:function(e,t){var n=this,r=e.getCurrentContent();this.setState({editorState:e},(function(){t&&t(r);var e=n.props.onChange;e&&e(r)}))}},{key:"handleKeyCommand",value:function(e){var t=this.state.editorState;if("backspace"===e){var n=t.getSelection().getStartKey(),r=t.getCurrentContent();if(!r.getBlockForKey(n).getLength()&&(r=r.getBlockBefore(n))&&"atomic"===r.type)return this.handleDeleteBlock(r),"handled"}if(this.props.handleKey)return(n=a.DraftJS.RichUtils.handleKeyCommand(t,e))?(this.onChange(n),"handled"):"not-handled"}},{key:"handleReturn",value:function(e){var t=this.props.onReturnKeyDown;return t?t(e):"not-handled"}},{key:"handlePastedText",value:function(e,t){e=null==(n=e)?void 0:n.replace(/\r\n?/g,"\r\n");var n=this.props.onPastedText;return n?n(e,t):this.appendContent(e||t),"handled"}},{key:"handlePastedFiles",value:function(e){return I&&(e=e.filter((function(e){return!I.isDirectory(e.path)||((0,y.executeCommand)("showMessager",s.default.error("UPLOAD_FOLDER_NOT_SUPPORTED"),{type:"warning"}),!1)}))),(this.props.onPastedFiles||h.sendFilesToChat)(e),"handled"}},{key:"moveCursorToEnd",value:function(e){var t=this.state.editorState,n=(r=t.getCurrentContent().getBlockMap()).last().getKey(),r=r.last().getLength();n=new a.DraftJS.SelectionState({anchorKey:n,anchorOffset:r,focusKey:n,focusOffset:r}),r=a.DraftJS.EditorState.forceSelection(t,n),this.onChange(r,e)}},{key:"render",value:function(){var e=(l=this.props).placeholder,t=(l.onReturnKeyDown,l.onPastedFiles,l.onPastedText,l.handleKey,l.defaultState,l.onRequestSuggestions),n=l.suggestionsItemRender,r=l.onClickMentionSuggestion,i=l.onClickMentionsMoreBtn,l=(l.onChange,l.useFakeEmptyInput,function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(l,b)),u=(s=this.state).editorState,s=s.enabled;return o.default.createElement("div",O({},l,{onClick:this.handleEditorClick}),s?o.default.createElement(a.AutocompleteEditor,{ref:this.getEditorRef,placeholder:e,editorState:u,onChange:this.onChange,handleKeyCommand:this.handleKeyCommand,handleReturn:this.handleReturn,blockRendererFn:this.blockRendererFn,handlePastedText:this.handlePastedText,handlePastedFiles:this.handlePastedFiles,onSuggestionSelect:r,onClickMoreSuggestionBtn:i,onRequestSuggestions:t,suggestionsItemRender:n,delay:500}):o.default.createElement("div",{className:"draft-editor-fake relative"},o.default.createElement("input",{type:"text",className:"input dock dock-top",required:!0,defaultValue:"",ref:this.getEditorRef,onCompositionStart:this.handleFakeInputCompositionStart,onCompositionEnd:this.handleFakeInputCompositionEnd,onChange:this.handleFakeInputChange,onPaste:this.handleFakeInputPaste}),o.default.createElement("div",{className:"public-DraftEditorPlaceholder-root"},e)))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.PureComponent),x(t.default=n,"propTypes",{placeholder:r.default.string,onChange:r.default.func,handleKey:r.default.bool,onReturnKeyDown:r.default.func,onPastedText:r.default.func,onPastedFiles:r.default.func,defaultState:r.default.any,onRequestSuggestions:r.default.func,suggestionsItemRender:r.default.func,onClickMentionSuggestion:r.default.func,onClickMentionsMoreBtn:r.default.func,useFakeEmptyInput:r.default.bool}),x(n,"defaultProps",{placeholder:null,onChange:null,onReturnKeyDown:null,onPastedText:null,onPastedFiles:null,handleKey:!1,defaultState:null,onRequestSuggestions:null,suggestionsItemRender:null,onClickMentionSuggestion:null,onClickMentionsMoreBtn:null,useFakeEmptyInput:!1})},38130:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DYNAMIC_FORM_DIALOG_ID=void 0,t.showDynamicFormDialog=function(e,t){var n=e.title,u=e.inputs,s=e.dataHandler,f=(e=void 0===(e=e.submitLabel)?o.default.string("common.confirm"):e,r.default.createRef());return a.default.show({title:n,id:c,content:r.default.createElement(l.default,null,r.default.createElement(i.default,{ref:f,inputProps:u,dataHandler:function(e){a.default.hide(c,(function(){return s(e)}),!0)}})),actions:[{type:"submit",label:e},{type:"cancel"}],onSubmit:function(){var e=f.current;return e.requestSubmit?e.requestSubmit():e.submit(),!1}},t)},t.validateFormProps=function(e){var t;try{t=JSON.parse(e)}catch(e){return null}if(!t.title||!t.inputs||!t.inputs.length)return null;var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){var r;if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}(t.inputs);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(!o.name||!o.type)return null}}catch(e){r.e(e)}finally{r.f()}return t};var r=u(n(67294)),o=u(n(61862)),a=u(n(52133)),i=u(n(4500)),l=u(n(62192));function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c="app-dynamic-form-dialog";t.DYNAMIC_FORM_DIALOG_ID=c},53255:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showEmojiPopover=t.default=void 0;var r=c(n(67294)),o=c(n(98874)),a=c(n(21898)),i=c(n(61862)),l=c(n(15973)),u=c(n(74933)),s=n(53595);function c(e){return e&&e.__esModule?e:{default:e}}var f={people:{title:i.default.string("emoji.category.people",""),emoji:"smile"},nature:{title:i.default.string("emoji.category.nature",""),emoji:"hamster"},food:{title:i.default.string("emoji.category.food",""),emoji:"pizza"},activity:{title:i.default.string("emoji.category.activity",""),emoji:"soccer"},travel:{title:i.default.string("emoji.category.travel",""),emoji:"earth_americas"},objects:{title:i.default.string("emoji.category.objects",""),emoji:"bulb"},symbols:{title:i.default.string("emoji.category.symbols",""),emoji:"clock9"},flags:{title:i.default.string("emoji.category.flags",""),emoji:"flag_cn"}};n={show:t.showEmojiPopover=function(e,t,n){(0,s.initEmojiListForPicker)();var c="app-emoji-popover",d=l.default.userConfig.enableSearchInEmojiPicker;return a.default.show(e,r.default.createElement(o.default,{categories:f,style:{height:260,width:280},search:!!d||void 0,searchPlaceholder:d?i.default.string("common.search"):void 0,emojione:{imagePathPNG:u.default.imagePathPNG,imageType:u.default.imageType},onChange:function(e){t&&t(e),a.default.hide(c)}}),{id:c,width:280,height:261,cache:!0},n)}},t.default=n},73506:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=E(n(88666)),a=E(n(67629)),i=_(n(10176)),l=_(n(71214)),u=_(n(76733)),s=_(n(85110)),c=_(n(28784)),f=_(n(62103)),d=E(n(53255)),p=E(n(61964)),h=_(n(27607)),m=E(n(10503)),y=E(n(94602)),g=E(n(59846)),b=_(n(62031)),v=_(n(65169)),w=_(n(68634)),O=_(n(52721)),S=_(n(40919));function _(e){return e&&e.__esModule?e:{default:e}}function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}function E(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=C(t))&&t.has(e))return t.get(e);var n,o,a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]);return a.default=e,t&&t.set(e,a),a}n=E(n(86208)),o={AboutDialog:o,MemberProfileDialog:a,About:i.default,MemberProfile:l.default,BuildInfo:u.default,Routes:s.default,DraftEditor:c.default,StatusDot:f.default,EmojiPopover:d,UserChangePasswordDialog:p,UserListItem:h.default,UserProfileDialog:m,HotkeySettingDialog:y,UserSettingDialog:g,MemberListItem:b.default,UserSetting:v.default,MemberList:w.default,SelectPanel:O.default,SelectPanelWithActions:S.default,SelectDialog:n},t.default=o},94602:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showHotkeySettingDialog=t.default=void 0;var r=s(n(67294)),o=s(n(52133)),a=s(n(85978)),i=n(32355),l=s(n(61862)),u=n(4829);function s(e){return e&&e.__esModule?e:{default:e}}n={show:t.showHotkeySettingDialog=function(e,t,n,s){var c=t;return(0,i.disableGlobalShortcut)(),o.default.show({title:e,onHidden:i.enableGlobalShortcut,onSubmit:function(){c!==t&&n&&n(c)},content:r.default.createElement("div",null,r.default.createElement(a.default,{onlyMotifyKeysText:l.default.string("setting.hotkeys.cantSetOnlyModifyKeys"),defaultValue:t?(0,u.formatKeyDecoration)(t):"",onChange:function(e){c=e}}))},s)}},t.default=n},73729:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(67294),o=a(n(61862));function a(e){return e&&e.__esModule?e:{default:e}}n=(n=a(n(99605))).default?n.default.getSharedData("Lang"):o.default,r=(0,r.createContext)({lang:n,langName:o.default.name}),t.default=r},84360:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showLanguageSwitchDialog=t.default=void 0;var r=i(n(67294)),o=i(n(52133)),a=i(n(15085));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){return o.default.show({headingClassName:"dock dock-right dock-top",content:r.default.createElement(a.default,null),actions:!1},e)}n=n(78717),t.showLanguageSwitchDialog=l,(0,n.registerCommand)("showLanguageSwitchDialog",(function(){return l()}),null,{apiLevel:4}),n={show:l},t.default=n},15085:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=f(n(67294)),a=f(n(61862)),i=s(n(18033)),l=n(64393),u=s(n(65286));function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=c(t))&&t.has(e))return t.get(e);var n,o,a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]);return a.default=e,t&&t.set(e,a),a}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n=function(e){var t=s;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=p(e);if(n=t?(n=p(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==o)return o;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(s);function s(){var e=this,t=s;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=s,(e=[{key:"componentDidMount",value:function(){var e=this;this.onLangChangeHandler=(0,a.onLangChange)((function(){e.forceUpdate()}))}},{key:"componentWillUnmount",value:function(){u.default.off(this.onLangChangeHandler)}},{key:"render",value:function(){var e=(0,a.getAllLangList)(),t=a.default.name,n={minWidth:150,height:60,display:"flex",flexDirection:"column",padding:0};return o.default.createElement("div",{className:"app-lang-switcher"},o.default.createElement("header",{className:"heading"},o.default.createElement("strong",{className:"title"},a.default.string("common.selectLanguage"))),o.default.createElement("div",{className:"space-sm row",style:{maxWidth:520}},e.map((function(e){return o.default.createElement(i.default,{className:(0,l.classes)("has-margin-sm rounded",{"bg-primary text-white":t===e.name," gray x-outline":t!==e.name}),key:e.name,onClick:a.loadLanguage.bind(null,e.name),style:n},o.default.createElement("strong",{className:t!==e.name?"text-dark":""},e.label),e.labels&&e.labels[t]?o.default.createElement("div",{className:"small"},"(",e.labels[t],")"):"")}))))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),s}(o.PureComponent),t.default=n},63640:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showLoginQRCode=t.default=void 0;var r=i(n(67294)),o=i(n(52133)),a=i(n(21409));function i(e){return e&&e.__esModule?e:{default:e}}n={show:t.showLoginQRCode=function(e){var t="login-qrcode-dialog";return o.default.show({actions:!1,closeButton:!1,id:t,content:r.default.createElement(a.default,{onRequestClose:function(){o.default.hide(t)}})},e)}},t.default=n},21409:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=w(n(45697)),a=v(n(67294)),i=w(n(79361)),l=w(n(2568)),u=n(64393),s=w(n(40328)),c=w(n(18033)),f=w(n(10352)),d=w(n(65286)),p=v(n(61862)),h=w(n(74160)),m=n(15973),y=n(13347),g=w(n(91705));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=b(t))&&t.has(e))return t.get(e);var n,o,a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]);return a.default=e,t&&t.set(e,a),a}function w(e){return e&&e.__esModule?e:{default:e}}function O(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=C(e);if(n=t?(n=C(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return _(o)}}(o);function o(e){var t;if(this instanceof o)return E(_(t=n.call(this,e)),"setLoginCodeValue",function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){O(a,r,o,i,l,"next",e)}function l(e){O(a,r,o,i,l,"throw",e)}i(void 0)}))}}((function*(){var e,n,r,o,a,i;t._unmounted||(e=(i=t.user).serverName,n=i.account,a=i.server,i=i.tokenAuthWindow,r=a.protocol,o=a.hostname,a=a.port,null==t.token&&(t.token=yield(0,y.getAuthToken)()),t.token?(i=(0,l.default)("".concat(n).concat(t.token).concat(Math.round(Date.now()/1e3/(null!=i?i:20)))),t.setState({loginCodeValue:"".concat(r,"//").concat(n,":").concat(i+(0,l.default)(i),"~",0,"@").concat(o,":").concat(a,"/").concat(e).concat("#xuan")})):t.setState({loginCodeValue:"error"}))}))),E(_(t),"handleFlipClick",(function(){t.state.flip?t.clearLoginQRRefresh():t.setLoginQRRefresh(),t.setState((function(e){return{flip:""===e.flip?"flip":"",loginedAndCloseCountdown:-1}}))})),t.state={flip:"",loginCodeValue:"",downloadCodeValue:h.default.ui["mobile.getAppUrl"],loginedAndCloseCountdown:-1},t.user=(0,m.getCurrentUser)(),t.time=1e3*t.user.tokenAuthWindow,t._loginQRRefreshTimer=null,t._unmounted=!1,t;throw new TypeError("Cannot call a class as a function")}return t=o,(e=[{key:"componentDidMount",value:function(){var e=this;this.setLoginCodeValue(),this.setLoginQRRefresh(),this._handleLoginOnOtherDevice=(0,m.onUserLoginOnOtherDevice)((function(){e._unmounted||e.setState({loginedAndCloseCountdown:3},(function(){e.clearLoginQRRefresh(),clearInterval(e._coundDownTimer),e._coundDownTimer=setInterval((function(){0<e.state.loginedAndCloseCountdown?e.setState((function(e){return{loginedAndCloseCountdown:e.loginedAndCloseCountdown-1}})):(clearInterval(e._coundDownTimer),e._coundDownTimer=null,e.props.onRequestClose&&e.props.onRequestClose())}),1e3)}))}))}},{key:"componentWillUnmount",value:function(){this._unmounted=!0,d.default.off(this._handleLoginOnOtherDevice),this.clearLoginQRRefresh(),clearInterval(this._coundDownTimer)}},{key:"setLoginQRRefresh",value:function(){this.clearLoginQRRefresh(),this._loginQRRefreshTimer=setInterval(this.setLoginCodeValue,this.time)}},{key:"clearLoginQRRefresh",value:function(){clearTimeout(this._loginQRRefreshTimer)}},{key:"getLoginQRCodeView",value:function(){var e=(t=this.state).loginCodeValue,t=t.loginedAndCloseCountdown;return"error"!==e?a.default.createElement("div",{className:"qrcode login"},a.default.createElement(i.default,{level:"H",size:300,fgColor:"#1687a7",value:e,imageSettings:t<0?{src:(0,p.getMediaPath)("icon"),height:40,width:40,excavate:!0}:null})):a.default.createElement("div",{className:"err-qrcode",style:{transform:"rotateY(0)"}},a.default.createElement("div",null,a.default.createElement(f.default,{name:":disappointed_relieved:",className:"text-center"}),a.default.createElement("p",null,p.default.string("qrcode.login.fail")),a.default.createElement(c.default,{icon:"refresh",className:"btn-wide bg-primary rounded",label:p.default.string("qrcode.login.refresh"),onClick:this.setLoginCodeValue})))}},{key:"render",value:function(){var e=(t=this.props).className,t=t.onRequestClose,n=(o=this.state).downloadCodeValue,r=o.flip,o=o.loginedAndCloseCountdown,l=(n=a.default.createElement("div",{className:"qrcode download"},a.default.createElement(a.Suspense,{fallback:a.default.createElement(g.default,{key:"spinner",iconSize:24})},a.default.createElement(i.default,{level:"H",size:300,fgColor:"#e97878",value:n}))),null);return 0<=o&&(l=a.default.createElement("div",{className:"dock lighten-9 text-success center-content column has-padding"},a.default.createElement(s.default,{size:7,name:"check-circle",className:"space"}),a.default.createElement("h4",null,p.default.format("mobile.logined.tip",o)))),a.default.createElement("div",null,a.default.createElement("header",{className:"heading"},a.default.createElement("div",{className:"title"},p.default.string(r?"mobile.download.title":"mobile.login.title")),a.default.createElement("nav",{style:{overflow:"visible"},title:p.default.string("common.close"),className:"nav"},a.default.createElement("a",{className:"close rounded",onClick:t},a.default.createElement(s.default,{name:"close"})))),a.default.createElement("div",{className:(0,u.classes)("qrcode-card center-content relative",e,r)},a.default.createElement("div",{className:"qrcode-card-inner"},this.getLoginQRCodeView(),n),l),a.default.createElement("div",{className:"text-center space has-padding-h"},a.default.createElement("a",{className:"btn text-primary",onClick:this.handleFlipClick},p.default.string(r?"mobile.login.tip":"mobile.download.tip"))))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),o}(a.PureComponent),E(t.default=n,"propTypes",{className:o.default.string,onRequestClose:o.default.func}),E(n,"defaultProps",{className:null,onRequestClose:null})},70290:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showMediaPreviewWindow=void 0;var r=n(95619),o=s(n(94128)),a=s(n(61862)),i=n(15973),l=s(n(65286)),u=n(99838);function s(e){return e&&e.__esModule?e:{default:e}}t.showMediaPreviewWindow=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.props,s=t.callback;if("string"==typeof e&&(e={current:{src:e}}),o.default.has("nwc.openWindowAndCreateNwc")){var c=o.default.call("nwc.getNwcByID",t.id);if(c)return void c.showAndFocusWindow();var f=o.default.call("nwc.openWindowAndCreateNwc","gallery",{id:t.id,backgroundColor:(0,u.isDarkThemeMode)()?"#343434":"#ececec",title:a.default.string("media.preview"),minWidth:500,minHeight:300,overlayIcon:"gallery-win.png",maximizeAfterShow:!0,vibrancy:"popover"}),d=(f.shareData({Lang:a.default,obtainer:e}),(0,i.onUserLogout)((function(e,t,n,r){r||f.invoke("browserWindow.close")})));return f.once("window-closed",(function(){l.default.off(d),s&&s()})),f}return c={prevText:a.default.string("image.prev"),nextText:a.default.string("image.next"),obtainText:a.default.string("common.rerequest"),zoomInText:a.default.string("image.zoomIn"),zoomOutText:a.default.string("image.zoomOut"),zoomResetText:a.default.string("image.zoomReset"),rotate90Text:a.default.string("image.rotate90")},(0,r.showMediaPreviewDialog)(e,{props:n,mediaPreviewProps:c})}},67940:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MemberAvatarCommon=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=m(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=h(n(45697)),i=h(n(2388)),l=h(n(40328)),u=h(n(88446)),s=h(n(62103)),c=n(83981),f=n(75738),d=h(n(84431)),p=["status","displayName","avatar","code"];function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n,r){var a=r.className,i=r.showStatusDot,d=r.size,p=r.memberID,h=r.shape,m=r.grayOffline;return h={size:d,icon:"account",iconSize:2,className:["user-avatar",h,a],onClick:r.onClick,onContextMenu:r.onContextMenu},m&&f.STATUS.isOffline(e)&&h.className.push("grayscale"),i&&(a=Math.floor(Math.min(20,2+.275*d)),h.badge=o.default.createElement(s.default,{status:e,size:a})),n&&(r=(0,c.getMemberAvatar)(n))?(r.startsWith("icon-")||r.startsWith("mdi-")?(h.skin={code:p,textColor:"white"},h.icon=r):(h.image=o.default.createElement(u.default,{src:r},o.default.createElement(l.default,{name:"account muted"})),h.imageClassName="circle",h.icon=null),h):("string"==typeof t&&t.length?(h.skin={code:p,textColor:"white"},h.label=t[0].toUpperCase(),h.icon=null):(h.skin={code:p,textColor:"white"},h.className.push("loading-holder")),h)}function O(e){var t=e.status,n=e.displayName,r=e.avatar,a=e.code;return e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,p),o.default.createElement(i.default,w(t,n,r,v(v({},e),{},{memberID:a})))}function S(e){var t,n=e.memberID,r=n?d.default.getMember(n):null,a=(t=y((0,o.useState)(r?r.avatar:null),2))[0],l=t[1],u=(t=y((0,o.useState)(r?r.statusName:null),2))[0],s=t[1],c=(r=(t=y((0,o.useState)(r?r.displayName:null),2))[0],t[1]);return(0,o.useEffect)((function(){var e,t=n?d.default.getMember(n):null;if(l(t?t.avatar:null),s(t?t.statusName:null),c(t?t.displayName:null),n)return e=d.default.subscribe(n,(function(e){e&&(l(e.avatar),s(e.statusName),c(e.displayName))})),function(){return d.default.unsubscribe(e)}}),[n]),o.default.createElement(i.default,w(u,r,a,e))}O.propTypes={status:a.default.any,className:a.default.oneOfType([a.default.array,a.default.object,a.default.string]),displayName:a.default.string,avatar:a.default.string,code:a.default.any,shape:a.default.string,showStatusDot:a.default.bool,size:a.default.number,grayOffline:a.default.bool},O.defaultProps={status:null,className:"",displayName:null,avatar:null,code:null,shape:"circle",showStatusDot:!1,size:24,grayOffline:!1},S.propTypes={memberID:a.default.number.isRequired,className:a.default.oneOfType([a.default.array,a.default.object,a.default.string]),shape:a.default.string,showStatusDot:a.default.bool,size:a.default.number,grayOffline:a.default.bool},S.defaultProps={className:"",shape:"circle",showStatusDot:!1,size:24,grayOffline:!1},t.default=(0,o.memo)(S),n=(0,o.memo)(O),t.MemberAvatarCommon=n},31165:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=s(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=u(n(45697)),i=u(n(24614)),l=["id","span"];function u(e){return e&&e.__esModule?e:{default:e}}function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function c(e){var t=e.id,n=e.span;return e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,l),t=(0,i.default)(t),n?o.default.createElement("span",e,t?t.name:""):o.default.createElement("div",e,t?t.name:"")}c.propTypes={id:a.default.number.isRequired,span:a.default.bool},c.defaultProps={span:!1},t.default=(0,o.memo)(c)},62031:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=d(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=f(n(45697)),i=n(64393),l=n(16986),u=f(n(67940)),s=f(n(36567)),c=["memberID","title","children","className","avatarSize","showStatusDot","avatarClassName"];function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e){var t,n=e.memberID,r=e.title,a=e.children,f=e.className,d=e.avatarSize,m=(e.showStatusDot,e.avatarClassName),y=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,c),h((0,s.default)(n),1)[0]);return t=r?o.default.isValidElement(r)?r:o.default.createElement("div",{className:"title text-ellipsis"},r):(r=y.displayName,(0,l.isEmptyString)(r)?o.default.createElement("div",{className:"title relative loading-holder relative loading-holder-line"}):o.default.createElement("div",{className:"title text-ellipsis"},r)),o.default.createElement("a",p({className:(0,i.classes)("app-member-list-item item",f)},e),o.default.createElement(u.default,{showStatusDot:!0,className:m,size:d,memberID:n}),t,a)}y.propTypes={title:a.default.any,memberID:a.default.number.isRequired,children:a.default.any,className:a.default.string,avatarSize:a.default.number,showStatusDot:a.default.bool,avatarClassName:a.default.string},y.defaultProps={title:null,children:null,className:"flex-middle",avatarSize:24,showStatusDot:!0,avatarClassName:null},t.default=(0,o.memo)(y)},68634:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=y(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=m(n(45697)),i=m(n(61862)),l=m(n(74160)),u=m(n(75738)),s=n(64393),c=m(n(63318)),f=m(n(62031)),d=m(n(84431)),p=n(15973),h=["chosen","members","className","listItemProps","itemRender","onItemClick","onItemContextMenu","avatarClassName","heading","startPageSize","morePageSize","defaultPage","contentRender","eventBindObject","selection"];function m(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=w(e);if(n=t?(n=w(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return v(o)}}(a);function a(e){var t;if(this instanceof a)return O(v(t=n.call(this,e)),"handleRequestMorePage",(function(){t.setState((function(e){return{page:e.page+1}}))})),O(v(t),"handleOnItemClick",(function(e){var n=d.default.getMember(e.currentTarget.attributes["data-id"].value),r=(o=t.props).onItemClick,o=o.eventBindObject;r&&r.call(o,n,e)})),O(v(t),"handleOnItemContextMenu",(function(e){var n,r=(o=t.props).onItemContextMenu,o=o.eventBindObject;r&&(n=d.default.getMember(e.currentTarget.attributes["data-id"].value),r.call(o,n,e))})),t.state={page:e.defaultPage},t;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"render",value:function(){for(var e=(v=this.props).chosen,t=v.members,n=v.className,r=v.listItemProps,a=v.itemRender,l=(v.onItemClick,v.onItemContextMenu,v.avatarClassName),u=v.heading,d=v.startPageSize,m=v.morePageSize,y=(v.defaultPage,v.contentRender),b=(v.eventBindObject,v.selection),v=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(v,h),w=this.state.page,O=w?Math.min(t.length,d+(1<w?(w-1)*m:0)):t.length,S=[],_=null,C=0;C<O;C+=1){var E,P=t[C];b&&!(0,p.isCurrentUser)(P)&&(_=o.default.createElement("div",{className:(0,s.classes)("checkbox checkbox-sm",{checked:e.has(P.id)})},o.default.createElement("label",null))),a?S.push(a(P,_)):(E="function"==typeof r?r(P):r,S.push(o.default.createElement(f.default,g({"data-id":P.id,avatarClassName:l,onContextMenu:this.handleOnItemContextMenu,onClick:this.handleOnItemClick},E,{key:P.account,memberID:P.id}),y&&y(P),_)))}return(d=t.length-O)&&S.push(o.default.createElement(c.default,{key:"showMore",icon:"chevron-double-down",className:"flex-middle item muted",title:o.default.createElement("span",{className:"title small"},i.default.format("common.clickShowMoreFormat",d)),onClick:this.handleRequestMorePage})),o.default.createElement("div",g({},v,{className:(0,s.classes)("app-member-list list",n)}),u,S)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component),O(t.default=n,"propTypes",{chosen:a.default.object,members:a.default.arrayOf(a.default.instanceOf(u.default)).isRequired,listItemProps:a.default.object,onItemClick:a.default.func,onItemContextMenu:a.default.func,itemRender:a.default.func,contentRender:a.default.func,className:a.default.string,avatarClassName:a.default.string,heading:a.default.any,startPageSize:a.default.number,morePageSize:a.default.number,defaultPage:a.default.number,eventBindObject:a.default.object,selection:a.default.bool}),O(n,"defaultProps",{chosen:null,listItemProps:null,onItemClick:null,onItemContextMenu:null,className:null,avatarClassName:null,itemRender:null,contentRender:null,heading:null,startPageSize:l.default.ui["page.start.size"]||20,morePageSize:l.default.ui["page.more.size"]||20,defaultPage:1,eventBindObject:null,selection:!1})},20155:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=f(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=c(n(45697)),i=n(64393),l=n(16986),u=c(n(84604)),s=["memberID","className","children","hideOnLoading","type"];function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e){var t=e.memberID,n=e.className,r=e.children,a=e.hideOnLoading,c=e.type,f=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,s),t=(0,u.default)(t),(0,l.isEmptyString)(t));return a&&f?null:o.default.createElement(c,p({className:(0,i.classes)(n,f?"inline-block loading-holder relative loading-holder-line":"")},e),t,r)}h.propTypes={memberID:a.default.number.isRequired,className:a.default.string,type:a.default.string,children:a.default.any,hideOnLoading:a.default.bool},h.defaultProps={type:"span",className:"",children:null,hideOnLoading:!1},t.default=(0,o.memo)(h)},67629:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showMemberProfileDialog=t.default=void 0;var r=u(n(67294)),o=u(n(52133)),a=n(98649),i=n(40328),l=n(64393);function u(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n={show:t.showMemberProfileDialog=function(e,t){"object"===s(e)&&(e=e.id);var n="member-".concat(e);return e=(0,a.getMenuItemsForContext)("member.profile",{params:[e]}).map((function(e){if(r.default.isValidElement(e))return e;var t=e.className,n=e.icon,o=e.label,a=(n=n&&(0,i.renderIcon)(n,{className:"item-left-icon"}),null);return r.default.isValidElement(o)?a=o:o&&(a=r.default.createElement("span",{className:"title"},o)),r.default.createElement("a",{key:e.label,className:(0,l.classes)("item",t)},n,a)})),o.default.show({actions:!1,id:n,headingClassName:"dock-right dock-top",className:"contextmenu-member_profile",content:r.default.createElement("div",{className:"list dropdown-menu has-icon-left"},e)},t)}},t.default=n},27559:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==E(e)&&"function"!=typeof e)return{default:e};if((t=C(t))&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(n(67294)),o=_(n(45697)),a=n(98649),i=_(n(67940)),l=_(n(62103)),u=_(n(40328)),s=_(n(61862)),c=n(16986),f=n(15973),d=_(n(94128)),p=_(n(36567)),h=_(n(91705)),m=n(83981),y=n(57485),g=n(58851),b=n(78717),v=_(n(45837)),w=_(n(31165)),O=_(n(43088)),S=n(28055);function _(e){return e&&e.__esModule?e:{default:e}}function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e){var t=e.memberID,n=(e=e.showMentionBtn,function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),1!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return P(e,1);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,1):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,p.default)(t))[0]),o=(0,O.default)(t);if(!n)return r.default.createElement(h.default,null);var a=n.displayName,_=(a=[r.default.createElement("div",{key:"name",className:"item is-member-name"},r.default.createElement("div",{className:"circle state",onClick:n.avatar?function(){return(0,b.executeCommandLine)("viewMedia/".concat(encodeURIComponent((0,m.getMemberAvatar)(n.avatar))))}:null},r.default.createElement(i.default,{memberID:t,size:40})),(0,c.isEmptyString)(a)?r.default.createElement("div",{className:"content"},r.default.createElement("div",{className:"title loading-holder relative loading-holder-line space-xs",style:{width:80}}),r.default.createElement("div",{className:"subtitle loading-holder relative loading-holder-line",style:{width:60}})):r.default.createElement("div",{className:"content user-selectable"},r.default.createElement("div",{className:"title strong"},n.displayName," ",n.gender&&"u"!==n.gender?r.default.createElement(u.default,{name:"sprite-gender-".concat(n.gender)}):null),r.default.createElement("div",{className:"subtitle"},"@",n.account))),r.default.createElement("div",{key:"status",className:"item user-selectable"},r.default.createElement("div",{className:"strong app-member-profile-menu-title"},s.default.string("member.status")),r.default.createElement("div",{className:"title"},r.default.createElement(l.default,{status:o,label:!0})))],n.dept&&a.push(r.default.createElement("div",{key:"dept",className:"item user-selectable"},r.default.createElement("div",{className:"strong app-member-profile-menu-title"},s.default.string("member.dept.short")),r.default.createElement(w.default,{className:"title",id:n.dept}))),(0,c.isNotEmptyString)(n.role)&&a.push(r.default.createElement("div",{key:"role",className:"item user-selectable"},r.default.createElement("div",{className:"strong app-member-profile-menu-title"},s.default.string("member.role")),r.default.createElement(v.default,{className:"title",role:n.role}))),(0,c.isNotEmptyString)(n.email)&&a.push(r.default.createElement("div",{key:"email",className:"item user-selectable"},r.default.createElement("div",{className:"strong app-member-profile-menu-title"},s.default.string("member.profile.email")),r.default.createElement("div",{className:"title"},n.email))),(0,c.isNotEmptyString)(n.mobile)&&a.push(r.default.createElement("div",{key:"mobile",className:"item user-selectable"},r.default.createElement("div",{className:"strong app-member-profile-menu-title"},s.default.string("member.profile.mobile")),r.default.createElement("div",{className:"title"},n.mobile))),(0,c.isNotEmptyString)(n.phone)&&a.push(r.default.createElement("div",{key:"phone",className:"item user-selectable"},r.default.createElement("div",{className:"strong app-member-profile-menu-title"},s.default.string("member.profile.phone")),r.default.createElement("div",{className:"title"},n.phone))),(0,c.isNotEmptyString)(n.weixin)&&a.push(r.default.createElement("div",{key:"weixin",className:"item user-selectable"},r.default.createElement("div",{className:"strong app-member-profile-menu-title"},s.default.string("member.profile.weixin")),r.default.createElement("div",{className:"title"},n.weixin))),(0,c.isNotEmptyString)(n.qq)&&a.push(r.default.createElement("div",{key:"qq",className:"item user-selectable"},r.default.createElement("div",{className:"strong app-member-profile-menu-title"},"QQ"),r.default.createElement("div",{className:"title"},n.qq))),(0,c.isNotEmptyString)(n.address)&&a.push(r.default.createElement("div",{key:"address",className:"item user-selectable"},r.default.createElement("div",{className:"strong app-member-profile-menu-title"},s.default.string("member.profile.address")),r.default.createElement("div",{className:"title"},n.address))),o=(0,g.createOne2OneChatGid)((0,f.getCurrentUserID)(),t),!n.isDeleted),C=(0,y.canUseConference)(o,!0);return(e||_||C||(0,f.isCurrentUser)(t))&&(_=[(0,f.isCurrentUser)(t)&&r.default.createElement("a",{key:"editInfoBtn","data-dismiss":!0,className:"btn btn-sm rounded gray x-outline",onClick:function(){return(0,S.showUserEditInfoDialog)(t)}},s.default.string("member.profile.editUserInfo")),_&&r.default.createElement("a",{key:"chatBtn","data-dismiss":!0,className:"btn btn-sm rounded accent",href:"#/chats/recents/".concat(o)},s.default.string("member.profile.sendMessage")),C&&r.default.createElement("a",{key:"conferenceBtn","data-dismiss":!0,className:"btn btn-sm rounded gray x-outline",href:"xxc://createConference/".concat(o)},s.default.string("conference.create")),e&&r.default.createElement("a",{key:"mentionBtn","data-dismiss":!0,className:"btn btn-sm rounded gray x-outline",href:"xxc://mentionMemberInSendbox/".concat(encodeURIComponent("#".concat(t)))},s.default.string("chat.atHim.".concat(n.gender),s.default.string("chat.atHim")))],d.default.env.isOSX&&_.reverse(),a.push(r.default.createElement("div",{key:"actions",className:"item row single flex-center actions"},_))),a}k.propTypes={memberID:o.default.number.isRequired,showMentionBtn:o.default.bool},k.defaultProps={showMentionBtn:!1},(0,a.addContextMenuCreator)("member.profile",(function(e){var t,n=!0===(((t=e.params)?t[1]:null)||e.showMentionBtn);return"string"==typeof(t="object"===E(t=(t?t[0]:null)||e.memberID||e.member)&&t?t.id:t)&&("#"===t[0]&&(t=t.substring(1)),t=Number.parseInt(t,10)),[r.default.createElement(k,{key:"menu",memberID:t,showMentionBtn:n})]}),{apiLevel:4}),t.default=(0,r.memo)(k)},71214:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=m(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=h(n(45697)),i=n(64393),l=h(n(40328)),u=h(n(67940)),s=h(n(60357)),c=h(n(36567)),f=h(n(24614)),d=h(n(41569)),p=["memberId","compact","className"];function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e){var t=e.memberId,n=e.compact,r=e.className,a=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,p),g((0,s.default)(),1)[0]),h=g((0,c.default)(t),1)[0],m=(0,d.default)(h.role),b=(0,f.default)(h.dept);return o.default.createElement("div",y({className:(0,i.classes)("app-member-profile space",r,{compact:n})},e),o.default.createElement("header",{className:"column has-padding-sm flex-middle"},h.avatar?o.default.createElement("a",{className:"circle",href:"xxc://viewMedia/".concat(encodeURIComponent(h.avatar))},o.default.createElement(u.default,{size:80,className:"flex-none",memberID:t,showStatusDot:!0})):o.default.createElement(u.default,{size:80,className:"flex-none",memberID:t,showStatusDot:!0}),o.default.createElement("div",{className:"profile-content"},o.default.createElement("div",{className:"title strong"},h.displayName,"",h.gender?"f"===h.gender?o.default.createElement(l.default,{name:"sprite-gender-f"}):o.default.createElement(l.default,{name:"sprite-gender-m"}):null),o.default.createElement("small",{className:"muted"},"@",h.account))),o.default.createElement("div",{className:"divider"}),m&&o.default.createElement("div",{className:"x-list-item has-padding-sm"},o.default.createElement("span",{className:"flex-none subtitle"},a.string("member.role")),o.default.createElement("input",{type:"input",className:"input clean",readOnly:!0,value:m})),b&&o.default.createElement("div",{className:"x-list-item has-padding-sm"},o.default.createElement("span",{className:"flex-none subtitle"},a.string("member.dept")),o.default.createElement("input",{type:"input",className:"input clean",readOnly:!0,value:b.name})),h.email&&o.default.createElement("div",{className:"x-list-item has-padding-sm"},o.default.createElement("span",{className:"flex-none subtitle"},a.string("member.profile.email")),o.default.createElement("input",{type:"input",className:"input clean",readOnly:!0,value:h.email})),h.mobile&&o.default.createElement("div",{className:"x-list-item has-padding-sm"},o.default.createElement("div",{className:"flex-none subtitle"},a.string("member.profile.mobile")),o.default.createElement("input",{type:"input",className:"input clean",readOnly:!0,value:h.mobile})),h.phone&&o.default.createElement("div",{className:"x-list-item has-padding-sm"},o.default.createElement("div",{className:"flex-none subtitle"},a.string("member.profile.phone")),o.default.createElement("input",{type:"input",className:"input clean",readOnly:!0,value:h.phone})))}v.propTypes={memberId:a.default.number.isRequired,className:a.default.string,compact:a.default.bool},v.defaultProps={className:null,compact:!1},t.default=(0,o.memo)(v)},45837:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=s(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=u(n(45697)),i=u(n(41569)),l=["role","span"];function u(e){return e&&e.__esModule?e:{default:e}}function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function c(e){var t=e.role,n=e.span,r=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,l),(0,i.default)(t));return n?o.default.createElement("span",e,r||t):o.default.createElement("div",e,r||t)}c.propTypes={role:a.default.string.isRequired,span:a.default.bool},c.defaultProps={span:!1},t.default=(0,o.memo)(c)},74249:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.showMemberSelectDialog=t.default=t.MemberSelectDialog=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=p(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=d(n(45697)),i=d(n(61862)),l=d(n(52133)),u=d(n(36940)),s=d(n(61997)),c=d(n(93956)),f=d(n(42371));function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var b=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=y(e);if(n=t?(n=y(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return m(o)}}(a);function a(e){var t;if(this instanceof a)return g(m(t=n.call(this,e)),"handleClickMember",(function(e){t.setState({selection:e})})),g(m(t),"handleClickPrimaryBtn",(function(){t.props.onFinish&&t.props.onFinish(t.state.selection)})),g(m(t),"handleClickCancelBtn",(function(){t.props.onFinish&&t.props.onFinish(null)})),g(m(t),"handleSearchChange",(function(e){t.setState({searchValue:e}),console.log(e)})),t.state={chatGid:t.props.chatGid||null,selection:t.props.selection||null,searchValue:""},t;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"render",value:function(){var e=(n=this.state).chatGid,t=n.selection,n=n.searchValue,r=(a=this.props).selectTip,a=a.excludes;return o.default.createElement("div",{className:"app-members-select app-select-panel dock"},o.default.createElement("div",{className:"dock single column divider-right",style:{width:300,paddingLeft:10,paddingRight:10}},o.default.createElement("header",{className:"flex-none"},o.default.createElement("div",{className:"title text-gray bold",style:{padding:"0.5rem 0"}},r||i.default.string("chat.group.transferTips")),o.default.createElement(c.default,{placeholder:i.default.string("chats.search.recents"),onSearchChange:this.handleSearchChange,style:{marginBottom:6},changeDelay:500})),o.default.createElement("div",{className:"flex-auto overflow-y-auto"},o.default.createElement(f.default,{chatGid:e,excludes:a,selection:t,searchValue:n,onClickMember:this.handleClickMember,onMembersChange:this.handleMembersChange}))),o.default.createElement(u.default,{className:"dock-bottom divider-top text-center has-padding-lg",onClickPrimary:t?this.handleClickPrimaryBtn:null,onClickCancel:this.handleClickCancelBtn}))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.PureComponent);g(t.MemberSelectDialog=b,"propTypes",{chatGid:a.default.string,selection:a.default.number,excludes:a.default.arrayOf(a.default.number),onFinish:a.default.func,selectTip:a.default.string}),g(b,"defaultProps",{chatGid:null,selection:null,excludes:null,onFinish:null,selectTip:null}),n={show:t.showMemberSelectDialog=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=e.chatGid,r=e.selection,a=e.excludes,i=e.selectTip;return new Promise((function(e){var u=(0,s.default)();l.default.show({id:u,actions:!1,closeButton:!1,style:{width:300,height:500},content:o.default.createElement(b,{onFinish:function(t){l.default.hide(u),e(t)},chatGid:n,selection:r,excludes:a,selectTip:i})},t)}))}},t.default=n},42371:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=h(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=p(n(45697)),i=p(n(61862)),l=n(64393),u=p(n(63318)),s=p(n(91705)),c=p(n(62031)),f=p(n(84431)),d=p(n(74101));function p(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function m(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){b(a,r,o,i,l,"next",e)}function l(e){b(a,r,o,i,l,"throw",e)}i(void 0)}))}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=O(e);if(n=t?(n=O(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==o)return o;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(a);function a(e){if(this instanceof a)return(e=n.call(this,e)).state={page:1,loading:!1,list:null,recTotal:0},e;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"componentDidMount",value:function(){this.loadNextPage(!0)}},{key:"componentDidUpdate",value:function(e){this.props.searchValue!==e.searchValue&&this.loadNextPage(!0),this.props.chatGid!==e.chatGid&&this.loadNextPage(!0)}},{key:"componentWillUnmount",value:function(){this._unmounted=!0}},{key:"getTotalPage",value:function(){return this.props.recPerPage?Math.ceil(this.state.recTotal/this.props.recPerPage):0}},{key:"hasNextPage",value:function(){return 0<this.state.recTotal&&this.state.page<this.getTotalPage()}},{key:"loadNextSearchPage",value:function(e){var t=this,n=this.props.onMembersChange,r=this.state,o=r.page,a=r.recTotal;this.setState({loading:!0,list:null},v((function*(){var r=(u=t.props).recPerPage,i=u.searchValue,l=u.chatGid,u=u.excludes;try{var s=yield f.default.searchFromRemote(i,{chat:l,exclude:u,pager:{recPerPage:r,recTotal:!e&&a||0,pageID:e?1:o+1}}),c=s.list,d=s.pager;c=c.map((function(e){return e.id}))}catch(u){c=[],console.error("Search members from server error",u)}n&&n(c),t._unmounted||t.setState({loading:!1,recTotal:d.recTotal,page:d.pageID,list:c})})))}},{key:"loadNextNoSearchPage",value:function(e){var t=this,n=this.props.onMembersChange;e=e?{recTotal:0,page:1,list:null}:{},Object.assign(e,{loading:!0}),this.setState(e,v((function*(){var e=t.props.chatGid,r=t.state.list,o=new Set(t.props.excludes);e=yield d.default.tryFetchChatMembers(e),e=Array.from(e).filter((function(e){return!o.has(e)})),r=[].concat(m(r||[]),m(e)),n&&n(r),t._unmounted||t.setState({loading:!1,recTotal:e.length,list:r})})))}},{key:"loadNextPage",value:function(e){""===this.props.searchValue?this.loadNextNoSearchPage(e):this.loadNextSearchPage(e)}},{key:"render",value:function(){var e=(d=this.props).selection,t=d.onClickMember,n=[],r=(d=this.state).page,a=d.loading,f=d.list,d=d.recTotal;if(r&&f){var p,h=function(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=y(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}(f);try{for(h.s();!(p=h.n()).done;){var m=p.value;n.push(o.default.createElement(c.default,{memberID:m,key:m,onClick:t.bind(null,m)},o.default.createElement("div",{className:(0,l.classes)("checkbox checkbox-sm",{checked:m===e})},o.default.createElement("label",null))))}}catch(d){h.e(d)}finally{h.f()}}return a?n.push(o.default.createElement(s.default,{key:"spinner"})):0===d?n.push(o.default.createElement(u.default,{key:"notFound",icon:"information-outline",className:"flex-middle item muted disabled",title:o.default.createElement("span",{className:"title small"},i.default.string("common.notFoundOptions"))})):this.hasNextPage()&&(r=i.default.string("common.loadMore"),n.push(o.default.createElement(u.default,{key:"loadMore",icon:"chevron-double-down",className:"flex-middle item muted",title:o.default.createElement("span",{className:"title small"},r),onClick:this.loadNextPage.bind(this,!1)}))),o.default.createElement("div",{className:"list compact"},n)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.PureComponent),S(t.default=n,"propTypes",{selection:a.default.number,excludes:a.default.array,onClickMember:a.default.func,recPerPage:a.default.number,chatGid:a.default.string,searchValue:a.default.string,onMembersChange:a.default.func}),S(n,"defaultProps",{selection:null,excludes:null,onClickMember:null,recPerPage:20,chatGid:"",searchValue:"",onMembersChange:null})},68905:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.showMembersSelectDialog=t.default=t.MembersSelectDialog=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=g(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=y(n(45697)),i=y(n(61862)),l=y(n(52133)),u=y(n(40328)),s=y(n(36940)),c=y(n(62031)),f=y(n(61997)),d=y(n(93956)),p=y(n(48325)),h=y(n(99382)),m=n(64393);function y(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=O(e);if(n=t?(n=O(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return w(o)}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var _=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e);var n=v(r);function r(e){var t;if(this instanceof r)return S(w(t=n.call(this,e)),"handleDeptMenuSelect",(function(e){t.setState({deptID:e})})),S(w(t),"handleClickMember",(function(e){var n=(r=t.state).selections,r=r.members;(n=new Set(n)).has(e)?n.delete(e):n.add(e),e=Array.from(n),t.setState({selections:e,selectAll:e.length===r.length})})),S(w(t),"handleClickPrimaryBtn",(function(){t.props.onFinish&&t.props.onFinish(t.state.selections)})),S(w(t),"handleClickCancelBtn",(function(){t.props.onFinish&&t.props.onFinish([])})),S(w(t),"handleSearchChange",(function(e){t.setState({searchValue:e})})),S(w(t),"handleSelectAll",(function(){var e=(n=t.state).members,n=n.selectAll;t.setState({selectAll:!n,selections:n?[]:e})})),S(w(t),"handleSelectInvert",(function(){var e=(n=t.state).selections,n=n.members,r=new Set(e);e=n.filter((function(e){return!r.has(e)})),t.setState({selectAll:e.length===n.length,selections:e})})),S(w(t),"handleMembersChange",(function(e){e.length!==t.state.members.length&&t.setState({members:e,selectAll:!1})})),t.state={selections:t.props.selections||[],deptID:0,searchValue:"",selectAll:!1,members:[]},t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e=this,t=(a=this.state).selections,n=a.deptID,r=a.searchValue,a=a.selectAll,l=(f=this.props).selectTip,f=f.excludes;return o.default.createElement("div",{className:"app-members-select app-select-panel dock"},o.default.createElement("div",{className:"dock-left single column divider-right",style:{width:200}},o.default.createElement("header",{className:"flex-none heading"},o.default.createElement("div",{className:"title text-gray bold"},i.default.string("chat.create.filterByDept"))),o.default.createElement("div",{className:"flex-auto overflow-y-auto"},o.default.createElement(h.default,{onSelectMenuItem:this.handleDeptMenuSelect}))),o.default.createElement("div",{className:"dock single column divider-right",style:{left:200,width:200,paddingLeft:10,paddingRight:10}},o.default.createElement("header",{className:"flex-none"},o.default.createElement("div",{className:"title text-gray bold",style:{padding:"0.5rem 0"}},l||i.default.string("chat.create.groupsTip")),o.default.createElement(d.default,{placeholder:i.default.string("chats.search.recents"),onSearchChange:this.handleSearchChange,style:{marginBottom:6},changeDelay:500})),o.default.createElement("div",{className:"checkboxs-select"},o.default.createElement("div",{className:(0,m.classes)("btn btn-sm rounded"),onClick:this.handleSelectInvert},i.default.string("common.selectInverse"),o.default.createElement("label",null)),o.default.createElement("div",{className:(0,m.classes)("checkbox checkbox-sm",{checked:a}),onClick:this.handleSelectAll},i.default.string("common.selectAll"),o.default.createElement("label",null))),o.default.createElement("div",{className:"flex-auto overflow-y-auto"},o.default.createElement(p.default,{deptID:n,excludes:f,selections:t,searchValue:r,onClickMember:this.handleClickMember,onMembersChange:this.handleMembersChange}))),o.default.createElement("div",{className:"dock-right single column",style:{width:200,paddingLeft:10,paddingRight:10}},o.default.createElement("header",{className:"flex-none heading space-sm"},o.default.createElement("div",{className:"title strong text-primary"},i.default.string("chat.invite.choosed")," (",t.length,")")),o.default.createElement("div",{className:"list compact overflow-y-auto"},t.map((function(t){return o.default.createElement(c.default,{memberID:t,key:t,onClick:e.handleClickMember.bind(null,t)},o.default.createElement(u.default,{name:"sprite-selection-remove"}))})))),o.default.createElement(s.default,{className:"dock-bottom divider-top text-center has-padding-lg",onClickPrimary:t&&t.length?this.handleClickPrimaryBtn:null,onClickCancel:this.handleClickCancelBtn}))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.PureComponent);S(t.MembersSelectDialog=_,"propTypes",{selections:a.default.arrayOf(a.default.number),excludes:a.default.arrayOf(a.default.number),onFinish:a.default.func,selectTip:a.default.string}),S(_,"defaultProps",{selections:null,excludes:null,onFinish:null,selectTip:null}),n={show:t.showMembersSelectDialog=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=e.selections,r=e.excludes,a=e.selectTip;return new Promise((function(e){var i=(0,f.default)();l.default.show({id:i,actions:!1,closeButton:!1,style:{width:600,height:500},content:o.default.createElement(_,{onFinish:function(t){l.default.hide(i),e(t)},selections:n,excludes:r,selectTip:a})},t)}))}},t.default=n},78379:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var r=a(n(67294)),o=(t=a(n(45697)),a(n(61862)));function a(e){return e&&e.__esModule?e:{default:e}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function l(e){return r.default.createElement("a",i({href:"https://xuanim.com",rel:"noopener noreferrer",target:"_blank"},e),o.default.string("common.poweredBy")," ",e.children)}l.propTypes={children:t.default.node},l.defaultProps={children:null}},85110:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={chats:{_:"/chats",__:"/chats/:filterType/:id?",chat:{__:"/chats/:filterType/:id",id:function(e,t){return"/chats/".concat(t||":filterType","/").concat(e)}},recents:{__:"/chats/recents",id:function(e){return"/chats/recents/".concat(e)}},contacts:{__:"/chats/contacts",id:function(e){return"/chats/contacts/".concat(e)}},groups:{__:"/chats/groups",id:function(e){return"/chats/groups/".concat(e)}}},contacts:{_:"/contacts",__:"/contacts/:objectType?/:filterType?"},exts:{_:"/exts",app:{__:"/exts/app/:id",id:function(e){return"/exts/app/".concat(e)}}},apps:{__:"/:app/:filterType?/:id?/:params?"}}},86208:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showSelectDialogWithPreview=t.showSelectDialog=t.default=void 0;var r=l(n(67294)),o=l(n(52133)),a=l(n(40919)),i=l(n(7149));function l(e){return e&&e.__esModule?e:{default:e}}n={show:t.showSelectDialog=function(e,t,n){var i=t.primaryBtnText,l=t.cancelBtnText,u=t.searchPlaceholderText,s=t.selections;return new Promise((function(t){var c="app-select-panel-dialog",f=r.default.createElement(a.default,{listBuilder:e,primaryBtnText:i,cancelBtnText:l,searchPlaceholderText:u,selections:s,onFinish:function(e){t(e),o.default.hide(c)}});o.default.show({id:c,className:"app-select-panel-dialog",actions:!1,content:f,closeButton:!1},n)}))},showSelectDialogWithPreview:t.showSelectDialogWithPreview=function(e,t,n,l){var u=n.primaryBtnText,s=n.cancelBtnText,c=n.searchPlaceholderText,f=n.selections;return new Promise((function(n){var d="app-select-panel-dialog",p=r.default.createElement(i.default,{message:t,showDateDivider:!1,dateFormatter:null,ignoreStatus:!0,className:"overflow-y-auto scrollbar-hover",style:{height:"130px"}});p=r.default.createElement(a.default,{listBuilder:e,primaryBtnText:u,cancelBtnText:s,searchPlaceholderText:c,selections:f,header:p,onFinish:function(e){n(e),o.default.hide(d)}}),o.default.show({id:d,className:"app-select-panel-dialog-with-preview",actions:!1,content:p,closeButton:!1},l)}))}},t.default=n},40919:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=f(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=c(n(45697)),i=c(n(61862)),l=c(n(52721)),u=c(n(18033)),s=(n=c(n(94128)),["onFinish","primaryBtnText","cancelBtnText","header"]);function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var g=n.default.env.isOSX;n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=m(e);if(n=t?(n=m(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return h(o)}}(a);function a(e){var t;if(this instanceof a)return y(h(t=n.call(this,e)),"handleSelectionsChange",(function(e){t._unmounted||t.setState({selections:e})})),y(h(t),"handleConfirmBtnClick",(function(){var e=t.props.onFinish;e&&e(t.state.selections)})),y(h(t),"handleCancelBtnClick",(function(){var e=t.props.onFinish;e&&e()})),t.state={selections:null},t;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"componentWillUnmount",value:function(){this._unmounted=!0}},{key:"render",value:function(){var e=((r=this.props).onFinish,r.primaryBtnText),t=r.cancelBtnText,n=r.header,r=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(r,s),a=this.state.selections;return a=[o.default.createElement(u.default,{disabled:!a||!a.length,key:"btn-confirm",className:"btn-wide bg-primary rounded",onClick:this.handleConfirmBtnClick,label:e||i.default.string("common.confirm")}),o.default.createElement(u.default,{key:"btn-cancel",className:"gray x-outline cancel-btn btn-wide rounded",onClick:this.handleCancelBtnClick,label:t||i.default.string("common.cancel")})],g&&a.reverse(),o.default.createElement("div",null,n,o.default.createElement(l.default,d({onSelectionsChange:this.handleSelectionsChange},r),o.default.createElement("div",{className:"actions toolbar dock-bottom divider-top text-center has-padding-lg"},a)))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.PureComponent),y(t.default=n,"propTypes",{onFinish:a.default.func,primaryBtnText:a.default.string,cancelBtnText:a.default.string,message:a.default.object,header:a.default.element}),y(n,"defaultProps",{onFinish:null,primaryBtnText:"",cancelBtnText:"",message:null,header:null})},52721:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=g(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=y(n(45697)),i=y(n(64208)),l=y(n(61862)),u=n(64393),s=y(n(93956)),c=y(n(40328)),f=y(n(58851)),d=y(n(75738)),p=y(n(67940)),h=y(n(45508)),m=["listBuilder","onSelectionsChange","searchPlaceholderText","className","children","selections"];function y(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function v(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=_(e);if(n=t?(n=_(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return S(o)}}(a);function a(e){var t,r;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");return C(S(t=n.call(this,e)),"handSearchChange",(function(e){t.setState({search:e})})),C(S(t),"handleSelectAllBtnClick",(function(e,n,r){var o=t.state.selections;t.setSelections(t.selectGroupList(w({},o),e.list,n)),r.stopPropagation()})),C(S(t),"headingCreator",(function(e,n){if(!e.title)return!1;var r=n.isExpand?"chevron-down":"chevron-right",a=!1,i=t.state.selections;return i&&(a=t.isGroupListAllSelected(e.list,i)),o.default.createElement("header",{className:"heading",onClick:n.handleHeadingClick},o.default.createElement(c.default,{name:r}),o.default.createElement("div",{className:"title"},e.title),o.default.createElement("div",{className:"btn",onClick:t.handleSelectAllBtnClick.bind(S(t),e,a)},l.default.string("common.".concat(a?"unselectAll":"selectAll"))))})),e=e.selections,Array.isArray(e)&&(r={},e.forEach((function(e){r[e instanceof f.default?e.gid:e.id]=e})),e=r),t.state={selections:e,search:""},t._selectOrder=0,t}return t=a,(e=[{key:"setSelections",value:function(e){var t=this;this.setState({selections:e},(function(){var n=t.props.onSelectionsChange;n&&n(e&&Object.keys(e).map((function(t){return e[t]})).sort((function(e,t){return e.order-t.order})).map((function(e){return e.originItem||e})))}))}},{key:"handleItemClick",value:function(e,t){var n=this.state.selections;(n=w({},n))[e]?delete n[e]:n[e]={originItem:t,order:this._selectOrder++},this.setSelections(n)}},{key:"itemConverter",value:function(e,t){var n={data:t=t.originItem?t.originItem:t,className:"flex-middle"};if(t instanceof f.default)Object.assign(n,{id:t.gid,title:t.name,avatar:o.default.createElement(h.default,{gid:t.gid})});else if(t instanceof d.default)Object.assign(n,{id:t.id,title:t.displayName,avatar:o.default.createElement(p.default,{memberID:t.id})});else{if("group"===t.type)return t;Object.assign(n,t)}var r=this.state.selections;return n.actions="option"===e?o.default.createElement("div",{className:(0,u.classes)("checkbox checkbox-sm",{checked:r&&r[n.id]})},o.default.createElement("label",null)):o.default.createElement(c.default,{name:"sprite-selection-remove"}),n.onClick=this.handleItemClick.bind(this,n.id,t),n}},{key:"selectGroupList",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return t&&t.length&&t.forEach((function(t){var o;"group"!==t.type||t instanceof f.default||t instanceof d.default?(o=t instanceof f.default?t.gid:t.id,r?e[o]&&delete e[o]:e[o]||(e[o]={originItem:t,order:n._selectOrder++})):n.selectGroupList(e,t.list,r)})),e}},{key:"isGroupListAllSelected",value:function(e,t){if(e&&e.length)for(var n=0;n<e.length;++n){var r=e[n];if("group"!==r.type||r instanceof f.default||r instanceof d.default){if(!t[r instanceof f.default?r.gid:r.id])return!1}else if(r.list&&!this.isGroupListAllSelected(r.list,t))return!1}return!0}},{key:"render",value:function(){var e=(a=this.props).listBuilder,t=(a.onSelectionsChange,a.searchPlaceholderText),n=a.className,r=a.children,a=(a.selections,function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(a,m)),c=(f=this.state).selections,f=(e=e(f.search),c&&Object.keys(c).map((function(e){return c[e]})).sort((function(e,t){return e.order-t.order}))),d=f?f.length:0;return o.default.createElement("div",b({className:(0,u.classes)("app-select-panel dock",n)},a),o.default.createElement("div",{className:"dock-left single column"},o.default.createElement(s.default,{className:"flex-none space-sm",inputClassName:"circle",placeholder:t,onSearchChange:this.handSearchChange}),o.default.createElement(i.default,{group:e,rootClassName:"app-select-panel-tree flex-auto overflow-y-auto",className:"compact",itemConverter:this.itemConverter.bind(this,"option"),defaultExpand:!1,showMoreText:l.default.string("common.clickShowMoreFormat"),headingCreator:this.headingCreator})),o.default.createElement("div",{className:"dock-right single column"},o.default.createElement("header",{className:"flex-none heading space-sm"},o.default.createElement("div",{className:"title"},l.default.string("chat.invite.choosed")," (",d,")")),f&&o.default.createElement(i.default,{group:{root:!0,list:f},rootClassName:"app-select-panel-tree flex-auto overflow-y-auto",className:"compact",itemConverter:this.itemConverter.bind(this,"selected"),defaultExpand:!1,showMoreText:l.default.string("common.clickShowMoreFormat")})),r)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.PureComponent),C(t.default=n,"propTypes",{listBuilder:a.default.func,onSelectionsChange:a.default.func,className:a.default.string,searchPlaceholderText:a.default.string,children:a.default.any,selections:a.default.oneOfType([a.default.array,a.default.object])}),C(n,"defaultProps",{listBuilder:null,onSelectionsChange:null,className:null,searchPlaceholderText:null,children:null,selections:null})},51348:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.showChatsHistoryWindow=void 0;var o=n(42809),a=M(n(94128)),i=M(n(61862)),l=n(15973),u=M(n(65286)),s=M(n(74101)),c=x(n(73052)),f=M(n(29795)),d=M(n(84431)),p=x(n(94592)),h=M(n(17531)),m=n(95126),y=n(90534),g=n(98649),b=n(79424),v=n(70290),w=n(9913),O=n(47238),S=n(68271),_=n(79429),C=n(23405),E=n(78717),P=n(95214),k=n(46815);function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(j=function(e){return e?n:t})(e)}function x(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=j(t))&&t.has(e))return t.get(e);var n,o,a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]);return a.default=e,t&&t.set(e,a),a}function M(e){return e&&e.__esModule?e:{default:e}}t.showChatsHistoryWindow=function(e){if(!a.default.has("nwc.openWindowAndCreateNwc"))return(0,o.showChatsHistoryDialog)(e,null);var t,n,r=(0,k.getAppExt)("zentao-integrated"),j=(0,l.getCurrentUser)(),x="chathistorywindow",M=a.default.call("nwc.getNwcByID",x);if(!M)return(t=a.default.call("nwc.openWindowAndCreateNwc","chathistory",{id:x,title:i.default.string("chats.history.title"),minWidth:1e3,width:1e3,minHeight:600,overlayIcon:"history-win.png",vibrancy:"popover"})).shareData({Lang:i.default,chatsStore:s.default,chatMessagesStore:c.default,chatMessagesListStore:f.default,membersStore:d.default,filesStore:p.default,cgid:e,isMessagePinnedInChat:c.isMessagePinnedInChat,user:j,zentaoExtension:r}),t.registerInvokeTarget("filesNetwork",h.default),t.registerInvokeTarget("openInCollabora",m.openInCollabora),t.registerInvokeTarget("file",{getFileData:p.getFileData,getP2pFilePath:p.getP2pFilePath,setP2pFilePath:p.setP2pFilePath,saveFile:y.saveFile,openFile:y.openFile,showFileInFolder:y.showFileInFolder}),t.registerInvokeTarget("contextMenu",{getContextMenuItems:g.getContextMenuItems}),t.registerInvokeTarget("preview",{showChatMessageImagePreivew:b.showChatMessageImagePreivew,showMediaPreviewWindow:v.showMediaPreviewWindow,openWebviewWindow:w.openWebviewWindow,openTextEditorWindow:O.openTextEditorWindow}),t.registerInvokeTarget("setActiveChat",S.setActiveChat),t.registerInvokeTarget("createConference",(function(e){(0,E.executeCommand)("createConference",e,"_",!1,"audio"),a.default.call("ui.showAndFocusWindow")})),t.registerInvokeTarget("history",{getFetchingTask:_.getFetchingTask,offFetchingHistoryEvent:C.offFetchingHistoryEvent,onFetchingHistory:C.onFetchingHistory,abortSyncHistory:C.abortSyncHistory}),t.registerInvokeTarget("openUrlInBrowser",P.openUrlInBrowser),n=(0,l.onUserLogout)((function(){t.invoke("browserWindow.close")})),t.once("window-closed",(function(){u.default.off(n)})),t;setTimeout((function(){M.showAndFocusWindow()}),500)}},62103:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=f(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=c(n(45697)),i=n(64393),l=n(75738),u=c(n(61862)),s=["size","className","style","status","label"];function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m={unverified:"#ccc",disconnect:"#ccc",offline:"#ccc",logged:"#18ffff",online:"#00e676",busy:"#ffab00",away:"#ff1744",meeting:"#E040FB"};function y(e){var t=e.size,n=e.className,r=e.style,a=e.status,c=e.label,f=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,s),l.STATUS.getName(a));return r=h({backgroundColor:m[f],border:"1px solid #fff"},r),t&&(r.width=t,r.height=t),t=o.default.createElement("span",d({className:(0,i.classes)("status-dot",n,"status-".concat(f)),style:r},e)),c?(n=!0===c?u.default.string("member.status.".concat("unverified"===f?"offline":a)):c,o.default.createElement("div",{className:"app-member-status"},t,"  ",o.default.createElement("span",{className:"status-label muted"},n))):t}y.propTypes={size:a.default.number,className:a.default.string,label:a.default.any,style:a.default.object,status:a.default.any},y.defaultProps={size:14,className:"circle",style:null,label:null,status:null},t.default=(0,o.memo)(y)},47238:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openTextEditorWindow=void 0;var r=s(n(94128)),o=s(n(61862)),a=n(15973),i=s(n(65286)),l=n(99838),u=n(95214);function s(e){return e&&e.__esModule?e:{default:e}}t.openTextEditorWindow=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!r.default.has("nwc.openWindowAndCreateNwc"))throw new Error("Current platform does not support native window.");var n,s,c=r.default.call("nwc.getNwcByID",null==t?void 0:t.id);if(!c)return(n=r.default.call("nwc.openWindowAndCreateNwc","texteditor",{id:null==t?void 0:t.id,backgroundColor:(0,l.isDarkThemeMode)()?"#343434":"#ececec",title:"".concat(o.default.string("file.preview")).concat(e.title?" - ".concat(e.title):""),minWidth:500,minHeight:300,overlayIcon:"texteditor-win.png",maximizeAfterShow:!0})).shareData({Lang:o.default,textInfo:e}),n.registerInvokeTarget("openUrl",u.openUrl),s=(0,a.onUserLogout)(c=function(){n.invoke("browserWindow.close")}),n.once("window-closed",(function(){var e;i.default.off(s),null!=t&&null!=(e=t.callback)&&e.call(t)})),{close:c};c.showAndFocusWindow()}},92371:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showUpdateGuideDialog=t.default=void 0;var r=i(n(67294)),o=i(n(52133)),a=i(n(62300));function i(e){return e&&e.__esModule?e:{default:e}}n={show:t.showUpdateGuideDialog=function(e){var t="app-update-guide-dialog";return o.default.show({id:t,actions:!1,closeButton:!1,modal:!0,content:r.default.createElement(a.default,{onRequestClose:function(){return o.default.hide(t)}})},e)}},t.default=n},62300:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=y(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=m(n(45697)),i=n(64393),l=m(n(61862)),u=n(43058),s=m(n(65286)),c=m(n(10352)),f=m(n(15219)),d=n(15973),p=n(74543),h=["className","onRequestClose"];function m(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=w(e);if(n=t?(n=w(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return v(o)}}(a);function a(e){var t;if(this instanceof a)return O(v(t=n.call(this,e)),"notifyMeNextTime",(function(){(0,u.notifyMeNextTime)((0,d.getCurrentUser)());var e=t.props.onRequestClose;e&&e()})),O(v(t),"skipNewVersion",(function(){(0,u.skipNewVersion)((0,d.getCurrentUser)());var e=t.props.onRequestClose;e&&e()})),t.state={updaterStatus:(0,u.getUpdaterStatus)()},t;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"componentDidMount",value:function(){var e,t=this;(0,u.isUpdaterAvailable)()&&(this.onUpdateStatusChangeHandler=(0,u.onUpdaterStatusChanged)((function(e){t.setState({updaterStatus:e})})),(e=this.state.updaterStatus).needUpdateForce&&"ready"===e.status&&(0,u.downloadNewVersion)())}},{key:"componentWillUnmount",value:function(){(0,u.isUpdaterAvailable)()&&s.default.off(this.onUpdateStatusChangeHandler)}},{key:"render",value:function(){var e,t=(r=this.props).className,n=r.onRequestClose,r=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(r,h),a=(O=this.state.updaterStatus).needUpdate,s=O.serverUrl,d=O.updateInfo,m=O.progress,y=O.message,b=O.status,v=O.needUpdateForce,w=(0,p.simplifyVersion)(O.newVersion),O=(0,p.simplifyVersion)(O.currentVersion);return e=a?(a=(d=(a=d.readme||d.changeLog)&&(0,f.default)(a))?o.default.createElement("details",{className:"space-sm"},o.default.createElement("summary",{className:"strong space-sm text-primary state"},l.default.format("update.versionDetails",w)),o.default.createElement("div",{style:{maxHeight:400},className:"has-padding-sm primary-pale markdown-content overflow-y-auto",dangerouslySetInnerHTML:{__html:d}})):null,(0,u.isUpdaterAvailable)()?(d=null,"downloading"===b||"downloaded"===b?d=o.default.createElement("div",{className:"progress has-padding-v space divider"},0<m&&o.default.createElement("div",{className:"box rounded primary-pale relative space-xs"},o.default.createElement("div",{className:"rounded bar primary dock dock-left",style:{width:"".concat(100*m,"%"),transition:"all .4s"}})),o.default.createElement("div",{className:"title"},0<m&&o.default.createElement("strong",null,Math.floor(100*m),"% "),o.default.createElement("span",{className:"text-primary small"},y))):"downloadFail"===b&&(d=o.default.createElement("div",{className:"box danger-pale rounded text-danger space"},y)),m=null,"ready"===b?(m=o.default.createElement("button",{key:"updateNow",type:"button",className:"btn primary btn-wide",onClick:u.downloadNewVersion},l.default.string("update.updateNow")),v||(m=[m,o.default.createElement("button",{key:"notifyMeLater",type:"button",className:"btn text-primary btn-wide",onClick:this.notifyMeNextTime},l.default.string("update.notifyMeNextTime")),o.default.createElement("button",{key:"skipThisVersion",type:"button",className:"btn text-danger btn-wide",onClick:this.skipNewVersion},l.default.string("update.skipThisVersion"))])):"downloaded"===b?m=o.default.createElement("button",{type:"button",className:"btn primary btn-wide",onClick:u.quitAndInstall},l.default.string("update.restartToCompleteUpdate")):"downloadFail"===b?(m=o.default.createElement("button",{key:"retryUpdate",type:"button",className:"btn primary btn-wide",onClick:u.downloadNewVersion},l.default.string("update.retryUpdate")),v||(m=[m,o.default.createElement("button",{key:"close",type:"button",className:"btn btn-wide",onClick:n},l.default.string("common.close"))])):"downloading"!==b||v||(m=o.default.createElement("button",{type:"button",className:"btn primary btn-wide",onClick:n},l.default.string("update.closeAndDownloadInBackground"))),o.default.createElement("div",null,o.default.createElement("h3",null,v?l.default.format("update.clientRequiredUpdateToLoginServer",s):l.default.string("update.message.newVersionAvailable")),o.default.createElement("p",null,l.default.format("update.versionsFormat",w,O)),d,a,m&&o.default.createElement("div",{className:"text-center has-padding-v toolbar"},m))):o.default.createElement("div",null,o.default.createElement("h3",null,v?l.default.format("update.clientRequiredUpdateToLoginServer",s):l.default.string("update.message.newVersionAvailable")),o.default.createElement("p",null,l.default.format("update.versionsFormat",w,O)),a,o.default.createElement("p",null,l.default.string("update.contactAdminToUpdate")),o.default.createElement("div",{className:"text-center has-padding-v"},o.default.createElement("button",{type:"button",className:"btn primary btn-wide",onClick:v?n:this.skipNewVersion},l.default.string("common.close"))))):o.default.createElement("div",null,o.default.createElement(c.default,{name:":thumbsup:",className:"text-center space"}),o.default.createElement("h3",null,l.default.string("update.message.alreadyNew")),o.default.createElement("div",{className:"text-center has-padding-v"},o.default.createElement("button",{type:"button",className:"btn primary btn-wide",onClick:n},l.default.string("common.close")))),o.default.createElement("div",g({},r,{className:(0,i.classes)("app-update-guide has-padding-v",t)}),e)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component),O(t.default=n,"propTypes",{className:a.default.string,onRequestClose:a.default.func}),O(n,"defaultProps",{className:null,onRequestClose:null})},19815:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestUpdateViewStyle=t.onUpdateViewStyle=t.initUpdateView=void 0;var r=i(n(65286)),o=n(78717),a=i(n(98285));function i(e){return e&&e.__esModule?e:{default:e}}var l="app.updateViewStyle";(0,o.registerCommand)("updateViewStyle",(function(e,t,n){t&&((n="string"==typeof(n=e.options&&void 0===n?e.options.style:n)?JSON.parse(n):n)&&(n.width&&"number"==typeof n.width&&(n.width="".concat(n.width,"px")),n.height&&"number"==typeof n.height&&(n.height="".concat(n.height,"px"))),r.default.emit("".concat(l,".").concat(t),n,e.options))}),null,{apiLevel:6}),t.requestUpdateViewStyle=function(e,t){(0,o.executeCommand)("updateViewStyle",e,t)},t.onUpdateViewStyle=function(e,t){return r.default.on("".concat(l,".").concat(e),t)},t.initUpdateView=function(){a.default.onHiddenHandler=function(e,t){t=t.listenUpdateStyle;var n=e.listenUpdateStyleHandler;t&&n&&(r.default.off(n),delete e.listenUpdateStyleHandler)},a.default.onShownHandler=function(e,t){t.listenUpdateStyle&&(e.listenUpdateStyleHandler=r.default.on("".concat(l,".").concat(e.id),(function(t){e.setStyle(t)})))}}},88621:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)("")),n=t[0],i=t[1];return(0,r.useEffect)((function(){var t=o.default.getChat(e,!1,!0);return t&&i(t.name),o.default.unsubscribe.bind(o.default,o.default.subscribe(e,(function(e){i(e.name)})))}),[e]),n};var r=n(67294),o=(t=n(74101))&&t.__esModule?t:{default:t};function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},36043:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)((function(){return[(0,a.getConference)(e)]}))),n=t[0],u=t[1];return(0,r.useEffect)((function(){return u([(0,a.getConference)(e)]),i.default.off.bind(i.default,(0,o.onConferenceChange)(e,(function(e){return u([e])})))}),[e]),null==n?void 0:n[0]};var r=n(67294),o=n(10088),a=n(57485),i=(t=n(65286))&&t.__esModule?t:{default:t};function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},76763:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,a.getCurrentUser)(),t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)([e])),n=t[0],l=t[1],s=(e=(t=e||{}).account,t.id);return(0,r.useEffect)((function(){function e(e){l([null!=e?e:(0,a.getCurrentUser)()])}e();var t=(0,a.onSwapUser)(e),n=(0,a.onUserLogin)(e),r=s?i.default.subscribe(s,e):null;return function(){o.default.off(t,n),r&&i.default.unsubscribe(r)}}),[e,s]),n};var r=n(67294),o=l(n(65286)),a=n(15973),i=l(n(84431));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},24614:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)((function(){return e?o.default.getDept(e):null}))),n=t[0],i=t[1];return(0,r.useEffect)((function(){return i(e?o.default.getDept(e):null),o.default.unsubscribe.bind(o.default,o.default.subscribeDeptChange(e,i))}),[e]),n};var r=n(67294),o=(t=n(26774))&&t.__esModule?t:{default:t};function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},60357:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e;return[(e=(0,r.useContext)(o.default)).lang,e=e.langName]};var r=n(67294),o=(t=n(73729))&&t.__esModule?t:{default:t}},84604:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)((function(){var t;return(null==(t=o.default.getMemberOrTemp(e))?void 0:t.displayName)||""}))),n=t[0],i=t[1];return(0,r.useEffect)((function(){var t;return i((null==(t=o.default.getMemberOrTemp(e))?void 0:t.displayName)||""),o.default.unsubscribe.bind(o.default,o.default.subscribe(e,(function(e){i(e.displayName)})))}),[e]),n};var r=n(67294),o=(t=n(84431))&&t.__esModule?t:{default:t};function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},43088:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,a.default)(),n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)((function(){return e?o.default.getMemberOrTemp(e).statusName:""}))),i=n[0],u=n[1];return(0,r.useEffect)((function(){if(u(e?o.default.getMemberOrTemp(e).statusName:""),e)return o.default.unsubscribe.bind(o.default,o.default.subscribe(e,(function(e){return u(e.statusName)})))}),[e]),t?i:"offline"};var r=n(67294),o=i(n(84431)),a=i(n(61142));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},36567:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)((function(){return[o.default.getMemberOrTemp(e)]}))),n=t[0],i=t[1];return(0,r.useEffect)((function(){return i([o.default.getMemberOrTemp(e)]),o.default.unsubscribe.bind(o.default,o.default.subscribe(e,(function(e){return i([e])})))}),[e]),n};var r=n(67294),o=(t=n(84431))&&t.__esModule?t:{default:t};function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},42207:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,a.default)().current,t=i((0,r.useState)(u(e)),2),n=t[0],l=t[1];return(0,r.useEffect)((function(){l(u((0,o.createRoutePath)(e)))}),[e]),n},t.getNavbarActiveID=u;var r=n(67294),o=n(40910),a=(t=n(71891))&&t.__esModule?t:{default:t};function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){e=(0,o.createRoutePath)(e);var t=(e=i((0,o.getRoutePathArray)(e),4))[0],r=e[1],a=e[2];return e=e[3],"exts"===t&&n.g.ExtsRuntime?r&&("app"!==r||a&&"home"!==a)&&"app"===r?(r="".concat(a).concat(e?"/".concat(e):""),(null==(a=document.getElementById("appNavbarExts"))?void 0:a.querySelector('.nav-item[data-id="'.concat(r,'"]')))?r:"apps"):"apps":t}n.g.$getNavbarActiveID=u},41569:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)((function(){return e?o.default.getRoleName(e):null}))),n=t[0],i=t[1];return(0,r.useEffect)((function(){return i(e?o.default.getRoleName(e):null),o.default.unsubscribe.bind(o.default,o.default.subscribeRoleChange(e,i))}),[e]),n};var r=n(67294),o=(t=n(26774))&&t.__esModule?t:{default:t};function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},71891:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)({current:(0,o.getRoutePath)()})),t=e[0],n=e[1];return(0,r.useEffect)((function(){var e=(0,o.onRoutePathChange)((function(e,t){return n({current:e,previous:t})}));return o.offRoutePathChange.bind(null,e)}),[]),t};var r=n(67294),o=n(40910);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},74689:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)((function(){return[(0,a.getUserConfig)(e),a.getUserConfig]}))),n=t[0],l=t[1];return(0,r.useEffect)((function(){return l([(0,a.getUserConfig)(e),a.getUserConfig]),o.default.off.bind(o.default,(0,a.onUserConfigChange)((function(t){e&&void 0===t[e]||l([(0,a.getUserConfig)(e),a.getUserConfig])})))}),[e]),n};var r=n(67294),o=(t=n(65286))&&t.__esModule?t:{default:t},a=n(15973);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},61142:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)((0,o.isUserOnline)())),t=e[0],n=e[1];return(0,r.useEffect)((function(){return a.default.off.bind(a.default,(0,o.onUserStatusChange)((function(){return n((0,o.isUserOnline)())})))}),[]),t};var r=n(67294),o=n(15973),a=(t=n(65286))&&t.__esModule?t:{default:t};function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},53751:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)((0,o.isUserVerified)())),t=e[0],n=e[1];return(0,r.useEffect)((function(){return a.default.off.bind(a.default,(0,o.onUserStatusChange)((function(){return n((0,o.isUserVerified)())})))}),[]),t};var r=n(67294),o=n(15973),a=(t=n(65286))&&t.__esModule?t:{default:t};function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},61964:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.showUserChangePasswordDialog=t.default=t.UserChangePassword=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=v(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=b(n(45697)),i=b(n(2568)),l=b(n(52133)),u=b(n(70389)),s=b(n(25852)),c=n(64393),f=n(16986),d=b(n(61862)),p=b(n(18033)),h=b(n(94128)),m=b(n(24260)),y=n(15973),g=["onFinish","className","header","disableCancel"];function b(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var E=h.default.env.isOSX,P=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=_(e);if(n=t?(n=_(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return S(o)}}(a);function a(e){var t;if(this instanceof a)return C(S(t=n.call(this,e)),"handleCancelBtnClick",(function(){t.props.onFinish&&t.props.onFinish(!1)})),C(S(t),"handleConfirmBtnClick",(function(){var e=(n=t.state).password1,n=n.password2;return(0,f.isEmptyString)(e)?t.setState({message:d.default.format("user.changePassword.inputRequired",d.default.string("user.changePassword.newPassword"))}):e.length<6?t.setState({message:d.default.string("user.changePassword.denySimplePassword")}):(0,f.isEmptyString)(n)?t.setState({message:d.default.format("user.changePassword.inputRequired",d.default.string("user.changePassword.newPasswordRepeat"))}):e!==n?t.setState({message:d.default.string("user.changePassword.passwordNotSame")}):(n=(0,y.getCurrentUser)().authKeyInfo)&&"password"===n.type&&n.key===(0,i.default)(e)?t.setState({message:d.default.string("user.changePassword.notChanged")}):(t.setState({doing:!0}),void m.default.changeUserPassword(e).then((function(){t.setState({doing:!1}),t.props.onFinish&&t.props.onFinish(!0)})).catch((function(e){t.setState({message:d.default.error(e)||d.default.string("user.changePassword.failed"),doing:!1})})))})),t.state={password1:"",password2:"",message:"",doing:!1},t;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"handleInputChange",value:function(e,t){var n;this.setState((C(n={},e,t),C(n,"message",""),n))}},{key:"render",value:function(){var e=((r=this.props).onFinish,r.className),t=r.header,n=r.disableCancel,r=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(r,g),a=(s=this.state).message,i=s.doing,l=s.password1,s=s.password2,h=[o.default.createElement(p.default,{key:"btn-confirm",onClick:this.handleConfirmBtnClick,className:"text-white btn-wide rounded bg-primary has-margin-sm",label:d.default.string("user.changePassword.btn.confirm")})];return n||(h.push(o.default.createElement(p.default,{key:"btn-cancel",onClick:this.handleCancelBtnClick,className:"btn-wide rounded gray x-outline has-margin-sm",label:d.default.string("common.cancel")})),E&&h.reverse()),o.default.createElement("div",w({className:(0,c.classes)("app-user-change-pwd",e)},r),t,a&&o.default.createElement("div",{className:"box danger rounded space-sm"},a),o.default.createElement(u.default,{inputType:"password",className:a&&((0,f.isEmptyString)(l)||l!==s)?"has-error":"",disabled:i,onChange:this.handleInputChange.bind(this,"password1"),defaultValue:l,label:d.default.string("user.changePassword.newPassword")}),o.default.createElement(u.default,{inputType:"password",className:a&&((0,f.isEmptyString)(s)||l!==s)?"has-error":"",disabled:i,onChange:this.handleInputChange.bind(this,"password2"),defaultValue:s,label:d.default.string("user.changePassword.newPasswordRepeat")}),o.default.createElement("div",{className:"has-padding-v text-center"},h))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component);C(t.UserChangePassword=P,"propTypes",{onFinish:a.default.func,header:a.default.node,className:a.default.string,disableCancel:a.default.bool}),C(P,"defaultProps",{onFinish:null,header:null,className:null,disableCancel:!1}),n={show:t.showUserChangePasswordDialog=function(e){var t="user-change-pwd";return l.default.show({actions:!1,id:t,className:"app-user-change-pwd-dialog",content:o.default.createElement(P,{onFinish:function(e){l.default.hide(t),e&&s.default.show(d.default.string("user.changePassword.success"),{type:"success",autoHide:!0})}}),title:d.default.string("user.changePassword.heading")},e)}},t.default=n},28055:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.showUserEditInfoDialog=t.default=t.UserEditInfo=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=b(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=g(n(52133)),i=g(n(70389)),l=g(n(25852)),u=n(64393),s=n(16986),c=g(n(61862)),f=g(n(18033)),d=g(n(94128)),p=g(n(24260)),h=g(n(21205)),m=g(n(18922)),y=g(n(84431));function g(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var _=d.default.env.isOSX,C=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=O(e);if(n=t?(n=O(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return w(o)}}(a);function a(e){var t,r;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");return S(w(r=n.call(this,e)),"membersChangeHandler",void 0),S(w(r),"handleInputChange",(function(e,t){var n;switch(e){case"realname":n="nameMsg";break;case"email":n="emailMsg";break;case"mobile":n="mobileMsg";break;case"phone":n="phoneMsg"}var o={};n&&(o[n]=""),o[e]=t,r.setState(o)})),S(w(r),"handleCancelBtnClick",(function(){r.props.onFinish&&r.props.onFinish(!1)})),S(w(r),"handleConfirmBtnClick",(function(){var e=(u=r.state).realname,t=u.gender,n=u.email,o=u.mobile,a=u.phone,i=u.weixin,l=u.qq,u=u.address,f=!1;(0,s.isEmptyString)(e)&&(f=!0,r.setState({nameMsg:c.default.format("user.changePassword.inputRequired",c.default.string("member.profile.realname"))})),n&&!(0,s.checkEmailFormat)(n)&&(f=!0,r.setState({emailMsg:c.default.string("user.editInfo.emailError")})),o&&!(0,s.checkMobileFormat)(o)&&(f=!0,r.setState({mobileMsg:c.default.string("user.editInfo.mobileError")})),a&&!(0,s.checkPhoneFormat)(a)&&(f=!0,r.setState({phoneMsg:c.default.string("user.editInfo.telError")})),f||(r.setState({doing:!0}),p.default.changeUser({realname:e,gender:t,email:n,mobile:o,phone:a,weixin:i,qq:l,address:u}).then((function(){r.setState({doing:!1}),r.props.onFinish&&r.props.onFinish(!0)})).catch((function(e){r.setState({nameMsg:c.default.error(e)||c.default.string("user.editInfo.failed"),doing:!1})})))})),e=y.default.getMember(e.memberID),r.state={realname:null!=(t=null==e?void 0:e.realname)?t:"",gender:null!=(t=null==e?void 0:e.gender)?t:"",email:null!=(t=null==e?void 0:e.email)?t:"",mobile:null!=(t=null==e?void 0:e.mobile)?t:"",phone:null!=(t=null==e?void 0:e.phone)?t:"",weixin:null!=(t=null==e?void 0:e.weixin)?t:"",qq:null!=(t=null==e?void 0:e.qq)?t:"",address:null!=(t=null==e?void 0:e.address)?t:"",nameMsg:"",doing:!1,member:e,emailMsg:"",mobileMsg:"",phoneMsg:""},r}return t=a,(e=[{key:"componentDidMount",value:function(){var e=this,t=this.props.memberID;this.membersChangeHandler=y.default.subscribe(t,(function(t){e.setState({member:t,realname:t.realname||"",gender:t.gender||"",email:t.email||"",mobile:t.mobile||"",phone:t.phone||"",weixin:t.weixin||"",qq:t.qq||"",address:t.address||""})}))}},{key:"componentWillUnmount",value:function(){y.default.unsubscribe(this.membersChangeHandler)}},{key:"render",value:function(){var e=(t=this.props).className,t=t.disableCancel,n=(g=this.state).nameMsg,r=g.doing,a=g.member,l=g.realname,d=g.gender,p=g.emailMsg,y=g.mobileMsg,g=g.phoneMsg,b=[o.default.createElement(f.default,{key:"btn-confirm",onClick:this.handleConfirmBtnClick,className:"text-white btn-wide rounded bg-primary has-margin-sm",label:c.default.string("member.profile.save")})];return t||(b.push(o.default.createElement(f.default,{key:"btn-cancel",onClick:this.handleCancelBtnClick,className:"btn-wide rounded gray x-outline has-margin-sm",label:c.default.string("common.cancel")})),_&&b.reverse()),o.default.createElement("form",{className:(0,u.classes)("app-user-edit-info",e,"min-w-[320px]","pt-2"),onSubmit:function(e){return e.preventDefault()}},o.default.createElement("div",{className:n?"flex items-center user-info-item mb0":"flex items-center user-info-item"},o.default.createElement(i.default,{inputType:"text",className:n&&((0,s.isEmptyString)(l)||l.length<2)?"has-error":"inline-block",disabled:r,onChange:this.handleInputChange.bind(this,"realname"),defaultValue:a.realname,label:c.default.string("member.profile.realname"),helpText:n,isLabelInline:!0}),o.default.createElement("i",{className:"inline-block text-red"},"*")),o.default.createElement("div",{className:"flex items-center user-info-item"},o.default.createElement("span",{className:"inline-block user-info-edit-label text-right"},c.default.string("member.profile.gender")),o.default.createElement(h.default,{onChange:this.handleInputChange.bind(this,"gender"),className:"inline-block"},o.default.createElement(m.default,{name:"chat-category",label:c.default.string("member.gender.m"),value:"m",checked:"m"===d,className:"inline-block",disabled:r}),o.default.createElement(m.default,{name:"chat-category",label:c.default.string("member.gender.f"),value:"f",checked:"f"===d,className:"inline-block",disabled:r}))),o.default.createElement("div",{className:p?"flex items-center user-info-item mb0":"flex items-center user-info-item"},o.default.createElement(i.default,{inputType:"text",disabled:r,onChange:this.handleInputChange.bind(this,"email"),className:p?"has-error":"",defaultValue:a.email,label:c.default.string("member.profile.email"),helpText:p,isLabelInline:!0})),o.default.createElement("div",{className:y?"flex items-center user-info-item mb0":"flex items-center user-info-item"},o.default.createElement(i.default,{inputType:"text",disabled:r,onChange:this.handleInputChange.bind(this,"mobile"),className:y?"has-error":"",defaultValue:a.mobile,label:c.default.string("member.profile.mobile"),helpText:y,isLabelInline:!0})),o.default.createElement("div",{className:g?"flex items-center user-info-item mb0":"flex items-center user-info-item"},o.default.createElement(i.default,{inputType:"text",disabled:r,onChange:this.handleInputChange.bind(this,"phone"),className:g?"has-error":"",defaultValue:a.phone,label:c.default.string("member.profile.phone"),helpText:g,isLabelInline:!0})),o.default.createElement("div",{className:"flex items-center user-info-item"},o.default.createElement(i.default,{inputType:"text",disabled:r,onChange:this.handleInputChange.bind(this,"weixin"),defaultValue:a.weixin,label:c.default.string("member.profile.weixin"),isLabelInline:!0})),o.default.createElement("div",{className:"flex items-center user-info-item"},o.default.createElement(i.default,{inputType:"text",disabled:r,onChange:this.handleInputChange.bind(this,"qq"),defaultValue:a.qq,label:"QQ",isLabelInline:!0})),o.default.createElement("div",{className:"flex items-center user-info-item"},o.default.createElement(i.default,{inputType:"text",disabled:r,onChange:this.handleInputChange.bind(this,"address"),defaultValue:a.address,label:c.default.string("member.profile.address"),isLabelInline:!0})),o.default.createElement("div",{className:"text-center py-2"},b))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component);S(t.UserEditInfo=C,"defaultProps",{onFinish:null,className:null,disableCancel:!1}),n={show:t.showUserEditInfoDialog=function(e,t){var n="user-edit-info";return a.default.show({actions:!1,id:n,className:"app-user-edit-info-dialog",content:o.default.createElement(C,{onFinish:function(e){a.default.hide(n),e&&l.default.show(c.default.string("user.editInfo.saveSuccess"),{type:"success",autoHide:!0})},memberID:e}),title:c.default.string("user.editInfo.heading")},t)}},t.default=n},27607:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=s(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=(a=n(45697))&&a.__esModule?a:{default:a},i=n(64393),l=n(67940),u=["user","avatarSize","avatarClassName","className","children"];function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=p(e);if(n=t?(n=p(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==o)return o;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e);var n=d(r);function r(){var e=this,t=r;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"shouldComponentUpdate",value:function(e){return e.children!==this.props.children||e.className!==this.props.className||e.avatarSize!==this.props.avatarSize||e.avatarClassName!==this.props.avatarClassName||e.user!==this.props.user||e.user.account!==this.props.user.account||e.user.avatar!==this.props.user.avatar||e.user.realname!==this.props.user.realname||e.user.server!==this.props.user.server}},{key:"render",value:function(){var e=(s=this.props).user,t=s.avatarSize,n=s.avatarClassName,r=s.className,a=s.children,s=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(s,u);return o.default.createElement("a",c({},s,{className:(0,i.classes)("app-user-list-item item",r)}),o.default.createElement(l.MemberAvatarCommon,{className:n,size:t,code:e.account,avatar:e.avatar,displayName:e.displayName}),o.default.createElement("div",{className:"content"},o.default.createElement("div",{className:"title"},e.displayName," ",o.default.createElement("small",{className:"muted"},"@",e.account)),o.default.createElement("div",{className:"subtitle"},e.serverUrl)),a)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component),h(t.default=n,"propTypes",{user:a.default.object.isRequired,className:a.default.string,avatarSize:a.default.number,avatarClassName:a.default.string,children:a.default.any}),h(n,"defaultProps",{avatarSize:30,className:"flex-middle",avatarClassName:null,children:null})},10503:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showUserProfileDialog=t.default=void 0;var r=a(n(15973)),o=a(n(67629));function a(e){return e&&e.__esModule?e:{default:e}}n={show:t.showUserProfileDialog=function(e){var t=r.default.user;if(t)return o.default.show(t,e);e&&e(!1)}},t.default=n},59846:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showUserSettingDialog=t.default=void 0;var r=f(n(67294)),o=f(n(52133)),a=f(n(61862)),i=f(n(65169)),l=n(15142),u=n(32355),s=n(15973),c=n(82587);function f(e){return e&&e.__esModule?e:{default:e}}n={show:t.showUserSettingDialog=function(e){var t=null;return(0,u.disableGlobalShortcut)(),o.default.show({title:a.default.string("common.setting"),id:"app-user-setting-dialog",actions:[{type:"submit",label:a.default.string("common.save"),click:function(){var e,n;t&&(n={"local.ui.zoomFactor":(e=t.getSettings())["local.ui.zoomFactor"]},Object.keys(n).forEach((function(t){e[t]&&delete e[t]})),(0,s.getUserConfig)().set(e),(0,l.setLocalConfig)(n),(0,c.applyZoomFactor)(n["local.ui.zoomFactor"]))}},{type:"cancel",order:8e3}],onHidden:u.enableGlobalShortcut,content:r.default.createElement(i.default,{ref:function(e){t=e},settings:(0,s.getUserConfig)().plain(),localSettings:(0,l.getAllLocalConfig)()})},e)}},t.default=n},65169:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==O(e)&&"function"!=typeof e)return{default:e};if((t=v(t))&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(n(67294)),o=b(n(45697)),a=b(n(74160)),i=b(n(5833)),l=n(64393),u=n(4829),s=b(n(85978)),c=b(n(61862)),f=b(n(93055)),d=b(n(74379)),p=b(n(61997)),h=b(n(94128)),m=n(15973),y=b(n(52133)),g=["settings","localSettings","className"];function b(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e){return!e["ui.notify.enableSound"]}function j(e){return M||!e["ui.notify.flashTrayIcon"]}function x(e){return!e["ui.notify.enableWindowNotification"]}var M=h.default.isType("browser"),T=h.default.modules.fs;n=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(n=t?(n=E(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,n&&("object"===O(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(o);function o(e){if(this instanceof o)return(e=n.call(this,e)).state=_(_({},e.props.settings),e.props.localSettings),e;throw new TypeError("Cannot call a class as a function")}return t=o,(e=[{key:"cacheFilePath",get:function(){return this._cacheFilePath||(this._cacheFilePath=!M&&h.default.call("os.createUserDataPath",(0,m.getCurrentUser)().identify,"",""),this._cacheFilePath)}},{key:"cachePathExist",get:function(){return this._cachePathExist||(this._cachePathExist=!M&&T.pathExistsSync(this.cacheFilePath),this._cachePathExist)}},{key:"getSettings",value:function(){return this.state}},{key:"setSettings",value:function(e){this.setState(_({},e))}},{key:"changeConfig",value:function(e,t){var n=e.name;"object"===O(t)&&t.target&&(t="checkbox"===t.target.type?t.target.checked:t.target.value),e.setConverter&&(t=e.setConverter(t)),this.setState(P({},n,t))}},{key:"renderConfigItem",value:function(e){if(e.hidden){var t=e.hidden;if(t="function"==typeof e.hidden?e.hidden(this.state):t)return null}switch(e.type){case"boolean":return this.renderBooleanItem(e);case"select":return this.renderSelectItem(e);case"hotkey":return this.renderHotkeyItem(e);case"zoomFactor":return this.renderZoomFactor(e);case"button":return this.renderButtonItem(e);case"text":return this.renderTextItem(e)}return null}},{key:"renderHotkeyItem",value:function(e){var t=this.state[e.name];return e.getConverter&&(t=e.getConverter(t)),r.default.createElement(s.default,{onlyMotifyKeysText:c.default.string("setting.hotkeys.cantSetOnlyModifyKeys"),key:e.name,defaultValue:t,labelStyle:{flex:1},onChange:this.changeConfig.bind(this,e),label:e.caption,className:(0,l.classes)("flex",e.className)})}},{key:"renderSelectItem",value:function(e){var t=this.state[e.name],n=(e.getConverter&&(t=e.getConverter(t)),(0,p.default)());return r.default.createElement("div",{className:(0,l.classes)("control flex selectbox",e.className),key:e.name},r.default.createElement("label",{htmlFor:n},e.caption),r.default.createElement(d.default,{selectProps:{id:n},value:t,options:e.options,onChange:this.changeConfig.bind(this,e),selectClassName:"rounded"}))}},{key:"renderBooleanItem",value:function(e){var t=this.state[e.name];return t=!!(t=e.getConverter?e.getConverter(t):t),r.default.createElement("div",{className:(0,l.classes)("control",e.className),key:e.name},r.default.createElement(f.default,{checked:t,label:e.caption,description:e.description,onChange:this.changeConfig.bind(this,e)}))}},{key:"renderZoomFactor",value:function(e){var t=this.state[e.name]||1,n=(0,p.default)();return r.default.createElement("div",{className:(0,l.classes)("rangebox control flex single flex-middle",e.className),key:e.name},r.default.createElement("label",{htmlFor:n},e.caption),r.default.createElement("input",{className:"flex-auto",id:n,type:"range",min:"0.50",max:"2.00",step:"0.10",value:t,onChange:this.changeConfig.bind(this,e)}),r.default.createElement("div",{className:"flex-none"},"".concat(Math.floor(100*t),"%")))}},{key:"renderButtonItem",value:function(e){return r.default.createElement("div",{className:(0,l.classes)("btn rounded gray x-outline",e.className),key:e.name,onClick:e.click},e.caption)}},{key:"renderTextItem",value:function(e){return r.default.createElement("div",{className:(0,l.classes)(e.className),key:e.name},e.text)}},{key:"render",value:function(){var e=this,t=((n=this.props).settings,n.localSettings,n.className),n=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(n,g),o=[{name:"chats",title:c.default.string("setting.section.chats"),items:[{type:"boolean",name:"ui.chat.sendTypingStatus",caption:c.default.string("setting.chats.sendTypingStatus"),hidden:M},{type:"boolean",name:"ui.chat.sendBigFileOnline",caption:c.default.string("setting.chats.sendBigFileOnline")}]},{name:"notification",title:c.default.string("setting.section.notification"),items:[{type:"boolean",name:"ui.notify.enableSound",caption:c.default.string("setting.notification.enableSoundNotification")},{type:"select",name:"ui.notify.playSoundCondition",className:"level-2",options:[{value:"",label:c.default.string("setting.notification.onNeed")},{value:"onWindowBlur",label:c.default.string("setting.notification.onWindowBlur")},{value:"onWindowHide",label:c.default.string("setting.notification.onWindowHide")}],hidden:k,caption:c.default.string("setting.notification.playSoundCondition")},{type:"boolean",className:"level-2",name:"ui.notify.muteOnUserIsBusy",hidden:k,caption:c.default.string("setting.notification.muteOnUserIsBusy")},{type:"boolean",name:"ui.notify.flashTrayIcon",hidden:M,caption:c.default.string("setting.notification.flashTrayIcon")},{type:"select",name:"ui.notify.flashTrayIconCondition",className:"level-2",options:[{value:"onWindowBlur",label:c.default.string("setting.notification.onWindowBlur")},{value:"onWindowHide",label:c.default.string("setting.notification.onWindowHide")}],hidden:j,caption:c.default.string("setting.notification.flashTrayIconCondition")},{type:"boolean",name:"ui.notify.enableWindowNotification",caption:c.default.string("setting.notification.enableWindowNotification")},{type:"select",name:"ui.notify.windowNotificationCondition",className:"level-2",options:[{value:"",label:c.default.string("setting.notification.onNeed")},{value:"onWindowBlur",label:c.default.string("setting.notification.onWindowBlur")},M?null:{value:"onWindowHide",label:c.default.string("setting.notification.onWindowHide")}],hidden:x,caption:c.default.string("setting.notification.windowNotificationCondition")},{type:"boolean",className:"level-2",hidden:x,name:"ui.notify.safeWindowNotification",caption:c.default.string("setting.notification.safeWindowNotificationTip")}]},{name:"windows",hidden:M,title:c.default.string("setting.section.windows"),items:[{type:"boolean",name:"ui.app.hideWindowOnOpenAtLogin",caption:c.default.string("setting.windows.hideWindowOnOpenAtLogin")},{type:"boolean",name:"ui.app.hideWindowOnBlur",caption:c.default.string("setting.windows.hideWindowOnBlur")},{type:"boolean",name:"ui.app.removeFromTaskbarOnHide",caption:c.default.string("setting.windows.removeFromTaskbarOnHide")},{type:"select",name:"ui.app.onClose",hidden:!h.default.has("ui.showQuitConfirmDialog"),options:[{value:"ask",label:c.default.string("setting.windows.askEveryTime")},{value:"minimize",label:c.default.string("setting.windows.minimizeMainWindow")},{value:"close",label:c.default.string("setting.windows.quitApp")}],caption:c.default.string("setting.windows.onClickCloseButton")},{type:"zoomFactor",name:"local.ui.zoomFactor",hidden:!h.default.has("ui.setZoomFactor"),caption:c.default.string("setting.windows.zoomFactor")}]},{name:"hotkeys",hidden:M,title:c.default.string("setting.section.hotkeys"),items:[{type:"select",name:"shortcut.sendMessage",options:a.default.ui["hotkey.sendMessageOptions"].map(u.formatKeyDecoration),caption:c.default.string("setting.hotkeys.sendMessage")},{hidden:M,type:"hotkey",name:"shortcut.captureScreen",caption:c.default.string("setting.hotkeys.globalCaptureScreen")},{type:"hotkey",hidden:M,name:"shortcut.focusWindow",caption:c.default.string("setting.hotkeys.globalFocusWindow")}]},{name:"advanced",title:c.default.string("setting.section.advanced"),hidden:M,items:[{type:"boolean",name:"ui.chat.initConference",description:c.default.string("setting.advanced.initConferenceDescription"),caption:c.default.string("setting.advanced.initConference"),hidden:M}]},{name:"reset",title:c.default.string("setting.section.reset"),items:[{type:"button",name:"openCacheFilePath",className:"block dark app-reset-btn ",caption:c.default.string("setting.section.openCacheFilePath"),hidden:!this.cachePathExist,click:function(){e.cachePathExist&&h.default.has("ui.openFileItem")?h.default.call("ui.openFileItem",e.cacheFilePath):y.default.alert(c.default.string("setting.openCacheFilePath.noCache"))}},{type:"text",name:"openCacheFilePath.tip",className:"inline-block has-padding-h text-gray cache-tip-position",text:c.default.string("setting.openCacheFilePath.tip"),hidden:!this.cachePathExist},{type:"button",name:"reset",className:"".concat(this.cachePathExist?"block":""," dark app-reset-btn"),caption:c.default.string("setting.reset.btn"),click:function(){e.setSettings(i.default)}},{type:"text",name:"reset.tip",className:"inline-block has-padding-h text-gray ".concat(this.cachePathExist?"reset-tip-position":"reset-tip-position-nocache"),text:c.default.string("setting.reset.tip")}]}];return r.default.createElement("div",w({},n,{className:(0,l.classes)("app-user-setting space",t)}),o.map((function(t){return t.hidden?null:r.default.createElement("section",{key:t.name,className:"space app-setting-group-".concat(t.name)},r.default.createElement("header",{className:"heading divider space-sm"},r.default.createElement("strong",{className:"title text-gray"},t.title)),r.default.createElement("div",{className:"items"},t.items.map((function(t){return e.renderConfigItem(t)}))))})))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),o}(r.Component),P(t.default=n,"propTypes",{settings:o.default.object.isRequired,localSettings:o.default.object,className:o.default.string}),P(n,"defaultProps",{className:null,localSettings:null})},21531:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showWebviewDialog=t.default=void 0;var r=u(n(67294)),o=u(n(52133)),a=u(n(4062)),i=u(n(61997)),l=u(n(61862));function u(e){return e&&e.__esModule?e:{default:e}}n={show:t.showWebviewDialog=function(e,t,n){var u,s=t&&t.width,c=t&&t.height,f=(t&&t.size&&("lg"===t.size?(s=s||window.innerWidth-40,c=c||window.innerHeight-40):"full"===t.size&&(s=s||"100%",c=c||"100%")),"number"==typeof c&&(c="".concat(c,"px")),"number"==typeof s&&(s="".concat(s,"px")),(0,i.default)());return t.isMaximizeOnPopup&&(u=n,n=function(){var e=document.getElementById(f);e&&e.classList.toggle("fullscreen"),u&&u()}),o.default.show({id:f,style:{width:s||860,height:c||640},headingClassName:"dock dock-right dock-top",actions:!1,animation:"enter-from-bottom fade",contentClassName:"no-padding flex stretch",listenUpdateStyle:!0,content:r.default.createElement(a.default,{displayId:f,src:e,options:t,lang:l.default,isMaximizeOnPopup:t.isMaximizeOnPopup,title:t.title||null})},n)}},t.default=n},4062:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=y(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=m(n(45697)),i=n(64393),l=m(n(55263)),u=n(2388),s=n(40328),c=n(81087),f=n(95214),d=m(n(74160)),p=m(n(94128)),h=["className","onLoadingChange","onPageTitleUpdated","src","options","displayId","title","favicon","onRequestOpenUrl","titleBarStyle","lang","isMaximizeOnPopup"];function m(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function b(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=S(e);if(n=t?(n=S(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return O(o)}}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=m;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e);var n,r,a=w(m);function m(e){var t,n;if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");_(O(n=a.call(this,e)),"handleFaviconUpdated",(function(e){e.favicons&&e.favicons.length&&n.setState({favicon:e.favicons[0]})})),_(O(n),"handlePageTitleChange",(function(e,t){var r=n.props.onPageTitleUpdated;e!==n.state.title&&n.setState({title:e}),r&&r(e,t)})),_(O(n),"handleLoadingChange",(function(e){n.setState({loading:e});var t=n.props.onLoadingChange;if(t){for(var r=arguments.length,o=new Array(1<r?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];t.apply(void 0,[e].concat(o))}})),_(O(n),"handleReloadBtnClick",(function(){n.setState({loading:!0},(function(){n.webview.reloadWebview()}))})),_(O(n),"handleReloadBtnContextMenu",(function(e){var t;(0,c.showContextMenu)({x:e.clientX,y:e.clientY,direction:"below-left",triggerElement:e.target},[{label:null!=(t=null==(t=n.props.lang)?void 0:t.string("webview.foreceReload"))?t:"Force Reload",click:function(){n.webview.reloadWebview(!0)}}]),e.preventDefault()})),_(O(n),"handleStopBtnClick",(function(){n.webview&&n.webview.webview&&n.webview.webview.stop&&n.webview.webview.stop()})),_(O(n),"handleGoBackBtnClick",(function(){n.webview&&n.webview.webview&&n.webview.webview.goBack&&n.webview.webview.goBack()})),_(O(n),"handleGoForwardBtnClick",(function(){n.webview&&n.webview.webview&&n.webview.webview.goForward&&n.webview.webview.goForward()})),_(O(n),"handleOpenBtnClick",(function(){var e=n.webview&&n.webview.webview&&n.webview.webview.getURL?n.webview.webview.getURL():n.props.src;n.props.onRequestOpenUrl?n.props.onRequestOpenUrl(e):(0,f.openUrlInBrowser)(e)})),_(O(n),"handleMaximizeBtnClick",(function(){var e=n.props.displayId;e&&(e=document.getElementById(e))&&(e.classList.toggle("fullscreen"),n.setState({isMaximize:e.classList.contains("fullscreen")}))})),_(O(n),"handleDevBtnClick",(function(){n.webview&&n.webview.webview&&n.webview.webview.openDevTools()})),_(O(n),"handleCopyUrlBtnClick",(function(){var e;n.webview&&n.webview.webview&&(e=n.webview.webview.getURL?n.webview.webview.getURL():n.props.src,p.default.call("clipboard.writeText",e))})),_(O(n),"getWebviewRef",(function(e){n.webview=e}));var r="function"==typeof e.src?"":e.src,o=(null!=(o=e.options)?o:{}).initialTitle;return n.state={favicon:null!=(t=e.favicon)?t:"mdi-web",actualSrc:r,title:null!=(t=null!=(t=e.title)?t:o)?t:r,loading:!1,isMaximize:e.isMaximizeOnPopup},n}return t=m,(e=[{key:"componentDidMount",value:function(){var e=this.webview.webview;e&&e.addEventListener&&e.addEventListener("page-favicon-updated",this.handleFaviconUpdated),this.getActualUrl()}},{key:"getActualUrl",value:(n=function*(){var e=this.props.src;"function"==typeof e&&(e=yield e(this),this.setState({actualSrc:e}))},r=function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(e){b(a,r,o,i,l,"next",e)}function l(e){b(a,r,o,i,l,"throw",e)}i(void 0)}))},function(){return r.apply(this,arguments)})},{key:"reloadWebview",value:function(){this.webviewId&&document.getElementById(this.webviewId).reload()}},{key:"render",value:function(){var e=(f=this.props).className,t=(f.onLoadingChange,f.onPageTitleUpdated,f.src,f.options),n=f.displayId,r=f.title,a=(f.favicon,f.onRequestOpenUrl,f.titleBarStyle),c=f.lang,f=(f.isMaximizeOnPopup,function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(f,h)),p=(m=this.state).isMaximize,m=m.actualSrc,y=this.webview&&this.webview.webview,b=!d.default.ui["webview.frame.hiddenNavButtons"];return o.default.createElement("div",g({className:(0,i.classes)("webview-frame column",e)},f),o.default.createElement("div",{className:"heading flex-none shadow-2",style:a},(0,u.renderAvatar)({auto:this.state.loading?"mdi-loading spin muted":this.state.favicon,size:26}),o.default.createElement("div",{title:this.state.title,className:"title text-ellipsis strong"},this.state.title),o.default.createElement("nav",{className:"nav",style:{marginRight:40}},DEBUG?o.default.createElement("a",{onClick:this.handleDevBtnClick},(0,s.renderIcon)("auto-fix")):null,DEBUG?o.default.createElement("a",{onClick:this.handleCopyUrlBtnClick},(0,s.renderIcon)("link")):null,o.default.createElement("a",{"data-hint":c.string("webview.openInBrowser"),onClick:this.handleOpenBtnClick},(0,s.renderIcon)("open-in-new")),b&&o.default.createElement("a",{"data-hint":c.string("webview.goBack"),className:y&&y.canGoBack&&y.canGoBack()?"":"disabled",onClick:this.handleGoBackBtnClick},(0,s.renderIcon)("arrow-left")),b&&o.default.createElement("a",{"data-hint":c.string("webview.goForward"),className:y&&y.canGoForward&&y.canGoForward()?"":"disabled",onClick:this.handleGoForwardBtnClick},(0,s.renderIcon)("arrow-right")),this.state.loading?o.default.createElement("a",{className:"hint--bottom-right","data-hint":c.string("webview.stopLoad"),onClick:this.handleStopBtnClick},(0,s.renderIcon)("close-circle-outline")):o.default.createElement("a",{className:"hint--bottom-right","data-hint":c.string("webview.reload"),onClick:this.handleReloadBtnClick,onContextMenu:this.handleReloadBtnContextMenu},(0,s.renderIcon)("reload")),n?o.default.createElement("a",{className:"hint--bottom-right","data-hint":c.string("webview.maximize"),onClick:this.handleMaximizeBtnClick},(0,s.renderIcon)(p?"window-restore":"window-maximize")):null)),o.default.createElement(l.default,g({modalId:n,ref:this.getWebviewRef,className:"flex-auto relative",src:m},t,{onLoadingChange:this.handleLoadingChange,onPageTitleUpdated:r?null:this.handlePageTitleChange})))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),m}(o.Component),_(t.default=n,"propTypes",{className:a.default.string,onLoadingChange:a.default.func,onPageTitleUpdated:a.default.func,options:a.default.object,displayId:a.default.any,favicon:a.default.string,src:a.default.oneOfType([a.default.string,a.default.func]).isRequired,title:a.default.string,titleBarStyle:a.default.object,onRequestOpenUrl:a.default.func,lang:a.default.object.isRequired,isMaximizeOnPopup:a.default.bool}),_(n,"defaultProps",{className:null,onLoadingChange:null,onPageTitleUpdated:null,options:null,displayId:null,favicon:null,title:null,titleBarStyle:null,onRequestOpenUrl:null,isMaximizeOnPopup:!1})},9913:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openWebviewWindow=function(e){if(!i.default.has("nwc.openWindowAndCreateNwc"))return function(){return d.apply(this,arguments)}(e);var t,n,s,f=i.default.call("nwc.getNwcByID",null==e?void 0:e.id);if(!f)return t=i.default.call("nwc.openWindowAndCreateNwc","webview",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:e.id,backgroundColor:(0,a.isDarkThemeMode)()?"#343434":"#ececec",title:"".concat(l.default.string("file.preview")).concat(e.title?" - ".concat(e.title):""),minWidth:1024,minHeight:700,width:1024,height:700,overlayIcon:"webview-win.png"},e.windowOptions)),n=function(){t.invoke("browserWindow.close")},s=(0,o.onUserLogout)(n),t.once("window-closed",(function(){r.default.off(s)})),t.shareData({lang:l.default,sourceUrl:e.source,favicon:e.favicon,title:e.title,theme:e.theme,titleBarStyle:e.titleBarStyle,webviewOptions:e.options}),t.registerInvokeTarget("openUrl",u.openUrl),{close:n};f.showAndFocusWindow()};var r=s(n(65286)),o=n(15973),a=n(99838),i=s(n(94128)),l=s(n(61862)),u=n(95214);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function f(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function d(){var e;return e=function*(e){var t=("function"==typeof(e=e.source)&&(e=yield e()),yield i.default.call("ui.openExternal",e)),n=(0,o.onUserLogout)((function(){t.close()}));return t.onbeforeunload=function(){r.default.off(n)},{close:t.close}},(d=function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){f(a,r,o,i,l,"next",e)}function l(e){f(a,r,o,i,l,"throw",e)}i(void 0)}))}).apply(this,arguments)}},55263:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==O(e)&&"function"!=typeof e)return{default:e};if((t=b(t))&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(n(67294)),o=g(n(45697)),a=n(64393),i=g(n(61997)),l=n(95214),u=n(19815),s=g(n(65286)),c=n(16986),f=g(n(91705)),d=g(n(94128)),p=n(13544),h=g(n(74160)),m=g(n(61862)),y=n(15973);function g(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function v(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var j=d.default.isType("electron"),x={"-1":"IO_PENDING","-2":"FAILED","-3":"ABORTED","-4":"INVALID_ARGUMENT","-5":"INVALID_HANDLE","-6":"FILE_NOT_FOUND","-7":"TIMED_OUT","-8":"FILE_TOO_BIG","-9":"UNEXPECTED","-10":"ACCESS_DENIED","-11":"NOT_IMPLEMENTED","-12":"INSUFFICIENT_RESOURCES","-13":"OUT_OF_MEMORY","-14":"UPLOAD_FILE_CHANGED","-15":"SOCKET_NOT_CONNECTED","-16":"FILE_EXISTS","-17":"FILE_PATH_TOO_LONG","-18":"FILE_NO_SPACE","-19":"FILE_VIRUS_INFECTED","-20":"BLOCKED_BY_CLIENT","-21":"NETWORK_CHANGED","-22":"BLOCKED_BY_ADMINISTRATOR","-23":"SOCKET_IS_CONNECTED","-24":"BLOCKED_ENROLLMENT_CHECK_PENDING","-25":"UPLOAD_STREAM_REWIND_NOT_SUPPORTED","-26":"CONTEXT_SHUT_DOWN","-27":"BLOCKED_BY_RESPONSE","-29":"CLEARTEXT_NOT_PERMITTED","-30":"BLOCKED_BY_CSP","-31":"H2_OR_QUIC_REQUIRED","-100":"CONNECTION_CLOSED","-101":"CONNECTION_RESET","-102":"CONNECTION_REFUSED","-103":"CONNECTION_ABORTED","-104":"CONNECTION_FAILED","-105":"NAME_NOT_RESOLVED","-106":"INTERNET_DISCONNECTED","-107":"SSL_PROTOCOL_ERROR","-108":"ADDRESS_INVALID","-109":"ADDRESS_UNREACHABLE","-110":"SSL_CLIENT_AUTH_CERT_NEEDED","-111":"TUNNEL_CONNECTION_FAILED","-112":"NO_SSL_VERSIONS_ENABLED","-113":"SSL_VERSION_OR_CIPHER_MISMATCH","-114":"SSL_RENEGOTIATION_REQUESTED","-115":"PROXY_AUTH_UNSUPPORTED","-116":"CERT_ERROR_IN_SSL_RENEGOTIATION","-117":"BAD_SSL_CLIENT_AUTH_CERT","-118":"CONNECTION_TIMED_OUT","-119":"HOST_RESOLVER_QUEUE_TOO_LARGE","-120":"SOCKS_CONNECTION_FAILED","-121":"SOCKS_CONNECTION_HOST_UNREACHABLE","-122":"ALPN_NEGOTIATION_FAILED","-123":"SSL_NO_RENEGOTIATION","-124":"WINSOCK_UNEXPECTED_WRITTEN_BYTES","-125":"SSL_DECOMPRESSION_FAILURE_ALERT","-126":"SSL_BAD_RECORD_MAC_ALERT","-127":"PROXY_AUTH_REQUESTED","-130":"PROXY_CONNECTION_FAILED","-131":"MANDATORY_PROXY_CONFIGURATION_FAILED","-133":"PRECONNECT_MAX_SOCKET_LIMIT","-134":"SSL_CLIENT_AUTH_PRIVATE_KEY_ACCESS_DENIED","-135":"SSL_CLIENT_AUTH_CERT_NO_PRIVATE_KEY","-136":"PROXY_CERTIFICATE_INVALID","-137":"NAME_RESOLUTION_FAILED","-138":"NETWORK_ACCESS_DENIED","-139":"TEMPORARILY_THROTTLED","-140":"HTTPS_PROXY_TUNNEL_RESPONSE_REDIRECT","-141":"SSL_CLIENT_AUTH_SIGNATURE_FAILED","-142":"MSG_TOO_BIG","-145":"WS_PROTOCOL_ERROR","-147":"ADDRESS_IN_USE","-148":"SSL_HANDSHAKE_NOT_COMPLETED","-149":"SSL_BAD_PEER_PUBLIC_KEY","-150":"SSL_PINNED_KEY_NOT_IN_CERT_CHAIN","-151":"CLIENT_AUTH_CERT_TYPE_UNSUPPORTED","-153":"SSL_DECRYPT_ERROR_ALERT","-154":"WS_THROTTLE_QUEUE_TOO_LARGE","-156":"SSL_SERVER_CERT_CHANGED","-159":"SSL_UNRECOGNIZED_NAME_ALERT","-160":"SOCKET_SET_RECEIVE_BUFFER_SIZE_ERROR","-161":"SOCKET_SET_SEND_BUFFER_SIZE_ERROR","-162":"SOCKET_RECEIVE_BUFFER_SIZE_UNCHANGEABLE","-163":"SOCKET_SEND_BUFFER_SIZE_UNCHANGEABLE","-164":"SSL_CLIENT_AUTH_CERT_BAD_FORMAT","-166":"ICANN_NAME_COLLISION","-167":"SSL_SERVER_CERT_BAD_FORMAT","-168":"CT_STH_PARSING_FAILED","-169":"CT_STH_INCOMPLETE","-170":"UNABLE_TO_REUSE_CONNECTION_FOR_PROXY_AUTH","-171":"CT_CONSISTENCY_PROOF_PARSING_FAILED","-172":"SSL_OBSOLETE_CIPHER","-173":"WS_UPGRADE","-174":"READ_IF_READY_NOT_IMPLEMENTED","-176":"NO_BUFFER_SPACE","-177":"SSL_CLIENT_AUTH_NO_COMMON_ALGORITHMS","-178":"EARLY_DATA_REJECTED","-179":"WRONG_VERSION_ON_EARLY_DATA","-180":"TLS13_DOWNGRADE_DETECTED","-181":"SSL_KEY_USAGE_INCOMPATIBLE","-200":"CERT_COMMON_NAME_INVALID","-201":"CERT_DATE_INVALID","-202":"CERT_AUTHORITY_INVALID","-203":"CERT_CONTAINS_ERRORS","-204":"CERT_NO_REVOCATION_MECHANISM","-205":"CERT_UNABLE_TO_CHECK_REVOCATION","-206":"CERT_REVOKED","-207":"CERT_INVALID","-208":"CERT_WEAK_SIGNATURE_ALGORITHM","-210":"CERT_NON_UNIQUE_NAME","-211":"CERT_WEAK_KEY","-212":"CERT_NAME_CONSTRAINT_VIOLATION","-213":"CERT_VALIDITY_TOO_LONG","-214":"CERTIFICATE_TRANSPARENCY_REQUIRED","-215":"CERT_SYMANTEC_LEGACY","-217":"CERT_KNOWN_INTERCEPTION_BLOCKED","-218":"SSL_OBSOLETE_VERSION","-219":"CERT_END","-300":"INVALID_URL","-301":"DISALLOWED_URL_SCHEME","-302":"UNKNOWN_URL_SCHEME","-303":"INVALID_REDIRECT","-310":"TOO_MANY_REDIRECTS","-311":"UNSAFE_REDIRECT","-312":"UNSAFE_PORT","-320":"INVALID_RESPONSE","-321":"INVALID_CHUNKED_ENCODING","-322":"METHOD_NOT_SUPPORTED","-323":"UNEXPECTED_PROXY_AUTH","-324":"EMPTY_RESPONSE","-325":"RESPONSE_HEADERS_TOO_BIG","-327":"PAC_SCRIPT_FAILED","-328":"REQUEST_RANGE_NOT_SATISFIABLE","-329":"MALFORMED_IDENTITY","-330":"CONTENT_DECODING_FAILED","-331":"NETWORK_IO_SUSPENDED","-332":"SYN_REPLY_NOT_RECEIVED","-333":"ENCODING_CONVERSION_FAILED","-334":"UNRECOGNIZED_FTP_DIRECTORY_LISTING_FORMAT","-336":"NO_SUPPORTED_PROXIES","-337":"HTTP2_PROTOCOL_ERROR","-338":"INVALID_AUTH_CREDENTIALS","-339":"UNSUPPORTED_AUTH_SCHEME","-340":"ENCODING_DETECTION_FAILED","-341":"MISSING_AUTH_CREDENTIALS","-342":"UNEXPECTED_SECURITY_LIBRARY_STATUS","-343":"MISCONFIGURED_AUTH_ENVIRONMENT","-344":"UNDOCUMENTED_SECURITY_LIBRARY_STATUS","-345":"RESPONSE_BODY_TOO_BIG_TO_DRAIN","-346":"RESPONSE_HEADERS_MULTIPLE_CONTENT_LENGTH","-347":"INCOMPLETE_HTTP2_HEADERS","-348":"PAC_NOT_IN_DHCP","-349":"RESPONSE_HEADERS_MULTIPLE_CONTENT_DISPOSITION","-350":"RESPONSE_HEADERS_MULTIPLE_LOCATION","-351":"HTTP2_SERVER_REFUSED_STREAM","-352":"HTTP2_PING_FAILED","-354":"CONTENT_LENGTH_MISMATCH","-355":"INCOMPLETE_CHUNKED_ENCODING","-356":"QUIC_PROTOCOL_ERROR","-357":"RESPONSE_HEADERS_TRUNCATED","-358":"QUIC_HANDSHAKE_FAILED","-360":"HTTP2_INADEQUATE_TRANSPORT_SECURITY","-361":"HTTP2_FLOW_CONTROL_ERROR","-362":"HTTP2_FRAME_SIZE_ERROR","-363":"HTTP2_COMPRESSION_ERROR","-364":"PROXY_AUTH_REQUESTED_WITH_NO_CONNECTION","-365":"HTTP_1_1_REQUIRED","-366":"PROXY_HTTP_1_1_REQUIRED","-367":"PAC_SCRIPT_TERMINATED","-370":"INVALID_HTTP_RESPONSE","-371":"CONTENT_DECODING_INIT_FAILED","-372":"HTTP2_RST_STREAM_NO_ERROR_RECEIVED","-373":"HTTP2_PUSHED_STREAM_NOT_AVAILABLE","-374":"HTTP2_CLAIMED_PUSHED_STREAM_RESET_BY_SERVER","-375":"TOO_MANY_RETRIES","-376":"HTTP2_STREAM_CLOSED","-377":"HTTP2_CLIENT_REFUSED_STREAM","-378":"HTTP2_PUSHED_RESPONSE_DOES_NOT_MATCH","-379":"HTTP_RESPONSE_CODE_FAILURE","-380":"QUIC_CERT_ROOT_NOT_KNOWN","-381":"QUIC_GOAWAY_REQUEST_CAN_BE_RETRIED","-400":"CACHE_MISS","-401":"CACHE_READ_FAILURE","-402":"CACHE_WRITE_FAILURE","-403":"CACHE_OPERATION_NOT_SUPPORTED","-404":"CACHE_OPEN_FAILURE","-405":"CACHE_CREATE_FAILURE","-406":"CACHE_RACE","-407":"CACHE_CHECKSUM_READ_FAILURE","-408":"CACHE_CHECKSUM_MISMATCH","-409":"CACHE_LOCK_TIMEOUT","-410":"CACHE_AUTH_FAILURE_AFTER_READ","-411":"CACHE_ENTRY_NOT_SUITABLE","-412":"CACHE_DOOM_FAILURE","-413":"CACHE_OPEN_OR_CREATE_FAILURE","-501":"INSECURE_RESPONSE","-502":"NO_PRIVATE_KEY_FOR_CERT","-503":"ADD_USER_CERT_FAILED","-504":"INVALID_SIGNED_EXCHANGE","-505":"INVALID_WEB_BUNDLE","-506":"TRUST_TOKEN_OPERATION_FAILED","-507":"TRUST_TOKEN_OPERATION_SUCCESS_WITHOUT_SENDING_REQUEST","-601":"FTP_FAILED","-602":"FTP_SERVICE_UNAVAILABLE","-603":"FTP_TRANSFER_ABORTED","-604":"FTP_FILE_BUSY","-605":"FTP_SYNTAX_ERROR","-606":"FTP_COMMAND_NOT_SUPPORTED","-607":"FTP_BAD_COMMAND_SEQUENCE","-701":"PKCS12_IMPORT_BAD_PASSWORD","-702":"PKCS12_IMPORT_FAILED","-703":"IMPORT_CA_CERT_NOT_CA","-704":"IMPORT_CERT_ALREADY_EXISTS","-705":"IMPORT_CA_CERT_FAILED","-706":"IMPORT_SERVER_CERT_FAILED","-707":"PKCS12_IMPORT_INVALID_MAC","-708":"PKCS12_IMPORT_INVALID_FILE","-709":"PKCS12_IMPORT_UNSUPPORTED","-710":"KEY_GENERATION_FAILED","-712":"PRIVATE_KEY_EXPORT_FAILED","-713":"SELF_SIGNED_CERT_GENERATION_FAILED","-714":"CERT_DATABASE_CHANGED","-800":"DNS_MALFORMED_RESPONSE","-801":"DNS_SERVER_REQUIRES_TCP","-802":"DNS_SERVER_FAILED","-803":"DNS_TIMED_OUT","-804":"DNS_CACHE_MISS","-805":"DNS_SEARCH_EMPTY","-806":"DNS_SORT_ERROR","-808":"DNS_SECURE_RESOLVER_HOSTNAME_RESOLUTION_FAILED"},M=["window.getXXCViewID = function(){return '{id}';};","window.getXXCCardFullWidth = function(){return {cardWidth};};","window.callXXCCommand = function(command, options, ...params) {","var url = command + '/';",'if (typeof options === "string") url += [options, ...params].map(x => encodeURIComponent(x)).join("/");','else if (Array.isArray(options)) url += options.map(x => encodeURIComponent(x)).join("/");','else if (typeof options === "object") {',"url += '?';","for (const name in options) {","if (options.hasOwnProperty(name)) {","if (url[url.length - 1] !== '?') url += '&';","url += name + '=' + encodeURIComponent(options[name]);","}","}","}","window.open('xxc:' + url, '_blank');","};","window.setXXCViewStyle = function(style, options) {","if (style && typeof style !== 'string') style = JSON.stringify(style);","var commandLine = 'updateViewStyle/{id}'","if (style !== undefined) commandLine += '/' + encodeURIComponent(style);","window.callXXCCommand(commandLine, options);","};","window.showXXCView = function(show) {if(show === undefined) show = true; setXXCViewStyle(null, {show: !!show})};","window.adjustXXCViewHeight = function(height, onlyIncrease) {","height = height || document.body.clientHeight;","if (onlyIncrease && window.lastXXCViewHeight && height < window.lastXXCViewHeight) return;","window.lastXXCViewHeight = height;","window.setXXCViewStyle({height: height});","return height;","};","if ({autoHeight}) window.adjustXXCViewHeight();",'window.dispatchEvent(new Event("xuan-ready"));',"window.xuanReady = true;"].join("\n");n=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(n=t?(n=P(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,n&&("object"===O(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return E(r)}}(o);function o(e){var t;if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");k(E(t=n.call(this,e)),"handleWebviewElementReady",(function(e){e=e.target,(t._webview=e).addEventListener("did-start-loading",t.handleLoadingStart),e.addEventListener("did-finish-load",t.handleLoadingStop),e.addEventListener("did-stop-loading",t.handleLoadingStop),e.addEventListener("page-title-updated",t.handlePageTitleChange),e.addEventListener("did-fail-load",t.handleLoadFail),e.addEventListener("new-window",t.handleNewWindow),e.addEventListener("dom-ready",t.handleDomReady),e.addEventListener("will-navigate",t.handleWillNavigate)})),k(E(t),"handleWillNavigate",(function(e){var n=t.props.onNavigate;n&&n(e.url,e)})),k(E(t),"handleNewWindow",(function(e){var n,r=e.url;if(r.startsWith("xxc://webview/alert/"))return t.setState((function(e){return e=e.alertMessages||[],{alertMessages:[].concat(S(e),[decodeURIComponent(r.substring("xxc://webview/alert/".length))])}}));t._lastNewWindowEvent&&t._lastNewWindowEvent.url===r&&e.timeStamp-t._lastNewWindowEvent.timeStamp<=1e3||(t._lastNewWindowEvent={timeStamp:e.timeStamp,url:r},(n=t.props.modalId)&&(r=r.replace("closeModal","closeModal/".concat(n))),e.preventDefault(),(0,l.openUrl)(r,null,e,{modalId:n}))})),k(E(t),"handlePageTitleChange",(function(e){t.pageTitle=e.title;var n=t.props.onPageTitleUpdated;n&&n(e.title,e.explicitSet)})),k(E(t),"handleLoadingStart",(function(){var e=t.props.onLoadingChange;e&&e(!0),t.setState({errorCode:null,errorDescription:null})})),k(E(t),"handleLoadFail",(function(e){var n,r=e.errorCode,o=e.errorDescription,a=e.validatedURL;-3!==r&&((n=t.props.onLoadingChange)&&n(!1,r,o,a),t.setState({errorCode:r,errorDescription:o,domReady:!0}),DEBUG&&console.error("Cannot load webview",e))})),k(E(t),"handleLoadingStop",(function(){var e=t.props.onLoadingChange;e&&e(!1),t.setState({domReady:!0})})),k(E(t),"handleDomReady",(function(){var e,n,r,o=E(t).webview,a=(p=t.props).onDomReady,i=p.fluidWidth,l=p.showCondition,u=p.style,s=p.insertCss,f=p.executeJavaScript,d=p.onExecuteJavaScript,p=p.injectData,h=(s&&(o.insertCSS(s),DEBUG&&console.log("Webview.insertCSS",s)),o.executeJavaScript((0,c.formatString)(M,{id:t.webviewId,autoHeight:u&&"auto"===u.height,cardWidth:"function"==typeof i?i():i||0})+(p?"\nwindow.getXXCInjectData = function() {return ".concat(JSON.stringify(p),";}"):""),!1),f&&(n=!1,"object"===O(f)?(e=f.code,s=f.userGesture,n=void 0!==s&&s):e=f,o.executeJavaScript(e,n).then((function(){"function"==typeof d&&d(),DEBUG&&console.log("Webview.executeJavaScript",{code:e,userGesture:n,webview:o})})).catch((function(t){DEBUG&&console.log("Webview.executeJavaScript with error",{code:e,userGesture:n,webview:o,error:t})}))),t.props.injectForm);h&&("string"==typeof h&&(h=JSON.parse(h)),r=["(function(){"],Object.keys(h).forEach((function(e){var t;e&&"$"!==e[0]&&(t=(t=h[e])&&t.replace(/`/g,"\\`"),r.push("document.querySelectorAll('".concat(e,"').forEach(ele => {if(ele.tagName === 'INPUT' || ele.tagName === 'SELECT' || ele.tagName === 'TEXTAREA') {ele.value = `").concat(t,"`;}});")))})),["click","submit","focus","input","paste"].forEach((function(e){var t=h["$".concat(e)];t&&r.push("document.querySelectorAll('".concat(t,"').forEach(ele => {ele.dispatchEvent(new Event('").concat(e,"'));});"))})),r.push("}());"),u=r.join("\n"),DEBUG&&console.log("Webview.injectForm",{injectForm:h,injectScriptCode:u}),o.executeJavaScript(u,!1).then((function(){DEBUG&&console.log("Webview.injectForm.finish",h)})).catch()),a&&a(o),i={domReady:!0},t.state.loading&&"domReady"===l&&(i.loading=!1),t.setState(i)})),k(E(t),"handleClickAlertButton",(function(){return t.setState((function(e){return(e=e.alertMessages||[]).length?(e.shift(),{alertMessages:S(e)}):{alertMessages:e}}))})),t.webviewId=(0,i.default)();var r=e.type;return t.isWebview="auto"===r&&j||"webview"===r,t.isIframe=!t.isWebview,t.state={errorCode:null,errorDescription:null,domReady:!1,extraStyle:null,alertMessages:null,loading:"immediately"!==e.showCondition},t}return t=o,(e=[{key:"componentDidMount",value:function(){var e,t,n,r=this;this.isIframe&&(e=this.webview.iframe,t=!0,e.onload=function(){"loading"!==e.contentWindow.document.readyState?(r.handleDomReady(),r.handleLoadingStop()):(r.handleLoadingStart(),t&&(t=!0,e.contentWindow.document.addEventListener("DOMContentLoaded",(function(){r.handleDomReady()}))))},"loading"!==e.contentWindow.document.readyState&&this.handleDomReady()),this.webviewUpdateStyleHandler=(0,u.onUpdateViewStyle)(this.webviewId,(function(e,t){t&&((n=r.state.loading)&&(t.show||!1===t.hide||"false"===t.hide)?r.setState({loading:!1}):n||!t.hide&&!1!==t.show&&"false"!==t.show||r.setState({loading:!0}));var n=r.props.modalId;n?(0,u.requestUpdateViewStyle)(n,e):void 0!==e&&r.setState({extraStyle:e})})),this.state.loading&&(n=this.props.maxLoadingTime,this.loadingTimerID=setTimeout((function(){r.setState({loading:!1}),r.loadingTimerID=null}),n))}},{key:"componentWillUnmount",value:function(){var e=this.webview;e&&(this.isWebview?(e.removeEventListener("did-start-loading",this.handleLoadingStart),e.removeEventListener("did-stop-loading",this.handleLoadingStop),e.removeEventListener("page-title-updated",this.handlePageTitleChange),e.removeEventListener("did-fail-load",this.handleLoadFail),e.removeEventListener("new-window",this.handleNewWindow),e.removeEventListener("dom-ready",this.handleDomReady),e.removeEventListener("will-navigate",this.handleWillNavigate)):this.isIframe&&(e=e.iframe)&&(e.onoad=null)),s.default.off(this.webviewUpdateStyleHandler),this.loadingTimerID&&(clearTimeout(this.loadingTimerID),this.loadingTimerID=null)}},{key:"webview",get:function(){if(this.isWebview)return this._webview;var e=document.getElementById(this.webviewId);return e=e&&this.isIframe?{contentWindow:e.contentWindow,iframe:e,reload:function(){e.contentWindow.location.reload()},insertCSS:function(t){var n=e.contentWindow.document,r=n.createElement("style");r.innerHTML=t,n.head.appendChild(r)},executeJavaScript:function(t,n,r){var o=e.contentWindow.document,a=o.createElement("script");a.innerHTML=t,o.body.appendChild(a),r&&r()},loadURL:function(t){e.contentWindow.location.href=t},getURL:function(){return e.contentWindow.location.href},get src(){return e.contentWindow.location.href},stop:function(){e.contentWindow.stop()}}:e}},{key:"reloadWebview",value:function(){var e=this.webview;e&&(0<arguments.length&&void 0!==arguments[0]&&arguments[0]?e.reloadIgnoringCache():e.reload())}},{key:"render",value:function(){var e=(u=this.props).className,t=u.src,n=u.style,o=u.hideBeforeDOMReady,i=u.loadingContent,l=u.nodeintegration,u=u.useMobileAgent,s=(v=this.state).errorCode,c=v.errorDescription,d=v.domReady,g=v.extraStyle,b=v.loading,v=v.alertMessages;(n=w(w(w({minHeight:"30px"},n),this.webviewStyle),g)).width&&"number"==typeof n.width&&(n.width="".concat(n.width,"px")),n.height&&"number"==typeof n.height&&(n.height="".concat(n.height,"px")),this.webviewStyle=n,g=(0,y.getCurrentUser)()||{account:"default",backendURL:"default"};var O,S,_=[];return t&&(this.isWebview?(O="file://".concat(process.env.APP_ROOT,"/assets/webview-preload.js"),S=(0,p.loadLazyModule)("react-electron-web-view"),_.push(r.default.createElement("div",{key:"webview",className:(0,a.classes)("webview fade in",e,{in:!o||d,"is-loading":b}),style:n},r.default.createElement(S,{src:t,className:"dock fluid-v fluid",nodeintegration:!!l||void 0,preload:O,useMobileAgent:u||void 0,onDidAttach:this.handleWebviewElementReady,useragent:"".concat(navigator.userAgent," xuanxuan/").concat(h.default.pkg.name,"/").concat(h.default.pkg.version),allowpopups:!0,webpreferences:"nativeWindowOpen = no, disableDialogs = ".concat(this.props.disableDialogs),partition:"persist:".concat(g.account,"+").concat(g.backendURL)}),Array.isArray(v)&&0<v.length&&r.default.createElement("div",{className:"dock darken center-content"},r.default.createElement("div",{className:"rounded layer box"},r.default.createElement("p",null,v[0]),r.default.createElement("button",{type:"button",className:"btn rounded primary btn-wide",onClick:this.handleClickAlertButton},m.default.string("common.confirm","OK"))))))):_.push(r.default.createElement("div",{className:(0,a.classes)("webview fade in",e,{in:!o||d,"is-loading":b}),style:n},r.default.createElement("iframe",{title:t,id:this.webviewId,src:t,sandbox:"allow-forms allow-modals allow-pointer-lock allow-popups allow-presentation allow-scripts allow-same-origin",scrolling:"auto",allowTransparency:"true",hidefocus:!0,frameBorder:"0",className:"dock fluid-v fluid no-margin user-selectable"}))),s&&_.push(r.default.createElement("div",{className:"dock box gray overflow-auto",key:"errorTip",style:{top:40}},r.default.createElement("h1",null,"ERROR ",s,": ",x["".concat(s)]),r.default.createElement("h2",null,t),r.default.createElement("div",null,c)))),t&&!b||!1===i||(S=null,S=r.default.isValidElement(i)?i:r.default.createElement("div",{className:"fluid center-content column"},r.default.createElement("div",{className:"has-padding-xl"},r.default.createElement(f.default,null)),r.default.createElement("div",{className:"content muted small text-ellipsis"},i||this.pageTitle||t)),_.push(r.default.createElement("div",{key:"loading",className:"webview-loading has-padding-sm center-content flex-auto"},S))),1<_.length?_:_[0]}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),o}(r.PureComponent),k(t.default=n,"propTypes",{className:o.default.string,onLoadingChange:o.default.func,onPageTitleUpdated:o.default.func,src:o.default.string,insertCss:o.default.string,executeJavaScript:o.default.oneOfType([o.default.string,o.default.object]),onExecuteJavaScript:o.default.func,onNavigate:o.default.func,onDomReady:o.default.func,injectForm:o.default.any,injectData:o.default.any,useMobileAgent:o.default.bool,nodeintegration:o.default.bool,hideBeforeDOMReady:o.default.bool,style:o.default.object,type:o.default.string,modalId:o.default.string,fluidWidth:o.default.oneOfType([o.default.number,o.default.func]),showCondition:o.default.oneOf(["immediately","domReady","manual"]),loadingContent:o.default.node,maxLoadingTime:o.default.number,disableDialogs:o.default.bool}),k(n,"defaultProps",{className:null,onLoadingChange:null,onPageTitleUpdated:null,src:null,insertCss:null,executeJavaScript:null,onExecuteJavaScript:null,onNavigate:null,injectForm:null,injectData:null,onDomReady:null,useMobileAgent:!1,nodeintegration:!1,hideBeforeDOMReady:!0,style:null,modalId:null,fluidWidth:null,type:"auto",showCondition:"immediately",loadingContent:null,maxLoadingTime:1e4,disableDialogs:!0})},58177:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=m(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=h(n(45697)),i=n(64393),l=h(n(40328)),u=h(n(18033)),s=h(n(51060)),c=n(14227),f=n(98649),d=n(32360),p=(n=h(n(83047)),["conference","className","independentMode","children"]);function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function g(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){g(a,r,o,i,l,"next",e)}function l(e){g(a,r,o,i,l,"throw",e)}i(void 0)}))}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=O(e);if(n=t?(n=O(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==o)return o;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var _=function(e){var t=h;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e);var n,r,a=w(h);function h(e){if(this instanceof h)return(e=a.call(this,e)).state={message:""},e;throw new TypeError("Cannot call a class as a function")}return t=h,(e=[{key:"componentDidMount",value:(r=b((function*(){var e=yield(0,c.getConferenceStatusMessage)(this.props.conference);this.setState({message:e})})),function(){return r.apply(this,arguments)})},{key:"componentDidUpdate",value:(n=b((function*(){var e=yield(0,c.getConferenceStatusMessage)(this.props.conference);e!==this.state.message&&this.setState({message:e})})),function(){return n.apply(this,arguments)})},{key:"render",value:function(){var e=(a=this.props).conference,t=a.className,n=a.independentMode,r=a.children,a=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(a,p),h=this.state.message,m=(0,c.getConferenceColor)(e),g=(0,f.getMenuItemsForContext)("conference.actions",{conference:e,independentMode:n}),b=[],v=[];return null!=g&&g.length&&g.forEach((function(e){(0,f.isDividerItem)(e)||(e._primary?b.push(o.default.createElement(u.default,{"data-hint":e._hint||e.label,className:(0,i.classes)("rounded",e._color||"primary"),disabled:e.disabled,key:e.id,icon:e.icon,label:e.label,hoverLabel:e._hoverLabel,url:e.url,click:e.click})):n||v.push(o.default.createElement(u.default,{"data-hint":e._hint,className:(0,i.classes)("big-btn hint--top",{muted:e.disabled,"hint--md":e._hint&&15<e._hint.length}),key:e.id,icon:e.icon,label:e.label,hoverLabel:e._hoverLabel,url:e.url,click:e.click})))})),g=n?null:o.default.createElement(s.default,{startTime:e.openedDate}),a=o.default.createElement("div",y({key:"main",className:"conference-bar x-list-item compact divider flex flex-middle dock-top"},a),o.default.createElement(l.default,{name:(0,c.getConferenceIcon)(e).replace("phone-plus","phone-in-talk"),className:"text-".concat(m)}),(0,d.isConferenceServerConnected)(e)?g:null,o.default.createElement("div",{className:(0,i.classes)("title text-ellipsis",16<h.length?"small":""),title:h},o.default.createElement("strong",null,h)),!!b.length&&!v.length&&o.default.createElement("div",{className:"flex-none flex-middle row toolbar"},b),r),(m=v.length?o.default.createElement("div",{key:"tool",className:(0,i.classes)("conference-toolbar single row space-betwenn",t)},o.default.createElement("div",{className:"conference-toolbar-left single row flex-middle"},v),o.default.createElement("div",{className:"conference-toolbar-right single row flex-middle flex-none"},b)):null)?[m,a]:a}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),h}(o.Component);S(t.default=_,"propTypes",{conference:a.default.instanceOf(n.default).isRequired,className:a.default.string,independentMode:a.default.bool,children:a.default.any}),S(_,"defaultProps",{className:null,independentMode:!1,children:null})},16276:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a,i,l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=O(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),u=w(n(45697)),s=w(n(10352)),c=w(n(18033)),f=n(64393),d=w(n(65286)),p=w(n(61862)),h=n(32360),m=n(44374),y=n(10088),g=w(n(94128)),b=n(68271),v=["cgid","className","children"];function w(e){return e&&e.__esModule?e:{default:e}}function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function j(e,t,n){if(document.body.classList.toggle("conference-video-fullscreen",t||e),document.body.classList.toggle("conference-video-fullscreen-only",t),document.body.classList.toggle("conference-video-expand-only",!t&&e),o!==t&&(t?"number"!=typeof a&&(a=0,document.addEventListener("mousemove",T,!0)):"number"==typeof a&&(a&&clearTimeout(a),a=null,document.removeEventListener("mousemove",T),document.body.classList.remove("conference-video-mouse-active"),document.body.classList.remove("conference-video-mouse-unactive"))),n||o!==t){if((e=g.default.access("ui.isFullscreen"))&&e()===t)return void(o=t);g.default.call("ui.setFullScreen",t)}o=t}function x(e){i!==e&&(i=e,document.body.classList.toggle("conference-video-mouse-active",e),document.body.classList.toggle("conference-video-mouse-unactive",!e))}function M(){x(!1)}function T(){a&&clearTimeout(a),o&&(x(!0),a=setTimeout(M,6e3))}n=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=P(e);if(n=t?(n=P(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return E(o)}}(o);function o(e){var t;if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");return k(E(t=n.call(this,e)),"_handleWindowLeaveFullscreen",(function(){t.state.fullscreen&&t.setState({fullscreen:!1},t._handleStateChange.bind(E(t),!0,!1))})),k(E(t),"_handleConferenceChange",(function(e){var n,r,o,a,i;e?(n=(0,h.isConferenceVideoPublished)(e),r=(0,h.isConferenceScreencastPublished)(e),o=(0,h.getVideoMediaStream)(e),a=(0,h.getScreencastMediaStream)(e),i=r||n||a||o,t.setState((function(e){return{videoStream:o,screencastStream:a,hasVideoOrScreencast:i,isScreencastPublished:r,fullscreen:!(e.fullscreen&&!i)&&e.fullscreen}}),t._handleStateChange.bind(E(t),!0,!0))):t.setState({videoStream:!1,screencastStream:!1,expand:!1,hasVideoOrScreencast:!1,isScreencastPublished:!1,fullscreen:!1},t._handleStateChange.bind(E(t),!0,!1))})),k(E(t),"handleFullscreenButtonClick",(function(){t.setState((function(e){return{fullscreen:!e.fullscreen,expand:!e.fullscreen}}),t._handleStateChange.bind(E(t),!0,!1))})),k(E(t),"handleExpandButtonClick",(function(){t.setState((function(e){return{expand:!e.expand}}),t._handleStateChange.bind(E(t),!1,!1))})),e=(0,m.getChatConference)(e.cgid).room,t.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({fullscreen:!1,expand:!1},e?{isScreencastPublished:(0,h.isConferenceScreencastPublished)(e),videoStream:(0,h.getVideoMediaStream)(e),screencastStream:(0,h.getScreencastMediaStream)(e)}:{videoStream:!1,screencastStream:!1,hasVideoOrScreencast:!1}),(t.state.videoStream||t.state.screencastStream)&&(t.state.hasVideoOrScreencast=!0),t.fullscreenable=g.default.has("ui.setFullScreen"),t}return t=o,(e=[{key:"componentDidMount",value:function(){var e=this;this.conferenceChangeHandler=(0,y.onConferenceChange)(this.props.cgid,(function(t){e.handleConferenceChangeTimer&&clearTimeout(e.handleConferenceChangeTimer),e.conferenceRoom=t.room,e.handleConferenceChangeTimer=setTimeout((function(){e.unmounted||(e.handleConferenceChangeTimer=null,e._handleConferenceChange(e.conferenceRoom))}),500)})),this.chatActiveHandler=(0,b.onActiveChat)((function(t){e.state.fullscreen&&t!==e.props.cgid&&e.setState({fullscreen:!1,expand:!1},e._handleStateChange.bind(e,!0,!1))})),this._handleStateChange(!1,!0),g.default.call("ui.onLeaveFullscreen",this._handleWindowLeaveFullscreen)}},{key:"componentWillUnmount",value:function(){g.default.call("ui.offLeaveFullscreen",this._handleWindowLeaveFullscreen),d.default.off(this.conferenceChangeHandler,this.chatActiveHandler),this.handleConferenceChangeTimer&&clearTimeout(this.handleConferenceChangeTimer),j(!1,!1,!0),this.unmounted=!0}},{key:"_updateVideoStream",value:function(){var e,t;this.videoRef&&(e=(t=this.state).videoStream,(t=t.screencastStream)?this.videoRef.srcObject!==t&&(this.videoRef.srcObject=t):e&&this.videoRef.srcObject!==e&&(this.videoRef.srcObject=e))}},{key:"_handleStateChange",value:function(e,t){var n=(a=this.state).expand,r=a.fullscreen,o=a.videoStream,a=a.screencastStream;j(n,r,e),t&&(o||a)&&this._updateVideoStream()}},{key:"render",value:function(){var e=this,t=((n=this.props).cgid,n.className),n=(n.children,function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(n,v)),r=(d=this.state).videoStream,o=d.screencastStream,a=d.fullscreen,i=d.expand,u=d.hasVideoOrScreencast,d=d.isScreencastPublished;return u?(u=null,u=d?l.default.createElement("div",{className:"fluid-v center-content column"},l.default.createElement(s.default,{name:":satellite:"}),l.default.createElement("div",{className:"lead animate-flash-light"},p.default.string("conference.screenSharing"))):o||r?l.default.createElement("video",{className:"conference-video-element",autoPlay:!0,muted:!0,ref:function(t){e.videoRef=t}}):l.default.createElement("div",{className:"fluid-v center-content"},p.default.string("common.loading")),l.default.createElement("div",S({className:(0,f.classes)("conference-video relative",t,{"user-app-dragable":i||a})},n),u,!d&&l.default.createElement("div",{className:"conference-video-bars"},this.fullscreenable?l.default.createElement(c.default,{icon:a?"fullscreen-exit":"fullscreen",className:"dark rounded hint--bottom-right",click:this.handleFullscreenButtonClick,"data-hint":p.default.string(a?"common.exitFullscreen":"common.enterFullscreen")}):l.default.createElement(c.default,{icon:i?"arrow-collapse":"arrow-expand",className:"dark rounded hint--bottom-right",click:this.handleExpandButtonClick,"data-hint":p.default.string(i?"common.restore":"common.expand")})))):null}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),o}(l.Component),k(t.default=n,"propTypes",{cgid:u.default.string.isRequired,className:u.default.string,children:u.default.any}),k(n,"defaultProps",{className:null,children:null})},36443:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=d(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=f(n(45697)),i=f(n(40328)),l=n(14227),u=n(57485),s=f(n(62031)),c=["conference","member","children"];function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=m(e);if(n=t?(n=m(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==o)return o;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(a);function a(){var e=this,t=a;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"render",value:function(){var e,t=(a=this.props).conference,n=a.member,r=a.children,a=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(a,c),f=null,d=(0,u.getMemberStatusInConference)(t,n);return d&&(e=(0,l.getConferenceIcon)(t,d),f=o.default.createElement("span",{"data-hint":(0,l.getConferenceStatusText)(t,d),className:"hint--left text-".concat((0,l.getConferenceColor)(t,d))},o.default.createElement(i.default,{name:e.startsWith("sprite-")?"".concat(e," icon-sm"):e}))),o.default.createElement(s.default,p({"data-id":n.id,showStatusDot:!1,avatarSize:20,onContextMenu:this.handleItemContextMenu,onClick:this.handleMemberItemClick,key:n.account,memberID:n.id},a),f&&o.default.createElement("div",{className:"icons flex-none single row flex-middle"},f),r)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component),y(t.default=n,"propTypes",{conference:a.default.object.isRequired,member:a.default.object.isRequired,children:a.default.any}),y(n,"defaultProps",{children:null})},17916:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=h(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=p(n(45697)),i=n(64393),l=p(n(61862)),u=p(n(79216)),s=p(n(98805)),c=p(n(12011)),f=p(n(31066)),d=["hidden","className","objectType","filterType","match"];function p(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=g(e);if(n=t?(n=g(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==o)return o;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(a);function a(){var e=this,t=a;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"render",value:function(){var e=(a=this.props).hidden,t=a.className,n=a.objectType,r=a.filterType,a=(a.match,function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(a,d));return o.default.createElement("div",m({className:(0,i.classes)("dock app-contacts",t,{hidden:e})},a),o.default.createElement("header",{className:"app-page-header heading dock dock-top user-app-dragable"},o.default.createElement("div",{className:"title"},l.default.string("contacts"))),o.default.createElement("div",{className:"app-contacts-side dock dock-left"},o.default.createElement("nav",{className:"dock dock-top nav nav-pills nav-sm justified shadow-1"},["members","groups"].map((function(e){return o.default.createElement("a",{key:e,href:"#/contacts/".concat(e),className:(0,i.classes)({active:e===n})},l.default.string("contacts.nav.".concat(e)))}))),"members"===n?o.default.createElement(u.default,{activeGroupID:r,className:"dock overflow-y-auto scrollbar-hover"}):o.default.createElement(c.default,{className:"dock overflow-y-auto scrollbar-hover",filterType:r})),o.default.createElement("div",{className:"app-contacts-main dock dock-right"},"members"===n?o.default.createElement(s.default,{deptID:r}):o.default.createElement(f.default,{filterType:r})))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.PureComponent),b(t.default=n,"propTypes",{hidden:a.default.bool,className:a.default.string,objectType:a.default.string.isRequired,filterType:a.default.string.isRequired,match:a.default.object.isRequired}),b(n,"defaultProps",{hidden:!1,className:null})},98805:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=C(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=_(n(45697)),i=n(64393),l=n(16986),u=_(n(61862)),s=n(40910),c=_(n(63318)),f=_(n(40328)),d=n(98649),p=_(n(67940)),h=_(n(45508)),m=_(n(26774)),y=_(n(84431)),g=_(n(74101)),b=_(n(54256)),v=_(n(93956)),w=_(n(91705)),O=n(15973),S=["className","deptID","recPerPage","defaultPage"];function _(e){return e&&e.__esModule?e:{default:e}}function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function P(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function k(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){P(a,r,o,i,l,"next",e)}function l(e){P(a,r,o,i,l,"throw",e)}i(void 0)}))}}function j(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=I(e);if(n=t?(n=I(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return T(o)}}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x(t,e);var n,r=M(a);function a(e){var t;if(this instanceof a)return D(T(t=r.call(this,e)),"handleRoutePathChange",(function(e){e.startsWith("#/contacts")||t.clearSearchValue()})),D(T(t),"handleItemContextMenu",(function(e){var t=e.currentTarget.getAttribute("data-gid");t?(0,d.showContextMenu)("chat.menu",{event:e,chat:t,menuType:"groups"}):(0,d.showContextMenu)("member",{event:e,member:e.currentTarget.getAttribute("data-member")})})),D(T(t),"handlePageChange",(function(e){""!==t.state.searchValue?t.setState({pageID:e},t.searchMembers):t.loadDeptMembers({pageID:e})})),D(T(t),"handleSearchChange",(function(e){t.setState({searchValue:e,pageID:1,recTotal:0},(function(){t.searchMembers()}))})),D(T(t),"clearSearchValue",(function(){""!==t.state.searchValue&&t.searchControl.handleOnClearBtnClick()})),t.state={pageID:e.defaultPage,recTotal:0,membersIDList:[],searchValue:"",searchResult:[]},t;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"componentDidMount",value:function(){this.loadDeptMembers(),this.routePathChangeEventID=(0,s.onRoutePathChange)(this.handleRoutePathChange),PERF_MARK("switchToContactsMembersEnd","switchToContactsMembersBegin","switchToContactsMembersTime")}},{key:"componentDidUpdate",value:function(e){var t=this.state.searchValue,n=this.props.deptID;e.deptID!==n&&(""===t?this.loadDeptMembers({pageID:1}):this.searchMembers())}},{key:"componentWillUnmount",value:function(){this.membersChangeHandler&&y.default.unsubscribe(this.membersChangeHandler),this.deptsChangeHandler&&m.default.unsubscribe(this.deptsChangeHandler),(0,s.offRoutePathChange)(this.routePathChangeEventID),this._unmounted=!0}},{key:"loadDeptMembers",value:function(e){var t=this,n=(this.membersChangeHandler&&(y.default.unsubscribe(this.membersChangeHandler),this.membersChangeHandler=null),this.deptsChangeHandler&&(m.default.unsubscribe(this.deptsChangeHandler),this.deptsChangeHandler=null),this.props.deptID);this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({membersIDList:[],loading:!0},e),k((function*(){var e=t.props.recPerPage,r={loading:!1};(e=yield m.default.fetchMembersListOfDept("root"===n?0:n,{pageID:t.state.pageID||1,recPerPage:e}))?(r.pageID=e.pager.pageID,r.recPerPage=e.pager.recPerPage,r.recTotal=e.pager.recTotal,r.membersIDList=e.data):r.membersIDList=[],t._unmounted||(t.setState(r,(function(){t.state.membersIDList.length&&(t.membersChangeHandler=y.default.subscribe(t.state.membersIDList,t.forceUpdate.bind(t,null)))})),t.deptsChangeHandler=m.default.subscribeDeptChange(n,t.forceUpdate.bind(t,null)))})))}},{key:"searchMembers",value:(n=k((function*(){var e,t,n,r=this,o=(n=this.state).searchValue,a=n.pageID,i=n.recTotal,l=(n=this.props).deptID,u=n.recPerPage;""===o?this.setState({searchResult:[]},(function(){r.loadDeptMembers({pageID:1})})):this.setState({loading:!0},k((function*(){try{var n=yield y.default.searchFromRemote(o,{dept:"root"===l?0:l,pager:{pageID:a,recPerPage:u,recTotal:i}});e=n.list,t=n.pager,e=e.map((function(e){return e.id}))}catch(n){e=[],console.error("Search members from server error",n)}r._unmounted||r.setState({searchResult:e,loading:!1,recTotal:t.recTotal||e.length,pageID:t.pageID||1})})))})),function(){return n.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=(a=this.props).className,n=a.deptID,r=a.recPerPage,a=(a.defaultPage,function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(a,S)),s=(k=this.state).pageID,d=k.membersIDList,_=k.loading,C=k.recTotal,P=k.searchValue,k=k.searchResult,j=null;return _||0===(j=(""===P?d:k).map((function(t){var n=y.default.getMemberOrTemp(t),r=(0,O.isCurrentUser)(t)?null:g.default.getContactChat(t),a=null,i=r?(r.mute&&(a=o.default.createElement(f.default,{name:"bell-off",className:"icon-sm muted"})),o.default.createElement(h.default,{showStar:!0,size:30,gid:r.gid})):o.default.createElement(p.default,{size:30,memberID:n.id}),u=n.displayName;return o.default.createElement(c.default,{"data-gid":r&&r.gid,"data-member":r?null:t,onContextMenu:e.handleItemContextMenu,key:n.id,className:"rounded flex-middle",avatar:i,title:(0,l.isEmptyString)(u)?o.default.createElement("span",{className:"inline-block loading-holder relative loading-holder-line"},u):u,subtitle:m.default.getRoleName(n.role),href:"xxc://showContextMenu/member.profile/".concat(n.id),actions:a})}))).length&&j.push(o.default.createElement(c.default,{key:"notFound",icon:"information-outline",className:"flex-middle item muted disabled",title:o.default.createElement("span",{className:"title small"},u.default.string("common.notFoundOptions"))})),o.default.createElement("div",E({className:(0,i.classes)("dock app-contacts-view",t)},a),o.default.createElement("header",{className:"heading dock dock-top"},o.default.createElement("div",{className:"title"},n&&"root"!==n?m.default.getDeptName(n):u.default.string("contacts.members.all"),_?o.default.createElement(w.default,{key:"spinner",style:{display:"inline-block"},iconSize:18}):null),o.default.createElement(v.default,{placeholder:u.default.string("chats.search.recents"),onSearchChange:this.handleSearchChange,ref:function(t){e.searchControl=t},style:{width:170},changeDelay:500}),o.default.createElement(b.default,{page:s,recPerPage:r,recTotal:C,showFirstLast:!0,onPageChange:this.handlePageChange})),o.default.createElement("div",{className:"content dock dock-bottom overflow-y-auto scrollbar-hover"},o.default.createElement("div",{className:"app-member-list list compact"},j)))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.PureComponent),D(t.default=n,"propTypes",{className:a.default.string,deptID:a.default.string.isRequired,recPerPage:a.default.number,defaultPage:a.default.number}),D(n,"defaultProps",{className:null,recPerPage:50,defaultPage:1})},79216:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=m(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=h(n(45697)),i=n(64393),l=h(n(61862)),u=h(n(64208)),s=h(n(40328)),c=h(n(26774)),f=n(15973),d=h(n(91705)),p=["className","activeGroupID","showCompany"];function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function g(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=O(e);if(n=t?(n=O(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return w(o)}}(a);function a(e){var t;if(this instanceof a)return S(w(t=n.call(this,e)),"itemConverter",(function(e){return e.title?e:{title:e.name,type:"group",id:e.id,list:e.children}})),S(w(t),"headingCreator",(function(e,n){if(e.root&&!e.title)return null;var r=t.props.activeGroupID,a=n.isExpand?"chevron-down":"chevron-right";return o.default.createElement("a",{href:"#/contacts/members/".concat(e.id),className:(0,i.classes)("heading",{active:"".concat(e.id)===r})},o.default.createElement(s.default,{onClick:n.handleHeadingClick,name:a,className:(0,i.classes)("state",{invisible:!e.list||!e.list.length})}),o.default.createElement("div",{className:"title"},e.title))})),S(w(t),"getDefaultExpand",(function(e){if(e.root)return!0;var n=t.props.activeGroupID;return!(!n||"root"===n)&&(n=(n=c.default.getDept(n))&&n.parentsSet)&&n.has(e.id)})),t.state={loading:!0,deptsTree:null},t;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"componentDidMount",value:function(){var e=c.default.getDeptsTree();e?this.setState({deptsTree:e,loading:!1},this.subscribeDeptsChange.bind(this)):this.subscribeDeptsChange()}},{key:"componentWillUnmount",value:function(){c.default.unsubscribe(this.handleDeptsChange)}},{key:"subscribeDeptsChange",value:function(){var e=this;this.handleDeptsChange=c.default.subscribeDeptsChange((function(){e.setState({deptsTree:c.default.getDeptsTree(),loading:!1})}))}},{key:"render",value:function(){var e=(r=this.props).className,t=r.activeGroupID,n=r.showCompany,r=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(r,p),a=this.state,s=a.deptsTree;return a.loading?o.default.createElement(d.default,null):(a={list:s||[],root:!0},n&&(s=(0,f.getCurrentUser)(),a.list=[{title:s&&s.company||l.default.string("contacts.members.all"),id:"root",href:"#/contacts/members/root",className:"root"===t?"active":""}].concat(g(a.list))),o.default.createElement(u.default,y({className:"compact",rootClassName:(0,i.classes)("app-depts-tree",e),group:a,hideEmptyGroup:!1,itemConverter:this.itemConverter,headingCreator:this.headingCreator,defaultExpand:this.getDefaultExpand,toggleWithHeading:!1},r)))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.PureComponent),S(t.default=n,"propTypes",{className:a.default.string,activeGroupID:a.default.string,showCompany:a.default.bool}),S(n,"defaultProps",{className:null,activeGroupID:null,showCompany:!0})},36141:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(17916)),o=u(n(98805)),a=u(n(79216)),i=u(n(66052)),l=u(n(12011));function u(e){return e&&e.__esModule?e:{default:e}}n=u(n(31066)),r={ContactsHome:r.default,ContactsView:o.default,DeptsTree:a.default,ContactsIndex:i.default,GroupsMenu:l.default,GroupsView:n.default},t.default=r},12011:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=c(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=s(n(45697)),i=n(64393),l=s(n(61862)),u=["className","filterType"];function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=p(e);if(n=t?(n=p(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==o)return o;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(a);function a(){var e=this,t=a;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"render",value:function(){var e=(n=this.props).className,t=n.filterType,n=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(n,u);return o.default.createElement("div",f({className:(0,i.classes)("app-groups-menu list compact",e)},n),["joined","created","public"].map((function(e){return o.default.createElement("a",{className:(0,i.classes)("item",{active:e===t}),key:e,href:"#/contacts/groups/".concat(e)},o.default.createElement("span",{className:"title"},l.default.string("contacts.groups.".concat(e))))})))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.PureComponent),h(t.default=n,"propTypes",{className:a.default.string,filterType:a.default.string}),h(n,"defaultProps",{className:null,filterType:null})},31066:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=w(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=v(n(45697)),i=v(n(23848)),l=n(64393),u=v(n(61862)),s=v(n(63318)),c=v(n(45508)),f=n(45498),d=v(n(25852)),p=v(n(18033)),h=v(n(40328)),m=n(98649),y=v(n(74160)),g=v(n(74101)),b=["className","filterType","startPageSize","morePageSize","defaultPage"];function v(e){return e&&e.__esModule?e:{default:e}}function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){C(a,r,o,i,l,"next",e)}function l(e){C(a,r,o,i,l,"throw",e)}i(void 0)}))}}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=j(e);if(n=t?(n=j(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return k(o)}}(a);function a(e){var t;if(this instanceof a)return x(k(t=n.call(this,e)),"handleRequestMorePage",(function(){t.setState((function(e){return{page:e.page+1}}))})),x(k(t),"handleItemContextMenu",(function(e){(0,m.showContextMenu)("chat.menu",{event:e,chat:e.currentTarget.getAttribute("data-gid"),menuType:"groups"})})),x(k(t),"handleRefreshBtnClick",(function(){t.tryLoadPublicChats(!0)})),t.state={publicGroups:[],loading:!1,page:e.defaultPage},t;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.tryLoadPublicChats(),this.dataChangeHandler=g.default.subscribeAny((function(){e.forceUpdate()})),PERF_MARK("switchToContactsGroupsEnd","switchToContactsGroupsBegin","contactsGroupsViewRenderTime")}},{key:"componentDidUpdate",value:function(){this.tryLoadPublicChats()}},{key:"componentWillUnmount",value:function(){g.default.unsubscribe(this.dataChangeHandler),this._isMounted=!1}},{key:"tryLoadPublicChats",value:function(){var e=this,t=this.props.filterType;!this.state.loading&&"public"===t&&(0<arguments.length&&void 0!==arguments[0]&&arguments[0]||t!==this.lastFilterType)&&(this.lastFilterType=t,this.setState({loading:!0},E((function*(){var t=(n=S(yield(0,i.default)(g.default.fetchPublicChats()),2))[0],n=n[1];if(e._isMounted)return t?(e.setState({loading:!1}),d.default.show(u.default.error(t),{type:"danger"})):void e.setState({loading:!1,publicGroups:n})}))))}},{key:"render",value:function(){var e=(a=this.props).className,t=a.filterType,n=a.startPageSize,r=a.morePageSize,a=(a.defaultPage,function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(a,b)),i=(d=this.state).publicGroups,d=d.loading,m=null,y=null;if("joined"===t?y=(0,f.getGroupsChats)("default"):"created"===t?y=(0,f.getGroupsChats)("default",!1,!0):"public"===t&&(y=i),y&&y.length){for(var g=(i=this.state.page)?Math.min(y.length,n+(1<i?(i-1)*r:0)):y.length,v=(m=[],0);v<g;v+=1){var w=y[v],S=null;"public"!==t&&(w.mute?S=o.default.createElement(h.default,{name:"bell-off",className:"icon-sm muted"}):w.star&&(S=o.default.createElement("div",{className:"is-star relative"}))),m.push(o.default.createElement(s.default,{key:w.gid,"data-gid":w.gid,onContextMenu:this.handleItemContextMenu,className:"rounded flex-middle",avatar:o.default.createElement(c.default,{showStar:!0,isPublic:"public"===t,avatarSize:30,gid:w.gid,chat:w}),title:o.default.createElement("div",{className:"title","data-hint":w.name},o.default.createElement("div",{className:"text-ellipsis"},w.name)),href:("public"===t?"xxc://confirmJoinPublicChat/":"#/chats/recents/").concat(w.gid),actions:S}))}(n=y.length-g)&&m.push(o.default.createElement(s.default,{key:"showMore",icon:"chevron-double-down",className:"flex-middle muted",title:o.default.createElement("span",{className:"title small"},u.default.format("common.clickShowMoreFormat",n)),onClick:this.handleRequestMorePage,style:{border:"none"}}))}else m=[o.default.createElement(s.default,{key:"notFound",icon:"information-outline",className:"flex-middle item muted disabled",title:o.default.createElement("span",{className:"title small"},u.default.string("common.notFoundOptions"))})];return o.default.createElement("div",O({className:(0,l.classes)("dock app-groups-view",e)},a),o.default.createElement("header",{className:"heading dock dock-top"},o.default.createElement("div",{className:"title"},u.default.string("contacts.groups.".concat(t))," ","public"===t&&(d?o.default.createElement(h.default,{name:"loading spin"}):o.default.createElement(p.default,{className:"text-primary rounded",label:u.default.string("common.refresh"),onClick:this.handleRefreshBtnClick})))),o.default.createElement("div",{className:"content dock dock-bottom overflow-y-auto scrollbar-hover"},o.default.createElement("div",{className:"app-groups-list list compact"},m)))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component),x(t.default=n,"propTypes",{className:a.default.string,filterType:a.default.string.isRequired,startPageSize:a.default.number,morePageSize:a.default.number,defaultPage:a.default.number}),x(n,"defaultProps",{className:null,startPageSize:y.default.ui["page.start.size"]||20,morePageSize:y.default.ui["page.more.size"]||20,defaultPage:1})},66052:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=f(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=c(n(45697)),i=n(39711),l=c(n(85110)),u=c(n(17916)),s=n(15973);function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=y(e);if(n=t?(n=y(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return m(o)}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e);var n=h(r);function r(){var e,t=this,a=r;if(!(t instanceof a))throw new TypeError("Cannot call a class as a function");for(var i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return g(m(e=n.call.apply(n,[this].concat(l))),"renderFromRoute",(function(t){var n=(t=t.match)&&t.params&&t.params.objectType||e._objectType||"members";return null==(t=t&&t.params&&t.params.filterType)&&(t=e._filterTypes&&void 0!==e._filterTypes[n]?e._filterTypes[n]:"members"===n?"root":"joined"),e._objectType=n,e._filterTypes||(e._filterTypes={}),e._filterTypes[n]=t,o.default.createElement(u.default,d({objectType:n,filterType:t},e.props))})),e}return t=r,(e=[{key:"componentDidMount",value:function(){PERF_MARK("contactsViewRendered","switchToContactsBegin","contactsViewLoadTime")}},{key:"render",value:function(){return(0,s.isUserVerified)()?o.default.createElement(i.Route,{path:l.default.contacts.__},this.renderFromRoute):null}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component),g(t.default=n,"propTypes",{match:a.default.object.isRequired})},34916:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(45780)),o=c(n(80097)),a=c(n(73506)),i=c(n(34236)),l=c(n(6196)),u=c(n(45714)),s=c(n(36141));function c(e){return e&&e.__esModule?e:{default:e}}o={chats:o.default,common:a.default,exts:r.default,index:i.default,login:l.default,main:u.default,contacts:s.default},a=n.g.externalViews=o,t.default=a},72573:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var r=s(n(67294)),o=(t=s(n(45697)),n(64393)),a=n(94592),i=n(90534),l=s(n(40328)),u=["url","click","icon","title","label"];function s(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e){var t=(0,a.getFileData)(e.file),n=e.className,s=e.canPreview,d=e.onRequestPreview,p=e.canViewMessageContext;return e=e.canViewMessage,(t=(0,i.getFileMenuItems)(t,{canPreview:s,onRequestPreview:d,canViewMessageContext:p,canViewMessage:e})).length?r.default.createElement("div",{className:(0,o.classes)("app-file-actions",n)},t.map((function(e){if(!e||"object"!==f(e)||"divider"===(null==e?void 0:e.type))return null;var t=e.url,n=e.click,o=e.icon,a=e.title,i=e.label;return e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,u),t?e.href=t:n&&(e.onClick=n),r.default.createElement("a",c({},e,{title:null!=i?i:a}),r.default.createElement(l.default,{name:o}))}))):null}d.propTypes={file:t.default.oneOfType([t.default.string,t.default.object]).isRequired,canPreview:t.default.oneOfType([t.default.func,t.default.bool]),onRequestPreview:t.default.oneOfType([t.default.bool,t.default.func]),canViewMessageContext:t.default.bool,canViewMessage:t.default.bool,className:t.default.string},d.defaultProps={canPreview:!0,onRequestPreview:null,canViewMessageContext:!1,canViewMessage:!1,className:null}},80992:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;var r=s(n(67294)),o=(t=s(n(45697)),n(64393)),a=n(94592),i=s(n(7807)),l=s(n(83532)),u=["file","className","size"];function s(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(e){var t=e.file,n=e.className,s=void 0===(s=e.size)?20:s,f=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,u),t=(0,a.getFileData)(t),(0,l.default)(t.name));return f.startsWith("sprite-")&&20<s&&(f+="-large"),r.default.createElement(i.default,c({skin:{code:t.extName,pale:!0},size:s||20,progress:t.networking.progress,className:(0,o.classes)("flex-none shadow",s<=20?"rounded":"rounded-lg",n),icon:f},e))}f.propTypes={file:t.default.oneOfType([t.default.string,t.default.object]).isRequired,size:t.default.number,className:t.default.string},f.defaultProps={size:20,className:null}},81015:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var r=f(n(67294)),o=(t=f(n(45697)),n(64393)),a=n(16986),i=n(94592),l=n(90534),u=n(61862),s=f(n(40328)),c=f(n(20155));function f(e){return e&&e.__esModule?e:{default:e}}function d(e){var t=(0,i.getFileData)(e.file),n=e.infos;return!0===n?n=["size","progress","error"]:!1===n?n=[]:"string"==typeof n&&(n=n.split(",")),e.showSender&&!n.includes("sender")&&n.push("sender"),e.showDate&&!n.includes("date")&&n.push("date"),r.default.createElement("ul",{className:(0,o.classes)("app-file-infos",e.className)},n.map((function(e){var n=function(e,t){switch(t){case"size":var n=(0,a.formatBytes)(e.size);return e.networking.isInProgress?r.default.createElement("span",null,r.default.createElement("span",{className:"text-primary"},(0,a.formatBytes)(Math.min(e.size,e.networking.loaded))),"/",n):n;case"progress":return e.networking.isInProgress?"".concat(Math.floor(e.networking.progress),"%"):null;case"error":return(n=(0,l.getFileNetworkErrorMessage)(e))?n.length<6?n:r.default.createElement(s.default,{name:"alert","data-hint":n,className:"text-danger"}):null;case"sender":return r.default.createElement(c.default,{className:"btn btn-xs text-primary rounded",href:"@#".concat(e.senderId),type:"a",memberID:e.senderId});case"date":return(0,u.getShortTextOfDate)(e.time);default:return null}}(t,e);return n?r.default.createElement("li",{key:e,className:"app-file-info","data-info":e},n):null})))}d.propTypes={file:t.default.oneOfType([t.default.string,t.default.object]).isRequired,infos:t.default.oneOfType([t.default.string,t.default.array,t.default.bool]),showDate:t.default.bool,showSender:t.default.bool,className:t.default.string},d.defaultProps={infos:!0,showDate:!1,showSender:!1,className:null}},1528:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=m;var r=f(n(67294)),o=(t=f(n(45697)),n(64393)),a=f(n(81015)),i=f(n(80992)),l=f(n(72573)),u=n(94592),s=f(n(60357)),c=["className","file","showIcon","iconSize","showDate","showSender","multiLines","divider","compact","actions","infos","onRequestPreview","canPreview","canViewMessageContext","canViewMessage"];function f(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e){var t=e.className,n=e.file,f=e.showIcon,h=e.iconSize,m=e.showDate,y=e.showSender,g=e.multiLines,b=e.divider,v=e.compact,w=e.actions,O=e.infos,S=e.onRequestPreview,_=e.canPreview,C=e.canViewMessageContext,E=e.canViewMessage,P=(e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,c),(0,u.getFileData)(n)),k=p((0,s.default)(),1)[0];return r.default.createElement("div",d({className:(0,o.classes)("app-file-list-item item flex-middle single",t,{compact:v,divider:b,"multi-lines":g,"has-cache-file":!!P.cachePath,editable:n.editable})},e),f?r.default.createElement(i.default,{className:"flex-none",file:P,size:null!=h?h:v?20:30}):null,r.default.createElement("div",{className:"content"},n.editable&&r.default.createElement("div",{className:(0,o.classes)("label circle accent",{"label-sm":!v,"label-xs":v})},k.string("file.collabora.abbr")),r.default.createElement("div",{className:"title text-ellipsis",title:P.name},P.name),r.default.createElement(a.default,{file:P,infos:O,showDate:m,showSender:y})),w?r.default.createElement(l.default,{className:"flex-none",file:P,canPreview:_,onRequestPreview:S,canViewMessageContext:C,canViewMessage:E}):null)}m.propTypes={file:t.default.oneOfType([t.default.object,t.default.string]).isRequired,showIcon:t.default.bool,iconSize:t.default.number,showDate:t.default.bool,showSender:t.default.bool,multiLines:t.default.bool,divider:t.default.bool,compact:t.default.bool,actions:t.default.bool,infos:t.default.oneOfType([t.default.array,t.default.string,t.default.bool]),onRequestPreview:t.default.func,canPreview:t.default.oneOfType([t.default.func,t.default.bool]),canViewMessageContext:t.default.bool,canViewMessage:t.default.bool,className:t.default.string},m.defaultProps={showIcon:!0,iconSize:null,showDate:!1,showSender:!1,multiLines:!1,divider:!1,compact:!1,actions:!0,infos:"size,progress,error",onRequestPreview:null,canPreview:!0,canViewMessageContext:!1,canViewMessage:!1,className:null}},60645:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var r=c(n(67294)),o=(t=c(n(45697)),c(n(61862))),a=c(n(40328)),i=n(64393),l=c(n(1528)),u=c(n(77632)),s=(n=c(n(74160)),["className","files","itemProps","itemRender","startPageSize","morePageSize","showIcon","iconSize","showDate","showSender","multiLines","divider","compact","actions","infos","onRequestPreview","canPreview","canViewMessageContext","canViewMessage","onClickItem"]);function c(e){return e&&e.__esModule?e:{default:e}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e){return e=e.totalCount-e.loadedCount,r.default.createElement("div",{className:"row single flex-middle flex-center has-padding muted state"},r.default.createElement(a.default,{name:"chevron-double-down"}),r.default.createElement("span",{className:"title small"},o.default.format("common.clickShowMoreFormat",e)))}function p(e){var t=e.className,n=e.files,o=e.itemProps,a=e.itemRender,c=e.startPageSize,p=e.morePageSize,h=e.showIcon,m=e.iconSize,y=e.showDate,g=e.showSender,b=e.multiLines,v=e.divider,w=e.compact,O=e.actions,S=e.infos,_=e.onRequestPreview,C=e.canPreview,E=e.canViewMessageContext,P=e.canViewMessage,k=e.onClickItem;return e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,s),r.default.createElement(u.default,f({className:(0,i.classes)("app-file-list",t),count:n.length,startPageSize:c,morePageSize:p,loadMoreText:d},e),(function(e,t){var i=n[e];if(a)return a(i,e,t);if(!i)return null;var u={key:null!=(u=i.messageID)?u:i.gid,file:i,showIcon:h,iconSize:m,showDate:y,showSender:g,multiLines:b,divider:v,compact:w,actions:O,infos:S,onRequestPreview:_,canPreview:C,canViewMessageContext:E,canViewMessage:P,"data-file":i.gid,onClick:k?k.bind(null,i):null};return"function"==typeof o?u=o(i,u,e,t):o&&(u=Object.assign(u,o)),r.default.createElement(l.default,u)}))}p.propTypes={files:t.default.array.isRequired,itemProps:t.default.oneOfType([t.default.object,t.default.func]),itemRender:t.default.func,startPageSize:t.default.number,morePageSize:t.default.number,showIcon:t.default.bool,iconSize:t.default.number,showDate:t.default.bool,showSender:t.default.bool,multiLines:t.default.bool,divider:t.default.bool,compact:t.default.bool,actions:t.default.bool,infos:t.default.oneOfType([t.default.array,t.default.string,t.default.bool]),onRequestPreview:t.default.func,canPreview:t.default.oneOfType([t.default.func,t.default.bool]),canViewMessageContext:t.default.bool,canViewMessage:t.default.bool,onClickItem:t.default.func,className:t.default.string},p.defaultProps={itemProps:null,itemRender:null,startPageSize:n.default.ui["page.start.size"]||20,morePageSize:n.default.ui["page.more.size"]||20,showIcon:!0,iconSize:null,showDate:!1,showSender:!1,multiLines:!1,divider:!1,compact:!1,actions:!0,infos:!0,onRequestPreview:null,canPreview:!0,canViewMessageContext:!1,canViewMessage:!1,onClickItem:null,className:null}},73543:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.P2pCheckbox=h;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=f(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=(t=c(n(45697)),n(64393)),i=n(15142),l=c(n(61862)),u=n(15973),s=c(n(40328));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e){function t(){f?(0,u.getUserConfig)().set("ui.chat.sendBigFileOnline",!r):(0,i.setLocalConfig)("sendCurrentFilesByP2p",!r),c(!r)}var n=d((0,o.useState)(!1),2),r=n[0],c=n[1],f=e.isSizeLimit;return e.canUseP2p?f?o.default.createElement("div",{className:(0,a.classes)("checkbox checkbox-sm checkbox-p2p",{checked:r}),onClick:t},o.default.createElement("label",null),o.default.createElement("span",null,l.default.string("file.upload.p2p.always"))):o.default.createElement("div",{className:(0,a.classes)("checkbox checkbox-sm checkbox-p2p",{checked:r}),onClick:t},o.default.createElement("label",null),o.default.createElement("span",null,l.default.string("file.upload.p2p.label")),o.default.createElement("span",{"data-p2p-hint":l.default.string("file.upload.p2p.hint")},o.default.createElement(s.default,{name:"mdi-information"}))):o.default.createElement("div",{style:{color:"#A3A2BC",fontSize:12,padding:"0.5rem 0.5rem 0 0.5rem"}},l.default.string("chat.sendbox.toolbar.file.online.unusable"))}h.propTypes={isSizeLimit:t.default.bool,canUseP2p:t.default.bool},h.defaultProps={isSizeLimit:!1,canUseP2p:!0}},94822:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)(o.default.getChatFiles(e))),n=t[0],i=t[1];return(0,r.useEffect)((function(){return o.default.loadChatFiles(e),o.default.unsubscribe.bind(o.default,o.default.subscribeAny((function(t){t.some((function(t){return t.cgid===e}))&&i(o.default.getChatFiles(e))})))}),[e]),n};var r=n(67294),o=(t=n(94592))&&t.__esModule?t:{default:t};function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},17234:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(e=o.default.getMessageFile(e)).gid,n=(e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)([e])),e[0]),i=e[1];return(0,r.useEffect)((function(){return o.default.unsubscribe.bind(o.default,o.default.subscribe(t,(function(e){return i([e])})))}),[t]),n[0]};var r=n(67294),o=(t=n(94592))&&t.__esModule?t:{default:t};function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},38400:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)(o.default.getChatUploadingFiles(e))),n=t[0],i=t[1];return(0,r.useEffect)((function(){return i(o.default.getChatUploadingFiles(e)),o.default.unsubscribe.bind(o.default,o.default.subscribeAny((function(t){t.some((function(t){return t.cgid===e}))&&i(o.default.getChatUploadingFiles(e))})))}),[e]),n};var r=n(67294),o=(t=n(94592))&&t.__esModule?t:{default:t};function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},97833:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=p(n(67294)),a=f(n(65286)),i=p(n(61862)),l=f(n(68896)),u=f(n(14478)),s=f(n(53751)),c=f(n(73729));function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=d(t))&&t.has(e))return t.get(e);var n,o,a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]);return a.default=e,t&&t.set(e,a),a}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=(0,o.memo)((function(){var e=(0,s.default)(),t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return h(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,o.useState)(i.default.name)),n=t[0],r=t[1];return(0,o.useEffect)((function(){return a.default.off.bind(a.default,(0,i.onLangChange)((function(e){return r(e.name)})))}),[]),(0,o.useEffect)((function(){document.body.classList.toggle("app-login-showed",!e)}),[e]),t=(0,o.useMemo)((function(){return{lang:i.default,langName:n}}),[n]),o.default.createElement(c.default.Provider,{value:t},o.default.createElement("div",{id:"appView",className:"affix".concat(e?" hide-login":"")},o.default.createElement(l.default,{className:"dock-left",hidden:e}),o.default.createElement(u.default,{className:"dock"})))}))},34236:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(97833));function o(e){return e&&e.__esModule?e:{default:e}}n=o(n(13346)),r={AppView:r.default,Index:n.default},t.default=r},13346:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=c(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=n(39711),i=s(n(97833)),l=s(n(78341)),u=s(n(46783));function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}t.default=(0,o.memo)((function(){return o.default.createElement(a.HashRouter,null,o.default.createElement(i.default,null),o.default.createElement(l.default,{key:"windowControls"}),o.default.createElement(u.default,{key:"autoReconnectBar",className:"dock-top"}))}))},78341:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=u(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=l(n(62498)),i=l(n(94128));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}t.default=(0,o.memo)((function(){if(i.default.isType("browser"))return null;var e=i.default.call("ui.getWindowStateController");return o.default.createElement(a.default,{controller:e})}))},6196:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=u(n(989)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=l(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(39276)),i=u(n(76646));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function u(e){return e&&e.__esModule?e:{default:e}}n=u(n(68896)),o={Form:o.default,SwapUserDialog:a,Index:n.default,SwapUser:i.default},t.default=o},989:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=D(n(67294)),a=T(n(45697)),i=T(n(23848)),l=T(n(18033)),u=T(n(93055)),s=T(n(40328)),c=T(n(74160)),f=T(n(70389)),d=T(n(52133)),p=n(98649),h=T(n(65286)),m=D(n(61862)),y=n(15973),g=D(n(61629)),b=n(72749),v=n(13347),w=n(82587),O=n(43058),S=T(n(94128)),_=D(n(11803)),C=n(64393),E=n(16986),P=T(n(88666)),k=n(92371),j=n(89688),x=n(39276),M=["className"];function T(e){return e&&e.__esModule?e:{default:e}}function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}function D(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=I(t))&&t.has(e))return t.get(e);var n,o,a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]);return a.default=e,t&&t.set(e,a),a}function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function R(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){G(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function F(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function U(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){F(a,r,o,i,l,"next",e)}function l(e){F(a,r,o,i,l,"throw",e)}i(void 0)}))}}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=V(e);if(n=t?(n=V(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return H(o)}}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var q=S.default.modules.ui,$=!0,K=["HTTP_STATUS_401","HTTP_STATUS_402","HTTP_STATUS_403","HTTP_STATUS_405",_.Codes.INVALID_TOKEN,_.Codes.INVALID_URL];n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z(t,e);var n,r=W(a);function a(e){var t;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");G(H(t=r.call(this,e)),"handleRememberPasswordChanged",(function(e){var n=(r=t.state).ldap,r=r.autoLogin;t.setState({rememberMe:e,ldap:!e&&n,autoLogin:!!e&&r})})),G(H(t),"handleAutoLoginChanged",(function(e){var n=(r=t.state).ldap,r=r.rememberMe;t.setState({autoLogin:e,ldap:!e&&n,rememberMe:!!e||r})})),G(H(t),"handleLDAPChanged",function(){var e=U((function*(e){var n,r;!e||t.hasShowedLDAPConfirm?t.changeLDAP(e):(n=(r=B(yield(0,i.default)(d.default.confirm(m.default.string("login.ldap.confirm"),{actions:[{type:"cancel"},{type:"submit",label:m.default.string("common.continue")}],style:{maxWidth:500}})),2))[0],r=r[1],n?DEBUG&&console.error("Modal.confirm error",n):(r&&t.changeLDAP(e),t.hasShowedLDAPConfirm=!0))}));return function(t){return e.apply(this,arguments)}}()),G(H(t),"handleLoginBtnClick",(function(){t.setState({logging:!0,message:""},U((function*(){var e,n=t.state.serverUrl;c.default.ui["login.skipHTTPSecurityAlert"]||!n.toLowerCase().startsWith("http://")?t.login():(e=(n=B(yield(0,i.default)(d.default.confirm(o.default.createElement("div",null,o.default.createElement("h4",null,m.default.format("login.nonSecurity.confirm",n)),o.default.createElement("div",{className:"text-gray"},m.default.string("login.nonSecurity.detail"))),{actions:[{type:"cancel"},{type:"submit",label:m.default.string("login.nonSecurity.btn"),className:"danger-pale text-danger"}],style:{maxWidth:500},className:"app-login-nonSecurity-dialog"})),2))[0],n=n[1],e?DEBUG&&console.error("Modal.confirm error",e):n?t.login():t.setState({logging:!1,message:""}))})))})),G(H(t),"handleSwapUserBtnClick",(function(){var e=(r=t.state).serverUrl,n=r.account,r=r.showServerInput;n=e&&n?g.default.createIdentify(e,n):null,(0,x.showSwapUserDialog)(n,t._lockServer||!r?e:null,(function(e){e={serverUrl:g.default.simplifyServerUrl(e.serverUrl),account:e.account,password:e.authKey||e.password,message:""},t.setState(e)}))})),G(H(t),"handleServerUrlChange",(function(e){t.handleInputFieldChange("serverUrl",e)})),G(H(t),"handleAccountChange",(function(e){t.handleInputFieldChange("account",e)})),G(H(t),"handlePasswordChange",(function(e){t.handleInputFieldChange("password",e)})),G(H(t),"handleSettingBtnClick",(function(e){var n=(o=t.state).ldap,r=o.logging,o=o.showServerInput;(0,p.showContextMenu)("login.setting",{event:e,ldap:n,logging:r,showServerInput:t._lockServer||o,onLdapChange:t.handleLDAPChanged,onRequestShowServerInput:function(){t.setState({showServerInput:!0})},showAbout:function(){P.default.show()}})})),G(H(t),"handleDiagnoseNetworkBtnClick",(function(){var e=t.state.loginError;(0,j.showNetDiagnosticsDialog)((e&&e.getExtras?e.getExtras("user"):null)||t._loginUserData,e)})),G(H(t),"_getPasswordInputRef",(function(e){t._passwordInput=e})),PERF_MARK("loginFormCreateStart");var n=((e=N(N({server:"",account:"",password:"",ldap:!1,rememberMe:!0,autoLogin:!1,showServerInput:!1},c.default.ui.defaultUser),(0,C.getSearchParam)())).authKey||(e.password?e.authKey="".concat(g.AUTH_PASSWORD_FLAG).concat(e.password):e.token&&(e.authKey="".concat(g.AUTH_TOKEN_FLAG).concat(e.token))),t._lockServer=!(!e.server||!e.lock),{serverUrl:e.server,account:e.account,password:e.authKey,rememberMe:e.rememberMe,autoLogin:e.autoLogin,ldap:e.ldap,showServerInput:PERF,message:"",messageDetail:"",logging:!1}),l=(!(l=(0,y.getLastSavedUser)())||n.account&&n.account!==l.account||(t._lockServer||(n.serverUrl=l.serverUrl||l.server||""),n.account=l.account||"",n.password=e.password?e.authKey:l.rememberMe?l.authKey:"",n.rememberMe=l.rememberMe,n.autoLogin=l.autoLogin,n.ldap=l.ldap),n.serverUrl?n.serverUrl=g.default.simplifyServerUrl(n.serverUrl):n.showServerInput=!0,e=!1,q.isFirstMainWindow&&(e=!q.isFirstMainWindow()),n.ldap&&(n.rememberMe=!1,n.autoLogin=!1),(0,E.isNotEmptyString)(n.serverUrl)&&(0,E.isNotEmptyString)(n.account)&&(0,E.isNotEmptyString)(n.password));return t._isFirstShowLoginForm=$,t._autoLoginOnOpen=$&&!PERF&&!e&&l&&(n.autoLogin||(0,w.isAutoLoginNextTime)()),$=!1,t._autoLoginOnOpen&&(n.logging=!0),t.state=n,t}return t=a,(e=[{key:"componentDidMount",value:function(){var e=this;this._autoLoginOnOpen?(document.body.classList.add("app-auto-logging"),this.login().then((function(e){(0,y.emitUserAutoLoginEvent)(e?"success":"fail")})).finally((function(){document.body.classList.remove("app-auto-logging")}))):this._isFirstShowLoginForm&&(0,y.emitUserAutoLoginEvent)("skip"),this._userList=(0,b.getUserListFromStore)(),this.onLangChangeHandler=(0,m.onLangChange)((function(){e.forceUpdate()})),PERF_MARK("loginFormCreated","loginFormCreateStart","loginFormCreateTime")}},{key:"componentWillUnmount",value:function(){this._unmounted=!0,h.default.off(this.onLangChangeHandler)}},{key:"login",value:(n=U((function*(){var e,t=this,n=(this.showUpdateDialogTask&&(clearTimeout(this.showUpdateDialogTask),this.showUpdateDialogTask=null),u=this.state).account,r=u.password,o=u.serverUrl,a=u.rememberMe,l=u.ldap,u=u.autoLogin,s=(o=(o=o.trim()).endsWith("/")?o.slice(0,-1):o,null);try{o=o.startsWith("http://")||o.startsWith("https://")?2<(s=new URL(o)).pathname.split("/").length?"".concat(s.protocol,"//").concat(s.hostname):o:2<(s=new URL("http://".concat(o))).pathname.split("/").length?s.hostname:o,this._loginUserData={server:o,account:n,authKey:r,rememberMe:a,autoLogin:u,ldap:l},PERF_MARK("loginBegin");var c=B(yield(0,i.default)((0,v.login)(this._loginUserData)),1)[0];if(this._unmounted)return!1}catch(u){c="Failed to construct 'URL': Invalid URL"===u.message?new _.default(_.Codes.INVALID_URL):u.message}return c?(e=_.default.create(c),DEBUG&&(console.collapse("Login.error","redBg",e.message,"redPale"),console.error({error:e}),console.groupEnd()),s={message:m.default.error(e),logging:!1,loginError:e,showDiagnoseBtn:!K.find((function(t){return t===e.code}))},(o="HTTP_STATUS_401"===e.code||e.code===_.Codes.INVALID_TOKEN)&&(s.password=""),this.setState(s,o?function(){var e;null!=(e=t._passwordInput)&&e.focus()}:null),"CLIENT_REQUIRE_UPDATE"===e.code&&(0,k.showUpdateGuideDialog)(),PERF_MARK("loginEndWithError","loginBegin","loginTime"),!1):(this.setState({logging:!1,showServerInput:!1}),r=(n=(0,O.getUpdaterStatus)()).needUpdateOptional,a=n.skipped,r&&!a&&(this.showUpdateDialogTask=setTimeout(k.showUpdateGuideDialog,3e3)),PERF_MARK("loginEnd","loginBegin","loginTime"),!0)})),function(){return n.apply(this,arguments)})},{key:"handleInputFieldChange",value:function(e,t){var n,r=(n=this.state).account,o=n.password,a=n.serverUrl;(n={account:r,password:o,serverUrl:a,message:""})[e]=t,"account"===e&&(null!=o&&o.startsWith(g.AUTH_TOKEN_FLAG)||null==o||!o.length)&&(r=this._userList.find((function(e){return e.server===a&&e.account===t})),n.password=(null==r?void 0:r.authKey)||""),this.setState(n)}},{key:"changeLDAP",value:function(e){var t=(n=this.state).autoLogin,n=n.rememberMe;this.setState({ldap:e,rememberMe:!e&&n,autoLogin:!e&&t}),e&&this.handleInputFieldChange("password","")}},{key:"render",value:function(){var e=this,t=(n=this.props).className,n=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(n,M),r=(v=this.state).serverUrl,a=v.account,i=void 0===(i=v.password)?"":i,c=v.rememberMe,d=v.autoLogin,p=v.message,h=v.logging,y=v.loginError,b=v.showDiagnoseBtn,v=v.showServerInput,w=i.includes(g.AUTH_TOKEN_FLAG),O=(0,E.isNotEmptyString)(r)&&(0,E.isNotEmptyString)(a)&&(0,E.isNotEmptyString)(i),S=o.default.createElement("button",{"data-hint":m.default.string("login.swapUser"),onClick:this.handleSwapUserBtnClick,type:"button",className:"app-login-control-btn dock-right dock-top btn iconbutton rounded hint--bottom-right"},o.default.createElement(s.default,{name:"sprite-switch-account"})),_=o.default.createElement("button",{"data-hint":m.default.string("login.password.clear"),onClick:function(){return e.setState({password:""})},type:"button",className:"app-login-control-btn dock-right dock-top btn iconbutton rounded hint--bottom-right"},o.default.createElement(s.default,{name:"mdi-backspace-outline",className:"text-primary"}));return r=o.default.createElement(f.default,{value:r,autoFocus:!0,disabled:h,label:m.default.string("login.serverUrl.label"),placeholder:m.default.string("login.serverUrl.hint"),onChange:this.handleServerUrlChange,className:"relative app-login-server-control"},S),o.default.createElement("form",A({className:(0,C.classes)("app-login-form",t),onSubmit:function(e){return e.preventDefault()}},n),p&&o.default.createElement("div",{className:"app-login-message danger box"},p," ",y&&b?o.default.createElement("a",{className:"small label rounded darken-2 x-outline",onClick:this.handleDiagnoseNetworkBtnClick},m.default.string("diagnostics.diagnoseNetwork")," "):null),v?r:null,o.default.createElement(f.default,{autoFocus:!v,value:a,disabled:h,label:m.default.string("login.account.label"),placeholder:m.default.string("login.account.hint"),onChange:this.handleAccountChange,className:"relative app-login-control"},v?null:S),o.default.createElement(f.default,{value:w?i.slice(0,32):i,disabled:h,className:"space-lg relative app-login-control",inputType:"password",label:m.default.string("login.password.label"),onChange:this.handlePasswordChange,inputProps:w?{disabled:!0}:{},ref:this._getPasswordInputRef},w?_:null),o.default.createElement("button",{id:"loginBtn",type:"submit",disabled:!O||h,className:(0,C.classes)("btn block rounded space-xl btn",O?"primary bg-primary":"gray"),onClick:this.handleLoginBtnClick},m.default.string(h?"login.btn.logging":"login.btn.label")),o.default.createElement("div",{className:"row"},o.default.createElement(u.default,{disabled:h,checked:c,onChange:this.handleRememberPasswordChanged,className:"cell",label:m.default.string("login.rememberMe")}),o.default.createElement(u.default,{disabled:h,checked:d,onChange:this.handleAutoLoginChanged,className:"cell",label:m.default.string("login.autoLogin")}),o.default.createElement(l.default,{className:"iconbutton rounded hint--bottom-right settings-btn",icon:"sprite-settings",onClick:this.handleSettingBtnClick,"data-hint":m.default.string("login.moreLoginSettings")})))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.PureComponent),G(t.default=n,"propTypes",{className:a.default.string}),G(n,"defaultProps",{className:null})},68896:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=m(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=n(64393),i=h(n(989)),l=h(n(40328)),u=n(61862),s=h(n(94128)),c=h(n(60357)),f=h(n(74160)),d=n(61629),p=n(13347);function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function y(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=!s.default.access("env").isOSX;n="browser"!==s.default.type?function(e){var t=e.className,n=void 0!==(r=e.hidden)&&r,r=e.children,s=(e=b((0,o.useState)(!1),2))[0],f=e[1];return(0,c.default)(),(0,o.useEffect)((function(){var e;if(n)return e=setTimeout((function(){f(!0)}),3e3),function(){return clearTimeout(e)};f(!1)}),[n]),s&&n?null:(e=(0,a.getSearchParam)("loginTip"),o.default.createElement("div",{className:(0,a.classes)("app-login center-content",t)},o.default.createElement("div",{className:"drag-area user-app-dragable dock"}),(0,u.isSupportMultiLanguages)()&&o.default.createElement("header",{className:(0,a.classes)("has-padding-sm dock-right dock-top user-app-no-dragable",w?"lang-switch-moved":"")},o.default.createElement("a",{href:"xxc:showLanguageSwitchDialog",className:"btn darken text-white rounded muted"},o.default.createElement(l.default,{name:"web"}),"",o.default.createElement("small",null,(0,u.getLangDisplayName)()))),o.default.createElement("section",null,o.default.createElement("header",{className:"text-center space-sm app-login-logo"},o.default.createElement("img",{src:(0,u.getMediaPath)("logo-inverse"),alt:"logo"})),o.default.createElement(i.default,{className:"rounded layer has-padding-xl user-app-no-dragable"}),e&&o.default.createElement("div",{className:"app-login-tip small text-center has-padding-v muted text-white"},e),r)))}:function(e){var t,n=e.children,r=(e=e.hidden,(t=b((0,o.useState)(),2))[0]),i=t[1],l=(t=b((0,o.useState)("waiting"),2))[0],u=t[1],s=b((0,c.default)(),1)[0];return(0,o.useEffect)((function(){var e=function(){var e=g(g({server:"",account:"",password:"",ldap:!1,rememberMe:!0},f.default.ui.defaultUser),(0,a.getSearchParam)());return e.authKey||(e.password?e.authKey="".concat(d.AUTH_PASSWORD_FLAG).concat(e.password):e.token&&(e.authKey="".concat(d.AUTH_TOKEN_FLAG).concat(e.token))),e}();if(!(e&&e.server&&e.account&&e.authKey))return u("error"),void i(s.string("login.loginParamsRequired"));u("logging"),(0,p.login)(e).then((function(){u("loggined")})).catch((function(e){i(s.error(e)),u("failed")}))}),[s]),e||"loggined"===l||"waiting"===l?null:(t=null,r||"failed"===l?t=o.default.createElement("div",{className:"has-padding-lg"},r||s.string("login.loginFailed")):"logging"===l&&(t=o.default.createElement("div",null,o.default.createElement("div",{className:"lds-ring",style:{display:"inline-block",position:"relative",width:"64px",height:"64px"}},o.default.createElement("div",null),o.default.createElement("div",{style:{animationDelay:"-0.45s"}}),o.default.createElement("div",{style:{animationDelay:"-0.3"}}),o.default.createElement("div",{style:{animationDelay:"-0.15s"}})),o.default.createElement("div",{className:"text-primary strong small"},s.string("login.logging")))),o.default.createElement("div",{className:"dock app-login-simple center-content"},t,n))},t.default=n},89688:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showNetDiagnosticsDialog=t.default=void 0;var r=l(n(67294)),o=l(n(52133)),a=l(n(83173)),i=l(n(61862));function l(e){return e&&e.__esModule?e:{default:e}}n={show:t.showNetDiagnosticsDialog=function(e,t,n){return"function"==typeof t&&(n=t,t=null),o.default.show({title:i.default.string("diagnostics.diagnoseNetwork"),actions:!1,id:"app-net-diagnostics-dialog",style:{left:10,right:10,bottom:0,top:30},className:"app-net-diagnostics-dialog dock",animation:"enter-from-bottom",content:r.default.createElement(a.default,{user:e,loginError:t})},n)}},t.default=n},83173:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=b(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=g(n(45697)),i=n(64393),l=g(n(2388)),u=g(n(40328)),s=g(n(18033)),c=g(n(61862)),f=n(55471),d=g(n(91705)),p=n(7066),h=g(n(94128)),m=g(n(74160)),y=["loginError","user","className"];function g(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=S(e);if(n=t?(n=S(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return O(o)}}(a);function a(e){var t;if(this instanceof a)return _(O(t=n.call(this,e)),"copyDiagnoseLogs",(function(){h.default.call("clipboard.writeText",t.getDiagnoseLogs().join("\n\n")),t.setState({copied:!0},(function(){setTimeout((function(){t.setState({copied:!1})}),3e3)}))})),_(O(t),"exportDiagnoseLogs",(function(){h.default.call("dialog.showSaveFileDialog",t.getDiagnoseLogs().join("\n\n"),{filename:"".concat(m.default.pkg.name,"-diagnostics-").concat((0,p.formatDate)(new Date,"yyyyMMddhhmmss"),".log")})})),_(O(t),"expandAllResults",(function(){var e,n=(e=t.state).expandStates;(e=e.results)&&(e.forEach((function(e){n[e.id]=!0})),t.setState({expandStates:n}))})),_(O(t),"scrollToBottom",(function(){var e;t.containerElement&&(e=t.containerElement.parentElement)&&(e.scrollTop=e.scrollHeight)})),t.state={waiting:null,results:[],copied:!1,expandStates:{}},t;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"componentDidMount",value:function(){this.diagnose()}},{key:"componentWillUnmount",value:function(){this.unMounted=!0}},{key:"diagnose",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=this.props,r=n.user,o=n.loginError;this.setState({waiting:!0,results:[],expandStates:{}},(function(){return(0,f.diagnoseNetwork)(r,t?null:o,(function(t){var n=e.state.results;n.push(t),e.unMounted||e.setState({results:n},e.scrollToBottom)})).then((function(t){e.unMounted||e.setState({results:t,waiting:!1},e.scrollToBottom)})).catch((function(t){var n=e.state.results;n.push({type:"error",id:n.length,message:"".concat(c.default.string("diagnostics.diagnoseUnexpectedInterruption"),"").concat(t.message),detail:t.stack}),e.unMounted||e.setState({results:n,waiting:!1},e.scrollToBottom)}))}))}},{key:"getDiagnoseLogs",value:function(){return this.state.results.map((function(e){var t=["".concat((0,p.formatDate)(e.time,"yyyy-MM-dd hh:mm:ss.SSS")," [").concat(e.type.toUpperCase(),"] ").concat(e.code?"[".concat(e.code,"] "):"").concat(e.message)];return e.detail&&t.push(e.detail),t.join("\n")}))}},{key:"toggleResult",value:function(e,t){var n=this.state.expandStates;n[e]=t,this.setState({expandStates:n})}},{key:"render",value:function(){var e=this,t=((n=this.props).loginError,n.user,n.className),n=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(n,y),r=(b=this.state).waiting,a=b.results,f=b.copied,g=b.expandStates,b=null,w=(r&&(b=o.default.createElement("div",{className:"center-content space-sm"},o.default.createElement(d.default,{className:"flex-inline"}),o.default.createElement("div",{className:"has-padding lead"},c.default.string("diagnostics.waitForDiagnosing")))),[]),O=null;if(a&&a.length){for(var S=0;S<a.length;++S){var _=a[S],C="info"===_.type?"gray":"error"===_.type?"danger":_.type,E="error"===_.type?"alert":"warning"===_.type?"alert-outline":"success"===_.type?"checkbox-marked-circle":"information-outline",P=g[_.id],k=null,j=((P=void 0===P?"error"===_.type||"warning"===_.type:P)&&_.detail&&(k=o.default.createElement("div",{className:"app-net-diagnostic-result-section"},o.default.createElement("div",{className:"heading"},o.default.createElement(u.default,{name:"android-messages",className:"muted-light"}),o.default.createElement("div",{className:"title strong"},c.default.string("diagnostics.detail"),":")),o.default.createElement("pre",{className:"code"},_.detail))),null),x=(P&&_.suggestions&&_.suggestions.length&&(Array.isArray(_.suggestions)||(_.suggestions=[_.suggestions]),j=o.default.createElement("div",{className:"app-net-diagnostic-result-section"},o.default.createElement("div",{className:"heading"},o.default.createElement(u.default,{name:"lightbulb",className:"muted-light"}),o.default.createElement("div",{className:"title strong"},c.default.string("diagnostics.suggestions"),":")),o.default.createElement("ul",{className:"code"},_.suggestions.map((function(e){return o.default.createElement("li",null,e)})),_.code&&m.default.pkg.errorsURL?o.default.createElement("li",null,o.default.createElement("a",{className:"text-primary",href:"".concat(m.default.pkg.errorsURL,"#").concat(_.code)},c.default.string("diagnostics.moreSuggestions"))):null))),null);(_.detail||_.suggestions&&_.suggestions.length)&&(x=o.default.createElement("nav",null,o.default.createElement(s.default,{onClick:this.toggleResult.bind(this,_.id,!P),icon:"chevron-".concat(P?"up":"down"),className:"btn-lg rounded"}))),w.push(o.default.createElement("div",{className:"app-net-diagnostic-result ".concat(C,"-pale"),key:_.id},o.default.createElement("div",{className:"app-net-diagnostic-result-border ".concat(C)}),o.default.createElement("div",{className:"heading text-".concat("gray"===C?"black":C)},o.default.createElement("div",{className:"strong app-net-diagnostic-result-index"},"#",S+1),o.default.createElement("small",{className:"muted-light"},(0,p.formatDate)(_.time,"hh:mm:ss.SSS")," "),o.default.createElement(l.default,{icon:E}),o.default.createElement("div",{className:"title"},_.code?o.default.createElement("strong",null,"[",_.code,"] "):null,_.message),x),(k||j)&&o.default.createElement("div",{className:"".concat(C,"-pale")},k,j)))}r||(O=o.default.createElement("div",{className:"app-net-diagnostic-actions has-padding-v center-content"},o.default.createElement(s.default,{label:c.default.string("diagnostics.restartDiagnose"),className:"has-margin-xs primary bg-primary rounded",onClick:this.diagnose.bind(this,!0)}),h.default.has("clipboard.writeText")&&o.default.createElement(s.default,{disabled:f,label:c.default.string(f?"diagnostics.copiedDiagnoseLogs":"diagnostics.copyDiagnoseLogs"),className:"has-margin-xs primary x-outline rounded",onClick:this.copyDiagnoseLogs}),h.default.has("dialog.showSaveFileDialog")&&o.default.createElement(s.default,{label:c.default.string("diagnostics.exportDiagnoseLogs"),className:"has-margin-xs primary x-outline rounded",onClick:this.exportDiagnoseLogs}),!!m.default.pkg.contactURL&&o.default.createElement(s.default,{label:c.default.string("diagnostics.contactUs"),className:"has-margin-xs primary x-outline rounded",url:m.default.pkg.contactURL}),o.default.createElement(s.default,{label:c.default.string("diagnostics.expandAllDetail"),className:"has-margin-xs primary x-outline rounded",onClick:this.expandAllResults})))}return o.default.createElement("div",v({className:(0,i.classes)("app-net-diagnostic",t),ref:function(t){e.containerElement=t}},n),o.default.createElement("div",{className:"app-net-diagnostic overflow-y-auto user-selectable"},w),b||O)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component),_(t.default=n,"propTypes",{loginError:a.default.object,user:a.default.object.isRequired,className:a.default.string}),_(n,"defaultProps",{loginError:null,className:null})},39276:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showSwapUserDialog=t.default=void 0;var r=l(n(67294)),o=l(n(52133)),a=l(n(76646)),i=l(n(61862));function l(e){return e&&e.__esModule?e:{default:e}}n={show:t.showSwapUserDialog=function(e,t,n,l){var u="app-login-swap-user";return o.default.show({title:i.default.string("login.swapUser"),actions:!1,id:u,style:{width:400},content:r.default.createElement(a.default,{identify:e,server:t,onSelectUser:function(e){o.default.hide(u),n&&n(e)}})},l)}},t.default=n},76646:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=h(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=p(n(45697)),i=p(n(40328)),l=p(n(61862)),u=p(n(61629)),s=n(72749),c=n(64393),f=p(n(27607)),d=["identify","server","className","onSelectUser"];function p(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=b(e);if(n=t?(n=b(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return g(o)}}(a);function a(e){var t;if(this instanceof a)return v(g(t=n.call(this,e)),"handleMouseLeave",(function(){t.setState({hover:""})})),t.state={hover:""},t;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"getUserList",value:function(){var e,t;return this.userList&&!(0<arguments.length&&void 0!==arguments[0]&&arguments[0])||(this.userList=(0,s.getUserListFromStore)(),(e=this.props.server)&&(t=u.default.simplifyServerUrl(e),this.userList=this.userList.filter((function(e){return u.default.simplifyServerUrl(e.server)===t})))),this.userList}},{key:"handleMouseEnter",value:function(e){this.setState({hover:e})}},{key:"handleDeleteBtnClick",value:function(e,t){(0,s.removeUserFromStore)(e.identify),this.userList=null,this.forceUpdate(),t.stopPropagation()}},{key:"render",value:function(){var e=this,t=(a=this.props).identify,n=(a.server,a.className),r=a.onSelectUser,a=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(a,d),s=this.state.hover;return o.default.createElement("div",m({},a,{className:(0,c.classes)("app-swap-user list has-padding-v",n)}),this.getUserList().map((function(n){var a=(n=u.default.create(n)).identify,d=s===a,p=a===t;return o.default.createElement(f.default,{key:n.identify,user:n,onMouseEnter:e.handleMouseEnter.bind(e,a),onMouseLeave:e.handleMouseLeave,className:(0,c.classes)("flex-middle",{"primary-pale":p}),onClick:r.bind(null,n)},d?o.default.createElement("button",{style:{zIndex:10},title:l.default.string("common.remove"),onClick:e.handleDeleteBtnClick.bind(e,n),type:"button",className:"btn iconbutton rounded"},o.default.createElement(i.default,{name:"delete text-danger"})):p?o.default.createElement("div",{className:"checkbox checkbox-sm checked"},o.default.createElement("label",null)):null)})))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component),v(t.default=n,"propTypes",{className:a.default.string,identify:a.default.string,server:a.default.string,onSelectUser:a.default.func}),v(n,"defaultProps",{className:null,identify:null,server:null,onSelectUser:null})},46783:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=b(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=n(64393),i=n(15973),l=g(n(61862)),u=g(n(65286)),s=n(13347),c=n(75738),f=g(n(2388)),d=n(78717),p=g(n(94128)),h=g(n(74160)),m=n(16986),y=n(727);function g(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=S(e);if(n=t?(n=S(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return O(o)}}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}n=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e);var n=w(r);function r(e){if(this instanceof r)return _(O(e=n.call(this,e)),"onUserStatusChangeHandler",void 0),_(O(e),"connectTimes",void 0),_(O(e),"startConnectTime",void 0),_(O(e),"countTimer",void 0),_(O(e),"disconnectNotificationTimerId",void 0),e.state={userStatus:c.STATUS.unverified,tick:0,connecting:!1,disconnect:!1,failMessage:"",isShortDisconnect:!1,hasSetTrayOffline:!1},e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"componentDidMount",value:function(){var e=this;this.onUserStatusChangeHandler=(0,i.onUserStatusChange)((function(){var t=(0,i.getUserStatus)();if(e.state.userStatus!==t){if(e.setState({userStatus:t}),c.STATUS.isSame(t,c.STATUS.disconnect))return e.startConnect(),e.disconnectNotificationTimerId&&clearTimeout(e.disconnectNotificationTimerId),void(e.disconnectNotificationTimerId=setTimeout((function(){p.default.call("ui.showAndFocusWindow")}),(0,m.convertTimes)(h.default.ui["app.timeToShowMainWindowAfterOffline"])));e.setState({hasSetTrayOffline:!1}),e.stopConnect(),p.default.call("ui.setTrayToGray",!1),e.disconnectNotificationTimerId&&(clearTimeout(e.disconnectNotificationTimerId),e.disconnectNotificationTimerId=null)}}))}},{key:"componentWillUnmount",value:function(){u.default.off(this.onUserStatusChangeHandler),clearInterval(this.countTimer),this.countTimer=null,clearTimeout(this.disconnectNotificationTimerId),this.disconnectNotificationTimerId=null}},{key:"connect",value:function(){var e=this;this.setState({connecting:!0,failMessage:""}),(0,s.reconnect)().catch((function(t){DEBUG&&(console.collapse("Login.error","redBg",l.default.error(t),"redPale"),console.error(t),console.groupEnd()),"HTTP_STATUS_401"===t.code?(e.logout(),(0,d.executeCommand)("showMessager",l.default.error("HTTP_STATUS_401"),{rootClassName:"message-kickoff-confirm",type:"danger",icon:"alert"})):"SER_ERR"===t.code&&(e.logout(),(0,d.executeCommand)("showMessager",l.default.error(t),{rootClassName:"message-kickoff-confirm ",type:"danger",icon:"alert"})),e.connectTimes+=1,e.setState({failMessage:l.default.error(t),connecting:!1,tick:5*e.connectTimes})}))}},{key:"startConnect",value:function(){var e=this;this.connectTimes=0,this.setState({connecting:!1,disconnect:!0,tick:0,isShortDisconnect:!0}),this.startConnectTime=Date.now(),this.countTimer=setInterval((function(){var t=(n=e.state).connecting,n=n.tick,r={};if(!t){if(n<1)return e.connect();r.tick=n-1}r.isShortDisconnect=Date.now()-e.startConnectTime<=15e3,r.isShortDisconnect||e.state.hasSetTrayOffline||((t=(0,i.getCurrentUser)())&&(0,y.updateUserInfoOnTray)(t),p.default.call("ui.setTrayToGray"),r.hasSetTrayOffline=!0),e.setState(r)}),1e3)}},{key:"stopConnect",value:function(){this.setState({connecting:!1,disconnect:!1,isShortDisconnect:!1}),clearInterval(this.countTimer),this.countTimer=null}},{key:"reconnectNow",value:function(){this.state.connecting||(this.connectTimes=Math.min(1,Math.floor(this.connectTimes/2)),this.connect())}},{key:"logout",value:function(){this.stopConnect(),(0,s.logout)(!0)}},{key:"render",value:function(){var e=this,t=(i=this.state).connecting,n=i.disconnect,r=i.tick,i=i.isShortDisconnect;return!n||i?null:(i=this.props.className,t=t?o.default.createElement("div",{className:"heading yellow shadow-1"},o.default.createElement(f.default,{size:24,icon:"loading spin"}),o.default.createElement("div",{className:"title small"},h.default.ui["app.shortenReconnectMessage"]?l.default.string("login.autoConnect.connecting.short"):l.default.string("login.autoConnect.connecting")),!h.default.ui["app.hideLogout"]&&o.default.createElement("nav",{className:"nav nav-sm"},o.default.createElement("a",{onClick:function(){return e.logout()}},l.default.string("login.autoConnect.logout")))):o.default.createElement("div",{className:"heading yellow rounded shadow-1"},o.default.createElement(f.default,{size:24,icon:r%2==0?"lan-disconnect":"lan-connect"}),o.default.createElement("div",{className:"title small"},h.default.ui["app.shortenReconnectMessage"]?l.default.string("login.autoConnect.wait.short"):o.default.createElement(o.default.Fragment,null,l.default.format(this.connectTimes?"login.autoConnect.failedAndWait":"login.autoConnect.wait",Math.max(0,r)),this.state.failMessage?o.default.createElement("span",{"data-hint":this.state.failMessage,className:"hint--bottom"},l.default.string("login.autoConnect.errorDetail")):null)),o.default.createElement("nav",{className:"nav nav-sm"},o.default.createElement("a",{onClick:function(){return e.reconnectNow()}},l.default.string("login.autoConnect.connectIM")),!h.default.ui["app.hideLogout"]&&o.default.createElement("a",{onClick:function(){return e.logout()}},l.default.string("login.autoConnect.logout")))),o.default.createElement("div",{className:(0,a.classes)("app-auto-reconnect-bar center-content",i,{"app-user-disconnet":n})},t))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.PureComponent),_(t.default=n,"defaultProps",{className:null})},2663:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=f(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=c(n(45697)),i=c(n(45780)),l=c(n(85110)),u=c(n(44884)),s=(n=c(n(66052)),["match","location","history","staticContext"]);function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var y=[{path:l.default.chats._,view:u.default},{path:l.default.contacts._,view:n.default}];i.default&&y.push({path:l.default.exts._,view:i.default}),u=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h(e);if(n=t?(n=h(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==o)return o;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(a);function a(){var e=this,t=a;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"render",value:function(){var e=(t=this.props).match,t=(t.location,t.history,t.staticContext,function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(t,s));return o.default.createElement("div",d({className:"app-main-container user-app-no-dragable dock"},t),y.map((function(t){return e.url.startsWith(t.path)?(t.active=!0,o.default.createElement(t.view,{className:"app-container",key:t.path,match:e})):t.active?o.default.createElement(t.view,{className:"app-container",key:t.path,match:e,hidden:!0}):null})))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component),m(t.default=u,"propTypes",{match:a.default.any,location:a.default.any,history:a.default.any,staticContext:a.default.any}),m(u,"defaultProps",{match:null,location:null,history:a.default.any,staticContext:a.default.any})},45714:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(79873)),o=i(n(2663)),a=i(n(46783));function i(e){return e&&e.__esModule?e:{default:e}}n=i(n(14478)),r={Navbar:r.default,CacheContainer:o.default,Index:n.default,AutoReconnectBar:a.default},t.default=r},14478:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=g(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=y(n(45697)),i=n(39711),l=n(64393),u=y(n(85110)),s=n(15973),c=y(n(79873)),f=y(n(2663)),d=n(61862),p=y(n(65286)),h=(n(65958),["className"]),m=["className"];function y(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function v(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){t&&O(e.prototype,t),n&&O(e,n),Object.defineProperty(e,"prototype",{writable:!1})}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=P(e);if(n=t?(n=P(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==o)return o;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var j=function(){_(t,o.Component);var e=E(t);function t(){return w(this,t),e.apply(this,arguments)}return S(t,[{key:"componentDidMount",value:function(){var e=this;this.onUserConfigChange=(0,s.onUserConfigChange)((function(){e.forceUpdate()})),this.onLangChangeHandler=(0,d.onLangChange)((function(){e.forceUpdate()}))}},{key:"componentWillUnmount",value:function(){p.default.off(this.onUserConfigChange,this.onLangChangeHandler)}},{key:"render",value:function(){var e=(t=this.props).className,t=v(t,h);return o.default.createElement("div",b({className:(0,l.classes)("app-main",e)},t),o.default.createElement(c.default,{className:"dock-left"}),o.default.createElement(i.Route,{path:"/",exact:!0,render:function(){return o.default.createElement(i.Redirect,{to:"/chats"})}}),o.default.createElement(i.Route,{path:"/index",exact:!0,render:function(){return o.default.createElement(i.Redirect,{to:"/chats"})}}),o.default.createElement(i.Route,{path:u.default.apps.__,exact:!0,component:f.default}))}}]),t}();k(j,"propTypes",{className:a.default.string}),k(j,"defaultProps",{className:null}),n=function(){_(t,j);var e=E(t);function t(){w(this,t),n=e.call(this);var n,r=document.createElement("style");return r.innerHTML="\n        @font-face {\n            font-family: ZentaoIcon;\n            font-style: normal;\n            font-weight: 400;\n            src: url(../../../theme/zui/fonts/ZentaoIcon.eot?v=1.27);\n            src: url(../../../theme/zui/fonts/ZentaoIcon.eot?#iefix&v=1.27) format('embedded-opentype'),url(../../../theme/zui/fonts/ZentaoIcon.woff?v=1.27) format('woff'),url(../../../theme/zui/fonts/ZentaoIcon.ttf?v=1.27) format('truetype'),url(../../../theme/zui/fonts/ZentaoIcon.svg#regular?v=1.27) format('svg')\n        }       \n                        \n        [class^=\"icon-zt-\"],\n        [class*=\" icon-zt-\"] {\n            font-family: 'ZentaoIcon' !important;\n            font-style: normal;\n            font-weight: normal;\n            font-variant: normal;\n            text-transform: none;\n            line-height: 1;\n            -webkit-font-smoothing: antialiased;\n            -moz-osx-font-smoothing: grayscale;\n        }\n\n        .icon-zt-product:before {content: \"\\e98f\";}\n        .icon-zt-project:before {content: \"\\e99c\";}    \n          ",document.body.append(r),n}return S(t,[{key:"render",value:function(){var e=(t=this.props).className,t=v(t,m);return o.default.createElement("div",b({className:(0,l.classes)("app-main",e)},t),o.default.createElement(i.Route,{path:"/",exact:!0,render:function(){return o.default.createElement(i.Redirect,{to:"/chats"})}}),o.default.createElement(i.Route,{path:"/index",exact:!0,render:function(){return o.default.createElement(i.Redirect,{to:"/chats"})}}),o.default.createElement(i.Route,{path:u.default.apps.__,exact:!0,component:f.default}))}}]),t}(),t.default=n},85411:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=c(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=s(n(45697)),i=n(64393),l=s(n(2388)),u=["id","label","icon","iconClassName","hint","url","className","click","active","noticeCount","children"];function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e){var t=e.id,n=e.label,r=e.icon,a=e.iconClassName,s=e.hint,c=e.url,d=e.className,p=e.click,h=e.active,m=e.noticeCount,y=e.children;return e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,u),o.default.createElement("a",f({className:(0,i.classes)("nav-item hint--right",d,{active:h}),href:c,"data-hint":null!=s?s:n,"data-id":t,onClick:p},e),o.default.createElement(l.default,{size:30,auto:r,className:a}),"number"==typeof m&&o.default.createElement("div",{className:"label label-sm dock-right dock-top circle red badge fade zoom".concat(m?" in":"")},m),y)}d.propTypes={id:a.default.string.isRequired,icon:a.default.string.isRequired,iconClassName:a.default.string,label:a.default.string,hint:a.default.string,url:a.default.string,className:a.default.string,click:a.default.func,active:a.default.bool,noticeCount:a.default.number,children:a.default.node},d.defaultProps={iconClassName:null,label:null,hint:null,url:null,className:null,click:null,active:!1,noticeCount:null,children:null},t.default=(0,o.memo)(d)},60947:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=d(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=f(n(98709)),i=f(n(42207)),l=f(n(85411)),u=f(n(74101)),s=f(n(61862)),c=n(37907);function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(){(0,c.tryEmitUnreadMessagesChange)(u.default.getUnreadMessageCount())}t.default=(0,o.memo)((function(){var e=(0,a.default)(),t=(0,i.default)();return(0,o.useEffect)((function(){document.body.setAttribute("data-nav-id",t)}),[t]),o.default.createElement("nav",{className:"app-nav-main"},(e=[{id:"chats",label:s.default.string("navbar.chats.label"),noticeCount:e,url:"#/chats",icon:"sprite-nav-chat",className:"app-nav-chats",click:h},{id:"contacts",label:s.default.string("navbar.contacts.label"),url:"#/contacts",icon:"sprite-nav-contact"}],n.g.ExtsRuntime&&e.push({id:"apps",label:s.default.string("navbar.exts.label"),url:"#/exts",icon:"sprite-nav-app"}),e.map((function(e){return o.default.createElement(l.default,p({key:e.id,"data-id":e.id,active:e.id===t},e))}))))}))},57150:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=s(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=n(67940),i=u(n(60337)),l=u(n(76763));function u(e){return e&&e.__esModule?e:{default:e}}function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=(0,o.memo)((function(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),1!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,1);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,1):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,l.default)())[0];return e?o.default.createElement("nav",{className:"app-nav-user dock-bottom"},o.default.createElement("a",{className:"circle flex-none",onClick:i.default},o.default.createElement(a.MemberAvatarCommon,{status:e.statusName,displayName:e.displayName,avatar:e.avatar,code:e.id||e.account,showStatusDot:!0,size:36}))):null}))},79873:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=c(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=s(n(45697)),i=n(64393),l=s(n(57150)),u=s(n(60947));function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(e){var t=n.g.ExtsRuntime;return o.default.createElement("div",{className:(0,i.classes)("app-navbar with-avatar-on-top",e.className),id:"appNavbar"},o.default.createElement("div",{className:"app-navbar-drag-area user-app-dragable dock"}),o.default.createElement(l.default,null),o.default.createElement(u.default,null),t&&t.ExtsNavbarView&&o.default.createElement(t.ExtsNavbarView,null))}f.propTypes={className:a.default.string},f.defaultProps={className:""},t.default=(0,o.memo)(f)},60337:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=C(n(67294)),o=n(98649),a=n(15973),i=C(n(67940)),l=C(n(61629)),u=C(n(62103)),s=C(n(61862)),c=n(13347),f=n(61964),d=n(84360),p=n(88666),h=n(43058),m=n(92371),y=C(n(82587)),g=C(n(74160)),b=n(59846),v=n(78717),w=n(63640),O=n(4547),S=n(52133),_=C(n(39483));function C(e){return e&&e.__esModule?e:{default:e}}function E(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}(0,o.addContextMenuCreator)("profile.menu",(function(){var e,t,n=(0,a.getCurrentUser)(),o=[],C=n&&n.status,P=C&&l.default.STATUS.getName(C);return o.push({id:"viewProfile",className:"app-user-profile-menu-name",icon:r.default.createElement(i.default,{memberID:n.id,size:30}),label:r.default.createElement("div",{className:"content"},r.default.createElement("div",{className:"title strong"},n.displayName),r.default.createElement("div",{className:"subtitle"},n.account)),url:"xxc://showMemberProfile/".concat(n.id)}),o.push("divider"),[l.default.STATUS.getName(l.default.STATUS.online),l.default.STATUS.getName(l.default.STATUS.busy),l.default.STATUS.getName(l.default.STATUS.meeting),l.default.STATUS.getName(l.default.STATUS.away)].forEach((function(e){o.push({id:"switchStatus-".concat(e),icon:r.default.createElement(u.default,{status:e}),label:s.default.string("member.status.".concat(e)),checked:P===e,click:function(){return(0,c.changeUserStatus)(e)}})})),o.push("divider"),"xxb"===n.backendType&&n.isVersionSupport("tokenAuth")&&o.push({id:"changeAvatar",label:s.default.string("usermenu.changeAvatar"),click:function(){var e=n.authKeyForServer,t=n.backendURL,r=n.account,o=n.requestType,a=n.requestFix,i=(0,O.generateRequestURL)("","user","changeavatar",{},{requestFix:"_",requestType:o});t=(0,O.generateRequestURL)(t,"im","authorize",{account:r,token:e,device:g.default.system.device||"desktop",url:i},{requestFix:a,requestType:o}),(0,v.executeCommand)("openUrlInDialog",t,{title:s.default.string("usermenu.changeAvatar")})}}),n.ldap||o.push({id:"changePassword",label:s.default.string("usermenu.changePassword"),click:f.showUserChangePasswordDialog}),o.push({id:"switchLanguage",label:s.default.string("common.switchLanguage"),click:d.showLanguageSwitchDialog},{id:"setting",label:s.default.string("usermenu.setting"),click:b.showUserSettingDialog}),g.default.ui["qrcode.login.enable"]&&(0,a.getCurrentUser)().hasAuthToken&&o.push({id:"mobileQr",label:s.default.string("usermenu.login.qr"),click:w.showLoginQRCode}),o.push("divider"),o.push({id:"about",label:s.default.string("usermenu.about"),click:p.showAboutDialog}),(0,h.getUpdaterStatus)().needUpdate&&o.push({id:"foundNewVersion",label:s.default.string("update.foundNewVersion"),click:m.showUpdateGuideDialog}),o.push("divider"),o.push({id:"logout",label:s.default.string("usermenu.logout"),click:(e=function*(){if(0<_.default.getRTCAllInitiator().length||0<_.default.getRTCAllResponder().length){if(!(yield(0,S.showConfirm)(s.default.string("file.upload.p2p.exitHint.content"))))return;_.default.clearRTCInitiator(),_.default.clearRTCResponder()}(0,c.logout)()},t=function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){E(a,r,o,i,l,"next",e)}function l(e){E(a,r,o,i,l,"throw",e)}i(void 0)}))},function(){return t.apply(this,arguments)})}),y.default.canQuit&&o.push({id:"exit",label:s.default.string("usermenu.exit"),click:y.default.quit}),o}),{apiLevel:4}),t.default=function(e){var t={triggerElement:e.currentTarget||e.target,direction:"below-left",offsetX:-45,offsetY:5};(0,o.showContextMenu)("profile.menu",{event:e,options:{position:t,className:"app-user-profile-menu",style:{minWidth:188}}})}},91103:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(31239),o=n(86033),a=n(78717),i=z(n(74101)),l=n(68271),u=n(92371),s=n(25852),c=n(67629),f=n(21531),d=n(19815),p=n(52133),h=n(59702),m=n(32286),y=n(65835),g=n(14992),b=n(82847),v=n(53255),w=n(94602),O=n(99270),S=n(56654),_=n(39113),C=n(73002),E=n(46243),P=n(68232),k=(n(27559),n(9215)),j=n(81087),x=n(52278),M=n(54881),T=n(14733),I=n(79424),D=n(70290),A=n(9913),R=n(47238),N=n(51348),B=z(n(61862)),L=n(67819),F=n(38130),U=n(15998);function z(e){return e&&e.__esModule?e:{default:e}}function W(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){(0,p.setLangObj)(e),(0,a.registerCommand)("showChatSendCodeDialog",(function(e,t){(t="string"==typeof(t=t||e.chat||(0,l.getActiveChatGid)())?i.default.getChat(t):t)&&(0,r.showChatCodeDialog)(t)}),null,{apiLevel:4}),(0,a.registerCommand)("showChatShareDialog",(function(e,t){e=e.message,(0,o.showChatShareDialog)(e||t)}),null,{apiLevel:4}),(0,a.registerCommand)("showChatSendDialog",(function(e){return(0,o.showChatSendDialog)(e)}),null,{apiLevel:4}),(0,a.registerCommand)("showUpdateGuideDialog",(function(e,t){return(0,u.showUpdateGuideDialog)(t)})),(0,a.registerCommand)("showMessager",(function(e,t,n){return(0,s.showMessager)(t,e.options,n)}),null,{apiLevel:5}),(0,a.registerCommand)("showAlert",(function(e,t,n){return(0,p.showAlert)(t,e.options,n)}),null,{apiLevel:5}),(0,a.registerCommand)("showConfirm",(function(e,t,n){return(0,p.showConfirm)(t,e.options,n)}),null,{apiLevel:5}),(0,a.registerCommand)("showPrompt",(function(e,t,n,r){return(0,p.showPrompt)(t,n,e.options,r)}),null,{apiLevel:5}),(0,a.registerCommand)("showModal",(function(e,t){return(0,p.showModal)(e.options,t)}),null,{apiLevel:5}),(0,a.registerCommand)("showMemberProfile",(function(e,t,n){return(0,c.showMemberProfileDialog)(t||e.member||e.options&&e.options.memberId,n)}),null,{apiLevel:4}),(0,a.registerCommand)("openWebviewDialog",(function(e,t,n,r){return(0,f.showWebviewDialog)(t||e.url,n||e.options,r)}),null,{apiLevel:5}),(0,a.registerCommand)("openFormAndSendToServerBySendbox",(function(e,t,n,r){var o;(t=(0,F.validateFormProps)(t))&&(e=e.targetElement.closest(".app-message-bubble"),o=null,e&&(o=e.getAttribute("data-id")),t.dataHandler=function(e){for(var t="",r=0,a=Object.entries(e);r<a.length;r++){var i=(l=H(a[r],2))[0],l=l[1];t+="".concat(i,"=").concat(l,"&")}t+="messageId=".concat(o),(0,U.sendContentToChat)("".concat(n," ").concat(t),{send:!0,clear:!0})},(0,F.showDynamicFormDialog)(t,r))}),null,{apiLevel:6}),(0,a.registerCommand)("showEmojiPopover",(function(e,t,n,r){return(0,v.showEmojiPopover)(t,n,r)}),null,{apiLevel:4}),(0,a.registerCommand)("showHotkeySettingDialog",(function(e,t,n,r,o){return(0,w.showHotkeySettingDialog)(t,n,r,o)}),null,{apiLevel:6}),(0,a.registerCommand)("showChatGroupSettingsDialog",(function(e,t,n,r){return(0,h.showChatGroupSettingsDialog)(t,n,r)}),null,{apiLevel:4}),(0,a.registerCommand)("showChatAvatarSettingsDialog",(function(e,t,n){return(0,L.showChatAvatarSettingsDialog)(t,n)}),null,{apiLevel:4}),(0,a.registerCommand)("showChatCommittersSettingDialog",(function(e,t,n,r){return(0,m.showChatCommittersSettingDialog)(t,n,r)}),null,{apiLevel:4}),(0,a.registerCommand)("showChatHistoryDialog",(function(e,t,n,r){return(0,y.showChatHistoryDialog)(t,n,r)}),null,{apiLevel:2}),(0,a.registerCommand)("showCreateChatDialog",(function(e,t,n){return(0,P.showCreateChatDialog)(t,n)}),null,{apiLevel:4}),(0,a.registerCommand)("showChatInviteDialog",(function(e,t,n,r){return(0,g.showChatInviteDialog)(t,n,r)}),null,{apiLevel:4}),(0,a.registerCommand)("showChatTipPopover",(function(e,t,n){return(0,b.showChatTipPopover)(t,n)})),(0,a.registerCommand)("showChangeFontPopover",(function(e,t,n){return(0,O.showChangeFontPopover)(t,n)})),(0,a.registerCommand)("showChatAddCategoryDialog",(function(e,t,n){return(0,S.showChatAddCategoryDialog)(t,n)}),null,{apiLevel:4}),(0,a.registerCommand)("showChatBulletinSettingDialog",(function(e,t,n){return(0,_.showChatBulletinSettingDialog)(t,n)}),null,{apiLevel:4}),(0,a.registerCommand)("showConfirmSendFilesDialog",(function(e,t,n,r){return(0,C.showConfirmSendFilesDialog)(t,n,r)}),null,{apiLevel:4}),(0,a.registerCommand)("showChatMentionsDialog",(function(e,t,n){return(0,M.showChatMentionsDialog)(t,n)}),null,{apiLevel:4}),(0,a.registerCommand)("showMessageInDialog",(function(e,t,n,r){return(0,T.showMessageInDialog)(t,n,r)}),null,{apiLevel:4}),(0,a.registerCommand)("showTodoEditDialog",(function(e,t,n){return(0,E.showTodoEditDialog)(t,n)}),null,{apiLevel:6}),(0,a.registerCommand)("showDisplaySourceSelector",(function(t,n,r,o){return(0,x.showDisplaySourceSelector)(n,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({Lang:e},r),o)})),(0,a.registerCommand)("contextMenu",(function(e,t,n,r,o){e=void 0===(e=e.options)?{}:e,"string"==typeof(t=t||e.position)&&(t=JSON.parse(t)),"string"==typeof(n=n||e.items)&&(n=JSON.parse(n)),"string"==typeof(r=r||e.props)&&(r=JSON.parse(r)),(0,j.showContextMenu)(t,n,r,o)})),(0,a.registerCommand)("closeDisplay",(function(e,t,n){t=t||e.displayId,void 0===n&&(n=void 0===e.removeModal||e.removeModal),(0,k.displayHide)(t,null,n)}),null,{apiLevel:2}),(0,a.registerCommand)("closeModal",(function(e,t,n){return(0,a.executeCommandWithContext)("closeDisplay",e,t,n)}),null,{apiLevel:2}),(0,a.registerCommand)("viewMedia",(function(e,t,n){return(0,D.showMediaPreviewWindow)(t,n)}),null,{apiLevel:2}),(0,a.registerCommand)("viewChatMessageImage",(function(e,t,n,r){(0,I.showChatMessageImagePreivew)(t,n,r)}),null,{apiLevel:2}),(0,a.registerCommand)("openWebviewWindow",(function(e,t,n){return(0,A.openWebviewWindow)(t,n)}),null,{apiLevel:2}),(0,a.registerCommand)("openTextEditor",(function(e,t,n){return(0,R.openTextEditorWindow)(t,n)}),null,{apiLevel:2}),(0,a.registerCommand)("showChatsHistoryWindow",(function(e,t){return(0,N.showChatsHistoryWindow)(t)}),null,{apiLevel:2}),(0,a.registerCommand)("showConfirmCloseWithP2p",(function(e){return(0,a.executeCommandWithContext)("showConfirm",e,B.default.string("file.upload.p2p.exitHint.content"))})),(0,d.initUpdateView)()}},46243:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showTodoEditDialog=t.default=void 0;var r=l(n(67294)),o=l(n(52133)),a=l(n(92810)),i=l(n(61862));function l(e){return e&&e.__esModule?e:{default:e}}n={show:t.showTodoEditDialog=function(e,t){var n="app-todo-editor-dialog";return o.default.show({title:i.default.string(e.id?"todo.edit":"todo.create"),id:n,actions:!1,style:{width:600},content:r.default.createElement(a.default,{defaultTodo:e,onRequestClose:function(){return o.default.hide(n)}})},t)}},t.default=n},92810:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};if((t=v(t))&&t.has(e))return t.get(e);var n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n(67294)),a=b(n(45697)),i=n(64393),l=n(16986),u=n(7066),s=b(n(61862)),c=b(n(70389)),f=b(n(74379)),d=b(n(18033)),p=n(77325),h=n(25852),m=b(n(94128)),y=b(n(52133)),g=["className","defaultTodo","onRequestClose"];function b(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function O(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function P(e){return e?60*(e=e.split(":").map((function(e){return Number.parseInt(e,10)})))[0]+e[1]:0}var k=m.default.env.isOSX;n=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=C(e);if(n=t?(n=C(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments),o=this,n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return _(o)}}(a);function a(e){var t;if(this instanceof a)return E(_(t=n.call(this,e)),"handleSubmitBtnClick",(function(){t.checkTodo()&&t.setState({loading:!0},(function(){var e=t.state.todo;(0,p.createTodo)(e).then((function(e){var n={loading:!1};return e&&e.id?((0,h.showMessager)(s.default.string("todo.createSuccess"),{type:"success",autoHide:!0}),t.props.onRequestClose&&t.props.onRequestClose()):n.errorMessage=s.default.error("COMMON_ERROR"),t.setState(n),e})).catch((function(e){return y.default.alert(s.default.error(e))}))}))})),t.state={todo:e.defaultTodo||{},loading:!1,errorMessage:"",errorControl:""},t.state.todo.date||(t.state.todo.date=(0,u.formatDate)(new Date,"yyyy-MM-dd")),t;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"handleTodoChange",value:function(e,t){var n=(r=this.state).todo,r=r.errorControl;n[e]=t,t={todo:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n),errorMessage:""},e===r&&(t.errorControl=""),this.setState(t)}},{key:"checkTodo",value:function(){var e=this.state.todo;if((0,l.isEmptyString)(e.name))return this.setState({errorControl:"name",errorMessage:s.default.format("common.requiredField.format",s.default.string("todo.label.name"))}),!1;if((0,l.isEmptyString)(e.date))return this.setState({errorControl:"date",errorMessage:s.default.format("common.requiredField.format",s.default.string("todo.label.date"))}),!1;var t=(0,l.isEmptyString)(e.begin),n=(0,l.isEmptyString)(e.end);return t!==n?(this.setState({errorControl:t?"begin":"end",errorMessage:s.default.string("todo.beginAndEndBothRequired")}),!1):!(!t&&!n&&(t=P(e.begin),P(e.end)<t)&&(this.setState({errorControl:"end",errorMessage:s.default.string("todo.beginMustBeforeEnd")}),1))}},{key:"render",value:function(){var e=this,t=(r=this.props).className,n=(r.defaultTodo,r.onRequestClose),r=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(r,g),a=(p=this.state).todo,l=p.loading,u=p.errorMessage,p=p.errorControl;return n=[o.default.createElement(d.default,{key:"confirm",className:"primary btn-wide rounded bg-primary has-margin-sm",label:s.default.string("common.confirm"),onClick:this.handleSubmitBtnClick}),o.default.createElement(d.default,{key:"cancel",className:"btn-wide rounded gray x-outline has-margin-sm",label:s.default.string("common.cancel"),onClick:n})],k&&n.reverse(),o.default.createElement("div",w({},r,{className:(0,i.classes)("app-todo-editor relative load-indicator has-padding-v",t,{loading:l,disabled:l})}),u?o.default.createElement("div",{className:"box red rounded space-sm"},u):null,o.default.createElement(c.default,{className:"name"===p?"has-error":"",defaultValue:a.name,label:s.default.string("todo.label.name"),autoFocus:!0,placeholder:s.default.string("common.required"),onChange:this.handleTodoChange.bind(this,"name")}),o.default.createElement("div",{className:"control".concat("desc"===p?" has-error":"")},o.default.createElement("label",null,s.default.string("todo.label.desc")),o.default.createElement("textarea",{className:"textarea rounded",rows:"10",value:a.desc,placeholder:"".concat(s.default.string("todo.label.desc")," (").concat(s.default.string("todo.input.desc.hint"),")"),onChange:function(t){return e.handleTodoChange("desc",t.target.value)}})),o.default.createElement("div",{className:"row gutter-sm"},o.default.createElement("div",{className:"cell"},o.default.createElement("div",{className:"control"},o.default.createElement("label",null,s.default.string("todo.label.pri")),o.default.createElement(f.default,{value:a.pri,options:[1,2,3,4,""],onChange:this.handleTodoChange.bind(this,"pri")}))),o.default.createElement("div",{className:"cell"},o.default.createElement(c.default,{className:"date"===p?"has-error":"",inputType:"date",defaultValue:a.date,label:s.default.string("todo.label.date"),placeholder:s.default.string("todo.label.date")+s.default.string("common.required"),onChange:this.handleTodoChange.bind(this,"date")})),o.default.createElement("div",{className:"cell"},o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"cell"},o.default.createElement(c.default,{className:"begin"===p?"has-error":"",inputType:"time",defaultValue:a.begin,label:s.default.string("todo.label.begin"),onChange:this.handleTodoChange.bind(this,"begin")})),o.default.createElement("div",{className:"cell"},o.default.createElement(c.default,{className:"end"===p?"has-error":"",inputType:"time",defaultValue:a.end,label:s.default.string("todo.label.end"),onChange:this.handleTodoChange.bind(this,"end")}))))),o.default.createElement("div",{className:"actions toolbar text-center"},n))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.PureComponent),E(t.default=n,"propTypes",{className:a.default.string,defaultTodo:a.default.object,onRequestClose:a.default.func}),E(n,"defaultProps",{className:null,defaultTodo:null,onRequestClose:null})},68196:(e,t,n)=>{"use strict";(n=n(67294))&&n.__esModule},90756:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmbed=function(){return p},t.sendEmbedMessage=h,t=n(64393);var r=n(78717),o=n(13347),a=n(40910),i=(c=n(65286))&&c.__esModule?c:{default:c};function l(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c,f=(0,t.getSearchParam)("origin"),d=(0,t.getSearchParam)("embedId"),p=f&&d&&window.parent!==window;function h(e){if(p){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];try{window.parent.postMessage([d,e,n],f)}catch(t){if(console.info('Cannot send embed message for type "'.concat(e,'"'),n),Array.isArray(n))return void window.parent.postMessage([d,e,JSON.parse(JSON.stringify(n))],f);console.error('Cannot send embed message for type "'.concat(e,'"'),n)}}}p&&(window.webEmbed={origin:f,embedId:d,postMessage:h},window.addEventListener("message",(function(e){if(Array.isArray(e.data)){e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),3!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e)||u(e,3)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.data);var t=e[0],n=e[1],a=e[2];if(d===t)switch(n){case"executeCommand":r.executeCommand.apply(void 0,l(a));break;case"executeCommandLine":r.executeCommandLine.apply(void 0,l(a));break;case"requestLogin":i.default.emit.apply(i.default,["requestLogin"].concat(l(a)));break;case"logout":(0,o.logout)();break;default:console.info('Unknown message type "'.concat(n,'" with params'),a)}}}),!1),h("start"),(c=(0,t.getSearchParam)("embedCss"))&&((t=doc.createElement("style")).appendChild(doc.createTextNode(c)),document.body.appendChild(t)),(0,a.onRoutePathChange)((function(e,t){h("routeChange",e,t)}),!1),DEBUG&&(n.g.$sendEmbedMessage=h))},40487:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=t},63886:function(e,t){!function(e){"use strict";function t(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function l(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))}function n(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var r=function(e){};function o(e){r(e)}var a=!0;(function(){(console.warn||console.log).apply(console,arguments)}).bind("[clipboard-polyfill]");var i,l,u,s,c="undefined"==typeof navigator?void 0:navigator,f=null==c?void 0:c.clipboard,d=null===(i=null==f?void 0:f.read)||void 0===i?void 0:i.bind(f),p=null===(l=null==f?void 0:f.readText)||void 0===l?void 0:l.bind(f),h=null===(u=null==f?void 0:f.write)||void 0===u?void 0:u.bind(f),m=null===(s=null==f?void 0:f.writeText)||void 0===s?void 0:s.bind(f),y="undefined"==typeof window?void 0:window,g=null==y?void 0:y.ClipboardItem,b=y;function v(){return"undefined"==typeof ClipboardEvent&&void 0!==b.clipboardData&&void 0!==b.clipboardData.setData}function w(){return t(this,void 0,void 0,(function(){var e;return n(this,(function(t){if(""===(e=b.clipboardData.getData("Text")))throw new Error("Empty clipboard or could not read plain text from clipboard");return[2,e]}))}))}var O=function(){this.success=!1};function S(e,t,n){for(var r in o("listener called"),e.success=!0,t){var a=t[r],i=n.clipboardData;i.setData(r,a),"text/plain"===r&&i.getData(r)!==a&&(o("setting text/plain failed"),e.success=!1)}n.preventDefault()}function _(e){var t=new O,n=S.bind(this,t,e);document.addEventListener("copy",n);try{document.execCommand("copy")}finally{document.removeEventListener("copy",n)}return t.success}function C(e,t){E(e);var n=_(t);return P(),n}function E(e){var t=document.getSelection();if(t){var n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}}function P(){var e=document.getSelection();e&&e.removeAllRanges()}function k(e){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){if(t="text/plain"in e,v()){if(!t)throw new Error("No `text/plain` value was specified.");if(r=e["text/plain"],b.clipboardData.setData("Text",r))return[2,!0];throw new Error("Copying failed, possibly because the user rejected it.")}var r;return _(e)?(o("regular execCopy worked"),[2,!0]):navigator.userAgent.indexOf("Edge")>-1?(o('UA "Edge" => assuming success'),[2,!0]):C(document.body,e)?(o("copyUsingTempSelection worked"),[2,!0]):function(e){var t=document.createElement("div");t.setAttribute("style","-webkit-user-select: text !important"),t.textContent="temporary element",document.body.appendChild(t);var n=C(t,e);return document.body.removeChild(t),n}(e)?(o("copyUsingTempElem worked"),[2,!0]):function(e){o("copyTextUsingDOM");var t=document.createElement("div");t.setAttribute("style","-webkit-user-select: text !important");var n=t;t.attachShadow&&(o("Using shadow DOM."),n=t.attachShadow({mode:"open"}));var r=document.createElement("span");r.innerText=e,n.appendChild(r),document.body.appendChild(t),E(r);var a=document.execCommand("copy");return P(),document.body.removeChild(t),a}(e["text/plain"])?(o("copyTextUsingDOM worked"),[2,!0]):[2,!1]}))}))}function j(){return t(this,void 0,void 0,(function(){return n(this,(function(e){if(p)return o("Using `navigator.clipboard.readText()`."),[2,p()];if(v())return o("Reading text using IE strategy."),[2,w()];throw new Error("Read is not supported in your browser.")}))}))}function x(e,t){for(var n=0,r=e;n<r.length;n++)if(-1!==r[n].types.indexOf(t))return!0;return!1}var M=function(){function e(e,t){var n;for(var r in void 0===t&&(t={}),this.types=Object.keys(e),this._items={},e){var o=e[r];this._items[r]="string"==typeof o?T(r,o):o}this.presentationStyle=null!==(n=null==t?void 0:t.presentationStyle)&&void 0!==n?n:"unspecified"}return e.prototype.getType=function(e){return t(this,void 0,void 0,(function(){return n(this,(function(t){return[2,this._items[e]]}))}))},e}();function T(e,t){return new Blob([t],{type:e})}function I(e){return t(this,void 0,void 0,(function(){return n(this,(function(t){return[2,new Promise((function(t,n){var r=new FileReader;r.addEventListener("load",(function(){var e=r.result;"string"==typeof e?t(e):n("could not convert blob to string")})),r.readAsText(e)}))]}))}))}function D(e){return t(this,void 0,void 0,(function(){var t,r,o,a,i,l,u;return n(this,(function(n){switch(n.label){case 0:t={},r=0,o=e.types,n.label=1;case 1:return r<o.length?(a=o[r],i=t,l=a,[4,e.getType(a)]):[3,4];case 2:i[l]=n.sent(),n.label=3;case 3:return r++,[3,1];case 4:return u={},e.presentationStyle&&(u.presentationStyle=e.presentationStyle),[2,new g(t,u)]}}))}))}function A(e){var t={};return t["text/plain"]=T(e,"text/plain"),new M(t)}function R(e,r){return t(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,e.getType(r)];case 1:return[4,I(t.sent())];case 2:return[2,t.sent()]}}))}))}function N(e){return t(this,void 0,void 0,(function(){var t,r,o,a,i,l;return n(this,(function(n){switch(n.label){case 0:t={},r=0,o=e.types,n.label=1;case 1:return r<o.length?(a=o[r],i=t,l=a,[4,R(e,a)]):[3,4];case 2:i[l]=n.sent(),n.label=3;case 3:return r++,[3,1];case 4:return[2,t]}}))}))}e.ClipboardItem=M,e.read=function(){return t(this,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:return d?(o("Using `navigator.clipboard.read()`."),[2,d()]):(e=A,[4,j()]);case 1:return[2,[e.apply(void 0,[t.sent()])]]}}))}))},e.readText=j,e.setDebugLog=function(e){r=e},e.suppressWarnings=function(){a=!1},e.write=function(e){return t(this,void 0,void 0,(function(){var t,r,i,l;return n(this,(function(n){switch(n.label){case 0:return h&&g?(o("Using `navigator.clipboard.write()`."),[4,Promise.all(e.map(D))]):[3,5];case 1:t=n.sent(),n.label=2;case 2:return n.trys.push([2,4,,5]),[4,h(t)];case 3:return[2,n.sent()];case 4:if(r=n.sent(),!x(e,"text/plain")&&!x(e,"text/html"))throw r;return[3,5];case 5:return i=x(e,"text/plain"),a&&!i&&o("clipboard.write() was called without a `text/plain` data type. On some platforms, this may result in an empty clipboard. Call suppressWarnings() to suppress this warning."),l=k,[4,N(e[0])];case 6:if(!l.apply(void 0,[n.sent()]))throw new Error("write() failed");return[2]}}))}))},e.writeText=function(e){return t(this,void 0,void 0,(function(){return n(this,(function(t){if(m)return o("Using `navigator.clipboard.writeText()`."),[2,m(e)];if(!k(function(e){var t={};return t["text/plain"]=e,t}(e)))throw new Error("writeText() failed");return[2]}))}))},Object.defineProperty(e,"__esModule",{value:!0})}(t)},57966:e=>{e.exports=function(){for(var e,t=0,n="";t<arguments.length;)(e=arguments[t++])&&(e=function e(t){var n,r,o="";if("string"==typeof t||"number"==typeof t)o+=t;else if("object"==typeof t)if(Array.isArray(t))for(n=0;n<t.length;n++)t[n]&&(r=e(t[n]))&&(o&&(o+=" "),o+=r);else for(n in t)t[n]&&(o&&(o+=" "),o+=n);return o}(e))&&(n&&(n+=" "),n+=e);return n}},74247:function(e,t){var n;void 0!==(t="function"==typeof(n=function(){var e=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function t(e){var t=e.replace(/^v/,"").replace(/\+.*$/,""),n=function(e,t){return-1===e.indexOf("-")?e.length:e.indexOf("-")}(t),r=t.substring(0,n).split(".");return r.push(t.substring(n+1)),r}function n(e){var t=parseInt(e,10);return isNaN(t)?e:t}function r(t){if("string"!=typeof t)throw new TypeError("Invalid argument expected string");var n=t.match(e);if(!n)throw new Error("Invalid argument not valid semver ('"+t+"' received)");return n.shift(),n}function o(e,t){var[r,o]=function(e,t){return typeof e!=typeof t?[String(e),String(t)]:[e,t]}(n(e),n(t));return r>o?1:r<o?-1:0}function a(e,o){[e,o].forEach(r);for(var a=t(e),i=t(o),l=0;l<Math.max(a.length-1,i.length-1);l++){var u=parseInt(a[l]||0,10),s=parseInt(i[l]||0,10);if(u>s)return 1;if(s>u)return-1}var c=a[a.length-1],f=i[i.length-1];if(c&&f){var d=c.split(".").map(n),p=f.split(".").map(n);for(l=0;l<Math.max(d.length,p.length);l++){if(void 0===d[l]||"string"==typeof p[l]&&"number"==typeof d[l])return-1;if(void 0===p[l]||"string"==typeof d[l]&&"number"==typeof p[l])return 1;if(d[l]>p[l])return 1;if(p[l]>d[l])return-1}}else if(c||f)return c?-1:1;return 0}var i=[">",">=","=","<","<="],l={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};function u(e){if("string"!=typeof e)throw new TypeError("Invalid operator type, expected string but got "+typeof e);if(-1===i.indexOf(e))throw new TypeError("Invalid operator, expected one of "+i.join("|"))}return a.validate=function(t){return"string"==typeof t&&e.test(t)},a.compare=function(e,t,n){u(n);var r=a(e,t);return l[n].indexOf(r)>-1},a.satisfies=function(e,t){var n=t.match(/^([<>=~^]+)/),i=n?n[1]:"=";if("^"!==i&&"~"!==i)return a.compare(e,t,i);var[l,u,s]=r(e),[c,f,d]=r(t);return 0===o(l,c)&&("^"===i?function(e,t){for(var n=0;n<Math.max(e.length,t.length);n++){var r=o(e[n]||0,t[n]||0);if(0!==r)return r}return 0}([u,s],[f,d])>=0:0===o(u,f)&&o(s,d)>=0)},a})?n.apply(t,[]):n)&&(e.exports=t)},33129:function(e){e.exports=function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u="undefined"!=typeof window&&void 0!==window.document,s=u?window:{},c=!(!u||!s.document.documentElement)&&"ontouchstart"in s.document.documentElement,f=!!u&&"PointerEvent"in s,d="cropper",p="all",h="crop",m="move",y="zoom",g="e",b="w",v="s",w="n",O="ne",S="nw",_="se",C="sw",E="".concat(d,"-crop"),P="".concat(d,"-disabled"),k="".concat(d,"-hidden"),j="".concat(d,"-hide"),x="".concat(d,"-invisible"),M="".concat(d,"-modal"),T="".concat(d,"-move"),I="".concat(d,"Action"),D="".concat(d,"Preview"),A="crop",R="move",N="none",B="crop",L="cropend",F="cropmove",U="cropstart",z="dblclick",W=f?"pointerdown":c?"touchstart":"mousedown",H=f?"pointermove":c?"touchmove":"mousemove",V=f?"pointerup pointercancel":c?"touchend touchcancel":"mouseup",G="ready",q="resize",$="wheel",K="zoom",Y="image/jpeg",J=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,X=/^data:/,Q=/^data:image\/jpeg;base64,/,Z=/^img|canvas$/i,ee={viewMode:0,dragMode:A,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},te=Number.isNaN||s.isNaN;function ne(e){return"number"==typeof e&&!te(e)}var re=function(e){return e>0&&e<1/0};function oe(e){return void 0===e}function ae(e){return"object"===n(e)&&null!==e}var ie=Object.prototype.hasOwnProperty;function le(e){if(!ae(e))return!1;try{var t=e.constructor,n=t.prototype;return t&&n&&ie.call(n,"isPrototypeOf")}catch(e){return!1}}function ue(e){return"function"==typeof e}var se=Array.prototype.slice;function ce(e){return Array.from?Array.from(e):se.call(e)}function fe(e,t){return e&&ue(t)&&(Array.isArray(e)||ne(e.length)?ce(e).forEach((function(n,r){t.call(e,n,r,e)})):ae(e)&&Object.keys(e).forEach((function(n){t.call(e,e[n],n,e)}))),e}var de=Object.assign||function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ae(e)&&n.length>0&&n.forEach((function(t){ae(t)&&Object.keys(t).forEach((function(n){e[n]=t[n]}))})),e},pe=/\.\d*(?:0|9){12}\d*$/;function he(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return pe.test(e)?Math.round(e*t)/t:e}var me=/^width|height|left|top|marginLeft|marginTop$/;function ye(e,t){var n=e.style;fe(t,(function(e,t){me.test(t)&&ne(e)&&(e="".concat(e,"px")),n[t]=e}))}function ge(e,t){if(t)if(ne(e.length))fe(e,(function(e){ge(e,t)}));else if(e.classList)e.classList.add(t);else{var n=e.className.trim();n?n.indexOf(t)<0&&(e.className="".concat(n," ").concat(t)):e.className=t}}function be(e,t){t&&(ne(e.length)?fe(e,(function(e){be(e,t)})):e.classList?e.classList.remove(t):e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,"")))}function ve(e,t,n){t&&(ne(e.length)?fe(e,(function(e){ve(e,t,n)})):n?ge(e,t):be(e,t))}var we=/([a-z\d])([A-Z])/g;function Oe(e){return e.replace(we,"$1-$2").toLowerCase()}function Se(e,t){return ae(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(Oe(t)))}function _e(e,t,n){ae(n)?e[t]=n:e.dataset?e.dataset[t]=n:e.setAttribute("data-".concat(Oe(t)),n)}var Ce=/\s\s*/,Ee=function(){var e=!1;if(u){var t=!1,n=function(){},r=Object.defineProperty({},"once",{get:function(){return e=!0,t},set:function(e){t=e}});s.addEventListener("test",n,r),s.removeEventListener("test",n,r)}return e}();function Pe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n;t.trim().split(Ce).forEach((function(t){if(!Ee){var a=e.listeners;a&&a[t]&&a[t][n]&&(o=a[t][n],delete a[t][n],0===Object.keys(a[t]).length&&delete a[t],0===Object.keys(a).length&&delete e.listeners)}e.removeEventListener(t,o,r)}))}function ke(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n;t.trim().split(Ce).forEach((function(t){if(r.once&&!Ee){var a=e.listeners,i=void 0===a?{}:a;o=function(){delete i[t][n],e.removeEventListener(t,o,r);for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];n.apply(e,l)},i[t]||(i[t]={}),i[t][n]&&e.removeEventListener(t,i[t][n],r),i[t][n]=o,e.listeners=i}e.addEventListener(t,o,r)}))}function je(e,t,n){var r;return ue(Event)&&ue(CustomEvent)?r=new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0}):(r=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(r)}function xe(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var Me=s.location,Te=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Ie(e){var t=e.match(Te);return null!==t&&(t[1]!==Me.protocol||t[2]!==Me.hostname||t[3]!==Me.port)}function De(e){var t="timestamp=".concat((new Date).getTime());return e+(-1===e.indexOf("?")?"?":"&")+t}function Ae(e){var t=e.rotate,n=e.scaleX,r=e.scaleY,o=e.translateX,a=e.translateY,i=[];ne(o)&&0!==o&&i.push("translateX(".concat(o,"px)")),ne(a)&&0!==a&&i.push("translateY(".concat(a,"px)")),ne(t)&&0!==t&&i.push("rotate(".concat(t,"deg)")),ne(n)&&1!==n&&i.push("scaleX(".concat(n,")")),ne(r)&&1!==r&&i.push("scaleY(".concat(r,")"));var l=i.length?i.join(" "):"none";return{WebkitTransform:l,msTransform:l,transform:l}}function Re(e,n){var r=e.pageX,o=e.pageY,a={endX:r,endY:o};return n?a:t({startX:r,startY:o},a)}function Ne(e){var t=e.aspectRatio,n=e.height,r=e.width,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",a=re(r),i=re(n);if(a&&i){var l=n*t;"contain"===o&&l>r||"cover"===o&&l<r?n=r/t:r=n*t}else a?n=r/t:i&&(r=n*t);return{width:r,height:n}}function Be(e,t,n,r){var o=t.aspectRatio,a=t.naturalWidth,l=t.naturalHeight,u=t.rotate,s=void 0===u?0:u,c=t.scaleX,f=void 0===c?1:c,d=t.scaleY,p=void 0===d?1:d,h=n.aspectRatio,m=n.naturalWidth,y=n.naturalHeight,g=r.fillColor,b=void 0===g?"transparent":g,v=r.imageSmoothingEnabled,w=void 0===v||v,O=r.imageSmoothingQuality,S=void 0===O?"low":O,_=r.maxWidth,C=void 0===_?1/0:_,E=r.maxHeight,P=void 0===E?1/0:E,k=r.minWidth,j=void 0===k?0:k,x=r.minHeight,M=void 0===x?0:x,T=document.createElement("canvas"),I=T.getContext("2d"),D=Ne({aspectRatio:h,width:C,height:P}),A=Ne({aspectRatio:h,width:j,height:M},"cover"),R=Math.min(D.width,Math.max(A.width,m)),N=Math.min(D.height,Math.max(A.height,y)),B=Ne({aspectRatio:o,width:C,height:P}),L=Ne({aspectRatio:o,width:j,height:M},"cover"),F=Math.min(B.width,Math.max(L.width,a)),U=Math.min(B.height,Math.max(L.height,l)),z=[-F/2,-U/2,F,U];return T.width=he(R),T.height=he(N),I.fillStyle=b,I.fillRect(0,0,R,N),I.save(),I.translate(R/2,N/2),I.rotate(s*Math.PI/180),I.scale(f,p),I.imageSmoothingEnabled=w,I.imageSmoothingQuality=S,I.drawImage.apply(I,[e].concat(i(z.map((function(e){return Math.floor(he(e))}))))),I.restore(),T}var Le=String.fromCharCode,Fe=/^data:.*,/;var Ue={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,t=this.options,n=this.container,r=this.cropper,o=Number(t.minContainerWidth),a=Number(t.minContainerHeight);ge(r,k),be(e,k);var i={width:Math.max(n.offsetWidth,o>=0?o:200),height:Math.max(n.offsetHeight,a>=0?a:100)};this.containerData=i,ye(r,{width:i.width,height:i.height}),ge(e,k),be(r,k)},initCanvas:function(){var e=this.containerData,t=this.imageData,n=this.options.viewMode,r=Math.abs(t.rotate)%180==90,o=r?t.naturalHeight:t.naturalWidth,a=r?t.naturalWidth:t.naturalHeight,i=o/a,l=e.width,u=e.height;e.height*i>e.width?3===n?l=e.height*i:u=e.width/i:3===n?u=e.width/i:l=e.height*i;var s={aspectRatio:i,naturalWidth:o,naturalHeight:a,width:l,height:u};this.canvasData=s,this.limited=1===n||2===n,this.limitCanvas(!0,!0),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),s.left=(e.width-s.width)/2,s.top=(e.height-s.height)/2,s.oldLeft=s.left,s.oldTop=s.top,this.initialCanvasData=de({},s)},limitCanvas:function(e,t){var n=this.options,r=this.containerData,o=this.canvasData,a=this.cropBoxData,i=n.viewMode,l=o.aspectRatio,u=this.cropped&&a;if(e){var s=Number(n.minCanvasWidth)||0,c=Number(n.minCanvasHeight)||0;i>1?(s=Math.max(s,r.width),c=Math.max(c,r.height),3===i&&(c*l>s?s=c*l:c=s/l)):i>0&&(s?s=Math.max(s,u?a.width:0):c?c=Math.max(c,u?a.height:0):u&&(s=a.width,(c=a.height)*l>s?s=c*l:c=s/l));var f=Ne({aspectRatio:l,width:s,height:c});s=f.width,c=f.height,o.minWidth=s,o.minHeight=c,o.maxWidth=1/0,o.maxHeight=1/0}if(t)if(i>(u?0:1)){var d=r.width-o.width,p=r.height-o.height;o.minLeft=Math.min(0,d),o.minTop=Math.min(0,p),o.maxLeft=Math.max(0,d),o.maxTop=Math.max(0,p),u&&this.limited&&(o.minLeft=Math.min(a.left,a.left+(a.width-o.width)),o.minTop=Math.min(a.top,a.top+(a.height-o.height)),o.maxLeft=a.left,o.maxTop=a.top,2===i&&(o.width>=r.width&&(o.minLeft=Math.min(0,d),o.maxLeft=Math.max(0,d)),o.height>=r.height&&(o.minTop=Math.min(0,p),o.maxTop=Math.max(0,p))))}else o.minLeft=-o.width,o.minTop=-o.height,o.maxLeft=r.width,o.maxTop=r.height},renderCanvas:function(e,t){var n=this.canvasData,r=this.imageData;if(t){var o=function(e){var t=e.width,n=e.height,r=e.degree;if(90==(r=Math.abs(r)%180))return{width:n,height:t};var o=r%90*Math.PI/180,a=Math.sin(o),i=Math.cos(o),l=t*i+n*a,u=t*a+n*i;return r>90?{width:u,height:l}:{width:l,height:u}}({width:r.naturalWidth*Math.abs(r.scaleX||1),height:r.naturalHeight*Math.abs(r.scaleY||1),degree:r.rotate||0}),a=o.width,i=o.height,l=n.width*(a/n.naturalWidth),u=n.height*(i/n.naturalHeight);n.left-=(l-n.width)/2,n.top-=(u-n.height)/2,n.width=l,n.height=u,n.aspectRatio=a/i,n.naturalWidth=a,n.naturalHeight=i,this.limitCanvas(!0,!1)}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,ye(this.canvas,de({width:n.width,height:n.height},Ae({translateX:n.left,translateY:n.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var t=this.canvasData,n=this.imageData,r=n.naturalWidth*(t.width/t.naturalWidth),o=n.naturalHeight*(t.height/t.naturalHeight);de(n,{width:r,height:o,left:(t.width-r)/2,top:(t.height-o)/2}),ye(this.image,de({width:n.width,height:n.height},Ae(de({translateX:n.left,translateY:n.top},n)))),e&&this.output()},initCropBox:function(){var e=this.options,t=this.canvasData,n=e.aspectRatio||e.initialAspectRatio,r=Number(e.autoCropArea)||.8,o={width:t.width,height:t.height};n&&(t.height*n>t.width?o.height=o.width/n:o.width=o.height*n),this.cropBoxData=o,this.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*r),o.height=Math.max(o.minHeight,o.height*r),o.left=t.left+(t.width-o.width)/2,o.top=t.top+(t.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCropBoxData=de({},o)},limitCropBox:function(e,t){var n=this.options,r=this.containerData,o=this.canvasData,a=this.cropBoxData,i=this.limited,l=n.aspectRatio;if(e){var u=Number(n.minCropBoxWidth)||0,s=Number(n.minCropBoxHeight)||0,c=i?Math.min(r.width,o.width,o.width+o.left,r.width-o.left):r.width,f=i?Math.min(r.height,o.height,o.height+o.top,r.height-o.top):r.height;u=Math.min(u,r.width),s=Math.min(s,r.height),l&&(u&&s?s*l>u?s=u/l:u=s*l:u?s=u/l:s&&(u=s*l),f*l>c?f=c/l:c=f*l),a.minWidth=Math.min(u,c),a.minHeight=Math.min(s,f),a.maxWidth=c,a.maxHeight=f}t&&(i?(a.minLeft=Math.max(0,o.left),a.minTop=Math.max(0,o.top),a.maxLeft=Math.min(r.width,o.left+o.width)-a.width,a.maxTop=Math.min(r.height,o.top+o.height)-a.height):(a.minLeft=0,a.minTop=0,a.maxLeft=r.width-a.width,a.maxTop=r.height-a.height))},renderCropBox:function(){var e=this.options,t=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,e.movable&&e.cropBoxMovable&&_e(this.face,I,n.width>=t.width&&n.height>=t.height?m:p),ye(this.cropBox,de({width:n.width,height:n.height},Ae({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),je(this.element,B,this.getData())}},ze={initPreview:function(){var e=this.element,t=this.crossOrigin,n=this.options.preview,r=t?this.crossOriginUrl:this.url,o=e.alt||"The image to preview",a=document.createElement("img");if(t&&(a.crossOrigin=t),a.src=r,a.alt=o,this.viewBox.appendChild(a),this.viewBoxImage=a,n){var i=n;"string"==typeof n?i=e.ownerDocument.querySelectorAll(n):n.querySelector&&(i=[n]),this.previews=i,fe(i,(function(e){var n=document.createElement("img");_e(e,D,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),t&&(n.crossOrigin=t),n.src=r,n.alt=o,n.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',e.innerHTML="",e.appendChild(n)}))}},resetPreview:function(){fe(this.previews,(function(e){var t=Se(e,D);ye(e,{width:t.width,height:t.height}),e.innerHTML=t.html,function(e,t){if(ae(e[t]))try{delete e[t]}catch(n){e[t]=void 0}else if(e.dataset)try{delete e.dataset[t]}catch(n){e.dataset[t]=void 0}else e.removeAttribute("data-".concat(Oe(t)))}(e,D)}))},preview:function(){var e=this.imageData,t=this.canvasData,n=this.cropBoxData,r=n.width,o=n.height,a=e.width,i=e.height,l=n.left-t.left-e.left,u=n.top-t.top-e.top;this.cropped&&!this.disabled&&(ye(this.viewBoxImage,de({width:a,height:i},Ae(de({translateX:-l,translateY:-u},e)))),fe(this.previews,(function(t){var n=Se(t,D),s=n.width,c=n.height,f=s,d=c,p=1;r&&(d=o*(p=s/r)),o&&d>c&&(f=r*(p=c/o),d=c),ye(t,{width:f,height:d}),ye(t.getElementsByTagName("img")[0],de({width:a*p,height:i*p},Ae(de({translateX:-l*p,translateY:-u*p},e))))})))}},We={bind:function(){var e=this.element,t=this.options,n=this.cropper;ue(t.cropstart)&&ke(e,U,t.cropstart),ue(t.cropmove)&&ke(e,F,t.cropmove),ue(t.cropend)&&ke(e,L,t.cropend),ue(t.crop)&&ke(e,B,t.crop),ue(t.zoom)&&ke(e,K,t.zoom),ke(n,W,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&ke(n,$,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&ke(n,z,this.onDblclick=this.dblclick.bind(this)),ke(e.ownerDocument,H,this.onCropMove=this.cropMove.bind(this)),ke(e.ownerDocument,V,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&ke(window,q,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,t=this.options,n=this.cropper;ue(t.cropstart)&&Pe(e,U,t.cropstart),ue(t.cropmove)&&Pe(e,F,t.cropmove),ue(t.cropend)&&Pe(e,L,t.cropend),ue(t.crop)&&Pe(e,B,t.crop),ue(t.zoom)&&Pe(e,K,t.zoom),Pe(n,W,this.onCropStart),t.zoomable&&t.zoomOnWheel&&Pe(n,$,this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&Pe(n,z,this.onDblclick),Pe(e.ownerDocument,H,this.onCropMove),Pe(e.ownerDocument,V,this.onCropEnd),t.responsive&&Pe(window,q,this.onResize)}},He={resize:function(){if(!this.disabled){var e,t,n=this.options,r=this.container,o=this.containerData,a=r.offsetWidth/o.width,i=r.offsetHeight/o.height,l=Math.abs(a-1)>Math.abs(i-1)?a:i;1!==l&&(n.restore&&(e=this.getCanvasData(),t=this.getCropBoxData()),this.render(),n.restore&&(this.setCanvasData(fe(e,(function(t,n){e[n]=t*l}))),this.setCropBoxData(fe(t,(function(e,n){t[n]=e*l})))))}},dblclick:function(){this.disabled||this.options.dragMode===N||this.setDragMode(function(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}(this.dragBox,E)?R:A)},wheel:function(e){var t=this,n=Number(this.options.wheelZoomRatio)||.1,r=1;this.disabled||(e.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){t.wheeling=!1}),50),e.deltaY?r=e.deltaY>0?1:-1:e.wheelDelta?r=-e.wheelDelta/120:e.detail&&(r=e.detail>0?1:-1),this.zoom(-r*n,e)))},cropStart:function(e){var t=e.buttons,n=e.button;if(!(this.disabled||("mousedown"===e.type||"pointerdown"===e.type&&"mouse"===e.pointerType)&&(ne(t)&&1!==t||ne(n)&&0!==n||e.ctrlKey))){var r,o=this.options,a=this.pointers;e.changedTouches?fe(e.changedTouches,(function(e){a[e.identifier]=Re(e)})):a[e.pointerId||0]=Re(e),r=Object.keys(a).length>1&&o.zoomable&&o.zoomOnTouch?y:Se(e.target,I),J.test(r)&&!1!==je(this.element,U,{originalEvent:e,action:r})&&(e.preventDefault(),this.action=r,this.cropping=!1,r===h&&(this.cropping=!0,ge(this.dragBox,M)))}},cropMove:function(e){var t=this.action;if(!this.disabled&&t){var n=this.pointers;e.preventDefault(),!1!==je(this.element,F,{originalEvent:e,action:t})&&(e.changedTouches?fe(e.changedTouches,(function(e){de(n[e.identifier]||{},Re(e,!0))})):de(n[e.pointerId||0]||{},Re(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var t=this.action,n=this.pointers;e.changedTouches?fe(e.changedTouches,(function(e){delete n[e.identifier]})):delete n[e.pointerId||0],t&&(e.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,ve(this.dragBox,M,this.cropped&&this.options.modal)),je(this.element,L,{originalEvent:e,action:t}))}}},Ve={change:function(e){var n,r=this.options,o=this.canvasData,a=this.containerData,i=this.cropBoxData,l=this.pointers,u=this.action,s=r.aspectRatio,c=i.left,f=i.top,d=i.width,E=i.height,P=c+d,j=f+E,x=0,M=0,T=a.width,I=a.height,D=!0;!s&&e.shiftKey&&(s=d&&E?d/E:1),this.limited&&(x=i.minLeft,M=i.minTop,T=x+Math.min(a.width,o.width,o.left+o.width),I=M+Math.min(a.height,o.height,o.top+o.height));var A=l[Object.keys(l)[0]],R={x:A.endX-A.startX,y:A.endY-A.startY},N=function(e){switch(e){case g:P+R.x>T&&(R.x=T-P);break;case b:c+R.x<x&&(R.x=x-c);break;case w:f+R.y<M&&(R.y=M-f);break;case v:j+R.y>I&&(R.y=I-j)}};switch(u){case p:c+=R.x,f+=R.y;break;case g:if(R.x>=0&&(P>=T||s&&(f<=M||j>=I))){D=!1;break}N(g),(d+=R.x)<0&&(u=b,c-=d=-d),s&&(E=d/s,f+=(i.height-E)/2);break;case w:if(R.y<=0&&(f<=M||s&&(c<=x||P>=T))){D=!1;break}N(w),E-=R.y,f+=R.y,E<0&&(u=v,f-=E=-E),s&&(d=E*s,c+=(i.width-d)/2);break;case b:if(R.x<=0&&(c<=x||s&&(f<=M||j>=I))){D=!1;break}N(b),d-=R.x,c+=R.x,d<0&&(u=g,c-=d=-d),s&&(E=d/s,f+=(i.height-E)/2);break;case v:if(R.y>=0&&(j>=I||s&&(c<=x||P>=T))){D=!1;break}N(v),(E+=R.y)<0&&(u=w,f-=E=-E),s&&(d=E*s,c+=(i.width-d)/2);break;case O:if(s){if(R.y<=0&&(f<=M||P>=T)){D=!1;break}N(w),E-=R.y,f+=R.y,d=E*s}else N(w),N(g),R.x>=0?P<T?d+=R.x:R.y<=0&&f<=M&&(D=!1):d+=R.x,R.y<=0?f>M&&(E-=R.y,f+=R.y):(E-=R.y,f+=R.y);d<0&&E<0?(u=C,f-=E=-E,c-=d=-d):d<0?(u=S,c-=d=-d):E<0&&(u=_,f-=E=-E);break;case S:if(s){if(R.y<=0&&(f<=M||c<=x)){D=!1;break}N(w),E-=R.y,f+=R.y,d=E*s,c+=i.width-d}else N(w),N(b),R.x<=0?c>x?(d-=R.x,c+=R.x):R.y<=0&&f<=M&&(D=!1):(d-=R.x,c+=R.x),R.y<=0?f>M&&(E-=R.y,f+=R.y):(E-=R.y,f+=R.y);d<0&&E<0?(u=_,f-=E=-E,c-=d=-d):d<0?(u=O,c-=d=-d):E<0&&(u=C,f-=E=-E);break;case C:if(s){if(R.x<=0&&(c<=x||j>=I)){D=!1;break}N(b),d-=R.x,c+=R.x,E=d/s}else N(v),N(b),R.x<=0?c>x?(d-=R.x,c+=R.x):R.y>=0&&j>=I&&(D=!1):(d-=R.x,c+=R.x),R.y>=0?j<I&&(E+=R.y):E+=R.y;d<0&&E<0?(u=O,f-=E=-E,c-=d=-d):d<0?(u=_,c-=d=-d):E<0&&(u=S,f-=E=-E);break;case _:if(s){if(R.x>=0&&(P>=T||j>=I)){D=!1;break}N(g),E=(d+=R.x)/s}else N(v),N(g),R.x>=0?P<T?d+=R.x:R.y>=0&&j>=I&&(D=!1):d+=R.x,R.y>=0?j<I&&(E+=R.y):E+=R.y;d<0&&E<0?(u=S,f-=E=-E,c-=d=-d):d<0?(u=C,c-=d=-d):E<0&&(u=O,f-=E=-E);break;case m:this.move(R.x,R.y),D=!1;break;case y:this.zoom(function(e){var n=t({},e),r=0;return fe(e,(function(e,t){delete n[t],fe(n,(function(t){var n=Math.abs(e.startX-t.startX),o=Math.abs(e.startY-t.startY),a=Math.abs(e.endX-t.endX),i=Math.abs(e.endY-t.endY),l=Math.sqrt(n*n+o*o),u=(Math.sqrt(a*a+i*i)-l)/l;Math.abs(u)>Math.abs(r)&&(r=u)}))})),r}(l),e),D=!1;break;case h:if(!R.x||!R.y){D=!1;break}n=xe(this.cropper),c=A.startX-n.left,f=A.startY-n.top,d=i.minWidth,E=i.minHeight,R.x>0?u=R.y>0?_:O:R.x<0&&(c-=d,u=R.y>0?C:S),R.y<0&&(f-=E),this.cropped||(be(this.cropBox,k),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}D&&(i.width=d,i.height=E,i.left=c,i.top=f,this.action=u,this.renderCropBox()),fe(l,(function(e){e.startX=e.endX,e.startY=e.endY}))}},Ge={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&ge(this.dragBox,M),be(this.cropBox,k),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=de({},this.initialImageData),this.canvasData=de({},this.initialCanvasData),this.cropBoxData=de({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(de(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),be(this.dragBox,M),ge(this.cropBox,k)),this},replace:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&e&&(this.isImg&&(this.element.src=e),t?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,fe(this.previews,(function(t){t.getElementsByTagName("img")[0].src=e})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,be(this.cropper,P)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,ge(this.cropper,P)),this},destroy:function(){var e=this.element;return e[d]?(e[d]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.canvasData,r=n.left,o=n.top;return this.moveTo(oe(e)?e:r+Number(e),oe(t)?t:o+Number(t))},moveTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.canvasData,r=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(ne(e)&&(n.left=e,r=!0),ne(t)&&(n.top=t,r=!0),r&&this.renderCanvas(!0)),this},zoom:function(e,t){var n=this.canvasData;return e=(e=Number(e))<0?1/(1-e):1+e,this.zoomTo(n.width*e/n.naturalWidth,null,t)},zoomTo:function(e,t,n){var r=this.options,o=this.canvasData,a=o.width,i=o.height,l=o.naturalWidth,u=o.naturalHeight;if((e=Number(e))>=0&&this.ready&&!this.disabled&&r.zoomable){var s=l*e,c=u*e;if(!1===je(this.element,K,{ratio:e,oldRatio:a/l,originalEvent:n}))return this;if(n){var f=this.pointers,d=xe(this.cropper),p=f&&Object.keys(f).length?function(e){var t=0,n=0,r=0;return fe(e,(function(e){var o=e.startX,a=e.startY;t+=o,n+=a,r+=1})),{pageX:t/=r,pageY:n/=r}}(f):{pageX:n.pageX,pageY:n.pageY};o.left-=(s-a)*((p.pageX-d.left-o.left)/a),o.top-=(c-i)*((p.pageY-d.top-o.top)/i)}else le(t)&&ne(t.x)&&ne(t.y)?(o.left-=(s-a)*((t.x-o.left)/a),o.top-=(c-i)*((t.y-o.top)/i)):(o.left-=(s-a)/2,o.top-=(c-i)/2);o.width=s,o.height=c,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return ne(e=Number(e))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,ne(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(ne(t)?t:1,e)},scale:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.imageData,r=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(ne(e)&&(n.scaleX=e,r=!0),ne(t)&&(n.scaleY=t,r=!0),r&&this.renderCanvas(!0,!0)),this},getData:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.options,r=this.imageData,o=this.canvasData,a=this.cropBoxData;if(this.ready&&this.cropped){e={x:a.left-o.left,y:a.top-o.top,width:a.width,height:a.height};var i=r.width/r.naturalWidth;if(fe(e,(function(t,n){e[n]=t/i})),t){var l=Math.round(e.y+e.height),u=Math.round(e.x+e.width);e.x=Math.round(e.x),e.y=Math.round(e.y),e.width=u-e.x,e.height=l-e.y}}else e={x:0,y:0,width:0,height:0};return n.rotatable&&(e.rotate=r.rotate||0),n.scalable&&(e.scaleX=r.scaleX||1,e.scaleY=r.scaleY||1),e},setData:function(e){var t=this.options,n=this.imageData,r=this.canvasData,o={};if(this.ready&&!this.disabled&&le(e)){var a=!1;t.rotatable&&ne(e.rotate)&&e.rotate!==n.rotate&&(n.rotate=e.rotate,a=!0),t.scalable&&(ne(e.scaleX)&&e.scaleX!==n.scaleX&&(n.scaleX=e.scaleX,a=!0),ne(e.scaleY)&&e.scaleY!==n.scaleY&&(n.scaleY=e.scaleY,a=!0)),a&&this.renderCanvas(!0,!0);var i=n.width/n.naturalWidth;ne(e.x)&&(o.left=e.x*i+r.left),ne(e.y)&&(o.top=e.y*i+r.top),ne(e.width)&&(o.width=e.width*i),ne(e.height)&&(o.height=e.height*i),this.setCropBoxData(o)}return this},getContainerData:function(){return this.ready?de({},this.containerData):{}},getImageData:function(){return this.sized?de({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,t={};return this.ready&&fe(["left","top","width","height","naturalWidth","naturalHeight"],(function(n){t[n]=e[n]})),t},setCanvasData:function(e){var t=this.canvasData,n=t.aspectRatio;return this.ready&&!this.disabled&&le(e)&&(ne(e.left)&&(t.left=e.left),ne(e.top)&&(t.top=e.top),ne(e.width)?(t.width=e.width,t.height=e.width/n):ne(e.height)&&(t.height=e.height,t.width=e.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var e,t=this.cropBoxData;return this.ready&&this.cropped&&(e={left:t.left,top:t.top,width:t.width,height:t.height}),e||{}},setCropBoxData:function(e){var t,n,r=this.cropBoxData,o=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&le(e)&&(ne(e.left)&&(r.left=e.left),ne(e.top)&&(r.top=e.top),ne(e.width)&&e.width!==r.width&&(t=!0,r.width=e.width),ne(e.height)&&e.height!==r.height&&(n=!0,r.height=e.height),o&&(t?r.height=r.width/o:n&&(r.width=r.height*o)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t=this.canvasData,n=Be(this.image,this.imageData,t,e);if(!this.cropped)return n;var r=this.getData(),o=r.x,a=r.y,l=r.width,u=r.height,s=n.width/Math.floor(t.naturalWidth);1!==s&&(o*=s,a*=s,l*=s,u*=s);var c=l/u,f=Ne({aspectRatio:c,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),d=Ne({aspectRatio:c,width:e.minWidth||0,height:e.minHeight||0},"cover"),p=Ne({aspectRatio:c,width:e.width||(1!==s?n.width:l),height:e.height||(1!==s?n.height:u)}),h=p.width,m=p.height;h=Math.min(f.width,Math.max(d.width,h)),m=Math.min(f.height,Math.max(d.height,m));var y=document.createElement("canvas"),g=y.getContext("2d");y.width=he(h),y.height=he(m),g.fillStyle=e.fillColor||"transparent",g.fillRect(0,0,h,m);var b=e.imageSmoothingEnabled,v=void 0===b||b,w=e.imageSmoothingQuality;g.imageSmoothingEnabled=v,w&&(g.imageSmoothingQuality=w);var O,S,_,C,E,P,k=n.width,j=n.height,x=o,M=a;x<=-l||x>k?(x=0,O=0,_=0,E=0):x<=0?(_=-x,x=0,E=O=Math.min(k,l+x)):x<=k&&(_=0,E=O=Math.min(l,k-x)),O<=0||M<=-u||M>j?(M=0,S=0,C=0,P=0):M<=0?(C=-M,M=0,P=S=Math.min(j,u+M)):M<=j&&(C=0,P=S=Math.min(u,j-M));var T=[x,M,O,S];if(E>0&&P>0){var I=h/l;T.push(_*I,C*I,E*I,P*I)}return g.drawImage.apply(g,[n].concat(i(T.map((function(e){return Math.floor(he(e))}))))),y},setAspectRatio:function(e){var t=this.options;return this.disabled||oe(e)||(t.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var t=this.options,n=this.dragBox,r=this.face;if(this.ready&&!this.disabled){var o=e===A,a=t.movable&&e===R;e=o||a?e:N,t.dragMode=e,_e(n,I,e),ve(n,E,o),ve(n,T,a),t.cropBoxMovable||(_e(r,I,e),ve(r,E,o),ve(r,T,a))}return this}},qe=s.Cropper,$e=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r(this,e),!t||!Z.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=de({},ee,le(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(e,[{key:"init",value:function(){var e,t=this.element,n=t.tagName.toLowerCase();if(!t[d]){if(t[d]=this,"img"===n){if(this.isImg=!0,e=t.getAttribute("src")||"",this.originalUrl=e,!e)return;e=t.src}else"canvas"===n&&window.HTMLCanvasElement&&(e=t.toDataURL());this.load(e)}}},{key:"load",value:function(e){var t=this;if(e){this.url=e,this.imageData={};var n=this.element,r=this.options;if(r.rotatable||r.scalable||(r.checkOrientation=!1),r.checkOrientation&&window.ArrayBuffer)if(X.test(e))Q.test(e)?this.read(function(e){var t=e.replace(Fe,""),n=atob(t),r=new ArrayBuffer(n.length),o=new Uint8Array(r);return fe(o,(function(e,t){o[t]=n.charCodeAt(t)})),r}(e)):this.clone();else{var o=new XMLHttpRequest,a=this.clone.bind(this);this.reloading=!0,this.xhr=o,o.onabort=a,o.onerror=a,o.ontimeout=a,o.onprogress=function(){o.getResponseHeader("content-type")!==Y&&o.abort()},o.onload=function(){t.read(o.response)},o.onloadend=function(){t.reloading=!1,t.xhr=null},r.checkCrossOrigin&&Ie(e)&&n.crossOrigin&&(e=De(e)),o.open("GET",e,!0),o.responseType="arraybuffer",o.withCredentials="use-credentials"===n.crossOrigin,o.send()}else this.clone()}}},{key:"read",value:function(e){var t=this.options,n=this.imageData,r=function(e){var t,n=new DataView(e);try{var r,o,a;if(255===n.getUint8(0)&&216===n.getUint8(1))for(var i=n.byteLength,l=2;l+1<i;){if(255===n.getUint8(l)&&225===n.getUint8(l+1)){o=l;break}l+=1}if(o){var u=o+10;if("Exif"===function(e,t,n){var r="";n+=t;for(var o=t;o<n;o+=1)r+=Le(e.getUint8(o));return r}(n,o+4,4)){var s=n.getUint16(u);if(((r=18761===s)||19789===s)&&42===n.getUint16(u+2,r)){var c=n.getUint32(u+4,r);c>=8&&(a=u+c)}}}if(a){var f,d,p=n.getUint16(a,r);for(d=0;d<p;d+=1)if(f=a+12*d+2,274===n.getUint16(f,r)){f+=8,t=n.getUint16(f,r),n.setUint16(f,1,r);break}}}catch(e){t=1}return t}(e),o=0,a=1,i=1;if(r>1){this.url=function(e,t){for(var n=[],r=new Uint8Array(e);r.length>0;)n.push(Le.apply(null,ce(r.subarray(0,8192)))),r=r.subarray(8192);return"data:".concat("image/jpeg",";base64,").concat(btoa(n.join("")))}(e);var l=function(e){var t=0,n=1,r=1;switch(e){case 2:n=-1;break;case 3:t=-180;break;case 4:r=-1;break;case 5:t=90,r=-1;break;case 6:t=90;break;case 7:t=90,n=-1;break;case 8:t=-90}return{rotate:t,scaleX:n,scaleY:r}}(r);o=l.rotate,a=l.scaleX,i=l.scaleY}t.rotatable&&(n.rotate=o),t.scalable&&(n.scaleX=a,n.scaleY=i),this.clone()}},{key:"clone",value:function(){var e=this.element,t=this.url,n=e.crossOrigin,r=t;this.options.checkCrossOrigin&&Ie(t)&&(n||(n="anonymous"),r=De(t)),this.crossOrigin=n,this.crossOriginUrl=r;var o=document.createElement("img");n&&(o.crossOrigin=n),o.src=r||t,o.alt=e.alt||"The image to crop",this.image=o,o.onload=this.start.bind(this),o.onerror=this.stop.bind(this),ge(o,j),e.parentNode.insertBefore(o,e.nextSibling)}},{key:"start",value:function(){var e=this,t=this.image;t.onload=null,t.onerror=null,this.sizing=!0;var n=s.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(s.navigator.userAgent),r=function(t,n){de(e.imageData,{naturalWidth:t,naturalHeight:n,aspectRatio:t/n}),e.initialImageData=de({},e.imageData),e.sizing=!1,e.sized=!0,e.build()};if(!t.naturalWidth||n){var o=document.createElement("img"),a=document.body||document.documentElement;this.sizingImage=o,o.onload=function(){r(o.width,o.height),n||a.removeChild(o)},o.src=t.src,n||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",a.appendChild(o))}else r(t.naturalWidth,t.naturalHeight)}},{key:"stop",value:function(){var e=this.image;e.onload=null,e.onerror=null,e.parentNode.removeChild(e),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var e=this.element,t=this.options,n=this.image,r=e.parentNode,o=document.createElement("div");o.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var a=o.querySelector(".".concat(d,"-container")),i=a.querySelector(".".concat(d,"-canvas")),l=a.querySelector(".".concat(d,"-drag-box")),u=a.querySelector(".".concat(d,"-crop-box")),s=u.querySelector(".".concat(d,"-face"));this.container=r,this.cropper=a,this.canvas=i,this.dragBox=l,this.cropBox=u,this.viewBox=a.querySelector(".".concat(d,"-view-box")),this.face=s,i.appendChild(n),ge(e,k),r.insertBefore(a,e.nextSibling),this.isImg||be(n,j),this.initPreview(),this.bind(),t.initialAspectRatio=Math.max(0,t.initialAspectRatio)||NaN,t.aspectRatio=Math.max(0,t.aspectRatio)||NaN,t.viewMode=Math.max(0,Math.min(3,Math.round(t.viewMode)))||0,ge(u,k),t.guides||ge(u.getElementsByClassName("".concat(d,"-dashed")),k),t.center||ge(u.getElementsByClassName("".concat(d,"-center")),k),t.background&&ge(a,"".concat(d,"-bg")),t.highlight||ge(s,x),t.cropBoxMovable&&(ge(s,T),_e(s,I,p)),t.cropBoxResizable||(ge(u.getElementsByClassName("".concat(d,"-line")),k),ge(u.getElementsByClassName("".concat(d,"-point")),k)),this.render(),this.ready=!0,this.setDragMode(t.dragMode),t.autoCrop&&this.crop(),this.setData(t.data),ue(t.ready)&&ke(e,G,t.ready,{once:!0}),je(e,G)}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),be(this.element,k))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=qe,e}},{key:"setDefaults",value:function(e){de(ee,le(e)&&e)}}]),e}();return de($e.prototype,Ue,ze,We,He,Ve,Ge),$e}()},71012:e=>{var t,n;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];0<e;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var o=e[r]<<16|e[r+1]<<8|e[r+2],a=0;a<4;a++)8*r+6*a<=8*e.length?n.push(t.charAt(o>>>6*(3-a)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,o=0;r<e.length;o=++r%4)0!=o&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*o+8)-1)<<2*o|t.indexOf(e.charAt(r))>>>6-2*o);return n}},e.exports=n},5790:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a}),t=n(8081),t=n.n(t);var r=n(23645),o=(r=n.n(r),n(61667));o=n.n(o),n=new URL(n(8738),n.b),r=r()(t()),t=o()(n),r.push([e.id,'/*!\n * Cropper.js v1.5.12\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2021-06-12T08:00:11.623Z\n */.cropper-container{direction:ltr;font-size:0;line-height:0;position:relative;-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.cropper-container img{display:block;height:100%;image-orientation:0deg;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;width:100%}.cropper-canvas,.cropper-crop-box,.cropper-drag-box,.cropper-modal,.cropper-wrap-box{bottom:0;left:0;position:absolute;right:0;top:0}.cropper-canvas,.cropper-wrap-box{overflow:hidden}.cropper-drag-box{background-color:#fff;opacity:0}.cropper-modal{background-color:#000;opacity:.5}.cropper-view-box{display:block;height:100%;outline:1px solid #39f;outline-color:rgba(51,153,255,.75);overflow:hidden;width:100%}.cropper-dashed{border:0 dashed #eee;display:block;opacity:.5;position:absolute}.cropper-dashed.dashed-h{border-bottom-width:1px;border-top-width:1px;height:33.33333%;left:0;top:33.33333%;width:100%}.cropper-dashed.dashed-v{border-left-width:1px;border-right-width:1px;height:100%;left:33.33333%;top:0;width:33.33333%}.cropper-center{display:block;height:0;left:50%;opacity:.75;position:absolute;top:50%;width:0}.cropper-center:after,.cropper-center:before{background-color:#eee;content:" ";display:block;position:absolute}.cropper-center:before{height:1px;left:-3px;top:0;width:7px}.cropper-center:after{height:7px;left:0;top:-3px;width:1px}.cropper-face,.cropper-line,.cropper-point{display:block;height:100%;opacity:.1;position:absolute;width:100%}.cropper-face{background-color:#fff;left:0;top:0}.cropper-line{background-color:#39f}.cropper-line.line-e{cursor:ew-resize;right:-3px;top:0;width:5px}.cropper-line.line-n{cursor:ns-resize;height:5px;left:0;top:-3px}.cropper-line.line-w{cursor:ew-resize;left:-3px;top:0;width:5px}.cropper-line.line-s{bottom:-3px;cursor:ns-resize;height:5px;left:0}.cropper-point{background-color:#39f;height:5px;opacity:.75;width:5px}.cropper-point.point-e{cursor:ew-resize;margin-top:-3px;right:-3px;top:50%}.cropper-point.point-n{cursor:ns-resize;left:50%;margin-left:-3px;top:-3px}.cropper-point.point-w{cursor:ew-resize;left:-3px;margin-top:-3px;top:50%}.cropper-point.point-s{bottom:-3px;cursor:s-resize;left:50%;margin-left:-3px}.cropper-point.point-ne{cursor:nesw-resize;right:-3px;top:-3px}.cropper-point.point-nw{cursor:nwse-resize;left:-3px;top:-3px}.cropper-point.point-sw{bottom:-3px;cursor:nesw-resize;left:-3px}.cropper-point.point-se{bottom:-3px;cursor:nwse-resize;height:20px;opacity:1;right:-3px;width:20px}@media (min-width:768px){.cropper-point.point-se{height:15px;width:15px}}@media (min-width:992px){.cropper-point.point-se{height:10px;width:10px}}@media (min-width:1200px){.cropper-point.point-se{height:5px;opacity:.75;width:5px}}.cropper-point.point-se:before{background-color:#39f;bottom:-50%;content:" ";display:block;height:200%;opacity:0;position:absolute;right:-50%;width:200%}.cropper-invisible{opacity:0}.cropper-bg{background-image:url('+t+")}.cropper-hide{display:block;height:0;position:absolute;width:0}.cropper-hidden{display:none!important}.cropper-move{cursor:move}.cropper-crop{cursor:crosshair}.cropper-disabled .cropper-drag-box,.cropper-disabled .cropper-face,.cropper-disabled .cropper-line,.cropper-disabled .cropper-point{cursor:not-allowed}",""]);const a=r},88383:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o}),t=n(8081),t=n.n(t);var r=n(23645);(n=n.n(r)()(t())).push([e.id,".pointer-events-none{pointer-events:none}.visible{visibility:visible}.invisible{visibility:hidden}.collapse{visibility:collapse}.static{position:static}.absolute{position:absolute}.relative{position:relative}.inset-y-0{bottom:0;top:0}.right-0{right:0}.top-0{top:0}.top-1{top:.25rem}.top-2{top:.5rem}.z-50{z-index:50}.m-0{margin:0}.block{display:block}.\\!block{display:block!important}.inline-block{display:inline-block}.flex{display:flex}.table{display:table}.contents{display:contents}.list-item{display:list-item}.hidden{display:none}.h-\\[26px\\]{height:26px}.max-h-\\[240px\\]{max-height:240px}.min-h-\\[32px\\]{min-height:32px}.w-\\[480px\\]{width:480px}.w-\\[26px\\]{width:26px}.min-w-\\[320px\\]{min-width:320px}.flex-none{flex:none}.flex-auto{flex:1 1 auto}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-pointer{cursor:pointer}.resize{resize:both}.list-none{list-style-type:none}.flex-row{flex-direction:row}.flex-wrap{flex-wrap:wrap}.content-start{align-content:flex-start}.items-center{align-items:center}.justify-center{justify-content:center}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.text-ellipsis{text-overflow:ellipsis}.break-all{word-break:break-all}.rounded{border-radius:.25rem}.rounded-lg{border-radius:.5rem}.rounded-sm{border-radius:.125rem}.border{border-width:1px}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.py-2{padding-bottom:.5rem}.pt-2,.py-2{padding-top:.5rem}.pr-10{padding-right:2.5rem}.pr-2{padding-right:.5rem}.pl-0{padding-left:0}.pl-2{padding-left:.5rem}.text-center{text-align:center}.text-right{text-align:right}.text-xs{font-size:.75rem;line-height:1rem}.leading-8{line-height:2rem}.text-black{color:rgb(0 0 0/var(--tw-text-opacity))}.text-black,.text-white{--tw-text-opacity:1}.text-white{color:rgb(255 255 255/var(--tw-text-opacity))}.shadow{--tw-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px -1px rgba(0,0,0,.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color),0 1px 2px -1px var(--tw-shadow-color)}.shadow,.shadow-xl{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 8px 10px -6px rgba(0,0,0,.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color),0 8px 10px -6px var(--tw-shadow-color)}.blur{--tw-blur:blur(8px)}.blur,.grayscale{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.grayscale{--tw-grayscale:grayscale(100%)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.hover\\:bg-\\[\\#f5f5f5\\]:hover{--tw-bg-opacity:1;background-color:rgb(245 245 245/var(--tw-bg-opacity))}",""]);const o=n},23645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(0<t[5].length?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var l=0;l<this.length;l++){var u=this[l][0];null!=u&&(i[u]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);r&&i[c[0]]||(void 0!==a&&(void 0!==c[5]&&(c[1]="@layer".concat(0<c[5].length?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=a),n&&(c[2]&&(c[1]="@media ".concat(c[2]," {").concat(c[1],"}")),c[2]=n),o&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=o):c[4]="".concat(o)),t.push(c))}},t}},61667:e=>{"use strict";e.exports=function(e,t){return t=t||{},e&&(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},8081:e=>{"use strict";e.exports=function(e){return e[1]}},55052:(e,t,n)=>{const r=n(74584);e.exports=e=>{for(const t of r)if(t.regex.test(e))return t.encoding;return null}},39293:e=>{e.exports=e=>{for(let t=0;t<e.length;t++)if(""===e[t])return!1;return!0}},68581:(e,t,n)=>{const r=n(23409),o=n(34799),a=n(74584);e.exports=(e,t)=>{e.languageArr=r(e,t.encoding),t.language=e.languageArr.reduce(((e,t)=>e.count>t.count?e:t)).name,e.pos=e.languageArr.findIndex((e=>e.name===t.language)),t.encoding||(t.encoding=e.languageArr[e.pos].encoding);var n=o(e,t);return t.confidence.encoding||(t.confidence.encoding=n),t.confidence.language=n,e.languageArr[e.pos].count||(t.language=null,t.confidence.language=null,a.some((e=>e.encoding===t.encoding))||(t.encoding=null,t.confidence.encoding=null)),t}},34799:e=>{e.exports=(e,t)=>{var n=new RegExp(/\d|\n|\s|\-|\.|\,|\:|\;|\?|\!|\<|\>|\[|\]|\{|\}|\&|\=|\|/,"g");n=e.content.replace(n,"").length;const r=e.languageArr;e=e.pos;var o=r.reduce(((e,n)=>e.name!==t.language&&(n.name===t.language||e.count>=n.count)?e:n));o=r[e].count/(o.count+r[e].count),n=r[e].count/n;let a=null,i=null;return i="UTF-8"===t.encoding||"UTF-16LE"===t.encoding?(a=r[e].utfFrequency?.8*r[e].utfFrequency.low:null,r[e].utfFrequency?(r[e].utfFrequency.low+r[e].utfFrequency.high)/2:null):(a=r[e].isoFrequency?.8*r[e].isoFrequency.low:null,r[e].isoFrequency?(r[e].isoFrequency.low+r[e].isoFrequency.high)/2:null),a&&i?n>=i?1:n>a?(e=i-a,Number((o+(n-a)/e*(1-o)).toFixed(2))):Number((o*(n/a)).toFixed(2)):null}},23409:(e,t,n)=>{const r=n(93942);e.exports=(e,t)=>{const n=[],o=(r.forEach((e=>{const t={};Object.keys(e).forEach((n=>{"count"!==n?t[n]=e[n]:t.count=0})),n.push(t)})),t?"utfRegex":"isoRegex");return n.forEach((t=>{var n;t[o]&&(n=e.content.match(t[o]))&&(t.count=n.length)})),n}},74584:e=>{e.exports=[{encoding:"UTF-EBCDIC",regex:new RegExp("221 115 102 115")},{encoding:"GB-18030",regex:new RegExp("132 49 149 51")},{encoding:"UTF-32LE",regex:new RegExp("255 254 0 0")},{encoding:"UTF-32BE",regex:new RegExp("0 0 254 255")},{encoding:"UTF-8",regex:new RegExp("239 187 191")},{encoding:"UTF-7",regex:new RegExp("43 47 118")},{encoding:"UTF-1",regex:new RegExp("247 100 76")},{encoding:"SCSU",regex:new RegExp("14 254 255")},{encoding:"BOCU-1",regex:new RegExp("251 238 40")},{encoding:"UTF-16BE",regex:new RegExp("254 255")},{encoding:"UTF-16LE",regex:new RegExp("255 254")}]},93942:e=>{var t="gi",n={czech:new RegExp(/jsem|jsi/,t),hungarian:new RegExp(/\snem\s/,t),slovak:new RegExp(/poriadku|myslm|\ssme\s/,t),slovenian:new RegExp(/\skaj\s|lahko|zdaj/,t),albanian:new RegExp(/nuk/,t),english:new RegExp(/ the /,t),french:new RegExp(/c'est/,t),portuguese:new RegExp(/ no /,t),spanish:new RegExp(/estaba|\smuy\s|siempre|ahora/,t),german:new RegExp(/\sdas\s/,t),italian:new RegExp(/\sche\s/,t),danish:new RegExp(/hvad|noget/,t),norwegian:new RegExp(/deg/,t),swedish:new RegExp(/ jag /,t),dutch:new RegExp(/ het /,t),finnish:new RegExp(/hn/,t),"serbo-croatian":new RegExp(/ sam | kako /,t),estonian:new RegExp(/\sseda\s|\spole\s|midagi/,t),icelandic:new RegExp(/a/,t),"malay-indonesian":new RegExp(/tidak/,t),turkish:new RegExp(/ bir /,t),lithuanian:new RegExp(/taip|\stai\s/,t),bengali:new RegExp(//,t),hindi:new RegExp(//,t),urdu:new RegExp(//,t),vietnamese:new RegExp(/ khng /,t)},r={polish:{low:.004355,high:.005102},czech:{low:.004433,high:.007324},hungarian:{low:.004994,high:.005183},romanian:{low:.003319,high:.00419},slovak:{low:.001736,high:.002557},slovenian:{low:.004111,high:.004959},albanian:{low:.003773,high:.007313},ukrainian:{low:.002933,high:.005389},english:{low:.004679,high:.00758},french:{low:.003016,high:.004825},portuguese:{low:.003406,high:.005032},spanish:{low:.002348,high:.002881},german:{low:.004044,high:.004391},italian:{low:.003889,high:.005175},danish:{low:.00363,high:.004189},norwegian:{low:.00241,high:.003918},swedish:{low:.004916,high:.007221},dutch:{low:.003501,high:.00415},finnish:{low:.003308,high:.005135},"serbo-croatian":{low:.002568,high:.005182},estonian:{low:.002892,high:.003963},icelandic:{low:.004366,high:.004366},"malay-indonesian":{low:.002825,high:.003932},greek:{low:.00344,high:.004862},turkish:{low:.002915,high:.004588},hebrew:{low:.003663,high:.004666},lithuanian:{low:.003277,high:.003768},bengali:{low:.003155,high:.005236},hindi:{low:.004159,high:.006478},urdu:{low:.004118,high:.005851},vietnamese:{low:.003387,high:.005191}};e.exports=[{name:"polish",count:0,utfRegex:new RegExp(/si/,t),isoRegex:new RegExp(/si/,t),encoding:"CP1250",utfFrequency:r.polish,isoFrequency:r.polish},{name:"czech",count:0,utfRegex:n.czech,isoRegex:n.czech,encoding:"CP1250",utfFrequency:r.czech,isoFrequency:r.czech},{name:"hungarian",count:0,utfRegex:n.hungarian,isoRegex:n.hungarian,encoding:"CP1250",utfFrequency:r.hungarian,isoFrequency:r.hungarian},{name:"romanian",count:0,utfRegex:new RegExp(/sunt|eti/,t),isoRegex:new RegExp(/sunt|eti/,t),encoding:"CP1250",utfFrequency:r.romanian,isoFrequency:r.romanian},{name:"slovak",count:0,utfRegex:n.slovak,isoRegex:n.slovak,encoding:"CP1250",utfFrequency:r.slovak,isoFrequency:r.slovak},{name:"slovenian",count:0,utfRegex:n.slovenian,isoRegex:n.slovenian,encoding:"CP1250",utfFrequency:r.slovenian,isoFrequency:r.slovenian},{name:"albanian",count:0,utfRegex:n.albanian,isoRegex:n.albanian,encoding:"CP1250",utfFrequency:r.albanian,isoFrequency:r.albanian},{name:"russian",count:0,utfRegex:new RegExp(//,t),isoRegex:new RegExp(//,t),encoding:"CP1251",utfFrequency:{low:.004965,high:.005341},isoFrequency:{low:.003884,high:.003986}},{name:"ukrainian",count:0,utfRegex:new RegExp(/|/,t),isoRegex:new RegExp(/|/,t),encoding:"CP1251",utfFrequency:r.ukrainian,isoFrequency:r.ukrainian},{name:"bulgarian",count:0,utfRegex:new RegExp(/|/,t),isoRegex:new RegExp(/||ao/,t),encoding:"CP1251",utfFrequency:{low:.005225,high:.005628},isoFrequency:{low:.002767,high:.004951}},{name:"english",count:0,utfRegex:n.english,isoRegex:n.english,encoding:"CP1252",utfFrequency:r.english,isoFrequency:r.english},{name:"french",count:0,utfRegex:n.french,isoRegex:n.french,encoding:"CP1252",utfFrequency:r.french,isoFrequency:r.french},{name:"portuguese",count:0,utfRegex:n.portuguese,isoRegex:n.portuguese,encoding:"CP1252",utfFrequency:r.portuguese,isoFrequency:r.portuguese},{name:"spanish",count:0,utfRegex:n.spanish,isoRegex:n.spanish,encoding:"CP1252",utfFrequency:r.spanish,isoFrequency:r.spanish},{name:"german",count:0,utfRegex:n.german,isoRegex:n.german,encoding:"CP1252",utfFrequency:r.german,isoFrequency:r.german},{name:"italian",count:0,utfRegex:n.italian,isoRegex:n.italian,encoding:"CP1252",utfFrequency:r.italian,isoFrequency:r.italian},{name:"danish",count:0,utfRegex:n.danish,isoRegex:n.danish,encoding:"CP1252",utfFrequency:r.danish,isoFrequency:r.danish},{name:"norwegian",count:0,utfRegex:n.norwegian,isoRegex:n.norwegian,encoding:"CP1252",utfFrequency:r.norwegian,isoFrequency:r.norwegian},{name:"swedish",count:0,utfRegex:n.swedish,isoRegex:n.swedish,encoding:"CP1252",utfFrequency:r.swedish,isoFrequency:r.swedish},{name:"dutch",count:0,utfRegex:n.dutch,isoRegex:n.dutch,encoding:"CP1252",utfFrequency:r.dutch,isoFrequency:r.dutch},{name:"finnish",count:0,utfRegex:n.finnish,isoRegex:n.finnish,encoding:"CP1252",utfFrequency:r.finnish,isoFrequency:r.finnish},{name:"serbo-croatian",count:0,utfRegex:n["serbo-croatian"],isoRegex:n["serbo-croatian"],encoding:"CP1252",utfFrequency:r["serbo-croatian"],isoFrequency:r["serbo-croatian"]},{name:"estonian",count:0,utfRegex:n.estonian,isoRegex:n.estonian,encoding:"CP1252",utfFrequency:r.estonian,isoFrequency:r.estonian},{name:"icelandic",count:0,utfRegex:n.icelandic,isoRegex:n.icelandic,encoding:"CP1252",utfFrequency:r.icelandic,isoFrequency:r.icelandic},{name:"malay-indonesian",count:0,utfRegex:n["malay-indonesian"],isoRegex:n["malay-indonesian"],encoding:"CP1252",utfFrequency:r["malay-indonesian"],isoFrequency:r["malay-indonesian"]},{name:"greek",count:0,utfRegex:new RegExp(//,t),isoRegex:new RegExp(//,t),encoding:"CP1253",utfFrequency:r.greek,isoFrequency:r.greek},{name:"turkish",count:0,utfRegex:n.turkish,isoRegex:n.turkish,encoding:"CP1254",utfFrequency:r.turkish,isoFrequency:r.turkish},{name:"hebrew",count:0,utfRegex:new RegExp(//,t),isoRegex:new RegExp(//,t),encoding:"CP1255",utfFrequency:r.hebrew,isoFrequency:r.hebrew},{name:"arabic",count:0,utfRegex:new RegExp(//,t),isoRegex:new RegExp(//,t),encoding:"CP1256",utfFrequency:{low:.003522,high:.004348},isoFrequency:{low:.003773,high:.005559}},{name:"farsi-persian",count:0,utfRegex:new RegExp(//,t),isoRegex:new RegExp(//,t),encoding:"CP1256",utfFrequency:{low:.002761,high:.004856},isoFrequency:{low:.00301,high:.006646}},{name:"lithuanian",count:0,utfRegex:n.lithuanian,isoRegex:n.lithuanian,encoding:"CP1257",utfFrequency:r.lithuanian,isoFrequency:r.lithuanian},{name:"chinese-simplified",count:0,utfRegex:new RegExp(//,t),isoRegex:new RegExp(/||/,t),encoding:"GB18030",utfFrequency:{low:.009567,high:.011502},isoFrequency:{low:.003137,high:.005009}},{name:"chinese-traditional",count:0,utfRegex:new RegExp(//,t),isoRegex:new RegExp(/b/,t),encoding:"BIG5",utfFrequency:{low:.012484,high:.014964},isoFrequency:{low:.005063,high:.005822}},{name:"japanese",count:0,utfRegex:new RegExp(//,t),isoRegex:new RegExp(/|/,t),encoding:"Shift-JIS",utfFrequency:{low:.004257,high:.006585},isoFrequency:{low:.004286,high:.004653}},{name:"korean",count:0,utfRegex:new RegExp(//,t),isoRegex:new RegExp(/||/,t),encoding:"EUC-KR",utfFrequency:{low:.01091,high:.01367},isoFrequency:{low:.004118,high:.004961}},{name:"thai",count:0,utfRegex:new RegExp(/|/,t),isoRegex:new RegExp(/|/,t),encoding:"TIS-620",utfFrequency:{low:.003194,high:.003468},isoFrequency:{low:.002091,high:.002303}},{name:"bengali",count:0,utfRegex:n.bengali,isoRegex:n.bengali,utfFrequency:r.bengali,isoFrequency:r.bengali},{name:"hindi",count:0,utfRegex:n.hindi,isoRegex:n.hindi,utfFrequency:r.hindi,isoFrequency:r.hindi},{name:"urdu",count:0,utfRegex:n.urdu,isoRegex:n.urdu,utfFrequency:r.urdu,isoFrequency:r.urdu},{name:"vietnamese",count:0,utfRegex:n.vietnamese,isoRegex:n.vietnamese,utfFrequency:r.vietnamese,isoFrequency:r.vietnamese}]},70182:(e,t,n)=>{const r=n(39293),o=n(68581),a=n(55052);e.exports=e=>new Promise(((t,n)=>{const i={encoding:null,language:null,confidence:{encoding:null,language:null}},l={},u=new FileReader;u.onload=()=>{var s=new Uint8Array(u.result).slice(0,4).join(" ");if(s=a(s)){i.encoding=s,i.confidence.encoding=1;const r=new FileReader;r.onload=()=>{l.content=r.result,t(o(l,i))},r.onerror=e=>{n(e)},r.readAsText(e,i.encoding)}else{const a=new FileReader;a.onload=()=>{var n=a.result,u=r(n);if(u&&(i.encoding="UTF-8",i.confidence.encoding=1),u)l.content=n,t(o(l,i));else{const n=new FileReader;n.onload=()=>{l.content=n.result,t(o(l,i))},n.readAsText(e,"ISO-8859-1")}},a.onerror=e=>{n(e)},a.readAsText(e,"UTF-8")}},u.onerror=e=>{n(e)},u.readAsArrayBuffer(e)}))},70045:(e,t)=>{"use strict";t.__esModule=!0,t.default=void 0;var n=!("undefined"==typeof window||!window.document||!window.document.createElement);t.default=n,e.exports=t.default},32317:(e,t,n)=>{"use strict";var r,o=n(95318),a=(t.__esModule=!0,t.default=function(e){return(!r&&0!==r||e)&&a.default&&((e=document.createElement("div")).style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),r=e.offsetWidth-e.clientWidth,document.body.removeChild(e)),r},o(n(70045)));e.exports=t.default},34021:e=>{var t={};function n(e){return e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]|[^\uD800-\uDFFF]/g)||[]}(e.exports=t).eastAsianWidth=function(e){var t=e.charCodeAt(0),n=(e=2==e.length?e.charCodeAt(1):0,t);return 55296<=t&&t<=56319&&56320<=e&&e<=57343&&(n=(t&=1023)<<10|(e&=1023),n+=65536),12288==n||65281<=n&&n<=65376||65504<=n&&n<=65510?"F":8361==n||65377<=n&&n<=65470||65474<=n&&n<=65479||65482<=n&&n<=65487||65490<=n&&n<=65495||65498<=n&&n<=65500||65512<=n&&n<=65518?"H":4352<=n&&n<=4447||4515<=n&&n<=4519||4602<=n&&n<=4607||9001<=n&&n<=9002||11904<=n&&n<=11929||11931<=n&&n<=12019||12032<=n&&n<=12245||12272<=n&&n<=12283||12289<=n&&n<=12350||12353<=n&&n<=12438||12441<=n&&n<=12543||12549<=n&&n<=12589||12593<=n&&n<=12686||12688<=n&&n<=12730||12736<=n&&n<=12771||12784<=n&&n<=12830||12832<=n&&n<=12871||12880<=n&&n<=13054||13056<=n&&n<=19903||19968<=n&&n<=42124||42128<=n&&n<=42182||43360<=n&&n<=43388||44032<=n&&n<=55203||55216<=n&&n<=55238||55243<=n&&n<=55291||63744<=n&&n<=64255||65040<=n&&n<=65049||65072<=n&&n<=65106||65108<=n&&n<=65126||65128<=n&&n<=65131||110592<=n&&n<=110593||127488<=n&&n<=127490||127504<=n&&n<=127546||127552<=n&&n<=127560||127568<=n&&n<=127569||131072<=n&&n<=194367||177984<=n&&n<=196605||196608<=n&&n<=262141?"W":32<=n&&n<=126||162<=n&&n<=163||165<=n&&n<=166||172==n||175==n||10214<=n&&n<=10221||10629<=n&&n<=10630?"Na":161==n||164==n||167<=n&&n<=168||170==n||173<=n&&n<=174||176<=n&&n<=180||182<=n&&n<=186||188<=n&&n<=191||198==n||208==n||215<=n&&n<=216||222<=n&&n<=225||230==n||232<=n&&n<=234||236<=n&&n<=237||240==n||242<=n&&n<=243||247<=n&&n<=250||252==n||254==n||257==n||273==n||275==n||283==n||294<=n&&n<=295||299==n||305<=n&&n<=307||312==n||319<=n&&n<=322||324==n||328<=n&&n<=331||333==n||338<=n&&n<=339||358<=n&&n<=359||363==n||462==n||464==n||466==n||468==n||470==n||472==n||474==n||476==n||593==n||609==n||708==n||711==n||713<=n&&n<=715||717==n||720==n||728<=n&&n<=731||733==n||735==n||768<=n&&n<=879||913<=n&&n<=929||931<=n&&n<=937||945<=n&&n<=961||963<=n&&n<=969||1025==n||1040<=n&&n<=1103||1105==n||8208==n||8211<=n&&n<=8214||8216<=n&&n<=8217||8220<=n&&n<=8221||8224<=n&&n<=8226||8228<=n&&n<=8231||8240==n||8242<=n&&n<=8243||8245==n||8251==n||8254==n||8308==n||8319==n||8321<=n&&n<=8324||8364==n||8451==n||8453==n||8457==n||8467==n||8470==n||8481<=n&&n<=8482||8486==n||8491==n||8531<=n&&n<=8532||8539<=n&&n<=8542||8544<=n&&n<=8555||8560<=n&&n<=8569||8585==n||8592<=n&&n<=8601||8632<=n&&n<=8633||8658==n||8660==n||8679==n||8704==n||8706<=n&&n<=8707||8711<=n&&n<=8712||8715==n||8719==n||8721==n||8725==n||8730==n||8733<=n&&n<=8736||8739==n||8741==n||8743<=n&&n<=8748||8750==n||8756<=n&&n<=8759||8764<=n&&n<=8765||8776==n||8780==n||8786==n||8800<=n&&n<=8801||8804<=n&&n<=8807||8810<=n&&n<=8811||8814<=n&&n<=8815||8834<=n&&n<=8835||8838<=n&&n<=8839||8853==n||8857==n||8869==n||8895==n||8978==n||9312<=n&&n<=9449||9451<=n&&n<=9547||9552<=n&&n<=9587||9600<=n&&n<=9615||9618<=n&&n<=9621||9632<=n&&n<=9633||9635<=n&&n<=9641||9650<=n&&n<=9651||9654<=n&&n<=9655||9660<=n&&n<=9661||9664<=n&&n<=9665||9670<=n&&n<=9672||9675==n||9678<=n&&n<=9681||9698<=n&&n<=9701||9711==n||9733<=n&&n<=9734||9737==n||9742<=n&&n<=9743||9748<=n&&n<=9749||9756==n||9758==n||9792==n||9794==n||9824<=n&&n<=9825||9827<=n&&n<=9829||9831<=n&&n<=9834||9836<=n&&n<=9837||9839==n||9886<=n&&n<=9887||9918<=n&&n<=9919||9924<=n&&n<=9933||9935<=n&&n<=9953||9955==n||9960<=n&&n<=9983||10045==n||10071==n||10102<=n&&n<=10111||11093<=n&&n<=11097||12872<=n&&n<=12879||57344<=n&&n<=63743||65024<=n&&n<=65039||65533==n||127232<=n&&n<=127242||127248<=n&&n<=127277||127280<=n&&n<=127337||127344<=n&&n<=127386||917760<=n&&n<=917999||983040<=n&&n<=1048573||1048576<=n&&n<=1114109?"A":"N"},t.characterLength=function(e){return"F"==(e=this.eastAsianWidth(e))||"W"==e||"A"==e?2:1},t.length=function(e){for(var t=n(e),r=0,o=0;o<t.length;o++)r+=this.characterLength(t[o]);return r},t.slice=function(e,r,o){textLen=t.length(e),o=o||1,(r=r||0)<0&&(r=textLen+r),o<0&&(o=textLen+o);for(var a="",i=0,l=n(e),u=0;u<l.length;u++){var s=l[u],c=t.length(s);if(r-(2==c?1:0)<=i){if(!(i+c<=o))break;a+=s}i+=c}return a}},51961:(e,t,n)=>{"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(67294),a=h(o),i=h(n(45697)),l=h(n(90143)),u=h(n(35277)),s=h(n(30998)),c=h(n(23493)),f=h(n(3315)),d=h(n(71603)),p=h(n(91922));function h(e){return e&&e.__esModule?e:{default:e}}n=function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function n(e,t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");var r=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.getActiveCategory=function(){return r._getActiveCategory()},r._setListRef=function(e){r.list=e},r._onScroll=(0,c.default)((function(e){e=e.scrollTop,(e=r._getActiveCategory(e))!==r.lastActiveCategory&&(r.lastActiveCategory=e,r.props.onActiveCategoryChange(e))}),100),r._getActiveCategory=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=r.props.rows;if(0===e)return 0===t.length?void 0:t[0].id;for(var n=0,o=0;o<e;)(o+=r._rowHeight({index:n}))<=e&&(n+=1);return t=r.props.rows[n],Array.isArray(t)?t[0].category:t.id},r._rowHeight=function(e){return e=e.index,e=r.props.rows[e],Array.isArray(e)?32:46},r._rowRenderer=function(e){var t=e.key,n=e.index,o=(e=e.style,r.props.rows[n]),i=r.props.onChange;if(Array.isArray(o))return a.default.createElement(d.default,{key:t,onChange:i,style:e,emojis:o});var l=o.category;return o=o.id,t={key:t,category:l,onChange:i,ref:r._setCategoryRef(o),style:e},0===n&&(i=(l=r.props).modifier,o=l.onModifierChange,t.headingDecoration=a.default.createElement(p.default,{active:i,onChange:o})),a.default.createElement(f.default,t)},r._setCategoryRef=function(e){return function(t){r.categories[e]=t}},r.jumpToCategory=function(e){var t=(0,s.default)(r.props.rows,(function(t){return t.id===e}));r.list.scrollToRow(t)},r.lastActiveCategory=null,r.categories={},r}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),function(e,t,n){t&&r(e.prototype,t)}(n,[{key:"componentDidUpdate",value:function(e){this.props.rows===e.rows&&this.props.modifier===e.modifier||this.list.recomputeRowHeights()}},{key:"render",value:function(){var e=this,t=this.props.rows.length;return a.default.createElement(l.default,{nonce:this.props.nonce},(function(n){var r=n.height;return n=n.width,a.default.createElement(u.default,{height:r,onScroll:e._onScroll,ref:e._setListRef,rowCount:t,rowHeight:e._rowHeight,rowRenderer:e._rowRenderer,scrollToAlignment:"start",tabIndex:null,width:n})}))}}]),n}(o.Component),n.propTypes={rows:i.default.arrayOf(i.default.oneOfType([i.default.shape({category:i.default.object.isRequired,id:i.default.string.isRequired}),i.default.arrayOf(i.default.object).isRequired])).isRequired,modifier:i.default.string.isRequired,onActiveCategoryChange:i.default.func.isRequired,onChange:i.default.func.isRequired,onModifierChange:i.default.func.isRequired},t.default=n},3315:(e,t,n)=>{"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(67294),a=u(o),i=u(n(45697)),l=u(n(1775));function u(e){return e&&e.__esModule?e:{default:e}}n=function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function n(){var e=this,t=n;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");if(e=this,t=(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments),e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),function(e,t,n){t&&r(e.prototype,t)}(n,[{key:"shouldComponentUpdate",value:function(e,t){return(0,l.default)(this,e,t)}},{key:"render",value:function(){var e=(n=this.props).category,t=n.headingDecoration,n=n.style;return a.default.createElement("div",{className:"emoji-category-header",style:n},a.default.createElement("h2",{className:"emoji-category-title"},e.title),a.default.createElement("div",{className:"emoji-category-heading-decoration"},t))}}]),n}(o.Component),n.propTypes={category:i.default.shape({title:i.default.string.isRequired}).isRequired,headingDecoration:i.default.node,onChange:i.default.func.isRequired,style:i.default.object},t.default=n},25133:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultCategories={people:{title:"People",emoji:"smile"},nature:{title:"Nature",emoji:"hamster"},food:{title:"Food & Drink",emoji:"pizza"},activity:{title:"Activity",emoji:"soccer"},travel:{title:"Travel & Places",emoji:"earth_americas"},objects:{title:"Objects",emoji:"bulb"},symbols:{title:"Symbols",emoji:"clock9"},flags:{title:"Flags",emoji:"flag_gb"}}},71603:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=n(67294),i=c(a),l=c(n(45697)),u=c(n(1775)),s=c(n(42367));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}n=function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function n(){var e,t=this,r=n;if(!(t instanceof r))throw new TypeError("Cannot call a class as a function");for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return(e=f(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(a))))._handleEmojiSelect=function(t,n){e.props.onChange(n)},f(e,e)}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),function(e,t,n){t&&o(e.prototype,t)}(n,[{key:"shouldComponentUpdate",value:function(e,t){return(0,u.default)(this,e,t)}},{key:"render",value:function(){var e=this,t=(n=this.props).emojis,n=n.style;return i.default.createElement("div",{className:"emoji-row",style:n},t.map((function(t){return i.default.createElement(s.default,r({},t,{ariaLabel:t.name,role:"option",key:t.unicode,onSelect:e._handleEmojiSelect}))})))}}]),n}(a.Component),n.propTypes={emojis:l.default.array.isRequired,onChange:l.default.func.isRequired,style:l.default.object.isRequired},t.default=n},42367:(e,t,n)=>{"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(67294),a=s(o),i=s(n(45697)),l=s(n(78718)),u=s(n(25396));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}n=function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function n(){var e,t=this,r=n;if(!(t instanceof r))throw new TypeError("Cannot call a class as a function");for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return(r=e=c(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(a))))._handleKeyUp=function(t){t.preventDefault(),"Enter"!==t.key&&" "!==t.key||e._handleClick(t)},e._handleClick=function(t){e.props.onSelect(t,(0,l.default)(e.props,"shortname","aliases","aliases_ascii","category","name","shortcode","unicode","unicode_alternates","keywords"))},c(e,r)}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),function(e,t,n){t&&r(e.prototype,t)}(n,[{key:"shouldComponentUpdate",value:function(e){return e.shortname!==this.props.shortname}},{key:"createMarkup",value:function(){return{__html:u.default.shortnameToImage(this.props.shortname)}}},{key:"render",value:function(){return a.default.createElement("div",{onKeyUp:this._handleKeyUp,onClick:this._handleClick,tabIndex:"0",className:"emoji","aria-label":this.props.ariaLabel,title:this.props.name,role:this.props.role,dangerouslySetInnerHTML:this.createMarkup()})}}]),n}(o.Component),n.propTypes={ariaLabel:i.default.string,name:i.default.string,onSelect:i.default.func.isRequired,shortname:i.default.string,title:i.default.string,role:i.default.string},t.default=n},33165:(e,t,n)=>{"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(67294),a=i(o);function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}n=i(n(45697)),o=function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function n(){var e,t=this,r=n;if(!(t instanceof r))throw new TypeError("Cannot call a class as a function");for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return(e=l(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(a))))._handleClick=function(t){e.props.onClick(t,e.props.type)},l(e,e)}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),function(e,t,n){t&&r(e.prototype,t)}(n,[{key:"render",value:function(){return a.default.createElement("a",{onClick:this._handleClick,className:this.props.active?"modifier active":"modifier",style:{background:this.props.hex},"aria-label":"Fitzpatrick type "+this.props.type})}}]),n}(o.Component),o.propTypes={onClick:n.default.func.isRequired,active:n.default.bool,type:n.default.string.isRequired,hex:n.default.string.isRequired},t.default=o},91922:(e,t,n)=>{"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(67294),a=s(o),i=s(n(45697)),l=s(n(35161)),u=s(n(33165));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}n=function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function n(){var e,t=this,r=n;if(!(t instanceof r))throw new TypeError("Cannot call a class as a function");for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return(e=c(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(a))))._handleModifierClick=function(t,n){e.props.onChange(n)},c(e,e)}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),function(e,t,n){t&&r(e.prototype,t)}(n,[{key:"render",value:function(){var e=this;return a.default.createElement("ol",{className:"modifiers"},(0,l.default)(this.props.modifiers,(function(t,n){return a.default.createElement("li",{key:n},a.default.createElement(u.default,{hex:t,type:n,active:e.props.active===n,onClick:e._handleModifierClick}))})))}}]),n}(o.Component),n.propTypes={onChange:i.default.func.isRequired,modifiers:i.default.object,active:i.default.string},n.defaultProps={active:0,modifiers:{0:"#FFDE5C",1:"#FFE1BB",2:"#FFD0A9",3:"#D7A579",4:"#B57D52",5:"#8B6858"}},t.default=n},98874:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=n(67294),i=b(a),l=b(n(45697)),u=b(n(25396)),s=b(n(58971)),c=b(n(66073)),f=b(n(35161)),d=b(n(57557)),p=b(n(53595)),h=b(n(42367)),m=b(n(51961)),y=b(n(55319)),g=b(n(56601));function b(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}n=n(25133),a=function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function n(){var e,t=this,r=n;if(!(t instanceof r))throw new TypeError("Cannot call a class as a function");for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return(r=e=v(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(a)))).state={modifier:s.default.get("emoji-modifier")||"0",category:!1,term:!0!==e.props.search?e.props.search:""},e.setFocus=function(t){"flags"===t.target.id&&e.categories[e.state.category].children[0].focus()},e._renderHeaderCategories=function(){return(0,f.default)(e.props.categories,(function(t,n){return i.default.createElement("li",{key:n,className:e.state.category===n?"active":void 0},i.default.createElement(h.default,{id:n,role:"menuitem",ariaLabel:n+" category",shortname:":"+t.emoji+":",onSelect:function(){e.categories.jumpToCategory(n)}}))}))},e._renderCategories=function(){var t=e.rowsSelector(e.props.categories,e.state.emojis,e.state.modifier,e.props.search,e.state.term);return i.default.createElement("div",{className:"emoji-categories-wrapper"},i.default.createElement(m.default,{nonce:e.props.nonce,ref:e._setCategoriesRef,rows:t,modifier:e.state.modifier,onActiveCategoryChange:e._onActiveCategoryChange,onChange:e.props.onChange,onModifierChange:e._onModifierChange}))},e._setCategoriesRef=function(t){e.categories=t},e._setSearchRef=function(t){e.search=t},e._onActiveCategoryChange=function(t){t!==e.state.category&&e.setState({category:t})},e._onModifierChange=function(t){e.setState({modifier:t}),s.default.set("emoji-modifier",t)},e._renderSearchInput=function(){return!0===e.props.search?i.default.createElement("div",{className:"emoji-search-wrapper"},i.default.createElement("input",{className:"emoji-search",type:"search",placeholder:e.props.searchPlaceholder,ref:e._setSearchRef,onChange:e._updateSearchTerm,autoFocus:!0})):null},e._updateSearchTerm=function(){e.setState({term:e.search.value})},v(e,r)}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),function(e,t,n){t&&o(e.prototype,t)}(n,[{key:"componentWillMount",value:function(){this.rowsSelector=(0,y.default)(),(0,c.default)(this.props.emojione,(function(e,t){u.default[t]=e})),this.setState({emojis:(0,g.default)(p.default)})}},{key:"componentDidMount",value:function(){this.setState({category:this.categories.getActiveCategory()})}},{key:"componentWillReceiveProps",value:function(e){this.props.search!==e.search&&this.setState({term:this.props.search})}},{key:"render",value:function(){var e=(0,d.default)(this.props,Object.keys(n.propTypes)),t="emoji-dialog";return!0===this.props.search&&(t+=" with-search"),this.props.className&&(t+=" "+this.props.className),i.default.createElement("div",r({className:t,role:"dialog"},e),i.default.createElement("header",{className:"emoji-dialog-header",role:"menu"},i.default.createElement("ul",{onBlur:this.setFocus},this._renderHeaderCategories())),this._renderSearchInput(),this._renderCategories())}}]),n}(a.Component),a.propTypes={emojione:l.default.shape({imageType:l.default.string,sprites:l.default.bool,imagePathSVGSprites:l.default.string}),search:l.default.oneOfType([l.default.bool,l.default.string]),searchPlaceholder:l.default.string,className:l.default.string,onChange:l.default.func.isRequired,categories:l.default.object},a.defaultProps={search:"",searchPlaceholder:"Search",categories:n.defaultCategories},t.default=a},56601:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={},n=Object.keys(e),r=!0,o=!1,a=void 0;try{for(var i,l=n[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var u,s=i.value,c=e[s];"modifier"!==c.category&&(t[c.category]||(t[c.category]={}),(u=s.match(/(.*?)_tone(.*?)$/))?(c.keywords.includes(u[1])||c.keywords.push(u[1]),t[c.category][u[1]]&&(t[c.category][u[1]][u[2]]=c)):(c.keywords.includes(s)||c.keywords.push(s),t[c.category][s]=[c]))}}catch(e){o=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw a}}return t}},55319:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=void 0,t=void 0,n=void 0,l=void 0,s=void 0,c=void 0;return function(f,d,p,h,m){function y(e){return O&&e[O]?e[O]:e[0]}function g(e){return C.test(e)}function b(e){return e.keywords.concat(e.name).some(g)}var v,w,O,S,_,C;return f===e&&d===t&&p===n&&h===l&&m===s||(v=f,w=d,O=p,S=h,_=m,C=new RegExp("^(?:.* +)*"+(0,r.default)(_),"i"),c=(0,a.default)(v,(function(e,t){var n=w[t]||{};return n=(0,i.default)(n).map(y),{category:e,emojis:n=S&&_?n.filter(b):n,id:t}})).filter((function(e){return 0<e.emojis.length})).map((function(e){var t=e.category,n=e.emojis;return[{category:t,id:e.id}].concat(u((0,o.default)(n,8)))})).reduce((function(e,t){return[].concat(u(e),u(t))}),[]),e=f,t=d,n=p,l=h,s=m),c}};var r=l(n(63150)),o=l(n(8400)),a=l(n(35161)),i=l(n(52628));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}},63150:e=>{"use strict";var t=/[|\\{}()[\]^$+*?.]/g;e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(t,"\\$&")}},70282:(e,t,n)=>{"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(14149)),a=r(n(54545)),i=(n(87641),r(n(26018)));function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e){return"/"===e.charAt(0)?e:"/"+e}function s(e){return"/"===e.charAt(0)?e.substr(1):e}function c(e,t){return r=t,0===(n=e).toLowerCase().indexOf(r.toLowerCase())&&-1!=="/?#".indexOf(n.charAt(r.length))?e.substr(t.length):e;var n,r}function f(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function d(e){var t,n="",r="";return-1!==(-1!==(t=(e=e||"/").indexOf("#"))&&(r=e.substr(t),e=e.substr(0,t)),t=e.indexOf("?"))&&(n=e.substr(t),e=e.substr(0,t)),{pathname:e,search:"?"===n?"":n,hash:"#"===r?"":r}}function p(e){var t=e.pathname,n=e.search;return e=e.hash,t=t||"/",n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),e&&"#"!==e&&(t+="#"===e.charAt(0)?e:"#"+e),t}function h(e,t,n,r){var a;"string"==typeof e?(a=d(e)).state=t:(void 0===(a=l({},e)).pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==t&&void 0===a.state&&(a.state=t));try{a.pathname=decodeURI(a.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(a.key=n),r?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=o(a.pathname,r.pathname)):a.pathname=r.pathname:a.pathname||(a.pathname="/"),a}function m(){var e=null,t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,o){null!=e?"string"==typeof(t="function"==typeof e?e(t,n):e)?"function"==typeof r?r(t,o):o(!0):o(!1!==t):o(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var y=!("undefined"==typeof window||!window.document||!window.document.createElement);function g(e,t){t(window.confirm(e))}var b="hashchange";function v(){try{return window.history.state||{}}catch(e){return{}}}var w="hashchange",O={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+s(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:s,decodePath:u},slash:{encodePath:u,decodePath:u}};function S(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function _(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function C(e){window.location.replace(S(window.location.href)+"#"+e)}function E(e,t,n){return Math.min(Math.max(e,t),n)}t.createBrowserHistory=function(e){void 0===e&&(e={}),y||i(!1);var t=window.history,n=(-1===(o=window.navigator.userAgent).indexOf("Android 2.")&&-1===o.indexOf("Android 4.0")||-1===o.indexOf("Mobile Safari")||-1!==o.indexOf("Chrome")||-1!==o.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,r=!(-1===window.navigator.userAgent.indexOf("Trident")),o=e,a=o.forceRefresh,s=void 0!==a&&a,d=void 0===(a=o.getUserConfirmation)?g:a,w=void 0===(a=o.keyLength)?6:a,O=e.basename?f(u(e.basename)):"";function S(e){var t=(e=e||{}).key,n=(e=e.state,(n=window.location).pathname+n.search+n.hash);return h(n=O?c(n,O):n,e,t)}function _(){return Math.random().toString(36).substr(2,w)}var C=m();function E(e){l(N,e),N.length=t.length,C.notifyListeners(N.location,N.action)}function P(e){void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")||x(S(e.state))}function k(){x(S(v()))}var j=!1;function x(e){j?(j=!1,E()):C.confirmTransitionTo(e,"POP",d,(function(t){var n;t?E({action:"POP",location:e}):(t=e,n=N.location,-1===(n=M.indexOf(n.key))&&(n=0),(n-=t=-1===(t=M.indexOf(t.key))?0:t)&&(j=!0,I(n)))}))}var M=[(o=S(v())).key];function T(e){return O+p(e)}function I(e){t.go(e)}var D=0;function A(e){1===(D+=e)&&1===e?(window.addEventListener("popstate",P),r&&window.addEventListener(b,k)):0===D&&(window.removeEventListener("popstate",P),r&&window.removeEventListener(b,k))}var R=!1,N={length:t.length,action:"POP",location:o,createHref:T,push:function(e,r){var o=h(e,r,_(),N.location);C.confirmTransitionTo(o,"PUSH",d,(function(e){var r,a;e&&(e=T(o),r=o.key,a=o.state,n?(t.pushState({key:r,state:a},null,e),s?window.location.href=e:(r=M.indexOf(N.location.key),(a=M.slice(0,r+1)).push(o.key),M=a,E({action:"PUSH",location:o}))):window.location.href=e)}))},replace:function(e,r){var o=h(e,r,_(),N.location);C.confirmTransitionTo(o,"REPLACE",d,(function(e){var r,a;e&&(e=T(o),a=o.key,r=o.state,n?(t.replaceState({key:a,state:r},null,e),s?window.location.replace(e):(-1!==(a=M.indexOf(N.location.key))&&(M[a]=o.key),E({action:"REPLACE",location:o}))):window.location.replace(e))}))},go:I,goBack:function(){I(-1)},goForward:function(){I(1)},block:function(e){var t=C.setPrompt(e=void 0!==e&&e);return R||(A(1),R=!0),function(){return R&&(R=!1,A(-1)),t()}},listen:function(e){var t=C.appendListener(e);return A(1),function(){A(-1),t()}}};return N},t.createHashHistory=function(e){void 0===e&&(e={}),y||i(!1);var t=window.history;window.navigator.userAgent.indexOf("Firefox");var n=void 0===(r=e.getUserConfirmation)?g:r,r=void 0===(r=e.hashType)?"slash":r,o=e.basename?f(u(e.basename)):"",a=(e=O[r]).encodePath,s=e.decodePath;function d(){var e=s(_());return h(e=o?c(e,o):e)}var b=m();function v(e){l(D,e),D.length=t.length,b.notifyListeners(D.location,D.action)}var E=!1,P=null;function k(){var e,t=_(),r=a(t);t!==r?C(r):(t=d(),r=D.location,!E&&r.pathname===t.pathname&&r.search===t.search&&r.hash===t.hash||P===p(t)||(P=null,e=t,E?(E=!1,v()):b.confirmTransitionTo(e,"POP",n,(function(t){var n;t?v({action:"POP",location:e}):(t=e,n=D.location,-1===(n=j.lastIndexOf(p(n)))&&(n=0),(n-=t=-1===(t=j.lastIndexOf(p(t)))?0:t)&&(E=!0,x(n)))}))))}(r=_())!==(e=a(r))&&C(e);var j=[p(r=d())];function x(e){t.go(e)}var M=0;function T(e){1===(M+=e)&&1===e?window.addEventListener(w,k):0===M&&window.removeEventListener(w,k)}var I=!1,D={length:t.length,action:"POP",location:r,createHref:function(e){var t=document.querySelector("base"),n="";return(n=t&&t.getAttribute("href")?S(window.location.href):n)+"#"+a(o+p(e))},push:function(e,t){var r=h(e,void 0,void 0,D.location);b.confirmTransitionTo(r,"PUSH",n,(function(e){var t;e&&(e=p(r),t=a(o+e),_()!==t?(P=e,window.location.hash=t,t=j.lastIndexOf(p(D.location)),(t=j.slice(0,t+1)).push(e),j=t,v({action:"PUSH",location:r})):v())}))},replace:function(e,t){var r=h(e,void 0,void 0,D.location);b.confirmTransitionTo(r,"REPLACE",n,(function(e){var t;e&&(e=p(r),t=a(o+e),_()!==t&&(P=e,C(t)),-1!==(t=j.indexOf(p(D.location)))&&(j[t]=e),v({action:"REPLACE",location:r}))}))},go:x,goBack:function(){x(-1)},goForward:function(){x(1)},block:function(e){var t=b.setPrompt(e=void 0!==e&&e);return I||(T(1),I=!0),function(){return I&&(I=!1,T(-1)),t()}},listen:function(e){var t=b.appendListener(e);return T(1),function(){T(-1),t()}}};return D},t.createMemoryHistory=function(e){var t=(e=e=void 0===e?{}:e).getUserConfirmation,n=void 0===(n=e.initialEntries)?["/"]:n,r=e.initialIndex,o=void 0===(e=e.keyLength)?6:e,a=m();function i(e){l(c,e),c.length=c.entries.length,a.notifyListeners(c.location,c.action)}function u(){return Math.random().toString(36).substr(2,o)}function s(e){var n=E(c.index+e,0,c.entries.length-1),r=c.entries[n];a.confirmTransitionTo(r,"POP",t,(function(e){e?i({action:"POP",location:r,index:n}):i()}))}e=E(void 0===r?0:r,0,n.length-1);var c={length:(r=n.map((function(e){return h(e,void 0,"string"!=typeof e&&e.key||u())}))).length,action:"POP",location:r[e],index:e,entries:r,createHref:p,push:function(e,n){var r=h(e,n,u(),c.location);a.confirmTransitionTo(r,"PUSH",t,(function(e){var t;e&&(e=c.index+1,(t=c.entries.slice(0)).length>e?t.splice(e,t.length-e,r):t.push(r),i({action:"PUSH",location:r,index:e,entries:t}))}))},replace:function(e,n){var r=h(e,n,u(),c.location);a.confirmTransitionTo(r,"REPLACE",t,(function(e){e&&(c.entries[c.index]=r,i({action:"REPLACE",location:r}))}))},go:s,goBack:function(){s(-1)},goForward:function(){s(1)},canGo:function(e){return 0<=(e=c.index+e)&&e<c.entries.length},block:function(e){return a.setPrompt(e=void 0!==e&&e)},listen:function(e){return a.appendListener(e)}};return c},t.createLocation=h,t.locationsAreEqual=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&a(e.state,t.state)},t.parsePath=d,t.createPath=p},55648:(e,t,n)=>{"use strict";e.exports=n(70282)},8679:(e,t,n)=>{"use strict";var r=n(59864),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l={};function u(e){return r.isMemo(e)?i:l[e.$$typeof]||o}l[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},l[r.Memo]=i;var s=Object.defineProperty,c=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){h&&(o=p(n))&&o!==h&&e(t,o,r);for(var o,i=c(n),l=(f&&(i=i.concat(f(n))),u(t)),m=u(n),y=0;y<i.length;++y){var g=i[y];if(!(a[g]||r&&r[g]||m&&m[g]||l&&l[g])){var b=d(n,g);try{s(t,g,b)}catch(e){}}}}return t}},97950:e=>{"use strict";var t="undefined"!=typeof navigator&&0<navigator.userAgent.toLowerCase().indexOf("firefox");function n(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,(function(){n(window.event)}))}function r(e,t){for(var n=t.slice(0,t.length-1),r=0;r<n.length;r++)n[r]=e[n[r].toLowerCase()];return n}function o(e){for(var t=(e=(e=e||"").replace(/\s/g,"")).split(","),n=t.lastIndexOf("");0<=n;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}for(var a={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,"":20,",":188,".":190,"/":191,"`":192,"-":t?173:189,"=":t?61:187,";":t?59:186,"'":222,"[":219,"]":221,"\\":220},i={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":t?224:91,cmd:t?224:91,command:t?224:91},l=[],u={16:"shiftKey",18:"altKey",17:"ctrlKey"},s={16:!1,18:!1,17:!1},c={},f=1;f<20;f++)a["f"+f]=111+f;function d(e){return a[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)}var p="all",h=s[t?224:91]=!(u[t?224:91]="metaKey");function m(e){p=e||"all"}function y(){return p||"all"}function g(e,t,n){var r=void 0;if(t.scope===n||"all"===t.scope){for(var o in r=0<t.mods.length,s)Object.prototype.hasOwnProperty.call(s,o)&&(!s[o]&&-1<t.mods.indexOf(+o)||s[o]&&-1===t.mods.indexOf(+o))&&(r=!1);(0!==t.mods.length||s[16]||s[18]||s[17]||s[91])&&!r&&"*"!==t.shortcut||!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function b(e,t,a){var f=o(e),p=[],m="all",v=document,w=0;for(void 0===a&&"function"==typeof t&&(a=t),"[object Object]"===Object.prototype.toString.call(t)&&(t.scope&&(m=t.scope),t.element&&(v=t.element)),"string"==typeof t&&(m=t);w<f.length;w++)p=[],1<(e=f[w].split("+")).length&&(p=r(i,e)),(e="*"===(e=e[e.length-1])?"*":d(e))in c||(c[e]=[]),c[e].push({scope:m,mods:p,shortcut:f[w],method:a,key:f[w]});void 0===v||h||(h=!0,n(v,"keydown",(function(e){!function(e){var t,n=c["*"],r=e.keyCode||e.which||e.charCode;if(-1===l.indexOf(r)&&l.push(r),(r=93!==r&&224!==r?r:91)in s){for(var o in s[r]=!0,i)i[o]===r&&(b[o]=!0);if(!n)return}for(t in s)Object.prototype.hasOwnProperty.call(s,t)&&(s[t]=e[u[t]]);if(b.filter.call(this,e)){var a=y();if(n)for(var f=0;f<n.length;f++)n[f].scope===a&&g(e,n[f],a);if(r in c)for(var d=0;d<c[r].length;d++)g(e,c[r][d],a)}}(e)})),n(v,"keyup",(function(e){var t=e.keyCode||e.which||e.charCode;if((e=l.indexOf(t))<0||l.splice(e,1),(t=93!==t&&224!==t?t:91)in s)for(var n in s[t]=!1,i)i[n]===t&&(b[n]=!1)})))}var v,w,O={setScope:m,getScope:y,deleteScope:function(e,t){var n,r=void 0,o=void 0;for(n in e=e||y(),c)if(Object.prototype.hasOwnProperty.call(c,n))for(r=c[n],o=0;o<r.length;)r[o].scope===e?r.splice(o,1):o++;y()===e&&m(t||"all")},getPressedKeyCodes:function(){return l.slice(0)},isPressed:function(e){return"string"==typeof e&&(e=d(e)),-1!==l.indexOf(e)},filter:function(e){return!("INPUT"===(e=e.target.tagName||e.srcElement.tagName)||"SELECT"===e||"TEXTAREA"===e)},unbind:function(e,t){for(var n,a,l=o(e),u=[],s=0;s<l.length;s++){if(1<(n=l[s].split("+")).length&&(u=r(i,n)),e="*"===(e=n[n.length-1])?"*":d(e),t=t||y(),!c[e])return;for(var f=0;f<c[e].length;f++)(a=c[e][f]).scope===t&&function(e,t){for(var n=e.length<t.length?t:e,r=e.length<t.length?e:t,o=!0,a=0;a<n.length;a++)-1===r.indexOf(n[a])&&(o=!1);return o}(a.mods,u)&&(c[e][f]={})}}};for(v in O)Object.prototype.hasOwnProperty.call(O,v)&&(b[v]=O[v]);"undefined"!=typeof window&&(w=window.hotkeys,b.noConflict=function(e){return e&&window.hotkeys===b&&(window.hotkeys=w),b},window.hotkeys=b),e.exports=b},3812:(e,t,n)=>{e.exports=n(97950)},95931:(e,t)=>{var n,r,o,a;function i(e,t){this._options=t||{},null==this._options.includeLocation&&(this._options.includeLocation=!1),this.validateHandler(e),this._handler=e,this.reset()}function l(e){l.super_.call(this,e,{ignoreWhitespace:!0,verbose:!1,enforceEmptyTags:!1})}function u(){}function s(e,t){this.reset(),this._options=t||{},null==this._options.ignoreWhitespace&&(this._options.ignoreWhitespace=!1),null==this._options.verbose&&(this._options.verbose=!0),null==this._options.enforceEmptyTags&&(this._options.enforceEmptyTags=!0),"function"==typeof e&&(this._callback=e)}o={Text:"text",Directive:"directive",Comment:"comment",Script:"script",Style:"style",Tag:"tag"},i._reTrim=/(^\s+|\s+$)/g,i._reTrimComment=/(^\!--|--$)/g,i._reWhitespace=/\s/g,i._reTagName=/^\s*(\/?)\s*([^\s\/]+)/,i._reAttrib=/([^=<>\"\'\s]+)\s*=\s*"([^"]*)"|([^=<>\"\'\s]+)\s*=\s*'([^']*)'|([^=<>\"\'\s]+)\s*=\s*([^'"\s]+)|([^=<>\"\'\s\/]+)/g,i._reTags=/[\<\>]/g,i.prototype.parseComplete=function(e){this.reset(),this.parseChunk(e),this.done()},i.prototype.parseChunk=function(e){this._done&&this.handleError(new Error("Attempted to parse chunk after parsing already done")),this._buffer+=e,this.parseTags()},i.prototype.done=function(){var e;this._done||(this._done=!0,this._buffer.length&&(e=this._buffer,this._buffer="",e={raw:e,data:this._parseState==o.Text?e:e.replace(i._reTrim,""),type:this._parseState},this._parseState!=o.Tag&&this._parseState!=o.Script&&this._parseState!=o.Style||(e.name=this.parseTagName(e.data)),this.parseAttribs(e),this._elements.push(e)),this.writeHandler(),this._handler.done())},i.prototype.reset=function(){this._buffer="",this._done=!1,this._elements=[],this._elementsCurrent=0,this._current=0,this._next=0,this._location={row:0,col:0,charOffset:0,inBuffer:0},this._parseState=o.Text,this._prevTagSep="",this._tagStack=[],this._handler.reset()},i.prototype._options=null,i.prototype._handler=null,i.prototype._buffer=null,i.prototype._done=!1,i.prototype._elements=null,i.prototype._elementsCurrent=0,i.prototype._current=0,i.prototype._next=0,i.prototype._location=null,i.prototype._parseState=o.Text,i.prototype._prevTagSep="",i.prototype._tagStack=null,i.prototype.parseTagAttribs=function(e){for(var t=e.length,n=0;n<t;){var r=e[n++];r.type!=o.Tag&&r.type!=o.Script&&r.type!=o.style||this.parseAttribs(r)}return e},i.prototype.parseAttribs=function(e){if(e.type==o.Script||e.type==o.Style||e.type==o.Tag){var t,n=e.data.split(i._reWhitespace,1)[0],r=e.data.substring(n.length);if(!(r.length<1))for(i._reAttrib.lastIndex=0;t=i._reAttrib.exec(r);)null==e.attribs&&(e.attribs={}),"string"==typeof t[1]&&t[1].length?e.attribs[t[1]]=t[2]:"string"==typeof t[3]&&t[3].length?e.attribs[t[3].toString()]=t[4].toString():"string"==typeof t[5]&&t[5].length?e.attribs[t[5]]=t[6]:"string"==typeof t[7]&&t[7].length&&(e.attribs[t[7]]=t[7])}},i.prototype.parseTagName=function(e){return null==e||""==e?"":(e=i._reTagName.exec(e))?(e[1]?"/":"")+e[2]:""},i.prototype.parseTags=function(){for(var e=this._buffer.length-1;i._reTags.test(this._buffer);){this._next=i._reTags.lastIndex-1;var t,n,r=this._buffer.charAt(this._next),a={raw:a=this._buffer.substring(this._current,this._next),data:this._parseState==o.Text?a:a.replace(i._reTrim,""),type:this._parseState},l=this.parseTagName(a.data);this._tagStack.length&&(this._tagStack[this._tagStack.length-1]==o.Script?"/script"==l.toLowerCase()?this._tagStack.pop():0!=a.raw.indexOf("!--")&&(a.type=o.Text,this._elements.length&&this._elements[this._elements.length-1].type==o.Text&&((t=this._elements[this._elements.length-1]).raw=t.data=t.raw+this._prevTagSep+a.raw,a.raw=a.data="")):this._tagStack[this._tagStack.length-1]==o.Style?"/style"==l.toLowerCase()?this._tagStack.pop():0!=a.raw.indexOf("!--")&&(a.type=o.Text,this._elements.length&&this._elements[this._elements.length-1].type==o.Text?(t=this._elements[this._elements.length-1],""!=a.raw?(t.raw=t.data=t.raw+this._prevTagSep+a.raw,a.raw=a.data=""):t.raw=t.data=t.raw+this._prevTagSep):""!=a.raw&&(a.raw=a.data=a.raw)):this._tagStack[this._tagStack.length-1]==o.Comment&&(n=a.raw.length,"-"==a.raw.charAt(n-2)&&"-"==a.raw.charAt(n-1)&&">"==r?(this._tagStack.pop(),this._elements.length&&this._elements[this._elements.length-1].type==o.Comment?((t=this._elements[this._elements.length-1]).raw=t.data=(t.raw+a.raw).replace(i._reTrimComment,""),a.raw=a.data="",a.type=o.Text):a.type=o.Comment):(a.type=o.Comment,this._elements.length&&this._elements[this._elements.length-1].type==o.Comment?((t=this._elements[this._elements.length-1]).raw=t.data=t.raw+a.raw+r,a.raw=a.data="",a.type=o.Text):a.raw=a.data=a.raw+r))),a.type==o.Tag&&(l=(a.name=l).toLowerCase(),0==a.raw.indexOf("!--")?(a.type=o.Comment,delete a.name,n=a.raw.length,"-"==a.raw.charAt(n-1)&&"-"==a.raw.charAt(n-2)&&">"==r?a.raw=a.data=a.raw.replace(i._reTrimComment,""):(a.raw+=r,this._tagStack.push(o.Comment))):0==a.raw.indexOf("!")||0==a.raw.indexOf("?")?a.type=o.Directive:"script"==l?(a.type=o.Script,"/"!=a.data.charAt(a.data.length-1)&&this._tagStack.push(o.Script)):"/script"==l?a.type=o.Script:"style"==l?(a.type=o.Style,"/"!=a.data.charAt(a.data.length-1)&&this._tagStack.push(o.Style)):"/style"==l&&(a.type=o.Style),a.name&&"/"==a.name.charAt(0)&&(a.data=a.name)),""==a.raw&&a.type==o.Text||(this._options.includeLocation&&!a.location&&(a.location=this.getLocation(a.type==o.Tag)),this.parseAttribs(a),this._elements.push(a),a.type!=o.Text&&a.type!=o.Comment&&a.type!=o.Directive&&"/"==a.data.charAt(a.data.length-1)&&this._elements.push({raw:"/"+a.name,data:"/"+a.name,name:"/"+a.name,type:a.type})),this._parseState="<"==r?o.Tag:o.Text,this._current=this._next+1,this._prevTagSep=r}this._options.includeLocation&&(this.getLocation(),this._location.row+=this._location.inBuffer,this._location.inBuffer=0,this._location.charOffset=0),this._buffer=this._current<=e?this._buffer.substring(this._current):"",this._current=0,this.writeHandler()},i.prototype.getLocation=function(e){var t,n=this._location,r=this._current-(e?1:0);for(e=e&&0==n.charOffset&&0==this._current;n.charOffset<r;n.charOffset++)"\n"==(t=this._buffer.charAt(n.charOffset))?(n.inBuffer++,n.col=0):"\r"!=t&&n.col++;return{line:n.row+n.inBuffer+1,col:n.col+(e?0:1)}},i.prototype.validateHandler=function(e){if("object"!=typeof e)throw new Error("Handler is not an object");if("function"!=typeof e.reset)throw new Error("Handler method 'reset' is invalid");if("function"!=typeof e.done)throw new Error("Handler method 'done' is invalid");if("function"!=typeof e.writeTag)throw new Error("Handler method 'writeTag' is invalid");if("function"!=typeof e.writeText)throw new Error("Handler method 'writeText' is invalid");if("function"!=typeof e.writeComment)throw new Error("Handler method 'writeComment' is invalid");if("function"!=typeof e.writeDirective)throw new Error("Handler method 'writeDirective' is invalid")},i.prototype.writeHandler=function(e){if(e=!!e,!this._tagStack.length||e)for(;this._elements.length;){var t=this._elements.shift();switch(t.type){case o.Comment:this._handler.writeComment(t);break;case o.Directive:this._handler.writeDirective(t);break;case o.Text:this._handler.writeText(t);break;default:this._handler.writeTag(t)}}},i.prototype.handleError=function(e){if("function"!=typeof this._handler.error)throw e;this._handler.error(e)},n=l,u.prototype=(r=s).prototype,n.super_=r,n.prototype=new u,n.prototype.constructor=n,l.prototype.done=function(){var e,t={},n=a.getElementsByTagName((function(e){return"rss"==e||"feed"==e}),this.dom,!1);if(e=n.length?n[0]:e){if("rss"==e.name){t.type="rss",e=e.children[0],t.id="";try{t.title=a.getElementsByTagName("title",e.children,!1)[0].children[0].data}catch(e){}try{t.link=a.getElementsByTagName("link",e.children,!1)[0].children[0].data}catch(e){}try{t.description=a.getElementsByTagName("description",e.children,!1)[0].children[0].data}catch(e){}try{t.updated=new Date(a.getElementsByTagName("lastBuildDate",e.children,!1)[0].children[0].data)}catch(e){}try{t.author=a.getElementsByTagName("managingEditor",e.children,!1)[0].children[0].data}catch(e){}t.items=[],a.getElementsByTagName("item",e.children).forEach((function(e,n,r){var o={};try{o.id=a.getElementsByTagName("guid",e.children,!1)[0].children[0].data}catch(e){}try{o.title=a.getElementsByTagName("title",e.children,!1)[0].children[0].data}catch(e){}try{o.link=a.getElementsByTagName("link",e.children,!1)[0].children[0].data}catch(e){}try{o.description=a.getElementsByTagName("description",e.children,!1)[0].children[0].data}catch(e){}try{o.pubDate=new Date(a.getElementsByTagName("pubDate",e.children,!1)[0].children[0].data)}catch(e){}t.items.push(o)}))}else{t.type="atom";try{t.id=a.getElementsByTagName("id",e.children,!1)[0].children[0].data}catch(e){}try{t.title=a.getElementsByTagName("title",e.children,!1)[0].children[0].data}catch(e){}try{t.link=a.getElementsByTagName("link",e.children,!1)[0].attribs.href}catch(e){}try{t.description=a.getElementsByTagName("subtitle",e.children,!1)[0].children[0].data}catch(e){}try{t.updated=new Date(a.getElementsByTagName("updated",e.children,!1)[0].children[0].data)}catch(e){}try{t.author=a.getElementsByTagName("email",e.children,!0)[0].children[0].data}catch(e){}t.items=[],a.getElementsByTagName("entry",e.children).forEach((function(e,n,r){var o={};try{o.id=a.getElementsByTagName("id",e.children,!1)[0].children[0].data}catch(e){}try{o.title=a.getElementsByTagName("title",e.children,!1)[0].children[0].data}catch(e){}try{o.link=a.getElementsByTagName("link",e.children,!1)[0].attribs.href}catch(e){}try{o.description=a.getElementsByTagName("summary",e.children,!1)[0].children[0].data}catch(e){}try{o.pubDate=new Date(a.getElementsByTagName("updated",e.children,!1)[0].children[0].data)}catch(e){}t.items.push(o)}))}this.dom=t}l.super_.prototype.done.call(this)},s._emptyTags={area:1,base:1,basefont:1,br:1,col:1,frame:1,hr:1,img:1,input:1,isindex:1,link:1,meta:1,param:1,embed:1},s.reWhitespace=/^\s*$/,s.prototype.dom=null,s.prototype.reset=function(){this.dom=[],this._done=!1,this._tagStack=[],this._tagStack.last=function(){return this.length?this[this.length-1]:null}},s.prototype.done=function(){this._done=!0,this.handleCallback(null)},s.prototype.writeTag=function(e){this.handleElement(e)},s.prototype.writeText=function(e){this._options.ignoreWhitespace&&s.reWhitespace.test(e.data)||this.handleElement(e)},s.prototype.writeComment=function(e){this.handleElement(e)},s.prototype.writeDirective=function(e){this.handleElement(e)},s.prototype.error=function(e){this.handleCallback(e)},s.prototype._options=null,s.prototype._callback=null,s.prototype._done=!1,s.prototype._tagStack=null,s.prototype.handleCallback=function(e){if("function"!=typeof this._callback){if(e)throw e}else this._callback(e,this.dom)},s.prototype.isEmptyTag=function(e){return"/"==(e=e.name.toLowerCase()).charAt(0)&&(e=e.substring(1)),this._options.enforceEmptyTags&&!!s._emptyTags[e]},s.prototype.handleElement=function(e){if(this._done&&this.handleCallback(new Error("Writing to the handler after done() called is not allowed without a reset()")),this._options.verbose||(delete e.raw,"tag"!=e.type&&"script"!=e.type&&"style"!=e.type||delete e.data),this._tagStack.last())if(e.type!=o.Text&&e.type!=o.Comment&&e.type!=o.Directive)if("/"==e.name.charAt(0)){var t=e.name.substring(1);if(!this.isEmptyTag(e)){for(var n=this._tagStack.length-1;-1<n&&this._tagStack[n--].name!=t;);if(-1<n||this._tagStack[0].name==t)for(;n<this._tagStack.length-1;)this._tagStack.pop()}}else this._tagStack.last().children||(this._tagStack.last().children=[]),this._tagStack.last().children.push(e),this.isEmptyTag(e)||this._tagStack.push(e);else this._tagStack.last().children||(this._tagStack.last().children=[]),this._tagStack.last().children.push(e);else e.type!=o.Text&&e.type!=o.Comment&&e.type!=o.Directive?"/"!=e.name.charAt(0)&&(this.dom.push(e),this.isEmptyTag(e)||this._tagStack.push(e)):this.dom.push(e)},a={testElement:function(e,t){if(!t)return!1;for(var n in e)if("tag_name"==n){if("tag"!=t.type&&"script"!=t.type&&"style"!=t.type)return!1;if(!e.tag_name(t.name))return!1}else if("tag_type"==n){if(!e.tag_type(t.type))return!1}else if("tag_contains"==n){if("text"!=t.type&&"comment"!=t.type&&"directive"!=t.type)return!1;if(!e.tag_contains(t.data))return!1}else if(!t.attribs||!e[n](t.attribs[n]))return!1;return!0},getElements:function(e,t,n,r){if(n=null==n||!!n,r=isNaN(parseInt(r))?-1:parseInt(r),!t)return[];var o,i,l=[];for(i in e)"function"!=typeof e[i]&&(e[i]=function(e){return function(t){return t==e}}(e[i]));if(a.testElement(e,t)&&l.push(t),0<=r&&l.length>=r)return l;if(n&&t.children)o=t.children;else{if(!(t instanceof Array))return l;o=t}for(var u=0;u<o.length&&(l=l.concat(a.getElements(e,o[u],n,r)),!(0<=r&&l.length>=r));u++);return l},getElementById:function(e,t,n){return(e=a.getElements({id:e},t,n,1)).length?e[0]:null},getElementsByTagName:function(e,t,n,r){return a.getElements({tag_name:e},t,n,r)},getElementsByTagType:function(e,t,n,r){return a.getElements({tag_type:e},t,n,r)}},t.Parser=i,t.DefaultHandler=s,t.RssHandler=l,t.ElementType=o,t.DomUtils=a},48738:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||"function"==typeof(n=e).readFloatLE&&"function"==typeof n.slice&&t(n.slice(0,0))||!!e._isBuffer);var n}},5826:e=>{var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},18552:(e,t,n)=>{n=n(10852)(n(55639),"DataView"),e.exports=n},1989:(e,t,n)=>{var r=n(51789),o=n(80401),a=n(57667),i=n(21327);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}n=n(81866),l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=i,l.prototype.set=n,e.exports=l},38407:(e,t,n)=>{var r=n(27040),o=n(14125),a=n(82117),i=n(67518);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}n=n(54705),l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=i,l.prototype.set=n,e.exports=l},57071:(e,t,n)=>{n=n(10852)(n(55639),"Map"),e.exports=n},83369:(e,t,n)=>{var r=n(24785),o=n(11285),a=n(96e3),i=n(49916);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}n=n(95265),l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=i,l.prototype.set=n,e.exports=l},53818:(e,t,n)=>{n=n(10852)(n(55639),"Promise"),e.exports=n},58525:(e,t,n)=>{n=n(10852)(n(55639),"Set"),e.exports=n},88668:(e,t,n)=>{var r=n(83369),o=n(90619);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}n=n(72385),a.prototype.add=a.prototype.push=o,a.prototype.has=n,e.exports=a},46384:(e,t,n)=>{var r=n(38407),o=n(37465),a=n(63779),i=n(67599),l=n(44758);function u(e){e=this.__data__=new r(e),this.size=e.size}n=n(34309),u.prototype.clear=o,u.prototype.delete=a,u.prototype.get=i,u.prototype.has=l,u.prototype.set=n,e.exports=u},62705:(e,t,n)=>{n=n(55639).Symbol,e.exports=n},11149:(e,t,n)=>{n=n(55639).Uint8Array,e.exports=n},70577:(e,t,n)=>{n=n(10852)(n(55639),"WeakMap"),e.exports=n},96874:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},77412:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},34963:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,a=[];++n<r;){var i=e[n];t(i,n,e)&&(a[o++]=i)}return a}},14636:(e,t,n)=>{var r=n(22545),o=n(35694),a=n(1469),i=n(44144),l=n(65776),u=n(36719),s=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n,c=a(e),f=!c&&o(e),d=!c&&!f&&i(e),p=!c&&!f&&!d&&u(e),h=c||f||d||p,m=h?r(e.length,String):[],y=m.length;for(n in e)!t&&!s.call(e,n)||h&&("length"==n||d&&("offset"==n||"parent"==n)||p&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||l(n,y))||m.push(n);return m}},29932:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}},62488:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},82908:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},34865:(e,t,n)=>{var r=n(89465),o=n(77813),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var i=e[t];a.call(e,t)&&o(i,n)&&(void 0!==n||t in e)||r(e,t,n)}},18470:(e,t,n)=>{var r=n(77813);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},44037:(e,t,n)=>{var r=n(98363),o=n(3674);e.exports=function(e,t){return e&&r(t,o(t),e)}},23269:(e,t,n)=>{var r=n(98363),o=n(81704);e.exports=function(e,t){return e&&r(t,o(t),e)}},89465:(e,t,n)=>{var r=n(38777);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},85990:(e,t,n)=>{var r=n(46384),o=n(77412),a=n(34865),i=n(44037),l=n(23269),u=n(64626),s=n(278),c=n(18805),f=n(1911),d=n(58234),p=n(46904),h=n(64160),m=n(43824),y=n(29148),g=n(38517),b=n(1469),v=n(44144),w=n(56688),O=n(13218),S=n(72928),_=n(3674),C=n(81704),E="[object Arguments]",P="[object Function]",k="[object Object]",j={};j[E]=j["[object Array]"]=j["[object ArrayBuffer]"]=j["[object DataView]"]=j["[object Boolean]"]=j["[object Date]"]=j["[object Float32Array]"]=j["[object Float64Array]"]=j["[object Int8Array]"]=j["[object Int16Array]"]=j["[object Int32Array]"]=j["[object Map]"]=j["[object Number]"]=j[k]=j["[object RegExp]"]=j["[object Set]"]=j["[object String]"]=j["[object Symbol]"]=j["[object Uint8Array]"]=j["[object Uint8ClampedArray]"]=j["[object Uint16Array]"]=j["[object Uint32Array]"]=!0,j["[object Error]"]=j[P]=j["[object WeakMap]"]=!1,e.exports=function e(t,n,x,M,T,I){var D,A=1&n,R=2&n,N=4&n;if(void 0!==(D=x?T?x(t,M,T,I):x(t):D))return D;if(!O(t))return t;if(M=b(t)){if(D=m(t),!A)return s(t,D)}else{var B=h(t),L=B==P||"[object GeneratorFunction]"==B;if(v(t))return u(t,A);if(B==k||B==E||L&&!T){if(D=R||L?{}:g(t),!A)return R?f(t,l(D,t)):c(t,i(D,t))}else{if(!j[B])return T?t:{};D=y(t,B,A)}}if(L=(I=I||new r).get(t))return L;I.set(t,D),S(t)?t.forEach((function(r){D.add(e(r,n,x,r,t,I))})):w(t)&&t.forEach((function(r,o){D.set(o,e(r,n,x,o,t,I))}));var F=M?void 0:(N?R?p:d:R?C:_)(t);return o(F||t,(function(r,o){F&&(r=t[o=r]),a(D,o,e(r,n,x,o,t,I))})),D}},3118:(e,t,n)=>{var r=n(13218),o=Object.create;function a(){}e.exports=function(e){return r(e)?o?o(e):(a.prototype=e,e=new a,a.prototype=void 0,e):{}}},89881:(e,t,n)=>{var r=n(47816);n=n(99291)(r),e.exports=n},41848:e=>{e.exports=function(e,t,n,r){for(var o=e.length,a=n+(r?1:-1);r?a--:++a<o;)if(t(e[a],a,e))return a;return-1}},21078:(e,t,n)=>{var r=n(62488),o=n(37285);e.exports=function e(t,n,a,i,l){var u=-1,s=t.length;for(a=a||o,l=l||[];++u<s;){var c=t[u];0<n&&a(c)?1<n?e(c,n-1,a,i,l):r(l,c):i||(l[l.length]=c)}return l}},28483:(e,t,n)=>{n=n(25063)(),e.exports=n},47816:(e,t,n)=>{var r=n(28483),o=n(3674);e.exports=function(e,t){return e&&r(e,t,o)}},97786:(e,t,n)=>{var r=n(71811),o=n(40327);e.exports=function(e,t){for(var n=0,a=(t=r(t,e)).length;null!=e&&n<a;)e=e[o(t[n++])];return n&&n==a?e:void 0}},68866:(e,t,n)=>{var r=n(62488),o=n(1469);e.exports=function(e,t,n){return t=t(e),o(e)?t:r(t,n(e))}},44239:(e,t,n)=>{var r=n(62705),o=n(89607),a=n(2333),i=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":(i&&i in Object(e)?o:a)(e)}},13:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},9454:(e,t,n)=>{var r=n(44239),o=n(37005);e.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},90939:(e,t,n)=>{var r=n(2492),o=n(37005);e.exports=function e(t,n,a,i,l){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!=t&&n!=n:r(t,n,a,i,e,l))}},2492:(e,t,n)=>{var r=n(46384),o=n(67114),a=n(18351),i=n(16096),l=n(64160),u=n(1469),s=n(44144),c=n(36719),f="[object Arguments]",d="[object Array]",p="[object Object]",h=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,y,g){var b=u(e),v=u(t),w=b?d:l(e),O=(v=v?d:l(t),(w=w==f?p:w)==p),S=(v=v==f?p:v)==p;if((v=w==v)&&s(e)){if(!s(t))return!1;O=!(b=!0)}return v&&!O?(g=g||new r,b||c(e)?o(e,t,n,m,y,g):a(e,t,w,n,m,y,g)):1&n||(b=O&&h.call(e,"__wrapped__"),w=S&&h.call(t,"__wrapped__"),!b&&!w)?!!v&&(g=g||new r,i(e,t,n,m,y,g)):y(b?e.value():e,w?t.value():t,n,m,g=g||new r)}},25588:(e,t,n)=>{var r=n(64160),o=n(37005);e.exports=function(e){return o(e)&&"[object Map]"==r(e)}},2958:(e,t,n)=>{var r=n(46384),o=n(90939);e.exports=function(e,t,n,a){var i=n.length,l=i,u=!a;if(null==e)return!l;for(e=Object(e);i--;){var s=n[i];if(u&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<l;){var c=(s=n[i])[0],f=e[c],d=s[1];if(u&&s[2]){if(void 0===f&&!(c in e))return!1}else{var p,h=new r;if(!(void 0===(p=a?a(f,d,c,e,t,h):p)?o(d,f,3,a,h):p))return!1}}return!0}},28458:(e,t,n)=>{var r=n(23560),o=n(15346),a=n(13218),i=n(80346),l=/^\[object .+?Constructor\]$/,u=(n=Function.prototype,Object.prototype),s=(n=n.toString,u=u.hasOwnProperty,RegExp("^"+n.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"));e.exports=function(e){return!(!a(e)||o(e))&&(r(e)?s:l).test(i(e))}},29221:(e,t,n)=>{var r=n(64160),o=n(37005);e.exports=function(e){return o(e)&&"[object Set]"==r(e)}},38749:(e,t,n)=>{var r=n(44239),o=n(41780),a=n(37005),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&o(e.length)&&!!i[r(e)]}},67206:(e,t,n)=>{var r=n(91573),o=n(16432),a=n(6557),i=n(1469),l=n(39601);e.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?i(e)?o(e[0],e[1]):r(e):l(e)}},280:(e,t,n)=>{var r=n(25726),o=n(86916),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t,n=[];for(t in Object(e))a.call(e,t)&&"constructor"!=t&&n.push(t);return n}},10313:(e,t,n)=>{var r=n(13218),o=n(25726),a=n(33498),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t,n=o(e),l=[];for(t in e)("constructor"!=t||!n&&i.call(e,t))&&l.push(t);return l}},69199:(e,t,n)=>{var r=n(89881),o=n(98612);e.exports=function(e,t){var n=-1,a=o(e)?Array(e.length):[];return r(e,(function(e,r,o){a[++n]=t(e,r,o)})),a}},91573:(e,t,n)=>{var r=n(2958),o=n(1499),a=n(42634);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},16432:(e,t,n)=>{var r=n(90939),o=n(27361),a=n(79095),i=n(15403),l=n(89162),u=n(42634),s=n(40327);e.exports=function(e,t){return i(e)&&l(t)?u(s(e),t):function(n){var i=o(n,e);return void 0===i&&i===t?a(n,e):r(t,i,3)}}},25970:(e,t,n)=>{var r=n(63012),o=n(79095);e.exports=function(e,t){return r(e,t,(function(t,n){return o(e,n)}))}},63012:(e,t,n)=>{var r=n(97786),o=n(10611),a=n(71811);e.exports=function(e,t,n){for(var i=-1,l=t.length,u={};++i<l;){var s=t[i],c=r(e,s);n(c,s)&&o(u,a(s,e),c)}return u}},40371:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},79152:(e,t,n)=>{var r=n(97786);e.exports=function(e){return function(t){return r(t,e)}}},10611:(e,t,n)=>{var r=n(34865),o=n(71811),a=n(65776),i=n(13218),l=n(40327);e.exports=function(e,t,n,u){if(!i(e))return e;for(var s=-1,c=(t=o(t,e)).length,f=c-1,d=e;null!=d&&++s<c;){var p,h=l(t[s]),m=n;if("__proto__"===h||"constructor"===h||"prototype"===h)return e;s!=f&&(p=d[h],void 0===(m=u?u(p,h,d):void 0)&&(m=i(p)?p:a(t[s+1])?[]:{})),r(d,h,m),d=d[h]}return e}},56560:(e,t,n)=>{var r=n(75703),o=n(38777);n=n(6557),e.exports=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:n},14259:e=>{e.exports=function(e,t,n){for(var r=-1,o=e.length,a=((n=o<n?o:n)<0&&(n+=o),o=n<(t=t<0?o<-t?0:o+t:t)?0:n-t>>>0,t>>>=0,Array(o));++r<o;)a[r]=e[r+t];return a}},22545:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},80531:(e,t,n)=>{var r=n(62705),o=n(29932),a=n(1469),i=n(33448),l=(n=r?r.prototype:void 0)?n.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return o(t,e)+"";if(i(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},27561:(e,t,n)=>{var r=n(67990),o=/^\s+/;e.exports=function(e){return e&&e.slice(0,r(e)+1).replace(o,"")}},7518:e=>{e.exports=function(e){return function(t){return e(t)}}},57406:(e,t,n)=>{var r=n(71811),o=n(10928),a=n(40292),i=n(40327);e.exports=function(e,t){return t=r(t,e),null==(e=a(e,t))||delete e[i(o(t))]}},47415:(e,t,n)=>{var r=n(29932);e.exports=function(e,t){return r(t,(function(t){return e[t]}))}},74757:e=>{e.exports=function(e,t){return e.has(t)}},54290:(e,t,n)=>{var r=n(6557);e.exports=function(e){return"function"==typeof e?e:r}},71811:(e,t,n)=>{var r=n(1469),o=n(15403),a=n(55514),i=n(79833);e.exports=function(e,t){return r(e)?e:o(e,t)?[e]:a(i(e))}},74318:(e,t,n)=>{var r=n(11149);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},64626:(e,t,n)=>{e=n.nmd(e),n=n(55639);var r,o=(r=(r=(t=t&&!t.nodeType&&t)&&e&&!e.nodeType&&e)&&r.exports===t?n.Buffer:void 0)?r.allocUnsafe:void 0;e.exports=function(e,t){return t?e.slice():(t=e.length,t=o?o(t):new e.constructor(t),e.copy(t),t)}},57157:(e,t,n)=>{var r=n(74318);e.exports=function(e,t){return t=t?r(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.byteLength)}},93147:e=>{var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},40419:(e,t,n)=>{var r=(n=(n=n(62705))?n.prototype:void 0)?n.valueOf:void 0;e.exports=function(e){return r?Object(r.call(e)):{}}},77133:(e,t,n)=>{var r=n(74318);e.exports=function(e,t){return t=t?r(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.length)}},278:e=>{e.exports=function(e,t){var n=-1,r=e.length;for(t=t||Array(r);++n<r;)t[n]=e[n];return t}},98363:(e,t,n)=>{var r=n(34865),o=n(89465);e.exports=function(e,t,n,a){for(var i=!n,l=(n=n||{},-1),u=t.length;++l<u;){var s=t[l],c=a?a(n[s],e[s],s,n,e):void 0;void 0===c&&(c=e[s]),(i?o:r)(n,s,c)}return n}},18805:(e,t,n)=>{var r=n(98363),o=n(99551);e.exports=function(e,t){return r(e,o(e),t)}},1911:(e,t,n)=>{var r=n(98363),o=n(51442);e.exports=function(e,t){return r(e,o(e),t)}},14429:(e,t,n)=>{n=n(55639)["__core-js_shared__"],e.exports=n},99291:(e,t,n)=>{var r=n(98612);e.exports=function(e,t){return function(n,o){if(null==n)return n;if(!r(n))return e(n,o);for(var a=n.length,i=t?a:-1,l=Object(n);(t?i--:++i<a)&&!1!==o(l[i],i,l););return n}}},25063:e=>{e.exports=function(e){return function(t,n,r){for(var o=-1,a=Object(t),i=r(t),l=i.length;l--;){var u=i[e?l:++o];if(!1===n(a[u],u,a))break}return t}}},60696:(e,t,n)=>{var r=n(68630);e.exports=function(e){return r(e)?void 0:e}},38777:(e,t,n)=>{var r=n(10852);n=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),e.exports=n},67114:(e,t,n)=>{var r=n(88668),o=n(82908),a=n(74757);e.exports=function(e,t,n,i,l,u){var s=1&n,c=e.length;if(c!=(f=t.length)&&!(s&&c<f))return!1;var f=u.get(e),d=u.get(t);if(f&&d)return f==t&&d==e;var p=-1,h=!0,m=2&n?new r:void 0;for(u.set(e,t),u.set(t,e);++p<c;){var y,g=e[p],b=t[p];if(void 0!==(y=i?s?i(b,g,p,t,e,u):i(g,b,p,e,t,u):y)){if(y)continue;h=!1;break}if(m){if(!o(t,(function(e,t){if(!a(m,t)&&(g===e||l(g,e,n,i,u)))return m.push(t)}))){h=!1;break}}else if(g!==b&&!l(g,b,n,i,u)){h=!1;break}}return u.delete(e),u.delete(t),h}},18351:(e,t,n)=>{var r=n(62705),o=n(11149),a=n(77813),i=n(67114),l=n(68776),u=n(21814),s=(n=r?r.prototype:void 0)?n.valueOf:void 0;e.exports=function(e,t,n,r,c,f,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!f(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=l;case"[object Set]":if(p=p||u,e.size!=t.size&&!(1&r))return!1;var h=d.get(e);return h?h==t:(r|=2,d.set(e,t),h=i(p(e),p(t),r,c,f,d),d.delete(e),h);case"[object Symbol]":if(s)return s.call(e)==s.call(t)}return!1}},16096:(e,t,n)=>{var r=n(58234),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,i,l){var u=1&n,s=r(e),c=s.length;if(c!=r(t).length&&!u)return!1;for(var f=c;f--;){var d=s[f];if(!(u?d in t:o.call(t,d)))return!1}var p=l.get(e),h=l.get(t);if(p&&h)return p==t&&h==e;for(var m=!0,y=(l.set(e,t),l.set(t,e),u);++f<c;){var g,b=e[d=s[f]],v=t[d];if(!(void 0===(g=a?u?a(v,b,d,t,e,l):a(b,v,d,e,t,l):g)?b===v||i(b,v,n,a,l):g)){m=!1;break}y=y||"constructor"==d}return m&&!y&&(p=e.constructor)!=(h=t.constructor)&&"constructor"in e&&"constructor"in t&&!("function"==typeof p&&p instanceof p&&"function"==typeof h&&h instanceof h)&&(m=!1),l.delete(e),l.delete(t),m}},99021:(e,t,n)=>{var r=n(85564),o=n(45357),a=n(30061);e.exports=function(e){return a(o(e,void 0,r),e+"")}},31957:(e,t,n)=>{n="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,e.exports=n},58234:(e,t,n)=>{var r=n(68866),o=n(99551),a=n(3674);e.exports=function(e){return r(e,a,o)}},46904:(e,t,n)=>{var r=n(68866),o=n(51442),a=n(81704);e.exports=function(e){return r(e,a,o)}},45050:(e,t,n)=>{var r=n(37019);e.exports=function(e,t){return e=e.__data__,r(t)?e["string"==typeof t?"string":"hash"]:e.map}},1499:(e,t,n)=>{var r=n(89162),o=n(3674);e.exports=function(e){for(var t=o(e),n=t.length;n--;){var a=t[n],i=e[a];t[n]=[a,i,r(i)]}return t}},10852:(e,t,n)=>{var r=n(28458),o=n(47801);e.exports=function(e,t){return e=o(e,t),r(e)?e:void 0}},85924:(e,t,n)=>{n=n(5569)(Object.getPrototypeOf,Object),e.exports=n},89607:(e,t,n)=>{n=n(62705);var r=Object.prototype,o=r.hasOwnProperty,a=r.toString,i=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,i),n=e[i];try{var r=!(e[i]=void 0)}catch(e){}var l=a.call(e);return r&&(t?e[i]=n:delete e[i]),l}},99551:(e,t,n)=>{var r=n(34963),o=(n=n(70479),Object.prototype.propertyIsEnumerable),a=Object.getOwnPropertySymbols;e.exports=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return o.call(e,t)})))}:n},51442:(e,t,n)=>{var r=n(62488),o=n(85924),a=n(99551),i=(n=n(70479),Object.getOwnPropertySymbols);e.exports=i?function(e){for(var t=[];e;)r(t,a(e)),e=o(e);return t}:n},64160:(e,t,n)=>{var r=n(18552),o=n(57071),a=n(53818),i=n(58525),l=n(70577),u=n(44239),s=n(80346),c="[object Map]",f="[object Promise]",d="[object Set]",p="[object WeakMap]",h="[object DataView]",m=s(r),y=s(o),g=s(a),b=s(i),v=s(l);n=u,(r&&n(new r(new ArrayBuffer(1)))!=h||o&&n(new o)!=c||a&&n(a.resolve())!=f||i&&n(new i)!=d||l&&n(new l)!=p)&&(n=function(e){var t=u(e);if(e=(e="[object Object]"==t?e.constructor:void 0)?s(e):"")switch(e){case m:return h;case y:return c;case g:return f;case b:return d;case v:return p}return t}),e.exports=n},47801:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},222:(e,t,n)=>{var r=n(71811),o=n(35694),a=n(1469),i=n(65776),l=n(41780),u=n(40327);e.exports=function(e,t,n){for(var s=-1,c=(t=r(t,e)).length,f=!1;++s<c;){var d=u(t[s]);if(!(f=null!=e&&n(e,d)))break;e=e[d]}return f||++s!=c?f:!!(c=null==e?0:e.length)&&l(c)&&i(d,c)&&(a(e)||o(e))}},51789:(e,t,n)=>{var r=n(94536);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},80401:e=>{e.exports=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e}},57667:(e,t,n)=>{var r=n(94536),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t,n=this.__data__;return r?"__lodash_hash_undefined__"===(t=n[e])?void 0:t:o.call(n,e)?n[e]:void 0}},21327:(e,t,n)=>{var r=n(94536),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},81866:(e,t,n)=>{var r=n(94536);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},43824:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},29148:(e,t,n)=>{var r=n(74318),o=n(57157),a=n(93147),i=n(40419),l=n(77133);e.exports=function(e,t,n){var u=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new u(+e);case"[object DataView]":return o(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return l(e,n);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(e);case"[object RegExp]":return a(e);case"[object Symbol]":return i(e)}}},38517:(e,t,n)=>{var r=n(3118),o=n(85924),a=n(25726);e.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:r(o(e))}},37285:(e,t,n)=>{var r=n(62705),o=n(35694),a=n(1469),i=r?r.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||o(e)||!!(i&&e&&e[i])}},65776:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&-1<e&&e%1==0&&e<n}},16612:(e,t,n)=>{var r=n(77813),o=n(98612),a=n(65776),i=n(13218);e.exports=function(e,t,n){if(!i(n))return!1;var l=typeof t;return!!("number"==l?o(n)&&a(t,n.length):"string"==l&&t in n)&&r(n[t],e)}},15403:(e,t,n)=>{var r=n(1469),o=n(33448),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o(e))||i.test(e)||!a.test(e)||null!=t&&e in Object(t)}},37019:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},15346:(e,t,n)=>{n=n(14429);var r=(n=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!r&&r in e}},25726:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},89162:(e,t,n)=>{var r=n(13218);e.exports=function(e){return e==e&&!r(e)}},27040:e=>{e.exports=function(){this.__data__=[],this.size=0}},14125:(e,t,n)=>{var r=n(18470),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__;return!((e=r(t,e))<0||(e==t.length-1?t.pop():o.call(t,e,1),--this.size,0))}},82117:(e,t,n)=>{var r=n(18470);e.exports=function(e){var t=this.__data__;return(e=r(t,e))<0?void 0:t[e][1]}},67518:(e,t,n)=>{var r=n(18470);e.exports=function(e){return-1<r(this.__data__,e)}},54705:(e,t,n)=>{var r=n(18470);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},24785:(e,t,n)=>{var r=n(1989),o=n(38407),a=n(57071);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||o),string:new r}}},11285:(e,t,n)=>{var r=n(45050);e.exports=function(e){return e=r(this,e).delete(e),this.size-=e?1:0,e}},96e3:(e,t,n)=>{var r=n(45050);e.exports=function(e){return r(this,e).get(e)}},49916:(e,t,n)=>{var r=n(45050);e.exports=function(e){return r(this,e).has(e)}},95265:(e,t,n)=>{var r=n(45050);e.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},68776:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},42634:e=>{e.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},24523:(e,t,n)=>{var r=n(88306);e.exports=function(e){var t=(e=r(e,(function(e){return 500===t.size&&t.clear(),e}))).cache;return e}},94536:(e,t,n)=>{n=n(10852)(Object,"create"),e.exports=n},86916:(e,t,n)=>{n=n(5569)(Object.keys,Object),e.exports=n},33498:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},31167:(e,t,n)=>{e=n.nmd(e),n=n(31957);var r=(t=t&&!t.nodeType&&t)&&e&&!e.nodeType&&e,o=r&&r.exports===t&&n.process;t=function(){try{return r&&r.require&&r.require("util").types||o&&o.binding&&o.binding("util")}catch(e){}}(),e.exports=t},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},45357:(e,t,n)=>{var r=n(96874),o=Math.max;e.exports=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var a=arguments,i=-1,l=o(a.length-t,0),u=Array(l);++i<l;)u[i]=a[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=a[i];return s[t]=n(u),r(e,this,s)}}},40292:(e,t,n)=>{var r=n(97786),o=n(14259);e.exports=function(e,t){return t.length<2?e:r(e,o(t,0,-1))}},55639:(e,t,n)=>{n=n(31957);var r="object"==typeof self&&self&&self.Object===Object&&self;n=n||r||Function("return this")(),e.exports=n},90619:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},72385:e=>{e.exports=function(e){return this.__data__.has(e)}},21814:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},30061:(e,t,n)=>{var r=n(56560);n=n(21275)(r),e.exports=n},21275:e=>{var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var o=t(),a=16-(o-r);if(r=o,0<a){if(800<=++n)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},37465:(e,t,n)=>{var r=n(38407);e.exports=function(){this.__data__=new r,this.size=0}},63779:e=>{e.exports=function(e){var t=this.__data__;return e=t.delete(e),this.size=t.size,e}},67599:e=>{e.exports=function(e){return this.__data__.get(e)}},44758:e=>{e.exports=function(e){return this.__data__.has(e)}},34309:(e,t,n)=>{var r=n(38407),o=n(57071),a=n(83369);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var i=n.__data__;if(!o||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(i)}return n.set(e,t),this.size=n.size,this}},55514:(e,t,n)=>{n=n(24523);var r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g;n=n((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(r,(function(e,n,r,a){t.push(r?a.replace(o,"$1"):n||e)})),t})),e.exports=n},40327:(e,t,n)=>{var r=n(33448);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},80346:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},67990:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},8400:(e,t,n)=>{var r=n(14259),o=n(16612),a=n(40554),i=Math.ceil,l=Math.max;e.exports=function(e,t,n){t=(n?o(e,t,n):void 0===t)?1:l(a(t),0);var u=null==e?0:e.length;if(!u||t<1)return[];for(var s=0,c=0,f=Array(i(u/t));s<u;)f[c++]=r(e,s,s+=t);return f}},75703:e=>{e.exports=function(e){return function(){return e}}},23279:(e,t,n)=>{var r=n(13218),o=n(7771),a=n(14841),i=Math.max,l=Math.min;e.exports=function(e,t,n){var u,s,c,f,d,p,h=0,m=!1,y=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var n=u,r=s;return u=s=void 0,h=t,f=e.apply(r,n)}function v(e){var n=e-p;return void 0===p||t<=n||n<0||y&&c<=e-h}function w(){var e,n=o();if(v(n))return O(n);d=setTimeout(w,(e=t-(n-p),y?l(e,c-(n-h)):e))}function O(e){return d=void 0,g&&u?b(e):(u=s=void 0,f)}function S(){var e=o(),n=v(e);if(u=arguments,s=this,p=e,n){if(void 0===d)return h=e=p,d=setTimeout(w,t),m?b(e):f;if(y)return clearTimeout(d),d=setTimeout(w,t),b(p)}return void 0===d&&(d=setTimeout(w,t)),f}return t=a(t)||0,r(n)&&(m=!!n.leading,c=(y="maxWait"in n)?i(a(n.maxWait)||0,t):c,g="trailing"in n?!!n.trailing:g),S.cancel=function(){void 0!==d&&clearTimeout(d),u=p=s=d=void(h=0)},S.flush=function(){return void 0===d?f:O(o())},S}},66073:(e,t,n)=>{e.exports=n(84486)},77813:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},30998:(e,t,n)=>{var r=n(41848),o=n(67206),a=n(40554),i=Math.max;e.exports=function(e,t,n){var l=null==e?0:e.length;return l?((n=null==n?0:a(n))<0&&(n=i(l+n,0)),r(e,o(t,3),n)):-1}},85564:(e,t,n)=>{var r=n(21078);e.exports=function(e){return null!=e&&e.length?r(e,1):[]}},84486:(e,t,n)=>{var r=n(77412),o=n(89881),a=n(54290),i=n(1469);e.exports=function(e,t){return(i(e)?r:o)(e,a(t))}},27361:(e,t,n)=>{var r=n(97786);e.exports=function(e,t,n){return void 0===(e=null==e?void 0:r(e,t))?n:e}},79095:(e,t,n)=>{var r=n(13),o=n(222);e.exports=function(e,t){return null!=e&&o(e,t,r)}},6557:e=>{e.exports=function(e){return e}},35694:(e,t,n)=>{var r=n(9454),o=n(37005),a=(n=Object.prototype).hasOwnProperty,i=n.propertyIsEnumerable;n=r(function(){return arguments}())?r:function(e){return o(e)&&a.call(e,"callee")&&!i.call(e,"callee")},e.exports=n},1469:e=>{var t=Array.isArray;e.exports=t},98612:(e,t,n)=>{var r=n(23560),o=n(41780);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},44144:(e,t,n)=>{e=n.nmd(e);var r,o=n(55639);n=n(95062),t=(r=(r=(t=t&&!t.nodeType&&t)&&e&&!e.nodeType&&e)&&r.exports===t?o.Buffer:void 0)?r.isBuffer:void 0,e.exports=t||n},23560:(e,t,n)=>{var r=n(44239),o=n(13218);e.exports=function(e){return!!o(e)&&("[object Function]"==(e=r(e))||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e)}},41780:e=>{e.exports=function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991}},56688:(e,t,n)=>{var r=n(25588),o=n(7518);o=(n=(n=n(31167))&&n.isMap)?o(n):r,e.exports=o},13218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},37005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},68630:(e,t,n)=>{var r=n(44239),o=n(85924),a=n(37005),i=(n=Function.prototype,Object.prototype),l=n.toString,u=i.hasOwnProperty,s=l.call(Object);e.exports=function(e){return!(!a(e)||"[object Object]"!=r(e))&&(null===(e=o(e))||"function"==typeof(e=u.call(e,"constructor")&&e.constructor)&&e instanceof e&&l.call(e)==s)}},72928:(e,t,n)=>{var r=n(29221),o=n(7518);o=(n=(n=n(31167))&&n.isSet)?o(n):r,e.exports=o},33448:(e,t,n)=>{var r=n(44239),o=n(37005);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},36719:(e,t,n)=>{var r=n(38749),o=n(7518);o=(n=(n=n(31167))&&n.isTypedArray)?o(n):r,e.exports=o},3674:(e,t,n)=>{var r=n(14636),o=n(280),a=n(98612);e.exports=function(e){return(a(e)?r:o)(e)}},81704:(e,t,n)=>{var r=n(14636),o=n(10313),a=n(98612);e.exports=function(e){return a(e)?r(e,!0):o(e)}},10928:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},35161:(e,t,n)=>{var r=n(29932),o=n(67206),a=n(69199),i=n(1469);e.exports=function(e,t){return(i(e)?r:a)(e,o(t,3))}},88306:(e,t,n)=>{var r=n(83369);function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");function n(){var r=arguments,o=t?t.apply(this,r):r[0],a=n.cache;return a.has(o)?a.get(o):(r=e.apply(this,r),n.cache=a.set(o,r)||a,r)}return n.cache=new(o.Cache||r),n}o.Cache=r,e.exports=o},7771:(e,t,n)=>{var r=n(55639);e.exports=function(){return r.Date.now()}},57557:(e,t,n)=>{var r=n(29932),o=n(85990),a=n(57406),i=n(71811),l=n(98363),u=n(60696),s=n(99021),c=n(46904);n=s((function(e,t){var n={};if(null==e)return n;for(var s=!1,f=(t=r(t,(function(t){return t=i(t,e),s=s||1<t.length,t})),l(e,c(e),n),s&&(n=o(n,7,u)),t.length);f--;)a(n,t[f]);return n})),e.exports=n},78718:(e,t,n)=>{var r=n(25970);n=n(99021)((function(e,t){return null==e?{}:r(e,t)})),e.exports=n},39601:(e,t,n)=>{var r=n(40371),o=n(79152),a=n(15403),i=n(40327);e.exports=function(e){return a(e)?r(i(e)):o(e)}},70479:e=>{e.exports=function(){return[]}},95062:e=>{e.exports=function(){return!1}},23493:(e,t,n)=>{var r=n(23279),o=n(13218);e.exports=function(e,t,n){var a=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(a="leading"in n?!!n.leading:a,i="trailing"in n?!!n.trailing:i),r(e,t,{leading:a,maxWait:t,trailing:i})}},18601:(e,t,n)=>{var r=n(14841);e.exports=function(e){return e?(e=r(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},40554:(e,t,n)=>{var r=n(18601);e.exports=function(e){var t=(e=r(e))%1;return e==e?t?e-t:e:0}},14841:(e,t,n)=>{var r=n(27561),o=n(13218),a=n(33448),i=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,s=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(o(e)&&(t="function"==typeof e.valueOf?e.valueOf():e,e=o(t)?t+"":t),"string"!=typeof e)return 0===e?e:+e;e=r(e);var t=l.test(e);return t||u.test(e)?s(e.slice(2),t?2:8):i.test(e)?NaN:+e}},79833:(e,t,n)=>{var r=n(80531);e.exports=function(e){return null==e?"":r(e)}},52628:(e,t,n)=>{var r=n(47415),o=n(3674);e.exports=function(e){return null==e?[]:r(e,o(e))}},47084:function(e,t,n){!function(){"use strict";var t={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:m,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,nptable:m,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:m,lheading:/^([^\n]+)\n {0,3}(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading| {0,3}>|<\/?(?:tag)(?: +|\n|\/?>)|<(?:script|pre|style|!--))[^\n]+)*)/,text:/^[^\n]+/};function n(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||v.defaults,this.rules=t.normal,this.options.pedantic?this.rules=t.pedantic:this.options.gfm&&(this.options.tables?this.rules=t.tables:this.rules=t.gfm)}t._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,t._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,t.def=f(t.def).replace("label",t._label).replace("title",t._title).getRegex(),t.bullet=/(?:[*+-]|\d{1,9}\.)/,t.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,t.item=f(t.item,"gm").replace(/bull/g,t.bullet).getRegex(),t.list=f(t.list).replace(/bull/g,t.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+t.def.source+")").getRegex(),t._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",t._comment=/<!--(?!-?>)[\s\S]*?-->/,t.html=f(t.html,"i").replace("comment",t._comment).replace("tag",t._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),t.paragraph=f(t.paragraph).replace("hr",t.hr).replace("heading",t.heading).replace("lheading",t.lheading).replace("tag",t._tag).getRegex(),t.blockquote=f(t.blockquote).replace("paragraph",t.paragraph).getRegex(),t.normal=y({},t),t.gfm=y({},t.normal,{fences:/^ {0,3}(`{3,}|~{3,})([^`\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),t.gfm.paragraph=f(t.paragraph).replace("(?!","(?!"+t.gfm.fences.source.replace("\\1","\\2")+"|"+t.list.source.replace("\\1","\\3")+"|").getRegex(),t.tables=y({},t.gfm,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),t.pedantic=y({},t.normal,{html:f("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",t._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/}),n.rules=t,n.lex=function(e,t){return new n(t).lex(e)},n.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},n.prototype.token=function(e,n){var r,o,a,i,l,u,s,c,f,d,p,h;for(e=e.replace(/^ +$/gm,"");e;)if((o=this.rules.newline.exec(e))&&(e=e.substring(o[0].length),1<o[0].length&&this.tokens.push({type:"space"})),o=this.rules.code.exec(e)){var m=this.tokens[this.tokens.length-1];e=e.substring(o[0].length),m&&"paragraph"===m.type?m.text+="\n"+o[0].trimRight():(o=o[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?o:b(o,"\n")}))}else if(o=this.rules.fences.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"code",lang:o[2]&&o[2].trim(),text:o[3]||""});else if(o=this.rules.heading.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"heading",depth:o[1].length,text:o[2]});else if((o=this.rules.nptable.exec(e))&&(i={type:"table",header:g(o[1].replace(/^ *| *\| *$/g,"")),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3]?o[3].replace(/\n$/,"").split("\n"):[]}).header.length===i.align.length){for(e=e.substring(o[0].length),c=0;c<i.align.length;c++)/^ *-+: *$/.test(i.align[c])?i.align[c]="right":/^ *:-+: *$/.test(i.align[c])?i.align[c]="center":/^ *:-+ *$/.test(i.align[c])?i.align[c]="left":i.align[c]=null;for(c=0;c<i.cells.length;c++)i.cells[c]=g(i.cells[c],i.header.length);this.tokens.push(i)}else if(o=this.rules.hr.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"hr"});else if(o=this.rules.blockquote.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"blockquote_start"}),o=o[0].replace(/^ *> ?/gm,""),this.token(o,n),this.tokens.push({type:"blockquote_end"});else if(o=this.rules.list.exec(e)){for(e=e.substring(o[0].length),m=1<(a=o[2]).length,this.tokens.push(l={type:"list_start",ordered:m,start:m?+a:"",loose:!1}),r=!(u=[]),d=(o=o[0].match(this.rules.item)).length,c=0;c<d;c++)s=(i=o[c]).length,~(i=i.replace(/^ *([*+-]|\d+\.) */,"")).indexOf("\n ")&&(s-=i.length,i=this.options.pedantic?i.replace(/^ {1,4}/gm,""):i.replace(new RegExp("^ {1,"+s+"}","gm"),"")),c!==d-1&&(s=t.bullet.exec(o[c+1])[0],(1<a.length?1===s.length:1<s.length||this.options.smartLists&&s!==a)&&(e=o.slice(c+1).join("\n")+e,c=d-1)),s=r||/\n\n(?!\s*$)/.test(i),c!==d-1&&(r="\n"===i.charAt(i.length-1),s=s||r),s&&(l.loose=!0),h=void 0,(p=/^\[[ xX]\] /.test(i))&&(h=" "!==i[1],i=i.replace(/^\[[ xX]\] +/,"")),u.push(p={type:"list_item_start",task:p,checked:h,loose:s}),this.tokens.push(p),this.token(i,!1),this.tokens.push({type:"list_item_end"});if(l.loose)for(d=u.length,c=0;c<d;c++)u[c].loose=!0;this.tokens.push({type:"list_end"})}else if(o=this.rules.html.exec(e))e=e.substring(o[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===o[1]||"script"===o[1]||"style"===o[1]),text:o[0]});else if(n&&(o=this.rules.def.exec(e)))e=e.substring(o[0].length),o[3]&&(o[3]=o[3].substring(1,o[3].length-1)),f=o[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[f]||(this.tokens.links[f]={href:o[2],title:o[3]});else if((o=this.rules.table.exec(e))&&(i={type:"table",header:g(o[1].replace(/^ *| *\| *$/g,"")),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3]?o[3].replace(/\n$/,"").split("\n"):[]}).header.length===i.align.length){for(e=e.substring(o[0].length),c=0;c<i.align.length;c++)/^ *-+: *$/.test(i.align[c])?i.align[c]="right":/^ *:-+: *$/.test(i.align[c])?i.align[c]="center":/^ *:-+ *$/.test(i.align[c])?i.align[c]="left":i.align[c]=null;for(c=0;c<i.cells.length;c++)i.cells[c]=g(i.cells[c].replace(/^ *\| *| *\| *$/g,""),i.header.length);this.tokens.push(i)}else if(o=this.rules.lheading.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"heading",depth:"="===o[2]?1:2,text:o[1]});else if(n&&(o=this.rules.paragraph.exec(e)))e=e.substring(o[0].length),this.tokens.push({type:"paragraph",text:"\n"===o[1].charAt(o[1].length-1)?o[1].slice(0,-1):o[1]});else if(o=this.rules.text.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"text",text:o[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var r={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:m,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(href(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:m,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};function o(e,t){if(this.options=t||v.defaults,this.links=e,this.rules=r.normal,this.renderer=this.options.renderer||new a,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=r.pedantic:this.options.gfm&&(this.options.breaks?this.rules=r.breaks:this.rules=r.gfm)}function a(e){this.options=e||v.defaults}function i(){}function l(e){this.tokens=[],this.token=null,this.options=e||v.defaults,this.options.renderer=this.options.renderer||new a,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new u}function u(){this.seen={}}function s(e,t){if(t){if(s.escapeTest.test(e))return e.replace(s.escapeReplace,(function(e){return s.replacements[e]}))}else if(s.escapeTestNoEncode.test(e))return e.replace(s.escapeReplaceNoEncode,(function(e){return s.replacements[e]}));return e}function c(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}function f(e,t){return e=e.source||e,t=t||"",{replace:function(t,n){return n=(n=n.source||n).replace(/(^|[^\[])\^/g,"$1"),e=e.replace(t,n),this},getRegex:function(){return new RegExp(e,t)}}}function d(e,t,n){if(e){try{var r=decodeURIComponent(c(n)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}t&&!h.test(n)&&(n=function(e,t){return p[" "+e]||(/^[^:]+:\/*[^/]*$/.test(e)?p[" "+e]=e+"/":p[" "+e]=b(e,"/",!0)),e=p[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+t:e+t}(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n}r._punctuation="!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~",r.em=f(r.em).replace(/punctuation/g,r._punctuation).getRegex(),r._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,r._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,r._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,r.autolink=f(r.autolink).replace("scheme",r._scheme).replace("email",r._email).getRegex(),r._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,r.tag=f(r.tag).replace("comment",t._comment).replace("attribute",r._attribute).getRegex(),r._label=/(?:\[[^\[\]]*\]|\\[\[\]]?|`[^`]*`|`(?!`)|[^\[\]\\`])*?/,r._href=/\s*(<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*)/,r._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,r.link=f(r.link).replace("label",r._label).replace("href",r._href).replace("title",r._title).getRegex(),r.reflink=f(r.reflink).replace("label",r._label).getRegex(),r.normal=y({},r),r.pedantic=y({},r.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:f(/^!?\[(label)\]\((.*?)\)/).replace("label",r._label).getRegex(),reflink:f(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",r._label).getRegex()}),r.gfm=y({},r.normal,{escape:f(r.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),r.gfm.url=f(r.gfm.url,"i").replace("email",r.gfm._extended_email).getRegex(),r.breaks=y({},r.gfm,{br:f(r.br).replace("{2,}","*").getRegex(),text:f(r.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),o.rules=r,o.output=function(e,t,n){return new o(t,n).output(e)},o.prototype.output=function(e){for(var t,n,r,a,i="";e;)if(r=this.rules.escape.exec(e))e=e.substring(r[0].length),i+=s(r[1]);else if(r=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(r[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(r[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(this.inRawBlock=!1),e=e.substring(r[0].length),i+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):s(r[0]):r[0];else if(r=this.rules.link.exec(e)){var l,u=function(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=0,r=0;r<e.length;r++)if("\\"===e[r])r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&--n<0)return r;return-1}(r[2],"()");-1<u&&(l=r[0].length-(r[2].length-u)-(r[3]||"").length,r[2]=r[2].substring(0,u),r[0]=r[0].substring(0,l).trim(),r[3]=""),e=e.substring(r[0].length),this.inLink=!0,u=r[2],l=this.options.pedantic?(t=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(u))?(u=t[1],t[3]):"":r[3]?r[3].slice(1,-1):"",u=u.trim().replace(/^<([\s\S]*)>$/,"$1"),i+=this.outputLink(r,{href:o.escapes(u),title:o.escapes(l)}),this.inLink=!1}else if((r=this.rules.reflink.exec(e))||(r=this.rules.nolink.exec(e)))e=e.substring(r[0].length),t=(r[2]||r[1]).replace(/\s+/g," "),(t=this.links[t.toLowerCase()])&&t.href?(this.inLink=!0,i+=this.outputLink(r,t),this.inLink=!1):(i+=r[0].charAt(0),e=r[0].substring(1)+e);else if(r=this.rules.strong.exec(e))e=e.substring(r[0].length),i+=this.renderer.strong(this.output(r[4]||r[3]||r[2]||r[1]));else if(r=this.rules.em.exec(e))e=e.substring(r[0].length),i+=this.renderer.em(this.output(r[6]||r[5]||r[4]||r[3]||r[2]||r[1]));else if(r=this.rules.code.exec(e))e=e.substring(r[0].length),i+=this.renderer.codespan(s(r[2].trim(),!0));else if(r=this.rules.br.exec(e))e=e.substring(r[0].length),i+=this.renderer.br();else if(r=this.rules.del.exec(e))e=e.substring(r[0].length),i+=this.renderer.del(this.output(r[1]));else if(r=this.rules.autolink.exec(e))e=e.substring(r[0].length),u="@"===r[2]?"mailto:"+(n=s(this.mangle(r[1]))):n=s(r[1]),i+=this.renderer.link(u,null,n);else if(!this.inLink&&(r=this.rules.url.exec(e))){if("@"===r[2])u="mailto:"+(n=s(r[0]));else{for(;a=r[0],r[0]=this.rules._backpedal.exec(r[0])[0],a!==r[0];);n=s(r[0]),u="www."===r[1]?"http://"+n:n}e=e.substring(r[0].length),i+=this.renderer.link(u,null,n)}else if(r=this.rules.text.exec(e))e=e.substring(r[0].length),this.inRawBlock?i+=this.renderer.text(r[0]):i+=this.renderer.text(s(this.smartypants(r[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return i},o.escapes=function(e){return e&&e.replace(o.rules._escapes,"$1")},o.prototype.outputLink=function(e,t){var n=t.href;return t=t.title?s(t.title):null,"!"!==e[0].charAt(0)?this.renderer.link(n,t,this.output(e[1])):this.renderer.image(n,t,s(e[1]))},o.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,""):e},o.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",r=e.length,o=0;o<r;o++)t=e.charCodeAt(o),n+="&#"+(t=.5<Math.random()?"x"+t.toString(16):t)+";";return n},a.prototype.code=function(e,t,n){var r;return t=(t||"").match(/\S*/)[0],this.options.highlight&&null!=(r=this.options.highlight(e,t))&&r!==e&&(n=!0,e=r),t?'<pre><code class="'+this.options.langPrefix+s(t,!0)+'">'+(n?e:s(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:s(e,!0))+"</code></pre>"},a.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},a.prototype.html=function(e){return e},a.prototype.heading=function(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},a.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},a.prototype.list=function(e,t,n){var r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"},a.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},a.prototype.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},a.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},a.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n"+(t=t&&"<tbody>"+t+"</tbody>")+"</table>\n"},a.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},a.prototype.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},a.prototype.strong=function(e){return"<strong>"+e+"</strong>"},a.prototype.em=function(e){return"<em>"+e+"</em>"},a.prototype.codespan=function(e){return"<code>"+e+"</code>"},a.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},a.prototype.del=function(e){return"<del>"+e+"</del>"},a.prototype.link=function(e,t,n){return null===(e=d(this.options.sanitize,this.options.baseUrl,e))?n:(e='<a href="'+s(e)+'"',t&&(e+=' title="'+t+'"'),e+">"+n+"</a>")},a.prototype.image=function(e,t,n){return null===(e=d(this.options.sanitize,this.options.baseUrl,e))?n:(e='<img src="'+e+'" alt="'+n+'"',t&&(e+=' title="'+t+'"'),e+(this.options.xhtml?"/>":">"))},a.prototype.text=function(e){return e},i.prototype.strong=i.prototype.em=i.prototype.codespan=i.prototype.del=i.prototype.text=function(e){return e},i.prototype.link=i.prototype.image=function(e,t,n){return""+n},i.prototype.br=function(){return""},l.parse=function(e,t){return new l(t).parse(e)},l.prototype.parse=function(e){this.inline=new o(e.links,this.options),this.inlineText=new o(e.links,y({},this.options,{renderer:new i})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},l.prototype.next=function(){return this.token=this.tokens.pop(),this.token},l.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},l.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},l.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,c(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":for(var e,t,n="",r="",o="",a=0;a<this.token.header.length;a++)o+=this.renderer.tablecell(this.inline.output(this.token.header[a]),{header:!0,align:this.token.align[a]});for(n+=this.renderer.tablerow(o),a=0;a<this.token.cells.length;a++){for(e=this.token.cells[a],o="",t=0;t<e.length;t++)o+=this.renderer.tablecell(this.inline.output(e[t]),{header:!1,align:this.token.align[t]});r+=this.renderer.tablerow(o)}return this.renderer.table(n,r);case"blockquote_start":for(r="";"blockquote_end"!==this.next().type;)r+=this.tok();return this.renderer.blockquote(r);case"list_start":r="",n=this.token.ordered;for(var i=this.token.start;"list_end"!==this.next().type;)r+=this.tok();return this.renderer.list(r,n,i);case"list_item_start":r="";var l=this.token.loose;for(n=this.token.checked,i=this.token.task,this.token.task&&(r+=this.renderer.checkbox(n));"list_item_end"!==this.next().type;)r+=l||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(r,i,n);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:if(i='Token with "'+this.token.type+'" type was not found.',!this.options.silent)throw new Error(i);console.log(i)}},u.prototype.slug=function(e){var t=e.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(t))for(var n=t;this.seen[n]++,t=n+"-"+this.seen[n],this.seen.hasOwnProperty(t););return this.seen[t]=0,t},s.escapeTest=/[&<>"']/,s.escapeReplace=/[&<>"']/g,s.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},s.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,s.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;var p={},h=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function m(){}function y(e){for(var t,n,r=1;r<arguments.length;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function g(e,t){var n=e.replace(/\|/g,(function(e,t,n){for(var r=!1,o=t;0<=--o&&"\\"===n[o];)r=!r;return r?"|":" |"})).split(/ \|/),r=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function b(e,t,n){if(0===e.length)return"";for(var r=0;r<e.length;){var o=e.charAt(e.length-r-1);if(o!==t||n){if(o===t||!n)break;r++}else r++}return e.substr(0,e.length-r)}function v(e,t,r){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(r||"function"==typeof t){r||(r=t,t=null);var o,a=(t=y({},v.defaults,t||{})).highlight,i=0;try{o=n.lex(e,t)}catch(e){return r(e)}var u=o.length,c=function(e){if(e)return t.highlight=a,r(e);var n;try{n=l.parse(o,t)}catch(n){e=n}return t.highlight=a,e?r(e):r(null,n)};if(!a||a.length<3)return c();if(delete t.highlight,!u)return c();for(;i<o.length;i++)!function(e){"code"!==e.type?--u||c():a(e.text,e.lang,(function(t,n){return t?c(t):null==n||n===e.text?--u||c():(e.text=n,e.escaped=!0,void(--u||c()))}))}(o[i])}else try{return t=t&&y({},v.defaults,t),l.parse(n.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||v.defaults).silent)return"<p>An error occurred:</p><pre>"+s(e.message+"",!0)+"</pre>";throw e}}m.exec=m,v.options=v.setOptions=function(e){return y(v.defaults,e),v},v.defaults=(v.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new a,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tables:!0,xhtml:!1}})(),v.Parser=l,v.parser=l.parse,v.Renderer=a,v.TextRenderer=i,v.Lexer=n,v.lexer=n.lex,v.InlineLexer=o,v.inlineLexer=o.output,v.Slugger=u,e.exports=v.parse=v}(this||"undefined"==typeof window&&n.g)},2568:(e,t,n)=>{function r(e,t){e.constructor==String?e=(t&&"binary"===t.encoding?l:a).stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=o.bytesToWords(e),u=(t=8*e.length,1732584193),s=-271733879,c=-1732584194,f=271733878,d=0;d<n.length;d++)n[d]=16711935&(n[d]<<8|n[d]>>>24)|4278255360&(n[d]<<24|n[d]>>>8);n[t>>>5]|=128<<t%32,n[14+(64+t>>>9<<4)]=t;var p=r._ff,h=r._gg,m=r._hh,y=r._ii;for(d=0;d<n.length;d+=16){var g=u,b=s,v=c,w=f;u=p(u,s,c,f,n[d+0],7,-680876936),f=p(f,u,s,c,n[d+1],12,-389564586),c=p(c,f,u,s,n[d+2],17,606105819),s=p(s,c,f,u,n[d+3],22,-1044525330),u=p(u,s,c,f,n[d+4],7,-176418897),f=p(f,u,s,c,n[d+5],12,1200080426),c=p(c,f,u,s,n[d+6],17,-1473231341),s=p(s,c,f,u,n[d+7],22,-45705983),u=p(u,s,c,f,n[d+8],7,1770035416),f=p(f,u,s,c,n[d+9],12,-1958414417),c=p(c,f,u,s,n[d+10],17,-42063),s=p(s,c,f,u,n[d+11],22,-1990404162),u=p(u,s,c,f,n[d+12],7,1804603682),f=p(f,u,s,c,n[d+13],12,-40341101),c=p(c,f,u,s,n[d+14],17,-1502002290),u=h(u,s=p(s,c,f,u,n[d+15],22,1236535329),c,f,n[d+1],5,-165796510),f=h(f,u,s,c,n[d+6],9,-1069501632),c=h(c,f,u,s,n[d+11],14,643717713),s=h(s,c,f,u,n[d+0],20,-373897302),u=h(u,s,c,f,n[d+5],5,-701558691),f=h(f,u,s,c,n[d+10],9,38016083),c=h(c,f,u,s,n[d+15],14,-660478335),s=h(s,c,f,u,n[d+4],20,-405537848),u=h(u,s,c,f,n[d+9],5,568446438),f=h(f,u,s,c,n[d+14],9,-1019803690),c=h(c,f,u,s,n[d+3],14,-187363961),s=h(s,c,f,u,n[d+8],20,1163531501),u=h(u,s,c,f,n[d+13],5,-1444681467),f=h(f,u,s,c,n[d+2],9,-51403784),c=h(c,f,u,s,n[d+7],14,1735328473),u=m(u,s=h(s,c,f,u,n[d+12],20,-1926607734),c,f,n[d+5],4,-378558),f=m(f,u,s,c,n[d+8],11,-2022574463),c=m(c,f,u,s,n[d+11],16,1839030562),s=m(s,c,f,u,n[d+14],23,-35309556),u=m(u,s,c,f,n[d+1],4,-1530992060),f=m(f,u,s,c,n[d+4],11,1272893353),c=m(c,f,u,s,n[d+7],16,-155497632),s=m(s,c,f,u,n[d+10],23,-1094730640),u=m(u,s,c,f,n[d+13],4,681279174),f=m(f,u,s,c,n[d+0],11,-358537222),c=m(c,f,u,s,n[d+3],16,-722521979),s=m(s,c,f,u,n[d+6],23,76029189),u=m(u,s,c,f,n[d+9],4,-640364487),f=m(f,u,s,c,n[d+12],11,-421815835),c=m(c,f,u,s,n[d+15],16,530742520),u=y(u,s=m(s,c,f,u,n[d+2],23,-995338651),c,f,n[d+0],6,-198630844),f=y(f,u,s,c,n[d+7],10,1126891415),c=y(c,f,u,s,n[d+14],15,-1416354905),s=y(s,c,f,u,n[d+5],21,-57434055),u=y(u,s,c,f,n[d+12],6,1700485571),f=y(f,u,s,c,n[d+3],10,-1894986606),c=y(c,f,u,s,n[d+10],15,-1051523),s=y(s,c,f,u,n[d+1],21,-2054922799),u=y(u,s,c,f,n[d+8],6,1873313359),f=y(f,u,s,c,n[d+15],10,-30611744),c=y(c,f,u,s,n[d+6],15,-1560198380),s=y(s,c,f,u,n[d+13],21,1309151649),u=y(u,s,c,f,n[d+4],6,-145523070),f=y(f,u,s,c,n[d+11],10,-1120210379),c=y(c,f,u,s,n[d+2],15,718787259),s=y(s,c,f,u,n[d+9],21,-343485551),u=u+g>>>0,s=s+b>>>0,c=c+v>>>0,f=f+w>>>0}return o.endian([u,s,c,f])}var o,a,i,l;o=n(71012),a=n(40487).utf8,i=n(48738),l=n(40487).bin,r._ff=function(e,t,n,r,o,a,i){return((e=e+(t&n|~t&r)+(o>>>0)+i)<<a|e>>>32-a)+t},r._gg=function(e,t,n,r,o,a,i){return((e=e+(t&r|n&~r)+(o>>>0)+i)<<a|e>>>32-a)+t},r._hh=function(e,t,n,r,o,a,i){return((e=e+(t^n^r)+(o>>>0)+i)<<a|e>>>32-a)+t},r._ii=function(e,t,n,r,o,a,i){return((e=e+(n^(t|~r))+(o>>>0)+i)<<a|e>>>32-a)+t},r._blocksize=16,r._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);return e=o.wordsToBytes(r(e,t)),t&&t.asBytes?e:t&&t.asString?l.bytesToString(e):o.bytesToHex(e)}},4536:(e,t,n)=>{"use strict";var r=n(67294),o=n(85354),a=n(45697);function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}n(87641);var l=i(r),u=i(o),s=i(a),c=1073741823,f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:{};o=l.default.createContext||function(e,t){var n,o="__create-react-context-"+(f[a="__global_unique_id__"]=(f[a]||0)+1)+"__",a=function(e){function n(){var t,n,r=e.apply(this,arguments)||this;return r.emitter=(t=r.props.value,n=[],{on:function(e){n.push(e)},off:function(e){n=n.filter((function(t){return t!==e}))},get:function(){return t},set:function(e,r){t=e,n.forEach((function(e){return e(t,r)}))}}),r}u.default(n,e);var r=n.prototype;return r.getChildContext=function(){var e={};return e[o]=this.emitter,e},r.componentWillReceiveProps=function(e){var n,r,o,a;this.props.value!==e.value&&((o=n=this.props.value)===(a=r=e.value)?0===o&&1/o!=1/a:o==o||a==a)&&(o="function"==typeof t?t(n,r):c,0!=(o|=0)&&this.emitter.set(e.value,o))},r.render=function(){return this.props.children},n}(r.Component),i=(a.childContextTypes=((i={})[o]=s.default.object.isRequired,i),function(t){function n(){var e=t.apply(this,arguments)||this;return e.state={value:e.getValue()},e.onUpdate=function(t,n){0!=((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}u.default(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){e=e.observedBits,this.observedBits=null==e?c:e},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?c:e},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():e},r.render=function(){return e=this.props.children,(Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(r.Component));return i.contextTypes=((n={})[o]=s.default.object,n),{Provider:a,Consumer:i}},e.exports=o},7253:(e,t,n)=>{"use strict";n.r(t)},45030:(e,t,n)=>{"use strict";n.r(t)},15518:(e,t,n)=>{"use strict";n.r(t)},27418:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},r)).join("")?void 0:1}catch(e){return}}()?Object.assign:function(e,o){for(var a,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var u in a=Object(arguments[l]))n.call(a,u)&&(i[u]=a[u]);if(t)for(var s=t(a),c=0;c<s.length;c++)r.call(a,s[c])&&(i[s[c]]=a[s[c]])}return i}},26470:e=>{"use strict";function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var n,r="",o=0,a=-1,i=0,l=0;l<=e.length;++l){if(l<e.length)n=e.charCodeAt(l);else{if(47===n)break;n=47}if(47===n){if(a!==l-1&&1!==i)if(a!==l-1&&2===i){if(r.length<2||2!==o||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(2<r.length){var u=r.lastIndexOf("/");if(u!==r.length-1){o=-1===u?(r="",0):(r=r.slice(0,u)).length-1-r.lastIndexOf("/"),a=l,i=0;continue}}else if(2===r.length||1===r.length){r="",a=l,i=o=0;continue}t&&(0<r.length?r+="/..":r="..",o=2)}else 0<r.length?r+="/"+e.slice(a+1,l):r=e.slice(a+1,l),o=l-a-1;a=l,i=0}else 46===n&&-1!==i?++i:i=-1}return r}var r={resolve:function(){for(var e,r="",o=!1,a=arguments.length-1;-1<=a&&!o;a--){var i=0<=a?arguments[a]:e=void 0===e?process.cwd():e;t(i),0!==i.length&&(r=i+"/"+r,o=47===i.charCodeAt(0))}return r=n(r,!o),o?0<r.length?"/"+r:"/":0<r.length?r:"."},normalize:function(e){if(t(e),0===e.length)return".";var r=47===e.charCodeAt(0),o=47===e.charCodeAt(e.length-1);return 0<(e=0!==(e=n(e,!r)).length||r?e:".").length&&o&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return t(e),0<e.length&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,n=0;n<arguments.length;++n){var o=arguments[n];t(o),0<o.length&&(void 0===e?e=o:e+="/"+o)}return void 0===e?".":r.normalize(e)},relative:function(e,n){if(t(e),t(n),e===n)return"";if((e=r.resolve(e))===(n=r.resolve(n)))return"";for(var o=1;o<e.length&&47===e.charCodeAt(o);++o);for(var a=e.length,i=a-o,l=1;l<n.length&&47===n.charCodeAt(l);++l);for(var u=n.length-l,s=i<u?i:u,c=-1,f=0;f<=s;++f){if(f===s){if(s<u){if(47===n.charCodeAt(l+f))return n.slice(l+f+1);if(0===f)return n.slice(l+f)}else s<i&&(47===e.charCodeAt(o+f)?c=f:0===f&&(c=0));break}var d=e.charCodeAt(o+f);if(d!==n.charCodeAt(l+f))break;47===d&&(c=f)}var p="";for(f=o+c+1;f<=a;++f)f!==a&&47!==e.charCodeAt(f)||(0===p.length?p+="..":p+="/..");return 0<p.length?p+n.slice(l+c):(47===n.charCodeAt(l+=c)&&++l,n.slice(l))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var n=47===e.charCodeAt(0),r=-1,o=!0,a=e.length-1;1<=a;--a)if(47===e.charCodeAt(a)){if(!o){r=a;break}}else o=!1;return-1===r?n?"/":".":n&&1===r?"//":e.slice(0,r)},basename:function(e,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');t(e);var r=0,o=-1,a=!0;if(void 0!==n&&0<n.length&&n.length<=e.length){if(n.length===e.length&&n===e)return"";for(var i=n.length-1,l=-1,u=e.length-1;0<=u;--u){var s=e.charCodeAt(u);if(47===s){if(!a){r=u+1;break}}else-1===l&&(a=!1,l=u+1),0<=i&&(s===n.charCodeAt(i)?-1==--i&&(o=u):(i=-1,o=l))}return r===o?o=l:-1===o&&(o=e.length),e.slice(r,o)}for(u=e.length-1;0<=u;--u)if(47===e.charCodeAt(u)){if(!a){r=u+1;break}}else-1===o&&(a=!1,o=u+1);return-1===o?"":e.slice(r,o)},extname:function(e){t(e);for(var n=-1,r=0,o=-1,a=!0,i=0,l=e.length-1;0<=l;--l){var u=e.charCodeAt(l);if(47===u){if(a)continue;r=l+1;break}-1===o&&(a=!1,o=l+1),46===u?-1===n?n=l:1!==i&&(i=1):-1!==n&&(i=-1)}return-1===n||-1===o||0===i||1===i&&n===o-1&&n===r+1?"":e.slice(n,o)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return t=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||""),t?t===e.root?t+n:t+"/"+n:n;var t,n},parse:function(e){t(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;for(var r,o=47===e.charCodeAt(0),a=o?(n.root="/",1):0,i=-1,l=0,u=-1,s=!0,c=e.length-1,f=0;a<=c;--c){if(47===(r=e.charCodeAt(c))){if(s)continue;l=c+1;break}-1===u&&(s=!1,u=c+1),46===r?-1===i?i=c:1!==f&&(f=1):-1!==i&&(f=-1)}return-1===i||-1===u||0===f||1===f&&i===u-1&&i===l+1?-1!==u&&(n.base=n.name=0===l&&o?e.slice(1,u):e.slice(l,u)):(0===l&&o?(n.name=e.slice(1,i),n.base=e.slice(1,u)):(n.name=e.slice(l,i),n.base=e.slice(l,u)),n.ext=e.slice(i,u)),0<l?n.dir=e.slice(0,l-1):o&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,e.exports=r},14779:(e,t,n)=>{var r=n(5826),o=(e.exports=function e(t,n,o){if(r(n)||(o=n||o,n=[]),o=o||{},t instanceof RegExp){var i=t,l=n,u=i.source.match(/\((?!\?)/g);if(u)for(var d=0;d<u.length;d++)l.push({name:d,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return s(i,l)}if(r(t)){for(var p=t,h=n,m=o,y=[],g=0;g<p.length;g++)y.push(e(p[g],h,m).source);return s(new RegExp("(?:"+y.join("|")+")",c(m)),h)}return i=n,f(a(t,n=o),i,n)},e.exports.parse=a,e.exports.compile=function(e,t){return l(a(e,t),t)},e.exports.tokensToFunction=l,e.exports.tokensToRegExp=f,new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g"));function a(e,t){for(var n=[],r=0,a=0,i="",l=t&&t.delimiter||"/";null!=(p=o.exec(e));){var s,c,f,d,p,h=p[0],m=p[1],y=p.index;i+=e.slice(a,y),a=y+h.length,m?i+=m[1]:(y=e[a],h=p[2],m=p[3],s=p[4],c=p[5],f=p[6],d=p[7],i&&(n.push(i),i=""),y=null!=h&&null!=y&&y!==h,p=p[2]||l,n.push({name:m||r++,prefix:h||"",delimiter:p,optional:"?"===f||"*"===f,repeat:"+"===f||"*"===f,partial:y,asterisk:!!d,pattern:(m=s||c)?m.replace(/([=!:$\/()])/g,"\\$1"):d?".*":"[^"+u(p)+"]+?"}))}return a<e.length&&(i+=e.substr(a)),i&&n.push(i),n}function i(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function l(e,t){for(var n=new Array(e.length),o=0;o<e.length;o++)"object"==typeof e[o]&&(n[o]=new RegExp("^(?:"+e[o].pattern+")$",c(t)));return function(t,o){for(var a="",l=t||{},u=(o||{}).pretty?i:encodeURIComponent,s=0;s<e.length;s++){var c=e[s];if("string"==typeof c)a+=c;else{var f,d=l[c.name];if(null==d){if(c.optional){c.partial&&(a+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(r(d)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var p=0;p<d.length;p++){if(f=u(d[p]),!n[s].test(f))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(0===p?c.prefix:c.delimiter)+f}}else{if(f=c.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):u(d),!n[s].test(f))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+f+'"');a+=c.prefix+f}}}return a}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function s(e,t){return e.keys=t,e}function c(e){return e&&e.sensitive?"":"i"}function f(e,t,n){r(t)||(n=t||n,t=[]);for(var o=(n=n||{}).strict,a=!1!==n.end,i="",l=0;l<e.length;l++){var f,d,p=e[l];"string"==typeof p?i+=u(p):(f=u(p.prefix),d="(?:"+p.pattern+")",t.push(p),p.repeat&&(d+="(?:"+f+d+")*"),i+=d=p.optional?p.partial?f+"("+d+")?":"(?:"+f+"("+d+"))?":f+"("+d+")")}var h=u(n.delimiter||"/"),m=i.slice(-h.length)===h;return o||(i=(m?i.slice(0,-h.length):i)+"(?:"+h+"(?=$))?"),i+=a?"$":o&&m?"":"(?="+h+"|$)",s(new RegExp("^"+i,c(n)),t)}},92703:(e,t,n)=>{"use strict";var r=n(50414);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,a,i){if(i!==r)throw(i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")).name="Invariant Violation",i}function t(){return e}var n={array:e.isRequired=e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return n.PropTypes=n}},45697:(e,t,n)=>{e.exports=n(92703)()},50414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3655:(e,t,n)=>{var r=n(32792);function o(e){this.mode=r.MODE_8BIT_BYTE,this.data=e}o.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}},e.exports=o},27321:e=>{function t(){this.buffer=new Array,this.length=0}t.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},49381:e=>{e.exports={L:1,M:0,Q:3,H:2}},32832:(e,t,n)=>{var r=n(11518);function o(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&0==e[n];)n++;this.num=new Array(e.length-n+t);for(var r=0;r<e.length-n;r++)this.num[r]=e[r+n]}o.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),n=0;n<this.getLength();n++)for(var a=0;a<e.getLength();a++)t[n+a]^=r.gexp(r.glog(this.get(n))+r.glog(e.get(a)));return new o(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=r.glog(this.get(0))-r.glog(e.get(0)),n=new Array(this.getLength()),a=0;a<this.getLength();a++)n[a]=this.get(a);for(a=0;a<e.getLength();a++)n[a]^=r.gexp(r.glog(e.get(a))+t);return new o(n,0).mod(e)}},e.exports=o},14450:(e,t,n)=>{var r=n(3655),o=n(17611),a=n(27321),i=n(93160),l=n(32832);function u(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}(n=u.prototype).addData=function(e){e=new r(e),this.dataList.push(e),this.dataCache=null},n.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},n.getModuleCount=function(){return this.moduleCount},n.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=o.getRSBlocks(e,this.errorCorrectLevel),n=new a,r=0,l=0;l<t.length;l++)r+=t[l].dataCount;for(l=0;l<this.dataList.length;l++){var u=this.dataList[l];n.put(u.mode,4),n.put(u.getLength(),i.getLengthInBits(u.mode,e)),u.write(n)}if(n.getLengthInBits()<=8*r)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},n.makeImpl=function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[n][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),7<=this.typeNumber&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=u.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},n.setupPositionProbePattern=function(e,t){for(var n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(var r=-1;r<=7;r++)t+r<=-1||this.moduleCount<=t+r||(this.modules[e+n][t+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},n.getBestMaskPattern=function(){for(var e=0,t=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=i.getLostPoint(this);(0==n||r<e)&&(e=r,t=n)}return t},n.createMovieClip=function(e,t,n){var r=e.createEmptyMovieClip(t,n);this.make();for(var o=0;o<this.modules.length;o++)for(var a=+o,i=0;i<this.modules[o].length;i++){var l=+i;this.modules[o][i]&&(r.beginFill(0,100),r.moveTo(l,a),r.lineTo(1+l,a),r.lineTo(1+l,1+a),r.lineTo(l,1+a),r.endFill())}return r},n.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},n.setupPositionAdjustPattern=function(){for(var e=i.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var r=e[t],o=e[n];if(null==this.modules[r][o])for(var a=-2;a<=2;a++)for(var l=-2;l<=2;l++)this.modules[r+a][o+l]=-2==a||2==a||-2==l||2==l||0==a&&0==l}},n.setupTypeNumber=function(e){for(var t=i.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var r=!e&&1==(t>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(n=0;n<18;n++)r=!e&&1==(t>>n&1),this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r},n.setupTypeInfo=function(e,t){t=this.errorCorrectLevel<<3|t;for(var n=i.getBCHTypeInfo(t),r=0;r<15;r++){var o=!e&&1==(n>>r&1);r<6?this.modules[r][8]=o:r<8?this.modules[r+1][8]=o:this.modules[this.moduleCount-15+r][8]=o}for(r=0;r<15;r++)o=!e&&1==(n>>r&1),r<8?this.modules[8][this.moduleCount-r-1]=o:r<9?this.modules[8][15-r-1+1]=o:this.modules[8][15-r-1]=o;this.modules[this.moduleCount-8][8]=!e},n.mapData=function(e,t){for(var n=-1,r=this.moduleCount-1,o=7,a=0,l=this.moduleCount-1;0<l;l-=2)for(6==l&&l--;;){for(var u,s,c=0;c<2;c++)null==this.modules[r][l-c]&&(u=!1,a<e.length&&(u=1==(e[a]>>>o&1)),s=i.getMask(t,r,l-c),this.modules[r][l-c]=u=s?!u:u,-1==--o&&(a++,o=7));if((r+=n)<0||this.moduleCount<=r){r-=n,n=-n;break}}},u.PAD0=236,u.PAD1=17,u.createData=function(e,t,n){for(var r=o.getRSBlocks(e,t),l=new a,s=0;s<n.length;s++){var c=n[s];l.put(c.mode,4),l.put(c.getLength(),i.getLengthInBits(c.mode,e)),c.write(l)}var f=0;for(s=0;s<r.length;s++)f+=r[s].dataCount;if(l.getLengthInBits()>8*f)throw new Error("code length overflow. ("+l.getLengthInBits()+">"+8*f+")");for(l.getLengthInBits()+4<=8*f&&l.put(0,4);l.getLengthInBits()%8!=0;)l.putBit(!1);for(;!(l.getLengthInBits()>=8*f||(l.put(u.PAD0,8),l.getLengthInBits()>=8*f));)l.put(u.PAD1,8);return u.createBytes(l,r)},u.createBytes=function(e,t){for(var n=0,r=0,o=0,a=new Array(t.length),u=new Array(t.length),s=0;s<t.length;s++){var c=t[s].dataCount,f=t[s].totalCount-c;r=Math.max(r,c),o=Math.max(o,f),a[s]=new Array(c);for(var d=0;d<a[s].length;d++)a[s][d]=255&e.buffer[d+n];n+=c,c=i.getErrorCorrectPolynomial(f);var p=new l(a[s],c.getLength()-1).mod(c);for(u[s]=new Array(c.getLength()-1),d=0;d<u[s].length;d++){var h=d+p.getLength()-u[s].length;u[s][d]=0<=h?p.get(h):0}}var m=0;for(d=0;d<t.length;d++)m+=t[d].totalCount;var y=new Array(m),g=0;for(d=0;d<r;d++)for(s=0;s<t.length;s++)d<a[s].length&&(y[g++]=a[s][d]);for(d=0;d<o;d++)for(s=0;s<t.length;s++)d<u[s].length&&(y[g++]=u[s][d]);return y},e.exports=u},17611:(e,t,n)=>{var r=n(49381);function o(e,t){this.totalCount=e,this.dataCount=t}o.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],o.getRSBlocks=function(e,t){var n=o.getRsBlockTable(e,t);if(null==n)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var r=n.length/3,a=new Array,i=0;i<r;i++)for(var l=n[3*i+0],u=n[3*i+1],s=n[3*i+2],c=0;c<l;c++)a.push(new o(u,s));return a},o.getRsBlockTable=function(e,t){switch(t){case r.L:return o.RS_BLOCK_TABLE[4*(e-1)+0];case r.M:return o.RS_BLOCK_TABLE[4*(e-1)+1];case r.Q:return o.RS_BLOCK_TABLE[4*(e-1)+2];case r.H:return o.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},e.exports=o},11518:e=>{for(var t={glog:function(e){if(e<1)throw new Error("glog("+e+")");return t.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;256<=e;)e-=255;return t.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},n=0;n<8;n++)t.EXP_TABLE[n]=1<<n;for(n=8;n<256;n++)t.EXP_TABLE[n]=t.EXP_TABLE[n-4]^t.EXP_TABLE[n-5]^t.EXP_TABLE[n-6]^t.EXP_TABLE[n-8];for(n=0;n<255;n++)t.LOG_TABLE[t.EXP_TABLE[n]]=n;e.exports=t},32792:e=>{e.exports={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}},93160:(e,t,n)=>{var r=n(32792),o=n(32832),a=n(11518),i={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;0<=i.getBCHDigit(t)-i.getBCHDigit(i.G15);)t^=i.G15<<i.getBCHDigit(t)-i.getBCHDigit(i.G15);return(e<<10|t)^i.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;0<=i.getBCHDigit(t)-i.getBCHDigit(i.G18);)t^=i.G18<<i.getBCHDigit(t)-i.getBCHDigit(i.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return i.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case 0:return(t+n)%2==0;case 1:return t%2==0;case 2:return n%3==0;case 3:return(t+n)%3==0;case 4:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case 5:return t*n%2+t*n%3==0;case 6:return(t*n%2+t*n%3)%2==0;case 7:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new o([1],0),n=0;n<e;n++)t=t.multiply(new o([1,a.gexp(n)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case r.MODE_NUMBER:return 10;case r.MODE_ALPHA_NUM:return 9;case r.MODE_8BIT_BYTE:case r.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case r.MODE_NUMBER:return 12;case r.MODE_ALPHA_NUM:return 11;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case r.MODE_NUMBER:return 14;case r.MODE_ALPHA_NUM:return 13;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,r=0;r<t;r++)for(var o=0;o<t;o++){for(var a=0,i=e.isDark(r,o),l=-1;l<=1;l++)if(!(r+l<0||t<=r+l))for(var u=-1;u<=1;u++)o+u<0||t<=o+u||0==l&&0==u||i==e.isDark(r+l,o+u)&&a++;5<a&&(n+=3+a-5)}for(r=0;r<t-1;r++)for(o=0;o<t-1;o++){var s=0;e.isDark(r,o)&&s++,e.isDark(r+1,o)&&s++,e.isDark(r,o+1)&&s++,e.isDark(r+1,o+1)&&s++,0!=s&&4!=s||(n+=3)}for(r=0;r<t;r++)for(o=0;o<t-6;o++)e.isDark(r,o)&&!e.isDark(r,o+1)&&e.isDark(r,o+2)&&e.isDark(r,o+3)&&e.isDark(r,o+4)&&!e.isDark(r,o+5)&&e.isDark(r,o+6)&&(n+=40);for(o=0;o<t;o++)for(r=0;r<t-6;r++)e.isDark(r,o)&&!e.isDark(r+1,o)&&e.isDark(r+2,o)&&e.isDark(r+3,o)&&e.isDark(r+4,o)&&!e.isDark(r+5,o)&&e.isDark(r+6,o)&&(n+=40);var c=0;for(o=0;o<t;o++)for(r=0;r<t;r++)e.isDark(r,o)&&c++;return n+Math.abs(100*c/t/t-50)/5*10}};e.exports=i},79361:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function a(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(n,!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}function f(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var g=n(67294),b=(n(45697),n(14450)),v=n(49381);function w(e){for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):t=r<2048?(t+=String.fromCharCode(192|r>>6))+String.fromCharCode(128|63&r):r<55296||57344<=r?(t=(t+=String.fromCharCode(224|r>>12))+String.fromCharCode(128|r>>6&63))+String.fromCharCode(128|63&r):(n++,r=65536+((1023&r)<<10|1023&e.charCodeAt(n)),(t=(t=(t+=String.fromCharCode(240|r>>18))+String.fromCharCode(128|r>>12&63))+String.fromCharCode(128|r>>6&63))+String.fromCharCode(128|63&r))}return t}function O(e,t){var n=1<arguments.length&&void 0!==t?t:0,r=[];return e.forEach((function(e,t){var o=null;e.forEach((function(a,i){if(a||null===o)return i===e.length-1?a?void(null===o?r.push("M".concat(i+n,",").concat(t+n," h1v1H").concat(i+n,"z")):r.push("M".concat(o+n,",").concat(t+n," h").concat(i+1-o,"v1H").concat(o+n,"z"))):void 0:void(a&&null===o&&(o=i));r.push("M".concat(o+n," ").concat(t+n,"h").concat(i-o,"v1H").concat(o+n,"z")),o=null}))})),r.join("")}function S(e,t){return e.slice().map((function(e,n){return n<t.y||n>=t.y+t.h?e:e.map((function(e,n){return(n<t.x||n>=t.x+t.w)&&e}))}))}function _(e,t){var n=e.imageSettings,r=e.size;if(e=e.includeMargin,null==n)return null;e=t.length+2*(e?4:0);var o,a=Math.floor(.1*r),i=(e/=r,r=(n.width||a)*e,a=(n.height||a)*e,null==n.x?t.length/2-r/2:n.x*e);return t=null==n.y?t.length/2-a/2:n.y*e,e=null,{x:i,y:t,h:a,w:r,excavation:e=n.excavate?{x:n=Math.floor(i),y:o=Math.floor(t),w:Math.ceil(r+i-n),h:Math.ceil(a+t-o)}:e}}function C(e){var t=e.renderAs;return e=l(e,["renderAs"]),g.createElement("svg"===t?k:P,e)}n={size:128,level:"L",bgColor:"#FFFFFF",fgColor:"#000000",includeMargin:!1};var E=function(){try{(new Path2D).addPath(new Path2D)}catch(e){return!1}return!0}(),P=function(){function e(){var t,n;u(this,e);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return y(p(n=f(this,(t=d(e)).call.apply(t,[this].concat(o)))),"_canvas",void 0),y(p(n),"_image",void 0),y(p(n),"state",{imgLoaded:!1}),y(p(n),"handleImageLoad",(function(){n.setState({imgLoaded:!0})})),n}return h(e,g.PureComponent),c(e,[{key:"componentDidMount",value:function(){this._image&&this._image.complete&&this.handleImageLoad(),this.update()}},{key:"componentWillReceiveProps",value:function(e){var t;(null==(t=this.props.imageSettings)?void 0:t.src)!==(null==(t=e.imageSettings)?void 0:t.src)&&this.setState({imgLoaded:!1})}},{key:"componentDidUpdate",value:function(){this.update()}},{key:"update",value:function(){var e,t,n,r=(s=this.props).value,o=s.size,a=s.level,i=s.bgColor,l=s.fgColor,u=s.includeMargin,s=s.imageSettings;(a=new b(-1,v[a])).addData(w(r)),a.make(),null!=this._canvas&&(r=this._canvas,(e=r.getContext("2d"))&&null!==(a=a.modules)&&(u=a.length+2*(t=u?4:0),n=_(this.props,a),null!=s&&null!=n&&null!=n.excavation&&(a=S(a,n.excavation)),s=window.devicePixelRatio||1,r.height=r.width=o*s,e.scale(r=o/u*s,r),e.fillStyle=i,e.fillRect(0,0,u,u),e.fillStyle=l,E?e.fill(new Path2D(O(a,t))):a.forEach((function(n,r){n.forEach((function(n,o){n&&e.fillRect(o+t,r+t,1,1)}))})),this.state.imgLoaded&&this._image&&null!=n&&e.drawImage(this._image,n.x+t,n.y+t,n.w,n.h)))}},{key:"render",value:function(){var e=this,t=((a=this.props).value,a.size),n=(a.level,a.bgColor,a.fgColor,a.style),r=(a.includeMargin,a.imageSettings),a=l(a,["value","size","level","bgColor","fgColor","style","includeMargin","imageSettings"]),u=(n=i({height:t,width:t},n),null),s=r&&r.src;return null!=r&&null!=s&&(u=g.createElement("img",{src:s,style:{display:"none"},onLoad:this.handleImageLoad,ref:function(t){return e._image=t}})),g.createElement(g.Fragment,null,g.createElement("canvas",o({style:n,height:t,width:t,ref:function(t){return e._canvas=t}},a)),u)}}]),e}(),k=(y(P,"defaultProps",n),function(){function e(){return u(this,e),f(this,d(e).apply(this,arguments))}return h(e,g.PureComponent),c(e,[{key:"render",value:function(){var e=(s=this.props).value,t=s.size,n=s.level,r=s.bgColor,a=s.fgColor,i=s.includeMargin,u=s.imageSettings,s=l(s,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);if(null===((n=new b(-1,v[n])).addData(w(e)),n.make(),e=n.modules))return null;n=i?4:0,i=e.length+2*n;var c=_(this.props,e),f=null;return null!=u&&null!=c&&(null!=c.excavation&&(e=S(e,c.excavation)),f=g.createElement("image",{xlinkHref:u.src,height:c.h,width:c.w,x:c.x+n,y:c.y+n,preserveAspectRatio:"none"})),u=O(e,n),g.createElement("svg",o({shapeRendering:"crispEdges",height:t,width:t,viewBox:"0 0 ".concat(i," ").concat(i)},s),g.createElement("path",{fill:r,d:"M0,0 h".concat(i,"v").concat(i,"H0z")}),g.createElement("path",{fill:a,d:u}),f)}}]),e}());y(k,"defaultProps",n),C.defaultProps=i({renderAs:"canvas"},n),e.exports=C},1775:e=>{"use strict";var t=Object.prototype.hasOwnProperty;function n(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function r(e,r){if(n(e,r))return 1;if("object"==typeof e&&null!==e&&"object"==typeof r&&null!==r){var o=Object.keys(e),a=Object.keys(r);if(o.length===a.length){for(var i=0;i<o.length;i++)if(!t.call(r,o[i])||!n(e[o[i]],r[o[i]]))return;return 1}}}e.exports=function(e,t,n){return!r(e.props,t)||!r(e.state,n)}},1881:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(67294);function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}n=n(33129);var a=o(r),i=o(n),l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function u(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}n=a.default.forwardRef((function(e,t){var n=void 0===(s=(e=u(e,[])).dragMode)?"crop":s,o=e.src,s=e.style,c=e.className,f=e.crossOrigin,d=e.scaleX,p=e.scaleY,h=e.enable,m=e.zoomTo,y=e.rotateTo,g=void 0===(g=e.alt)?"picture":g,b=e.ready,v=e.onInitialized,w=u(e,["dragMode","src","style","className","crossOrigin","scaleX","scaleY","enable","zoomTo","rotateTo","alt","ready","onInitialized"]),O={scaleY:p,scaleX:d,enable:h,zoomTo:m,rotateTo:y},S=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=r.useRef(null);return a.default.useEffect((function(){e.forEach((function(e){e&&("function"==typeof e?e(n.current):e.current=n.current)}))}),[e]),n}(t,r.useRef(null));return r.useEffect((function(){var e;null!=(e=S.current)&&e.cropper&&"number"==typeof m&&S.current.cropper.zoomTo(m)}),[e.zoomTo]),r.useEffect((function(){var e;null!=(e=S.current)&&e.cropper&&void 0!==o&&S.current.cropper.reset().clear().replace(o)}),[o]),r.useEffect((function(){var e;return null!==S.current&&(e=new i.default(S.current,l(l({dragMode:n},w),{ready:function(e){var t,n,r,o,a,i;null!==e.currentTarget&&(t=e.currentTarget.cropper,r=(n=void 0===(n=O)?{}:n).enable,o=void 0===(o=n.scaleX)?1:o,a=void 0===(a=n.scaleY)?1:a,i=void 0===(i=n.zoomTo)?0:i,n=n.rotateTo,void 0===r||r?t.enable():t.disable(),t.scaleX(o),t.scaleY(a),void 0!==n&&t.rotateTo(n),0<i&&t.zoomTo(i)),b&&b(e)}})),v&&v(e)),function(){var e;null!=(e=null==(e=S.current)?void 0:e.cropper)&&e.destroy()}}),[S]),a.default.createElement("div",{style:s,className:c},a.default.createElement("img",{crossOrigin:f,src:o,alt:g,style:{opacity:0,maxWidth:"100%"},ref:S}))})),t.Cropper=n,t.default=n},64448:(e,t,n)=>{"use strict";var r=n(67294),o=n(27418),a=n(63840);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(i(227));var l=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)l.add(t[e])}n=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement);var f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},h={};function m(e,t,n,r,o,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var y={},g=("children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)})),/[\-:]([a-z])/g);function b(e){return e[1].toUpperCase()}function v(e,t,n,r){var o,a=y.hasOwnProperty(t)?y[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null===n||0!==n.type)switch(typeof t){case"function":case"symbol":return 1;case"boolean":return r?void 0:null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e;default:return}}(e,t,n,r))return 1;if(!r&&null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||t<1}}(t,n,a,r)&&(n=null),r||null===a?(o=t,(d.call(h,o)||!d.call(p,o)&&(f.test(o)?h[o]=!0:void(p[o]=!0)))&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n))):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,b);y[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,b);y[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,b);y[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w,O=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=60103,_=60106,C=60107,E=60108,P=60114,k=60109,j=60110,x=60112,M=60113,T=60120,I=60115,D=60116,A=60121,R=60128,N=60129,B=60130,L=60131,F=("function"==typeof Symbol&&Symbol.for&&(S=(Pt=Symbol.for)("react.element"),_=Pt("react.portal"),C=Pt("react.fragment"),E=Pt("react.strict_mode"),P=Pt("react.profiler"),k=Pt("react.provider"),j=Pt("react.context"),x=Pt("react.forward_ref"),M=Pt("react.suspense"),T=Pt("react.suspense_list"),I=Pt("react.memo"),D=Pt("react.lazy"),A=Pt("react.block"),Pt("react.scope"),R=Pt("react.opaque.id"),N=Pt("react.debug_trace_mode"),B=Pt("react.offscreen"),L=Pt("react.legacy_hidden")),"function"==typeof Symbol&&Symbol.iterator);function U(e){return null!==e&&"object"==typeof e&&"function"==typeof(e=F&&e[F]||e["@@iterator"])?e:null}function z(e){if(void 0===w)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);w=t&&t[1]||""}return"\n"+w+e}var W=!1;function H(e,t){if(!e||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var o=e.stack.split("\n"),a=r.stack.split("\n"),i=o.length-1,l=a.length-1;1<=i&&0<=l&&o[i]!==a[l];)l--;for(;1<=i&&0<=l;i--,l--)if(o[i]!==a[l]){if(1!==i||1!==l)do{if(i--,--l<0||o[i]!==a[l])return"\n"+o[i].replace(" at new "," at ")}while(1<=i&&0<=l);break}}}finally{W=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function V(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case C:return"Fragment";case _:return"Portal";case P:return"Profiler";case E:return"StrictMode";case M:return"Suspense";case T:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case j:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case x:var t=(t=e.render).displayName||t.name||"";return e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case I:return V(e.type);case A:return V(e._render);case D:t=e._payload,e=e._init;try{return V(e(t))}catch(e){}}return null}function G(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t,n,r=q(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),a=""+e[r];if(!e.hasOwnProperty(r)&&void 0!==o&&"function"==typeof o.get&&"function"==typeof o.set)return t=o.get,n=o.set,Object.defineProperty(e,r,{configurable:!0,get:function(){return t.call(this)},set:function(e){a=""+e,n.call(this,e)}}),Object.defineProperty(e,r,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[r]}}}(e))}function K(e){if(e){var t=e._valueTracker;if(!t)return 1;var n=t.getValue(),r="";return(e=r=e?q(e)?e.checked?"true":"false":e.value:r)!==n&&(t.setValue(e),1)}}function Y(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return o({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function Z(e,t){Q(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?te(e,t.type,n):t.hasOwnProperty("defaultValue")&&te(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ee(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function te(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ne(e,t){var n,a;return e=o({children:void 0},t),n=t.children,a="",r.Children.forEach(n,(function(e){null!=e&&(a+=e)})),(t=a)&&(e.children=t),e}function re(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function oe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return o({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(Array.isArray(n)){if(!(n.length<=1))throw Error(i(93));n=n[0]}t=n}n=t=null==t?"":t}e._wrapperState={initialValue:G(n)}}function ie(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var ue="http://www.w3.org/1999/xhtml";function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((fe=fe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=fe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}};var fe,de,pe="undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return de(e,t)}))}:de;function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ye=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function be(e,t){for(var n in e=e.style,t){var r,o;t.hasOwnProperty(n)&&(r=0===n.indexOf("--"),o=ge(n,t[n],r),"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o)}}Object.keys(me).forEach((function(e){ye.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]}))}));var ve=o({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function we(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(i(62))}}function Oe(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Se(e){return 3===(e=(e=e.target||e.srcElement||window).correspondingUseElement?e.correspondingUseElement:e).nodeType?e.parentNode:e}var _e=null,Ce=null,Ee=null;function Pe(e){if(e=Fr(e)){if("function"!=typeof _e)throw Error(i(280));var t=e.stateNode;t&&(t=zr(t),_e(e.stateNode,e.type,t))}}function ke(e){Ce?Ee?Ee.push(e):Ee=[e]:Ce=e}function je(){if(Ce){var e=Ce,t=Ee;if(Ee=Ce=null,Pe(e),t)for(e=0;e<t.length;e++)Pe(t[e])}}function xe(e,t){return e(t)}function Me(e,t,n,r,o){return e(t,n,r,o)}function Te(){}var Ie=!1,De=!1;function Ae(){null===Ce&&null===Ee||(Te(),je())}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=zr(n);if(null===r)return null;switch(n=r[t],t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":e=!(r=(r=!r.disabled)?r:!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e));break;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(i(231,t,typeof n));return n}var Ne=!1;if(n)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch(n){Ne=!1}var Le=!1,Fe=null,Ue=!1,ze=null,We={onError:function(e){Le=!0,Fe=e}};function He(e,t,n,r,o,a,i,l,u){Le=!1,Fe=null,function(e,t,n,r,o,a,i,l,u){var s=Array.prototype.slice.call(arguments,3);try{t.apply(n,s)}catch(e){this.onError(e)}}.apply(We,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else for(e=t;0!=(1026&(t=e).flags)&&(n=t.return),e=t.return;);return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function qe(e){if(Ve(e)!==e)throw Error(i(188))}function $e(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(null===(r=o.return))break;n=r}else{if(o.child===a.child){for(a=o.child;a;){if(a===n)return qe(o),e;if(a===r)return qe(o),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=o,r=a;else{for(var l=!1,u=o.child;u;){if(u===n){l=!0,n=o,r=a;break}if(u===r){l=!0,r=o,n=a;break}u=u.sibling}if(!l){for(u=a.child;u;){if(u===n){l=!0,n=a,r=o;break}if(u===r){l=!0,r=a,n=o;break}u=u.sibling}if(!l)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t=(t.child.return=t).child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ke(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return 1;t=t.return}}var Ye,Je,Xe,Qe=!1,Ze=[],et=null,tt=null,nt=null,rt=new Map,ot=new Map,at=[],it="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lt(e,t,n,r,o){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:o,targetContainers:[r]}}function ut(e,t){switch(e){case"focusin":case"focusout":et=null;break;case"dragenter":case"dragleave":tt=null;break;case"mouseover":case"mouseout":nt=null;break;case"pointerover":case"pointerout":rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ot.delete(t.pointerId)}}function st(e,t,n,r,o,a){return null===e||e.nativeEvent!==a?(e=lt(t,n,r,o,a),null===t||null!==(t=Fr(t))&&Je(t)):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o)),e}function ct(e){if(null===e.blockedOn){for(var t=e.targetContainers;0<t.length;){var n=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Fr(n))&&Je(t),e.blockedOn=n,0;t.shift()}return 1}}function ft(e,t,n){ct(e)&&n.delete(t)}function dt(){for(Qe=!1;0<Ze.length;){var e=Ze[0];if(null!==e.blockedOn){null!==(e=Fr(e.blockedOn))&&Ye(e);break}for(var t=e.targetContainers;0<t.length;){var n=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&Ze.shift()}null!==et&&ct(et)&&(et=null),null!==tt&&ct(tt)&&(tt=null),null!==nt&&ct(nt)&&(nt=null),rt.forEach(ft),ot.forEach(ft)}function pt(e,t){e.blockedOn===t&&(e.blockedOn=null,Qe||(Qe=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,dt)))}function ht(e){function t(t){return pt(t,e)}if(0<Ze.length){pt(Ze[0],e);for(var n=1;n<Ze.length;n++){var r=Ze[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==et&&pt(et,e),null!==tt&&pt(tt,e),null!==nt&&pt(nt,e),rt.forEach(t),ot.forEach(t),n=0;n<at.length;n++)(r=at[n]).blockedOn===e&&(r.blockedOn=null);for(;0<at.length&&null===(n=at[0]).blockedOn;)(function(e){var t=Lr(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,e.lanePriority,a.unstable_runWithPriority(e.priority,(function(){Xe(n)}))}else if(3===t&&n.stateNode.hydrate)return e.blockedOn=3===n.tag?n.stateNode.containerInfo:null}e.blockedOn=null})(n),null===n.blockedOn&&at.shift()}function mt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var yt={animationend:mt("Animation","AnimationEnd"),animationiteration:mt("Animation","AnimationIteration"),animationstart:mt("Animation","AnimationStart"),transitionend:mt("Transition","TransitionEnd")},gt={},bt={};function vt(e){if(gt[e])return gt[e];if(!yt[e])return e;var t,n=yt[e];for(t in n)if(n.hasOwnProperty(t)&&t in bt)return gt[e]=n[t];return e}n&&(bt=document.createElement("div").style,"AnimationEvent"in window||(delete yt.animationend.animation,delete yt.animationiteration.animation,delete yt.animationstart.animation),"TransitionEvent"in window||delete yt.transitionend.transition);var wt=vt("animationend"),Ot=vt("animationiteration"),St=vt("animationstart"),_t=vt("transitionend"),Ct=new Map,Et=new Map,Pt=["abort","abort",wt,"animationEnd",Ot,"animationIteration",St,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",_t,"transitionEnd","waiting","waiting"];function kt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],o="on"+((o=e[n+1])[0].toUpperCase()+o.slice(1));Et.set(r,t),Ct.set(r,o),s(o,[r])}}(0,a.unstable_now)();var jt=8;function xt(e){if(0!=(1&e))return jt=15,1;if(0!=(2&e))return jt=14,2;if(0!=(4&e))return jt=13,4;var t=24&e;return 0!==t?(jt=12,t):0!=(32&e)?(jt=11,32):0!=(t=192&e)?(jt=10,t):0!=(256&e)?(jt=9,256):0!=(t=3584&e)?(jt=8,t):0!=(4096&e)?(jt=7,4096):0!=(t=4186112&e)?(jt=6,t):0!=(t=62914560&e)?(jt=5,t):67108864&e?(jt=4,67108864):0!=(134217728&e)?(jt=3,134217728):0!=(t=805306368&e)?(jt=2,t):0!=(1073741824&e)?(jt=1,1073741824):(jt=8,e)}function Mt(e,t){var n=e.pendingLanes;if(0===n)return jt=0;var r,o=0,a=0,i=e.expiredLanes,l=e.suspendedLanes,u=e.pingedLanes;if(0!==i?(o=i,a=jt=15):0!=(i=134217727&n)?0!=(r=i&~l)?(o=xt(r),a=jt):0!=(u&=i)&&(o=xt(u),a=jt):0!=(i=n&~l)?(o=xt(i),a=jt):0!==u&&(o=xt(u),a=jt),0===o)return 0;if(o=n&(((o=31-Nt(o))<0?0:1<<o)<<1)-1,0!==t&&t!==o&&0==(t&l)){if(xt(t),a<=jt)return t;jt=a}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=o;0<t;)o|=e[n=31-Nt(t)],t&=~(a=1<<n);return o}function Tt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function It(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Dt(24&~t))?It(10,t):e;case 10:return 0===(e=Dt(192&~t))?It(8,t):e;case 8:return 0===(e=Dt(3584&~t))&&0===(e=Dt(4186112&~t))&&(e=512),e;case 2:return 0===(t=Dt(805306368&~t))?268435456:t}throw Error(i(358,e))}function Dt(e){return e&-e}function At(e){for(var t=[],n=0;n<31;n++)t.push(e);return t}function Rt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Nt(t)]=n}var Nt=Math.clz32||function(e){return 0===e?32:31-(Bt(e)/Lt|0)|0},Bt=Math.log,Lt=Math.LN2,Ft=a.unstable_UserBlockingPriority,Ut=a.unstable_runWithPriority,zt=!0;function Wt(e,t,n,r){Ie||Te();var o=Vt,a=Ie;Ie=!0;try{Me(o,e,t,n,r)}finally{(Ie=a)||Ae()}}function Ht(e,t,n,r){Ut(Ft,Vt.bind(null,e,t,n,r))}function Vt(e,t,n,r){var o;if(zt)if((o=0==(4&t))&&0<Ze.length&&-1<it.indexOf(e))e=lt(null,e,t,n,r),Ze.push(e);else{var a=Gt(e,t,n,r);if(null===a)o&&ut(e,r);else{if(o){if(-1<it.indexOf(e))return e=lt(a,e,t,n,r),void Ze.push(e);if(function(e,t,n,r,o){switch(t){case"focusin":return et=st(et,e,t,n,r,o),1;case"dragenter":return tt=st(tt,e,t,n,r,o),1;case"mouseover":return nt=st(nt,e,t,n,r,o),1;case"pointerover":var a=o.pointerId;return rt.set(a,st(rt.get(a)||null,e,t,n,r,o)),1;case"gotpointercapture":return a=o.pointerId,ot.set(a,st(ot.get(a)||null,e,t,n,r,o)),1}}(a,e,t,n,r))return;ut(e,r)}br(e,t,r,null,n)}}}function Gt(e,t,n,r){var o=Se(r);if(null!==(o=Lr(o))){var a=Ve(o);if(null===a)o=null;else{var i=a.tag;if(13===i){if(null!==(o=Ge(a)))return o;o=null}else if(3===i){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;o=null}else a!==o&&(o=null)}}return br(e,t,r,o,n),null}var qt=null,$t=null,Kt=null;function Yt(){if(Kt)return Kt;for(var e=$t,t=e.length,n=("value"in qt?qt.value:qt.textContent),r=n.length,o=0;o<t&&e[o]===n[o];o++);for(var a=t-o,i=1;i<=a&&e[t-i]===n[r-i];i++);return Kt=n.slice(o,1<i?1-i:void 0)}function Jt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,32<=(e=10===e?13:e)||13===e?e:0}function Xt(){return!0}function Qt(){return!1}function Zt(e){function t(t,n,r,o,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(o):o[i]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?Xt:Qt,this.isPropagationStopped=Qt,this}return o(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Xt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Xt)},persist:function(){},isPersistent:Xt}),t}Be={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0};var en,tn,nn,rn=Zt(Be),on=Zt(En=o({},Be,{view:0,detail:0})),an=o({},En,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nn&&(tn=nn&&"mousemove"===e.type?(en=e.screenX-nn.screenX,e.screenY-nn.screenY):en=0,nn=e),en)},movementY:function(e){return"movementY"in e?e.movementY:tn}}),ln=Zt(an),un=Zt(o({},an,{dataTransfer:0})),sn=Zt(o({},En,{relatedTarget:0})),cn=Zt(o({},Be,{animationName:0,elapsedTime:0,pseudoElement:0})),fn=Zt(o({},Be,{clipboardData:function(e){return("clipboardData"in e?e:window).clipboardData}})),dn=Zt(o({},Be,{data:0})),pn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function gn(){return yn}var bn=Zt(o({},En,{key:function(e){if(e.key){var t=pn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Jt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?hn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gn,charCode:function(e){return"keypress"===e.type?Jt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Jt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),vn=Zt(o({},an,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),wn=Zt(o({},En,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gn})),On=Zt(o({},Be,{propertyName:0,elapsedTime:0,pseudoElement:0})),Sn=Zt(o({},an,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),_n=[9,13,27,32],Cn=n&&"CompositionEvent"in window,En=null,Pn=(n&&"documentMode"in document&&(En=document.documentMode),n&&"TextEvent"in window&&!En),kn=n&&(!Cn||En&&8<En&&En<=11),jn=String.fromCharCode(32),xn=!1;function Mn(e,t){switch(e){case"keyup":return-1!==_n.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return 1;default:return}}function Tn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var In=!1,Dn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function An(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?Dn[e.type]:"textarea"===t}function Rn(e,t,n,r){ke(r),0<(t=wr(t,"onChange")).length&&(n=new rn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Nn=null,Bn=null;function Ln(e){dr(e,0)}function Fn(e){if(K(Ur(e)))return e}function Un(e,t){if("change"===e)return t}var zn=!1;function Wn(){Nn&&(Nn.detachEvent("onpropertychange",Hn),Bn=Nn=null)}function Hn(e){if("value"===e.propertyName&&Fn(Bn)){var t=[];if(Rn(t,Bn,e,Se(e)),e=Ln,Ie)e(t);else{Ie=!0;try{xe(e,t)}finally{Ie=!1,Ae()}}}}function Vn(e,t,n){"focusin"===e?(Wn(),Bn=n,(Nn=t).attachEvent("onpropertychange",Hn)):"focusout"===e&&Wn()}function Gn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Fn(Bn)}function qn(e,t){if("click"===e)return Fn(t)}function $n(e,t){if("input"===e||"change"===e)return Fn(t)}n&&(En=n&&((Be="oninput"in document)||((an=document.createElement("div")).setAttribute("oninput","return;"),Be="function"==typeof an.oninput),Be),zn=En&&(!document.documentMode||9<document.documentMode));var Kn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Yn=Object.prototype.hasOwnProperty;function Jn(e,t){if(Kn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Yn.call(t,n[r])||!Kn(e[n[r]],t[n[r]]))return!1;return!0}function Xn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qn(e,t){var n,r=Xn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&t<=n)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Xn(r)}}function Zn(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function er(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var tr=n&&"documentMode"in document&&document.documentMode<=11,nr=null,rr=null,or=null,ar=!1;function ir(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ar||null==nr||nr!==Y(r)||(r="selectionStart"in(r=nr)&&er(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},or&&Jn(or,r)||(or=r,0<(r=wr(rr,"onSelect")).length&&(t=new rn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=nr)))}kt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),kt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),kt(Pt,2);for(var lr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),ur=0;ur<lr.length;ur++)Et.set(lr[ur],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cr=new Set("cancel close invalid load scroll toggle".split(" ").concat(sr));function fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(){var e;He.apply(this,arguments),Le&&(e=Fe,Le=!1,Fe=null,Ue||(Ue=!0,ze=e))}(r,t,void 0,e),e.currentTarget=null}function dr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=(o=e[n]).event,o=o.listeners;e:{var a=void 0;if(t)for(var i=o.length-1;0<=i;i--){var l=(s=o[i]).instance,u=s.currentTarget,s=s.listener;if(l!==a&&r.isPropagationStopped())break e;fr(r,s,u),a=l}else for(i=0;i<o.length;i++){if(l=(s=o[i]).instance,u=s.currentTarget,s=s.listener,l!==a&&r.isPropagationStopped())break e;fr(r,s,u),a=l}}}if(Ue)throw e=ze,Ue=!1,ze=null,e}function pr(e,t){var n=Wr(t),r=e+"__bubble";n.has(r)||(gr(t,e,2,!1),n.add(r))}var hr="_reactListening"+Math.random().toString(36).slice(2);function mr(e){e[hr]||(e[hr]=!0,l.forEach((function(t){cr.has(t)||yr(t,!1,e,null),yr(t,!0,e,null)})))}function yr(e,t,n,r,o){o=4<arguments.length&&void 0!==o?o:0;var a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&cr.has(e)){if("scroll"!==e)return;o|=2,a=r}r=e+"__"+(t?"capture":"bubble"),(n=Wr(a)).has(r)||(t&&(o|=4),gr(a,e,o,t),n.add(r))}function gr(e,t,n,r){var o=Et.get(t);switch(void 0===o?2:o){case 0:o=Wt;break;case 1:o=Ht;break;default:o=Vt}n=o.bind(null,t,n,e),o=!(!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t)||void 0,r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function br(e,t,n,r,o){var a=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var l=r.stateNode.containerInfo;if(l===o||8===l.nodeType&&l.parentNode===o)break;if(4===i)for(i=r.return;null!==i;){var u=i.tag;if((3===u||4===u)&&((u=i.stateNode.containerInfo)===o||8===u.nodeType&&u.parentNode===o))return;i=i.return}for(;null!==l;){if(null===(i=Lr(l)))return;if(5===(u=i.tag)||6===u){r=a=i;continue e}l=l.parentNode}}r=r.return}var s=function(){var r,o,i,l=a,u=Se(n),s=[];e:{var c=Ct.get(e);if(void 0!==c){var f=rn,d=e;switch(e){case"keypress":if(0===Jt(n))break e;case"keydown":case"keyup":f=bn;break;case"focusin":d="focus",f=sn;break;case"focusout":d="blur",f=sn;break;case"beforeblur":case"afterblur":f=sn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=ln;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=un;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=wn;break;case wt:case Ot:case St:f=cn;break;case _t:f=On;break;case"scroll":f=on;break;case"wheel":f=Sn;break;case"copy":case"cut":case"paste":f=fn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=vn}for(var p=!(m=0!=(4&t))&&"scroll"===e,h=m?null!==c?c+"Capture":null:c,m=[],y=l;null!==y;){var g,b=(g=y).stateNode;if(5===g.tag&&null!==b&&(g=b,null!==h&&null!=(b=Re(y,h))&&m.push(vr(y,b,g))),p)break;y=y.return}0<m.length&&(c=new f(c,d,null,n,u),s.push({event:c,listeners:m}))}}if(0==(7&t)){if(f="mouseout"===e||"pointerout"===e,(!(c="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(d=n.relatedTarget||n.fromElement)||!Lr(d)&&!d[Nr])&&(f||c)&&(c=u.window===u?u:(c=u.ownerDocument)?c.defaultView||c.parentWindow:window,f?(f=l,null!==(d=(d=n.relatedTarget||n.toElement)?Lr(d):null)&&(d!==(p=Ve(d))||5!==d.tag&&6!==d.tag)&&(d=null)):(f=null,d=l),f!==d)){if(m=ln,b="onMouseLeave",h="onMouseEnter",y="mouse","pointerout"!==e&&"pointerover"!==e||(m=vn,b="onPointerLeave",h="onPointerEnter",y="pointer"),p=null==f?c:Ur(f),g=null==d?c:Ur(d),(c=new m(b,y+"leave",f,n,u)).target=p,c.relatedTarget=g,b=null,Lr(u)===l&&((m=new m(h,y+"enter",d,n,u)).target=g,m.relatedTarget=p,b=m),p=b,f&&d)e:{for(h=d,y=0,g=m=f;g;g=Or(g))y++;for(g=0,b=h;b;b=Or(b))g++;for(;0<y-g;)m=Or(m),y--;for(;0<g-y;)h=Or(h),g--;for(;y--;){if(m===h||null!==h&&m===h.alternate)break e;m=Or(m),h=Or(h)}m=null}else m=null;null!==f&&Sr(s,c,f,m,!1),null!==d&&null!==p&&Sr(s,p,d,m,!0)}switch("select"===(f=(c=l?Ur(l):window).nodeName&&c.nodeName.toLowerCase())||"input"===f&&"file"===c.type?r=Un:An(c)?zn?r=$n:(r=Gn,o=Vn):!(f=c.nodeName)||"input"!==f.toLowerCase()||"checkbox"!==c.type&&"radio"!==c.type||(r=qn),(r=r&&r(e,l))?Rn(s,r,n,u):(o&&o(e,c,l),"focusout"===e&&(o=c._wrapperState)&&o.controlled&&"number"===c.type&&te(c,"number",c.value)),o=l?Ur(l):window,e){case"focusin":!An(o)&&"true"!==o.contentEditable||(nr=o,rr=l,or=null);break;case"focusout":or=rr=nr=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,ir(s,n,u);break;case"selectionchange":if(tr)break;case"keydown":case"keyup":ir(s,n,u)}if(Cn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else In?Mn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(kn&&"ko"!==n.locale&&(In||"onCompositionStart"!==v?"onCompositionEnd"===v&&In&&(i=Yt()):($t="value"in(qt=u)?qt.value:qt.textContent,In=!0)),0<(o=wr(l,v)).length&&(v=new dn(v,e,null,n,u),s.push({event:v,listeners:o}),(i||null!==(i=Tn(n)))&&(v.data=i))),(i=(Pn?function(e,t){switch(e){case"compositionend":return Tn(t);case"keypress":return 32!==t.which?null:(xn=!0,jn);case"textInput":return(e=t.data)===jn&&xn?null:e;default:return null}}:function(e,t){if(In)return"compositionend"===e||!Cn&&Mn(e,t)?(e=Yt(),Kt=$t=qt=null,In=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kn&&"ko"!==t.locale?null:t.data}})(e,n))&&0<(l=wr(l,"onBeforeInput")).length&&(u=new dn("onBeforeInput","beforeinput",null,n,u),s.push({event:u,listeners:l}),u.data=i)}dr(s,t)};if(De)s();else{De=!0;try{ku(s,void 0)}finally{De=!1,Ae()}}}function vr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,a=o.stateNode;5===o.tag&&null!==a&&(o=a,null!=(a=Re(e,n))&&r.unshift(vr(e,a,o)),null!=(a=Re(e,t))&&r.push(vr(e,a,o))),e=e.return}return r}function Or(e){if(null===e)return null;for(;(e=e.return)&&5!==e.tag;);return e||null}function Sr(e,t,n,r,o){for(var a=t._reactName,i=[];null!==n&&n!==r;){var l=n,u=l.alternate,s=l.stateNode;if(null!==u&&u===r)break;5===l.tag&&null!==s&&(l=s,o?null!=(u=Re(n,a))&&i.unshift(vr(n,u,l)):null!=(u=Re(n,a))&&i.push(vr(n,u,l))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}function _r(){}var Cr=null,Er=null;function Pr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return t.autoFocus}}function kr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var jr="function"==typeof setTimeout?setTimeout:void 0,xr="function"==typeof clearTimeout?clearTimeout:void 0;function Mr(e){(1===e.nodeType||9===e.nodeType&&null!=(e=e.body))&&(e.textContent="")}function Tr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Ir(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Dr=0,Ar="__reactFiber$"+(an=Math.random().toString(36).slice(2)),Rr="__reactProps$"+an,Nr="__reactContainer$"+an,Br="__reactEvents$"+an;function Lr(e){var t=e[Ar];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Nr]||n[Ar]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Ir(e);null!==e;){if(n=e[Ar])return n;e=Ir(e)}return t}n=(e=n).parentNode}return null}function Fr(e){return!(e=e[Ar]||e[Nr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ur(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function zr(e){return e[Rr]||null}function Wr(e){var t=e[Br];return void 0===t?e[Br]=new Set:t}var Hr=[],Vr=-1;function Gr(e){return{current:e}}function qr(e){Vr<0||(e.current=Hr[Vr],Hr[Vr]=null,Vr--)}function $r(e,t){Hr[++Vr]=e.current,e.current=t}var Kr={},Yr=Gr(Kr),Jr=Gr(!1),Xr=Kr;function Qr(e,t){var n=e.type.contextTypes;if(!n)return Kr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,a={};for(o in n)a[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Zr(e){return null!=e.childContextTypes}function eo(){qr(Jr),qr(Yr)}function to(e,t,n){if(Yr.current!==Kr)throw Error(i(168));$r(Yr,t),$r(Jr,n)}function no(e,t,n){var r,a=e.stateNode;if(e=t.childContextTypes,"function"!=typeof a.getChildContext)return n;for(r in a=a.getChildContext())if(!(r in e))throw Error(i(108,V(t)||"Unknown",r));return o({},n,a)}function ro(e){e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Kr,Xr=Yr.current,$r(Yr,e),$r(Jr,Jr.current)}function oo(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=no(e,t,Xr),r.__reactInternalMemoizedMergedChildContext=e,qr(Jr),qr(Yr),$r(Yr,e)):qr(Jr),$r(Jr,n)}var ao=null,io=null,lo=a.unstable_runWithPriority,uo=a.unstable_scheduleCallback,so=a.unstable_cancelCallback,co=a.unstable_shouldYield,fo=(Be=a.unstable_requestPaint,a.unstable_now),po=a.unstable_getCurrentPriorityLevel,ho=a.unstable_ImmediatePriority,mo=a.unstable_UserBlockingPriority,yo=a.unstable_NormalPriority,go=a.unstable_LowPriority,bo=a.unstable_IdlePriority,vo={},wo=void 0!==Be?Be:function(){},Oo=null,So=null,_o=!1,Co=fo(),Eo=Co<1e4?fo:function(){return fo()-Co};function Po(){switch(po()){case ho:return 99;case mo:return 98;case yo:return 97;case go:return 96;case bo:return 95;default:throw Error(i(332))}}function ko(e){switch(e){case 99:return ho;case 98:return mo;case 97:return yo;case 96:return go;case 95:return bo;default:throw Error(i(332))}}function jo(e,t){return e=ko(e),lo(e,t)}function xo(e,t,n){return e=ko(e),uo(e,t,n)}function Mo(){var e;null!==So&&(e=So,So=null,so(e)),To()}function To(){if(!_o&&null!==Oo){_o=!0;var e=0;try{var t=Oo;jo(99,(function(){for(;e<t.length;e++)for(var n=t[e];null!==(n=n(!0)););})),Oo=null}catch(t){throw null!==Oo&&(Oo=Oo.slice(e+1)),uo(ho,Mo),t}finally{_o=!1}}}var Io=O.ReactCurrentBatchConfig;function Do(e,t){if(e&&e.defaultProps){for(var n in t=o({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ao=Gr(null),Ro=null,No=null,Bo=null;function Lo(){Bo=No=Ro=null}function Fo(e){var t=Ao.current;qr(Ao),e.type._context._currentValue=t}function Uo(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function zo(e,t){(Bo=No=null)!==(e=(Ro=e).dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(gi=!0),e.firstContext=null)}function Wo(e,t){if(Bo!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Bo=e,t=1073741823),t={context:e,observedBits:t,next:null},null===No){if(null===Ro)throw Error(i(308));No=t,Ro.dependencies={lanes:0,firstContext:t,responders:null}}else No=No.next=t;return e._currentValue}var Ho=!1;function Vo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function Go(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $o(e,t){var n;null!==(e=e.updateQueue)&&(null===(n=(e=e.shared).pending)?t.next=t:(t.next=n.next,n.next=t),e.pending=t)}function Ko(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null}}while(null===a?o=a=i:a=a.next=i,null!==(n=n.next));null===a?o=a=t:a=a.next=t}else o=a=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Yo(e,t,n,r){var a,i,l,u,s=e.updateQueue,c=(Ho=!1,s.firstBaseUpdate),f=s.lastBaseUpdate;if(null!==(m=s.shared.pending)&&(s.shared.pending=null,i=(a=m).next,(a.next=null)===f?c=i:f.next=i,f=a,null!==(l=e.alternate)&&(u=(l=l.updateQueue).lastBaseUpdate)!==f&&(null===u?l.firstBaseUpdate=i:u.next=i,l.lastBaseUpdate=a)),null!==c){for(u=s.baseState,f=0,l=i=a=null;;){m=c.lane;var d=c.eventTime;if((r&m)===m){null!==l&&(l=l.next={eventTime:d,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var p=e,h=c,m=t;switch(d=n,h.tag){case 1:if("function"==typeof(p=h.payload)){u=p.call(d,u,m);break e}u=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null==(m="function"==typeof(p=h.payload)?p.call(d,u,m):p))break e;u=o({},u,m);break e;case 2:Ho=!0}}null!==c.callback&&(e.flags|=32,null===(m=s.effects)?s.effects=[c]:m.push(c))}else d={eventTime:d,lane:m,tag:c.tag,payload:c.payload,callback:c.callback,next:null},null===l?(i=l=d,a=u):l=l.next=d,f|=m;if(null===(c=c.next)){if(null===(m=s.shared.pending))break;c=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}null===l&&(a=u),s.baseState=a,s.firstBaseUpdate=i,s.lastBaseUpdate=l,pl|=f,e.lanes=f,e.memoizedState=u}}function Jo(e,t,n){if(e=t.effects,(t.effects=null)!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!=typeof o)throw Error(i(191,o));o.call(r)}}}var Xo=(new r.Component).refs;function Qo(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:o({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Zo={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ll(),o=Fl(e),a=qo(r,o);a.payload=t,null!=n&&(a.callback=n),$o(e,a),Ul(e,o,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ll(),o=Fl(e),a=qo(r,o);a.tag=1,a.payload=t,null!=n&&(a.callback=n),$o(e,a),Ul(e,o,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ll(),r=Fl(e),o=qo(n,r);o.tag=2,null!=t&&(o.callback=t),$o(e,o),Ul(e,r,n)}};function ea(e,t,n,r,o,a,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!(t.prototype&&t.prototype.isPureReactComponent&&Jn(n,r)&&Jn(o,a))}function ta(e,t,n){var r=!1,o=Kr,a=t.contextType;t=new t(n,a="object"==typeof a&&null!==a?Wo(a):(o=Zr(t)?Xr:Yr.current,(r=null!=(r=t.contextTypes))?Qr(e,o):Kr)),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Zo,(e.stateNode=t)._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a)}function na(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Zo.enqueueReplaceState(t,t.state,null)}function ra(e,t,n,r){var o=e.stateNode,a=(o.props=n,o.state=e.memoizedState,o.refs=Xo,Vo(e),t.contextType);"object"==typeof a&&null!==a?o.context=Wo(a):(a=Zr(t)?Xr:Yr.current,o.context=Qr(e,a)),Yo(e,n,o,r),o.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(Qo(e,0,a,n),o.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(t=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&Zo.enqueueReplaceState(o,o.state,null),Yo(e,n,o,r),o.state=e.memoizedState),"function"==typeof o.componentDidMount&&(e.flags|=4)}var oa=Array.isArray;function aa(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:((t=function(e){var t=r.refs;t===Xo&&(t=r.refs={}),null===e?delete t[o]:t[o]=e})._stringRef=o,t)}if("string"!=typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function ia(e,t){if("textarea"!==e.type)throw Error(i(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function la(e){function t(t,n){var r;e&&(null!==(r=t.lastEffect)?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8)}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=du(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null===(r=t.alternate)||(r=r.index)<n?(t.flags=2,n):r:n}function l(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?(t=yu(n,e.mode,r)).return=e:(t=o(t,n)).return=e,t}function s(e,t,n,r){return null!==t&&t.elementType===n.type?(r=o(t,n.props)).ref=aa(0,t,n):(r=pu(n.type,n.key,n.props,null,e.mode,r)).ref=aa(0,t,n),r.return=e,r}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=gu(n,e.mode,r)).return=e:(t=o(t,n.children||[])).return=e,t}function f(e,t,n,r,a){return null===t||7!==t.tag?(t=hu(n,e.mode,r,a)).return=e:(t=o(t,n)).return=e,t}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=yu(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case S:return(n=pu(t.type,t.key,t.props,null,e.mode,n)).ref=aa(0,null,t),n.return=e,n;case _:return(t=gu(t,e.mode,n)).return=e,t}if(oa(t)||U(t))return(t=hu(t,e.mode,n,null)).return=e,t;ia(e,t)}return null}function p(e,t,n,r){var o=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==o?null:u(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case S:return n.key===o?n.type===C?f(e,t,n.props.children,r,o):s(e,t,n,r):null;case _:return n.key===o?c(e,t,n,r):null}if(oa(n)||U(n))return null!==o?null:f(e,t,n,r,null);ia(e,n)}return null}function h(e,t,n,r,o){if("string"==typeof r||"number"==typeof r)return u(t,e=e.get(n)||null,""+r,o);if("object"==typeof r&&null!==r){switch(r.$$typeof){case S:return e=e.get(null===r.key?n:r.key)||null,r.type===C?f(t,e,r.props.children,o,r.key):s(t,e,r,o);case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o)}if(oa(r)||U(r))return f(t,e=e.get(n)||null,r,o,null);ia(t,r)}return null}return function(u,s,c,f){var m="object"==typeof c&&null!==c&&c.type===C&&null===c.key,y="object"==typeof(c=m?c.props.children:c)&&null!==c;if(y)switch(c.$$typeof){case S:e:{for(y=c.key,m=s;null!==m;){if(m.key===y){switch(m.tag){case 7:if(c.type!==C)break;n(u,m.sibling),(s=o(m,c.props.children)).return=u,u=s;break e;default:if(m.elementType===c.type){n(u,m.sibling),(s=o(m,c.props)).ref=aa(0,m,c),s.return=u,u=s;break e}}n(u,m);break}t(u,m),m=m.sibling}u=c.type===C?((s=hu(c.props.children,u.mode,f,c.key)).return=u,s):((f=pu(c.type,c.key,c.props,null,u.mode,f)).ref=aa(0,s,c),f.return=u,f)}return l(u);case _:e:{for(m=c.key;null!==s;){if(s.key===m){if(4===s.tag&&s.stateNode.containerInfo===c.containerInfo&&s.stateNode.implementation===c.implementation){n(u,s.sibling),(s=o(s,c.children||[])).return=u,u=s;break e}n(u,s);break}t(u,s),s=s.sibling}(s=gu(c,u.mode,f)).return=u,u=s}return l(u)}if("string"==typeof c||"number"==typeof c)return c=""+c,(s=null!==s&&6===s.tag?(n(u,s.sibling),o(s,c)):(n(u,s),yu(c,u.mode,f))).return=u,l(u=s);if(oa(c)){for(var g=u,b=s,v=c,w=f,O=null,E=null,P=b,k=b=0,j=null;null!==P&&k<v.length;k++){P.index>k?(j=P,P=null):j=P.sibling;var x=p(g,P,v[k],w);if(null===x){null===P&&(P=j);break}e&&P&&null===x.alternate&&t(g,P),b=a(x,b,k),null===E?O=x:E.sibling=x,E=x,P=j}if(k===v.length)return n(g,P),O;if(null===P){for(;k<v.length;k++)null!==(P=d(g,v[k],w))&&(b=a(P,b,k),null===E?O=P:E.sibling=P,E=P);return O}for(P=r(g,P);k<v.length;k++)null!==(j=h(P,g,k,v[k],w))&&(e&&null!==j.alternate&&P.delete(null===j.key?k:j.key),b=a(j,b,k),null===E?O=j:E.sibling=j,E=j);return e&&P.forEach((function(e){return t(g,e)})),O}if(U(c)){var M=u,T=s,I=c,D=f,A=U(I);if("function"!=typeof A)throw Error(i(150));if(null==(I=A.call(I)))throw Error(i(151));for(var R=A=null,N=T,B=T=0,L=null,F=I.next();null!==N&&!F.done;B++,F=I.next()){N.index>B?(L=N,N=null):L=N.sibling;var z=p(M,N,F.value,D);if(null===z){null===N&&(N=L);break}e&&N&&null===z.alternate&&t(M,N),T=a(z,T,B),null===R?A=z:R.sibling=z,R=z,N=L}if(F.done)return n(M,N),A;if(null===N){for(;!F.done;B++,F=I.next())null!==(F=d(M,F.value,D))&&(T=a(F,T,B),null===R?A=F:R.sibling=F,R=F);return A}for(N=r(M,N);!F.done;B++,F=I.next())null!==(F=h(N,M,B,F.value,D))&&(e&&null!==F.alternate&&N.delete(null===F.key?B:F.key),T=a(F,T,B),null===R?A=F:R.sibling=F,R=F);return e&&N.forEach((function(e){return t(M,e)})),A}if(y&&ia(u,c),void 0===c&&!m)switch(u.tag){case 1:case 22:case 0:case 11:case 15:throw Error(i(152,V(u.type)||"Component"))}return n(u,s)}}var ua=la(!0),sa=la(!1),ca={},fa=Gr(ca),da=Gr(ca),pa=Gr(ca);function ha(e){if(e===ca)throw Error(i(174));return e}function ma(e,t){switch($r(pa,t),$r(da,e),$r(fa,ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}qr(fa),$r(fa,t)}function ya(){qr(fa),qr(da),qr(pa)}function ga(e){ha(pa.current);var t=ha(fa.current),n=ce(t,e.type);t!==n&&($r(da,e),$r(fa,n))}function ba(e){da.current===e&&(qr(fa),qr(da))}var va=Gr(0);function wa(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t=(t.child.return=t).child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Oa=null,Sa=null,_a=!1;function Ca(e,t){var n=cu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ea(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,1);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,1);default:return}}function Pa(e){if(_a){var t=Sa;if(t){var n=t;if(!Ea(e,t)){if(!(t=Tr(n.nextSibling))||!Ea(e,t))return e.flags=-1025&e.flags|2,_a=!1,void(Oa=e);Ca(Oa,n)}Oa=e,Sa=Tr(t.firstChild)}else e.flags=-1025&e.flags|2,_a=!1,Oa=e}}function ka(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Oa=e}function ja(e){if(e===Oa){if(!_a)return ka(e),_a=!0,0;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!kr(t,e.memoizedProps))for(t=Sa;t;)Ca(e,t),t=Tr(t.nextSibling);if(ka(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Sa=Tr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Sa=null}}else Sa=Oa?Tr(e.stateNode.nextSibling):null;return 1}}function xa(){Sa=Oa=null,_a=!1}var Ma=[];function Ta(){for(var e=0;e<Ma.length;e++)Ma[e]._workInProgressVersionPrimary=null;Ma.length=0}var Ia=O.ReactCurrentDispatcher,Da=O.ReactCurrentBatchConfig,Aa=0,Ra=null,Na=null,Ba=null,La=!1,Fa=!1;function Ua(){throw Error(i(321))}function za(e,t){if(null!==t){for(var n=0;n<t.length&&n<e.length;n++)if(!Kn(e[n],t[n]))return;return 1}}function Wa(e,t,n,r,o,a){if(Aa=a,(Ra=t).memoizedState=null,t.updateQueue=null,t.lanes=0,Ia.current=null===e||null===e.memoizedState?pi:hi,e=n(r,o),Fa){a=0;do{if(Fa=!1,!(a<25))throw Error(i(301))}while(a+=1,Ba=Na=null,t.updateQueue=null,Ia.current=mi,e=n(r,o),Fa)}if(Ia.current=di,t=null!==Na&&null!==Na.next,Aa=0,Ba=Na=Ra=null,La=!1,t)throw Error(i(300));return e}function Ha(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ba?Ra.memoizedState=Ba=e:Ba=Ba.next=e,Ba}function Va(){e=null===Na?null!==(e=Ra.alternate)?e.memoizedState:null:Na.next;var e,t=null===Ba?Ra.memoizedState:Ba.next;if(null!==t)Ba=t,Na=e;else{if(null===e)throw Error(i(310));e={memoizedState:(Na=e).memoizedState,baseState:Na.baseState,baseQueue:Na.baseQueue,queue:Na.queue,next:null},null===Ba?Ra.memoizedState=Ba=e:Ba=Ba.next=e}return Ba}function Ga(e,t){return"function"==typeof t?t(e):t}function qa(e){var t=Va(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r,o=(l=Na).baseQueue,a=n.pending;if(null!==a&&(null!==o&&(r=o.next,o.next=a.next,a.next=r),l.baseQueue=o=a,n.pending=null),null!==o){o=o.next;var l=l.baseState,u=r=a=null,s=o;do{var c,f=s.lane}while((Aa&f)===f?(null!==u&&(u=u.next={lane:0,action:s.action,eagerReducer:s.eagerReducer,eagerState:s.eagerState,next:null}),l=s.eagerReducer===e?s.eagerState:e(l,s.action)):(c={lane:f,action:s.action,eagerReducer:s.eagerReducer,eagerState:s.eagerState,next:null},null===u?(r=u=c,a=l):u=u.next=c,Ra.lanes|=f,pl|=f),null!==(s=s.next)&&s!==o);null===u?a=l:u.next=r,Kn(l,t.memoizedState)||(gi=!0),t.memoizedState=l,t.baseState=a,t.baseQueue=u,n.lastRenderedState=l}return[t.memoizedState,n.dispatch]}function $a(e){var t=Va(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;for(var l=o=o.next;a=e(a,l.action),(l=l.next)!==o;);Kn(a,t.memoizedState)||(gi=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ka(e,t,n){var r=(r=t._getVersion)(t._source),o=t._workInProgressVersionPrimary;if(null!==o?e=o===r:(e=e.mutableReadLanes,(e=(Aa&e)===e)&&(t._workInProgressVersionPrimary=r,Ma.push(t))),e)return n(t._source);throw Ma.push(t),Error(i(350))}function Ya(e,t,n,r){var o=al;if(null===o)throw Error(i(349));var a=t._getVersion,l=a(t._source),u=Ia.current,s=(f=u.useState((function(){return Ka(o,t,n)})))[1],c=f[0],f=Ba,d=(m=e.memoizedState).refs,p=d.getSnapshot,h=m.source,m=m.subscribe,y=Ra;return e.memoizedState={refs:d,source:t,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=s;var e=a(t._source);if(!Kn(l,e)){e=n(t._source),Kn(c,e)||(s(e),e=Fl(y),o.mutableReadLanes|=e&o.pendingLanes),e=o.mutableReadLanes,o.entangledLanes|=e;for(var r=o.entanglements,i=e;0<i;){var u=31-Nt(i),f=1<<u;r[u]|=e,i&=~f}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=Fl(y);o.mutableReadLanes|=r&o.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),Kn(p,n)&&Kn(h,t)&&Kn(m,r)||((e={pending:null,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:c}).dispatch=s=fi.bind(null,Ra,e),f.queue=e,f.baseQueue=null,c=Ka(o,t,n),f.memoizedState=f.baseState=c),c}function Ja(e,t,n){return Ya(Va(),e,t,n)}function Xa(e){var t=Ha();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:e}).dispatch=fi.bind(null,Ra,e),[t.memoizedState,e]}function Qa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Ra.updateQueue)?(Ra.updateQueue=t={lastEffect:null}).lastEffect=e.next=e:null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,(n.next=e).next=r,t.lastEffect=e),e}function Za(e){return Ha().memoizedState={current:e}}function ei(){return Va().memoizedState}function ti(e,t,n,r){var o=Ha();Ra.flags|=e,o.memoizedState=Qa(1|t,n,void 0,void 0===r?null:r)}function ni(e,t,n,r){var o=Va(),a=void(r=void 0===r?null:r);if(null!==Na){var i=Na.memoizedState;if(a=i.destroy,null!==r&&za(r,i.deps))return void Qa(t,n,a,r)}Ra.flags|=e,o.memoizedState=Qa(1|t,n,a,r)}function ri(e,t){return ti(516,4,e,t)}function oi(e,t){return ni(516,4,e,t)}function ai(e,t){return ni(4,2,e,t)}function ii(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function li(e,t,n){return n=null!=n?n.concat([e]):null,ni(4,2,ii.bind(null,t,e),n)}function ui(){}function si(e,t){var n=Va(),r=(t=void 0===t?null:t,n.memoizedState);return null!==r&&null!==t&&za(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ci(e,t){var n=Va(),r=(t=void 0===t?null:t,n.memoizedState);return null!==r&&null!==t&&za(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function fi(e,t,n){var r=Ll(),o=Fl(e),a={lane:o,action:n,eagerReducer:null,eagerState:null,next:null},i=t.pending;if(null===i?a.next=a:(a.next=i.next,i.next=a),t.pending=a,i=e.alternate,e===Ra||null!==i&&i===Ra)Fa=La=!0;else{if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var l=t.lastRenderedState,u=i(l,n);if(a.eagerReducer=i,a.eagerState=u,Kn(u,l))return}catch(e){}Ul(e,o,r)}}var di={readContext:Wo,useCallback:Ua,useContext:Ua,useEffect:Ua,useImperativeHandle:Ua,useLayoutEffect:Ua,useMemo:Ua,useReducer:Ua,useRef:Ua,useState:Ua,useDebugValue:Ua,useDeferredValue:Ua,useTransition:Ua,useMutableSource:Ua,useOpaqueIdentifier:Ua,unstable_isNewReconciler:!1},pi={readContext:Wo,useCallback:function(e,t){return Ha().memoizedState=[e,void 0===t?null:t],e},useContext:Wo,useEffect:ri,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ti(4,2,ii.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ti(4,2,e,t)},useMemo:function(e,t){var n=Ha();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ha();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=fi.bind(null,Ra,e),[r.memoizedState,e]},useRef:Za,useState:Xa,useDebugValue:ui,useDeferredValue:function(e){var t=Xa(e),n=t[0],r=t[1];return ri((function(){var t=Da.transition;Da.transition=1;try{r(e)}finally{Da.transition=t}}),[e]),n},useTransition:function(){var e=Xa(!1),t=e[0];return Za(e=function(e,t){var n=Po();jo(n<98?98:n,(function(){e(!0)})),jo(97<n?97:n,(function(){var n=Da.transition;Da.transition=1;try{e(!1),t()}finally{Da.transition=n}}))}.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=Ha();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},Ya(r,e,t,n)},useOpaqueIdentifier:function(){var e,t,n;return _a?(e=!1,n={$$typeof:R,toString:n=function(){throw e||(e=!0,t("r:"+(Dr++).toString(36))),Error(i(355))},valueOf:n},t=Xa(n)[1],0==(2&Ra.mode)&&(Ra.flags|=516,Qa(5,(function(){t("r:"+(Dr++).toString(36))}),void 0,null))):Xa(n="r:"+(Dr++).toString(36)),n},unstable_isNewReconciler:!1},hi={readContext:Wo,useCallback:si,useContext:Wo,useEffect:oi,useImperativeHandle:li,useLayoutEffect:ai,useMemo:ci,useReducer:qa,useRef:ei,useState:function(){return qa(Ga)},useDebugValue:ui,useDeferredValue:function(e){var t=qa(Ga),n=t[0],r=t[1];return oi((function(){var t=Da.transition;Da.transition=1;try{r(e)}finally{Da.transition=t}}),[e]),n},useTransition:function(){var e=qa(Ga)[0];return[ei().current,e]},useMutableSource:Ja,useOpaqueIdentifier:function(){return qa(Ga)[0]},unstable_isNewReconciler:!1},mi={readContext:Wo,useCallback:si,useContext:Wo,useEffect:oi,useImperativeHandle:li,useLayoutEffect:ai,useMemo:ci,useReducer:$a,useRef:ei,useState:function(){return $a(Ga)},useDebugValue:ui,useDeferredValue:function(e){var t=$a(Ga),n=t[0],r=t[1];return oi((function(){var t=Da.transition;Da.transition=1;try{r(e)}finally{Da.transition=t}}),[e]),n},useTransition:function(){var e=$a(Ga)[0];return[ei().current,e]},useMutableSource:Ja,useOpaqueIdentifier:function(){return $a(Ga)[0]},unstable_isNewReconciler:!1},yi=O.ReactCurrentOwner,gi=!1;function bi(e,t,n,r){t.child=null===e?sa(t,null,n,r):ua(t,e.child,n,r)}function vi(e,t,n,r,o){n=n.render;var a=t.ref;return zo(t,o),r=Wa(e,t,n,r,a,o),null===e||gi?(t.flags|=1,bi(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,Ai(e,t,o))}function wi(e,t,n,r,o,a){var i;return null===e?"function"!=typeof(i=n.type)||fu(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=pu(n.type,null,r,t,t.mode,a)).ref=t.ref,(e.return=t).child=e):(t.tag=15,t.type=i,Oi(e,t,i,r,o,a)):(i=e.child,0==(o&a)&&(o=i.memoizedProps,(n=null!==(n=n.compare)?n:Jn)(o,r)&&e.ref===t.ref)?Ai(e,t,a):(t.flags|=1,(e=du(i,r)).ref=t.ref,(e.return=t).child=e))}function Oi(e,t,n,r,o,a){if(null!==e&&Jn(e.memoizedProps,r)&&e.ref===t.ref){if(gi=!1,0==(a&o))return t.lanes=e.lanes,Ai(e,t,a);0!=(16384&e.flags)&&(gi=!0)}return Ci(e,t,n,r,a)}function Si(e,t,n){var r=t.pendingProps,o=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},Kl(0,n);else{if(0==(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},Kl(0,e),null;t.memoizedState={baseLanes:0},Kl(0,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Kl(0,r);return bi(e,t,o,n),t.child}function _i(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ci(e,t,n,r,o){var a=Qr(t,Zr(n)?Xr:Yr.current);return zo(t,o),n=Wa(e,t,n,r,a,o),null===e||gi?(t.flags|=1,bi(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,Ai(e,t,o))}function Ei(e,t,n,r,o){var a,i,l,u,s,c,f,d,p,h;return Zr(n)?(a=!0,ro(t)):a=!1,zo(t,o),r=null===t.stateNode?(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ta(t,n,r),ra(t,n,r,o),!0):null===e?(i=t.stateNode,l=t.memoizedProps,i.props=l,d=i.context,u="object"==typeof(u=n.contextType)&&null!==u?Wo(u):Qr(t,u=Zr(n)?Xr:Yr.current),(c="function"==typeof(s=n.getDerivedStateFromProps)||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||l===r&&d===u||na(0,i,r,u),Ho=!1,f=t.memoizedState,i.state=f,Yo(t,r,i,o),d=t.memoizedState,l!==r||f!==d||Jr.current||Ho?("function"==typeof s&&(Qo(t,0,s,r),d=t.memoizedState),(l=Ho||ea(t,n,l,r,f,d,u))?(c||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.flags|=4)):("function"==typeof i.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=d),i.props=r,i.state=d,i.context=u,l):("function"==typeof i.componentDidMount&&(t.flags|=4),!1)):(i=t.stateNode,Go(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Do(t.type,l),i.props=u,c=t.pendingProps,f=i.context,d="object"==typeof(d=n.contextType)&&null!==d?Wo(d):Qr(t,d=Zr(n)?Xr:Yr.current),(s="function"==typeof(p=n.getDerivedStateFromProps)||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||l===c&&f===d||na(0,i,r,d),Ho=!1,f=t.memoizedState,i.state=f,Yo(t,r,i,o),h=t.memoizedState,l!==c||f!==h||Jr.current||Ho?("function"==typeof p&&(Qo(t,0,p,r),h=t.memoizedState),(u=Ho||ea(t,n,u,r,f,h,d))?(s||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(r,h,d),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,h,d)),"function"==typeof i.componentDidUpdate&&(t.flags|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof i.componentDidUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=h),i.props=r,i.state=h,i.context=d,u):("function"!=typeof i.componentDidUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),!1)),Pi(e,t,n,r,a,o)}function Pi(e,t,n,r,o,a){_i(e,t);var i=0!=(64&t.flags);if(!r&&!i)return o&&oo(t,n,!1),Ai(e,t,a);r=t.stateNode,yi.current=t;var l=i&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=ua(t,e.child,null,a),t.child=ua(t,null,l,a)):bi(e,t,l,a),t.memoizedState=r.state,o&&oo(t,n,!0),t.child}function ki(e){var t=e.stateNode;t.pendingContext?to(0,t.pendingContext,t.pendingContext!==t.context):t.context&&to(0,t.context,!1),ma(e,t.containerInfo)}var ji={dehydrated:null,retryLane:0};function xi(e,t,n){var r,o=t.pendingProps,a=va.current,i=!1;return(r=(r=0!=(64&t.flags))?r:(null===e||null!==e.memoizedState)&&0!=(2&a))?(i=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),$r(va,1&a),null===e?(void 0!==o.fallback&&Pa(t),e=o.children,a=o.fallback,i?(e=Mi(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=ji,e):"number"==typeof o.unstable_expectedLoadTime?(e=Mi(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=ji,t.lanes=33554432,e):((n=mu({mode:"visible",children:e},t.mode,n,null)).return=t).child=n):(e.memoizedState,i?(o=function(e,t,n,r,o){var a=t.mode,i=e.child,l=(e=i.sibling,{mode:"hidden",children:n});return 0==(2&a)&&t.child!==i?((n=t.child).childLanes=0,n.pendingProps=l,null!==(i=n.lastEffect)?(t.firstEffect=n.firstEffect,(t.lastEffect=i).nextEffect=null):t.firstEffect=t.lastEffect=null):n=du(i,l),null!==e?r=du(e,r):(r=hu(r,a,o,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}(e,t,o.children,o.fallback,n),i=t.child,a=e.child.memoizedState,i.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},i.childLanes=e.childLanes&~n,t.memoizedState=ji,o):(n=function(e,t,n,r){var o=e.child;return e=o.sibling,n=du(o,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,(n.sibling=null)!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}(e,t,o.children,n),t.memoizedState=null,n))}function Mi(e,t,n,r){var o=e.mode,a=e.child;return t={mode:"hidden",children:t},0==(2&o)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=mu(t,o,0,null),n=hu(n,o,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function Ti(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Uo(e.return,t)}function Ii(e,t,n,r,o,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o,lastEffect:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o,i.lastEffect=a)}function Di(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;if(bi(e,t,r.children,n),0!=(2&(r=va.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ti(e,n);else if(19===e.tag)Ti(e,n);else if(null!==e.child){e=(e.child.return=e).child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if($r(va,r),0==(2&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===wa(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Ii(t,!1,o,n,a,t.lastEffect);break;case"backwards":for(o=t.child,t.child=n=null;null!==o;){if(null!==(e=o.alternate)&&null===wa(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Ii(t,!0,n,null,a,t.lastEffect);break;case"together":Ii(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Ai(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pl|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=du(e=t.child,e.pendingProps),(t.child=n).return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=du(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ri(e,t){if(!_a)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ni(e,t){try{for(var n="",r=t;n+=function(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return H(e.type,!1);case 11:return H(e.type.render,!1);case 22:return H(e.type._render,!1);case 1:return H(e.type,!0);default:return""}}(r),r=r.return;);var o=n}catch(e){o="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:o}}function Bi(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var Li=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n=(n.child.return=n).child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Fi=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,ha(fa.current);var i,l=null;switch(n){case"input":a=J(e,a),r=J(e,r),l=[];break;case"option":a=ne(e,a),r=ne(e,r),l=[];break;case"select":a=o({},a,{value:void 0}),r=o({},r,{value:void 0}),l=[];break;case"textarea":a=oe(e,a),r=oe(e,r),l=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(e.onclick=_r)}for(f in we(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var s=a[f];for(i in s)s.hasOwnProperty(i)&&((n=n||{})[i]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(u.hasOwnProperty(f)?l=l||[]:(l=l||[]).push(f,null));for(f in r){var c=r[f];if(s=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&c!==s&&(null!=c||null!=s))if("style"===f)if(s){for(i in s)!s.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||((n=n||{})[i]="");for(i in c)c.hasOwnProperty(i)&&s[i]!==c[i]&&((n=n||{})[i]=c[i])}else n||(l=l||[]).push(f,n),n=c;else"dangerouslySetInnerHTML"===f?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(l=l||[]).push(f,c)):"children"===f?"string"!=typeof c&&"number"!=typeof c||(l=l||[]).push(f,""+c):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(u.hasOwnProperty(f)?(null!=c&&"onScroll"===f&&pr("scroll",e),l||s===c||(l=[])):"object"==typeof c&&null!==c&&c.$$typeof===R?c.toString():(l=l||[]).push(f,c))}n&&(l=l||[]).push("style",n);var f=l;(t.updateQueue=f)&&(t.flags|=4)}},Ui=function(e,t,n,r){n!==r&&(t.flags|=4)},zi="function"==typeof WeakMap?WeakMap:Map;function Wi(e,t,n){(n=qo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Sl||(Sl=!0,_l=r),Bi(0,t)},n}function Hi(e,t,n){(n=qo(-1,n)).tag=3;var r,o=e.type.getDerivedStateFromError;return null!==("function"==typeof o&&(r=t.value,n.payload=function(){return Bi(0,t),o(r)}),e=e.stateNode)&&"function"==typeof e.componentDidCatch&&(n.callback=function(){"function"!=typeof o&&(null===Cl?Cl=new Set([this]):Cl.add(this),Bi(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var Vi="function"==typeof WeakSet?WeakSet:Set;function Gi(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){lu(e,t)}else t.current=null}function qi(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{}while(3==(3&e.tag)&&(o=e.create,e.destroy=o()),(e=e.next)!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var r=e,o=r.next;0!=(4&(r=r.tag))&&0!=(1&r)&&(ou(n,e),r=n,a=e,jl.push(a,r),El||(El=!0,xo(97,(function(){return ru(),null})))),e=o}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(o=n.elementType===n.type?t.memoizedProps:Do(n.type,t.memoizedProps),e.componentDidUpdate(o,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&Jo(0,t,e));case 3:if(null!==(t=n.updateQueue)){if((e=null)!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}Jo(0,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Pr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&null!==(n=n.alternate)&&null!==(n=n.memoizedState)&&null!==(n=n.dehydrated)&&ht(n))}var a;throw Error(i(163))}function $i(e,t){for(var n=e;;){if(5===n.tag){var r,o=n.stateNode;t?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=n.stateNode,r=null!=(r=n.memoizedProps.style)&&r.hasOwnProperty("display")?r.display:null,o.style.display=ge("display",r))}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n=(n.child.return=n).child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function Ki(e,t){if(io&&"function"==typeof io.onCommitFiberUnmount)try{io.onCommitFiberUnmount(ao,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=(o=n).destroy,o=o.tag;if(void 0!==r)if(0!=(4&o))ou(t,n);else{o=t;try{r()}catch(e){lu(o,e)}}}while((n=n.next)!==e)}break;case 1:if(Gi(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){lu(t,e)}break;case 5:Gi(t);break;case 4:Qi(e,t)}}function Yi(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function Ji(e){return 5===e.tag||3===e.tag||4===e.tag}function Xi(e){e:{for(var t=e.return;null!==t;){if(Ji(t))break e;t=t.return}throw Error(i(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(i(161))}16&n.flags&&(he(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||Ji(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n=(n.child.return=n).child}if(!(2&n.flags)){n=n.stateNode;break e}}(r?function e(t,n,r){var o=t.tag,a=5===o||6===o;if(a)t=a?t.stateNode:t.stateNode.instance,n?(8===r.nodeType?r.parentNode:r).insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null==(r=r._reactRootContainer)&&null===n.onclick&&(n.onclick=_r));else if(4!==o&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}:function e(t,n,r){var o=t.tag,a=5===o||6===o;if(a)t=a?t.stateNode:t.stateNode.instance,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==o&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling})(e,n,t)}function Qi(e,t){for(var n,r,o=t,a=!1;;){if(!a){a=o.return;e:for(;;){if(null===a)throw Error(i(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===o.tag||6===o.tag){e:for(var l=e,u=o,s=u;;)if(Ki(l,s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===u)break;for(;null===s.sibling;){if(null===s.return||s.return===u)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}r?(l=n,u=o.stateNode,(8===l.nodeType?l.parentNode:l).removeChild(u)):n.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){n=o.stateNode.containerInfo,r=!0,o=(o.child.return=o).child;continue}}else if(Ki(e,o),null!==o.child){o=(o.child.return=o).child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function Zi(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null))for(var r=n=n.next;3==(3&r.tag)&&(e=r.destroy,(r.destroy=void 0)!==e&&e()),(r=r.next)!==n;);return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var o=null!==e?e.memoizedProps:r,a=(e=t.type,t.updateQueue);if((t.updateQueue=null)!==a){for(n[Rr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Q(n,r),Oe(e,o),t=Oe(e,r),o=0;o<a.length;o+=2){var l=a[o],u=a[o+1];"style"===l?be(n,u):"dangerouslySetInnerHTML"===l?pe(n,u):"children"===l?he(n,u):v(n,l,u,t)}switch(e){case"input":Z(n,r);break;case"textarea":ie(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?re(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?re(n,!!r.multiple,r.defaultValue,!0):re(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(i(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,ht(n.containerInfo)));case 13:return null!==t.memoizedState&&(gl=Eo(),$i(t.child,!0)),void el(t);case 19:return void el(t);case 23:case 24:return void $i(t,null!==t.memoizedState)}throw Error(i(163))}function el(e){var t,n=e.updateQueue;null!==n&&((e.updateQueue=null)===(t=e.stateNode)&&(t=e.stateNode=new Vi),n.forEach((function(n){var r=function(e,t){var n=e.stateNode;null!==n&&n.delete(t),(t=0)===t&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Po()?1:2:0===(t=Dt(62914560&~(Al=0===Al?dl:Al)))&&(t=4194304)),n=Ll(),null!==(e=zl(e,t))&&(Rt(e,t,n),Wl(e,n))}.bind(null,e,n);t.has(n)||(t.add(n),n.then(r,r))})))}var tl=Math.ceil,nl=O.ReactCurrentDispatcher,rl=O.ReactCurrentOwner,ol=0,al=null,il=null,ll=0,ul=0,sl=Gr(0),cl=0,fl=null,dl=0,pl=0,hl=0,ml=0,yl=null,gl=0,bl=1/0;function vl(){bl=Eo()+500}var wl,Ol=null,Sl=!1,_l=null,Cl=null,El=!1,Pl=null,kl=90,jl=[],xl=[],Ml=null,Tl=0,Il=null,Dl=-1,Al=0,Rl=0,Nl=null,Bl=!1;function Ll(){return 0!=(48&ol)?Eo():-1!==Dl?Dl:Dl=Eo()}function Fl(e){return 0==(2&(e=e.mode))?1:0==(4&e)?99===Po()?1:2:(0===Al&&(Al=dl),0!==Io.transition?(0!==Rl&&(Rl=null!==yl?yl.pendingLanes:0),e=Al,t=4186112&~Rl,0!=(t&=-t)||0==(t=(e=4186112&~e)&-e)&&(t=8192),t):(e=Po(),It(0!=(4&ol)&&98===e?12:e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),Al)));var t}function Ul(e,t,n){if(50<Tl)throw Tl=0,Il=null,Error(i(185));var r;null!==(e=zl(e,t))&&(Rt(e,t,n),e===al&&(hl|=t,4===cl&&Vl(e,ll)),r=Po(),1===t?0!=(8&ol)&&0==(48&ol)?Gl(e):(Wl(e,n),0===ol&&(vl(),Mo())):(0==(4&ol)||98!==r&&99!==r||(null===Ml?Ml=new Set([e]):Ml.add(e)),Wl(e,n)),yl=e)}function zl(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),e=(n=e).return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),e=(n=e).return;return 3===n.tag?n.stateNode:null}function Wl(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,o=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var u,s=31-Nt(l),c=1<<s,f=a[s];-1===f?0!=(c&r)&&0==(c&o)||(f=t,xt(c),u=jt,a[s]=10<=u?f+250:6<=u?f+5e3:-1):f<=t&&(e.expiredLanes|=c),l&=~c}if(r=Mt(e,e===al?ll:0),t=jt,0===r)null!==n&&(n!==vo&&so(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==vo&&so(n)}n=15===t?(n=Gl.bind(null,e),null===Oo?(Oo=[n],So=uo(ho,To)):Oo.push(n),vo):14===t?xo(99,Gl.bind(null,e)):xo(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(i(358,e))}}(t),Hl.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function Hl(e){if(Dl=-1,(Rl=Al=0)!=(48&ol))throw Error(i(327));var t=e.callbackNode;if(ru()&&e.callbackNode!==t)return null;var n=Mt(e,e===al?ll:0);if(0===n)return null;var r=n,o=ol,a=(ol|=16,Ql());for(al===e&&ll===r||(vl(),Jl(e,r));;)try{for(;null!==il&&!co();)eu(il);break}catch(t){Xl(e,t)}if(Lo(),nl.current=a,ol=o,r=null!==il?0:(al=null,ll=0,cl),0!=(dl&hl))Jl(e,0);else if(0!==r){if(2===r&&(ol|=64,e.hydrate&&(e.hydrate=!1,Mr(e.containerInfo)),0!==(n=Tt(e))&&(r=Zl(e,n))),1===r)throw t=fl,Jl(e,0),Vl(e,n),Wl(e,Eo()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(i(345));case 2:case 5:nu(e);break;case 3:if(Vl(e,n),(62914560&n)===n&&10<(r=gl+500-Eo())){if(0!==Mt(e,0))break;if(((o=e.suspendedLanes)&n)!==n){Ll(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=jr(nu.bind(null,e),r);break}nu(e);break;case 4:if(Vl(e,n),(4186112&n)===n)break;for(r=e.eventTimes,o=-1;0<n;){var l=31-Nt(n);a=1<<l,o<(l=r[l])&&(o=l),n&=~a}if(n=o,10<(n=((n=Eo()-n)<120?120:n<480?480:n<1080?1080:n<1920?1920:n<3e3?3e3:n<4320?4320:1960*tl(n/1960))-n)){e.timeoutHandle=jr(nu.bind(null,e),n);break}nu(e);break;default:throw Error(i(329))}}return Wl(e,Eo()),e.callbackNode===t?Hl.bind(null,e):null}function Vl(e,t){for(t=t&~ml&~hl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Nt(t),r=1<<n;e[n]=-1,t&=~r}}function Gl(e){if(0!=(48&ol))throw Error(i(327));var t,n;if(ru(),e===al&&0!=(e.expiredLanes&ll)?(n=Zl(e,t=ll),0!=(dl&hl)&&(n=Zl(e,t=Mt(e,t)))):n=Zl(e,t=Mt(e,0)),0!==e.tag&&2===n&&(ol|=64,e.hydrate&&(e.hydrate=!1,Mr(e.containerInfo)),0!==(t=Tt(e))&&(n=Zl(e,t))),1===n)throw n=fl,Jl(e,0),Vl(e,t),Wl(e,Eo()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,nu(e),Wl(e,Eo()),null}function ql(e,t){var n=ol;ol|=1;try{return e(t)}finally{0===(ol=n)&&(vl(),Mo())}}function $l(e,t){var n=ol;ol=-2&ol|8;try{e(t)}finally{0===(ol=n)&&(vl(),Mo())}}function Kl(e,t){$r(sl,ul),ul|=t,dl|=t}function Yl(){ul=sl.current,qr(sl)}function Jl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,xr(n)),null!==il)for(n=il.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&eo();break;case 3:ya(),qr(Jr),qr(Yr),Ta();break;case 5:ba(r);break;case 4:ya();break;case 13:case 19:qr(va);break;case 10:Fo(r);break;case 23:case 24:Yl()}n=n.return}il=du((al=e).current,null),ll=ul=dl=t,fl=null,ml=hl=pl=cl=0}function Xl(e,t){for(;;){var n=il;try{if(Lo(),Ia.current=di,La){for(var r=Ra.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}La=!1}if(Aa=0,Ba=Na=Ra=null,Fa=!1,(rl.current=null)===n||null===n.return){cl=1,fl=t,il=null;break}e:{var a=e,i=n.return,l=t;if(t=ll,(v=n).flags|=2048,(v.firstEffect=v.lastEffect=null)!==l&&"object"==typeof l&&"function"==typeof l.then){var u,s,c,f,d=l,p=(0==(2&v.mode)&&((u=v.alternate)?(v.updateQueue=u.updateQueue,v.memoizedState=u.memoizedState,v.lanes=u.lanes):(v.updateQueue=null,v.memoizedState=null)),0!=(1&va.current)),h=i;do{if(f=(f=13===h.tag)?null!==(s=h.memoizedState)?null!==s.dehydrated:void 0!==(c=h.memoizedProps).fallback&&(!0!==c.unstable_avoidThisFallback||!p):f){var m,y,g=h.updateQueue;if(null===g?((m=new Set).add(d),h.updateQueue=m):g.add(d),0==(2&h.mode)){h.flags|=64,v.flags|=16384,v.flags&=-2981,1===v.tag&&(null===v.alternate?v.tag=17:((y=qo(-1,1)).tag=2,$o(v,y))),v.lanes|=1;break e}l=void 0;var b,v=t,w=a.pingCache;null===w?(w=a.pingCache=new zi,l=new Set,w.set(d,l)):void 0===(l=w.get(d))&&(l=new Set,w.set(d,l)),l.has(v)||(l.add(v),b=uu.bind(null,a,d,v),d.then(b,b)),h.flags|=4096,h.lanes=t;break e}}while(null!==(h=h.return));l=Error((V(v.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==cl&&(cl=2),l=Ni(l,v),h=i;do{switch(h.tag){case 3:a=l,h.flags|=4096,t&=-t,h.lanes|=t,Ko(h,Wi(0,a,t));break e;case 1:a=l;var O=h.type,S=h.stateNode;if(0==(64&h.flags)&&("function"==typeof O.getDerivedStateFromError||null!==S&&"function"==typeof S.componentDidCatch&&(null===Cl||!Cl.has(S)))){h.flags|=4096,t&=-t,h.lanes|=t,Ko(h,Hi(h,a,t));break e}}}while(null!==(h=h.return))}tu(n)}catch(e){t=e,il===n&&null!==n&&(il=n=n.return);continue}break}}function Ql(){var e=nl.current;return nl.current=di,null===e?di:e}function Zl(e,t){var n=ol,r=(ol|=16,Ql());for(al===e&&ll===t||Jl(e,t);;)try{for(;null!==il;)eu(il);break}catch(t){Xl(e,t)}if(Lo(),ol=n,nl.current=r,null!==il)throw Error(i(261));return al=null,ll=0,cl}function eu(e){var t=wl(e.alternate,e,ul);e.memoizedProps=e.pendingProps,null===t?tu(e):il=t,rl.current=null}function tu(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=function(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return Zr(t.type)&&eo(),null;case 3:return ya(),qr(Jr),qr(Yr),Ta(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ja(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:ba(t);var a=ha(pa.current);if(n=t.type,null!==e&&null!=t.stateNode)Fi(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(i(166));return null}if(e=ha(fa.current),ja(t)){r=t.stateNode,n=t.type;var l,s=t.memoizedProps;switch(r[Ar]=t,r[Rr]=s,n){case"dialog":pr("cancel",r),pr("close",r);break;case"iframe":case"object":case"embed":pr("load",r);break;case"video":case"audio":for(e=0;e<sr.length;e++)pr(sr[e],r);break;case"source":pr("error",r);break;case"img":case"image":case"link":pr("error",r),pr("load",r);break;case"details":pr("toggle",r);break;case"input":X(r,s),pr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},pr("invalid",r);break;case"textarea":ae(r,s),pr("invalid",r)}for(l in we(n,s),e=null,s)s.hasOwnProperty(l)&&(a=s[l],"children"===l?"string"==typeof a?r.textContent!==a&&(e=["children",a]):"number"==typeof a&&r.textContent!==""+a&&(e=["children",""+a]):u.hasOwnProperty(l)&&null!=a&&"onScroll"===l&&pr("scroll",r));switch(n){case"input":$(r),ee(r,s,!0);break;case"textarea":$(r),le(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=_r)}r=e,null!==(t.updateQueue=r)&&(t.flags|=4)}else{switch(l=9===a.nodeType?a:a.ownerDocument,(e=e===ue?se(n):e)===ue?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Ar]=t,e[Rr]=r,Li(e,t),t.stateNode=e,l=Oe(n,r),n){case"dialog":pr("cancel",e),pr("close",e),a=r;break;case"iframe":case"object":case"embed":pr("load",e),a=r;break;case"video":case"audio":for(a=0;a<sr.length;a++)pr(sr[a],e);a=r;break;case"source":pr("error",e),a=r;break;case"img":case"image":case"link":pr("error",e),pr("load",e),a=r;break;case"details":pr("toggle",e),a=r;break;case"input":X(e,r),a=J(e,r),pr("invalid",e);break;case"option":a=ne(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=o({},r,{value:void 0}),pr("invalid",e);break;case"textarea":ae(e,r),a=oe(e,r),pr("invalid",e);break;default:a=r}we(n,a);var c,f=a;for(s in f)f.hasOwnProperty(s)&&(c=f[s],"style"===s?be(e,c):"dangerouslySetInnerHTML"===s?null!=(c=c?c.__html:void 0)&&pe(e,c):"children"===s?"string"==typeof c?"textarea"===n&&""===c||he(e,c):"number"==typeof c&&he(e,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=c&&"onScroll"===s&&pr("scroll",e):null!=c&&v(e,s,c,l)));switch(n){case"input":$(e),ee(e,r,!1);break;case"textarea":$(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?re(e,!!r.multiple,s,!1):null!=r.defaultValue&&re(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof a.onClick&&(e.onclick=_r)}Pr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Ui(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(i(166));n=ha(pa.current),ha(fa.current),ja(t)?(r=t.stateNode,n=t.memoizedProps,r[Ar]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Ar]=t).stateNode=r}return null;case 13:return qr(va),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&ja(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&va.current)?0===cl&&(cl=3):(0!==cl&&3!==cl||(cl=4),null===al||0==(134217727&pl)&&0==(134217727&hl)||Vl(al,ll))),(r||n)&&(t.flags|=4),null);case 4:return ya(),null===e&&mr(t.stateNode.containerInfo),null;case 10:return Fo(t),null;case 19:if(qr(va),null===(r=t.memoizedState))return null;if(s=0!=(64&t.flags),null===(l=r.rendering))if(s)Ri(r,!1);else{if(0!==cl||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(l=wa(e))){for(t.flags|=64,Ri(r,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,(s.lastEffect=null)===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return $r(va,1&va.current|2),t.child}e=e.sibling}null!==r.tail&&Eo()>bl&&(t.flags|=64,Ri(r,!(s=!0)),t.lanes=33554432)}else{if(!s)if(null!==(e=wa(l))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ri(r,!0),null===r.tail&&"hidden"===r.tailMode&&!l.alternate&&!_a)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Eo()-r.renderingStartTime>bl&&1073741824!==n&&(t.flags|=64,Ri(r,!(s=!0)),t.lanes=33554432);r.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=r.last)?n.sibling=l:t.child=l,r.last=l)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Eo(),n.sibling=null,t=va.current,$r(va,s?1&t|2:1&t),n):null;case 23:case 24:return Yl(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(i(156,t.tag))}(n,t,ul)))return void(il=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&ul)||0==(4&n.mode)){for(var r=0,a=n.child;null!==a;)r|=a.lanes|a.childLanes,a=a.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=function(e){switch(e.tag){case 1:Zr(e.type)&&eo();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(ya(),qr(Jr),qr(Yr),Ta(),0!=(64&(t=e.flags)))throw Error(i(285));return e.flags=-4097&t|64,e;case 5:return ba(e),null;case 13:return qr(va),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return qr(va),null;case 4:return ya(),null;case 10:return Fo(e),null;case 23:case 24:return Yl(),null;default:return null}}(t)))return n.flags&=2047,void(il=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(il=t)}while(il=t=e,null!==t);0===cl&&(cl=5)}function nu(e){var t=Po();return jo(99,function(e,t){for(;ru(),null!==Pl;);if(0!=(48&ol))throw Error(i(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null;var r=n.lanes|n.childLanes,o=r,a=e.pendingLanes&~o;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=o,e.mutableReadLanes&=o,e.entangledLanes&=o,o=e.entanglements;for(var l,u=e.eventTimes,s=e.expirationTimes;0<a;){var c=31-Nt(a),f=1<<c;o[c]=0,u[c]=-1,s[c]=-1,a&=~f}if(null!==Ml&&0==(24&r)&&Ml.has(e)&&Ml.delete(e),e===al&&(il=al=null,ll=0),null!==(r=1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,n.firstEffect):n:n.firstEffect)){if(o=ol,ol|=32,rl.current=null,Cr=zt,er(u=Zn())){if("selectionStart"in u)s={start:u.selectionStart,end:u.selectionEnd};else e:if(s=(s=u.ownerDocument)&&s.defaultView||window,(f=s.getSelection&&s.getSelection())&&0!==f.rangeCount){s=f.anchorNode,a=f.anchorOffset,c=f.focusNode,f=f.focusOffset;try{s.nodeType,c.nodeType}catch(e){s=null;break e}var d=0,p=-1,h=-1,m=0,y=0,g=u,b=null;t:for(;;){for(;g!==s||0!==a&&3!==g.nodeType||(p=d+a),g!==c||0!==f&&3!==g.nodeType||(h=d+f),3===g.nodeType&&(d+=g.nodeValue.length),null!==(l=g.firstChild);)b=g,g=l;for(;;){if(g===u)break t;if(b===s&&++m===a&&(p=d),b===c&&++y===f&&(h=d),null!==(l=g.nextSibling))break;b=(g=b).parentNode}g=l}s=-1===p||-1===h?null:{start:p,end:h}}else s=null;s=s||{start:0,end:0}}else s=null;Nl=null,Bl=zt=!(Er={focusedElem:u,selectionRange:s}),Ol=r;do{try{!function(){for(;null!==Ol;){var e=Ol.alternate,t=(Bl||null===Nl||(0!=(8&Ol.flags)?Ke(Ol,Nl)&&(Bl=!0):13===Ol.tag&&function(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&null!==(t=t.memoizedState)&&null===t.dehydrated}(e,Ol)&&Ke(Ol,Nl)&&(Bl=!0)),Ol.flags);0!=(256&t)&&function(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:var n,r;return 256&t.flags&&null!==e&&(n=e.memoizedProps,r=e.memoizedState,t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Do(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t);case 3:return 256&t.flags&&Mr(t.stateNode.containerInfo)}throw Error(i(163))}(e,Ol),0==(512&t)||El||(El=!0,xo(97,(function(){return ru(),null}))),Ol=Ol.nextEffect}}()}catch(e){if(null===Ol)throw Error(i(330));lu(Ol,e),Ol=Ol.nextEffect}}while(null!==Ol);Nl=null,Ol=r;do{try{for(u=e;null!==Ol;){var v,w,O=Ol.flags;switch(16&O&&he(Ol.stateNode,""),128&O&&null!==(v=Ol.alternate)&&null!==(w=v.ref)&&("function"==typeof w?w(null):w.current=null),1038&O){case 2:Xi(Ol),Ol.flags&=-3;break;case 6:Xi(Ol),Ol.flags&=-3,Zi(Ol.alternate,Ol);break;case 1024:Ol.flags&=-1025;break;case 1028:Ol.flags&=-1025,Zi(Ol.alternate,Ol);break;case 4:Zi(Ol.alternate,Ol);break;case 8:Qi(u,s=Ol);var S=s.alternate;Yi(s),null!==S&&Yi(S)}Ol=Ol.nextEffect}}catch(e){if(null===Ol)throw Error(i(330));lu(Ol,e),Ol=Ol.nextEffect}}while(null!==Ol);if(w=Er,v=Zn(),O=w.focusedElem,u=w.selectionRange,v!==O&&O&&O.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(O.ownerDocument.documentElement,O)){null!==u&&er(O)&&(v=u.start,void 0===(w=u.end)&&(w=v),"selectionStart"in O?(O.selectionStart=v,O.selectionEnd=Math.min(w,O.value.length)):(w=(v=O.ownerDocument||document)&&v.defaultView||window).getSelection&&(w=w.getSelection(),s=O.textContent.length,S=Math.min(u.start,s),u=void 0===u.end?S:Math.min(u.end,s),!w.extend&&u<S&&(s=u,u=S,S=s),s=Qn(O,S),a=Qn(O,u),s&&a&&(1!==w.rangeCount||w.anchorNode!==s.node||w.anchorOffset!==s.offset||w.focusNode!==a.node||w.focusOffset!==a.offset)&&((v=v.createRange()).setStart(s.node,s.offset),w.removeAllRanges(),u<S?(w.addRange(v),w.extend(a.node,a.offset)):(v.setEnd(a.node,a.offset),w.addRange(v))))),v=[];for(w=O;w=w.parentNode;)1===w.nodeType&&v.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"==typeof O.focus&&O.focus(),O=0;O<v.length;O++)(w=v[O]).element.scrollLeft=w.left,w.element.scrollTop=w.top}zt=!!Cr,Er=Cr=null,e.current=n,Ol=r;do{try{for(O=e;null!==Ol;){var _,C,E=Ol.flags;36&E&&qi(O,Ol.alternate,Ol),128&E&&(v=void 0,null!==(_=Ol.ref)&&(C=Ol.stateNode,Ol.tag,v=C,"function"==typeof _?_(v):_.current=v)),Ol=Ol.nextEffect}}catch(e){if(null===Ol)throw Error(i(330));lu(Ol,e),Ol=Ol.nextEffect}}while(null!==Ol);Ol=null,wo(),ol=o}else e.current=n;if(El)El=!1,Pl=e,kl=t;else for(Ol=r;null!==Ol;)t=Ol.nextEffect,Ol.nextEffect=null,8&Ol.flags&&((E=Ol).sibling=null,E.stateNode=null),Ol=t;if(0===(r=e.pendingLanes)&&(Cl=null),1===r?e===Il?Tl++:(Tl=0,Il=e):Tl=0,n=n.stateNode,io&&"function"==typeof io.onCommitFiberRoot)try{io.onCommitFiberRoot(ao,n,void 0,64==(64&n.current.flags))}catch(e){}if(Wl(e,Eo()),Sl)throw Sl=!1,e=_l,_l=null,e;return 0!=(8&ol)||Mo(),null}.bind(null,e,t)),null}function ru(){var e;return 90!==kl&&(e=97<kl?97:kl,kl=90,jo(e,au))}function ou(e,t){xl.push(t,e),El||(El=!0,xo(97,(function(){return ru(),null})))}function au(){if(null===Pl)return!1;var e=Pl;if(Pl=null,0!=(48&ol))throw Error(i(331));var t=ol,n=(ol|=32,xl);xl=[];for(var r=0;r<n.length;r+=2){var o=n[r],a=n[r+1],l=o.destroy;if(o.destroy=void 0,"function"==typeof l)try{l()}catch(e){if(null===a)throw Error(i(330));lu(a,e)}}for(n=jl,jl=[],r=0;r<n.length;r+=2){o=n[r],a=n[r+1];try{var u=o.create;o.destroy=u()}catch(e){if(null===a)throw Error(i(330));lu(a,e)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return ol=t,Mo(),!0}function iu(e,t,n){$o(e,t=Wi(0,t=Ni(n,t),1)),t=Ll(),null!==(e=zl(e,1))&&(Rt(e,1,t),Wl(e,t))}function lu(e,t){if(3===e.tag)iu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){iu(n,e,t);break}if(1===n.tag){var r,o=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof o.componentDidCatch&&(null===Cl||!Cl.has(o))){if($o(n,Hi(n,e=Ni(t,e),1)),r=Ll(),null!==(n=zl(n,1)))Rt(n,1,r),Wl(n,r);else if("function"==typeof o.componentDidCatch&&(null===Cl||!Cl.has(o)))try{o.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function uu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Ll(),e.pingedLanes|=e.suspendedLanes&n,al===e&&(ll&n)===n&&(4===cl||3===cl&&(62914560&ll)===ll&&Eo()-gl<500?Jl(e,0):ml|=n),Wl(e,t)}function su(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function cu(e,t,n,r){return new su(e,t,n,r)}function fu(e){return(e=e.prototype)&&e.isReactComponent}function du(e,t){var n=e.alternate;return null===n?((n=cu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,(n.alternate=e).alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function pu(e,t,n,r,o,a){var l=2;if("function"==typeof(r=e))fu(e)&&(l=1);else if("string"==typeof e)l=5;else e:switch(e){case C:return hu(n.children,o,a,t);case N:l=8,o|=16;break;case E:l=8,o|=1;break;case P:return(e=cu(12,n,t,8|o)).elementType=P,e.type=P,e.lanes=a,e;case M:return(e=cu(13,n,t,o)).type=M,e.elementType=M,e.lanes=a,e;case T:return(e=cu(19,n,t,o)).elementType=T,e.lanes=a,e;case B:return mu(n,o,a,t);case L:return(e=cu(24,n,t,o)).elementType=L,e.lanes=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case k:l=10;break e;case j:l=9;break e;case x:l=11;break e;case I:l=14;break e;case D:l=16,r=null;break e;case A:l=22;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=cu(l,n,t,o)).elementType=e,t.type=r,t.lanes=a,t}function hu(e,t,n,r){return(e=cu(7,e,r,t)).lanes=n,e}function mu(e,t,n,r){return(e=cu(23,e,r,t)).elementType=B,e.lanes=n,e}function yu(e,t,n){return(e=cu(6,e,null,t)).lanes=n,e}function gu(e,t,n){return(t=cu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function bu(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=At(0),this.expirationTimes=At(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=At(0),this.mutableSourceEagerHydrationData=null}function vu(e,t,n,r){var o=t.current,a=Ll(),l=Fl(o);e:if(n){t:{if(Ve(n=n._reactInternals)!==n||1!==n.tag)throw Error(i(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(Zr(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}}while(null!==(u=u.return));throw Error(i(171))}if(1===n.tag){var s=n.type;if(Zr(s)){n=no(n,s,u);break e}}n=u}else n=Kr;null===t.context?t.context=n:t.pendingContext=n,(t=qo(a,l)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),$o(o,t),Ul(o,l,a)}function wu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Ou(e,t){var n;null!==(e=e.memoizedState)&&null!==e.dehydrated&&(n=e.retryLane,e.retryLane=0!==n&&n<t?n:t)}function Su(e,t){Ou(e,t),(e=e.alternate)&&Ou(e,t)}function _u(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new bu(e,t,null!=n&&!0===n.hydrate),t=cu(3,null,null,2===t?7:1===t?3:0),(n.current=t).stateNode=n,Vo(t),e[Nr]=n.current,mr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var o=(o=(t=r[e])._getVersion)(t._source);null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,o]:n.mutableSourceEagerHydrationData.push(t,o)}this._internalRoot=n}function Cu(e){return e&&(1===e.nodeType||9===e.nodeType||11===e.nodeType||8===e.nodeType&&" react-mount-point-unstable "===e.nodeValue)}function Eu(e,t,n,r,o){var a,i,l,u=n._reactRootContainer;return u?(l=u._internalRoot,"function"==typeof o&&(a=o,o=function(){var e=wu(l);a.call(e)}),vu(t,l,e,o)):(l=(u=n._reactRootContainer=function(e,t){if(!(t=t||!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))))for(var n;n=e.lastChild;)e.removeChild(n);return new _u(e,0,t?{hydrate:!0}:void 0)}(n,r))._internalRoot,"function"==typeof o&&(i=o,o=function(){var e=wu(l);i.call(e)}),$l((function(){vu(t,l,e,o)}))),wu(l)}function Pu(e,t){if(Cu(t))return function(e,t,n,r){return{$$typeof:_,key:null==(r=3<arguments.length&&void 0!==r?r:null)?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null);throw Error(i(200))}wl=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||Jr.current)gi=!0;else{if(0==(n&r)){switch(gi=!1,t.tag){case 3:ki(t),xa();break;case 5:ga(t);break;case 1:Zr(t.type)&&ro(t);break;case 4:ma(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var o=t.type._context;$r(Ao,o._currentValue),o._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?xi(e,t,n):($r(va,1&va.current),null!==(t=Ai(e,t,n))?t.sibling:null);$r(va,1&va.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return Di(e,t,n);t.flags|=64}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),$r(va,va.current),r)break;return null;case 23:case 24:return t.lanes=0,Si(e,t,n)}return Ai(e,t,n)}gi=0!=(16384&e.flags)}else gi=!1;switch(t.lanes=0,t.tag){case 2:return r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=Qr(t,Yr.current),zo(t,n),o=Wa(null,t,r,e,o,n),t.flags|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Zr(r)?(a=!0,ro(t)):a=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Vo(t),"function"==typeof(s=r.getDerivedStateFromProps)&&Qo(t,0,s,e),o.updater=Zo,ra((t.stateNode=o)._reactInternals=t,r,e,n),Pi(null,t,r,!0,a,n)):(t.tag=0,bi(null,t,o,n),t.child);case 16:o=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=(a=o._init)(o._payload),t.type=o,a=t.tag=function(e){if("function"==typeof e)return fu(e)?1:0;if(null!=e){if((e=e.$$typeof)===x)return 11;if(e===I)return 14}return 2}(o),e=Do(o,e),a){case 0:t=Ci(null,t,o,e,n);break e;case 1:t=Ei(null,t,o,e,n);break e;case 11:t=vi(null,t,o,e,n);break e;case 14:t=wi(null,t,o,Do(o.type,e),r,n);break e}throw Error(i(306,o,""))}return t;case 0:return r=t.type,o=t.pendingProps,Ci(e,t,r,o=t.elementType===r?o:Do(r,o),n);case 1:return r=t.type,o=t.pendingProps,Ei(e,t,r,o=t.elementType===r?o:Do(r,o),n);case 3:if(ki(t),r=t.updateQueue,null===e||null===r)throw Error(i(282));if(r=t.pendingProps,o=null!==(o=t.memoizedState)?o.element:null,Go(e,t),Yo(t,r,null,n),(r=t.memoizedState.element)===o)xa(),t=Ai(e,t,n);else{if((a=(o=t.stateNode).hydrate)&&(Sa=Tr(t.stateNode.containerInfo.firstChild),Oa=t,a=_a=!0),a){if(null!=(e=o.mutableSourceEagerHydrationData))for(o=0;o<e.length;o+=2)(a=e[o])._workInProgressVersionPrimary=e[o+1],Ma.push(a);for(n=sa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else bi(e,t,r,n),xa();t=t.child}return t;case 5:return ga(t),null===e&&Pa(t),r=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,s=o.children,kr(r,o)?s=null:null!==a&&kr(r,a)&&(t.flags|=16),_i(e,t),bi(e,t,s,n),t.child;case 6:return null===e&&Pa(t),null;case 13:return xi(e,t,n);case 4:return ma(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ua(t,null,r,n):bi(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,vi(e,t,r,o=t.elementType===r?o:Do(r,o),n);case 7:return bi(e,t,t.pendingProps,n),t.child;case 8:case 12:return bi(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,o=t.pendingProps,s=t.memoizedProps;var a=o.value,l=t.type._context;if($r(Ao,l._currentValue),l._currentValue=a,null!==s)if(l=s.value,0==(a=Kn(l,a)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,a):1073741823))){if(s.children===o.children&&!Jr.current){t=Ai(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u)for(var s=l.child,c=u.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&a)){1===l.tag&&((c=qo(-1,n&-n)).tag=2,$o(l,c)),l.lanes|=n,null!==(c=l.alternate)&&(c.lanes|=n),Uo(l.return,n),u.lanes|=n;break}c=c.next}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}bi(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=(a=t.pendingProps).children,zo(t,n),r=r(o=Wo(o,a.unstable_observedBits)),t.flags|=1,bi(e,t,r,n),t.child;case 14:return a=Do(o=t.type,t.pendingProps),wi(e,t,o,a=Do(o.type,a),r,n);case 15:return Oi(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Do(r,o),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Zr(r)?(e=!0,ro(t)):e=!1,zo(t,n),ta(t,r,o),ra(t,r,o,n),Pi(null,t,r,!0,e,n);case 19:return Di(e,t,n);case 23:case 24:return Si(e,t,n)}throw Error(i(156,t.tag))},_u.prototype.render=function(e){vu(e,this._internalRoot,null,null)},_u.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;vu(null,e,null,(function(){t[Nr]=null}))},Ye=function(e){13===e.tag&&(Ul(e,4,Ll()),Su(e,4))},Je=function(e){13===e.tag&&(Ul(e,67108864,Ll()),Su(e,67108864))},Xe=function(e){var t,n;13===e.tag&&(t=Ll(),Ul(e,n=Fl(e),t),Su(e,n))},_e=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=zr(r);if(!o)throw Error(i(90));K(r),Z(r,o)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&re(e,!!n.multiple,t,!1)}},xe=ql,Me=function(e,t,n,r,o){var a=ol;ol|=4;try{return jo(98,e.bind(null,t,n,r,o))}finally{0===(ol=a)&&(vl(),Mo())}};var ku=function(e,t){var n=ol;ol|=2;try{return e(t)}finally{0===(ol=n)&&(vl(),Mo())}};if(En={Events:[Fr,Ur,zr,ke,je,ru,{current:!(Te=function(){var e;0==(49&ol)&&(null!==Ml&&(e=Ml,Ml=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,Wl(e,Eo())}))),Mo(),ru())})}]},Pt={bundleType:(n={findFiberByHostInstance:Lr,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"}).bundleType,version:n.version,rendererPackageName:n.rendererPackageName,rendererConfig:n.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:n.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null},"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&!(an=__REACT_DEVTOOLS_GLOBAL_HOOK__).isDisabled&&an.supportsFiber)try{ao=an.inject(Pt),io=an}catch(n){}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=En,t.createPortal=Pu,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0!==t)return null===(e=$e(t))?null:e.stateNode;if("function"==typeof e.render)throw Error(i(188));throw Error(i(268,Object.keys(e)))},t.flushSync=function(e,t){var n=ol;if(0!=(48&n))return e(t);ol|=1;try{if(e)return jo(99,e.bind(null,t))}finally{ol=n,Mo()}},t.hydrate=function(e,t,n){if(Cu(t))return Eu(null,e,t,!0,n);throw Error(i(200))},t.render=function(e,t,n){if(Cu(t))return Eu(null,e,t,!1,n);throw Error(i(200))},t.unmountComponentAtNode=function(e){if(Cu(e))return!!e._reactRootContainer&&($l((function(){Eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[Nr]=null}))})),!0);throw Error(i(40))},t.unstable_batchedUpdates=ql,t.unstable_createPortal=function(e,t){return Pu(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Cu(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Eu(e,t,n,!1,r)},t.version="17.0.2"},73935:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(64448)},69921:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,s=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,b=n?Symbol.for("react.fundamental"):60117,v=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function O(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case f:case a:case l:case i:case p:return e;default:switch(e=e&&e.$$typeof){case s:case d:case y:case m:case u:return e;default:return t}}case o:return t}}}function S(e){return O(e)===f}t.AsyncMode=c,t.ConcurrentMode=f,t.ContextConsumer=s,t.ContextProvider=u,t.Element=r,t.ForwardRef=d,t.Fragment=a,t.Lazy=y,t.Memo=m,t.Portal=o,t.Profiler=l,t.StrictMode=i,t.Suspense=p,t.isAsyncMode=function(e){return S(e)||O(e)===c},t.isConcurrentMode=S,t.isContextConsumer=function(e){return O(e)===s},t.isContextProvider=function(e){return O(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return O(e)===d},t.isFragment=function(e){return O(e)===a},t.isLazy=function(e){return O(e)===y},t.isMemo=function(e){return O(e)===m},t.isPortal=function(e){return O(e)===o},t.isProfiler=function(e){return O(e)===l},t.isStrictMode=function(e){return O(e)===i},t.isSuspense=function(e){return O(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===f||e===l||e===i||e===p||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===m||e.$$typeof===u||e.$$typeof===s||e.$$typeof===d||e.$$typeof===b||e.$$typeof===v||e.$$typeof===w||e.$$typeof===g)},t.typeOf=O},59864:(e,t,n)=>{"use strict";e.exports=n(69921)},10752:(e,t)=>{"use strict";function n(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function r(e){this.setState(function(t){return null!=(t=this.constructor.getDerivedStateFromProps(e,t))?t:null}.bind(this))}function o(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}Object.defineProperty(t,"__esModule",{value:!0}),o.__suppressDeprecationWarning=r.__suppressDeprecationWarning=n.__suppressDeprecationWarning=!0,t.polyfill=function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var a,i,l=null,u=null,s=null;if("function"==typeof t.componentWillMount?l="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(l="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?u="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(u="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?s="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==l||null!==u||null!==s)throw a=e.displayName||e.name,i="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()",Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+a+" uses "+i+" but also contains the following legacy lifecycles:"+(null!==l?"\n  "+l:"")+(null!==u?"\n  "+u:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks");if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=n,t.componentWillReceiveProps=r),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=o;var c=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){n=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n,c.call(this,e,t,n)}}return e}},49656:(e,t,n)=>{"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var o=n(96974),a=r(n(67294)),i=n(55648),l=(n(45697),n(87641),r(n(26018)));function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e,t){e.prototype=Object.create(t.prototype),c(e.prototype.constructor=e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){if(null==e)return{};for(var n,r={},o=Object.keys(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||(r[n]=e[n]);return r}function d(e,t){return"function"==typeof e?e(t):e}function p(e,t){return"string"==typeof e?i.createLocation(e,null,null,t):e}function h(e){return e}s(w,y=a.Component),w.prototype.render=function(){return a.createElement(o.Router,{history:this.history,children:this.props.children})},n=w;var m,y,g=(s(v,m=a.Component),v.prototype.render=function(){return a.createElement(o.Router,{history:this.history,children:this.props.children})},v),b=a.forwardRef;function v(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=m.call.apply(m,[this].concat(n))||this).history=i.createHashHistory(e.props),e}function w(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=y.call.apply(y,[this].concat(n))||this).history=i.createBrowserHistory(e.props),e}function O(e){return e}var S=(b=void 0===b?h:b)((function(e,t){var n=e.innerRef,r=e.navigate,o=e.onClick,i=(e=f(e,["innerRef","navigate","onClick"])).target;return e=u({},e,{onClick:function(e){try{o&&o(e)}catch(t){throw e.preventDefault(),t}var t;e.defaultPrevented||0!==e.button||i&&"_self"!==i||(t=e).metaKey||t.altKey||t.ctrlKey||t.shiftKey||(e.preventDefault(),r())}}),e.ref=h!==b&&t||n,a.createElement("a",e)})),_=b((function(e,t){var n=e.component,r=void 0===n?S:n,s=e.replace,c=e.to,m=e.innerRef,y=f(e,["component","replace","to","innerRef"]);return a.createElement(o.__RouterContext.Consumer,null,(function(e){e||l(!1);var n=e.history,o=(o=p(d(c,e.location),e.location))?n.createHref(o):"";return o=u({},y,{href:o,navigate:function(){var t=d(c,e.location),r=i.createPath(e.location)===i.createPath(p(t));(s||r?n.replace:n.push)(t)}}),h!==b?o.ref=t||m:o.innerRef=m,a.createElement(r,o)}))})),C=a.forwardRef,E=(C=void 0===C?O:C)((function(e,t){var n,r=void 0===(n=e["aria-current"])?"page":n,i=void 0===(n=e.activeClassName)?"active":n,s=e.activeStyle,c=e.className,h=e.exact,m=e.isActive,y=e.location,g=e.sensitive,b=e.strict,v=e.style,w=e.to,S=e.innerRef,E=f(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return a.createElement(o.__RouterContext.Consumer,null,(function(e){e||l(!1),e=y||e.location;var n=p(d(w,e),e),f=(f=(f=n.pathname)&&f.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"))?o.matchPath(e.pathname,{path:f,exact:h,sensitive:g,strict:b}):null,P=(e=!!(m?m(f,e):f),f="function"==typeof c?c(e):c,"function"==typeof v?v(e):v);return e&&(f=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(f,i),P=u({},P,s)),e=u({"aria-current":e&&r||null,className:f,style:P,to:n},E),O!==C?e.ref=t||S:e.innerRef=S,a.createElement(_,e)}))}));Object.defineProperty(t,"MemoryRouter",{enumerable:!0,get:function(){return o.MemoryRouter}}),Object.defineProperty(t,"Prompt",{enumerable:!0,get:function(){return o.Prompt}}),Object.defineProperty(t,"Redirect",{enumerable:!0,get:function(){return o.Redirect}}),Object.defineProperty(t,"Route",{enumerable:!0,get:function(){return o.Route}}),Object.defineProperty(t,"Router",{enumerable:!0,get:function(){return o.Router}}),Object.defineProperty(t,"StaticRouter",{enumerable:!0,get:function(){return o.StaticRouter}}),Object.defineProperty(t,"Switch",{enumerable:!0,get:function(){return o.Switch}}),Object.defineProperty(t,"generatePath",{enumerable:!0,get:function(){return o.generatePath}}),Object.defineProperty(t,"matchPath",{enumerable:!0,get:function(){return o.matchPath}}),Object.defineProperty(t,"useHistory",{enumerable:!0,get:function(){return o.useHistory}}),Object.defineProperty(t,"useLocation",{enumerable:!0,get:function(){return o.useLocation}}),Object.defineProperty(t,"useParams",{enumerable:!0,get:function(){return o.useParams}}),Object.defineProperty(t,"useRouteMatch",{enumerable:!0,get:function(){return o.useRouteMatch}}),Object.defineProperty(t,"withRouter",{enumerable:!0,get:function(){return o.withRouter}}),t.BrowserRouter=n,t.HashRouter=g,t.Link=_,t.NavLink=E},39711:(e,t,n)=>{"use strict";e.exports=n(49656)},28689:(e,t,n)=>{"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(67294)),a=(n(45697),n(55648)),i=(n(87641),r(n(4536))),l=r(n(26018)),u=r(n(14779)),s=(n(59864),r(n(8679)));function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(e,t){e.prototype=Object.create(t.prototype),d(e.prototype.constructor=e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){if(null==e)return{};for(var n,r={},o=Object.keys(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||(r[n]=e[n]);return r}function h(e){var t=i();return t.displayName=e,t}var m,y,g,b=h("Router-History"),v=h("Router"),w=(f(C,g=o.Component),C.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}},(n=C.prototype).componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return o.createElement(v.Provider,{value:{history:this.props.history,location:this.state.location,match:C.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},o.createElement(b.Provider,{children:this.props.children||null,value:this.props.history}))},C),O=(f(_,y=o.Component),_.prototype.render=function(){return o.createElement(w,{history:this.history,children:this.props.children})},n=_,f(S,m=o.Component),(I=S.prototype).componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},I.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},I.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},I.render=function(){return null},S);function S(){return m.apply(this,arguments)||this}function _(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=y.call.apply(y,[this].concat(n))||this).history=a.createMemoryHistory(e.props),e}function C(e){var t;return(t=g.call(this,e)||this).state={location:e.history.location},t._isMounted=!1,t._pendingLocation=null,e.staticContext||(t.unlisten=e.history.listen((function(e){t._isMounted?t.setState({location:e}):t._pendingLocation=e}))),t}var E={},P=0;function k(e,t){return void 0===t&&(t={}),"/"===(e=void 0===e?"/":e)?e:function(e){if(E[e])return E[e];var t=u.compile(e);return P<1e4&&(E[e]=t,P++),t}(e)(t,{pretty:!0})}var j={},x=0;function M(e,t){var n,r=(t=t="string"==typeof(t=void 0===t?{}:t)||Array.isArray(t)?{path:t}:t).path,o=void 0!==(n=t.exact)&&n,a=void 0!==(n=t.strict)&&n,i=void 0!==(n=t.sensitive)&&n;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;t=function(e,t){var n=""+t.end+t.strict+t.sensitive;if((n=j[n]||(j[n]={}))[e])return n[e];var r=[];return t={regexp:u(e,r,t),keys:r},x<1e4&&(n[e]=t,x++),t}(n,{end:o,strict:a,sensitive:i});var r=t.regexp;if(t=t.keys,!(r=r.exec(e)))return null;var l=r[0],s=r.slice(1);return r=e===l,o&&!r?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:r,params:t.reduce((function(e,t,n){return e[t.name]=s[n],e}),{})}}),null)}f(D,T=o.Component),D.prototype.render=function(){var e=this;return o.createElement(v.Consumer,null,(function(t){t||l(!1);var n,r=c({},t,{location:r=e.props.location||t.location,match:e.props.computedMatch||(e.props.path?M(r.pathname,e.props):t.match)}),a=(t=e.props).children,i=t.component;return t=t.render,Array.isArray(a)&&(n=a,0===o.Children.count(n))&&(a=null),o.createElement(v.Provider,{value:r},r.match?a?"function"==typeof a?a(r):a:i?o.createElement(i,r):t?t(r):null:"function"==typeof a?a(r):null)}))};var T,I=D;function D(){return T.apply(this,arguments)||this}function A(e){return"/"===e.charAt(0)?e:"/"+e}function R(e){return"string"==typeof e?e:a.createPath(e)}function N(){return function(){l(!1)}}function B(){}f(H,F=o.Component),(U=H.prototype).navigateTo=function(e,t){var n,r=void 0===(r=(n=this.props).basename)?"":r;(n=void 0===(n=n.context)?{}:n).action=t,n.location=(t=r,r=a.createLocation(e),t?c({},r,{pathname:A(t)+r.pathname}):r),n.url=R(n.location)},U.render=function(){var e=void 0===(t=(r=this.props).basename)?"":t,t=void 0===(t=r.context)?{}:t,n=void 0===(n=r.location)?"/":n,r=p(r,["basename","context","location"]),i={createHref:function(t){return A(e+R(t))},action:"POP",location:(i=e,n=a.createLocation(n),i?(i=A(i),0!==n.pathname.indexOf(i)?n:c({},n,{pathname:n.pathname.substr(i.length)})):n),push:this.handlePush,replace:this.handleReplace,go:N(),goBack:N(),goForward:N(),listen:this.handleListen,block:this.handleBlock};return o.createElement(w,c({},r,{history:i,staticContext:t}))};var L,F,U=H,z=(f(W,L=o.Component),W.prototype.render=function(){var e=this;return o.createElement(v.Consumer,null,(function(t){t||l(!1);var n,r,a=e.props.location||t.location;return o.Children.forEach(e.props.children,(function(e){var i;null==r&&o.isValidElement(e)&&(i=(n=e).props.path||e.props.from,r=i?M(a.pathname,c({},e.props,{path:i})):t.match)})),r?o.cloneElement(n,{location:a,computedMatch:r}):null}))},W);function W(){return L.apply(this,arguments)||this}function H(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=F.call.apply(F,[this].concat(n))||this).handlePush=function(t){return e.navigateTo(t,"PUSH")},e.handleReplace=function(t){return e.navigateTo(t,"REPLACE")},e.handleListen=function(){return B},e.handleBlock=function(){return B},e}var V=o.useContext;function G(){return V(v).location}t.MemoryRouter=n,t.Prompt=function(e){var t=e.message,n=void 0===(e=e.when)||e;return o.createElement(v.Consumer,null,(function(e){if(e||l(!1),!n||e.staticContext)return null;var r=e.history.block;return o.createElement(O,{onMount:function(e){e.release=r(t)},onUpdate:function(e,n){n.message!==t&&(e.release(),e.release=r(t))},onUnmount:function(e){e.release()},message:t})}))},t.Redirect=function(e){var t=e.computedMatch,n=e.to,r=void 0!==(e=e.push)&&e;return o.createElement(v.Consumer,null,(function(e){e||l(!1);var i=e.history,u=(e=e.staticContext,r?i.push:i.replace),s=a.createLocation(t?"string"==typeof n?k(n,t.params):c({},n,{pathname:k(n.pathname,t.params)}):n);return e?(u(s),null):o.createElement(O,{onMount:function(){u(s)},onUpdate:function(e,t){t=a.createLocation(t.to),a.locationsAreEqual(t,c({},s,{key:t.key}))||u(s)},to:n})}))},t.Route=I,t.Router=w,t.StaticRouter=U,t.Switch=z,t.__HistoryContext=b,t.__RouterContext=v,t.generatePath=k,t.matchPath=M,t.useHistory=function(){return V(b)},t.useLocation=G,t.useParams=function(){var e=V(v).match;return e?e.params:{}},t.useRouteMatch=function(e){var t=G(),n=V(v).match;return e?M(t.pathname,e):n},t.withRouter=function(e){function t(t){var n=t.wrappedComponentRef,r=p(t,["wrappedComponentRef"]);return o.createElement(v.Consumer,null,(function(t){return t||l(!1),o.createElement(e,c({},r,t,{ref:n}))}))}var n="withRouter("+(e.displayName||e.name)+")";return t.displayName=n,t.WrappedComponent=e,s(t,e)}},96974:(e,t,n)=>{"use strict";e.exports=n(28689)},73216:(e,t,n)=>{"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(67294)),a=r(n(45697)),i=r(n(97262));function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){t&&u(e.prototype,t),n&&u(e,n)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return function(){var t,n,r=h(e);return t=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){return}}}()?(t=h(this).constructor,Reflect.construct(r,arguments,t)):r.apply(this,arguments),r=this,!(n=t)||"object"!=typeof n&&"function"!=typeof n?y(r):n}}n=n(10752);var b=function(){p(t,o.PureComponent);var e=g(t);function t(){return l(this,t),e.apply(this,arguments)}return s(t,[{key:"render",value:function(){var e=(i=this.props).children,t=i.className,n=i.split,r=i.style,a=i.size,i=i.eleRef,l=(t=["Pane",n,t],{flex:1,position:"relative",outline:"none"});return void 0!==a&&("vertical"===n?l.width=a:(l.height=a,l.display="flex"),l.flex="none"),l=Object.assign({},l,r||{}),o.createElement("div",{ref:i,className:t.join(" "),style:l},e)}}]),t}(),v=(b.propTypes={className:a.string.isRequired,children:a.node.isRequired,size:a.oneOfType([a.string,a.number]),split:a.oneOf(["vertical","horizontal"]),style:i,eleRef:a.func},b.defaultProps={},function(){p(t,o.Component);var e=g(t);function t(){return l(this,t),e.apply(this,arguments)}return s(t,[{key:"render",value:function(){var e=(s=this.props).className,t=s.onClick,n=s.onDoubleClick,r=s.onMouseDown,a=s.onTouchEnd,i=s.onTouchStart,l=s.resizerClassName,u=s.split,s=s.style;return l=[l,u,e],o.createElement("span",{role:"presentation",className:l.join(" "),style:s,onMouseDown:function(e){return r(e)},onTouchStart:function(e){e.preventDefault(),i(e)},onTouchEnd:function(e){e.preventDefault(),a(e)},onClick:function(e){t&&(e.preventDefault(),t(e))},onDoubleClick:function(e){n&&(e.preventDefault(),n(e))}})}}]),t}());function w(e,t){if(e.selection)e.selection.empty();else try{t.getSelection().removeAllRanges()}catch(e){}}function O(e,t,n,r){return"number"==typeof r?Math.max("number"==typeof t?t:0,Math.min("number"==typeof n&&0<=n?n:1/0,r)):void 0!==e?e:t}v.propTypes={className:a.string.isRequired,onClick:a.func,onDoubleClick:a.func,onMouseDown:a.func.isRequired,onTouchStart:a.func.isRequired,onTouchEnd:a.func.isRequired,split:a.oneOf(["vertical","horizontal"]),style:i,resizerClassName:a.string.isRequired},v.defaultProps={resizerClassName:"Resizer"};var S=function(){p(t,o.Component);var e=g(t);function t(n){l(this,t),(r=e.call(this,n)).onMouseDown=r.onMouseDown.bind(y(r)),r.onTouchStart=r.onTouchStart.bind(y(r)),r.onMouseMove=r.onMouseMove.bind(y(r)),r.onTouchMove=r.onTouchMove.bind(y(r)),r.onMouseUp=r.onMouseUp.bind(y(r));var r,o=n.size,a=n.defaultSize,i=n.minSize,u=n.maxSize;return n=n.primary,a=void 0!==o?o:O(a,i,u,null),r.state={active:!1,resized:!1,pane1Size:"first"===n?a:void 0,pane2Size:"second"===n?a:void 0,instanceProps:{size:o}},r}return s(t,[{key:"componentDidMount",value:function(){document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("touchmove",this.onTouchMove),this.setState(t.getSizeUpdate(this.props,this.state))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("touchmove",this.onTouchMove)}},{key:"onMouseDown",value:function(e){e=Object.assign({},e,{touches:[{clientX:e.clientX,clientY:e.clientY}]}),this.onTouchStart(e)}},{key:"onTouchStart",value:function(e){var t=(r=this.props).allowResize,n=r.onDragStarted,r=r.split;t&&(w(document,window),t="vertical"===r?e.touches[0].clientX:e.touches[0].clientY,"function"==typeof n&&n(),this.setState({active:!0,position:t}))}},{key:"onMouseMove",value:function(e){e=Object.assign({},e,{touches:[{clientX:e.clientX,clientY:e.clientY}]}),this.onTouchMove(e)}},{key:"onTouchMove",value:function(e){var t=(i=this.props).allowResize,n=i.maxSize,r=i.minSize,o=i.onChange,a=i.split,i=i.step,l=(u=this.state).active,u=u.position;if(t&&l){w(document,window),l=(t="first"===this.props.primary)?this.pane1:this.pane2;var s=t?this.pane2:this.pane1;if(l&&l.getBoundingClientRect){var f=l.getBoundingClientRect().width,d=l.getBoundingClientRect().height;if(f="vertical"===a?f:d,d=u-("vertical"===a?e.touches[0].clientX:e.touches[0].clientY),i){if(Math.abs(d)<i)return;d=~~(d/i)*i}e=t?d:-d,i=parseInt(window.getComputedStyle(l).order),parseInt(window.getComputedStyle(s).order)<i&&(e=-e),l=n,void 0!==n&&n<=0&&(s=this.splitPane,l="vertical"===a?s.getBoundingClientRect().width+n:s.getBoundingClientRect().height+n),(i=f-e)<r?i=r:void 0!==n&&l<i?i=l:this.setState({position:u-d,resized:!0}),o&&o(i),this.setState(c({draggedSize:i},t?"pane1Size":"pane2Size",i))}}}},{key:"onMouseUp",value:function(){var e=(t=this.props).allowResize,t=t.onDragFinished,n=(r=this.state).active,r=r.draggedSize;e&&n&&("function"==typeof t&&t(r),this.setState({active:!1}))}},{key:"render",value:function(){var e=this,t=(g=this.props).allowResize,n=g.children,r=g.className,a=g.onResizerClick,i=g.onResizerDoubleClick,l=g.paneClassName,u=g.pane1ClassName,s=g.pane2ClassName,c=g.paneStyle,f=g.pane1Style,p=g.pane2Style,h=g.resizerClassName,m=g.resizerStyle,y=g.split,g=g.style,w=(O=this.state).pane1Size,O=O.pane2Size;return t=t?"":"disabled",h=h&&"".concat(h," ").concat("Resizer"),n=o.Children.toArray(n).filter((function(e){return e})),g=d({display:"flex",flex:1,height:"100%",position:"absolute",outline:"none",overflow:"hidden",MozUserSelect:"text",WebkitUserSelect:"text",msUserSelect:"text",userSelect:"text"},g),"vertical"===y?Object.assign(g,{flexDirection:"row",left:0,right:0}):Object.assign(g,{bottom:0,flexDirection:"column",minHeight:"100%",top:0,width:"100%"}),r=["SplitPane",r,y,t],f=d({},c,{},f),c=d({},c,{},p),p=["Pane1",l,u].join(" "),u=["Pane2",l,s].join(" "),o.createElement("div",{className:r.join(" "),ref:function(t){e.splitPane=t},style:g},o.createElement(b,{className:p,key:"pane1",eleRef:function(t){e.pane1=t},size:w,split:y,style:f},n[0]),o.createElement(v,{className:t,onClick:a,onDoubleClick:i,onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onTouchEnd:this.onMouseUp,key:"resizer",resizerClassName:h,split:y,style:m||{}}),o.createElement(b,{className:u,key:"pane2",eleRef:function(t){e.pane2=t},size:O,split:y,style:c},n[1]))}}],[{key:"getDerivedStateFromProps",value:function(e,n){return t.getSizeUpdate(e,n)}},{key:"getSizeUpdate",value:function(e,t){var n={};if(t.instanceProps.size===e.size&&void 0!==e.size)return{};t=void 0!==e.size?e.size:O(e.defaultSize,e.minSize,e.maxSize,t.draggedSize);var r=(void 0!==e.size&&(n.draggedSize=t),"first"===e.primary);return n[r?"pane1Size":"pane2Size"]=t,n[r?"pane2Size":"pane1Size"]=void 0,n.instanceProps={size:e.size},n}}]),t}();S.propTypes={allowResize:a.bool,children:a.arrayOf(a.node).isRequired,className:a.string,primary:a.oneOf(["first","second"]),minSize:a.oneOfType([a.string,a.number]),maxSize:a.oneOfType([a.string,a.number]),defaultSize:a.oneOfType([a.string,a.number]),size:a.oneOfType([a.string,a.number]),split:a.oneOf(["vertical","horizontal"]),onDragStarted:a.func,onDragFinished:a.func,onChange:a.func,onResizerClick:a.func,onResizerDoubleClick:a.func,style:i,resizerStyle:i,paneClassName:a.string,pane1ClassName:a.string,pane2ClassName:a.string,paneStyle:i,pane1Style:i,pane2Style:i,resizerClassName:a.string,step:a.number},S.defaultProps={allowResize:!0,minSize:50,primary:"first",split:"vertical",paneClassName:"",pane1ClassName:"",pane2ClassName:""},n.polyfill(S),t.Pane=b,t.default=S},5962:e=>{e.exports=["alignContent","MozAlignContent","WebkitAlignContent","MSAlignContent","OAlignContent","alignItems","MozAlignItems","WebkitAlignItems","MSAlignItems","OAlignItems","alignSelf","MozAlignSelf","WebkitAlignSelf","MSAlignSelf","OAlignSelf","all","MozAll","WebkitAll","MSAll","OAll","animation","MozAnimation","WebkitAnimation","MSAnimation","OAnimation","animationDelay","MozAnimationDelay","WebkitAnimationDelay","MSAnimationDelay","OAnimationDelay","animationDirection","MozAnimationDirection","WebkitAnimationDirection","MSAnimationDirection","OAnimationDirection","animationDuration","MozAnimationDuration","WebkitAnimationDuration","MSAnimationDuration","OAnimationDuration","animationFillMode","MozAnimationFillMode","WebkitAnimationFillMode","MSAnimationFillMode","OAnimationFillMode","animationIterationCount","MozAnimationIterationCount","WebkitAnimationIterationCount","MSAnimationIterationCount","OAnimationIterationCount","animationName","MozAnimationName","WebkitAnimationName","MSAnimationName","OAnimationName","animationPlayState","MozAnimationPlayState","WebkitAnimationPlayState","MSAnimationPlayState","OAnimationPlayState","animationTimingFunction","MozAnimationTimingFunction","WebkitAnimationTimingFunction","MSAnimationTimingFunction","OAnimationTimingFunction","backfaceVisibility","MozBackfaceVisibility","WebkitBackfaceVisibility","MSBackfaceVisibility","OBackfaceVisibility","background","MozBackground","WebkitBackground","MSBackground","OBackground","backgroundAttachment","MozBackgroundAttachment","WebkitBackgroundAttachment","MSBackgroundAttachment","OBackgroundAttachment","backgroundBlendMode","MozBackgroundBlendMode","WebkitBackgroundBlendMode","MSBackgroundBlendMode","OBackgroundBlendMode","backgroundClip","MozBackgroundClip","WebkitBackgroundClip","MSBackgroundClip","OBackgroundClip","backgroundColor","MozBackgroundColor","WebkitBackgroundColor","MSBackgroundColor","OBackgroundColor","backgroundImage","MozBackgroundImage","WebkitBackgroundImage","MSBackgroundImage","OBackgroundImage","backgroundOrigin","MozBackgroundOrigin","WebkitBackgroundOrigin","MSBackgroundOrigin","OBackgroundOrigin","backgroundPosition","MozBackgroundPosition","WebkitBackgroundPosition","MSBackgroundPosition","OBackgroundPosition","backgroundRepeat","MozBackgroundRepeat","WebkitBackgroundRepeat","MSBackgroundRepeat","OBackgroundRepeat","backgroundSize","MozBackgroundSize","WebkitBackgroundSize","MSBackgroundSize","OBackgroundSize","blockSize","MozBlockSize","WebkitBlockSize","MSBlockSize","OBlockSize","border","MozBorder","WebkitBorder","MSBorder","OBorder","borderBlockEnd","MozBorderBlockEnd","WebkitBorderBlockEnd","MSBorderBlockEnd","OBorderBlockEnd","borderBlockEndColor","MozBorderBlockEndColor","WebkitBorderBlockEndColor","MSBorderBlockEndColor","OBorderBlockEndColor","borderBlockEndStyle","MozBorderBlockEndStyle","WebkitBorderBlockEndStyle","MSBorderBlockEndStyle","OBorderBlockEndStyle","borderBlockEndWidth","MozBorderBlockEndWidth","WebkitBorderBlockEndWidth","MSBorderBlockEndWidth","OBorderBlockEndWidth","borderBlockStart","MozBorderBlockStart","WebkitBorderBlockStart","MSBorderBlockStart","OBorderBlockStart","borderBlockStartColor","MozBorderBlockStartColor","WebkitBorderBlockStartColor","MSBorderBlockStartColor","OBorderBlockStartColor","borderBlockStartStyle","MozBorderBlockStartStyle","WebkitBorderBlockStartStyle","MSBorderBlockStartStyle","OBorderBlockStartStyle","borderBlockStartWidth","MozBorderBlockStartWidth","WebkitBorderBlockStartWidth","MSBorderBlockStartWidth","OBorderBlockStartWidth","borderBottom","MozBorderBottom","WebkitBorderBottom","MSBorderBottom","OBorderBottom","borderBottomColor","MozBorderBottomColor","WebkitBorderBottomColor","MSBorderBottomColor","OBorderBottomColor","borderBottomLeftRadius","MozBorderBottomLeftRadius","WebkitBorderBottomLeftRadius","MSBorderBottomLeftRadius","OBorderBottomLeftRadius","borderBottomRightRadius","MozBorderBottomRightRadius","WebkitBorderBottomRightRadius","MSBorderBottomRightRadius","OBorderBottomRightRadius","borderBottomStyle","MozBorderBottomStyle","WebkitBorderBottomStyle","MSBorderBottomStyle","OBorderBottomStyle","borderBottomWidth","MozBorderBottomWidth","WebkitBorderBottomWidth","MSBorderBottomWidth","OBorderBottomWidth","borderCollapse","MozBorderCollapse","WebkitBorderCollapse","MSBorderCollapse","OBorderCollapse","borderColor","MozBorderColor","WebkitBorderColor","MSBorderColor","OBorderColor","borderImage","MozBorderImage","WebkitBorderImage","MSBorderImage","OBorderImage","borderImageOutset","MozBorderImageOutset","WebkitBorderImageOutset","MSBorderImageOutset","OBorderImageOutset","borderImageRepeat","MozBorderImageRepeat","WebkitBorderImageRepeat","MSBorderImageRepeat","OBorderImageRepeat","borderImageSlice","MozBorderImageSlice","WebkitBorderImageSlice","MSBorderImageSlice","OBorderImageSlice","borderImageSource","MozBorderImageSource","WebkitBorderImageSource","MSBorderImageSource","OBorderImageSource","borderImageWidth","MozBorderImageWidth","WebkitBorderImageWidth","MSBorderImageWidth","OBorderImageWidth","borderInlineEnd","MozBorderInlineEnd","WebkitBorderInlineEnd","MSBorderInlineEnd","OBorderInlineEnd","borderInlineEndColor","MozBorderInlineEndColor","WebkitBorderInlineEndColor","MSBorderInlineEndColor","OBorderInlineEndColor","borderInlineEndStyle","MozBorderInlineEndStyle","WebkitBorderInlineEndStyle","MSBorderInlineEndStyle","OBorderInlineEndStyle","borderInlineEndWidth","MozBorderInlineEndWidth","WebkitBorderInlineEndWidth","MSBorderInlineEndWidth","OBorderInlineEndWidth","borderInlineStart","MozBorderInlineStart","WebkitBorderInlineStart","MSBorderInlineStart","OBorderInlineStart","borderInlineStartColor","MozBorderInlineStartColor","WebkitBorderInlineStartColor","MSBorderInlineStartColor","OBorderInlineStartColor","borderInlineStartStyle","MozBorderInlineStartStyle","WebkitBorderInlineStartStyle","MSBorderInlineStartStyle","OBorderInlineStartStyle","borderInlineStartWidth","MozBorderInlineStartWidth","WebkitBorderInlineStartWidth","MSBorderInlineStartWidth","OBorderInlineStartWidth","borderLeft","MozBorderLeft","WebkitBorderLeft","MSBorderLeft","OBorderLeft","borderLeftColor","MozBorderLeftColor","WebkitBorderLeftColor","MSBorderLeftColor","OBorderLeftColor","borderLeftStyle","MozBorderLeftStyle","WebkitBorderLeftStyle","MSBorderLeftStyle","OBorderLeftStyle","borderLeftWidth","MozBorderLeftWidth","WebkitBorderLeftWidth","MSBorderLeftWidth","OBorderLeftWidth","borderRadius","MozBorderRadius","WebkitBorderRadius","MSBorderRadius","OBorderRadius","borderRight","MozBorderRight","WebkitBorderRight","MSBorderRight","OBorderRight","borderRightColor","MozBorderRightColor","WebkitBorderRightColor","MSBorderRightColor","OBorderRightColor","borderRightStyle","MozBorderRightStyle","WebkitBorderRightStyle","MSBorderRightStyle","OBorderRightStyle","borderRightWidth","MozBorderRightWidth","WebkitBorderRightWidth","MSBorderRightWidth","OBorderRightWidth","borderSpacing","MozBorderSpacing","WebkitBorderSpacing","MSBorderSpacing","OBorderSpacing","borderStyle","MozBorderStyle","WebkitBorderStyle","MSBorderStyle","OBorderStyle","borderTop","MozBorderTop","WebkitBorderTop","MSBorderTop","OBorderTop","borderTopColor","MozBorderTopColor","WebkitBorderTopColor","MSBorderTopColor","OBorderTopColor","borderTopLeftRadius","MozBorderTopLeftRadius","WebkitBorderTopLeftRadius","MSBorderTopLeftRadius","OBorderTopLeftRadius","borderTopRightRadius","MozBorderTopRightRadius","WebkitBorderTopRightRadius","MSBorderTopRightRadius","OBorderTopRightRadius","borderTopStyle","MozBorderTopStyle","WebkitBorderTopStyle","MSBorderTopStyle","OBorderTopStyle","borderTopWidth","MozBorderTopWidth","WebkitBorderTopWidth","MSBorderTopWidth","OBorderTopWidth","borderWidth","MozBorderWidth","WebkitBorderWidth","MSBorderWidth","OBorderWidth","bottom","MozBottom","WebkitBottom","MSBottom","OBottom","boxDecorationBreak","MozBoxDecorationBreak","WebkitBoxDecorationBreak","MSBoxDecorationBreak","OBoxDecorationBreak","boxShadow","MozBoxShadow","WebkitBoxShadow","MSBoxShadow","OBoxShadow","boxSizing","MozBoxSizing","WebkitBoxSizing","MSBoxSizing","OBoxSizing","breakAfter","MozBreakAfter","WebkitBreakAfter","MSBreakAfter","OBreakAfter","breakBefore","MozBreakBefore","WebkitBreakBefore","MSBreakBefore","OBreakBefore","breakInside","MozBreakInside","WebkitBreakInside","MSBreakInside","OBreakInside","captionSide","MozCaptionSide","WebkitCaptionSide","MSCaptionSide","OCaptionSide","caretColor","MozCaretColor","WebkitCaretColor","MSCaretColor","OCaretColor","ch","MozCh","WebkitCh","MSCh","OCh","clear","MozClear","WebkitClear","MSClear","OClear","clip","MozClip","WebkitClip","MSClip","OClip","clipPath","MozClipPath","WebkitClipPath","MSClipPath","OClipPath","cm","MozCm","WebkitCm","MSCm","OCm","color","MozColor","WebkitColor","MSColor","OColor","columnCount","MozColumnCount","WebkitColumnCount","MSColumnCount","OColumnCount","columnFill","MozColumnFill","WebkitColumnFill","MSColumnFill","OColumnFill","columnGap","MozColumnGap","WebkitColumnGap","MSColumnGap","OColumnGap","columnRule","MozColumnRule","WebkitColumnRule","MSColumnRule","OColumnRule","columnRuleColor","MozColumnRuleColor","WebkitColumnRuleColor","MSColumnRuleColor","OColumnRuleColor","columnRuleStyle","MozColumnRuleStyle","WebkitColumnRuleStyle","MSColumnRuleStyle","OColumnRuleStyle","columnRuleWidth","MozColumnRuleWidth","WebkitColumnRuleWidth","MSColumnRuleWidth","OColumnRuleWidth","columnSpan","MozColumnSpan","WebkitColumnSpan","MSColumnSpan","OColumnSpan","columnWidth","MozColumnWidth","WebkitColumnWidth","MSColumnWidth","OColumnWidth","columns","MozColumns","WebkitColumns","MSColumns","OColumns","content","MozContent","WebkitContent","MSContent","OContent","counterIncrement","MozCounterIncrement","WebkitCounterIncrement","MSCounterIncrement","OCounterIncrement","counterReset","MozCounterReset","WebkitCounterReset","MSCounterReset","OCounterReset","cursor","MozCursor","WebkitCursor","MSCursor","OCursor","deg","MozDeg","WebkitDeg","MSDeg","ODeg","direction","MozDirection","WebkitDirection","MSDirection","ODirection","display","MozDisplay","WebkitDisplay","MSDisplay","ODisplay","dpcm","MozDpcm","WebkitDpcm","MSDpcm","ODpcm","dpi","MozDpi","WebkitDpi","MSDpi","ODpi","dppx","MozDppx","WebkitDppx","MSDppx","ODppx","em","MozEm","WebkitEm","MSEm","OEm","emptyCells","MozEmptyCells","WebkitEmptyCells","MSEmptyCells","OEmptyCells","ex","MozEx","WebkitEx","MSEx","OEx","filter","MozFilter","WebkitFilter","MSFilter","OFilter","flexBasis","MozFlexBasis","WebkitFlexBasis","MSFlexBasis","OFlexBasis","flexDirection","MozFlexDirection","WebkitFlexDirection","MSFlexDirection","OFlexDirection","flexFlow","MozFlexFlow","WebkitFlexFlow","MSFlexFlow","OFlexFlow","flexGrow","MozFlexGrow","WebkitFlexGrow","MSFlexGrow","OFlexGrow","flexShrink","MozFlexShrink","WebkitFlexShrink","MSFlexShrink","OFlexShrink","flexWrap","MozFlexWrap","WebkitFlexWrap","MSFlexWrap","OFlexWrap","float","MozFloat","WebkitFloat","MSFloat","OFloat","font","MozFont","WebkitFont","MSFont","OFont","fontFamily","MozFontFamily","WebkitFontFamily","MSFontFamily","OFontFamily","fontFeatureSettings","MozFontFeatureSettings","WebkitFontFeatureSettings","MSFontFeatureSettings","OFontFeatureSettings","fontKerning","MozFontKerning","WebkitFontKerning","MSFontKerning","OFontKerning","fontLanguageOverride","MozFontLanguageOverride","WebkitFontLanguageOverride","MSFontLanguageOverride","OFontLanguageOverride","fontSize","MozFontSize","WebkitFontSize","MSFontSize","OFontSize","fontSizeAdjust","MozFontSizeAdjust","WebkitFontSizeAdjust","MSFontSizeAdjust","OFontSizeAdjust","fontStretch","MozFontStretch","WebkitFontStretch","MSFontStretch","OFontStretch","fontStyle","MozFontStyle","WebkitFontStyle","MSFontStyle","OFontStyle","fontSynthesis","MozFontSynthesis","WebkitFontSynthesis","MSFontSynthesis","OFontSynthesis","fontVariant","MozFontVariant","WebkitFontVariant","MSFontVariant","OFontVariant","fontVariantAlternates","MozFontVariantAlternates","WebkitFontVariantAlternates","MSFontVariantAlternates","OFontVariantAlternates","fontVariantCaps","MozFontVariantCaps","WebkitFontVariantCaps","MSFontVariantCaps","OFontVariantCaps","fontVariantEastAsian","MozFontVariantEastAsian","WebkitFontVariantEastAsian","MSFontVariantEastAsian","OFontVariantEastAsian","fontVariantLigatures","MozFontVariantLigatures","WebkitFontVariantLigatures","MSFontVariantLigatures","OFontVariantLigatures","fontVariantNumeric","MozFontVariantNumeric","WebkitFontVariantNumeric","MSFontVariantNumeric","OFontVariantNumeric","fontVariantPosition","MozFontVariantPosition","WebkitFontVariantPosition","MSFontVariantPosition","OFontVariantPosition","fontWeight","MozFontWeight","WebkitFontWeight","MSFontWeight","OFontWeight","fr","MozFr","WebkitFr","MSFr","OFr","grad","MozGrad","WebkitGrad","MSGrad","OGrad","grid","MozGrid","WebkitGrid","MSGrid","OGrid","gridArea","MozGridArea","WebkitGridArea","MSGridArea","OGridArea","gridAutoColumns","MozGridAutoColumns","WebkitGridAutoColumns","MSGridAutoColumns","OGridAutoColumns","gridAutoFlow","MozGridAutoFlow","WebkitGridAutoFlow","MSGridAutoFlow","OGridAutoFlow","gridAutoRows","MozGridAutoRows","WebkitGridAutoRows","MSGridAutoRows","OGridAutoRows","gridColumn","MozGridColumn","WebkitGridColumn","MSGridColumn","OGridColumn","gridColumnEnd","MozGridColumnEnd","WebkitGridColumnEnd","MSGridColumnEnd","OGridColumnEnd","gridColumnGap","MozGridColumnGap","WebkitGridColumnGap","MSGridColumnGap","OGridColumnGap","gridColumnStart","MozGridColumnStart","WebkitGridColumnStart","MSGridColumnStart","OGridColumnStart","gridGap","MozGridGap","WebkitGridGap","MSGridGap","OGridGap","gridRow","MozGridRow","WebkitGridRow","MSGridRow","OGridRow","gridRowEnd","MozGridRowEnd","WebkitGridRowEnd","MSGridRowEnd","OGridRowEnd","gridRowGap","MozGridRowGap","WebkitGridRowGap","MSGridRowGap","OGridRowGap","gridRowStart","MozGridRowStart","WebkitGridRowStart","MSGridRowStart","OGridRowStart","gridTemplate","MozGridTemplate","WebkitGridTemplate","MSGridTemplate","OGridTemplate","gridTemplateAreas","MozGridTemplateAreas","WebkitGridTemplateAreas","MSGridTemplateAreas","OGridTemplateAreas","gridTemplateColumns","MozGridTemplateColumns","WebkitGridTemplateColumns","MSGridTemplateColumns","OGridTemplateColumns","gridTemplateRows","MozGridTemplateRows","WebkitGridTemplateRows","MSGridTemplateRows","OGridTemplateRows","height","MozHeight","WebkitHeight","MSHeight","OHeight","hyphens","MozHyphens","WebkitHyphens","MSHyphens","OHyphens","hz","MozHz","WebkitHz","MSHz","OHz","imageOrientation","MozImageOrientation","WebkitImageOrientation","MSImageOrientation","OImageOrientation","imageRendering","MozImageRendering","WebkitImageRendering","MSImageRendering","OImageRendering","imageResolution","MozImageResolution","WebkitImageResolution","MSImageResolution","OImageResolution","imeMode","MozImeMode","WebkitImeMode","MSImeMode","OImeMode","in","MozIn","WebkitIn","MSIn","OIn","inherit","MozInherit","WebkitInherit","MSInherit","OInherit","initial","MozInitial","WebkitInitial","MSInitial","OInitial","inlineSize","MozInlineSize","WebkitInlineSize","MSInlineSize","OInlineSize","isolation","MozIsolation","WebkitIsolation","MSIsolation","OIsolation","justifyContent","MozJustifyContent","WebkitJustifyContent","MSJustifyContent","OJustifyContent","khz","MozKhz","WebkitKhz","MSKhz","OKhz","left","MozLeft","WebkitLeft","MSLeft","OLeft","letterSpacing","MozLetterSpacing","WebkitLetterSpacing","MSLetterSpacing","OLetterSpacing","lineBreak","MozLineBreak","WebkitLineBreak","MSLineBreak","OLineBreak","lineHeight","MozLineHeight","WebkitLineHeight","MSLineHeight","OLineHeight","listStyle","MozListStyle","WebkitListStyle","MSListStyle","OListStyle","listStyleImage","MozListStyleImage","WebkitListStyleImage","MSListStyleImage","OListStyleImage","listStylePosition","MozListStylePosition","WebkitListStylePosition","MSListStylePosition","OListStylePosition","listStyleType","MozListStyleType","WebkitListStyleType","MSListStyleType","OListStyleType","margin","MozMargin","WebkitMargin","MSMargin","OMargin","marginBlockEnd","MozMarginBlockEnd","WebkitMarginBlockEnd","MSMarginBlockEnd","OMarginBlockEnd","marginBlockStart","MozMarginBlockStart","WebkitMarginBlockStart","MSMarginBlockStart","OMarginBlockStart","marginBottom","MozMarginBottom","WebkitMarginBottom","MSMarginBottom","OMarginBottom","marginInlineEnd","MozMarginInlineEnd","WebkitMarginInlineEnd","MSMarginInlineEnd","OMarginInlineEnd","marginInlineStart","MozMarginInlineStart","WebkitMarginInlineStart","MSMarginInlineStart","OMarginInlineStart","marginLeft","MozMarginLeft","WebkitMarginLeft","MSMarginLeft","OMarginLeft","marginRight","MozMarginRight","WebkitMarginRight","MSMarginRight","OMarginRight","marginTop","MozMarginTop","WebkitMarginTop","MSMarginTop","OMarginTop","mask","MozMask","WebkitMask","MSMask","OMask","maskClip","MozMaskClip","WebkitMaskClip","MSMaskClip","OMaskClip","maskComposite","MozMaskComposite","WebkitMaskComposite","MSMaskComposite","OMaskComposite","maskImage","MozMaskImage","WebkitMaskImage","MSMaskImage","OMaskImage","maskMode","MozMaskMode","WebkitMaskMode","MSMaskMode","OMaskMode","maskOrigin","MozMaskOrigin","WebkitMaskOrigin","MSMaskOrigin","OMaskOrigin","maskPosition","MozMaskPosition","WebkitMaskPosition","MSMaskPosition","OMaskPosition","maskRepeat","MozMaskRepeat","WebkitMaskRepeat","MSMaskRepeat","OMaskRepeat","maskSize","MozMaskSize","WebkitMaskSize","MSMaskSize","OMaskSize","maskType","MozMaskType","WebkitMaskType","MSMaskType","OMaskType","maxHeight","MozMaxHeight","WebkitMaxHeight","MSMaxHeight","OMaxHeight","maxWidth","MozMaxWidth","WebkitMaxWidth","MSMaxWidth","OMaxWidth","minBlockSize","MozMinBlockSize","WebkitMinBlockSize","MSMinBlockSize","OMinBlockSize","minHeight","MozMinHeight","WebkitMinHeight","MSMinHeight","OMinHeight","minInlineSize","MozMinInlineSize","WebkitMinInlineSize","MSMinInlineSize","OMinInlineSize","minWidth","MozMinWidth","WebkitMinWidth","MSMinWidth","OMinWidth","mixBlendMode","MozMixBlendMode","WebkitMixBlendMode","MSMixBlendMode","OMixBlendMode","mm","MozMm","WebkitMm","MSMm","OMm","ms","MozMs","WebkitMs","MSMs","OMs","objectFit","MozObjectFit","WebkitObjectFit","MSObjectFit","OObjectFit","objectPosition","MozObjectPosition","WebkitObjectPosition","MSObjectPosition","OObjectPosition","offsetBlockEnd","MozOffsetBlockEnd","WebkitOffsetBlockEnd","MSOffsetBlockEnd","OOffsetBlockEnd","offsetBlockStart","MozOffsetBlockStart","WebkitOffsetBlockStart","MSOffsetBlockStart","OOffsetBlockStart","offsetInlineEnd","MozOffsetInlineEnd","WebkitOffsetInlineEnd","MSOffsetInlineEnd","OOffsetInlineEnd","offsetInlineStart","MozOffsetInlineStart","WebkitOffsetInlineStart","MSOffsetInlineStart","OOffsetInlineStart","opacity","MozOpacity","WebkitOpacity","MSOpacity","OOpacity","order","MozOrder","WebkitOrder","MSOrder","OOrder","orphans","MozOrphans","WebkitOrphans","MSOrphans","OOrphans","outline","MozOutline","WebkitOutline","MSOutline","OOutline","outlineColor","MozOutlineColor","WebkitOutlineColor","MSOutlineColor","OOutlineColor","outlineOffset","MozOutlineOffset","WebkitOutlineOffset","MSOutlineOffset","OOutlineOffset","outlineStyle","MozOutlineStyle","WebkitOutlineStyle","MSOutlineStyle","OOutlineStyle","outlineWidth","MozOutlineWidth","WebkitOutlineWidth","MSOutlineWidth","OOutlineWidth","overflow","MozOverflow","WebkitOverflow","MSOverflow","OOverflow","overflowWrap","MozOverflowWrap","WebkitOverflowWrap","MSOverflowWrap","OOverflowWrap","overflowX","MozOverflowX","WebkitOverflowX","MSOverflowX","OOverflowX","overflowY","MozOverflowY","WebkitOverflowY","MSOverflowY","OOverflowY","padding","MozPadding","WebkitPadding","MSPadding","OPadding","paddingBlockEnd","MozPaddingBlockEnd","WebkitPaddingBlockEnd","MSPaddingBlockEnd","OPaddingBlockEnd","paddingBlockStart","MozPaddingBlockStart","WebkitPaddingBlockStart","MSPaddingBlockStart","OPaddingBlockStart","paddingBottom","MozPaddingBottom","WebkitPaddingBottom","MSPaddingBottom","OPaddingBottom","paddingInlineEnd","MozPaddingInlineEnd","WebkitPaddingInlineEnd","MSPaddingInlineEnd","OPaddingInlineEnd","paddingInlineStart","MozPaddingInlineStart","WebkitPaddingInlineStart","MSPaddingInlineStart","OPaddingInlineStart","paddingLeft","MozPaddingLeft","WebkitPaddingLeft","MSPaddingLeft","OPaddingLeft","paddingRight","MozPaddingRight","WebkitPaddingRight","MSPaddingRight","OPaddingRight","paddingTop","MozPaddingTop","WebkitPaddingTop","MSPaddingTop","OPaddingTop","pageBreakAfter","MozPageBreakAfter","WebkitPageBreakAfter","MSPageBreakAfter","OPageBreakAfter","pageBreakBefore","MozPageBreakBefore","WebkitPageBreakBefore","MSPageBreakBefore","OPageBreakBefore","pageBreakInside","MozPageBreakInside","WebkitPageBreakInside","MSPageBreakInside","OPageBreakInside","pc","MozPc","WebkitPc","MSPc","OPc","perspective","MozPerspective","WebkitPerspective","MSPerspective","OPerspective","perspectiveOrigin","MozPerspectiveOrigin","WebkitPerspectiveOrigin","MSPerspectiveOrigin","OPerspectiveOrigin","pointerEvents","MozPointerEvents","WebkitPointerEvents","MSPointerEvents","OPointerEvents","position","MozPosition","WebkitPosition","MSPosition","OPosition","pt","MozPt","WebkitPt","MSPt","OPt","px","MozPx","WebkitPx","MSPx","OPx","q","MozQ","WebkitQ","MSQ","OQ","quotes","MozQuotes","WebkitQuotes","MSQuotes","OQuotes","rad","MozRad","WebkitRad","MSRad","ORad","rem","MozRem","WebkitRem","MSRem","ORem","resize","MozResize","WebkitResize","MSResize","OResize","revert","MozRevert","WebkitRevert","MSRevert","ORevert","right","MozRight","WebkitRight","MSRight","ORight","rubyAlign","MozRubyAlign","WebkitRubyAlign","MSRubyAlign","ORubyAlign","rubyMerge","MozRubyMerge","WebkitRubyMerge","MSRubyMerge","ORubyMerge","rubyPosition","MozRubyPosition","WebkitRubyPosition","MSRubyPosition","ORubyPosition","s","MozS","WebkitS","MSS","OS","scrollBehavior","MozScrollBehavior","WebkitScrollBehavior","MSScrollBehavior","OScrollBehavior","scrollSnapCoordinate","MozScrollSnapCoordinate","WebkitScrollSnapCoordinate","MSScrollSnapCoordinate","OScrollSnapCoordinate","scrollSnapDestination","MozScrollSnapDestination","WebkitScrollSnapDestination","MSScrollSnapDestination","OScrollSnapDestination","scrollSnapType","MozScrollSnapType","WebkitScrollSnapType","MSScrollSnapType","OScrollSnapType","shapeImageThreshold","MozShapeImageThreshold","WebkitShapeImageThreshold","MSShapeImageThreshold","OShapeImageThreshold","shapeMargin","MozShapeMargin","WebkitShapeMargin","MSShapeMargin","OShapeMargin","shapeOutside","MozShapeOutside","WebkitShapeOutside","MSShapeOutside","OShapeOutside","tabSize","MozTabSize","WebkitTabSize","MSTabSize","OTabSize","tableLayout","MozTableLayout","WebkitTableLayout","MSTableLayout","OTableLayout","textAlign","MozTextAlign","WebkitTextAlign","MSTextAlign","OTextAlign","textAlignLast","MozTextAlignLast","WebkitTextAlignLast","MSTextAlignLast","OTextAlignLast","textCombineUpright","MozTextCombineUpright","WebkitTextCombineUpright","MSTextCombineUpright","OTextCombineUpright","textDecoration","MozTextDecoration","WebkitTextDecoration","MSTextDecoration","OTextDecoration","textDecorationColor","MozTextDecorationColor","WebkitTextDecorationColor","MSTextDecorationColor","OTextDecorationColor","textDecorationLine","MozTextDecorationLine","WebkitTextDecorationLine","MSTextDecorationLine","OTextDecorationLine","textDecorationStyle","MozTextDecorationStyle","WebkitTextDecorationStyle","MSTextDecorationStyle","OTextDecorationStyle","textEmphasis","MozTextEmphasis","WebkitTextEmphasis","MSTextEmphasis","OTextEmphasis","textEmphasisColor","MozTextEmphasisColor","WebkitTextEmphasisColor","MSTextEmphasisColor","OTextEmphasisColor","textEmphasisPosition","MozTextEmphasisPosition","WebkitTextEmphasisPosition","MSTextEmphasisPosition","OTextEmphasisPosition","textEmphasisStyle","MozTextEmphasisStyle","WebkitTextEmphasisStyle","MSTextEmphasisStyle","OTextEmphasisStyle","textIndent","MozTextIndent","WebkitTextIndent","MSTextIndent","OTextIndent","textOrientation","MozTextOrientation","WebkitTextOrientation","MSTextOrientation","OTextOrientation","textOverflow","MozTextOverflow","WebkitTextOverflow","MSTextOverflow","OTextOverflow","textRendering","MozTextRendering","WebkitTextRendering","MSTextRendering","OTextRendering","textShadow","MozTextShadow","WebkitTextShadow","MSTextShadow","OTextShadow","textTransform","MozTextTransform","WebkitTextTransform","MSTextTransform","OTextTransform","textUnderlinePosition","MozTextUnderlinePosition","WebkitTextUnderlinePosition","MSTextUnderlinePosition","OTextUnderlinePosition","top","MozTop","WebkitTop","MSTop","OTop","touchAction","MozTouchAction","WebkitTouchAction","MSTouchAction","OTouchAction","transform","MozTransform","WebkitTransform","msTransform","OTransform","transformBox","MozTransformBox","WebkitTransformBox","MSTransformBox","OTransformBox","transformOrigin","MozTransformOrigin","WebkitTransformOrigin","MSTransformOrigin","OTransformOrigin","transformStyle","MozTransformStyle","WebkitTransformStyle","MSTransformStyle","OTransformStyle","transition","MozTransition","WebkitTransition","MSTransition","OTransition","transitionDelay","MozTransitionDelay","WebkitTransitionDelay","MSTransitionDelay","OTransitionDelay","transitionDuration","MozTransitionDuration","WebkitTransitionDuration","MSTransitionDuration","OTransitionDuration","transitionProperty","MozTransitionProperty","WebkitTransitionProperty","MSTransitionProperty","OTransitionProperty","transitionTimingFunction","MozTransitionTimingFunction","WebkitTransitionTimingFunction","MSTransitionTimingFunction","OTransitionTimingFunction","turn","MozTurn","WebkitTurn","MSTurn","OTurn","unicodeBidi","MozUnicodeBidi","WebkitUnicodeBidi","MSUnicodeBidi","OUnicodeBidi","unset","MozUnset","WebkitUnset","MSUnset","OUnset","verticalAlign","MozVerticalAlign","WebkitVerticalAlign","MSVerticalAlign","OVerticalAlign","vh","MozVh","WebkitVh","MSVh","OVh","visibility","MozVisibility","WebkitVisibility","MSVisibility","OVisibility","vmax","MozVmax","WebkitVmax","MSVmax","OVmax","vmin","MozVmin","WebkitVmin","MSVmin","OVmin","vw","MozVw","WebkitVw","MSVw","OVw","whiteSpace","MozWhiteSpace","WebkitWhiteSpace","MSWhiteSpace","OWhiteSpace","widows","MozWidows","WebkitWidows","MSWidows","OWidows","width","MozWidth","WebkitWidth","MSWidth","OWidth","willChange","MozWillChange","WebkitWillChange","MSWillChange","OWillChange","wordBreak","MozWordBreak","WebkitWordBreak","MSWordBreak","OWordBreak","wordSpacing","MozWordSpacing","WebkitWordSpacing","MSWordSpacing","OWordSpacing","wordWrap","MozWordWrap","WebkitWordWrap","MSWordWrap","OWordWrap","writingMode","MozWritingMode","WebkitWritingMode","MSWritingMode","OWritingMode","zIndex","MozZIndex","WebkitZIndex","MSZIndex","OZIndex","fontSize","MozFontSize","WebkitFontSize","MSFontSize","OFontSize","flex","MozFlex","WebkitFlex","MSFlex","OFlex","fr","MozFr","WebkitFr","MSFr","OFr","overflowScrolling","MozOverflowScrolling","WebkitOverflowScrolling","MSOverflowScrolling","OOverflowScrolling","userSelect","MozUserSelect","WebkitUserSelect","MSUserSelect","OUserSelect"]},97262:(e,t,n)=>{var r=n(5962);n=n(45697),e.exports=function(e,t,n){if(e=e[t]){var o=[];if(Object.keys(e).forEach((function(e){-1===r.indexOf(e)&&o.push(e)})),o.length)throw new Error("Prop "+t+" passed to "+n+". Has invalid keys "+o.join(", "))}},e.exports.isRequired=function(t,n,r){if(t[n])return e.exports(t,n,r);throw new Error("Prop "+n+" passed to "+r+" is required")},e.exports.supportingArrays=n.oneOfType([n.arrayOf(e.exports),e.exports])},849:(e,t,n)=>{"use strict";var r=n(95318),o=n(20862),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(n(34575))),i=r(n(93913)),l=r(n(78585)),u=r(n(29754)),s=r(n(81506)),c=r(n(2205)),f=r(n(59713)),d=o(n(67294)),p=r(n(55736));function h(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}r(n(45697)),r=o=function(e){function t(){var e,n;(0,a.default)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=(0,l.default)(this,(e=(0,u.default)(t)).call.apply(e,[this].concat(o))),(0,f.default)((0,s.default)(n),"state",{height:n.props.defaultHeight||0,width:n.props.defaultWidth||0}),(0,f.default)((0,s.default)(n),"_parentNode",void 0),(0,f.default)((0,s.default)(n),"_autoSizer",void 0),(0,f.default)((0,s.default)(n),"_window",void 0),(0,f.default)((0,s.default)(n),"_detectElementResize",void 0),(0,f.default)((0,s.default)(n),"_onResize",(function(){var e,t,r,o,a,i,l=(s=n.props).disableHeight,u=s.disableWidth,s=s.onResize;n._parentNode&&(e=n._parentNode.offsetHeight||0,t=n._parentNode.offsetWidth||0,i=(n._window||window).getComputedStyle(n._parentNode)||{},r=parseInt(i.paddingLeft,10)||0,o=parseInt(i.paddingRight,10)||0,a=parseInt(i.paddingTop,10)||0,i=parseInt(i.paddingBottom,10)||0,(!l&&n.state.height!==e-a-i||!u&&n.state.width!==t-r-o)&&(n.setState({height:e-a-i,width:t-r-o}),s({height:e,width:t})))})),(0,f.default)((0,s.default)(n),"_setRef",(function(e){n._autoSizer=e})),n}return(0,c.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._window=this._autoSizer.parentNode.ownerDocument.defaultView,this._detectElementResize=(0,p.default)(e,this._window),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=(o=this.props).children,t=o.className,n=o.disableHeight,r=o.disableWidth,o=o.style,a=(i=this.state).height,i=i.width,l={overflow:"visible"},u={};return n||(l.height=0,u.height=a),r||(l.width=0,u.width=i),d.createElement("div",{className:t,ref:this._setRef,style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach((function(t){(0,f.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},l,{},o)},e(u))}}]),t}(d.Component),(0,f.default)(o,"propTypes",null),n=r,t.default=n,(0,f.default)(n,"defaultProps",{onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}})},90143:(e,t,n)=>{"use strict";var r=n(95318),o=(Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"AutoSizer",{enumerable:!0,get:function(){return o.default}}),r(n(849)))},41427:(e,t,n)=>{"use strict";var r=n(95318),o=n(20862),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DEFAULT_SCROLLING_RESET_TIME_INTERVAL=void 0,r(n(67154))),i=r(n(34575)),l=r(n(93913)),u=r(n(78585)),s=r(n(29754)),c=r(n(81506)),f=r(n(2205)),d=r(n(59713)),p=o(n(67294)),h=r(n(57966)),m=r(n(38022)),y=r(n(15825)),g=r(n(41498)),b=o(n(74070)),v=r(n(4675)),w=(o=r(n(8824)),r(n(32317))),O=n(10752),S=n(96271);function _(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(n,!0).forEach((function(t){(0,d.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(31826),r(n(45697)),t.DEFAULT_SCROLLING_RESET_TIME_INTERVAL=150;var E="requested";n=r=function(e){function t(e){(0,i.default)(this,t),n=(0,u.default)(this,(0,s.default)(t).call(this,e)),(0,d.default)((0,c.default)(n),"_onGridRenderedMemoizer",(0,g.default)()),(0,d.default)((0,c.default)(n),"_onScrollMemoizer",(0,g.default)(!1)),(0,d.default)((0,c.default)(n),"_deferredInvalidateColumnIndex",null),(0,d.default)((0,c.default)(n),"_deferredInvalidateRowIndex",null),(0,d.default)((0,c.default)(n),"_recomputeScrollLeftFlag",!1),(0,d.default)((0,c.default)(n),"_recomputeScrollTopFlag",!1),(0,d.default)((0,c.default)(n),"_horizontalScrollBarSize",0),(0,d.default)((0,c.default)(n),"_verticalScrollBarSize",0),(0,d.default)((0,c.default)(n),"_scrollbarPresenceChanged",!1),(0,d.default)((0,c.default)(n),"_scrollingContainer",void 0),(0,d.default)((0,c.default)(n),"_childrenToDisplay",void 0),(0,d.default)((0,c.default)(n),"_columnStartIndex",void 0),(0,d.default)((0,c.default)(n),"_columnStopIndex",void 0),(0,d.default)((0,c.default)(n),"_rowStartIndex",void 0),(0,d.default)((0,c.default)(n),"_rowStopIndex",void 0),(0,d.default)((0,c.default)(n),"_renderedColumnStartIndex",0),(0,d.default)((0,c.default)(n),"_renderedColumnStopIndex",0),(0,d.default)((0,c.default)(n),"_renderedRowStartIndex",0),(0,d.default)((0,c.default)(n),"_renderedRowStopIndex",0),(0,d.default)((0,c.default)(n),"_initialScrollTop",void 0),(0,d.default)((0,c.default)(n),"_initialScrollLeft",void 0),(0,d.default)((0,c.default)(n),"_disablePointerEventsTimeoutId",void 0),(0,d.default)((0,c.default)(n),"_styleCache",{}),(0,d.default)((0,c.default)(n),"_cellCache",{}),(0,d.default)((0,c.default)(n),"_debounceScrollEndedCallback",(function(){n._disablePointerEventsTimeoutId=null,n.setState({isScrolling:!1,needToResetStyleCache:!1})})),(0,d.default)((0,c.default)(n),"_invokeOnGridRenderedHelper",(function(){var e=n.props.onSectionRendered;n._onGridRenderedMemoizer({callback:e,indices:{columnOverscanStartIndex:n._columnStartIndex,columnOverscanStopIndex:n._columnStopIndex,columnStartIndex:n._renderedColumnStartIndex,columnStopIndex:n._renderedColumnStopIndex,rowOverscanStartIndex:n._rowStartIndex,rowOverscanStopIndex:n._rowStopIndex,rowStartIndex:n._renderedRowStartIndex,rowStopIndex:n._renderedRowStopIndex}})})),(0,d.default)((0,c.default)(n),"_setScrollingContainerRef",(function(e){n._scrollingContainer=e})),(0,d.default)((0,c.default)(n),"_onScroll",(function(e){e.target===n._scrollingContainer&&n.handleScrollEvent(e.target)}));var n,r=new y.default({cellCount:e.columnCount,cellSizeGetter:function(n){return t._wrapSizeGetter(e.columnWidth)(n)},estimatedCellSize:t._getEstimatedColumnSize(e)}),o=new y.default({cellCount:e.rowCount,cellSizeGetter:function(n){return t._wrapSizeGetter(e.rowHeight)(n)},estimatedCellSize:t._getEstimatedRowSize(e)});return n.state={instanceProps:{columnSizeAndPositionManager:r,rowSizeAndPositionManager:o,prevColumnWidth:e.columnWidth,prevRowHeight:e.rowHeight,prevColumnCount:e.columnCount,prevRowCount:e.rowCount,prevIsScrolling:!0===e.isScrolling,prevScrollToColumn:e.scrollToColumn,prevScrollToRow:e.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:b.SCROLL_DIRECTION_FORWARD,scrollDirectionVertical:b.SCROLL_DIRECTION_FORWARD,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},0<e.scrollToRow&&(n._initialScrollTop=n._getCalculatedScrollTop(e,n.state)),0<e.scrollToColumn&&(n._initialScrollLeft=n._getCalculatedScrollLeft(e,n.state)),n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"getOffsetForCell",value:function(){var e=void 0===(e=(n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).alignment)?this.props.scrollToAlignment:e,t=void 0===(t=n.columnIndex)?this.props.scrollToColumn:t,n=void 0===(n=n.rowIndex)?this.props.scrollToRow:n;return e=C({},this.props,{scrollToAlignment:e,scrollToColumn:t,scrollToRow:n}),{scrollLeft:this._getCalculatedScrollLeft(e),scrollTop:this._getCalculatedScrollTop(e)}}},{key:"getTotalRowsHeight",value:function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()}},{key:"getTotalColumnsWidth",value:function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()}},{key:"handleScrollEvent",value:function(e){var t,n,r,o,a,i,l,u=void 0===(u=e.scrollLeft)?0:u;(e=void 0===(e=e.scrollTop)?0:e)<0||(this._debounceScrollEnded(),t=(i=this.props).autoHeight,n=i.autoWidth,l=i.height,i=i.width,r=(a=this.state.instanceProps).scrollbarSize,o=a.rowSizeAndPositionManager.getTotalSize(),a=a.columnSizeAndPositionManager.getTotalSize(),i=Math.min(Math.max(0,a-i+r),u),u=Math.min(Math.max(0,o-l+r),e),this.state.scrollLeft===i&&this.state.scrollTop===u||(l={isScrolling:!0,scrollDirectionHorizontal:i!==this.state.scrollLeft?i>this.state.scrollLeft?b.SCROLL_DIRECTION_FORWARD:b.SCROLL_DIRECTION_BACKWARD:this.state.scrollDirectionHorizontal,scrollDirectionVertical:u!==this.state.scrollTop?u>this.state.scrollTop?b.SCROLL_DIRECTION_FORWARD:b.SCROLL_DIRECTION_BACKWARD:this.state.scrollDirectionVertical,scrollPositionChangeReason:"observed"},t||(l.scrollTop=u),n||(l.scrollLeft=i),l.needToResetStyleCache=!1,this.setState(l)),this._invokeOnScrollMemoizer({scrollLeft:i,scrollTop:u,totalColumnsWidth:a,totalRowsHeight:o}))}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex;e=e.rowIndex,this._deferredInvalidateColumnIndex="number"==typeof this._deferredInvalidateColumnIndex?Math.min(this._deferredInvalidateColumnIndex,t):t,this._deferredInvalidateRowIndex="number"==typeof this._deferredInvalidateRowIndex?Math.min(this._deferredInvalidateRowIndex,e):e}},{key:"measureAllCells",value:function(){var e=(t=this.props).columnCount,t=t.rowCount,n=this.state.instanceProps;n.columnSizeAndPositionManager.getSizeAndPositionOfCell(e-1),n.rowSizeAndPositionManager.getSizeAndPositionOfCell(t-1)}},{key:"recomputeGridSize",value:function(){var e=void 0===(e=(t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).columnIndex)?0:e,t=void 0===(t=t.rowIndex)?0:t,n=(r=this.props).scrollToColumn,r=r.scrollToRow,o=this.state.instanceProps;o.columnSizeAndPositionManager.resetCell(e),o.rowSizeAndPositionManager.resetCell(t),this._recomputeScrollLeftFlag=0<=n&&(this.state.scrollDirectionHorizontal===b.SCROLL_DIRECTION_FORWARD?e<=n:n<=e),this._recomputeScrollTopFlag=0<=r&&(this.state.scrollDirectionVertical===b.SCROLL_DIRECTION_FORWARD?t<=r:r<=t),this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(e){var t=e.columnIndex,n=(e=e.rowIndex,this.props.columnCount),r=this.props;1<n&&void 0!==t&&this._updateScrollLeftForScrollToColumn(C({},r,{scrollToColumn:t})),void 0!==e&&this._updateScrollTopForScrollToRow(C({},r,{scrollToRow:e}))}},{key:"componentDidMount",value:function(){var e=(l=this.props).getScrollbarSize,n=l.height,r=l.scrollLeft,o=l.scrollToColumn,a=l.scrollTop,i=l.scrollToRow,l=l.width,u=this.state.instanceProps,s=(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),u.scrollbarSizeMeasured||this.setState((function(t){return(t=C({},t,{needToResetStyleCache:!1})).instanceProps.scrollbarSize=e(),t.instanceProps.scrollbarSizeMeasured=!0,t})),!("number"==typeof r&&0<=r||"number"==typeof a&&0<=a)||(s=t._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:r,scrollTop:a}))&&(s.needToResetStyleCache=!1,this.setState(s)),this._scrollingContainer&&(this._scrollingContainer.scrollLeft!==this.state.scrollLeft&&(this._scrollingContainer.scrollLeft=this.state.scrollLeft),this._scrollingContainer.scrollTop!==this.state.scrollTop&&(this._scrollingContainer.scrollTop=this.state.scrollTop)),0<n&&0<l);0<=o&&s&&this._updateScrollLeftForScrollToColumn(),0<=i&&s&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:r||0,scrollTop:a||0,totalColumnsWidth:u.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:u.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(e,t){var n=this,r=(f=this.props).autoHeight,o=f.autoWidth,a=f.columnCount,i=f.height,l=f.rowCount,u=f.scrollToAlignment,s=f.scrollToColumn,c=f.scrollToRow,f=f.width,d=(m=this.state).scrollLeft,p=m.scrollPositionChangeReason,h=m.scrollTop,m=m.instanceProps;this._handleInvalidatedGridSize(),a=0<a&&0===e.columnCount||0<l&&0===e.rowCount,p===E&&(!o&&0<=d&&(d!==this._scrollingContainer.scrollLeft||a)&&(this._scrollingContainer.scrollLeft=d),!r&&0<=h&&(h!==this._scrollingContainer.scrollTop||a)&&(this._scrollingContainer.scrollTop=h)),l=(0===e.width||0===e.height)&&0<i&&0<f,this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):(0,v.default)({cellSizeAndPositionManager:m.columnSizeAndPositionManager,previousCellsCount:e.columnCount,previousCellSize:e.columnWidth,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToColumn,previousSize:e.width,scrollOffset:d,scrollToAlignment:u,scrollToIndex:s,size:f,sizeJustIncreasedFromZero:l,updateScrollIndexCallback:function(){return n._updateScrollLeftForScrollToColumn(n.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):(0,v.default)({cellSizeAndPositionManager:m.rowSizeAndPositionManager,previousCellsCount:e.rowCount,previousCellSize:e.rowHeight,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToRow,previousSize:e.height,scrollOffset:h,scrollToAlignment:u,scrollToIndex:c,size:i,sizeJustIncreasedFromZero:l,updateScrollIndexCallback:function(){return n._updateScrollTopForScrollToRow(n.props)}}),this._invokeOnGridRenderedHelper(),d===t.scrollLeft&&h===t.scrollTop||(p=m.rowSizeAndPositionManager.getTotalSize(),o=m.columnSizeAndPositionManager.getTotalSize(),this._invokeOnScrollMemoizer({scrollLeft:d,scrollTop:h,totalColumnsWidth:o,totalRowsHeight:p})),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&(0,S.cancelAnimationTimeout)(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var e=(y=this.props).autoContainerWidth,t=y.autoHeight,n=y.autoWidth,r=y.className,o=y.containerProps,i=y.containerRole,l=y.containerStyle,u=y.height,s=y.id,c=y.noContentRenderer,f=y.role,d=y.style,m=y.tabIndex,y=y.width,g=(b=this.state).instanceProps,b=b.needToResetStyleCache,v=this._isScrolling(),w=(t={boxSizing:"border-box",direction:"ltr",height:t?"auto":u,position:"relative",width:n?"auto":y,WebkitOverflowScrolling:"touch",willChange:"transform"},b&&(this._styleCache={}),this.state.isScrolling||this._resetStyleCache(),this._calculateChildrenToRender(this.props,this.state),n=g.columnSizeAndPositionManager.getTotalSize(),u<(b=g.rowSizeAndPositionManager.getTotalSize())?g.scrollbarSize:0);return g=0===((g=y<n?g.scrollbarSize:0)===this._horizontalScrollBarSize&&w===this._verticalScrollBarSize||(this._horizontalScrollBarSize=g,this._verticalScrollBarSize=w,this._scrollbarPresenceChanged=!0),t.overflowX=n+w<=y?"hidden":"auto",t.overflowY=b+g<=u?"hidden":"auto",w=this._childrenToDisplay).length&&0<u&&0<y,p.createElement("div",(0,a.default)({ref:this._setScrollingContainerRef},o,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:(0,h.default)("ReactVirtualized__Grid",r),id:s,onScroll:this._onScroll,role:f,style:C({},t,{},d),tabIndex:m}),0<w.length&&p.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:i,style:C({width:e?"auto":n,height:b,maxWidth:n,maxHeight:b,overflow:"hidden",pointerEvents:v?"none":"",position:"relative"},l)},w),g&&c())}},{key:"_calculateChildrenToRender",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.props,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.state,n=e.cellRenderer,r=e.cellRangeRenderer,o=e.columnCount,a=e.deferredMeasurementCache,i=e.height,l=e.overscanColumnCount,u=e.overscanIndicesGetter,s=e.overscanRowCount,c=e.rowCount,f=e.width,d=e.isScrollingOptOut,p=t.scrollDirectionHorizontal,h=t.scrollDirectionVertical,m=t.instanceProps,y=0<this._initialScrollTop?this._initialScrollTop:t.scrollTop,g=0<this._initialScrollLeft?this._initialScrollLeft:t.scrollLeft;if(e=this._isScrolling(e,t),this._childrenToDisplay=[],0<i&&0<f){t=m.columnSizeAndPositionManager.getVisibleCellRange({containerSize:f,offset:g});var b=m.rowSizeAndPositionManager.getVisibleCellRange({containerSize:i,offset:y}),v=(f=m.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:f,offset:g}),i=m.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:i,offset:y}),this._renderedColumnStartIndex=t.start,this._renderedColumnStopIndex=t.stop,this._renderedRowStartIndex=b.start,this._renderedRowStopIndex=b.stop,l=u({direction:"horizontal",cellCount:o,overscanCellsCount:l,scrollDirection:p,startIndex:"number"==typeof t.start?t.start:0,stopIndex:"number"==typeof t.stop?t.stop:-1}),p=u({direction:"vertical",cellCount:c,overscanCellsCount:s,scrollDirection:h,startIndex:"number"==typeof b.start?b.start:0,stopIndex:"number"==typeof b.stop?b.stop:-1}),l.overscanStartIndex),w=l.overscanStopIndex,O=p.overscanStartIndex,S=p.overscanStopIndex;if(a){if(!a.hasFixedHeight())for(var _=O;_<=S;_++)if(!a.has(_,0)){v=0,w=o-1;break}if(!a.hasFixedWidth())for(var C=v;C<=w;C++)if(!a.has(0,C)){O=0,S=c-1;break}}this._childrenToDisplay=r({cellCache:this._cellCache,cellRenderer:n,columnSizeAndPositionManager:m.columnSizeAndPositionManager,columnStartIndex:v,columnStopIndex:w,deferredMeasurementCache:a,horizontalOffsetAdjustment:f,isScrolling:e,isScrollingOptOut:d,parent:this,rowSizeAndPositionManager:m.rowSizeAndPositionManager,rowStartIndex:O,rowStopIndex:S,scrollLeft:g,scrollTop:y,styleCache:this._styleCache,verticalOffsetAdjustment:i,visibleColumnIndices:t,visibleRowIndices:b}),this._columnStartIndex=v,this._columnStopIndex=w,this._rowStartIndex=O,this._rowStopIndex=S}}},{key:"_debounceScrollEnded",value:function(){var e=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&(0,S.cancelAnimationTimeout)(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=(0,S.requestAnimationTimeout)(this._debounceScrollEndedCallback,e)}},{key:"_handleInvalidatedGridSize",value:function(){var e,t;"number"==typeof this._deferredInvalidateColumnIndex&&"number"==typeof this._deferredInvalidateRowIndex&&(e=this._deferredInvalidateColumnIndex,t=this._deferredInvalidateRowIndex,this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:e,rowIndex:t}))}},{key:"_invokeOnScrollMemoizer",value:function(e){var t=this,n=e.scrollLeft,r=e.scrollTop,o=e.totalColumnsWidth,a=e.totalRowsHeight;this._onScrollMemoizer({callback:function(e){var n=e.scrollLeft,r=(e=e.scrollTop,t.props),i=r.height;(0,r.onScroll)({clientHeight:i,clientWidth:r.width,scrollHeight:a,scrollLeft:n,scrollTop:e,scrollWidth:o})},indices:{scrollLeft:n,scrollTop:r}})}},{key:"_isScrolling",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.props,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.state;return Object.hasOwnProperty.call(e,"isScrolling")?Boolean(e.isScrolling):Boolean(t.isScrolling)}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){var e;this._scrollbarPresenceChanged&&(e=this.props.onScrollbarPresenceChange,this._scrollbarPresenceChanged=!1,e({horizontal:0<this._horizontalScrollBarSize,size:this.state.instanceProps.scrollbarSize,vertical:0<this._verticalScrollBarSize}))}},{key:"scrollToPosition",value:function(e){var n=e.scrollLeft;e=e.scrollTop,(n=t._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:n,scrollTop:e}))&&(n.needToResetStyleCache=!1,this.setState(n))}},{key:"_getCalculatedScrollLeft",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.props,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.state;return t._getCalculatedScrollLeft(e,n)}},{key:"_updateScrollLeftForScrollToColumn",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.props,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.state;(e=t._getScrollLeftForScrollToColumnStateUpdate(e,n))&&(e.needToResetStyleCache=!1,this.setState(e))}},{key:"_getCalculatedScrollTop",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.props,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.state;return t._getCalculatedScrollTop(e,n)}},{key:"_resetStyleCache",value:function(){var e=this._styleCache,t=this._cellCache,n=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var r=this._rowStartIndex;r<=this._rowStopIndex;r++)for(var o=this._columnStartIndex;o<=this._columnStopIndex;o++){var a="".concat(r,"-").concat(o);this._styleCache[a]=e[a],n&&(this._cellCache[a]=t[a])}}},{key:"_updateScrollTopForScrollToRow",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.props,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.state;(e=t._getScrollTopForScrollToRowStateUpdate(e,n))&&(e.needToResetStyleCache=!1,this.setState(e))}}],[{key:"getDerivedStateFromProps",value:function(e,n){var r,o,a={},i=(0===e.columnCount&&0!==n.scrollLeft||0===e.rowCount&&0!==n.scrollTop?(a.scrollLeft=0,a.scrollTop=0):(e.scrollLeft!==n.scrollLeft&&e.scrollToColumn<0||e.scrollTop!==n.scrollTop&&e.scrollToRow<0)&&Object.assign(a,t._getScrollToPositionStateUpdate({prevState:n,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop})),n.instanceProps);return a.needToResetStyleCache=!1,e.columnWidth===i.prevColumnWidth&&e.rowHeight===i.prevRowHeight||(a.needToResetStyleCache=!0),i.columnSizeAndPositionManager.configure({cellCount:e.columnCount,estimatedCellSize:t._getEstimatedColumnSize(e),cellSizeGetter:t._wrapSizeGetter(e.columnWidth)}),i.rowSizeAndPositionManager.configure({cellCount:e.rowCount,estimatedCellSize:t._getEstimatedRowSize(e),cellSizeGetter:t._wrapSizeGetter(e.rowHeight)}),0!==i.prevColumnCount&&0!==i.prevRowCount||(i.prevColumnCount=0,i.prevRowCount=0),e.autoHeight&&!1===e.isScrolling&&!0===i.prevIsScrolling&&Object.assign(a,{isScrolling:!1}),(0,m.default)({cellCount:i.prevColumnCount,cellSize:"number"==typeof i.prevColumnWidth?i.prevColumnWidth:null,computeMetadataCallback:function(){return i.columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.columnCount,nextCellSize:"number"==typeof e.columnWidth?e.columnWidth:null,nextScrollToIndex:e.scrollToColumn,scrollToIndex:i.prevScrollToColumn,updateScrollOffsetForScrollToIndex:function(){r=t._getScrollLeftForScrollToColumnStateUpdate(e,n)}}),(0,m.default)({cellCount:i.prevRowCount,cellSize:"number"==typeof i.prevRowHeight?i.prevRowHeight:null,computeMetadataCallback:function(){return i.rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.rowCount,nextCellSize:"number"==typeof e.rowHeight?e.rowHeight:null,nextScrollToIndex:e.scrollToRow,scrollToIndex:i.prevScrollToRow,updateScrollOffsetForScrollToIndex:function(){o=t._getScrollTopForScrollToRowStateUpdate(e,n)}}),i.prevColumnCount=e.columnCount,i.prevColumnWidth=e.columnWidth,i.prevIsScrolling=!0===e.isScrolling,i.prevRowCount=e.rowCount,i.prevRowHeight=e.rowHeight,i.prevScrollToColumn=e.scrollToColumn,i.prevScrollToRow=e.scrollToRow,i.scrollbarSize=e.getScrollbarSize(),void 0===i.scrollbarSize?(i.scrollbarSizeMeasured=!1,i.scrollbarSize=0):i.scrollbarSizeMeasured=!0,a.instanceProps=i,C({},a,{},r,{},o)}},{key:"_getEstimatedColumnSize",value:function(e){return"number"==typeof e.columnWidth?e.columnWidth:e.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(e){return"number"==typeof e.rowHeight?e.rowHeight:e.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(e){var t=e.prevState,n=e.scrollLeft,r=(e=e.scrollTop,{scrollPositionChangeReason:E});return"number"==typeof n&&0<=n&&(r.scrollDirectionHorizontal=n>t.scrollLeft?b.SCROLL_DIRECTION_FORWARD:b.SCROLL_DIRECTION_BACKWARD,r.scrollLeft=n),"number"==typeof e&&0<=e&&(r.scrollDirectionVertical=e>t.scrollTop?b.SCROLL_DIRECTION_FORWARD:b.SCROLL_DIRECTION_BACKWARD,r.scrollTop=e),"number"==typeof n&&0<=n&&n!==t.scrollLeft||"number"==typeof e&&0<=e&&e!==t.scrollTop?r:{}}},{key:"_wrapSizeGetter",value:function(e){return"function"==typeof e?e:function(){return e}}},{key:"_getCalculatedScrollLeft",value:function(e,t){var n=e.columnCount,r=e.height,o=e.scrollToAlignment,a=e.scrollToColumn,i=(e=e.width,t.scrollLeft);return t=t.instanceProps,0<n?(n-=1,n=a<0?n:Math.min(n,a),a=t.rowSizeAndPositionManager.getTotalSize(),r=t.scrollbarSizeMeasured&&r<a?t.scrollbarSize:0,t.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:o,containerSize:e-r,currentOffset:i,targetIndex:n})):0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(e,n){var r=n.scrollLeft;return"number"==typeof(e=t._getCalculatedScrollLeft(e,n))&&0<=e&&r!==e?t._getScrollToPositionStateUpdate({prevState:n,scrollLeft:e,scrollTop:-1}):{}}},{key:"_getCalculatedScrollTop",value:function(e,t){var n=e.height,r=e.rowCount,o=e.scrollToAlignment,a=e.scrollToRow,i=(e=e.width,t.scrollTop);return t=t.instanceProps,0<r?(r-=1,r=a<0?r:Math.min(r,a),a=t.columnSizeAndPositionManager.getTotalSize(),e=t.scrollbarSizeMeasured&&e<a?t.scrollbarSize:0,t.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:o,containerSize:n-e,currentOffset:i,targetIndex:r})):0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(e,n){var r=n.scrollTop;return"number"==typeof(e=t._getCalculatedScrollTop(e,n))&&0<=e&&r!==e?t._getScrollToPositionStateUpdate({prevState:n,scrollLeft:-1,scrollTop:e}):{}}}]),t}(p.PureComponent),(0,d.default)(r,"propTypes",null),r=n,(0,d.default)(r,"defaultProps",{"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:o.default,containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:w.default,noContentRenderer:function(){return null},onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:b.default,overscanRowCount:10,role:"grid",scrollingResetTimeInterval:150,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1}),(0,O.polyfill)(r),t.default=r},45669:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.cellCount,n=e.overscanCellsCount,o=e.scrollDirection,a=e.startIndex;return e=e.stopIndex,n=Math.max(1,n),o===r?{overscanStartIndex:Math.max(0,a-1),overscanStopIndex:Math.min(t-1,e+n)}:{overscanStartIndex:Math.max(0,a-n),overscanStopIndex:Math.min(t-1,e+1)}},t.SCROLL_DIRECTION_VERTICAL=t.SCROLL_DIRECTION_HORIZONTAL=t.SCROLL_DIRECTION_FORWARD=t.SCROLL_DIRECTION_BACKWARD=void 0,n(31826),t.SCROLL_DIRECTION_BACKWARD=-1;var r=1;t.SCROLL_DIRECTION_FORWARD=r,t.SCROLL_DIRECTION_HORIZONTAL="horizontal",t.SCROLL_DIRECTION_VERTICAL="vertical"},8824:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=e.cellCache,n=e.cellRenderer,r=e.columnSizeAndPositionManager,o=e.columnStartIndex,a=e.columnStopIndex,i=e.deferredMeasurementCache,l=e.horizontalOffsetAdjustment,u=e.isScrolling,s=e.isScrollingOptOut,c=e.parent,f=e.rowSizeAndPositionManager,d=e.rowStartIndex,p=e.rowStopIndex,h=e.styleCache,m=e.verticalOffsetAdjustment,y=e.visibleColumnIndices,g=e.visibleRowIndices,b=[],v=(e=r.areOffsetsAdjusted()||f.areOffsetsAdjusted(),!u&&!e),w=d;w<=p;w++)for(var O=f.getSizeAndPositionOfCell(w),S=o;S<=a;S++){var _=r.getSizeAndPositionOfCell(S),C=S>=y.start&&S<=y.stop&&w>=g.start&&w<=g.stop,E="".concat(w,"-").concat(S),P=void 0;v&&h[E]?P=h[E]:i&&!i.has(w,S)?P={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(P={height:O.size,left:_.offset+l,position:"absolute",top:O.offset+m,width:_.size},h[E]=P),_={columnIndex:S,isScrolling:u,isVisible:C,key:E,parent:c,rowIndex:w,style:P},C=void 0,null!=(C=!s&&!u||l||m?n(_):(t[E]||(t[E]=n(_)),t[E]))&&!1!==C&&b.push(C)}return b},n(31826)},74070:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.cellCount,n=e.overscanCellsCount,o=e.scrollDirection,a=e.startIndex;return e=e.stopIndex,o===r?{overscanStartIndex:Math.max(0,a),overscanStopIndex:Math.min(t-1,e+n)}:{overscanStartIndex:Math.max(0,a-n),overscanStopIndex:Math.min(t-1,e)}},t.SCROLL_DIRECTION_VERTICAL=t.SCROLL_DIRECTION_HORIZONTAL=t.SCROLL_DIRECTION_FORWARD=t.SCROLL_DIRECTION_BACKWARD=void 0,n(31826),t.SCROLL_DIRECTION_BACKWARD=-1;var r=1;t.SCROLL_DIRECTION_FORWARD=r,t.SCROLL_DIRECTION_HORIZONTAL="horizontal",t.SCROLL_DIRECTION_VERTICAL="vertical"},39305:(e,t,n)=>{"use strict";var r=n(95318),o=(Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"Grid",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"accessibilityOverscanIndicesGetter",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"defaultCellRangeRenderer",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"defaultOverscanIndicesGetter",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"bpfrpt_proptype_NoContentRenderer",{enumerable:!0,get:function(){return u.bpfrpt_proptype_NoContentRenderer}}),Object.defineProperty(t,"bpfrpt_proptype_Alignment",{enumerable:!0,get:function(){return u.bpfrpt_proptype_Alignment}}),Object.defineProperty(t,"bpfrpt_proptype_CellPosition",{enumerable:!0,get:function(){return u.bpfrpt_proptype_CellPosition}}),Object.defineProperty(t,"bpfrpt_proptype_CellSize",{enumerable:!0,get:function(){return u.bpfrpt_proptype_CellSize}}),Object.defineProperty(t,"bpfrpt_proptype_OverscanIndicesGetter",{enumerable:!0,get:function(){return u.bpfrpt_proptype_OverscanIndicesGetter}}),Object.defineProperty(t,"bpfrpt_proptype_RenderedSection",{enumerable:!0,get:function(){return u.bpfrpt_proptype_RenderedSection}}),Object.defineProperty(t,"bpfrpt_proptype_CellRendererParams",{enumerable:!0,get:function(){return u.bpfrpt_proptype_CellRendererParams}}),Object.defineProperty(t,"bpfrpt_proptype_Scroll",{enumerable:!0,get:function(){return u.bpfrpt_proptype_Scroll}}),r(n(41427))),a=r(n(45669)),i=r(n(8824)),l=r(n(74070)),u=n(31826)},31826:(e,t,n)=>{"use strict";var r=n(95318),o=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.bpfrpt_proptype_VisibleCellRange=t.bpfrpt_proptype_Alignment=t.bpfrpt_proptype_OverscanIndicesGetter=t.bpfrpt_proptype_OverscanIndices=t.bpfrpt_proptype_OverscanIndicesGetterParams=t.bpfrpt_proptype_RenderedSection=t.bpfrpt_proptype_ScrollbarPresenceChange=t.bpfrpt_proptype_Scroll=t.bpfrpt_proptype_NoContentRenderer=t.bpfrpt_proptype_CellSize=t.bpfrpt_proptype_CellSizeGetter=t.bpfrpt_proptype_CellRangeRenderer=t.bpfrpt_proptype_CellRangeRendererParams=t.bpfrpt_proptype_StyleCache=t.bpfrpt_proptype_CellCache=t.bpfrpt_proptype_CellRenderer=t.bpfrpt_proptype_CellRendererParams=t.bpfrpt_proptype_CellPosition=void 0,o(n(67294)),r(n(15825)),r(n(45697)),t.bpfrpt_proptype_CellPosition=null,t.bpfrpt_proptype_CellRendererParams=null,t.bpfrpt_proptype_CellRenderer=null,t.bpfrpt_proptype_CellCache=null,t.bpfrpt_proptype_StyleCache=null,t.bpfrpt_proptype_CellRangeRendererParams=null,t.bpfrpt_proptype_CellRangeRenderer=null,t.bpfrpt_proptype_CellSizeGetter=null,t.bpfrpt_proptype_CellSize=null,t.bpfrpt_proptype_NoContentRenderer=null,t.bpfrpt_proptype_Scroll=null,t.bpfrpt_proptype_ScrollbarPresenceChange=null,t.bpfrpt_proptype_RenderedSection=null,t.bpfrpt_proptype_OverscanIndicesGetterParams=null,t.bpfrpt_proptype_OverscanIndices=null,t.bpfrpt_proptype_OverscanIndicesGetter=null,t.bpfrpt_proptype_Alignment=null,t.bpfrpt_proptype_VisibleCellRange=null},50553:(e,t,n)=>{"use strict";var r=n(95318),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(n(34575))),a=r(n(93913)),i=r(n(59713));n(31826),r=function(){function e(t){var n=t.cellCount,r=t.cellSizeGetter;t=t.estimatedCellSize,(0,o.default)(this,e),(0,i.default)(this,"_cellSizeAndPositionData",{}),(0,i.default)(this,"_lastMeasuredIndex",-1),(0,i.default)(this,"_lastBatchedIndex",-1),(0,i.default)(this,"_cellCount",void 0),(0,i.default)(this,"_cellSizeGetter",void 0),(0,i.default)(this,"_estimatedCellSize",void 0),this._cellSizeGetter=r,this._cellCount=n,this._estimatedCellSize=t}return(0,a.default)(e,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(e){var t=e.cellCount,n=e.estimatedCellSize;e=e.cellSizeGetter,this._cellCount=t,this._estimatedCellSize=n,this._cellSizeGetter=e}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(e){if(e<0||e>=this._cellCount)throw Error("Requested index ".concat(e," is outside of range 0..").concat(this._cellCount));if(e>this._lastMeasuredIndex)for(var t=this.getSizeAndPositionOfLastMeasuredCell(),n=t.offset+t.size,r=this._lastMeasuredIndex+1;r<=e;r++){var o=this._cellSizeGetter({index:r});if(void 0===o||isNaN(o))throw Error("Invalid size returned for cell ".concat(r," of value ").concat(o));null===o?(this._cellSizeAndPositionData[r]={offset:n,size:0},this._lastBatchedIndex=e):(this._cellSizeAndPositionData[r]={offset:n,size:o},n+=o,this._lastMeasuredIndex=e)}return this._cellSizeAndPositionData[e]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return 0<=this._lastMeasuredIndex?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var e=this.getSizeAndPositionOfLastMeasuredCell();return e.offset+e.size+(this._cellCount-this._lastMeasuredIndex-1)*this._estimatedCellSize}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=void 0===(t=e.align)?"auto":t,n=e.containerSize,r=e.currentOffset;if(e=e.targetIndex,n<=0)return 0;var o,a=this.getSizeAndPositionOfCell(e),i=a.offset,l=i-n+a.size;switch(t){case"start":o=i;break;case"end":o=l;break;case"center":o=i-(n-a.size)/2;break;default:o=Math.max(l,Math.min(i,r))}return e=this.getTotalSize(),Math.max(0,Math.min(e-n,o))}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,n=e.offset;if(0===this.getTotalSize())return{};for(var r=n+t,o=(e=this._findNearestCell(n),n=(t=this.getSizeAndPositionOfCell(e)).offset+t.size,e);n<r&&o<this._cellCount-1;)n+=this.getSizeAndPositionOfCell(++o).size;return{start:e,stop:o}}},{key:"resetCell",value:function(e){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,e-1)}},{key:"_binarySearch",value:function(e,t,n){for(;t<=e;){var r=t+Math.floor((e-t)/2),o=this.getSizeAndPositionOfCell(r).offset;if(o===n)return r;o<n?t=r+1:n<o&&(e=r-1)}return 0<t?t-1:0}},{key:"_exponentialSearch",value:function(e,t){for(var n=1;e<this._cellCount&&this.getSizeAndPositionOfCell(e).offset<t;)e+=n,n*=2;return this._binarySearch(Math.min(e,this._cellCount-1),Math.floor(e/2),t)}},{key:"_findNearestCell",value:function(e){if(isNaN(e))throw Error("Invalid offset ".concat(e," specified"));e=Math.max(0,e);var t=this.getSizeAndPositionOfLastMeasuredCell(),n=Math.max(0,this._lastMeasuredIndex);return t.offset>=e?this._binarySearch(n,0,e):this._exponentialSearch(n,e)}}]),e}(),t.default=r},15825:(e,t,n)=>{"use strict";var r=n(95318),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(n(6479))),a=r(n(34575)),i=r(n(93913)),l=r(n(59713)),u=r(n(50553)),s=n(41333);n(31826),r=function(){function e(t){var n=void 0===(n=t.maxScrollSize)?(0,s.getMaxElementSize)():n;t=(0,o.default)(t,["maxScrollSize"]),(0,a.default)(this,e),(0,l.default)(this,"_cellSizeAndPositionManager",void 0),(0,l.default)(this,"_maxScrollSize",void 0),this._cellSizeAndPositionManager=new u.default(t),this._maxScrollSize=n}return(0,i.default)(e,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(e){this._cellSizeAndPositionManager.configure(e)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(e){var t=e.containerSize,n=(e=e.offset,this._cellSizeAndPositionManager.getTotalSize()),r=this.getTotalSize();return t=this._getOffsetPercentage({containerSize:t,offset:e,totalSize:r}),Math.round(t*(r-n))}},{key:"getSizeAndPositionOfCell",value:function(e){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(e)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=void 0===(t=e.align)?"auto":t,n=e.containerSize,r=e.currentOffset;return e=e.targetIndex,r=this._safeOffsetToOffset({containerSize:n,offset:r}),t=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:t,containerSize:n,currentOffset:r,targetIndex:e}),this._offsetToSafeOffset({containerSize:n,offset:t})}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize;return e=e.offset,e=this._safeOffsetToOffset({containerSize:t,offset:e}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:t,offset:e})}},{key:"resetCell",value:function(e){this._cellSizeAndPositionManager.resetCell(e)}},{key:"_getOffsetPercentage",value:function(e){var t=e.containerSize,n=e.offset;return(e=e.totalSize)<=t?0:n/(e-t)}},{key:"_offsetToSafeOffset",value:function(e){var t=e.containerSize,n=(e=e.offset,this._cellSizeAndPositionManager.getTotalSize()),r=this.getTotalSize();return n===r?e:(e=this._getOffsetPercentage({containerSize:t,offset:e,totalSize:n}),Math.round(e*(r-t)))}},{key:"_safeOffsetToOffset",value:function(e){var t=e.containerSize,n=(e=e.offset,this._cellSizeAndPositionManager.getTotalSize()),r=this.getTotalSize();return n===r?e:(e=this._getOffsetPercentage({containerSize:t,offset:e,totalSize:r}),Math.round(e*(n-t)))}}]),e}(),t.default=r},38022:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.cellCount,n=e.cellSize,r=e.computeMetadataCallback,o=e.computeMetadataCallbackProps,a=e.nextCellsCount,i=e.nextCellSize,l=e.nextScrollToIndex,u=e.scrollToIndex;e=e.updateScrollOffsetForScrollToIndex,t===a&&("number"!=typeof n&&"number"!=typeof i||n===i)||(r(o),0<=u&&u===l&&e())}},41333:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMaxElementSize=void 0,t.getMaxElementSize=function(){return"undefined"!=typeof window&&window.chrome?16777100:15e5}},4675:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.cellSize,n=e.cellSizeAndPositionManager,r=e.previousCellsCount,o=e.previousCellSize,a=e.previousScrollToAlignment,i=e.previousScrollToIndex,l=e.previousSize,u=e.scrollOffset,s=e.scrollToAlignment,c=e.scrollToIndex,f=e.size,d=e.sizeJustIncreasedFromZero,p=(e=e.updateScrollIndexCallback,n.getCellCount()),h=0<=c&&c<p;d=f!==l||d||!o||"number"==typeof t&&t!==o,h&&(d||s!==a||c!==i)?e(c):!h&&0<p&&(f<l||p<r)&&u>n.getTotalSize()-f&&e(p-1)},r(n(15825)),n(31826)},41233:(e,t,n)=>{"use strict";var r=n(95318),o=n(20862),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(n(67154))),i=r(n(34575)),l=r(n(93913)),u=r(n(78585)),s=r(n(29754)),c=r(n(81506)),f=r(n(2205)),d=r(n(59713)),p=o(n(39305)),h=o(n(67294)),m=r(n(57966));n(72049),r(n(45697)),r=o=function(e){function t(){var e,n;(0,i.default)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=(0,u.default)(this,(e=(0,s.default)(t)).call.apply(e,[this].concat(o))),(0,d.default)((0,c.default)(n),"Grid",void 0),(0,d.default)((0,c.default)(n),"_cellRenderer",(function(e){var t=e.parent,r=e.rowIndex,o=e.style,a=e.isScrolling,i=e.isVisible,l=(e=e.key,n.props.rowRenderer),u=Object.getOwnPropertyDescriptor(o,"width");return u&&u.writable&&(o.width="100%"),l({index:r,style:o,isScrolling:a,isVisible:i,key:e,parent:t})})),(0,d.default)((0,c.default)(n),"_setRef",(function(e){n.Grid=e})),(0,d.default)((0,c.default)(n),"_onScroll",(function(e){var t=e.clientHeight,r=e.scrollHeight;e=e.scrollTop,(0,n.props.onScroll)({clientHeight:t,scrollHeight:r,scrollTop:e})})),(0,d.default)((0,c.default)(n),"_onSectionRendered",(function(e){var t=e.rowOverscanStartIndex,r=e.rowOverscanStopIndex,o=e.rowStartIndex;e=e.rowStopIndex,(0,n.props.onRowsRendered)({overscanStartIndex:t,overscanStopIndex:r,startIndex:o,stopIndex:e})})),n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(e){var t=e.alignment;return e=e.index,this.Grid?this.Grid.getOffsetForCell({alignment:t,rowIndex:e,columnIndex:0}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex;e=e.rowIndex,this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:e,columnIndex:t})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var e=(t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).columnIndex,t=t.rowIndex;this.Grid&&this.Grid.recomputeGridSize({rowIndex:void 0===t?0:t,columnIndex:void 0===e?0:e})}},{key:"recomputeRowHeights",value:function(){this.Grid&&this.Grid.recomputeGridSize({rowIndex:0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,columnIndex:0})}},{key:"scrollToPosition",value:function(){this.Grid&&this.Grid.scrollToPosition({scrollTop:0<arguments.length&&void 0!==arguments[0]?arguments[0]:0})}},{key:"scrollToRow",value:function(){this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:0<arguments.length&&void 0!==arguments[0]?arguments[0]:0})}},{key:"render",value:function(){var e=(r=this.props).className,t=r.noRowsRenderer,n=r.scrollToIndex,r=r.width;return e=(0,m.default)("ReactVirtualized__List",e),h.createElement(p.default,(0,a.default)({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:e,columnWidth:r,columnCount:1,noContentRenderer:t,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:n}))}}]),t}(h.PureComponent),(0,d.default)(o,"propTypes",null),n=r,t.default=n,(0,d.default)(n,"defaultProps",{autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:p.accessibilityOverscanIndicesGetter,overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}})},35277:(e,t,n)=>{"use strict";var r=n(95318),o=(Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"List",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"bpfrpt_proptype_RowRendererParams",{enumerable:!0,get:function(){return a.bpfrpt_proptype_RowRendererParams}}),r(n(41233))),a=n(72049)},72049:(e,t,n)=>{"use strict";var r=n(95318),o=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.bpfrpt_proptype_Scroll=t.bpfrpt_proptype_RenderedRows=t.bpfrpt_proptype_RowRenderer=t.bpfrpt_proptype_RowRendererParams=void 0,o(n(67294)),r(n(45697)),t.bpfrpt_proptype_RowRendererParams=null,t.bpfrpt_proptype_RowRenderer=null,t.bpfrpt_proptype_RenderedRows=null,t.bpfrpt_proptype_Scroll=null},51278:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.caf=t.raf=void 0;var n,r=(n="undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame||n.msRequestAnimationFrame||function(e){return n.setTimeout(e,1e3/60)},o=n.cancelAnimationFrame||n.webkitCancelAnimationFrame||n.mozCancelAnimationFrame||n.oCancelAnimationFrame||n.msCancelAnimationFrame||function(e){n.clearTimeout(e)};t.raf=r,r=o,t.caf=r},41498:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t={};return function(n){var r=n.callback,o=n.indices,a=(n=Object.keys(o),!e||n.every((function(e){return e=o[e],Array.isArray(e)?0<e.length:0<=e})));n=n.length!==Object.keys(t).length||n.some((function(e){var n=t[e];return e=o[e],Array.isArray(e)?n.join(",")!==e.join(","):n!==e})),t=o,a&&n&&r(o)}}},96271:(e,t,n)=>{"use strict";var r=n(95318),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.bpfrpt_proptype_AnimationTimeoutId=t.requestAnimationTimeout=t.cancelAnimationTimeout=void 0,n(51278));r(n(45697)),t.bpfrpt_proptype_AnimationTimeoutId=null,t.cancelAnimationTimeout=function(e){return(0,o.caf)(e.id)},t.requestAnimationTimeout=function(e,t){Promise.resolve().then((function(){n=Date.now()}));var n,r={id:(0,o.raf)((function a(){Date.now()-n>=t?e.call():r.id=(0,o.raf)(a)}))};return r}},55736:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r,o=void 0!==(r=void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:n.g).document&&r.document.attachEvent;if(!o){var a=function(){var e=r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||function(e){return r.setTimeout(e,20)};return function(t){return e(t)}}(),i=function(){var e=r.cancelAnimationFrame||r.mozCancelAnimationFrame||r.webkitCancelAnimationFrame||r.clearTimeout;return function(t){return e(t)}}(),l=function(e){var t=(e=e.__resizeTriggers__).firstElementChild,n=(e=e.lastElementChild,t.firstElementChild);e.scrollLeft=e.scrollWidth,e.scrollTop=e.scrollHeight,n.style.width=t.offsetWidth+1+"px",n.style.height=t.offsetHeight+1+"px",t.scrollLeft=t.scrollWidth,t.scrollTop=t.scrollHeight},u=function(e){var t;e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0||(l(t=this),this.__resizeRAF__&&i(this.__resizeRAF__),this.__resizeRAF__=a((function(){(function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height})(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(n){n.call(t,e)})))})))},s=!1,c="",f="animationstart",d="Webkit Moz O ms".split(" "),p="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),h=r.document.createElement("fakeelement");if(!1===(s=void 0!==h.style.animationName||s))for(var m=0;m<d.length;m++)if(void 0!==h.style[d[m]+"AnimationName"]){c="-"+d[m].toLowerCase()+"-",f=p[m],s=!0;break}var y="resizeanim",g="@"+c+"keyframes "+y+" { from { opacity: 0; } to { opacity: 0; } } ",b=c+"animation: 1ms "+y+"; "}return{addResizeListener:function(t,n){var a,i,s,c,d,p;o?t.attachEvent("onresize",n):(t.__resizeTriggers__||(a=t.ownerDocument,(s=r.getComputedStyle(t))&&"static"==s.position&&(t.style.position="relative"),(s=a).getElementById("detectElementResize")||(c=(g||"")+".resize-triggers { "+(b||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',d=s.head||s.getElementsByTagName("head")[0],(p=s.createElement("style")).id="detectElementResize",p.type="text/css",null!=e&&p.setAttribute("nonce",e),p.styleSheet?p.styleSheet.cssText=c:p.appendChild(s.createTextNode(c)),d.appendChild(p)),t.__resizeLast__={},t.__resizeListeners__=[],(t.__resizeTriggers__=a.createElement("div")).className="resize-triggers",i='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',window.trustedTypes?(s=trustedTypes.createPolicy("react-virtualized-auto-sizer",{createHTML:function(){return i}}),t.__resizeTriggers__.innerHTML=s.createHTML("")):t.__resizeTriggers__.innerHTML=i,t.appendChild(t.__resizeTriggers__),l(t),t.addEventListener("scroll",u,!0),f&&(t.__resizeTriggers__.__animationListener__=function(e){e.animationName==y&&l(t)},t.__resizeTriggers__.addEventListener(f,t.__resizeTriggers__.__animationListener__))),t.__resizeListeners__.push(n))},removeResizeListener:function(e,t){if(o)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",u,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(f,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}},72408:(e,t,n)=>{"use strict";var r=n(27418),o=60103,a=60106,i=(t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114,60109),l=60110,u=60112,s=(t.Suspense=60113,60115),c=60116,f=("function"==typeof Symbol&&Symbol.for&&(o=(n=Symbol.for)("react.element"),a=n("react.portal"),t.Fragment=n("react.fragment"),t.StrictMode=n("react.strict_mode"),t.Profiler=n("react.profiler"),i=n("react.provider"),l=n("react.context"),u=n("react.forward_ref"),t.Suspense=n("react.suspense"),s=n("react.memo"),c=n("react.lazy")),"function"==typeof Symbol&&Symbol.iterator);function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h={};function m(e,t,n){this.props=e,this.context=t,this.refs=h,this.updater=n||p}function y(){}function g(e,t,n){this.props=e,this.context=t,this.refs=h,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var b=((n=g.prototype=new y).constructor=g,r(n,m.prototype),n.isPureReactComponent=!0,{current:null}),v=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function O(e,t,n){var r,a={},i=null,l=null;if(null!=t)for(r in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(i=""+t.key),t)v.call(t,r)&&!w.hasOwnProperty(r)&&(a[r]=t[r]);var u=arguments.length-2;if(1===u)a.children=n;else if(1<u){for(var s=Array(u),c=0;c<u;c++)s[c]=arguments[c+2];a.children=s}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===a[r]&&(a[r]=u[r]);return{$$typeof:o,type:e,key:i,ref:l,props:a,_owner:b.current}}function S(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var _=/\/+/g;function C(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(e=""+e.key,n={"=":"=0",":":"=2"},"$"+e.replace(/[=:]/g,(function(e){return n[e]}))):t.toString(36);var n}function E(e,t,n,r,i){var l,u,s=!1;if(null===(e="undefined"!=(p=typeof e)&&"boolean"!==p?e:null))s=!0;else switch(p){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case o:case a:s=!0}}if(s)return i=i(s=e),e=""===r?"."+C(s,0):r,Array.isArray(i)?(n="",E(i,t,n=null!=e?e.replace(_,"$&/")+"/":n,"",(function(e){return e}))):null!=i&&(S(i)&&(u=n+(!(l=i).key||s&&s.key===i.key?"":(""+i.key).replace(_,"$&/")+"/")+e,i={$$typeof:o,type:l.type,key:u,ref:l.ref,props:l.props,_owner:l._owner}),t.push(i)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var p,h=r+C(p=e[c],c);s+=E(p,t,n,h,i)}else if("function"==typeof(h=null!==(u=e)&&"object"==typeof u&&"function"==typeof(u=f&&u[f]||u["@@iterator"])?u:null))for(e=h.call(e),c=0;!(p=e.next()).done;)s+=E(p=p.value,t,n,h=r+C(p,c++),i);else if("object"===p)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function P(e,t,n){if(null==e)return e;var r=[],o=0;return E(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function k(e){var t;if(-1===e._status&&(t=(t=e._result)(),e._status=0,(e._result=t).then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))),1===e._status)return e._result;throw e._result}var j={current:null};function x(){var e=j.current;if(null===e)throw Error(d(321));return e}n={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r},t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(S(e))return e;throw Error(d(143))}},t.Component=m,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n,t.cloneElement=function(e,t,n){if(null==e)throw Error(d(267,e));var a=r({},e.props),i=e.key,l=e.ref,u=e._owner;if(null!=t)for(s in void 0!==t.ref&&(l=t.ref,u=b.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps&&(c=e.type.defaultProps),t)v.call(t,s)&&!w.hasOwnProperty(s)&&(a[s]=(void 0===t[s]&&void 0!==c?c:t)[s]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),f=0;f<s;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:o,type:e.type,key:i,ref:l,props:a,_owner:u}},t.createContext=function(e,t){return(e={$$typeof:l,_calculateChangedBits:t=void 0===t?null:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=O,t.createFactory=function(e){var t=O.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:k}},t.memo=function(e,t){return{$$typeof:s,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return x().useCallback(e,t)},t.useContext=function(e,t){return x().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return x().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return x().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return x().useLayoutEffect(e,t)},t.useMemo=function(e,t){return x().useMemo(e,t)},t.useReducer=function(e,t,n){return x().useReducer(e,t,n)},t.useRef=function(e){return x().useRef(e)},t.useState=function(e){return x().useState(e)},t.version="17.0.2"},67294:(e,t,n)=>{"use strict";e.exports=n(72408)},86702:()=>{window.requestIdleCallback=window.requestIdleCallback||function(e){var t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)},window.cancelIdleCallback=window.cancelIdleCallback||function(e){clearTimeout(e)}},53149:e=>{"use strict";function t(e){return"/"===e.charAt(0)}function n(e,t){for(var n=t,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()}e.exports=function(e,r){void 0===r&&(r="");var o=e&&e.split("/")||[],a=r&&r.split("/")||[],i=e&&t(e);if(r=r&&t(r),i=i||r,e&&t(e)?a=o:o.length&&(a.pop(),a=a.concat(o)),!a.length)return"/";e=!!a.length&&("."===(r=a[a.length-1])||".."===r||""===r);for(var l=0,u=a.length;0<=u;u--){var s=a[u];"."===s?n(a,u):".."===s?(n(a,u),l++):l&&(n(a,u),l--)}if(!i)for(;l--;)a.unshift("..");return!i||""===a[0]||a[0]&&t(a[0])||a.unshift(""),o=a.join("/"),e&&"/"!==o.substr(-1)&&(o+="/"),o}},14149:(e,t,n)=>{"use strict";e.exports=n(53149)},60053:(e,t)=>{"use strict";var n,r,o,a,i,l,u,s,c,f,d,p,h,m,y,g,b,v;function w(e,t){var n=e.length;for(e.push(t);;){var r=n-1>>>1,o=e[r];if(!(void 0!==o&&0<_(o,t)))break;e[r]=t,e[n]=o,n=r}}function O(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;for(var r=0,o=e.length;r<o;){var a=2*(r+1)-1,i=e[a],l=1+a,u=e[l];if(void 0!==i&&_(i,n)<0)r=void 0!==u&&_(u,i)<0?(e[r]=u,e[l]=n,l):(e[r]=i,e[a]=n,a);else{if(!(void 0!==u&&_(u,n)<0))break;e[r]=u,e[l]=n,r=l}}}}}function _(e,t){var n=e.sortIndex-t.sortIndex;return 0!=n?n:e.id-t.id}"object"==typeof performance&&"function"==typeof performance.now?(r=performance,t.unstable_now=function(){return r.now()}):(o=Date,a=o.now(),t.unstable_now=function(){return o.now()-a}),"undefined"==typeof window||"function"!=typeof MessageChannel?(l=i=null,u=function(){if(null!==i)try{var e=t.unstable_now();i(!0,e),i=null}catch(e){throw setTimeout(u,0),e}},s=function(e){null!==i?setTimeout(s,0,e):(i=e,setTimeout(u,0))},c=function(e,t){l=setTimeout(e,t)},f=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},n=t.unstable_forceFrameRate=function(){}):(d=window.setTimeout,p=window.clearTimeout,"undefined"!=typeof console&&(R=window.cancelAnimationFrame,"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof R&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),h=!1,m=null,y=-1,g=5,b=0,t.unstable_shouldYield=function(){return t.unstable_now()>=b},n=function(){},t.unstable_forceFrameRate=function(e){e<0||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5},R=new MessageChannel,v=R.port2,R.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();b=e+g;try{m(!0,e)?v.postMessage(null):(h=!1,m=null)}catch(e){throw v.postMessage(null),e}}else h=!1},s=function(e){m=e,h||(h=!0,v.postMessage(null))},c=function(e,n){y=d((function(){e(t.unstable_now())}),n)},f=function(){p(y),y=-1});var C=[],E=[],P=1,k=null,j=3,x=!1,M=!1,T=!1;function I(e){for(var t=O(E);null!==t;){if(null===t.callback)S(E);else{if(!(t.startTime<=e))break;S(E),t.sortIndex=t.expirationTime,w(C,t)}t=O(E)}}function D(e){var t;T=!1,I(e),M||(null!==O(C)?(M=!0,s(A)):null!==(t=O(E))&&c(D,t.startTime-e))}function A(e,n){M=!1,T&&(T=!1,f()),x=!0;var r=j;try{for(I(n),k=O(C);null!==k&&(!(k.expirationTime>n)||e&&!t.unstable_shouldYield());){var o,a=k.callback;"function"==typeof a?(k.callback=null,j=k.priorityLevel,o=a(k.expirationTime<=n),n=t.unstable_now(),"function"==typeof o?k.callback=o:k===O(C)&&S(C),I(n)):S(C),k=O(C)}var i;return null!==k||(null!==(i=O(E))&&c(D,i.startTime-n),!1)}finally{k=null,j=r,x=!1}}var R=n;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){M||x||(M=!0,s(A))},t.unstable_getCurrentPriorityLevel=function(){return j},t.unstable_getFirstCallbackNode=function(){return O(C)},t.unstable_next=function(e){switch(j){case 1:case 2:case 3:var t=3;break;default:t=j}var n=j;j=t;try{return e()}finally{j=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=R,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=j;j=e;try{return t()}finally{j=n}},t.unstable_scheduleCallback=function(e,n,r){var o=t.unstable_now();switch(r="object"==typeof r&&null!==r&&"number"==typeof(r=r.delay)&&0<r?o+r:o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:P++,callback:n,priorityLevel:e,startTime:r,expirationTime:a=r+a,sortIndex:-1},o<r?(e.sortIndex=r,w(E,e),null===O(C)&&e===O(E)&&(T?f():T=!0,c(D,r-o))):(e.sortIndex=a,w(C,e),M||x||(M=!0,s(A))),e},t.unstable_wrapCallback=function(e){var t=j;return function(){var n=j;j=t;try{return e.apply(this,arguments)}finally{j=n}}}},63840:(e,t,n)=>{"use strict";e.exports=n(60053)},58971:(e,t,n)=>{var r=n(62195),o=n(39015);n=[n(19257)],e.exports=r.createStore(o,n)},19257:(e,t,n)=>{e.exports=function(){return n(55703),{}}},55703:()=>{"object"!=typeof JSON&&(JSON={}),function(){"use strict";var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta,rep;function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,(function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function str(e,t){var n,r,o,a,i,l=gap,u=t[e];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(e)),typeof(u="function"==typeof rep?rep.call(t,e,u):u)){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,i=[],"[object Array]"===Object.prototype.toString.apply(u)){for(a=u.length,n=0;n<a;n+=1)i[n]=str(n,u)||"null";return o=0===i.length?"[]":gap?"[\n"+gap+i.join(",\n"+gap)+"\n"+l+"]":"["+i.join(",")+"]",gap=l,o}if(rep&&"object"==typeof rep)for(a=rep.length,n=0;n<a;n+=1)"string"==typeof rep[n]&&(o=str(r=rep[n],u))&&i.push(quote(r)+(gap?": ":":")+o);else for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(o=str(r,u))&&i.push(quote(r)+(gap?": ":":")+o);return o=0===i.length?"{}":gap?"{\n"+gap+i.join(",\n"+gap)+"\n"+l+"}":"{"+i.join(",")+"}",gap=l,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value),"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var r;if(indent=gap="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(!(rep=t)||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var n,r,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(void 0!==(r=walk(o,n))?o[n]=r:delete o[n]);return reviver.call(e,t,o)}if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()},62195:(e,t,n)=>{var r=(n=n(69078)).slice,o=n.pluck,a=n.each,i=n.bind,l=n.create,u=n.isList,s=n.isFunction,c=n.isObject,f={version:"2.0.12",enabled:!(e.exports={createStore:d}),get:function(e,t){return e=this.storage.read(this._namespacePrefix+e),this._deserialize(e,t)},set:function(e,t){return void 0===t?this.remove(e):(this.storage.write(this._namespacePrefix+e,this._serialize(t)),t)},remove:function(e){this.storage.remove(this._namespacePrefix+e)},each:function(e){var t=this;this.storage.each((function(n,r){e.call(t,t._deserialize(n),(r||"").replace(t._namespaceRegexp,""))}))},clearAll:function(){this.storage.clearAll()},hasNamespace:function(e){return this._namespacePrefix=="__storejs_"+e+"_"},createStore:function(){return d.apply(this,arguments)},addPlugin:function(e){this._addPlugin(e)},namespace:function(e){return d(this.storage,this.plugins,e)}};function d(e,t,n){n=n||"",e&&!u(e)&&(e=[e]),t&&!u(t)&&(t=[t]);var d=n?"__storejs_"+n+"_":"",p=n?new RegExp("^"+d):null;if(!/^[a-zA-Z0-9_\-]*$/.test(n))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var h=l({_namespacePrefix:d,_namespaceRegexp:p,_testStorage:function(e){try{var t="__storejs__test__",n=(e.write(t,t),e.read(t)===t);return e.remove(t),n}catch(e){return!1}},_assignPluginFnProp:function(e,t){var n=this[t];this[t]=function(){var t=r(arguments,0),o=this,i=[function(){if(n)return a(arguments,(function(e,n){t[n]=e})),n.apply(o,t)}].concat(t);return e.apply(o,i)}},_serialize:function(e){return JSON.stringify(e)},_deserialize:function(e,t){if(!e)return t;var n="";try{n=JSON.parse(e)}catch(t){n=e}return void 0!==n?n:t},_addStorage:function(e){this.enabled||this._testStorage(e)&&(this.storage=e,this.enabled=!0)},_addPlugin:function(e){var t=this;if(u(e))a(e,(function(e){t._addPlugin(e)}));else{var n=o(this.plugins,(function(t){return e===t}));if(!n){if(this.plugins.push(e),!s(e))throw new Error("Plugins must be function values that return objects");if(n=e.call(this),!c(n))throw new Error("Plugins must return an object of function properties");a(n,(function(n,r){if(!s(n))throw new Error("Bad plugin property: "+r+" from plugin "+e.name+". Plugins should only return functions.");t._assignPluginFnProp(n,r)}))}}},addStorage:function(e){!function(){var e="undefined"==typeof console?null:console;e&&(e.warn||e.log).apply(e,arguments)}("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(e)}},f,{plugins:[]});return h.raw={},a(h,(function(e,t){s(e)&&(h.raw[t]=i(h,e))})),a(e,(function(e){h._addStorage(e)})),a(t,(function(e){h._addPlugin(e)})),h}},69078:(e,t,n)=>{var r=Object.assign||function(e,t,n,r){for(var o=1;o<arguments.length;o++)l(Object(arguments[o]),(function(t,n){e[n]=t}));return e},o=function(){{function e(){}return Object.create?function(e,t,n,o){var a=i(arguments,1);return r.apply(this,[Object.create(e)].concat(a))}:function(t,n,o,a){var l=i(arguments,1);return e.prototype=t,r.apply(this,[new e].concat(l))}}}(),a=String.prototype.trim?function(e){return String.prototype.trim.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function i(e,t){return Array.prototype.slice.call(e,t||0)}function l(e,t){u(e,(function(e,n){t(e,n)}))}function u(e,t){if(s(e)){for(var n=0;n<e.length;n++)if(t(e[n],n))return e[n]}else for(var r in e)if(e.hasOwnProperty(r)&&t(e[r],r))return e[r]}function s(e){return null!=e&&"function"!=typeof e&&"number"==typeof e.length}n="undefined"!=typeof window?window:n.g,e.exports={assign:r,create:o,trim:a,bind:function(e,t){return function(){return t.apply(e,Array.prototype.slice.call(arguments,0))}},slice:i,each:l,map:function(e,t){var n=s(e)?[]:{};return u(e,(function(e,r){n[r]=t(e,r)})),n},pluck:u,isList:s,isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)},isObject:function(e){return e&&"[object Object]"==={}.toString.call(e)},Global:n}},39015:(e,t,n)=>{e.exports=[n(39627),n(95347),n(34524),n(45580),n(58855),n(8728)]},45580:(e,t,n)=>{var r=(n=n(69078)).Global,o=n.trim,a=(e.exports={name:"cookieStorage",read:function(e){return e&&u(e)?(e="(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*",unescape(a.cookie.replace(new RegExp(e),"$1"))):null},write:function(e,t){e&&(a.cookie=escape(e)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")},each:i,remove:l,clearAll:function(){i((function(e,t){l(t)}))}},r.document);function i(e){for(var t,n,r=a.cookie.split(/; ?/g),i=r.length-1;0<=i;i--)o(r[i])&&(t=r[i].split("="),n=unescape(t[0]),e(unescape(t[1]),n))}function l(e){e&&u(e)&&(a.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function u(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(a.cookie)}},39627:(e,t,n)=>{var r=n(69078).Global;function o(){return r.localStorage}function a(e){return o().getItem(e)}e.exports={name:"localStorage",read:a,write:function(e,t){return o().setItem(e,t)},each:function(e){for(var t=o().length-1;0<=t;t--){var n=o().key(t);e(a(n),n)}},remove:function(e){return o().removeItem(e)},clearAll:function(){return o().clear()}}},8728:e=>{e.exports={name:"memoryStorage",read:function(e){return t[e]},write:function(e,n){t[e]=n},each:function(e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)},remove:function(e){delete t[e]},clearAll:function(e){t={}}};var t={}},95347:(e,t,n)=>{n=n(69078).Global;var r=(e.exports={name:"oldFF-globalStorage",read:function(e){return r[e]},write:function(e,t){r[e]=t},each:o,remove:function(e){return r.removeItem(e)},clearAll:function(){o((function(e,t){delete r[e]}))}},n.globalStorage);function o(e){for(var t=r.length-1;0<=t;t--){var n=r.key(t);e(r[n],n)}}},34524:(e,t,n)=>{n=n(69078).Global;var r=(e.exports={name:"oldIE-userDataStorage",write:function(e,t){var n;i||(n=u(e),a((function(e){e.setAttribute(n,t),e.save(r)})))},read:function(e){var t,n;if(!i)return t=u(e),n=null,a((function(e){n=e.getAttribute(t)})),n},each:function(e){a((function(t){for(var n=t.XMLDocument.documentElement.attributes,r=n.length-1;0<=r;r--){var o=n[r];e(t.getAttribute(o.name),o.name)}}))},remove:function(e){var t=u(e);a((function(e){e.removeAttribute(t),e.save(r)}))},clearAll:function(){a((function(e){var t=e.XMLDocument.documentElement.attributes;e.load(r);for(var n=t.length-1;0<=n;n--)e.removeAttribute(t[n].name);e.save(r)}))}},"storejs"),o=n.document,a=function(){if(!o||!o.documentElement||!o.documentElement.addBehavior)return null;var e,t,n;try{(t=new ActiveXObject("htmlfile")).open(),t.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></iframe>'),t.close(),e=t.w.frames[0].document,n=e.createElement("div")}catch(t){n=o.createElement("div"),e=o.body}return function(t){var o=[].slice.call(arguments,0);o.unshift(n),e.appendChild(n),n.addBehavior("#default#userData"),n.load(r),t.apply(this,o),e.removeChild(n)}}(),i=(n.navigator?n.navigator.userAgent:"").match(/ (MSIE 8|MSIE 9|MSIE 10)\./),l=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function u(e){return e.replace(/^\d/,"___$&").replace(l,"___")}},58855:(e,t,n)=>{var r=n(69078).Global;function o(){return r.sessionStorage}function a(e){return o().getItem(e)}e.exports={name:"sessionStorage",read:a,write:function(e,t){return o().setItem(e,t)},each:function(e){for(var t=o().length-1;0<=t;t--){var n=o().key(t);e(a(n),n)}},remove:function(e){return o().removeItem(e)},clearAll:function(){return o().clear()}}},28571:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s}),t=n(93379),t=n.n(t);var r=n(7795),o=(r=n.n(r),n(90569)),a=(o=n.n(o),n(3565)),i=(a=n.n(a),n(19216)),l=(i=n.n(i),n(44589)),u=(l=n.n(l),n=n(5790),{});u.styleTagTransform=l(),u.setAttributes=a(),u.insert=o().bind(null,"head"),u.domAPI=r(),u.insertStyleElement=i(),t()(n.Z,u);const s=n.Z&&n.Z.locals?n.Z.locals:void 0},65958:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s}),t=n(93379),t=n.n(t);var r=n(7795),o=(r=n.n(r),n(90569)),a=(o=n.n(o),n(3565)),i=(a=n.n(a),n(19216)),l=(i=n.n(i),n(44589)),u=(l=n.n(l),n=n(88383),{});u.styleTagTransform=l(),u.setAttributes=a(),u.insert=o().bind(null,"head"),u.domAPI=r(),u.insertStyleElement=i(),t()(n.Z,u);const s=n.Z&&n.Z.locals?n.Z.locals:void 0},93379:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var o={},a=[],i=0;i<e.length;i++){var l=e[i],u=o[c=r.base?l[0]+r.base:l[0]]||0,s="".concat(c," ").concat(u),c=(o[c]=u+1,n(s));u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]},-1!==c?(t[c].references++,t[c].updater(u)):(l=function(e,t){var n=t.domAPI(t);return n.update(e),function(t){t?t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer||n.update(e=t):n.remove()}}(u,r),r.byIndex=i,t.splice(i,0,{identifier:s,updater:l,references:1})),a.push(s)}return a}e.exports=function(e,o){var a=r(e=e||[],o=o||{});return function(e){e=e||[];for(var i=0;i<a.length;i++){var l=n(a[i]);t[l].references--}e=r(e,o);for(var u=0;u<a.length;u++){var s=n(a[u]);0===t[s].references&&(t[s].updater(),t.splice(s,1))}a=e}}},90569:e=>{"use strict";var t={};e.exports=function(e,n){if(!(e=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e)))throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");e.appendChild(n)}},19216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){var r,o,a,i;r=t,o=e,a="",n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {")),(i=void 0!==n.layer)&&(a+="@layer".concat(0<n.layer.length?" ".concat(n.layer):""," {")),a+=n.css,i&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}"),(i=n.sourceMap)&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),o.styleTagTransform(a,r,o.options)},remove:function(){var e;null!==(e=t).parentNode&&e.parentNode.removeChild(e)}}}},44589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},26018:e=>{"use strict";e.exports=function(e,t){if(!e)throw new Error("Invariant failed")}},87641:e=>{"use strict";e.exports=function(e,t){}},21614:(e,t,n)=>{"use strict";n.r(t),n.d(t,{NIL:()=>x,parse:()=>y,stringify:()=>d,v1:()=>m,v3:()=>E,v4:()=>P,v5:()=>j,validate:()=>l,version:()=>M});var r,o=new Uint8Array(16);function a(){if(r=r||"undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto))return r(o);throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")}const i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,l=function(e){return"string"==typeof e&&i.test(e)};for(var u,s,c=[],f=0;f<256;++f)c.push((f+256).toString(16).substr(1));const d=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(e=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase(),l(e))return e;throw TypeError("Stringified UUID is invalid")};var p=0,h=0;const m=function(e,t,n){var r=t&&n||0,o=t||new Array(16),i=(e=e||{}).node||u,l=(n=void 0!==e.clockseq?e.clockseq:s,null!=i&&null!=n||(l=e.random||(e.rng||a)(),null==i&&(i=u=[1|l[0],l[1],l[2],l[3],l[4],l[5]]),null==n&&(n=s=16383&(l[6]<<8|l[7]))),void 0!==e.msecs?e.msecs:Date.now()),c=void 0!==e.nsecs?e.nsecs:h+1,f=l-p+(c-h)/1e4;if(f<0&&void 0===e.clockseq&&(n=n+1&16383),1e4<=(c=(f<0||p<l)&&void 0===e.nsecs?0:c))throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=l,s=n,f=(1e4*(268435455&(l+=122192928e5))+(h=c))%4294967296,o[r++]=f>>>24&255,o[r++]=f>>>16&255,o[r++]=f>>>8&255,o[r++]=255&f,e=l/4294967296*1e4&268435455,o[r++]=e>>>8&255,o[r++]=255&e,o[r++]=e>>>24&15|16,o[r++]=e>>>16&255,o[r++]=n>>>8|128,o[r++]=255&n;for(var m=0;m<6;++m)o[r+m]=i[m];return t||d(o)},y=function(e){if(!l(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};function g(e,t,n){function r(e,r,o,a){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),16!==(r="string"==typeof r?y(r):r).length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var i=new Uint8Array(16+e.length);if(i.set(r),i.set(e,r.length),(i=n(i))[6]=15&i[6]|t,i[8]=63&i[8]|128,o){a=a||0;for(var l=0;l<16;++l)o[a+l]=i[l];return o}return d(i)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function b(e){return 14+(e+64>>>9<<4)+1}function v(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function w(e,t,n,r,o,a){return v((t=v(v(t,e),v(r,a)))<<o|t>>>32-o,n)}function O(e,t,n,r,o,a,i){return w(t&n|~t&r,e,t,o,a,i)}function S(e,t,n,r,o,a,i){return w(t&r|n&~r,e,t,o,a,i)}function _(e,t,n,r,o,a,i){return w(t^n^r,e,t,o,a,i)}function C(e,t,n,r,o,a,i){return w(n^(t|~r),e,t,o,a,i)}const E=g("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}for(var r=function(e,t){e[t>>5]|=128<<t%32,e[b(t)-1]=t;for(var n=1732584193,r=-271733879,o=-1732584194,a=271733878,i=0;i<e.length;i+=16){var l=n,u=r,s=o,c=a;n=O(n,r,o,a,e[i],7,-680876936),a=O(a,n,r,o,e[i+1],12,-389564586),o=O(o,a,n,r,e[i+2],17,606105819),r=O(r,o,a,n,e[i+3],22,-1044525330),n=O(n,r,o,a,e[i+4],7,-176418897),a=O(a,n,r,o,e[i+5],12,1200080426),o=O(o,a,n,r,e[i+6],17,-1473231341),r=O(r,o,a,n,e[i+7],22,-45705983),n=O(n,r,o,a,e[i+8],7,1770035416),a=O(a,n,r,o,e[i+9],12,-1958414417),o=O(o,a,n,r,e[i+10],17,-42063),r=O(r,o,a,n,e[i+11],22,-1990404162),n=O(n,r,o,a,e[i+12],7,1804603682),a=O(a,n,r,o,e[i+13],12,-40341101),o=O(o,a,n,r,e[i+14],17,-1502002290),n=S(n,r=O(r,o,a,n,e[i+15],22,1236535329),o,a,e[i+1],5,-165796510),a=S(a,n,r,o,e[i+6],9,-1069501632),o=S(o,a,n,r,e[i+11],14,643717713),r=S(r,o,a,n,e[i],20,-373897302),n=S(n,r,o,a,e[i+5],5,-701558691),a=S(a,n,r,o,e[i+10],9,38016083),o=S(o,a,n,r,e[i+15],14,-660478335),r=S(r,o,a,n,e[i+4],20,-405537848),n=S(n,r,o,a,e[i+9],5,568446438),a=S(a,n,r,o,e[i+14],9,-1019803690),o=S(o,a,n,r,e[i+3],14,-187363961),r=S(r,o,a,n,e[i+8],20,1163531501),n=S(n,r,o,a,e[i+13],5,-1444681467),a=S(a,n,r,o,e[i+2],9,-51403784),o=S(o,a,n,r,e[i+7],14,1735328473),n=_(n,r=S(r,o,a,n,e[i+12],20,-1926607734),o,a,e[i+5],4,-378558),a=_(a,n,r,o,e[i+8],11,-2022574463),o=_(o,a,n,r,e[i+11],16,1839030562),r=_(r,o,a,n,e[i+14],23,-35309556),n=_(n,r,o,a,e[i+1],4,-1530992060),a=_(a,n,r,o,e[i+4],11,1272893353),o=_(o,a,n,r,e[i+7],16,-155497632),r=_(r,o,a,n,e[i+10],23,-1094730640),n=_(n,r,o,a,e[i+13],4,681279174),a=_(a,n,r,o,e[i],11,-358537222),o=_(o,a,n,r,e[i+3],16,-722521979),r=_(r,o,a,n,e[i+6],23,76029189),n=_(n,r,o,a,e[i+9],4,-640364487),a=_(a,n,r,o,e[i+12],11,-421815835),o=_(o,a,n,r,e[i+15],16,530742520),n=C(n,r=_(r,o,a,n,e[i+2],23,-995338651),o,a,e[i],6,-198630844),a=C(a,n,r,o,e[i+7],10,1126891415),o=C(o,a,n,r,e[i+14],15,-1416354905),r=C(r,o,a,n,e[i+5],21,-57434055),n=C(n,r,o,a,e[i+12],6,1700485571),a=C(a,n,r,o,e[i+3],10,-1894986606),o=C(o,a,n,r,e[i+10],15,-1051523),r=C(r,o,a,n,e[i+1],21,-2054922799),n=C(n,r,o,a,e[i+8],6,1873313359),a=C(a,n,r,o,e[i+15],10,-30611744),o=C(o,a,n,r,e[i+6],15,-1560198380),r=C(r,o,a,n,e[i+13],21,1309151649),n=C(n,r,o,a,e[i+4],6,-145523070),a=C(a,n,r,o,e[i+11],10,-1120210379),o=C(o,a,n,r,e[i+2],15,718787259),r=C(r,o,a,n,e[i+9],21,-343485551),n=v(n,l),r=v(r,u),o=v(o,s),a=v(a,c)}return[n,r,o,a]}(function(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(b(t)),r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length),o=[],a=32*r.length,i="0123456789abcdef",l=0;l<a;l+=8){var u=r[l>>5]>>>l%32&255;u=parseInt(i.charAt(u>>>4&15)+i.charAt(15&u),16),o.push(u)}return o})),P=function(e,t,n){var r=(e=e||{}).random||(e.rng||a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return d(r)};function k(e,t){return e<<t|e>>>32-t}const j=g("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=[];for(var o=0;o<r.length;++o)e.push(r.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var a=e.length/4+2,i=Math.ceil(a/16),l=new Array(i),u=0;u<i;++u){for(var s=new Uint32Array(16),c=0;c<16;++c)s[c]=e[64*u+4*c]<<24|e[64*u+4*c+1]<<16|e[64*u+4*c+2]<<8|e[64*u+4*c+3];l[u]=s}l[i-1][14]=8*(e.length-1)/Math.pow(2,32),l[i-1][14]=Math.floor(l[i-1][14]),l[i-1][15]=8*(e.length-1)&4294967295;for(var f=0;f<i;++f){for(var d=new Uint32Array(80),p=0;p<16;++p)d[p]=l[f][p];for(var h=16;h<80;++h)d[h]=k(d[h-3]^d[h-8]^d[h-14]^d[h-16],1);for(var m=n[0],y=n[1],g=n[2],b=n[3],v=n[4],w=0;w<80;++w){var O=Math.floor(w/20);O=k(m,5)+function(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}(O,y,g,b)+v+t[O]+d[w]>>>0,v=b,b=g,g=k(y,30)>>>0,y=m,m=O}n[0]=n[0]+m>>>0,n[1]=n[1]+y>>>0,n[2]=n[2]+g>>>0,n[3]=n[3]+b>>>0,n[4]=n[4]+v>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]})),x="00000000-0000-0000-0000-000000000000",M=function(e){if(l(e))return parseInt(e.substr(14,1),16);throw TypeError("Invalid UUID")}},37307:e=>{"use strict";function t(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}e.exports=function e(n,r){if(n===r)return!0;if(null==n||null==r)return!1;if(Array.isArray(n))return Array.isArray(r)&&n.length===r.length&&n.every((function(t,n){return e(t,r[n])}));if("object"!=typeof n&&"object"!=typeof r)return!1;var o=t(n),a=t(r);return o!==n||a!==r?e(o,a):Object.keys(Object.assign({},n,r)).every((function(t){return e(n[t],r[t])}))}},54545:(e,t,n)=>{"use strict";e.exports=n(37307)},94795:function(e,t,n){var r;!function(t){"use strict";function o(){}var a=o.prototype,i=t.EventEmitter;function l(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function u(e){return function(){return this[e].apply(this,arguments)}}a.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp)for(n in t={},r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n]);else t=r[e]||(r[e]=[]);return t},a.flattenListeners=function(e){for(var t=[],n=0;n<e.length;n+=1)t.push(e[n].listener);return t},a.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},a.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(e),o="object"==typeof t;for(n in r)r.hasOwnProperty(n)&&-1===l(r[n],t)&&r[n].push(o?t:{listener:t,once:!1});return this},a.on=u("addListener"),a.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},a.once=u("addOnceListener"),a.defineEvent=function(e){return this.getListeners(e),this},a.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},a.removeListener=function(e,t){var n,r,o=this.getListenersAsObject(e);for(r in o)o.hasOwnProperty(r)&&-1!==(n=l(o[r],t))&&o[r].splice(n,1);return this},a.off=u("removeListener"),a.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},a.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},a.manipulateListeners=function(e,t,n){var r,o,a=e?this.removeListener:this.addListener,i=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)a.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(o=t[r])&&("function"==typeof o?a:i).call(this,r,o);return this},a.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"==n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},a.removeAllListeners=u("removeEvent"),a.emitEvent=function(e,t){var n,r,o,a,i=this.getListenersAsObject(e);for(a in i)if(i.hasOwnProperty(a))for(n=i[a].slice(0),o=0;o<n.length;o++)!0===(r=n[o]).once&&this.removeListener(e,r.listener),r.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},a.trigger=u("emitEvent"),a.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},a.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},a._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},a._getEvents=function(){return this._events||(this._events={})},o.noConflict=function(){return t.EventEmitter=i,o},void 0!==(r=function(){return o}.call(t,n,t,e))&&(e.exports=r)}("undefined"!=typeof window?window:this||{})},8738:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC"},49520:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Dexie:()=>xn,RangeSet:()=>On,default:()=>xn,liveQuery:()=>In,mergeRanges:()=>_n,rangesOverlap:()=>Cn});const r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,o=Object.keys,a=Array.isArray;function i(e,t){return"object"==typeof t&&o(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||r.Promise||(r.Promise=Promise);const l=Object.getPrototypeOf,u={}.hasOwnProperty;function s(e,t){return u.call(e,t)}function c(e,t){"function"==typeof t&&(t=t(l(e))),("undefined"==typeof Reflect?o:Reflect.ownKeys)(t).forEach((n=>{d(e,n,t[n])}))}const f=Object.defineProperty;function d(e,t,n,r){f(e,t,i(n&&s(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function p(e){return{from:function(t){return e.prototype=Object.create(t.prototype),d(e.prototype,"constructor",e),{extend:c.bind(null,e.prototype)}}}}const h=Object.getOwnPropertyDescriptor;function m(e,t){return h(e,t)||(e=l(e))&&m(e,t)}const y=[].slice;function g(e,t,n){return y.call(e,t,n)}function b(e,t){return t(e)}function v(e){if(!e)throw new Error("Assertion Failed")}function w(e){r.setImmediate?setImmediate(e):setTimeout(e,0)}function O(e,t){return e.reduce(((e,n,r)=>((n=t(n,r))&&(e[n[0]]=n[1]),e)),{})}function S(e,t){if(s(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,o=t.length;r<o;++r){var a=S(e,t[r]);n.push(a)}return n}var i,l=t.indexOf(".");return-1===l||void 0===(i=e[t.substr(0,l)])?void 0:S(i,t.substr(l+1))}function _(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){v("string"!=typeof n&&"length"in n);for(var r=0,o=t.length;r<o;++r)_(e,t[r],n[r])}else{var i,l=t.indexOf(".");-1!==l?(i=t.substr(0,l),""===(l=t.substr(l+1))?void 0===n?a(e)&&!isNaN(parseInt(i))?e.splice(i,1):delete e[i]:e[i]=n:_(e[i]||(e[i]={}),l,n)):void 0===n?a(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function C(e){var t,n={};for(t in e)s(e,t)&&(n[t]=e[t]);return n}const E=[].concat;function P(e){return E.apply([],e)}const k="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(P([8,16,32,64].map((e=>["Int","Uint","Float"].map((t=>t+e+"Array")))))).filter((e=>r[e])),j=k.map((e=>r[e]));O(k,(e=>[e,!0]));let x=null;function M(e){return x="undefined"!=typeof WeakMap&&new WeakMap,e=function e(t){if(!t||"object"!=typeof t)return t;let n=x&&x.get(t);if(n)return n;if(a(t)){n=[],x&&x.set(t,n);for(var r=0,o=t.length;r<o;++r)n.push(e(t[r]))}else if(0<=j.indexOf(t.constructor))n=t;else{const r=l(t);for(var i in n=r===Object.prototype?{}:Object.create(r),x&&x.set(t,n),t)s(t,i)&&(n[i]=e(t[i]))}return n}(e),x=null,e}const T={}.toString;function I(e){return T.call(e).slice(8,-1)}const D="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",A="symbol"==typeof D?function(e){var t;return null!=e&&(t=e[D])&&t.apply(e)}:function(){return null},R={};function N(e){var t,n,r,o;if(1===arguments.length){if(a(e))return e.slice();if(this===R&&"string"==typeof e)return[e];if(o=A(e)){for(n=[];!(r=o.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"!=typeof(t=e.length))return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const B="undefined"!=typeof Symbol?e=>"AsyncFunction"===e[Symbol.toStringTag]:()=>!1;var L="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function F(e,t){L=e,U=t}var U=()=>!0;const z=!new Error("").stack;function W(){if(z)try{throw new Error}catch(e){return e}return new Error}function H(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(U).map((e=>"\n"+e)).join("")):""}t=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(n=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"]);var V={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function G(e,t){this._e=W(),this.name=e,this.message=t}function q(e,t){return e+". Errors: "+Object.keys(t).map((e=>t[e].toString())).filter(((e,t,n)=>n.indexOf(e)===t)).join("\n")}function $(e,t,n,r){this._e=W(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=q(e,t)}function K(e,t){this._e=W(),this.name="BulkError",this.failures=Object.keys(t).map((e=>t[e])),this.failuresByPos=t,this.message=q(e,t)}p(G).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+H(this._e,2))}},toString:function(){return this.name+": "+this.message}}),p($).from(G),p(K).from(G);var Y=t.reduce(((e,t)=>(e[t]=t+"Error",e)),{});const J=G;var X=t.reduce(((e,t)=>{var n=t+"Error";function r(e,r){this._e=W(),this.name=n,e?"string"==typeof e?(this.message=e+(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=V[t]||n,this.inner=null)}return p(r).from(J),e[t]=r,e}),{}),Q=(X.Syntax=SyntaxError,X.Type=TypeError,X.Range=RangeError,n.reduce(((e,t)=>(e[t+"Error"]=X[t],e)),{}));function Z(){}function ee(e){return e}function te(e,t){return null==e||e===ee?t:function(n){return t(e(n))}}function ne(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function re(e,t){return e===Z?t:function(){var n=e.apply(this,arguments),r=(void 0!==n&&(arguments[0]=n),this.onsuccess),o=this.onerror,a=(this.onsuccess=null,this.onerror=null,t.apply(this,arguments));return r&&(this.onsuccess=this.onsuccess?ne(r,this.onsuccess):r),o&&(this.onerror=this.onerror?ne(o,this.onerror):o),void 0!==a?a:n}}function oe(e,t){return e===Z?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ne(n,this.onsuccess):n),r&&(this.onerror=this.onerror?ne(r,this.onerror):r)}}function ae(e,t){return e===Z?t:function(n){var r=e.apply(this,arguments),o=(i(n,r),n=this.onsuccess,this.onerror),a=(this.onsuccess=null,this.onerror=null,t.apply(this,arguments));return n&&(this.onsuccess=this.onsuccess?ne(n,this.onsuccess):n),o&&(this.onerror=this.onerror?ne(o,this.onerror):o),void 0===r?void 0===a?void 0:a:i(r,a)}}function ie(e,t){return e===Z?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function le(e,t){return e===Z?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,o=arguments.length,a=new Array(o);o--;)a[o]=arguments[o];return n.then((function(){return t.apply(r,a)}))}return t.apply(this,arguments)}}n=t.reduce(((e,t)=>(-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=X[t]),e)),{}),n.ModifyError=$,n.DexieError=G,n.BulkError=K;var ue={};const[se,ce,fe]="undefined"==typeof Promise?[]:(()=>{var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,l(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,l(t),e]})(),de=ce&&ce.then,pe=se&&se.constructor,he=!!fe;var me=!1,ye=fe?()=>{fe.then(Be)}:r.setImmediate?setImmediate.bind(null,Be):r.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver((()=>{Be(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(Be,0)},ge=function(e,t){Pe.push([e,t]),ve&&(ye(),ve=!1)},be=!0,ve=!0,we=[],Oe=[],Se=null,_e=ee,Ce={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:it,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((e=>{try{it(e[0],e[1])}catch(e){}}))}},Ee=Ce,Pe=[],ke=0,je=[];function xe(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Z,this._lib=!1;var t=this._PSD=Ee;if(L&&(this._stackHolder=W(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==ue)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Ie(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,n){try{n((n=>{if(null===t._state){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Le();n&&"function"==typeof n.then?e(t,((e,t)=>{n instanceof xe?n._then(e,t):n.then(e,t)})):(t._state=!0,t._value=n,De(t)),r&&Fe()}}),Ie.bind(null,t))}catch(n){Ie(t,n)}}(this,e)}const Me={get:function(){var e=Ee,t=$e;function n(n,r){var o=!e.global&&(e!==Ee||t!==$e);const a=o&&!Xe();var i=new xe(((t,i)=>{Ae(this,new Te(ot(n,e,o,a),ot(r,e,o,a),t,i,e))}));return L&&Ne(i,this),i}return n.prototype=ue,n},set:function(e){d(this,"then",e&&e.prototype===ue?Me:{get:function(){return e},set:Me.set})}};function Te(e,t,n,r,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=o}function Ie(e,t){if(Oe.push(t),null===e._state){var n=e._lib&&Le();if(t=_e(t),e._state=!1,e._value=t,L&&null!==t&&"object"==typeof t&&!t._promise)try{(()=>{var n=m(t,"stack");t._promise=e,d(t,"stack",{get:()=>me?n&&(n.get?n.get.apply(t):n.value):e.stack})}).apply(null,void 0)}catch(n){}r=e,we.some((e=>e._value===r._value))||we.push(r),De(e),n&&Fe()}var r}function De(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Ae(e,t[n]);var o=e._PSD;--o.ref||o.finalize(),0===ke&&(++ke,ge((()=>{0==--ke&&Ue()}),[]))}function Ae(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++ke,ge(Re,[n,e,t])}else e._listeners.push(t)}function Re(e,t,n){try{var r,o=(Se=t)._value;t._state?r=e(o):(Oe.length&&(Oe=[]),r=e(o),-1===Oe.indexOf(o)&&function(e){for(var t=we.length;t;)if(we[--t]._value===e._value)return we.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{Se=null,0==--ke&&Ue(),--n.psd.ref||n.psd.finalize()}}function Ne(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function Be(){Le()&&Fe()}function Le(){var e=be;return ve=be=!1,e}function Fe(){var e,t,n;do{for(;0<Pe.length;)for(e=Pe,Pe=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(0<Pe.length);ve=be=!0}function Ue(){var e=we;we=[],e.forEach((e=>{e._PSD.onunhandled.call(null,e._value,e)}));for(var t=je.slice(0),n=t.length;n;)t[--n]()}function ze(e){return new xe(ue,!1,e)}function We(e,t){var n=Ee;return function(){var r=Le(),o=Ee;try{return et(n,!0),e.apply(this,arguments)}catch(r){t&&t(r)}finally{et(o,!1),r&&Fe()}}}c(xe.prototype,{then:Me,_then:function(e,t){Ae(this,new Te(null,null,e,t,Ee))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=e,n=arguments[1];return"function"==typeof t?this.then(null,(e=>(e instanceof t?n:ze)(e))):this.then(null,(e=>(e&&e.name===t?n:ze)(e)))},finally:function(e){return this.then((t=>(e(),t)),(t=>(e(),ze(t))))},stack:{get:function(){if(this._stack)return this._stack;try{me=!0;var e=function e(t,n,r){if(n.length===r)return n;var o,a,i,l="";return!1===t._state&&(null!=(i=t._value)?(o=i.name||"Error",a=i.message||i,l=H(i,0)):(o=i,a=""),n.push(o+(a?": "+a:"")+l)),L&&((l=H(t._stackHolder,2))&&-1===n.indexOf(l)&&n.push(l),t._prev&&e(t._prev,n,r)),n}(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{me=!1}}},timeout:function(e,t){return e<1/0?new xe(((n,r)=>{var o=setTimeout((()=>r(new X.Timeout(t))),e);this.then(n,r).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&d(xe.prototype,Symbol.toStringTag,"Dexie.Promise"),Ce.env=tt(),c(xe,{all:function(){var e=N.apply(null,arguments).map(Qe);return new xe((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(((o,a)=>xe.resolve(o).then((n=>{e[a]=n,--r||t(e)}),n)))}))},resolve:e=>{if(e instanceof xe)return e;if(e&&"function"==typeof e.then)return new xe(((t,n)=>{e.then(t,n)}));var t=new xe(ue,!0,e);return Ne(t,Se),t},reject:ze,race:function(){var e=N.apply(null,arguments).map(Qe);return new xe(((t,n)=>{e.map((e=>xe.resolve(e).then(t,n)))}))},PSD:{get:()=>Ee,set:e=>Ee=e},totalEchoes:{get:()=>$e},newPSD:Ye,usePSD:nt,scheduler:{get:()=>ge,set:e=>{ge=e}},rejectionMapper:{get:()=>_e,set:e=>{_e=e}},follow:(e,t)=>new xe(((n,r)=>Ye(((t,n)=>{var r=Ee;r.unhandleds=[],r.onunhandled=n,r.finalize=ne((function(){var e;e=()=>{0===this.unhandleds.length?t():n(this.unhandleds[0])},je.push((function t(){e(),je.splice(je.indexOf(t),1)})),++ke,ge((()=>{0==--ke&&Ue()}),[])}),r.finalize),e()}),t,n,r)))}),pe&&(pe.allSettled&&d(xe,"allSettled",(function(){const e=N.apply(null,arguments).map(Qe);return new xe((t=>{0===e.length&&t([]);let n=e.length;const r=new Array(n);e.forEach(((e,o)=>xe.resolve(e).then((e=>r[o]={status:"fulfilled",value:e}),(e=>r[o]={status:"rejected",reason:e})).then((()=>--n||t(r)))))}))})),pe.any&&"undefined"!=typeof AggregateError&&d(xe,"any",(function(){const e=N.apply(null,arguments).map(Qe);return new xe(((t,n)=>{0===e.length&&n(new AggregateError([]));let r=e.length;const o=new Array(r);e.forEach(((e,a)=>xe.resolve(e).then((e=>t(e)),(e=>{o[a]=e,--r||n(new AggregateError(o))}))))}))})));const He={awaits:0,echoes:0,id:0};var Ve=0,Ge=[],qe=0,$e=0,Ke=0;function Ye(e,t,n,r){var o=Ee,a=Object.create(o),l=(a.parent=o,a.ref=0,a.global=!1,a.id=++Ke,Ce.env);return a.env=he?{Promise:xe,PromiseProp:{value:xe,configurable:!0,writable:!0},all:xe.all,race:xe.race,allSettled:xe.allSettled,any:xe.any,resolve:xe.resolve,reject:xe.reject,nthen:at(l.nthen,a),gthen:at(l.gthen,a)}:{},t&&i(a,t),++o.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()},l=nt(a,e,n,r),0===a.ref&&a.finalize(),l}function Je(){return He.id||(He.id=++Ve),++He.awaits,He.echoes+=100,He.id}function Xe(){return!!He.awaits&&(0==--He.awaits&&(He.id=0),He.echoes=100*He.awaits,!0)}function Qe(e){return He.echoes&&e&&e.constructor===pe?(Je(),e.then((e=>(Xe(),e)),(e=>(Xe(),lt(e))))):e}function Ze(){var e=Ge[Ge.length-1];Ge.pop(),et(e,!1)}function et(e,t){var n,o=Ee;(t?!He.echoes||qe++&&e===Ee:!qe||--qe&&e===Ee)||rt(t?function(e){++$e,He.echoes&&0!=--He.echoes||(He.echoes=He.id=0),Ge.push(Ee),et(e,!0)}.bind(null,e):Ze),e!==Ee&&(Ee=e,o===Ce&&(Ce.env=tt()),he)&&(t=Ce.env.Promise,n=e.env,ce.then=n.nthen,t.prototype.then=n.gthen,(o.global||e.global)&&(Object.defineProperty(r,"Promise",n.PromiseProp),t.all=n.all,t.race=n.race,t.resolve=n.resolve,t.reject=n.reject,n.allSettled&&(t.allSettled=n.allSettled),n.any&&(t.any=n.any)))}function tt(){var e=r.Promise;return he?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(r,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:ce.then,gthen:e.prototype.then}:{}}function nt(e,t,n,r,o){var a=Ee;try{return et(e,!0),t(n,r,o)}finally{et(a,!1)}}function rt(e){de.call(se,e)}function ot(e,t,n,r){return"function"!=typeof e?e:function(){var o=Ee;n&&Je(),et(t,!0);try{return e.apply(this,arguments)}finally{et(o,!1),r&&rt(Xe)}}}function at(e,t){return function(n,r){return e.call(this,ot(n,t),ot(r,t))}}function it(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var o,a={promise:t,reason:e};if(r.document&&document.createEvent?((o=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),i(o,a)):r.CustomEvent&&i(o=new CustomEvent("unhandledrejection",{detail:a}),a),o&&r.dispatchEvent&&(dispatchEvent(o),!r.PromiseRejectionEvent&&r.onunhandledrejection))try{r.onunhandledrejection(o)}catch(e){}L&&o&&!o.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}-1===(""+de).indexOf("[native code]")&&(Je=Xe=Z);var lt=xe.reject;const ut=String.fromCharCode(65535),st="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ct=[],ft="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),dt=ft,pt=ft,ht=e=>!/(dexie\.js|dexie\.min\.js)/.test(e);function mt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const yt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function gt(e){return"string"!=typeof e||/\./.test(e)?e=>e:t=>(void 0===t[e]&&e in t&&delete(t=M(t))[e],t)}class bt{_trans(e,t,n){const r=this._tx||Ee.trans,o=this.name;function a(e,n,r){if(r.schema[o])return t(r.idbtrans,r);throw new X.NotFound("Table "+o+" not part of transaction")}var i=Le();try{return r&&r.db===this.db?r===Ee.trans?r._promise(e,a,n):Ye((()=>r._promise(e,a,n)),{trans:r,transless:Ee.transless||Ee}):function e(t,n,r,o){if(t.idbdb&&(t._state.openComplete||Ee.letThrough||t._vip)){var a=t._createTransaction(n,r,t._dbSchema);try{a.create(),t._state.PR1398_maxLoop=3}catch(a){return a.name===Y.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then((()=>e(t,n,r,o)))):lt(a)}return a._promise(n,((e,t)=>Ye((()=>(Ee.trans=a,o(e,t,a)))))).then((e=>a._completion.then((()=>e))))}if(t._state.openComplete)return lt(new X.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return lt(new X.DatabaseClosed);t.open().catch(Z)}return t._state.dbReadyPromise.then((()=>e(t,n,r,o)))}(this.db,e,[this.name],a)}finally{i&&Fe()}}get(e,t){return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(t=>this.core.get({trans:t,key:e}).then((e=>this.hook.reading.fire(e))))).then(t)}where(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(a(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const t=o(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);const n=this.schema.indexes.concat(this.schema.primKey).filter((e=>e.compound&&t.every((t=>0<=e.keyPath.indexOf(t)))&&e.keyPath.every((e=>0<=t.indexOf(e)))))[0];if(n&&this.db._maxKey!==ut)return this.where(n.name).equals(n.keyPath.map((t=>e[t])));!n&&L&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${t.join("+")}]`);const r=this.schema.idxByName,i=this.db._deps.indexedDB;function l(e,t){try{return 0===i.cmp(e,t)}catch(e){return!1}}var[u,s]=t.reduce((([t,n],o)=>{const i=r[o],u=e[o];return[t||i,t||!i?mt(n,i&&i.multi?e=>{const t=S(e,o);return a(t)&&t.some((e=>l(u,e)))}:e=>l(u,S(e,o))):n]}),[null,null]);return u?this.where(u.name).equals(e[u.keyPath]).filter(s):n?this.filter(s):this.where(t).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,a(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;var t=t=>{if(!t)return t;const n=Object.create(e.prototype);for(var r in t)if(s(t,r))try{n[r]=t[r]}catch(t){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e}defineClass(){return this.mapToClass((function(e){i(this,e)}))}add(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let o=e;return r&&n&&(o=gt(r)(e)),this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[o]}))).then((e=>e.numFailures?xe.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{_(e,r,t)}catch(t){}return t}))}update(e,t){if("object"!=typeof e||a(e))return this.where(":id").equals(e).modify(t);{const n=S(e,this.schema.primKey.keyPath);if(void 0===n)return lt(new X.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof t?o(t).forEach((n=>{_(e,n,t[n])})):t(e,{value:e,primKey:n})}catch(e){}return this.where(":id").equals(n).modify(t)}}put(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let o=e;return r&&n&&(o=gt(r)(e)),this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"put",values:[o],keys:null!=t?[t]:null}))).then((e=>e.numFailures?xe.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{_(e,r,t)}catch(t){}return t}))}delete(e){return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"delete",keys:[e]}))).then((e=>e.numFailures?xe.reject(e.failures[0]):void 0))}clear(){return this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"deleteRange",range:yt}))).then((e=>e.numFailures?xe.reject(e.failures[0]):void 0))}bulkGet(e){return this._trans("readonly",(t=>this.core.getMany({keys:e,trans:t}).then((e=>e.map((e=>this.hook.reading.fire(e)))))))}bulkAdd(e,t,n){const r=Array.isArray(t)?t:void 0,o=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(t=>{var{auto:n,keyPath:a}=this.schema.primKey;if(a&&r)throw new X.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new X.InvalidArgument("Arguments objects and keys must have the same length");const i=e.length;return n=a&&n?e.map(gt(a)):e,this.core.mutate({trans:t,type:"add",keys:r,values:n,wantResults:o}).then((({numFailures:e,results:t,lastResult:n,failures:r})=>{if(0===e)return o?t:n;throw new K(`${this.name}.bulkAdd(): ${e} of ${i} operations failed`,r)}))}))}bulkPut(e,t,n){const r=Array.isArray(t)?t:void 0,o=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(t=>{var{auto:n,keyPath:a}=this.schema.primKey;if(a&&r)throw new X.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new X.InvalidArgument("Arguments objects and keys must have the same length");const i=e.length;return n=a&&n?e.map(gt(a)):e,this.core.mutate({trans:t,type:"put",keys:r,values:n,wantResults:o}).then((({numFailures:e,results:t,lastResult:n,failures:r})=>{if(0===e)return o?t:n;throw new K(`${this.name}.bulkPut(): ${e} of ${i} operations failed`,r)}))}))}bulkDelete(e){const t=e.length;return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"delete",keys:e}))).then((({numFailures:e,lastResult:n,failures:r})=>{if(0===e)return n;throw new K(`${this.name}.bulkDelete(): ${e} of ${t} operations failed`,r)}))}}function vt(e){function t(t,r){if(r){for(var o=arguments.length,a=new Array(o-1);--o;)a[o-1]=arguments[o];return n[t].subscribe.apply(null,a),e}if("string"==typeof t)return n[t]}var n={};t.addEventType=l;for(var r=1,i=arguments.length;r<i;++r)l(arguments[r]);return t;function l(e,r,i){if("object"!=typeof e){r=r||ie;var u,s={subscribers:[],fire:i=i||Z,subscribe:function(e){-1===s.subscribers.indexOf(e)&&(s.subscribers.push(e),s.fire=r(s.fire,e))},unsubscribe:function(e){s.subscribers=s.subscribers.filter((function(t){return t!==e})),s.fire=s.subscribers.reduce(r,i)}};return n[e]=t[e]=s}o(u=e).forEach((function(e){var t=u[e];if(a(t))l(e,u[e][0],u[e][1]);else{if("asap"!==t)throw new X.InvalidArgument("Invalid event config");var n=l(e,ee,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach((function(e){w((function(){e.apply(null,t)}))}))}))}}))}}function wt(e,t){return p(t).from({prototype:e}),t}function Ot(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function St(e,t){e.filter=mt(e.filter,t)}function _t(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>mt(r(),t()):t,e.justLimit=n&&!r}function Ct(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(n)return n;throw new X.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed")}function Et(e,t,n){var r=Ct(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function Pt(e,t,n,r){const o=e.replayFilter?mt(e.filter,e.replayFilter()):e.filter;if(e.or){const a={},i=(e,n,r)=>{var i,l;o&&!o(n,r,(e=>n.stop(e)),(e=>n.fail(e)))||("[object ArrayBuffer]"==(l=""+(i=n.primaryKey))&&(l=""+new Uint8Array(i)),s(a,l)||(a[l]=!0,t(e,n,r)))};return Promise.all([e.or._iterate(i,n),kt(Et(e,r,n),e.algorithm,i,!e.keysOnly&&e.valueMapper)])}return kt(Et(e,r,n),mt(e.algorithm,o),t,!e.keysOnly&&e.valueMapper)}function kt(e,t,n,r){var o=We(r?(e,t,o)=>n(r(e),t,o):n);return e.then((e=>{if(e)return e.start((()=>{var n=()=>e.continue();t&&!t(e,(e=>n=e),(t=>{e.stop(t),n=Z}),(t=>{e.fail(t),n=Z}))||o(e.value,e,(e=>n=e)),n()}))}))}function jt(e,t){try{var n=xt(e),r=xt(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":var o=Mt(e),a=Mt(t),i=o.length,l=a.length,u=i<l?i:l;for(let e=0;e<u;++e)if(o[e]!==a[e])return o[e]<a[e]?-1:1;return i===l?0:i<l?-1:1;case"Array":{var s=e,c=t;const n=s.length,r=c.length,o=n<r?n:r;for(let e=0;e<o;++e){const t=jt(s[e],c[e]);if(0!==t)return t}return n===r?0:n<r?-1:1}}}catch(e){}return NaN}function xt(e){var t=typeof e;return"object"!=t?t:ArrayBuffer.isView(e)||"ArrayBuffer"===(t=I(e))?"binary":t}function Mt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Tt{_read(e,t){var n=this._ctx;return n.error?n.table._trans(null,lt.bind(null,n.error)):n.table._trans("readonly",e).then(t)}_write(e){var t=this._ctx;return t.error?t.table._trans(null,lt.bind(null,t.error)):t.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var t=this._ctx;t.algorithm=mt(t.algorithm,e)}_iterate(e,t){return Pt(this._ctx,e,t,this._ctx.table.core)}clone(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&i(n,e),t._ctx=n,t}raw(){return this._ctx.valueMapper=null,this}each(e){var t=this._ctx;return this._read((n=>Pt(t,e,n,t.table.core)))}count(e){return this._read((e=>{const t=this._ctx,n=t.table.core;if(Ot(t,!0))return n.count({trans:e,query:{index:Ct(t,n.schema),range:t.range}}).then((e=>Math.min(e,t.limit)));var r=0;return Pt(t,(()=>(++r,!1)),e,n).then((()=>r))})).then(e)}sortBy(e,t){const n=e.split(".").reverse(),r=n[0],o=n.length-1;function a(e,t){return t?a(e[n[t]],t-1):e[r]}var i="next"===this._ctx.dir?1:-1;function l(e,t){return(e=a(e,o))<(t=a(t,o))?-i:t<e?i:0}return this.toArray((function(e){return e.sort(l)})).then(t)}toArray(e){return this._read((e=>{var t=this._ctx;if("next"===t.dir&&Ot(t,!0)&&0<t.limit){const n=t.valueMapper,r=Ct(t,t.table.core.schema);return t.table.core.query({trans:e,limit:t.limit,values:!0,query:{index:r,range:t.range}}).then((({result:e})=>n?e.map(n):e))}{const n=[];return Pt(t,(e=>n.push(e)),e,t.table.core).then((()=>n))}}),e)}offset(e){var t=this._ctx;return e<=0||(t.offset+=e,Ot(t)?_t(t,(()=>{var t=e;return(e,n)=>0===t||(1===t?--t:n((()=>{e.advance(t),t=0})),!1)})):_t(t,(()=>{var t=e;return()=>--t<0}))),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),_t(this._ctx,(()=>{var t=e;return function(e,n,r){return--t<=0&&n(r),0<=t}}),!0),this}until(e,t){return St(this._ctx,(function(n,r,o){return!e(n.value)||(r(o),t)})),this}first(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)}last(e){return this.reverse().first(e)}filter(e){var t;return St(this._ctx,(function(t){return e(t.value)})),(t=this._ctx).isMatch=mt(t.isMatch,e),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))}keys(e){var t=this._ctx,n=(t.keysOnly=!t.isMatch,[]);return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)}primaryKeys(e){var t=this._ctx;if("next"===t.dir&&Ot(t,!0)&&0<t.limit)return this._read((e=>{var n=Ct(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((({result:e})=>e)).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys((function(e){return e[0]})).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e;if(!(e=(e=this._ctx).index&&e.table.schema.idxByName[e.index])||!e.multi)return this;var t={};return St(this._ctx,(function(e){e=e.primaryKey.toString();var n=s(t,e);return t[e]=!0,!n})),this}modify(e){var t=this._ctx;return this._write((n=>{var r,a,i;i="function"==typeof e?e:(r=o(e),a=r.length,function(t){for(var n=!1,o=0;o<a;++o){var i=r[o],l=e[i];S(t,i)!==l&&(_(t,i,l),n=!0)}return n});const l=t.table.core,{outbound:u,extractKey:s}=l.schema.primaryKey,c=this.db._options.modifyChunkSize||200,f=[];let d=0;const p=[],h=(e,t)=>{var n,{failures:r,numFailures:t}=t;for(n of(d+=e-t,o(r)))f.push(r[n])};return this.clone().primaryKeys().then((r=>{const o=a=>{const f=Math.min(c,r.length-a);return l.getMany({trans:n,keys:r.slice(a,a+f),cache:"immutable"}).then((d=>{const p=[],m=[],y=u?[]:null,g=[];for(let e=0;e<f;++e){const t=d[e],n={value:M(t),primKey:r[a+e]};!1!==i.call(n,n.value,n)&&(null==n.value?g.push(r[a+e]):u||0===jt(s(t),s(n.value))?(m.push(n.value),u&&y.push(r[a+e])):(g.push(r[a+e]),p.push(n.value)))}const b=Ot(t)&&t.limit===1/0&&("function"!=typeof e||e===It)&&{index:t.index,range:t.range};return Promise.resolve(0<p.length&&l.mutate({trans:n,type:"add",values:p}).then((e=>{for(var t in e.failures)g.splice(parseInt(t),1);h(p.length,e)}))).then((()=>(0<m.length||b&&"object"==typeof e)&&l.mutate({trans:n,type:"put",keys:y,values:m,criteria:b,changeSpec:"function"!=typeof e&&e}).then((e=>h(m.length,e))))).then((()=>(0<g.length||b&&e===It)&&l.mutate({trans:n,type:"delete",keys:g,criteria:b}).then((e=>h(g.length,e))))).then((()=>r.length>a+f&&o(a+c)))}))};return o(0).then((()=>{if(0<f.length)throw new $("Error modifying one or more objects",f,d,p);return r.length}))}))}))}delete(){var e=this._ctx,t=e.range;return Ot(e)&&(e.isPrimKey&&!pt||3===t.type)?this._write((n=>{const r=e.table.core.schema.primaryKey,o=t;return e.table.core.count({trans:n,query:{index:r,range:o}}).then((t=>e.table.core.mutate({trans:n,type:"deleteRange",range:o}).then((({failures:e,numFailures:n})=>{if(n)throw new $("Could not delete some values",Object.keys(e).map((t=>e[t])),t-n);return t-n}))))})):this.modify(It)}}const It=(e,t)=>t.value=null;function Dt(e,t){return e<t?-1:e===t?0:1}function At(e,t){return t<e?-1:e===t?0:1}function Rt(e,t,n){return(e=e instanceof Ut?new e.Collection(e):e)._ctx.error=new(n||TypeError)(t),e}function Nt(e){return new e.Collection(e,(()=>Ft(""))).limit(0)}function Bt(e,t,n,r){var o,a,i,l,u,s,c,f=n.length;if(!n.every((e=>"string"==typeof e)))return Rt(e,"String expected.");function d(e){o="next"===e?e=>e.toUpperCase():e=>e.toLowerCase(),a="next"===e?e=>e.toLowerCase():e=>e.toUpperCase(),i="next"===e?Dt:At;var t=n.map((function(e){return{lower:a(e),upper:o(e)}})).sort((function(e,t){return i(e.lower,t.lower)}));l=t.map((function(e){return e.upper})),u=t.map((function(e){return e.lower})),c="next"===(s=e)?"":r}d("next");var p=((e=new e.Collection(e,(()=>Lt(l[0],u[f-1]+r))))._ondirectionchange=function(e){d(e)},0);return e._addAlgorithm((function(e,n,r){var o=e.key;if("string"!=typeof o)return!1;var d=a(o);if(t(d,u,p))return!0;for(var h=null,m=p;m<f;++m){var y=function(e,t,n,r,o,a){for(var i=Math.min(e.length,r.length),l=-1,u=0;u<i;++u){var s=t[u];if(s!==r[u])return o(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):o(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):0<=l?e.substr(0,l)+t[l]+n.substr(l+1):null;o(e[u],s)<0&&(l=u)}return i<r.length&&"next"===a?e+n.substr(e.length):i<e.length&&"prev"===a?e.substr(0,n.length):l<0?null:e.substr(0,l)+r[l]+n.substr(l+1)}(o,d,l[m],u[m],i,s);null===y&&null===h?p=m+1:(null===h||0<i(h,y))&&(h=y)}return n(null!==h?function(){e.continue(h+c)}:r),!1})),e}function Lt(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Ft(e){return{type:1,lower:e,upper:e}}class Ut{get Collection(){return this._ctx.table.db.Collection}between(e,t,n,r){n=!1!==n,r=!0===r;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Nt(this):new this.Collection(this,(()=>Lt(e,t,!n,!r)))}catch(e){return Rt(this,st)}}equals(e){return null==e?Rt(this,st):new this.Collection(this,(()=>Ft(e)))}above(e){return null==e?Rt(this,st):new this.Collection(this,(()=>Lt(e,void 0,!0)))}aboveOrEqual(e){return null==e?Rt(this,st):new this.Collection(this,(()=>Lt(e,void 0,!1)))}below(e){return null==e?Rt(this,st):new this.Collection(this,(()=>Lt(void 0,e,!1,!0)))}belowOrEqual(e){return null==e?Rt(this,st):new this.Collection(this,(()=>Lt(void 0,e)))}startsWith(e){return"string"!=typeof e?Rt(this,"String expected."):this.between(e,e+ut,!0,!0)}startsWithIgnoreCase(e){return""===e?this.startsWith(e):Bt(this,((e,t)=>0===e.indexOf(t[0])),[e],ut)}equalsIgnoreCase(e){return Bt(this,((e,t)=>e===t[0]),[e],"")}anyOfIgnoreCase(){var e=N.apply(R,arguments);return 0===e.length?Nt(this):Bt(this,((e,t)=>-1!==t.indexOf(e)),e,"")}startsWithAnyOfIgnoreCase(){var e=N.apply(R,arguments);return 0===e.length?Nt(this):Bt(this,((e,t)=>t.some((t=>0===e.indexOf(t)))),e,ut)}anyOf(){const e=N.apply(R,arguments);let t=this._cmp;try{e.sort(t)}catch(e){return Rt(this,st)}if(0===e.length)return Nt(this);const n=new this.Collection(this,(()=>Lt(e[0],e[e.length-1])));n._ondirectionchange=n=>{t="next"===n?this._ascending:this._descending,e.sort(t)};let r=0;return n._addAlgorithm(((n,o,a)=>{for(var i=n.key;0<t(i,e[r]);)if(++r===e.length)return o(a),!1;return 0===t(i,e[r])||(o((()=>{n.continue(e[r])})),!1)})),n}notEqual(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=N.apply(R,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Rt(this,st)}const t=e.reduce(((e,t)=>e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,t){const n=this._cmp,r=this._ascending,o=this._descending,a=this._min,i=this._max;if(0===e.length)return Nt(this);if(!e.every((e=>void 0!==e[0]&&void 0!==e[1]&&r(e[0],e[1])<=0)))return Rt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",X.InvalidArgument);const l=!t||!1!==t.includeLowers,u=t&&!0===t.includeUppers;let s,c=r;function f(e,t){return c(e[0],t[0])}try{(s=e.reduce((function(e,t){let r=0,o=e.length;for(;r<o;++r){const o=e[r];if(n(t[0],o[1])<0&&0<n(t[1],o[0])){o[0]=a(o[0],t[0]),o[1]=i(o[1],t[1]);break}}return r===o&&e.push(t),e}),[])).sort(f)}catch(e){return Rt(this,st)}let d=0;const p=u?e=>0<r(e,s[d][1]):e=>0<=r(e,s[d][1]),h=l?e=>0<o(e,s[d][0]):e=>0<=o(e,s[d][0]);let m=p;const y=new this.Collection(this,(()=>Lt(s[0][0],s[s.length-1][1],!l,!u)));return y._ondirectionchange=e=>{c="next"===e?(m=p,r):(m=h,o),s.sort(f)},y._addAlgorithm(((e,t,n)=>{for(var o,a=e.key;m(a);)if(++d===s.length)return t(n),!1;return!(p(o=a)||h(o))||(0!==this._cmp(a,s[d][1])&&0!==this._cmp(a,s[d][0])&&t((()=>{c===r?e.continue(s[d][0]):e.continue(s[d][1])})),!1)})),y}startsWithAnyOf(){const e=N.apply(R,arguments);return e.every((e=>"string"==typeof e))?0===e.length?Nt(this):this.inAnyRange(e.map((e=>[e,e+ut]))):Rt(this,"startsWithAnyOf() only works with strings")}}function zt(e){return We((function(t){return Wt(t),e(t.target.error),!1}))}function Wt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Ht=vt(null,"storagemutated");class Vt{_lock(){return v(!Ee.global),++this._reculock,1!==this._reculock||Ee.global||(Ee.lockOwnerFor=this),this}_unlock(){if(v(!Ee.global),0==--this._reculock)for(Ee.global||(Ee.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{nt(e[1],e[0])}catch(e){}}return this}_locked(){return this._reculock&&Ee.lockOwnerFor!==this}create(e){if(!this.mode)return this;const t=this.db.idbdb,n=this.db._state.dbOpenError;if(v(!this.idbtrans),!e&&!t)switch(n&&n.name){case"DatabaseClosedError":throw new X.DatabaseClosed(n);case"MissingAPIError":throw new X.MissingAPI(n.message,n);default:throw new X.OpenFailed(n)}if(this.active)return v(null===this._completion._state),(e=this.idbtrans=e||(this.db.core||t).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=We((t=>{Wt(t),this._reject(e.error)})),e.onabort=We((t=>{Wt(t),this.active&&this._reject(new X.Abort(e.error)),this.active=!1,this.on("abort").fire(t)})),e.oncomplete=We((()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&Ht.storagemutated.fire(e.mutatedParts)})),this;throw new X.TransactionInactive}_promise(e,t,n){if("readwrite"===e&&"readwrite"!==this.mode)return lt(new X.ReadOnly("Transaction is readonly"));if(!this.active)return lt(new X.TransactionInactive);if(this._locked())return new xe(((r,o)=>{this._blockedFuncs.push([()=>{this._promise(e,t,n).then(r,o)},Ee])}));if(n)return Ye((()=>{var e=new xe(((e,n)=>{this._lock();const r=t(e,n,this);r&&r.then&&r.then(e,n)}));return e.finally((()=>this._unlock())),e._lib=!0,e}));var r=new xe(((e,n)=>{var r=t(e,n,this);r&&r.then&&r.then(e,n)}));return r._lib=!0,r}_root(){return this.parent?this.parent._root():this}waitFor(e){var t,n=this._root();const r=xe.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then((()=>r)):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function e(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=e)}());var o=n._waitingFor;return new xe(((e,t)=>{r.then((t=>n._waitingQueue.push(We(e.bind(null,t)))),(e=>n._waitingQueue.push(We(t.bind(null,e))))).finally((()=>{n._waitingFor===o&&(n._waitingFor=null)}))}))}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new X.Abort))}table(e){const t=this._memoizedTables||(this._memoizedTables={});if(s(t,e))return t[e];var n=this.schema[e];if(!n)throw new X.NotFound("Table "+e+" not part of transaction");const r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r}}function Gt(e,t,n,r,o,a,i){return{name:e,keyPath:t,unique:n,multi:r,auto:o,compound:a,src:(n&&!i?"&":"")+(r?"*":"")+(o?"++":"")+qt(t)}}function qt(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function $t(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:O(n,(e=>[e.name,e]))}}let Kt=e=>{try{return e.only([[]]),Kt=()=>[[]],[[]]}catch(e){return Kt=()=>ut,ut}};function Yt(e){return null==e?()=>{}:"string"==typeof e?1===(t=e).split(".").length?e=>e[t]:e=>S(e,t):t=>S(t,e);var t}function Jt(e){return[].slice.call(e)}let Xt=0;function Qt(e){return null==e?":id":"string"==typeof e?e:`[${e.join("+")}]`}function Zt({_novip:e},t){var n,r=t.db,o=([r,t,o,n]=[e._middlewares,r,e._deps.IDBKeyRange,t],t=function(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var{lower:e,upper:n,lowerOpen:r,upperOpen:o}=e;return void 0===e?void 0===n?null:t.upperBound(n,!!o):void 0===n?t.lowerBound(e,!!r):t.bound(e,n,!!r,!!o)}const{schema:o,hasGetAll:i}=function(e,t){const n=Jt(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((e=>t.objectStore(e))).map((e=>{const{keyPath:t,autoIncrement:n}=e,r=a(t),o=null==t,i={},l={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:o,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:Yt(t)},indexes:Jt(e.indexNames).map((t=>e.index(t))).map((e=>{var{name:e,unique:t,multiEntry:n,keyPath:r}=e;return e={name:e,compound:a(r),keyPath:r,unique:t,multiEntry:n,extractKey:Yt(r)},i[Qt(r)]=e})),getIndexByKeyPath:e=>i[Qt(e)]};return i[":id"]=l.primaryKey,null!=t&&(i[Qt(t)]=l.primaryKey),l}))},hasGetAll:0<n.length&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),l=o.tables.map((e=>{{const n=e.name;return{name:n,schema:e,mutate:function({trans:e,type:t,keys:o,values:a,range:i}){return new Promise(((l,u)=>{l=We(l);const s=e.objectStore(n),c=null==s.keyPath,f="put"===t||"add"===t;if(!f&&"delete"!==t&&"deleteRange"!==t)throw new Error("Invalid operation type: "+t);var d=(o||a||{length:1}).length;if(o&&a&&o.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===d)return l({numFailures:0,failures:{},results:[],lastResult:void 0});let p;const h=[],m=[];let y=0;const g=e=>{++y,Wt(e)};if("deleteRange"===t){if(4===i.type)return l({numFailures:y,failures:m,results:[],lastResult:void 0});3===i.type?h.push(p=s.clear()):h.push(p=s.delete(r(i)))}else{const[e,n]=f?c?[a,o]:[a,null]:[o,null];if(f)for(let r=0;r<d;++r)h.push(p=n&&void 0!==n[r]?s[t](e[r],n[r]):s[t](e[r])),p.onerror=g;else for(let n=0;n<d;++n)h.push(p=s[t](e[n])),p.onerror=g}const b=e=>{e=e.target.result,h.forEach(((e,t)=>null!=e.error&&(m[t]=e.error))),l({numFailures:y,failures:m,results:"delete"===t?o:h.map((e=>e.result)),lastResult:e})};p.onerror=e=>{g(e),b(e)},p.onsuccess=b}))},getMany:({trans:e,keys:t})=>new Promise(((r,o)=>{r=We(r);const a=e.objectStore(n),i=t.length,l=new Array(i);let u,s=0,c=0;var f=e=>{e=e.target,l[e._pos]=e.result,++c===s&&r(l)},d=zt(o);for(let e=0;e<i;++e)null!=t[e]&&((u=a.get(t[e]))._pos=e,u.onsuccess=f,u.onerror=d,++s);0===s&&r(l)})),get:({trans:e,key:t})=>new Promise(((r,o)=>{r=We(r);const a=e.objectStore(n).get(t);a.onsuccess=e=>r(e.target.result),a.onerror=zt(o)})),query:(t=i,e=>new Promise(((o,a)=>{o=We(o);const{trans:i,values:l,limit:u,query:s}=e,c=u===1/0?void 0:u,{index:f,range:d}=s,p=i.objectStore(n),h=f.isPrimaryKey?p:p.index(f.name),m=r(d);if(0===u)return o({result:[]});if(t){const e=l?h.getAll(m,c):h.getAllKeys(m,c);e.onsuccess=e=>o({result:e.target.result}),e.onerror=zt(a)}else{let e=0;const t=!l&&"openKeyCursor"in h?h.openKeyCursor(m):h.openCursor(m),n=[];t.onsuccess=r=>{const a=t.result;return a?(n.push(l?a.value:a.primaryKey),++e===u?o({result:n}):void a.continue()):o({result:n})},t.onerror=zt(a)}}))),openCursor:function({trans:e,values:t,query:o,reverse:a,unique:i}){return new Promise(((l,u)=>{l=We(l);const{index:s,range:c}=o,f=e.objectStore(n),d=s.isPrimaryKey?f:f.index(s.name),p=a?i?"prevunique":"prev":i?"nextunique":"next",h=!t&&"openKeyCursor"in d?d.openKeyCursor(r(c),p):d.openCursor(r(c),p);h.onerror=zt(u),h.onsuccess=We((t=>{const n=h.result;if(n){n.___id=++Xt,n.done=!1;const t=n.continue.bind(n);let r=n.continuePrimaryKey;r=r&&r.bind(n);const o=n.advance.bind(n),a=()=>{throw new Error("Cursor not stopped")};n.trans=e,n.stop=n.continue=n.continuePrimaryKey=n.advance=()=>{throw new Error("Cursor not started")},n.fail=We(u),n.next=function(){let e=1;return this.start((()=>e--?this.continue():this.stop())).then((()=>this))},n.start=e=>{const i=new Promise(((e,t)=>{e=We(e),h.onerror=zt(t),n.fail=t,n.stop=t=>{n.stop=n.continue=n.continuePrimaryKey=n.advance=a,e(t)}})),l=()=>{if(h.result)try{e()}catch(e){n.fail(e)}else n.done=!0,n.start=()=>{throw new Error("Cursor behind last entry")},n.stop()};return h.onsuccess=We((e=>{(h.onsuccess=l)()})),n.continue=t,n.continuePrimaryKey=r,n.advance=o,l(),i},l(n)}else l(null)}),u)}))},count({query:e,trans:t}){const{index:o,range:a}=e;return new Promise(((e,i)=>{const l=t.objectStore(n),u=o.isPrimaryKey?l:l.index(o.name),s=r(a),c=s?u.count(s):u.count();c.onsuccess=We((t=>e(t.target.result))),c.onerror=zt(i)}))}};var t}})),u={};return l.forEach((e=>u[e.name]=e)),{stack:"dbcore",transaction:e.transaction.bind(e),table(e){if(u[e])return u[e];throw new Error(`Table '${e}' not found`)},MIN_KEY:-1/0,MAX_KEY:Kt(t),schema:o}}(t,o,n),{dbcore:r.dbcore.reduce(((e,{create:t})=>({...e,...t(e)})),t)});e.core=o.dbcore,e.tables.forEach((t=>{const n=t.name;e.core.schema.tables.some((e=>e.name===n))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function en({_novip:e},t,n,r){n.forEach((n=>{const o=r[n];t.forEach((t=>{var r=m(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?d(t,n,{get(){return this.table(n)},set(e){f(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,o))}))}))}function tn({_novip:e},t){t.forEach((t=>{for(var n in t)t[n]instanceof e.Table&&delete t[n]}))}function nn(e,t){return e._cfg.version-t._cfg.version}function rn(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){var o=e[r],a=t[r];if(o){const e={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||o.primKey.auto!==a.primKey.auto&&!ft)e.recreate=!0,n.change.push(e);else{const t=o.idxByName,r=a.idxByName;let i;for(i in t)r[i]||e.del.push(i);for(i in r){const n=t[i],o=r[i];n?n.src!==o.src&&e.change.push(o):e.add.push(o)}(0<e.del.length||0<e.add.length||0<e.change.length)&&n.change.push(e)}}else n.add.push([r,a])}return n}function on(e,t,n,r){const o=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});r.forEach((e=>an(o,e)))}function an(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function ln(e,t,n){const r={};return g(t.objectStoreNames,0).forEach((e=>{const t=n.objectStore(e);let o=t.keyPath;const a=Gt(qt(o),o||"",!1,!1,!!t.autoIncrement,o&&"string"!=typeof o,!0),i=[];for(let e=0;e<t.indexNames.length;++e){const n=t.index(t.indexNames[e]);o=n.keyPath;var l=Gt(n.name,o,!!n.unique,!!n.multiEntry,!1,o&&"string"!=typeof o,!1);i.push(l)}r[e]=$t(e,a,i)})),r}function un({_novip:e},t,n){const o=n.db.objectStoreNames;for(let r=0;r<o.length;++r){const a=o[r],i=n.objectStore(a);e._hasGetAll="getAll"in i;for(let e=0;e<i.indexNames.length;++e){const n=i.indexNames[e],r=i.index(n).keyPath,o="string"==typeof r?r:"["+g(r).join("+")+"]";if(t[a]){const e=t[a].idxByName[o];e&&(e.name=n,delete t[a].idxByName[o],t[a].idxByName[n]=e)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&r.WorkerGlobalScope&&r instanceof r.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class sn{_parseStoresSpec(e,t){o(e).forEach((n=>{if(null!==e[n]){var r=e[n].split(",").map(((e,t)=>{const n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return Gt(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),a(r),0===t)})),o=r.shift();if(o.multi)throw new X.Schema("Primary key cannot be multi-valued");r.forEach((e=>{if(e.auto)throw new X.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new X.Schema("Index must have a name and cannot be an empty string")})),t[n]=$t(n,o,r)}}))}stores(e){const t=this.db,n=(this._cfg.storesSource=this._cfg.storesSource?i(this._cfg.storesSource,e):e,t._versions),r={};let a={};return n.forEach((e=>{i(r,e._cfg.storesSource),a=e._cfg.dbschema={},e._parseStoresSpec(r,a)})),t._dbSchema=a,tn(t,[t._allTables,t,t.Transaction.prototype]),en(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],o(a),a),t._storeNames=o(a),this}upgrade(e){return this._cfg.contentUpgrade=le(this._cfg.contentUpgrade||Z,e),this}}function cn(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new xn("__dbnames",{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function fn(e){return e&&"function"==typeof e.databases}function dn(e){return Ye((function(){return Ee.letThrough=!0,e()}))}function pn(e){var t=t=>e.next(t),n=o(t),r=o((t=>e.throw(t)));function o(e){return t=>{var o=(t=e(t)).value;return t.done?o:o&&"function"==typeof o.then?o.then(n,r):a(o)?Promise.all(o).then(n,r):n(o)}}return o(t)()}function hn(e,t,n){const r=a(e)?e.slice():[e];for(let e=0;e<n;++e)r.push(t);return r}const mn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),r=n.schema,o={},a=[];function i(e,t,n){const r=Qt(e),l=o[r]=o[r]||[],u=null==e?0:"string"==typeof e?1:e.length,s=0<t,c={...n,isVirtual:s,keyTail:t,keyLength:u,extractKey:Yt(e),unique:!s&&n.unique};return l.push(c),c.isPrimaryKey||a.push(c),1<u&&i(2===u?e[0]:e.slice(0,u-1),t+1,n),l.sort(((e,t)=>e.keyTail-t.keyTail)),c}t=i(r.primaryKey.keyPath,0,r.primaryKey),o[":id"]=[t];for(const e of r.indexes)i(e.keyPath,0,e);function l(t){var n,r=t.query.index;return r.isVirtual?{...t,query:{index:r,range:(n=t.query.range,r=r.keyTail,{type:1===n.type?2:n.type,lower:hn(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,r),lowerOpen:!0,upper:hn(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,r),upperOpen:!0})}}:t}return{...n,schema:{...r,primaryKey:t,indexes:a,getIndexByKeyPath:function(e){return(e=o[Qt(e)])&&e[0]}},count:e=>n.count(l(e)),query:e=>n.query(l(e)),openCursor(t){const{keyTail:r,isVirtual:o,keyLength:a}=t.query.index;return o?n.openCursor(l(t)).then((n=>n&&function(n){return Object.create(n,{continue:{value:function(o){null!=o?n.continue(hn(o,t.reverse?e.MAX_KEY:e.MIN_KEY,r)):t.unique?n.continue(n.key.slice(0,a).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,r)):n.continue()}},continuePrimaryKey:{value(t,o){n.continuePrimaryKey(hn(t,e.MAX_KEY,r),o)}},primaryKey:{get:()=>n.primaryKey},key:{get(){const e=n.key;return 1===a?e[0]:e.slice(0,a)}},value:{get:()=>n.value}})}(n))):n.openCursor(t)}}}}}};function yn(e,t,n,r){return n=n||{},r=r||"",o(e).forEach((o=>{if(s(t,o)){var a=e[o],i=t[o];if("object"==typeof a&&"object"==typeof i&&a&&i){const e=I(a);e!==I(i)?n[r+o]=t[o]:"Object"===e?yn(a,i,n,r+o+"."):a!==i&&(n[r+o]=t[o])}else a!==i&&(n[r+o]=t[o])}else n[r+o]=void 0})),o(t).forEach((o=>{s(e,o)||(n[r+o]=t[o])})),n}const gn={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),r=n.schema.primaryKey,o={...n,mutate(e){const o=Ee.trans,{deleting:a,creating:i,updating:l}=o.table(t).hook;switch(e.type){case"add":if(i.fire===Z)break;return o._promise("readwrite",(()=>u(e)),!0);case"put":if(i.fire===Z&&l.fire===Z)break;return o._promise("readwrite",(()=>u(e)),!0);case"delete":if(a.fire===Z)break;return o._promise("readwrite",(()=>u(e)),!0);case"deleteRange":if(a.fire===Z)break;return o._promise("readwrite",(()=>function e(t,o,a){return n.query({trans:t,values:!1,query:{index:r,range:o},limit:a}).then((({result:n})=>u({type:"delete",keys:n,trans:t}).then((r=>0<r.numFailures?Promise.reject(r.failures[0]):n.length<a?{failures:[],numFailures:0,lastResult:void 0}:e(t,{...o,lower:n[n.length-1],lowerOpen:!0},a)))))}(e.trans,e.range,1e4)),!0)}return n.mutate(e);function u(e){const t=Ee.trans,o=e.keys||(c=r,"delete"===(u=e).type?u.keys:u.keys||u.values.map(c.extractKey));var u,c,f;if(o)return"delete"!==(e="add"===e.type||"put"===e.type?{...e,keys:o}:{...e}).type&&(e.values=[...e.values]),e.keys&&(e.keys=[...e.keys]),u=n,f=o,("add"===(c=e).type?Promise.resolve([]):u.getMany({trans:c.trans,keys:f,cache:"immutable"})).then((u=>{const c=o.map(((n,o)=>{var c=u[o],f={onerror:null,onsuccess:null};if("delete"===e.type)a.fire.call(f,n,c,t);else if("add"===e.type||void 0===c){const a=i.fire.call(f,n,e.values[o],t);null==n&&null!=a&&(n=a,e.keys[o]=n,r.outbound||_(e.values[o],r.keyPath,n))}else{const r=yn(c,e.values[o]),a=l.fire.call(f,r,n,c,t);if(a){const t=e.values[o];Object.keys(a).forEach((e=>{s(t,e)?t[e]=a[e]:_(t,e,a[e])}))}}return f}));return n.mutate(e).then((({failures:t,results:n,numFailures:r,lastResult:a})=>{for(let r=0;r<o.length;++r){const a=(n||o)[r],i=c[r];null==a?i.onerror&&i.onerror(t[r]):i.onsuccess&&i.onsuccess("put"===e.type&&u[r]?e.values[r]:a)}return{failures:t,results:n,numFailures:r,lastResult:a}})).catch((e=>(c.forEach((t=>t.onerror&&t.onerror(e))),Promise.reject(e))))}));throw new Error("Keys missing")}}};return o}})};function bn(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;const r=[];for(let o=0,a=0;o<t.keys.length&&a<e.length;++o)0===jt(t.keys[o],e[a])&&(r.push(n?M(t.values[o]):t.values[o]),++a);return r.length===e.length?r:null}catch(e){return null}}const vn={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:e=>{if(!e.cache)return n.getMany(e);var t=bn(e.keys,e.trans._cache,"clone"===e.cache);return t?xe.resolve(t):n.getMany(e).then((t=>(e.trans._cache={keys:e.keys,values:"clone"===e.cache?M(t):t},t)))},mutate:e=>("add"!==e.type&&(e.trans._cache=null),n.mutate(e))}}})};function wn(e){return!("from"in e)}const On=function(e,t){if(!this){const t=new On;return e&&"d"in e&&i(t,e),t}i(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function Sn(e,t,n){var r=jt(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(wn(e))return i(e,{from:t,to:n,d:1});r=e.l;var o=e.r;if(jt(n,e.from)<0)return r?Sn(r,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Pn(e);if(0<jt(t,e.to))return o?Sn(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Pn(e);jt(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),0<jt(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),t=!e.r,r&&!e.l&&_n(e,r),o&&t&&_n(e,o)}}function _n(e,t){wn(t)||function e(t,{from:n,to:r,l:o,r:a}){Sn(t,n,r),o&&e(t,o),a&&e(t,a)}(e,t)}function Cn(e,t){const n=En(t);let r=n.next();if(r.done)return!1;let o=r.value;const a=En(e);let i=a.next(o.from),l=i.value;for(;!r.done&&!i.done;){if(jt(l.from,o.to)<=0&&0<=jt(l.to,o.from))return!0;jt(o.from,l.from)<0?o=(r=n.next(l.from)).value:l=(i=a.next(o.from)).value}return!1}function En(e){let t=wn(e)?null:{s:0,n:e};return{next(e){for(var n=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&jt(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||jt(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Pn(e){var t,n;const r=((null==(t=e.r)?void 0:t.d)||0)-((null==(n=e.l)?void 0:n.d)||0),o=1<r?"r":r<-1?"l":"";if(o){const t="r"==o?"l":"r",n={...e},r=e[o];e.from=r.from,e.to=r.to,e[o]=r[o],n[o]=r[t],(e[t]=n).d=kn(n)}e.d=kn(e)}function kn({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}c(On.prototype,{add(e){return _n(this,e),this},addKey(e){return Sn(this,e,e),this},addKeys(e){return e.forEach((e=>Sn(this,e,e))),this},[D](){return En(this)}});const jn={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new On(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{const i=e.table(r),l=i.schema,u=l.primaryKey,{extractKey:s,outbound:c}=u,f={...i,mutate:e=>{const o=e.trans,u=o.mutatedParts||(o.mutatedParts={}),s=e=>u[e=`idb://${t}/${r}/`+e]||(u[e]=new On),c=s(""),f=s(":dels"),d=e.type;let[p,h]="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[];const m=e.trans._cache;return i.mutate(e).then((e=>{if(a(p)){"delete"!==d&&(p=e.results),c.addKeys(p);var t=bn(p,m);t||"add"===d||f.addKeys(p),(t||h)&&(r=s,o=t,i=h,l.indexes.forEach((function(e){const t=r(e.name||"");function n(t){return null!=t?e.extractKey(t):null}const l=n=>e.multiEntry&&a(n)?n.forEach((e=>t.addKey(e))):t.addKey(n);(o||i).forEach(((e,t)=>{var r=o&&n(o[t]);0!==jt(r,t=i&&n(i[t]))&&(null!=r&&l(r),null!=t&&l(t))}))})))}else if(p){const e={from:p.lower,to:p.upper};f.add(e),c.add(e)}else c.add(n),f.add(n),l.indexes.forEach((e=>s(e.name).add(n)));var r,o,i;return e}))}},d=({query:{index:t,range:n}})=>[t,new On(null!=(t=n.lower)?t:e.MIN_KEY,null!=(t=n.upper)?t:e.MAX_KEY)],p={get:e=>[u,new On(e.key)],getMany:e=>[u,(new On).addKeys(e.keys)],count:d,query:d,openCursor:d};return o(p).forEach((e=>{f[e]=function(o){const a=Ee.subscr;if(a){const l=e=>a[e=`idb://${t}/${r}/`+e]||(a[e]=new On),u=l(""),f=l(":dels"),[d,h]=p[e](o);if(l(d.name||"").add(h),!d.isPrimaryKey){if("count"!==e){const t="query"===e&&c&&o.values&&i.query({...o,values:!1});return i[e].apply(this,arguments).then((n=>{if("query"===e){if(c&&o.values)return t.then((({result:e})=>(u.addKeys(e),n)));const e=o.values?n.result.map(s):n.result;(o.values?u:f).addKeys(e)}else if("openCursor"===e){const e=n,t=o.values;return e&&Object.create(e,{key:{get:()=>(f.addKey(e.primaryKey),e.key)},primaryKey:{get(){var t=e.primaryKey;return f.addKey(t),t}},value:{get:()=>(t&&u.addKey(e.primaryKey),e.value)}})}return n}))}f.add(n)}}return i[e].apply(this,arguments)}})),f}}}};class xn{constructor(e,t){this._middlewares={},this.verno=0;var n,r,o,a,i,l=xn.dependencies;this._options=t={addons:xn.addons,autoOpen:!0,indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const u=t.addons,s=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Z,dbReadyPromise:null,cancelOpen:Z,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3});s.dbReadyPromise=new xe((e=>{s.dbReadyResolve=e})),s.openCanceller=new xe(((e,t)=>{s.cancelOpen=t})),this._state=s,this.name=e,this.on=vt(this,"populate","blocked","versionchange","close",{ready:[le,Z]}),this.on.ready.subscribe=b(this.on.ready.subscribe,(e=>(t,n)=>{xn.vip((()=>{const r=this._state;if(r.openComplete)r.dbOpenError||xe.resolve().then(t),n&&e(t);else if(r.onReadyBeingFired)r.onReadyBeingFired.push(t),n&&e(t);else{e(t);const r=this;n||e((function e(){r.on.ready.unsubscribe(t),r.on.ready.unsubscribe(e)}))}}))})),this.Collection=(n=this,wt(Tt.prototype,(function(e,t){this.db=n;let r=yt,o=null;if(t)try{r=t()}catch(e){o=e}var a=(t=e._ctx).table,i=a.hook.reading.fire;this._ctx={table:a,index:t.index,isPrimKey:!t.index||a.schema.primKey.keyPath&&t.index===a.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:o,or:t.or,valueMapper:i!==ee?i:null}}))),this.Table=(i=this,wt(bt.prototype,(function(e,t,n){this.db=i,this._tx=n,this.name=e,this.schema=t,this.hook=i._allTables[e]?i._allTables[e].hook:vt(null,{creating:[re,Z],reading:[te,ee],updating:[ae,Z],deleting:[oe,Z]})}))),this.Transaction=(a=this,wt(Vt.prototype,(function(e,t,n,r,o){this.db=a,this.mode=e,this.storeNames=t,this.schema=n,this.chromeTransactionDurability=r,this.idbtrans=null,this.on=vt(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new xe(((e,t)=>{this._resolve=e,this._reject=t})),this._completion.then((()=>{this.active=!1,this.on.complete.fire()}),(e=>{var t=this.active;return this.active=!1,this.on.error.fire(e),this.parent?this.parent._reject(e):t&&this.idbtrans&&this.idbtrans.abort(),lt(e)}))}))),this.Version=(o=this,wt(sn.prototype,(function(e){this.db=o,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))),this.WhereClause=(r=this,wt(Ut.prototype,(function(e,t,n){this.db=r,this._ctx={table:e,index:":id"===t?null:t,or:n};const o=r._deps.indexedDB;if(!o)throw new X.MissingAPI;this._cmp=this._ascending=o.cmp.bind(o),this._descending=(e,t)=>o.cmp(t,e),this._max=(e,t)=>0<o.cmp(e,t)?e:t,this._min=(e,t)=>o.cmp(e,t)<0?e:t,this._IDBKeyRange=r._deps.IDBKeyRange}))),this.on("versionchange",(e=>{0<e.newVersion?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()})),this.on("blocked",(e=>{!e.newVersion||e.newVersion<e.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version `+e.oldVersion/10)})),this._maxKey=Kt(t.IDBKeyRange),this._createTransaction=(e,t,n,r)=>new this.Transaction(e,t,n,this._options.chromeTransactionDurability,r),this._fireOnBlocked=e=>{this.on("blocked").fire(e),ct.filter((e=>e.name===this.name&&e!==this&&!e._state.vcFired)).map((t=>t.on("versionchange").fire(e)))},this.use(mn),this.use(gn),this.use(jn),this.use(vn),this.vip=Object.create(this,{_vip:{value:!0}}),u.forEach((e=>e(this)))}version(e){if(isNaN(e)||e<.1)throw new X.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new X.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const t=this._versions;var n=t.filter((t=>t._cfg.version===e))[0];return n||(n=new this.Version(e),t.push(n),t.sort(nn),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(e){return this.idbdb&&(this._state.openComplete||Ee.letThrough||this._vip)?e():new xe(((e,t)=>{if(this._state.openComplete)return t(new X.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void t(new X.DatabaseClosed);this.open().catch(Z)}this._state.dbReadyPromise.then(e,t)})).then(e)}use({stack:e,create:t,level:n,name:r}){r&&this.unuse({stack:e,name:r});const o=this._middlewares[e]||(this._middlewares[e]=[]);return o.push({stack:e,create:t,level:null==n?10:n,name:r}),o.sort(((e,t)=>e.level-t.level)),this}unuse({stack:e,name:t,create:n}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter((e=>n?e.create!==n:!!t&&e.name!==t))),this}open(){return function(e){const t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((()=>t.dbOpenError?lt(t.dbOpenError):e));L&&(t.openCanceller._stackHolder=W()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const r=t.openCanceller;function a(){if(t.openCanceller!==r)throw new X.DatabaseClosed("db.open() was cancelled")}let i=t.dbReadyResolve,l=null,u=!1;return xe.race([r,("undefined"==typeof navigator?xe.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(e){function t(){return indexedDB.databases().finally(e)}s=setInterval(t,100),t()})).finally((function(){return clearInterval(s)})):Promise.resolve()).then((()=>new xe(((r,i)=>{if(a(),!n)throw new X.MissingAPI;const s=e.name,c=t.autoSchema?n.open(s):n.open(s,Math.round(10*e.verno));if(!c)throw new X.MissingAPI;c.onerror=zt(i),c.onblocked=We(e._fireOnBlocked),c.onupgradeneeded=We((r=>{if(l=c.transaction,t.autoSchema&&!e._options.allowEmptyDB){c.onerror=Wt,l.abort(),c.result.close();const e=n.deleteDatabase(s);e.onsuccess=e.onerror=We((()=>{i(new X.NoSuchDatabase(`Database ${s} doesnt exist`))}))}else l.onerror=zt(i),r=r.oldVersion>Math.pow(2,62)?0:r.oldVersion,u=r<1,e._novip.idbdb=c.result,function(e,t,n,r){const a=e._dbSchema,i=e._createTransaction("readwrite",e._storeNames,a),l=(i.create(n),i._completion.catch(r),i._reject.bind(i)),u=Ee.transless||Ee;Ye((()=>{Ee.trans=i,Ee.transless=u,0===t?(o(a).forEach((e=>{on(n,e,a[e].primKey,a[e].indexes)})),Zt(e,n),xe.follow((()=>e.on.populate.fire(i))).catch(l)):function({_novip:e},t,n,r){const a=[],i=e._versions;let l=e._dbSchema=ln(0,e.idbdb,r),u=!1;return i.filter((e=>e._cfg.version>=t)).forEach((i=>{a.push((()=>{const a=l,s=i._cfg.dbschema,c=(un(e,a,r),un(e,s,r),l=e._dbSchema=s,rn(a,s)),f=(c.add.forEach((e=>{on(r,e[0],e[1].primKey,e[1].indexes)})),c.change.forEach((e=>{if(e.recreate)throw new X.Upgrade("Not yet support for changing primary key");{const t=r.objectStore(e.name);e.add.forEach((e=>an(t,e))),e.change.forEach((e=>{t.deleteIndex(e.name),an(t,e)})),e.del.forEach((e=>t.deleteIndex(e)))}})),i._cfg.contentUpgrade);if(f&&i._cfg.version>t){Zt(e,r),n._memoizedTables={},u=!0;let t=C(s);c.del.forEach((e=>{t[e]=a[e]})),tn(e,[e.Transaction.prototype]),en(e,[e.Transaction.prototype],o(t),t),n.schema=t;const i=B(f);let l;i&&Je();const d=xe.follow((()=>{var e;(l=f(n))&&i&&(e=Xe.bind(null,null),l.then(e,e))}));return l&&"function"==typeof l.then?xe.resolve(l):d.then((()=>l))}})),a.push((t=>{var r,o;u&&dt||(r=i._cfg.dbschema,o=t,[].slice.call(o.db.objectStoreNames).forEach((e=>null==r[e]&&o.db.deleteObjectStore(e)))),tn(e,[e.Transaction.prototype]),en(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}))})),function e(){return a.length?xe.resolve(a.shift()(n.idbtrans)).then(e):xe.resolve()}().then((()=>{var e,t=r;o(e=l).forEach((n=>{t.db.objectStoreNames.contains(n)||on(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,i,n).catch(l)}))}(e,r/10,l,i)}),i),c.onsuccess=We((()=>{l=null;const n=e._novip.idbdb=c.result,a=g(n.objectStoreNames);if(0<a.length)try{const r=n.transaction(1===a.length?a[0]:a,"readonly");if(t.autoSchema){var[i,f,d]=[e._novip,n,r];i.verno=f.version/10,d=i._dbSchema=ln(0,f,d),i._storeNames=g(f.objectStoreNames,0),en(i,[i._allTables],o(d),d)}else un(e,e._dbSchema,r),function(e,t){const n=rn(ln(0,e.idbdb,t),e._dbSchema);return!n.add.length&&!n.change.some((e=>e.add.length||e.change.length))}(e,r)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.");Zt(e,r)}catch(n){}ct.push(e),n.onversionchange=We((n=>{t.vcFired=!0,e.on("versionchange").fire(n)})),n.onclose=We((t=>{e.on("close").fire(t)})),u&&([{indexedDB:f,IDBKeyRange:i},d]=[e._deps,s],fn(f)||"__dbnames"===d||cn(f,i).put({name:d}).catch(Z)),r()}),i)}))))]).then((()=>(a(),t.onReadyBeingFired=[],xe.resolve(dn((()=>e.on.ready.fire(e.vip)))).then((function n(){if(0<t.onReadyBeingFired.length){let r=t.onReadyBeingFired.reduce(le,Z);return t.onReadyBeingFired=[],xe.resolve(dn((()=>r(e.vip)))).then(n)}}))))).finally((()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1})).then((()=>e)).catch((n=>{t.dbOpenError=n;try{l&&l.abort()}catch(n){}return r===t.openCanceller&&e._close(),lt(n)})).finally((()=>{t.openComplete=!0,i()}));var s}(this)}_close(){const e=this._state,t=ct.indexOf(this);if(0<=t&&ct.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new xe((t=>{e.dbReadyResolve=t})),e.openCanceller=new xe(((t,n)=>{e.cancelOpen=n}))}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new X.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=0<arguments.length,t=this._state;return new xe(((n,r)=>{var o=()=>{this.close();var e=this._deps.indexedDB.deleteDatabase(this.name);e.onsuccess=We((()=>{var e,t,r;[{indexedDB:e,IDBKeyRange:t},r]=[this._deps,this.name],fn(e)||"__dbnames"===r||cn(e,t).delete(r).catch(Z),n()})),e.onerror=zt(r),e.onblocked=this._fireOnBlocked};if(e)throw new X.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(o):o()}))}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return o(this._allTables).map((e=>this._allTables[e]))}transaction(){var e=function(e,t,n){var r=arguments.length;if(r<2)throw new X.InvalidArgument("Too few arguments");for(var o=new Array(r-1);--r;)o[r-1]=arguments[r];return n=o.pop(),[e,P(o),n]}.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,t,n){let r=Ee.trans;r&&r.db===this&&-1===e.indexOf("!")||(r=null);const o=-1!==e.indexOf("?");let a,i;e=e.replace("!","").replace("?","");try{if(i=t.map((e=>{if("string"!=typeof(e=e instanceof this.Table?e.name:e))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e})),"r"==e||"readonly"===e)a="readonly";else{if("rw"!=e&&"readwrite"!=e)throw new X.InvalidArgument("Invalid transaction mode: "+e);a="readwrite"}if(r){if("readonly"===r.mode&&"readwrite"===a){if(!o)throw new X.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&i.forEach((e=>{if(r&&-1===r.storeNames.indexOf(e)){if(!o)throw new X.SubTransaction("Table "+e+" not included in parent transaction.");r=null}})),o&&r&&!r.active&&(r=null)}}catch(e){return r?r._promise(null,((t,n)=>{n(e)})):lt(e)}const l=function e(t,n,r,o,a){return xe.resolve().then((()=>{const i=Ee.transless||Ee,l=t._createTransaction(n,r,t._dbSchema,o),u={trans:l,transless:i};if(o)l.idbtrans=o.idbtrans;else try{l.create(),t._state.PR1398_maxLoop=3}catch(i){return i.name===Y.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then((()=>e(t,n,r,null,a)))):lt(i)}const s=B(a);let c;s&&Je();const f=xe.follow((()=>{var e;(c=a.call(l,l))&&(s?(e=Xe.bind(null,null),c.then(e,e)):"function"==typeof c.next&&"function"==typeof c.throw&&(c=pn(c)))}),u);return(c&&"function"==typeof c.then?xe.resolve(c).then((e=>l.active?e:lt(new X.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn")))):f.then((()=>c))).then((e=>(o&&l._resolve(),l._completion.then((()=>e))))).catch((e=>(l._reject(e),lt(e))))}))}.bind(null,this,a,i,r,n);return r?r._promise(a,l,"lock"):Ee.trans?nt(Ee.transless,(()=>this._whenReady(l))):this._whenReady(l)}table(e){if(s(this._allTables,e))return this._allTables[e];throw new X.InvalidTable(`Table ${e} does not exist`)}}class Mn{constructor(e){this._subscribe=e}subscribe(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})}["undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable"](){return this}}function Tn(e,t){return o(t).forEach((n=>{_n(e[n]||(e[n]=new On),t[n])})),e}function In(e){return new Mn((t=>{const n=B(e);let r=!1,a={},i={};const l={get closed(){return r},unsubscribe:()=>{r=!0,Ht.storagemutated.unsubscribe(f)}};t.start&&t.start(l);let u=!1,s=!1;function c(){return o(i).some((e=>a[e]&&Cn(a[e],i[e])))}const f=e=>{Tn(a,e),c()&&d()},d=()=>{if(!u&&!r){a={};const o={},p=function(t){n&&Je();const r=()=>Ye(e,{subscr:t,trans:null}),o=Ee.trans?nt(Ee.transless,r):r();return n&&o.then(Xe,Xe),o}(o);s||(Ht("storagemutated",f),s=!0),u=!0,Promise.resolve(p).then((e=>{u=!1,r||(c()?d():(a={},i=o,t.next&&t.next(e)))}),(e=>{u=!1,t.error&&t.error(e),l.unsubscribe()}))}};return d(),l}))}let Dn;try{Dn={indexedDB:r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.msIndexedDB,IDBKeyRange:r.IDBKeyRange||r.webkitIDBKeyRange}}catch(r){Dn={indexedDB:null,IDBKeyRange:null}}const An=xn;function Rn(e){var t=Nn;try{Nn=!0,Ht.storagemutated.fire(e)}finally{Nn=t}}c(An,{...n,delete:e=>new An(e,{addons:[]}).delete(),exists:e=>new An(e,{addons:[]}).open().then((e=>(e.close(),!0))).catch("NoSuchDatabaseError",(()=>!1)),getDatabaseNames(e){try{return({indexedDB:t,IDBKeyRange:n}=An.dependencies),(fn(t)?Promise.resolve(t.databases()).then((e=>e.map((e=>e.name)).filter((e=>"__dbnames"!==e)))):cn(t,n).toCollection().primaryKeys()).then(e)}catch(e){return lt(new X.MissingAPI)}var t,n},defineClass:()=>function(e){i(this,e)},ignoreTransaction:e=>Ee.trans?nt(Ee.transless,e):e(),vip:dn,async:function(e){return function(){try{var t=pn(e.apply(this,arguments));return t&&"function"==typeof t.then?t:xe.resolve(t)}catch(t){return lt(t)}}},spawn:function(e,t,n){try{var r=pn(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:xe.resolve(r)}catch(e){return lt(e)}},currentTransaction:{get:()=>Ee.trans||null},waitFor:function(e,t){return e=xe.resolve("function"==typeof e?An.ignoreTransaction(e):e).timeout(t||6e4),Ee.trans?Ee.trans.waitFor(e):e},Promise:xe,debug:{get:()=>L,set:e=>{F(e,"dexie"===e?()=>!0:ht)}},derive:p,extend:i,props:c,override:b,Events:vt,on:Ht,liveQuery:In,extendObservabilitySet:Tn,getByKeyPath:S,setByKeyPath:_,delByKeyPath:function(e,t){"string"==typeof t?_(e,t,void 0):"length"in t&&[].map.call(t,(function(t){_(e,t,void 0)}))},shallowClone:C,deepClone:M,getObjectDiff:yn,cmp:jt,asap:w,minKey:-1/0,addons:[],connections:ct,errnames:Y,dependencies:Dn,semVer:"3.2.1",version:"3.2.1".split(".").map((e=>parseInt(e))).reduce(((e,t,n)=>e+t/Math.pow(10,2*n)))}),An.maxKey=Kt(An.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(Ht("storagemutated",(e=>{if(!Nn){let t;ft?(t=document.createEvent("CustomEvent")).initCustomEvent("x-storagemutated-1",!0,!0,e):t=new CustomEvent("x-storagemutated-1",{detail:e}),Nn=!0,dispatchEvent(t),Nn=!1}})),addEventListener("x-storagemutated-1",(({detail:e})=>{Nn||Rn(e)})));let Nn=!1;if("undefined"!=typeof BroadcastChannel){const e=new BroadcastChannel("x-storagemutated-1");Ht("storagemutated",(t=>{Nn||e.postMessage(t)})),e.onmessage=e=>{e.data&&Rn(e.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){Ht("storagemutated",(e=>{try{Nn||("undefined"!=typeof localStorage&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach((t=>t.postMessage({type:"x-storagemutated-1",changedParts:e}))))}catch(e){}})),addEventListener("storage",(e=>{"x-storagemutated-1"===e.key&&(e=JSON.parse(e.newValue))&&Rn(e.changedParts)}));const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",(function({data:e}){e&&"x-storagemutated-1"===e.type&&Rn(e.changedParts)}))}xe.rejectionMapper=function(e,t){return!e||e instanceof G||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Q[e.name]?e:(t=new Q[e.name](t||e.message,e),"stack"in e&&d(t,"stack",{get:function(){return this.inner.stack}}),t)},F(L,ht)},8755:e=>{"use strict";e.exports=JSON.parse('{"DEFAULT":"en","FUZZY_MATCH":true,"ALL":[{"name":"zh-cn","label":"","labels":{"zh-tw":"","en":"Simplified Chinese","ja":"","vi":"Ting Trung gin th"}},{"name":"zh-tw","label":"","labels":{"zh-cn":"","ja":"","en":"Traditional Chinese","vi":"Trung Quc truyn thng"}},{"name":"en","label":"English","labels":{"zh-cn":"","zh-tw":"","ja":"","vi":"Ting anh"}},{"name":"ja","label":"","labels":{"zh-cn":"","zh-tw":"","en":"Japanese","vi":"Ting nht"}},{"name":"vi","label":"Ting vit","labels":{"zh-cn":"","zh-tw":"","en":"Vietnamese","ja":""}}],"zh-cn":{"common.notification":"()"},"zh-tw":{"common.notification":"()"},"en":{"common.notification":"Notifications(Legacy)"},"ja":{"common.notification":"()"},"vi":{"common.notification":"Thng bo(di sn)"}}')},35507:e=>{"use strict";e.exports=JSON.parse('{"emoji.imagePathPNG":"media/twemoji/png/","emoji.imageType":"png","image.path":"media/img/","image.path.en.logo":"media/img/logo.png","image.path.en.logo-inverse":"media/img/logo-inverse.png","sound.path":"media/sound/"}')},10241:e=>{"use strict";e.exports=JSON.parse('{"device":"desktop","notification.enable":true,"permissions":null,"localExtensions.enabled":"debug","http.timeout":30000,"socket.timeout":30000}')},33859:e=>{"use strict";e.exports=JSON.parse('{"app.windowMinWidth":748,"app.windowMinHeight":510,"app.windowDefaultWidth":1000,"app.windowDefaultHeight":750,"app.showPoweredBy":"auto","chat.cacheLife":"30MIN","chat.denyChatFromMemberProfile":false,"chat.denyShowMemberProfile":false,"chat.disableChatHistory":false,"chat.fetchUserProfileOnDemand":true,"chat.autoActiveNextChat":true,"chat.flow.size":20,"chat.hideAllSidebar":false,"chat.hideChatAvatar":false,"chat.hideStatusDot":false,"chat.markdown.html":true,"chat.mentionOthers":true,"chat.messageList.useInverseColumn":"auto","chat.muteOnChatNotActive":false,"chat.sendbox.height":100,"chat.sendbox.enableSyncSize":true,"chat.sendbox.focusOnActiveChat":true,"chat.sendCode.enable":true,"chat.sendCode.langs":["HTML",{"label":"JavaScript","value":"js"},"CSS","Java","PHP","Python","JSON",{"label":"C++","value":"cpp"},"C",{"label":"C#","value":"csharp"},"Swift","Go","Bash","XML","yaml",{"label":"TypeScript","value":"ts"},"Less","SCSS","Dart","Ruby","SQL",{"label":"Kotlin","value":"kt"},"Ini","Apache","Makefile","Perl","Diff","CMake"],"chat.sendMarkdown":true,"chat.showMeAsMySenderName":false,"chat.showNoticeOnChatTitle":false,"chat.simpleChatView":false,"chat.suggestPanelShowTime":10000,"chat.urlInspector":true,"chat.bulletinNotificationCondition":true,"chat.autoScrollToActiveChat":true,"chat.image.autoDownloadSize":"1MB","defaultUser":null,"exts.app.home.hideExtensionsApp":false,"exts.categories":false,"hotkey.sendMessageOptions":["Enter","Alt+Enter","Ctrl+Enter","Shift+Enter","Ctrl+Shift+Enter","Ctrl+Alt+Enter"],"license.fullname":"ZenTao Open Software License ZOSL 1.0","license.name":"ZOSL 1.0","license.url":"http://zpl.pub/page/zoslv1.html","login.ldap":true,"login.skipHTTPSecurityAlert":true,"markdown.hintUrl":"https://markdown-zh.readthedocs.io/en/latest/","member.showAvatar":true,"menu.width":200,"navbar.width":50,"page.more.size":20,"page.start.size":20,"showDailySignMessage":true,"todo.enable":true,"webview.frame.hiddenNavButtons":false,"qrcode.login.enable":true,"mobile.getAppUrl":"https://www.xuanim.com/page/getapp.html","message.interval.minute":5,"conference.showParticipants.limit":30,"app.timeToShowMainWindowAfterOffline":"3MIN","app.hideLogout":false,"app.shortenReconnectMessage":false}')},44575:e=>{"use strict";e.exports=JSON.parse('{"app.companyName":"","app.companyShortName":"","chat.addAdminForGroup":"{0}","chat.addAdminForGroup.confirm":"{0}","chat.all":"","chat.atHim":"@/","chat.atHim.f":"@","chat.atHim.m":"@","chat.bulletin.cancel":"","chat.bulletin.expiryDate":"","chat.bulletin.settings":"","chat.bulletin.type":"","chat.bulletin.type.bulletin":"","chat.bulletin.type.notice":"","chat.committers.blocked":"","chat.committers.blockedTip":"","chat.committers.committersSettingTip":"","chat.committers.setCommitters":"","chat.committers.setCommittersFormat":"{0}","chat.committers.type.admins":"","chat.committers.type.all":"","chat.committers.type.whitelist":"","chat.confirmSendFiles.format":" {0} ","chat.copyChatGID":" ID","chat.create.chatType.normal":"","chat.create.chatType.public":"","chat.create.chatTypeTip":"","chat.create.chatWith.format":" {0} ","chat.create.filterByDept":"","chat.create.group.format":" {0} ","chat.create.groupsTip":"","chat.create.join":"","chat.create.joinGroup.format":" {0}","chat.create.joinGroupTip":"","chat.create.mustIncludeYourself":"","chat.create.newChatNameTip":"","chat.create.title":"","chat.createNewChat.format":"{0}  {1}","chat.deleted":"","chat.deletedOne2OneTip":"","chat.exit.message":"{0} ","chat.fontSize.current.format":" {0}","chat.fontSize.resetDefault":"","chat.group.archive":"","chat.group.archive.alert":"","chat.group.archived":"","chat.group.archivedTip":"","chat.group.avatar":"","chat.group.default":"","chat.group.dismiss":"","chat.group.dismiss.message":"{0} ","chat.group.dismissConfirm":"{0}","chat.group.dismissTip":" {0} ","chat.group.dismissed":"","chat.group.exit":"","chat.group.exitConfirm":"{0}","chat.group.exitTip":"","chat.group.groupsVisual":"","chat.group.limited":"16","chat.group.members":"","chat.group.merge":"","chat.group.mergeTips":"","chat.group.mergeTo":" {0} ","chat.group.name":"","chat.group.publicVisual":"","chat.group.setting.adminInvite":"","chat.group.setting.public":"","chat.group.setting.public.tips":"","chat.group.settings":"","chat.group.settings.groupAvatar.change":"","chat.group.settings.groupAvatar.chooseColor":"","chat.group.settings.groupAvatar.chooseColorTips":"","chat.group.settings.groupAvatar.customText":"","chat.group.settings.groupAvatar.customTextTooLong":"","chat.group.settings.groupAvatar.inputTextPlaceholder":"","chat.group.settings.groupAvatar.textAvatar":"","chat.group.settings.groupAvatar.uploadAvatar":"","chat.group.start":"","chat.group.tempName":"-{0}","chat.group.transfer":"","chat.group.transferTips":"","chat.group.unarchive":"","chat.group.upload":"","chat.group.visibility":"","chat.groupName.format":"{0}{1}","chat.invite":"","chat.invite.choosed":"","chat.invite.removeAll":"","chat.invite.selectMembers":"","chat.invite.title":"","chat.inviteAndCreateNewChat.format":"{0}  {1}","chat.inviteMembersJoinChat.format":"{0}  {1} ","chat.join.message":"{0}","chat.kickOffFromGroup":"","chat.kickOffFromGroup.confirm":"{0}","chat.kickOffFromGroup.confirm.batch":"","chat.loadMoreMessage":"","chat.membersCount.format":"{0}","chat.menu.addCategory":"","chat.menu.addCategory.title":"","chat.menu.allChats":"","chat.menu.contacts":"","chat.menu.createChat":"","chat.menu.currentChat":"","chat.menu.emptySearchResultTip":" {0} ","chat.menu.groups":"","chat.menu.private":"","chat.menu.recents":"","chat.menu.resultTooMany":"","chat.menu.searchResult":"","chat.menu.searchTooShort":"","chat.message.atAll":"","chat.message.bulletin.type.bulletin":"","chat.message.bulletin.type.notice":"","chat.message.cannotSendOnOffline":"","chat.message.clickToCollapse":"","chat.message.clickToExpand":"","chat.message.copy":"","chat.message.copyMarkdown":" Markdown","chat.message.deleted":"","chat.message.expandAllReplies":"","chat.message.loadCard":"","chat.message.notification.file.cancelReceive":"{0}  {1}","chat.message.notification.file.cancelSend":"{0}  {1}","chat.message.notification.file.readyToReceive":"{0}  {1}","chat.message.notification.file.reciveDone":"{0} ","chat.message.notification.file.rejctReceive":"{0}  {1}","chat.message.notification.file.terminalSend":"{0}  {1}","chat.message.notification.notify-handle-process":"","chat.message.notification.notify-handle-review":"","chat.message.notification.notify-handle-view":"","chat.message.pin":"","chat.message.pinned":"","chat.message.provider.format":"{0}","chat.message.reedit":"","chat.message.refreshCard":"","chat.message.reply":"","chat.message.resend":"","chat.message.retract":"","chat.message.retracted":"{0}","chat.message.retracted.byAdmin":"{0}","chat.message.sendFailed":"","chat.message.senderMe":"","chat.message.type.code":"","chat.message.type.emoji":"","chat.message.type.image":"","chat.message.type.object":"","chat.message.type.url":"","chat.message.unpin":"","chat.message.userSendAt":"{user}{time}","chat.mute.label":"","chat.noMoreMessage":"","chat.notInGroupTip":"","chat.one2one.typing":"...","chat.privateChat.name":"{0}","chat.public.copyInvitation":"","chat.public.label":"","chat.public.setPrivate":"","chat.public.setPublic":"","chat.removeAdminForGroup":"{0}","chat.removeAdminForGroup.confirm":"{0}","chat.rename.newTitle":"","chat.rename.newTitleRequired":"","chat.rename.someRenameGroup.format":"{0}  {1}","chat.rename.title":"","chat.role.admin":"","chat.selectMembers":"","chat.selectMentions":"","chat.send.sendSuccess":" {0} ","chat.send.sending":"...","chat.sendClipboardImage":"","chat.sendCode.codeName":"","chat.sendCode.content.placeholder":"","chat.sendCode.defaultLanguage":"","chat.sendCode.sendBtnLabel":"","chat.sendCodeDialog.title":"","chat.sendMessage":"","chat.sendbox.changeHotkeyTip":"","chat.sendbox.memberNotInGroup":"{0}","chat.sendbox.placeholder.memberIsBusy":"{0}{1}","chat.sendbox.placeholder.memberIsOffline":"{0}","chat.sendbox.placeholder.sendMessage":"","chat.sendbox.toolbar.bulletin":"","chat.sendbox.toolbar.captureScreen":"","chat.sendbox.toolbar.changeHotkeyTip":"","chat.sendbox.toolbar.code":"","chat.sendbox.toolbar.command":"","chat.sendbox.toolbar.emoticon":"","chat.sendbox.toolbar.file":"","chat.sendbox.toolbar.file.collabora":"","chat.sendbox.toolbar.file.offline":"","chat.sendbox.toolbar.file.online":"","chat.sendbox.toolbar.file.online.offlinewarning":"","chat.sendbox.toolbar.file.online.unusable":"","chat.sendbox.toolbar.image":"","chat.sendbox.toolbar.markdown.disabled":"Markdown - ","chat.sendbox.toolbar.markdown.enabled":"Markdown - ","chat.sendbox.toolbar.markdownGuide":"Markdown ","chat.sendbox.toolbar.moreOptions":"","chat.sendbox.toolbar.previewDraft":"","chat.sendbox.toolbar.send":"","chat.sendbox.toolbar.setFontSize":"","chat.sendbox.toolbar.tips":"","chat.share":"","chat.share.selectChats":"","chat.share.sendSuccess":" {0} ","chat.share.sending":"...","chat.sidebar.cancelSelection":"","chat.sidebar.close":"","chat.sidebar.createChat":"","chat.sidebar.createGroup":"","chat.sidebar.invite":"","chat.sidebar.invite.action":"","chat.sidebar.removeMember":"","chat.sidebar.tab.files.label":"","chat.sidebar.tab.files.loading":"","chat.sidebar.tab.files.noFilesHere":"","chat.sidebar.tab.peoples.label":"","chat.sidebar.tab.profile.label":"","chat.sidebar.tab.recentContacts.label":"","chat.sidebar.watch":"","chat.status.atAll":"@","chat.status.atMe":"@","chat.systemGroup.name":"","chat.tempChat.name":"","chat.tips.close":"","chat.tips.dragging":"","chat.tips.markdown":" Markdown ","chat.tips.pasting":"","chat.tips.screenshots":"","chat.tips.title":"","chat.toolbar.cancelHide":"","chat.toolbar.cancelMute":"","chat.toolbar.freeze":"","chat.toolbar.hide":"","chat.toolbar.history":"","chat.toolbar.invite":"","chat.toolbar.more":"","chat.toolbar.mute":"","chat.toolbar.scrollToBottom":"","chat.toolbar.scrollToTarget":"","chat.toolbar.scrollToTop":"","chat.toolbar.sidebar":"","chat.toolbar.star":"","chat.toolbar.unstar":"","chat.view.context":"","chats.cannotJoinArchivedChat":"","chats.chat.search.include":"","chats.chat.search.result.format":" {0}  {1} ","chats.chat.selectOneOnMenu":"","chats.confirmToJoinPublicChat":"{0}","chats.create.label":"","chats.dragNDropFileMessage":"","chats.history.fetchAll":"","chats.history.fetchAllFromServer":"","chats.history.fetchFinish":"","chats.history.fetchFromServer":"","chats.history.fetchingMessages":"","chats.history.group.contacts":"","chats.history.group.groups":"","chats.history.group.others":"","chats.history.localChat":"","chats.history.noMessages":"","chats.history.search.filetype.all":"","chats.history.search.filetype.file":"","chats.history.search.filetype.image":"","chats.history.search.placeholder":"","chats.history.search.result.format":" {0} ","chats.history.search.result.noResults":"","chats.history.search.result.notShow.format":" {0} ","chats.history.search.result.selectTip":"","chats.history.search.result.toMany":"","chats.history.search.type.all":"","chats.history.search.type.choosed":"","chats.history.search.type.contacts":"","chats.history.search.type.groups":"","chats.history.searching":"","chats.history.searching.format":" {0} ","chats.history.selectChatTip":"","chats.history.selectFetchTime":"","chats.history.sync.fast":"","chats.history.sync.slow":"","chats.history.title":"","chats.joinedChatNotFound":"","chats.menu.fileSaved":"","chats.menu.filesSaved.format":"{0} ","chats.menu.group.add":"","chats.menu.group.addExist":"","chats.menu.group.create":"","chats.menu.group.createTip":"","chats.menu.group.current":"","chats.menu.group.default":"","chats.menu.group.delete":"","chats.menu.group.delete.confirm.format":"{0}","chats.menu.group.delete.tip.format":"{0}","chats.menu.group.deleted":"","chats.menu.group.dismissed":"","chats.menu.group.existsTip":"","chats.menu.group.noCategoryToAdd":"","chats.menu.group.other":"","chats.menu.group.rename":"","chats.menu.group.renameTip":"","chats.menu.group.requiredNewName":"","chats.menu.group.stared":"","chats.menu.groupType.category":"","chats.menu.groupType.dept":"","chats.menu.groupType.normal":"","chats.menu.groupType.role":"","chats.menu.switchView":"","chats.search.contacts":"","chats.search.groups":"","chats.search.recents":"","common.about":"","common.back":"","common.busyTip":"","common.cancel":"","common.changeUploadPhoto":"","common.checkUpdate":"","common.clickShowMoreFormat":" {0} ","common.close":"","common.closeWindowConfirm":"","common.collapse":"","common.confirm":"","common.confirmCreateAppWindow":"","common.confirmQuitIM":"","common.confirmSelect":"","common.continue":"","common.copied":"","common.copy":"","common.copyCode":"","common.copyFormat":" {0}","common.copyLink":"","common.copyText":"","common.copyrightFormat":"  {year} {name}","common.delete":"","common.download":"","common.draft":"","common.enterFullscreen":"","common.exit":"","common.exitFullscreen":"","common.exitIM":"","common.expand":"","common.files.findCount.none":"","common.group":"","common.groupBy":"","common.loadMore":"","common.loading":"","common.more":"","common.moreActions":"","common.moreThan":"{0}","common.multiSelection":"","common.noAvailableActions":"","common.notFoundOptions":"","common.notification":"","common.notificationSubname":"","common.open":"","common.openLink":"","common.poweredBy":"","common.previewCropper":"","common.refresh":"","common.remove":"","common.rename":"","common.required":"","common.requiredField.format":"{0}","common.rerequest":"","common.restore":"","common.save":"","common.search":"","common.selectAll":"","common.selectInverse":"","common.selectLanguage":"","common.setting":"","common.settings":"","common.shareMenu":"","common.sortBy":"","common.switchLanguage":"","common.systemPreferneces":"","common.time.day":"","common.time.hour":"","common.time.minute":"","common.time.month":"","common.time.quarter":"","common.time.week":"","common.time.year":"","common.unselectAll":"","common.viewDetail":"","common.xuanbot":"","conference.audioDisabled":"","conference.audioDisabledMessage":"","conference.cancel":"","conference.close":"","conference.closeConfirmMessage":"","conference.closeConfirmTitle":"","conference.closeVideo":"","conference.connectionInfoFormat":"{0}","conference.create":"","conference.createConfirmMessage":" {name} ","conference.createFailed.alreadyJoined":"{name}","conference.createMenu.call":"","conference.createMenu.startForAll":"","conference.createMenu.startWithSelections":"","conference.createMenu.video":"","conference.detectAudioUnavailable":"","conference.displayType.screen":"","conference.displayType.window":"","conference.entireScreen":"","conference.error.publishVideo":"[{error}]","conference.hangup":"","conference.hangupConfirmTitle":"","conference.ignore":"","conference.join":"","conference.joinFailed.alreadyJoined":"{name}","conference.leave":"","conference.mediaTypes.audio":"","conference.mediaTypes.video":"","conference.message.closed":"","conference.message.closing":"","conference.message.createFail":"","conference.message.creating":"","conference.message.ignored":"","conference.message.incoming":"{openedBy}{participantsInfo}","conference.message.joinFail":"","conference.message.joinedOnOtherDevice":"","conference.message.open":"{participantsInfo}","conference.message.server_connected":"{participantsInfo}{connectionInfo}","conference.message.server_connecting":"","conference.message.server_disconnecting":"","conference.message.server_error":"","conference.message.server_ready":"","conference.message.server_sdp_error":"","conference.mute":"","conference.muted":"","conference.othersAlreadyShareScreen":"","conference.participants.ellipsisTotalFormat":" {0} ","conference.participants.joinPunctuation":"","conference.participants.me":"","conference.participants.totalFormat":" {0} ","conference.participantsList":"","conference.play.fail":" {0} ","conference.publish.fail":"","conference.publishVideo":"","conference.rejoin":"","conference.retryCreate":"","conference.screenNamePrefix":" ","conference.screenSharing":"","conference.selectAllChatMembers":"","conference.selectDisplaySourceToShare":"","conference.selectManual":"","conference.selectMediaTypes":"","conference.selectParticipants":"","conference.shareScreen":"","conference.shareScreen.noPermission":"","conference.status.closed":"","conference.status.closing":"","conference.status.createFail":"","conference.status.creating":"","conference.status.ignored":"","conference.status.incoming":"{openedBy}{participantsCount}","conference.status.joinedOnOtherDevice":"","conference.status.muted":"","conference.status.offline":"","conference.status.open":"","conference.status.open.invite":"","conference.status.server_connected":"","conference.status.server_connecting":"","conference.status.server_disconnecting":"","conference.status.server_error":"","conference.status.server_ready":"","conference.switchToConferenceWindow":"","conference.unignore":"","conference.unmute":"","conference.unpublishScreencast":"","conference.unpublishVideo":"","conference.videoNotAllowedWithScreen":"","conference.videoPublishing":"","conference.window.closeConfirm":"","conference.window.title":" - {0}","contacts":"","contacts.groups.created":"","contacts.groups.joined":"","contacts.groups.public":"","contacts.members.all":"","contacts.nav.groups":"","contacts.nav.members":"","debug.inspectElement":"","diagnostics.contactUs":"","diagnostics.copiedDiagnoseLogs":"","diagnostics.copyDiagnoseLogs":"","diagnostics.detail":"","diagnostics.diagnoseNetwork":"","diagnostics.diagnoseUnexpectedInterruption":"","diagnostics.endDiagnoseNetwork":"","diagnostics.endDiagnoseNetworkWithErrors":" {errorsCount} {warningsCount} ","diagnostics.expandAllDetail":"","diagnostics.exportDiagnoseLogs":"","diagnostics.moreSuggestions":"...","diagnostics.newVersionAvailable":" {newVersion} {currentVersion} {downloadURL} ","diagnostics.pingLogs":"ping {hostname}  {pingTime}ms","diagnostics.pingWithLongTime":" ping {hostname}  {pingTime}ms","diagnostics.resolveHostname":" {hostname}  IP {ip}","diagnostics.restartDiagnose":"","diagnostics.serverInfo":" {serverInfoUrl}  serverInfo ","diagnostics.startingDiagnoseNetwork":"{url}{account}{version}","diagnostics.suggestions":"","diagnostics.tracerouteError":"Traceroute {hostname} ","diagnostics.tracerouteInfo":"Traceroute {hostname} ","diagnostics.waitForDiagnosing":"","dialog.appClose.cancelAction":"","dialog.appClose.minimizeMainWindow":"","dialog.appClose.quitApp":"","dialog.appClose.rememberOption":"","dialog.appClose.title":"","dialog.fileSaveTo":"","dialog.openFile":"","dialog.reloadWindowConfirm":"","dialog.reloadWindowConfirmTip":"","emoji.category.activity":"","emoji.category.flags":"","emoji.category.food":"","emoji.category.nature":"","emoji.category.objects":"","emoji.category.people":"","emoji.category.symbols":"","emoji.category.travel":"","emoji.title":"","error.ACTION_NOT_ALLOWED":"","error.BUSY":"","error.CANNOT_HANDLE_IMAGE":"","error.CLIENT_REQUIRE_UPDATE":"","error.COMMON_ERROR":"","error.CONFERENCE_NO_SCREEN":"","error.CONFERENCE_NO_VIDEO":"","error.EXT_NAME_ALREADY_INSTALLED":"","error.EXT_NOT_EXT_SOURCE":" zip xext  package.json ","error.EXT_NOT_FOUND":"","error.EXT_UNZIP_ERROR":"","error.HTTP_ABORT":"","error.HTTP_DATA_ERROR":"","error.HTTP_ECONNREFUSED":" {url} ","error.HTTP_EHOSTDOWN":" {hostname} ","error.HTTP_ENETUNREACH":" {hostname} ","error.HTTP_ETIMEDOUT":" {url} ","error.HTTP_REQUEST_FAIL":"","error.HTTP_STATUS_401":"","error.HTTP_STATUS_402":"","error.HTTP_STATUS_403":"","error.HTTP_STATUS_405":"","error.HTTP_STATUS_500":"","error.HTTP_STATUS_ERROR":"","error.IMAGE_NOT_FIND":" {0}","error.INVALID_TOKEN":"","error.INVALID_URL":"URL ","error.NAMESERVER_NOT_FOUND":"DNS ","error.NET_LOOKUP_FAIL":" {hostname}","error.NET_OFFLINE":"","error.NET_PING_FAIL":"ping {hostname} ","error.NET_TRACEROUTE_ERROR":"Traceroute {hostname} ","error.SERVER_VERSION_NOT_SUPPORT":"{version} {serverVersion} 5.6 {version}","error.SERVER_VERSION_UNKNOWN":"","error.SOCKET_CLOSED":" Socket ","error.SOCKET_CLOSE_ABNORMAL":" Socket ","error.SOCKET_TIMEOUT":"Socket ","error.THEME_WITHOUT_CSS_FILE":" CSS ","error.TIMEOUT":"","error.UPDATER_UNZIP_ERROR":"","error.UPLOAD_DISABLED":"","error.UPLOAD_FILE_FAILED":"","error.UPLOAD_FILE_IS_TOO_LARGE":" {0} ","error.UPLOAD_FILE_IS_TYPE_ERROR":"","error.UPLOAD_FILE_IS_ZERO_SIZE":" 0","error.UPLOAD_FOLDER_NOT_SUPPORTED":"","error.USER_CANCELED":"","error.USER_DATA_PATH_DENY":"","error.USER_DENY_UPLOAD":"","error.USER_INVALID":"","error.USER_KICKOFF":"","error.USER_KICKOFF_1":"","error.USER_KICKOFF_2":"","error.USER_KICKOFF_3":"","error.USER_KICKOFF_4":"","error.suggestion.CLIENT_REQUIRE_UPDATE":"","error.suggestion.HTTP_DATA_ERROR":" XXD | XXB | mysql  XXB ","error.suggestion.HTTP_ECONNREFUSED":" {port} | XXD ","error.suggestion.HTTP_EHOSTDOWN":"| XXD ","error.suggestion.HTTP_ENETUNREACH":"| XXD ","error.suggestion.HTTP_ETIMEDOUT":"| XXD | {hostname}  {port}|","error.suggestion.HTTP_REQUEST_FAIL":" IP ","error.suggestion.HTTP_STATUS_401":" XXB ","error.suggestion.HTTP_STATUS_402":" 10 | XXB ","error.suggestion.HTTP_STATUS_403":" XXB ","error.suggestion.HTTP_STATUS_405":" https://www.xuanim.com/license-browse.html ","error.suggestion.HTTP_STATUS_500":" XXB | mysql  XXB ","error.suggestion.HTTP_STATUS_ERROR":" XXB | mysql  XXB ","error.suggestion.NAMESERVER_NOT_FOUND":" DNS  DNS ","error.suggestion.NET_LOOKUP_FAIL":"| DNS | {hostname} |","error.suggestion.NET_OFFLINE":"|||","error.suggestion.NET_PING_FAIL":"|| {hostname} ","error.suggestion.NET_TRACEROUTE_ERROR":"|| {hostname} ","error.suggestion.RTC_NOT_SUPPORT":"","error.suggestion.RTC_ONLY_ONE2ONE":"","error.suggestion.SERVER_VERSION_NOT_SUPPORT":"","error.suggestion.SERVER_VERSION_UNKNOWN":"","error.suggestion.SOCKET_CLOSED":" XXD | XXD ","error.suggestion.SOCKET_CLOSE_ABNORMAL":" XXD | XXD ","error.suggestion.SOCKET_TIMEOUT":"|","error.suggestion.USER_INVALID":"","ext.api.detail.definition.header":"","ext.api.detail.example.header":"","ext.api.detail.params.column.default":"","ext.api.detail.params.column.explain":"","ext.api.detail.params.column.name":"","ext.api.detail.params.column.option":"","ext.api.detail.params.column.type":"","ext.api.detail.params.header":"","ext.api.detail.returns.column.explain":"","ext.api.detail.returns.column.type":"","ext.api.detail.returns.header":"","ext.api.developLink":"","ext.api.extensionApi":"API","ext.api.groupType.level":"","ext.api.groupType.module":"","ext.api.groupType.none":"","ext.api.level.description.L0":" 0  API","ext.api.level.description.L1":"","ext.api.level.description.L2":"","ext.api.level.description.L3":"","ext.api.level.description.L4":" API ","ext.api.level.description.L5":" API","ext.api.level.description.L6":" React ","ext.api.level.description.L7":" NodeJS  electron","ext.api.noPermission":" API","ext.api.search.noData":"","ext.api.searchBox.placeholder":"API","ext.api.searchResult":"","ext.api.sortType.level":"","ext.api.sortType.name":"","ext.api.type.class":"","ext.api.type.function":"","ext.api.type.interface":"","ext.api.type.module":"","ext.api.type.type":"","ext.api.type.var":"","ext.app.about":"","ext.app.close":"","ext.app.copyUrl":"","ext.app.goBack":"","ext.app.goForward":"","ext.app.goHome":"","ext.app.open":"","ext.app.openDevTools":"","ext.app.openInBrowser":"","ext.app.pinnedOnMenu":"","ext.app.redirectConfirm":" {url}","ext.app.refresh":"","ext.app.share":"","ext.app.unpinnedOnMenu":"","ext.author":"","ext.bugs":"","ext.buildIn":"","ext.buildIn.hint":"","ext.cannotUninstallBuildIn":"","ext.cannotUninstallRemote":"","ext.disable":"","ext.disabled":"","ext.downloading":"...{0}","ext.enable":"","ext.extension.installTime":"","ext.extension.loadPath":"","ext.extension.loadTime":"","ext.extension.needRestart":"","ext.extension.needRestartTip":"","ext.extension.pkgHasError":"","ext.extension.updateTime":"","ext.extensions.all":"","ext.extensions.apps":"","ext.extensions.developing":"","ext.extensions.installConfirm":"","ext.extensions.installDevExtension":"","ext.extensions.installExtension":"","ext.extensions.installLocalExtTip":" .zip ","ext.extensions.installLocalExtension":"","ext.extensions.installed":"","ext.extensions.moreActions":"","ext.extensions.needRestartTip.format":" {0} ","ext.extensions.plugins":"","ext.extensions.reload":"","ext.extensions.reloadFinish":"","ext.extensions.restart":"","ext.extensions.searchResult":"","ext.extensions.showFolder":"","ext.extensions.themes":"","ext.files":"","ext.files.all":"","ext.files.docs":"","ext.files.findCount.format":" {0} ","ext.files.findCount.none":"","ext.files.findToMany.format":" {0}  {1}  {2} ","ext.files.images":"","ext.files.others":"","ext.files.programs":"","ext.group.action":"","ext.group.addMember":"","ext.group.createdDate":"","ext.group.groupManagement":"","ext.group.groupName":"","ext.group.groupNoDataTip":"","ext.group.groupOwner":"","ext.group.groupRename":"","ext.group.groupSearchNoDataTip":"","ext.group.id":"ID","ext.group.joinTime":"","ext.group.kickOwnerTip":"","ext.group.lastActiveTime":"","ext.group.lastPost":"","ext.group.lastSeen":"","ext.group.memberCount":"","ext.group.memberManagement":"","ext.group.memberName":"","ext.group.memberSearch.placeholder":"","ext.group.memberSearchNoDataTip":"","ext.group.mergeGroup":"","ext.group.publicType":"","ext.group.reload":"","ext.group.removeGroupAdmin":"","ext.group.search.placeholder":"","ext.group.setGroupAdmin":"","ext.group.setGroupAdmin.confirm":"{0}","ext.group.setOwner":"","ext.group.setOwner.confirm":"{0}","ext.group.typePrivate":"","ext.group.typePublic":"","ext.home.addMoreApps":"","ext.home.appsCount.format":" {0} ","ext.home.findAppsCount.format":" {0} ","ext.home.manageInExtensionsApp":"","ext.homepage":"","ext.install":"","ext.installFail":"","ext.installSuccess.format":" {0} ","ext.license":"","ext.openApp":"","ext.overrideInstall.format":"{0} {1}{2} {3}","ext.publisher":"","ext.publisher.format":" {0} ","ext.remote.hint":"","ext.repository":"","ext.themes.count.format":" {0} ","ext.themes.current":"","ext.themes.default":"","ext.themes.inside":"","ext.type.app":"","ext.type.plugin":"","ext.type.theme":"","ext.unavailable":"","ext.uninstall":"","ext.uninstallConfirm.format":" {0}","ext.uninstallSuccess.format":" {0} ","ext.updateInstall.format":"{0} {1}  {2}","exts.api.category.chat":"","exts.api.category.ext":"","exts.api.category.platform":"","exts.api.category.ui":"","exts.api.category.utils":"","exts.api.desc":"API","exts.api.label":"API","exts.appNoView":"","exts.appNotFound.format":"{0}","exts.category.buildIn":"","exts.category.others":"","exts.category.remote":"","exts.extensions.desc":"","exts.extensions.label":"","exts.files.desc":"","exts.files.label":"","exts.firefoxSend.desc":"","exts.firefoxSend.label":"","exts.group.desc":"","exts.group.label":"","exts.home.all":"","exts.home.desc":"","exts.home.label":"","exts.home.search":"","exts.install":"","exts.installWarning":"{0}","exts.installation.permissions":"","exts.installation.title":"{0}","exts.permission.user.getCurrentUser":"","exts.themes.desc":"","exts.themes.label":"","file.abort":"","file.abortNetwork":"","file.cannotOpenTheFile":"","file.cannotPreviewTheFile":"","file.collabora":"","file.collabora.abbr":"","file.collabora.forwardWarning":"","file.collabora.prompt":"","file.downloadFailed":"","file.downloading":"","file.error.acces":"","file.error.busy":"","file.error.remove":"","file.fileSavedAt.format":" {0}","file.image.title":"","file.loading":"","file.notFoundInServer":"","file.open":"","file.openFolder":"","file.preview":"","file.preview.unsupported":"","file.preview.warning":"","file.retracted":"","file.reupload":"","file.rtc.accept":"","file.rtc.notFound":"","file.rtc.refuse":"","file.rtc.time":" {0}s","file.rtc.transferring":"","file.rtc.waiting":"","file.sending":"","file.title.format":"{0}","file.upload.large.hint":"","file.upload.large.tip":"","file.upload.p2p.always":"","file.upload.p2p.exitHint.content":"","file.upload.p2p.exitHint.sendingFileOnlyOne":"","file.upload.p2p.hint":"","file.upload.p2p.label":"","file.uploadFailed":"","file.uploading":"","gallery.view.audio":"","gallery.view.image":"","gallery.view.media":"","gallery.view.video":"","imageCutter.captureScreen":"","imageCutter.hideCurrentWindowAndCaptureScreen":"","imageCutter.setGlobalHotkey":"","integrations.collaboraOffice.notConfigured":"Collabora Office ","login.account.hint":"/","login.account.label":"","login.autoConnect.connectIM":"","login.autoConnect.connecting":"","login.autoConnect.connecting.short":"","login.autoConnect.errorDetail":"","login.autoConnect.failedAndWait":"{0} ","login.autoConnect.logout":"","login.autoConnect.wait":"{0} ","login.autoConnect.wait.short":"","login.autoLogin":"","login.btn.label":"  ","login.btn.logging":"","login.ldap":"LDAP","login.ldap.confirm":" LDAP ","login.moreLoginSettings":"","login.nonSecurity.btn":"","login.nonSecurity.confirm":" http  {0}","login.nonSecurity.detail":" https ","login.openAtLogin":"","login.openAtLogin.failure":"","login.password.clear":"","login.password.label":"","login.rememberMe":"","login.retry":"","login.serverUrl.hint":"https://xuanxuan.chat","login.serverUrl.label":"","login.showServerSetting":"","login.signed":"","login.swapUser":"","media.next":"","media.prev":"","media.preview":"","media.rotate90":" 90","media.zoomIn":"","media.zoomOut":"","media.zoomReset":"","member.dept":"","member.dept.short":"","member.dept.unset":"","member.gender.f":"","member.gender.m":"","member.him":"/","member.him.f":"","member.him.m":"","member.profile.address":"","member.profile.contactInfo":"","member.profile.editUserInfo":"","member.profile.email":"","member.profile.gender":"","member.profile.mobile":"","member.profile.phone":"","member.profile.realname":"","member.profile.save":"","member.profile.sendMessage":"","member.profile.site":"","member.profile.view":"","member.profile.weixin":"","member.role":"","member.role.dev":"","member.role.market":"","member.role.office":"","member.role.pm":"","member.role.po":"","member.role.qa":"","member.role.qd":"","member.role.sale":"","member.status":"","member.status.away":"","member.status.busy":"","member.status.disconnect":"","member.status.logged":"","member.status.meeting":"","member.status.offline":"","member.status.online":"","member.status.unverified":"","menu.about":"","menu.bringAllToFront":"","menu.close":"","menu.community":"","menu.copy":"","menu.copy.select":" {0}","menu.copyImage":"","menu.createNewWindow":"...","menu.cut":"","menu.edit":"","menu.help":"","menu.hideCurrentWindow":"","menu.hideOtherWindows":"","menu.image.copy":"","menu.image.download":"","menu.image.open":"","menu.image.saveAs":"","menu.image.view":"","menu.issues":"","menu.minimize":"","menu.paste":"","menu.project":"","menu.quit":"","menu.redo":"","menu.reload":"","menu.selectAll":"","menu.showAllWindows":"","menu.toggleDeveloperTool":"","menu.toggleFullscreen":"","menu.undo":"","menu.view":"","menu.website":"","menu.window":"","mobile.download.tip":" >>","mobile.download.title":"","mobile.login.tip":" >>","mobile.login.title":"","mobile.logined.tip":"{0} ","navbar.chats.label":"","navbar.chats.menu":"/","navbar.contacts.label":"","navbar.exts.label":"","navbar.groups.label":"","notification.memberSays.format":"{0} ","notification.memberSaysInGroup.format":"{0}  {1} ","notification.receviedMessages.format":" {0} ","pager.next":"","pager.prev":"","qrcode.login.fail":"","qrcode.login.refresh":"","setting.advanced.initConference":"","setting.advanced.initConferenceDescription":"","setting.chats.enableAnimate":"","setting.chats.enableSearchInEmojiPicker":"","setting.chats.listenClipboardImage":"","setting.chats.sendBigFileOnline":"","setting.chats.sendHDEmoticon":"","setting.chats.sendTypingStatus":"","setting.chats.showMeOnMenu":"","setting.chats.showMessageTip":"","setting.hotkeys.cantSetOnlyModifyKeys":"Ctrl, Alt/Option, Shift, Windows/Command","setting.hotkeys.globalCaptureScreen":"","setting.hotkeys.globalFocusWindow":"","setting.hotkeys.sendMessage":"","setting.message.reset":"","setting.navigation.navbarShowRecents":"","setting.navigation.onlyShowNoticeCountOnRecents":"","setting.navigation.showAvatarOnBottom":"","setting.notification.enableSoundNotification":"","setting.notification.enableWindowNotification":"","setting.notification.flashTrayIcon":"","setting.notification.flashTrayIconCondition":"","setting.notification.muteOnUserIsBusy":"/","setting.notification.onNeed":"","setting.notification.onWindowBlur":"","setting.notification.onWindowHide":"","setting.notification.playSoundCondition":"","setting.notification.safeWindowNotificationTip":"","setting.notification.windowNotificationCondition":"","setting.openCacheFilePath.noCache":"","setting.openCacheFilePath.tip":"","setting.reset.btn":"","setting.reset.tip":"","setting.section.advanced":"","setting.section.chats":"","setting.section.hotkeys":"","setting.section.navigation":"","setting.section.notification":"","setting.section.openCacheFilePath":"","setting.section.reset":"","setting.section.windows":"","setting.windows.askEveryTime":"","setting.windows.hideWindowOnBlur":"","setting.windows.hideWindowOnOpenAtLogin":"","setting.windows.minimizeMainWindow":"","setting.windows.onClickCloseButton":"","setting.windows.quitApp":"","setting.windows.removeFromTaskbarOnHide":"","setting.windows.zoomFactor":"","time.all":"","time.dby":"","time.format.day":"d","time.format.full":"yyyyMd","time.format.month":"Md","time.format.yearMonth":"yyyyM","time.halfYear":"","time.justNow":"","time.minute":"","time.minuteAgo":"{0}","time.oneMonth":"","time.oneWeek":"","time.oneYear":"","time.threeMonth":"","time.today":"","time.twoYear":"","time.yesterday":"","todo.beginAndEndBothRequired":"","todo.beginMustBeforeEnd":"","todo.create":"","todo.createSuccess":"","todo.edit":"","todo.input.desc.hint":" Markdown","todo.label.begin":"","todo.label.date":"","todo.label.desc":"","todo.label.end":"","todo.label.name":"","todo.label.pri":"","update.clientRequiredUpdateToLoginServer":" {0}","update.closeAndDownloadInBackground":"","update.contactAdminToUpdate":"","update.foundNewVersion":"","update.message.alreadyNew":"","update.message.downloadUrlNotAvailable":"","update.message.downloaded":"","update.message.downloading":"...","update.message.newVersionAvailable":"","update.message.unziping":"...","update.notifyMeNextTime":"","update.restartToCompleteUpdate":"","update.retryUpdate":"","update.skipThisVersion":"","update.updateNow":"","update.versionDetails":" {0} ","update.versionsFormat":" {0} {1}","user.changePassword.btn.confirm":"","user.changePassword.denySimplePassword":"6","user.changePassword.failed":"","user.changePassword.heading":"","user.changePassword.inputRequired":"{0}","user.changePassword.newPassword":"","user.changePassword.newPasswordRepeat":"","user.changePassword.notChanged":"","user.changePassword.notSupport":"","user.changePassword.passwordNotSame":"","user.changePassword.success":"","user.editInfo.emailError":"","user.editInfo.failed":"","user.editInfo.heading":"","user.editInfo.mobileError":"","user.editInfo.saveSuccess":"","user.editInfo.telError":"","usermenu.about":"","usermenu.changeAvatar":"","usermenu.changePassword":"","usermenu.exit":"","usermenu.login.qr":"","usermenu.logout":"","usermenu.openProfile":"","usermenu.setting":"","webview.foreceReload":"","webview.goBack":"","webview.goForward":"","webview.maximize":"","webview.openInBrowser":"","webview.reload":"","webview.stopLoad":"","webview.window.title":"","week.Friday":"","week.Monday":"","week.Saturday":"","week.Sunday":"","week.Thursday":"","week.Tuesday":"","week.Wednesday":""}')},91230:e=>{"use strict";e.exports=JSON.parse('{"name":"zentaoclient","productName":"zentaoclient","displayName":"","version":"7.0.0","displayVersion":"7.0","description":"","main":"./main.js","author":{"name":"","email":"sunhao@cnezsoft.com"},"homepage":"https://www.zentao.net/","company":"","license":"ZOSL 1.0 (http://zpl.pub/page/zoslv1.html)","bugs":{"url":"https://www.xuanim.com/forum/"},"dependencies":{"cheerio":"^1.0.0-rc.2","extract-zip":"^1.6.7","iconv-lite":"^0.4.23","immutable":"^3.7.6","jquery":"^3.5.1","nodejs-traceroute":"^1.2.0","ping":"^0.4.2","react-chatview":"^0.2.5","react-electron-web-view":"^2.0.1","remove-markdown":"^0.3.0","socket.io-client":"^2.2.0","pretty-format":"^27.0.6","js-beautify":"^1.14.0"},"commit":"839559059945d23f741a9651c547979db4e07fe6","buildTime":"2023-01-03T02:33:49.540Z","buildVersion":"","buildTypes":{"beta":false,"debug":false},"configurations":{"lang":{"zh-cn":{"app.title":"","common.notification":"","login.serverUrl.hint":"","common.notificationIconLabel":""},"zh-tw":{"app.title":"","common.notification":"","login.serverUrl.hint":"","common.notificationIconLabel":""},"en":{"app.title":"","app.homepage":"http://www.zentao.pm/","common.notification":"","login.serverUrl.hint":"","common.notificationIconLabel":""}},"ui":{"app.windowDefaultWidth":1280,"app.windowMinWidth":1280,"defaultThemeColor":"#0c64eb","login.skipHTTPSecurityAlert":true,"todo.enable":false,"login.ldap":false,"webview.frame.hiddenNavButtons":true}},"updater":null}')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];return void 0!==t||(t=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}},__webpack_modules__[e].call(t.exports,t,t.exports,__webpack_require__),t.loaded=!0),t.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.b=document.baseURI||self.location.href,__webpack_require__.nc=void 0;var __webpack_exports__={};(()=>{"use strict";__webpack_require__(68196),__webpack_require__(86702);var e=u(__webpack_require__(67294)),t=u(__webpack_require__(73935)),n=(__webpack_require__(7253),__webpack_require__(8842),__webpack_require__(66834),__webpack_require__(69851),__webpack_require__(12443)),r=u(__webpack_require__(13346)),o=__webpack_require__(82587),a=u(__webpack_require__(61862)),i=u(__webpack_require__(91103)),l=(__webpack_require__(34916),__webpack_require__(45030),__webpack_require__(90756));function u(e){return e&&e.__esModule?e:{default:e}}__webpack_require__(15518),PERF_MARK("uiResourceLoad"),(0,n.default)((function(){var n=document.getElementById("appContainer");PERF_MARK("uiRenderStart","uiResourceLoad","resourceLoadTime"),t.default.render(e.default.createElement(r.default,null),n,(function(){var e=document.getElementById("loading");e.parentNode.removeChild(e),setTimeout((function(){document.body.classList.remove("no-animation")}),2e3),(0,i.default)(a.default),(0,o.triggerUIReady)(),PERF_MARK("uiRenderFinish","uiRenderStart","uiFirstRenderTime")}))})),(0,l.isEmbed)()&&(0,n.default)((function(){(0,l.sendEmbedMessage)("loaded")}))})(),__FIX_DUMMY_LIBRARY_NAME_NOT_ALLOWED__=__webpack_exports__})();