var J=(e,t,a)=>new Promise((l,o)=>{var c=p=>{try{f(a.next(p))}catch(I){o(I)}},h=p=>{try{f(a.throw(p))}catch(I){o(I)}},f=p=>p.done?l(p.value):Promise.resolve(p.value).then(c,h);f((a=a.apply(e,t)).next())});import{d as U,v as y,R as te,cb as _e,X as de,o as r,m as v,cc as pe,cd as ae,ce as ve,cf as me,a as ge,cg as he,ch as fe,ci as ye,cj as Ce,j as se,an as be,y as ke,r as E,e as g,f as n,z as d,w as D,F as P,A as R,t as S,aa as k,ck as Oe,c2 as Se,G as Ee,H as Ie,u as xe,a3 as we,aA as Ae,a1 as L,bT as De,c as F,c0 as Le,ad as Te}from"./index.js";import{C as Ne}from"./index-767d7f74.js";import{a as Pe,f as Re,b as $e,p as ze}from"./index-82f3faec.js";import{u as Fe,E as X,P as T,k as N}from"./chartEditStore-512dd188.js";import{i as ne}from"./icon-f895716a.js";import{l as Be,c as Q}from"./index-391b9821.js";import{u as oe}from"./chartLayoutStore-4baab7c4.js";const Ue={class:"list-img",alt:"\u56FE\u8868\u56FE\u7247"},W=U({__name:"index",props:{chartConfig:{type:Object,required:!0}},setup(e){const t=e,a=y(""),l=()=>J(this,null,function*(){a.value=yield Pe(t.chartConfig)});return te(()=>t.chartConfig.key,()=>l(),{immediate:!0}),(o,c)=>{const h=_e("lazy");return de((r(),v("img",Ue,null,512)),[[h,a.value]])}}});function Ge(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Ke=Ge;function He(e,t,a){var l=-1,o=e.length;t<0&&(t=-t>o?0:o+t),a=a>o?o:a,a<0&&(a+=o),o=t>a?0:a-t>>>0,t>>>=0;for(var c=Array(o);++l<o;)c[l]=e[l+t];return c}var Ve=He,Me=pe,je=Ve;function Ye(e,t){return t.length<2?e:Me(e,je(t,0,-1))}var qe=Ye,Je=ae,Xe=Ke,Qe=qe,We=ve;function Ze(e,t){return t=Je(t,e),e=Qe(e,t),e==null||delete e[We(Xe(t))]}var et=Ze,tt=me;function at(e){return tt(e)?void 0:e}var st=at,nt=ge,ot=Ce,ct=et,lt=ae,it=he,rt=st,ut=fe,_t=ye,dt=1,pt=2,vt=4,mt=ut(function(e,t){var a={};if(e==null)return a;var l=!1;t=nt(t,function(c){return c=lt(c,e),l||(l=c.length>1),c}),it(e,_t(e),a),l&&(a=ot(a,dt|pt|vt,rt));for(var o=t.length;o--;)ct(a,t[o]);return a}),gt=mt;const ht=e=>(Ee("data-v-7c147ecc"),e=e(),Ie(),e),ft={class:"go-chart-common"},yt={key:0,class:"charts"},Ct={class:"tree-top"},bt=ht(()=>d("span",null,"\u6240\u6709\u5206\u7EC4",-1)),kt={class:"tree-body"},Ot={class:"chapter chapter-first"},St=["title"],Et={class:"label-count"},It=["onDragstart"],xt=["title"],wt={key:1,class:"chapter chapter-last"},At=["title"],Dt=["onDragstart"],Lt=["title"],Tt={key:1,class:"no-charts"},Nt={class:"chart-content-list"},Pt=U({__name:"index",props:{selectOptions:{type:Object,default:()=>{}},menu:{type:String,default:()=>{}}},setup(e){var M,j,Y;const t=e,a=Be(()=>be(()=>import("./index-81a5ed5b.js"),["static/js/index-81a5ed5b.js","static/css/index-f25f4c30.css","static/css/SizeSetting.vue_vue_type_style_index_0_scoped_true_lang-976f12dd.css","static/js/index-90b41ab2.js","static/css/index-2ce6d63c.css","static/js/index.js","static/css/index-a1e82c00.css","static/js/icon-f895716a.js","static/js/chartEditStore-512dd188.js","static/js/plugin-3f5f1424.js","static/js/chartLayoutStore-4baab7c4.js","static/js/index-391b9821.js","static/css/index-8038d4fd.css","static/js/index-e3a8a362.js","static/js/index-beb85927.js","static/css/index-24d4cc74.css","static/js/index-82f3faec.js","static/css/index-65bc49c3.css","static/js/tables_list-16bd57ab.js","static/js/SettingItemBox-0b7490e2.js","static/js/CollapseItem-818c6947.js","static/js/useTargetData.hook-644fac7b.js","static/js/index-767d7f74.js","static/css/index-3e214e52.css"])),{ChevronUpOutlineIcon:l,ChevronDownOutlineIcon:o}=ne.ionicons5,c=(M=window.dimensions)!=null?M:[],h=y((j=window.dimension)!=null?j:c[0]?c[0].value:""),f=(Y=window.treeData)!=null?Y:[],p=f.chart?y(t.menu=="Charts"?f.chart[h.value]:f.pivot[h.value]):y(),I=()=>{p.value=f.chart?t.menu=="Charts"?f.chart[h.value]:f.pivot[h.value]:""},x=y(!1),C=y([]),ce=()=>{x.value=!x.value;for(const i in p.value){C.value[p.value[i].id]=x.value;for(const s in p.value[i].child)C.value[p.value[i].child[s].id]=x.value}},G=i=>{C.value[i]=!C.value[i]};let u=ke({menuOptions:[],selectOptions:{},categorys:{all:[]},categoryNames:{all:"\u6240\u6709"},categorysNum:0,saveSelectOptions:{}});const $=y(),le=i=>{for(const s in i){u.selectOptions=i[s];break}};te(()=>t.selectOptions,i=>{if(u.categorysNum=0,!!i){i.list.forEach(s=>{const w=u.categorys[s.category];u.categorys[s.category]=w&&w.length?[...w,s]:[s],u.categoryNames[s.category]=s.categoryName,u.categorys.all.push(s)});for(const s in u.categorys)u.categorysNum+=1,u.menuOptions.push({key:s,label:u.categoryNames[s]});le(u.categorys),$.value=u.menuOptions[0].key}},{immediate:!0});const ie=i=>{u.selectOptions=u.categorys[i]},K=Fe(),H=(i,s)=>{Q(s.chartKey,Re(s)),Q(s.conKey,$e(s)),i.dataTransfer.setData(Oe.DRAG_KEY,Se(gt(s,["image"]))),K.setEditCanvas(X.IS_CREATE,!0)},V=()=>{K.setEditCanvas(X.IS_CREATE,!1)};return(i,s)=>{const w=E("n-select"),z=E("n-icon"),q=E("n-scrollbar"),re=E("n-menu");return r(),v("div",ft,[e.menu=="Charts"||e.menu=="Tables"?(r(),v("div",yt,[g(w,{class:"dimension-btn",value:h.value,"onUpdate:value":[s[0]||(s[0]=m=>h.value=m),I],options:n(c)},null,8,["value","options"]),d("div",Ct,[bt,g(z,{size:"16",component:x.value?n(l):n(o),onClick:ce},null,8,["component"])]),d("div",kt,[g(q,null,{default:D(()=>[(r(!0),v(P,null,R(n(p),(m,Xt)=>(r(),v("div",{key:m.id,class:"tree-item"},[d("div",null,[d("div",Ot,[g(z,{size:"16",component:C.value[m.id]?n(l):n(o),onClick:_=>G(m.id)},null,8,["component","onClick"]),d("label",{title:m.title,class:"text-nowrap label-title"},S(m.title),9,St),d("label",Et,S(m.count),1)]),m.child&&C.value[m.id]?(r(!0),v(P,{key:0},R(m.child,_=>(r(),v("div",{class:"tree-child",key:_.id},[_.type!="chapter"?(r(),v("div",{key:0,class:"item-box",draggable:"",onDragstart:b=>H(b,_.chartConfig),onDragend:V},[g(n(W),{class:"list-img",chartConfig:_.chartConfig},null,8,["chartConfig"]),d("span",{title:_.title},S(_.title),9,xt)],40,It)):k("",!0),_.type=="chapter"?(r(),v("div",wt,[g(z,{size:"16",component:C.value[_.id]?n(l):n(o),onClick:b=>G(_.id)},null,8,["component","onClick"]),d("label",{title:_.title,class:"text-nowrap"},S(_.title),9,At)])):k("",!0),_.child&&C.value[_.id]?(r(!0),v(P,{key:2},R(_.child,b=>(r(),v("div",{class:"tree-child",key:_.id},[b.type!="chapter"?(r(),v("div",{key:0,class:"item-box",draggable:"",onDragstart:ue=>H(ue,b.chartConfig),onDragend:V},[g(n(W),{class:"list-img",chartConfig:b.chartConfig},null,8,["chartConfig"]),d("span",{title:b.title,class:"text-nowrap"},S(b.title),9,Lt)],40,Dt)):k("",!0)]))),128)):k("",!0)]))),128)):k("",!0)])]))),128))]),_:1})])])):k("",!0),e.menu!="Charts"&&e.menu!="Tables"?(r(),v("div",Tt,[g(re,{class:"chart-menu-width",value:$.value,"onUpdate:value":[s[1]||(s[1]=m=>$.value=m),ie],options:n(u).menuOptions,"icon-size":16,indent:18},null,8,["value","options"]),d("div",Nt,[g(q,null,{default:D(()=>[g(n(a),{menuOptions:n(u).selectOptions},null,8,["menuOptions"])]),_:1})])])):k("",!0)])}}});var Rt=se(Pt,[["__scopeId","data-v-7c147ecc"]]);const $t=xe(),zt=y($t.getAppTheme);oe();const{getCharts:Ft}=we(oe()),Bt=Ae({id:"usePackagesStore",state:()=>({packagesList:Object.freeze(ze)}),getters:{getPackagesList(){return this.packagesList}}}),{TableSplitIcon:Ut,RoadmapIcon:Gt,SpellCheckIcon:Kt,GraphicalDataFlowIcon:Ht}=ne.carbon,{getPackagesList:Z}=Bt(),O=[],ee={[T.CHARTS]:{icon:L(Gt),label:N.CHARTS},[T.INFORMATIONS]:{icon:L(Kt),label:N.INFORMATIONS},[T.TABLES]:{icon:L(Ut),label:N.TABLES},[T.DECORATES]:{icon:L(Ht),label:N.DECORATES}},Vt=()=>{for(const e in Z)O.push({key:e,icon:ee[e].icon,label:ee[e].label,list:Z[e]})};Vt();O[0].key;const A=y(O[0].key),B=y(O[0]),Mt=e=>{for(const t in O)O[t].key==e&&(B.value=O[t])};const jt={class:"menu-width-box"},Yt={class:"menu-component-box"},qt=U({__name:"index",setup(e){return De(t=>({"7563b37f":n(zt)})),(t,a)=>{const l=E("n-tab-pane"),o=E("n-tabs");return r(),F(n(Ne),{class:Te(["go-content-charts",{scoped:!n(Ft)}]),backIcon:!1},{default:D(()=>[d("aside",null,[d("div",jt,[g(o,{value:n(A),"onUpdate:value":[a[0]||(a[0]=c=>Le(A)?A.value=c:null),n(Mt)],class:"tabs-box",size:"small",type:"segment"},{default:D(()=>[(r(!0),v(P,null,R(n(O),c=>(r(),F(l,{key:c.key,name:c.key,size:"small","display-directive":"show:lazy"},{tab:D(()=>[d("span",null,S(c.label),1)]),_:2},1032,["name"]))),128))]),_:1},8,["value","onUpdate:value"]),d("div",Yt,[n(B)?(r(),F(n(Rt),{selectOptions:n(B),menu:n(A),key:n(A)},null,8,["selectOptions","menu"])):k("",!0)])])])]),_:1},8,["class"])}}});var Jt=se(qt,[["__scopeId","data-v-7ab8059c"]]),oa=Object.freeze(Object.defineProperty({__proto__:null,default:Jt},Symbol.toStringTag,{value:"Module"}));export{W as _,oa as i,gt as o};
